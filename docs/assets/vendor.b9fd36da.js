import wTe from"buffer/";function x6(e,t){const r=Object.create(null),a=e.split(",");for(let n=0;n<a.length;n++)r[a[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const TTe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ATe=x6(TTe);function $j(e){return!!e||e===""}function b6(e){if(bi(e)){const t={};for(let r=0;r<e.length;r++){const a=e[r],n=Wu(a)?kTe(a):b6(a);if(n)for(const o in n)t[o]=n[o]}return t}else{if(Wu(e))return e;if(Pu(e))return e}}const STe=/;(?![^(]*\))/g,MTe=/:(.+)/;function kTe(e){const t={};return e.split(STe).forEach(r=>{if(r){const a=r.split(MTe);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function _6(e){let t="";if(Wu(e))t=e;else if(bi(e))for(let r=0;r<e.length;r++){const a=_6(e[r]);a&&(t+=a+" ")}else if(Pu(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const dCt=e=>e==null?"":bi(e)||Pu(e)&&(e.toString===Vj||!Ci(e.toString))?JSON.stringify(e,Uj,2):String(e),Uj=(e,t)=>t&&t.__v_isRef?Uj(e,t.value):u_(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[a,n])=>(r[`${a} =>`]=n,r),{})}:Hj(t)?{[`Set(${t.size})`]:[...t.values()]}:Pu(t)&&!bi(t)&&!jj(t)?String(t):t,ws={},l_=[],Fd=()=>{},ETe=()=>!1,CTe=/^on[^a-z]/,Ck=e=>CTe.test(e),w6=e=>e.startsWith("onUpdate:"),tc=Object.assign,T6=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},LTe=Object.prototype.hasOwnProperty,mo=(e,t)=>LTe.call(e,t),bi=Array.isArray,u_=e=>Lk(e)==="[object Map]",Hj=e=>Lk(e)==="[object Set]",Ci=e=>typeof e=="function",Wu=e=>typeof e=="string",A6=e=>typeof e=="symbol",Pu=e=>e!==null&&typeof e=="object",Gj=e=>Pu(e)&&Ci(e.then)&&Ci(e.catch),Vj=Object.prototype.toString,Lk=e=>Vj.call(e),PTe=e=>Lk(e).slice(8,-1),jj=e=>Lk(e)==="[object Object]",S6=e=>Wu(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Pk=x6(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ik=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},ITe=/-(\w)/g,Np=Ik(e=>e.replace(ITe,(t,r)=>r?r.toUpperCase():"")),DTe=/\B([A-Z])/g,f_=Ik(e=>e.replace(DTe,"-$1").toLowerCase()),Dk=Ik(e=>e.charAt(0).toUpperCase()+e.slice(1)),M6=Ik(e=>e?`on${Dk(e)}`:""),Rk=(e,t)=>!Object.is(e,t),k6=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},zk=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},RTe=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qj;const zTe=()=>qj||(qj=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let j1;const Fk=[];class FTe{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&j1&&(this.parent=j1,this.index=(j1.scopes||(j1.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(Fk.push(this),j1=this)}off(){this.active&&(Fk.pop(),j1=Fk[Fk.length-1])}stop(t){if(this.active){if(this.effects.forEach(r=>r.stop()),this.cleanups.forEach(r=>r()),this.scopes&&this.scopes.forEach(r=>r.stop(!0)),this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function OTe(e,t){t=t||j1,t&&t.active&&t.effects.push(e)}const E6=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Yj=e=>(e.w&Jm)>0,Wj=e=>(e.n&Jm)>0,NTe=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Jm},BTe=e=>{const{deps:t}=e;if(t.length){let r=0;for(let a=0;a<t.length;a++){const n=t[a];Yj(n)&&!Wj(n)?n.delete(e):t[r++]=n,n.w&=~Jm,n.n&=~Jm}t.length=r}},C6=new WeakMap;let O3=0,Jm=1;const L6=30,N3=[];let q1;const Y1=Symbol(""),P6=Symbol("");class I6{constructor(t,r=null,a){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],OTe(this,a)}run(){if(!this.active)return this.fn();if(!N3.includes(this))try{return N3.push(q1=this),$Te(),Jm=1<<++O3,O3<=L6?NTe(this):Xj(this),this.fn()}finally{O3<=L6&&BTe(this),Jm=1<<--O3,W1(),N3.pop();const t=N3.length;q1=t>0?N3[t-1]:void 0}}stop(){this.active&&(Xj(this),this.onStop&&this.onStop(),this.active=!1)}}function Xj(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let c_=!0;const D6=[];function h_(){D6.push(c_),c_=!1}function $Te(){D6.push(c_),c_=!0}function W1(){const e=D6.pop();c_=e===void 0?!0:e}function Vh(e,t,r){if(!Zj())return;let a=C6.get(e);a||C6.set(e,a=new Map);let n=a.get(r);n||a.set(r,n=E6()),Kj(n)}function Zj(){return c_&&q1!==void 0}function Kj(e,t){let r=!1;O3<=L6?Wj(e)||(e.n|=Jm,r=!Yj(e)):r=!e.has(q1),r&&(e.add(q1),q1.deps.push(e))}function Ig(e,t,r,a,n,o){const i=C6.get(e);if(!i)return;let s=[];if(t==="clear")s=[...i.values()];else if(r==="length"&&bi(e))i.forEach((l,u)=>{(u==="length"||u>=a)&&s.push(l)});else switch(r!==void 0&&s.push(i.get(r)),t){case"add":bi(e)?S6(r)&&s.push(i.get("length")):(s.push(i.get(Y1)),u_(e)&&s.push(i.get(P6)));break;case"delete":bi(e)||(s.push(i.get(Y1)),u_(e)&&s.push(i.get(P6)));break;case"set":u_(e)&&s.push(i.get(Y1));break}if(s.length===1)s[0]&&R6(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);R6(E6(l))}}function R6(e,t){for(const r of bi(e)?e:[...e])(r!==q1||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const UTe=x6("__proto__,__v_isRef,__isVue"),Jj=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(A6)),HTe=z6(),GTe=z6(!1,!0),VTe=z6(!0),Qj=jTe();function jTe(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const a=Zo(this);for(let o=0,i=this.length;o<i;o++)Vh(a,"get",o+"");const n=a[t](...r);return n===-1||n===!1?a[t](...r.map(Zo)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){h_();const a=Zo(this)[t].apply(this,r);return W1(),a}}),e}function z6(e=!1,t=!1){return function(a,n,o){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_raw"&&o===(e?t?sAe:lq:t?sq:oq).get(a))return a;const i=bi(a);if(!e&&i&&mo(Qj,n))return Reflect.get(Qj,n,o);const s=Reflect.get(a,n,o);return(A6(n)?Jj.has(n):UTe(n))||(e||Vh(a,"get",n),t)?s:rh(s)?!i||!S6(n)?s.value:s:Pu(s)?e?uq(s):N6(s):s}}const qTe=eq(),YTe=eq(!0);function eq(e=!1){return function(r,a,n,o){let i=r[a];if(!e&&!$6(n)&&(n=Zo(n),i=Zo(i),!bi(r)&&rh(i)&&!rh(n)))return i.value=n,!0;const s=bi(r)&&S6(a)?Number(a)<r.length:mo(r,a),l=Reflect.set(r,a,n,o);return r===Zo(o)&&(s?Rk(n,i)&&Ig(r,"set",a,n):Ig(r,"add",a,n)),l}}function WTe(e,t){const r=mo(e,t);e[t];const a=Reflect.deleteProperty(e,t);return a&&r&&Ig(e,"delete",t,void 0),a}function XTe(e,t){const r=Reflect.has(e,t);return(!A6(t)||!Jj.has(t))&&Vh(e,"has",t),r}function ZTe(e){return Vh(e,"iterate",bi(e)?"length":Y1),Reflect.ownKeys(e)}const tq={get:HTe,set:qTe,deleteProperty:WTe,has:XTe,ownKeys:ZTe},KTe={get:VTe,set(e,t){return!0},deleteProperty(e,t){return!0}},JTe=tc({},tq,{get:GTe,set:YTe}),F6=e=>e,Ok=e=>Reflect.getPrototypeOf(e);function Nk(e,t,r=!1,a=!1){e=e.__v_raw;const n=Zo(e),o=Zo(t);t!==o&&!r&&Vh(n,"get",t),!r&&Vh(n,"get",o);const{has:i}=Ok(n),s=a?F6:r?H6:U6;if(i.call(n,t))return s(e.get(t));if(i.call(n,o))return s(e.get(o));e!==n&&e.get(t)}function Bk(e,t=!1){const r=this.__v_raw,a=Zo(r),n=Zo(e);return e!==n&&!t&&Vh(a,"has",e),!t&&Vh(a,"has",n),e===n?r.has(e):r.has(e)||r.has(n)}function $k(e,t=!1){return e=e.__v_raw,!t&&Vh(Zo(e),"iterate",Y1),Reflect.get(e,"size",e)}function rq(e){e=Zo(e);const t=Zo(this);return Ok(t).has.call(t,e)||(t.add(e),Ig(t,"add",e,e)),this}function aq(e,t){t=Zo(t);const r=Zo(this),{has:a,get:n}=Ok(r);let o=a.call(r,e);o||(e=Zo(e),o=a.call(r,e));const i=n.call(r,e);return r.set(e,t),o?Rk(t,i)&&Ig(r,"set",e,t):Ig(r,"add",e,t),this}function nq(e){const t=Zo(this),{has:r,get:a}=Ok(t);let n=r.call(t,e);n||(e=Zo(e),n=r.call(t,e)),a&&a.call(t,e);const o=t.delete(e);return n&&Ig(t,"delete",e,void 0),o}function iq(){const e=Zo(this),t=e.size!==0,r=e.clear();return t&&Ig(e,"clear",void 0,void 0),r}function Uk(e,t){return function(a,n){const o=this,i=o.__v_raw,s=Zo(i),l=t?F6:e?H6:U6;return!e&&Vh(s,"iterate",Y1),i.forEach((u,f)=>a.call(n,l(u),l(f),o))}}function Hk(e,t,r){return function(...a){const n=this.__v_raw,o=Zo(n),i=u_(o),s=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=n[e](...a),f=r?F6:t?H6:U6;return!t&&Vh(o,"iterate",l?P6:Y1),{next(){const{value:c,done:h}=u.next();return h?{value:c,done:h}:{value:s?[f(c[0]),f(c[1])]:f(c),done:h}},[Symbol.iterator](){return this}}}}function Qm(e){return function(...t){return e==="delete"?!1:this}}function QTe(){const e={get(o){return Nk(this,o)},get size(){return $k(this)},has:Bk,add:rq,set:aq,delete:nq,clear:iq,forEach:Uk(!1,!1)},t={get(o){return Nk(this,o,!1,!0)},get size(){return $k(this)},has:Bk,add:rq,set:aq,delete:nq,clear:iq,forEach:Uk(!1,!0)},r={get(o){return Nk(this,o,!0)},get size(){return $k(this,!0)},has(o){return Bk.call(this,o,!0)},add:Qm("add"),set:Qm("set"),delete:Qm("delete"),clear:Qm("clear"),forEach:Uk(!0,!1)},a={get(o){return Nk(this,o,!0,!0)},get size(){return $k(this,!0)},has(o){return Bk.call(this,o,!0)},add:Qm("add"),set:Qm("set"),delete:Qm("delete"),clear:Qm("clear"),forEach:Uk(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Hk(o,!1,!1),r[o]=Hk(o,!0,!1),t[o]=Hk(o,!1,!0),a[o]=Hk(o,!0,!0)}),[e,r,t,a]}const[eAe,tAe,rAe,aAe]=QTe();function O6(e,t){const r=t?e?aAe:rAe:e?tAe:eAe;return(a,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?a:Reflect.get(mo(r,n)&&n in a?r:a,n,o)}const nAe={get:O6(!1,!1)},iAe={get:O6(!1,!0)},oAe={get:O6(!0,!1)},oq=new WeakMap,sq=new WeakMap,lq=new WeakMap,sAe=new WeakMap;function lAe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uAe(e){return e.__v_skip||!Object.isExtensible(e)?0:lAe(PTe(e))}function N6(e){return e&&e.__v_isReadonly?e:B6(e,!1,tq,nAe,oq)}function fAe(e){return B6(e,!1,JTe,iAe,sq)}function uq(e){return B6(e,!0,KTe,oAe,lq)}function B6(e,t,r,a,n){if(!Pu(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=n.get(e);if(o)return o;const i=uAe(e);if(i===0)return e;const s=new Proxy(e,i===2?a:r);return n.set(e,s),s}function v_(e){return $6(e)?v_(e.__v_raw):!!(e&&e.__v_isReactive)}function $6(e){return!!(e&&e.__v_isReadonly)}function fq(e){return v_(e)||$6(e)}function Zo(e){const t=e&&e.__v_raw;return t?Zo(t):e}function cq(e){return zk(e,"__v_skip",!0),e}const U6=e=>Pu(e)?N6(e):e,H6=e=>Pu(e)?uq(e):e;function cAe(e){Zj()&&(e=Zo(e),e.dep||(e.dep=E6()),Kj(e.dep))}function hAe(e,t){e=Zo(e),e.dep&&R6(e.dep)}function rh(e){return Boolean(e&&e.__v_isRef===!0)}function vAe(e){return rh(e)?e.value:e}const dAe={get:(e,t,r)=>vAe(Reflect.get(e,t,r)),set:(e,t,r,a)=>{const n=e[t];return rh(n)&&!rh(r)?(n.value=r,!0):Reflect.set(e,t,r,a)}};function hq(e){return v_(e)?e:new Proxy(e,dAe)}class pAe{constructor(t,r,a){this._setter=r,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new I6(t,()=>{this._dirty||(this._dirty=!0,hAe(this))}),this.__v_isReadonly=a}get value(){const t=Zo(this);return cAe(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function gAe(e,t){let r,a;const n=Ci(e);return n?(r=e,a=Fd):(r=e.get,a=e.set),new pAe(r,a,n||!a)}Promise.resolve();function mAe(e,t,...r){const a=e.vnode.props||ws;let n=r;const o=t.startsWith("update:"),i=o&&t.slice(7);if(i&&i in a){const f=`${i==="modelValue"?"model":i}Modifiers`,{number:c,trim:h}=a[f]||ws;h?n=r.map(v=>v.trim()):c&&(n=r.map(RTe))}let s,l=a[s=M6(t)]||a[s=M6(Np(t))];!l&&o&&(l=a[s=M6(f_(t))]),l&&Od(l,e,6,n);const u=a[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Od(u,e,6,n)}}function vq(e,t,r=!1){const a=t.emitsCache,n=a.get(e);if(n!==void 0)return n;const o=e.emits;let i={},s=!1;if(!Ci(e)){const l=u=>{const f=vq(u,t,!0);f&&(s=!0,tc(i,f))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(a.set(e,null),null):(bi(o)?o.forEach(l=>i[l]=null):tc(i,o),a.set(e,i),i)}function G6(e,t){return!e||!Ck(t)?!1:(t=t.slice(2).replace(/Once$/,""),mo(e,t[0].toLowerCase()+t.slice(1))||mo(e,f_(t))||mo(e,t))}let Bp=null,dq=null;function Gk(e){const t=Bp;return Bp=e,dq=e&&e.type.__scopeId||null,t}function yAe(e,t=Bp,r){if(!t||e._n)return e;const a=(...n)=>{a._d&&Fq(-1);const o=Gk(t),i=e(...n);return Gk(o),a._d&&Fq(1),i};return a._n=!0,a._c=!0,a._d=!0,a}function V6(e){const{type:t,vnode:r,proxy:a,withProxy:n,props:o,propsOptions:[i],slots:s,attrs:l,emit:u,render:f,renderCache:c,data:h,setupState:v,ctx:p,inheritAttrs:d}=e;let g,m;const y=Gk(e);try{if(r.shapeFlag&4){const S=n||a;g=Up(f.call(S,S,c,o,v,h,p)),m=l}else{const S=t;g=Up(S.length>1?S(o,{attrs:l,slots:s,emit:u}):S(o,null)),m=t.props?l:xAe(l)}}catch(S){B3.length=0,Jk(S,e,1),g=$p(J1)}let _=g;if(m&&d!==!1){const S=Object.keys(m),{shapeFlag:M}=_;S.length&&M&(1|6)&&(i&&S.some(w6)&&(m=bAe(m,i)),_=U3(_,m))}return r.dirs&&(_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),g=_,Gk(y),g}const xAe=e=>{let t;for(const r in e)(r==="class"||r==="style"||Ck(r))&&((t||(t={}))[r]=e[r]);return t},bAe=(e,t)=>{const r={};for(const a in e)(!w6(a)||!(a.slice(9)in t))&&(r[a]=e[a]);return r};function _Ae(e,t,r){const{props:a,children:n,component:o}=e,{props:i,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return a?pq(a,i,u):!!i;if(l&8){const f=t.dynamicProps;for(let c=0;c<f.length;c++){const h=f[c];if(i[h]!==a[h]&&!G6(u,h))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:a===i?!1:a?i?pq(a,i,u):!0:!!i;return!1}function pq(e,t,r){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let n=0;n<a.length;n++){const o=a[n];if(t[o]!==e[o]&&!G6(r,o))return!0}return!1}function wAe({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const TAe=e=>e.__isSuspense;function AAe(e,t){t&&t.pendingBranch?bi(e)?t.effects.push(...e):t.effects.push(e):SSe(e)}function SAe(e,t){if(Xu){let r=Xu.provides;const a=Xu.parent&&Xu.parent.provides;a===r&&(r=Xu.provides=Object.create(a)),r[e]=t}}function j6(e,t,r=!1){const a=Xu||Bp;if(a){const n=a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&Ci(t)?t.call(a.proxy):t}}function pCt(e){return Ci(e)?{setup:e,name:e.name}:e}const q6=e=>!!e.type.__asyncLoader,gq=e=>e.type.__isKeepAlive;function MAe(e,t){mq(e,"a",t)}function kAe(e,t){mq(e,"da",t)}function mq(e,t,r=Xu){const a=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Vk(t,a,r),r){let n=r.parent;for(;n&&n.parent;)gq(n.parent.vnode)&&EAe(a,t,r,n),n=n.parent}}function EAe(e,t,r,a){const n=Vk(t,e,a,!0);yq(()=>{T6(a[t],n)},r)}function Vk(e,t,r=Xu,a=!1){if(r){const n=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...i)=>{if(r.isUnmounted)return;h_(),d_(r);const s=Od(t,r,e,i);return ex(),W1(),s});return a?n.unshift(o):n.push(o),o}}const Dg=e=>(t,r=Xu)=>(!Kk||e==="sp")&&Vk(e,t,r),CAe=Dg("bm"),LAe=Dg("m"),PAe=Dg("bu"),IAe=Dg("u"),DAe=Dg("bum"),yq=Dg("um"),RAe=Dg("sp"),zAe=Dg("rtg"),FAe=Dg("rtc");function OAe(e,t=Xu){Vk("ec",e,t)}let Y6=!0;function NAe(e){const t=_q(e),r=e.proxy,a=e.ctx;Y6=!1,t.beforeCreate&&xq(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:s,provide:l,inject:u,created:f,beforeMount:c,mounted:h,beforeUpdate:v,updated:p,activated:d,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:S,render:M,renderTracked:w,renderTriggered:A,errorCaptured:k,serverPrefetch:T,expose:L,inheritAttrs:C,components:I,directives:R,filters:B}=t;if(u&&BAe(u,a,null,e.appContext.config.unwrapInjectedRef),i)for(const O in i){const $=i[O];Ci($)&&(a[O]=$.bind(r))}if(n){const O=n.call(r,r);Pu(O)&&(e.data=N6(O))}if(Y6=!0,o)for(const O in o){const $=o[O],Y=Ci($)?$.bind(r,r):Ci($.get)?$.get.bind(r,r):Fd,X=!Ci($)&&Ci($.set)?$.set.bind(r):Fd,ee=gAe({get:Y,set:X});Object.defineProperty(a,O,{enumerable:!0,configurable:!0,get:()=>ee.value,set:Q=>ee.value=Q})}if(s)for(const O in s)bq(s[O],a,r,O);if(l){const O=Ci(l)?l.call(r):l;Reflect.ownKeys(O).forEach($=>{SAe($,O[$])})}f&&xq(f,e,"c");function D(O,$){bi($)?$.forEach(Y=>O(Y.bind(r))):$&&O($.bind(r))}if(D(CAe,c),D(LAe,h),D(PAe,v),D(IAe,p),D(MAe,d),D(kAe,g),D(OAe,k),D(FAe,w),D(zAe,A),D(DAe,y),D(yq,S),D(RAe,T),bi(L))if(L.length){const O=e.exposed||(e.exposed={});L.forEach($=>{Object.defineProperty(O,$,{get:()=>r[$],set:Y=>r[$]=Y})})}else e.exposed||(e.exposed={});M&&e.render===Fd&&(e.render=M),C!=null&&(e.inheritAttrs=C),I&&(e.components=I),R&&(e.directives=R)}function BAe(e,t,r=Fd,a=!1){bi(e)&&(e=W6(e));for(const n in e){const o=e[n];let i;Pu(o)?"default"in o?i=j6(o.from||n,o.default,!0):i=j6(o.from||n):i=j6(o),rh(i)&&a?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):t[n]=i}}function xq(e,t,r){Od(bi(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,r)}function bq(e,t,r,a){const n=a.includes(".")?Jq(r,a):()=>r[a];if(Wu(e)){const o=t[e];Ci(o)&&oR(n,o)}else if(Ci(e))oR(n,e.bind(r));else if(Pu(e))if(bi(e))e.forEach(o=>bq(o,t,r,a));else{const o=Ci(e.handler)?e.handler.bind(r):t[e.handler];Ci(o)&&oR(n,o,e)}}function _q(e){const t=e.type,{mixins:r,extends:a}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,s=o.get(t);let l;return s?l=s:!n.length&&!r&&!a?l=t:(l={},n.length&&n.forEach(u=>jk(l,u,i,!0)),jk(l,t,i)),o.set(t,l),l}function jk(e,t,r,a=!1){const{mixins:n,extends:o}=t;o&&jk(e,o,r,!0),n&&n.forEach(i=>jk(e,i,r,!0));for(const i in t)if(!(a&&i==="expose")){const s=$Ae[i]||r&&r[i];e[i]=s?s(e[i],t[i]):t[i]}return e}const $Ae={data:wq,props:X1,emits:X1,methods:X1,computed:X1,beforeCreate:rc,created:rc,beforeMount:rc,mounted:rc,beforeUpdate:rc,updated:rc,beforeDestroy:rc,beforeUnmount:rc,destroyed:rc,unmounted:rc,activated:rc,deactivated:rc,errorCaptured:rc,serverPrefetch:rc,components:X1,directives:X1,watch:HAe,provide:wq,inject:UAe};function wq(e,t){return t?e?function(){return tc(Ci(e)?e.call(this,this):e,Ci(t)?t.call(this,this):t)}:t:e}function UAe(e,t){return X1(W6(e),W6(t))}function W6(e){if(bi(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function rc(e,t){return e?[...new Set([].concat(e,t))]:t}function X1(e,t){return e?tc(tc(Object.create(null),e),t):t}function HAe(e,t){if(!e)return t;if(!t)return e;const r=tc(Object.create(null),e);for(const a in t)r[a]=rc(e[a],t[a]);return r}function GAe(e,t,r,a=!1){const n={},o={};zk(o,Wk,1),e.propsDefaults=Object.create(null),Tq(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);r?e.props=a?n:fAe(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function VAe(e,t,r,a){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,s=Zo(n),[l]=e.propsOptions;let u=!1;if((a||i>0)&&!(i&16)){if(i&8){const f=e.vnode.dynamicProps;for(let c=0;c<f.length;c++){let h=f[c];const v=t[h];if(l)if(mo(o,h))v!==o[h]&&(o[h]=v,u=!0);else{const p=Np(h);n[p]=X6(l,s,p,v,e,!1)}else v!==o[h]&&(o[h]=v,u=!0)}}}else{Tq(e,t,n,o)&&(u=!0);let f;for(const c in s)(!t||!mo(t,c)&&((f=f_(c))===c||!mo(t,f)))&&(l?r&&(r[c]!==void 0||r[f]!==void 0)&&(n[c]=X6(l,s,c,void 0,e,!0)):delete n[c]);if(o!==s)for(const c in o)(!t||!mo(t,c))&&(delete o[c],u=!0)}u&&Ig(e,"set","$attrs")}function Tq(e,t,r,a){const[n,o]=e.propsOptions;let i=!1,s;if(t)for(let l in t){if(Pk(l))continue;const u=t[l];let f;n&&mo(n,f=Np(l))?!o||!o.includes(f)?r[f]=u:(s||(s={}))[f]=u:G6(e.emitsOptions,l)||(!(l in a)||u!==a[l])&&(a[l]=u,i=!0)}if(o){const l=Zo(r),u=s||ws;for(let f=0;f<o.length;f++){const c=o[f];r[c]=X6(n,l,c,u[c],e,!mo(u,c))}}return i}function X6(e,t,r,a,n,o){const i=e[r];if(i!=null){const s=mo(i,"default");if(s&&a===void 0){const l=i.default;if(i.type!==Function&&Ci(l)){const{propsDefaults:u}=n;r in u?a=u[r]:(d_(n),a=u[r]=l.call(null,t),ex())}else a=l}i[0]&&(o&&!s?a=!1:i[1]&&(a===""||a===f_(r))&&(a=!0))}return a}function Aq(e,t,r=!1){const a=t.propsCache,n=a.get(e);if(n)return n;const o=e.props,i={},s=[];let l=!1;if(!Ci(e)){const f=c=>{l=!0;const[h,v]=Aq(c,t,!0);tc(i,h),v&&s.push(...v)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!l)return a.set(e,l_),l_;if(bi(o))for(let f=0;f<o.length;f++){const c=Np(o[f]);Sq(c)&&(i[c]=ws)}else if(o)for(const f in o){const c=Np(f);if(Sq(c)){const h=o[f],v=i[c]=bi(h)||Ci(h)?{type:h}:h;if(v){const p=Eq(Boolean,v.type),d=Eq(String,v.type);v[0]=p>-1,v[1]=d<0||p<d,(p>-1||mo(v,"default"))&&s.push(c)}}}const u=[i,s];return a.set(e,u),u}function Sq(e){return e[0]!=="$"}function Mq(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function kq(e,t){return Mq(e)===Mq(t)}function Eq(e,t){return bi(t)?t.findIndex(r=>kq(r,e)):Ci(t)&&kq(t,e)?0:-1}const Cq=e=>e[0]==="_"||e==="$stable",Z6=e=>bi(e)?e.map(Up):[Up(e)],jAe=(e,t,r)=>{const a=yAe((...n)=>Z6(t(...n)),r);return a._c=!1,a},Lq=(e,t,r)=>{const a=e._ctx;for(const n in e){if(Cq(n))continue;const o=e[n];if(Ci(o))t[n]=jAe(n,o,a);else if(o!=null){const i=Z6(o);t[n]=()=>i}}},Pq=(e,t)=>{const r=Z6(t);e.slots.default=()=>r},qAe=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Zo(t),zk(t,"_",r)):Lq(t,e.slots={})}else e.slots={},t&&Pq(e,t);zk(e.slots,Wk,1)},YAe=(e,t,r)=>{const{vnode:a,slots:n}=e;let o=!0,i=ws;if(a.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(tc(n,t),!r&&s===1&&delete n._):(o=!t.$stable,Lq(t,n)),i=t}else t&&(Pq(e,t),i={default:1});if(o)for(const s in n)!Cq(s)&&!(s in i)&&delete n[s]};function Z1(e,t,r,a){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const s=n[i];o&&(s.oldValue=o[i].value);let l=s.dir[a];l&&(h_(),Od(l,r,8,[e.el,s,e,t]),W1())}}function Iq(){return{app:null,config:{isNativeTag:ETe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WAe=0;function XAe(e,t){return function(a,n=null){n!=null&&!Pu(n)&&(n=null);const o=Iq(),i=new Set;let s=!1;const l=o.app={_uid:WAe++,_component:a,_props:n,_container:null,_context:o,_instance:null,version:kSe,get config(){return o.config},set config(u){},use(u,...f){return i.has(u)||(u&&Ci(u.install)?(i.add(u),u.install(l,...f)):Ci(u)&&(i.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,c){if(!s){const h=$p(a,n);return h.appContext=o,f&&t?t(h,u):e(h,u,c),s=!0,l._container=u,u.__vue_app__=l,tR(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l}};return l}}function K6(e,t,r,a,n=!1){if(bi(e)){e.forEach((h,v)=>K6(h,t&&(bi(t)?t[v]:t),r,a,n));return}if(q6(a)&&!n)return;const o=a.shapeFlag&4?tR(a.component)||a.component.proxy:a.el,i=n?null:o,{i:s,r:l}=e,u=t&&t.r,f=s.refs===ws?s.refs={}:s.refs,c=s.setupState;if(u!=null&&u!==l&&(Wu(u)?(f[u]=null,mo(c,u)&&(c[u]=null)):rh(u)&&(u.value=null)),Ci(l))ty(l,s,12,[i,f]);else{const h=Wu(l),v=rh(l);if(h||v){const p=()=>{if(e.f){const d=h?f[l]:l.value;n?bi(d)&&T6(d,o):bi(d)?d.includes(o)||d.push(o):h?f[l]=[o]:(l.value=[o],e.k&&(f[e.k]=l.value))}else h?(f[l]=i,mo(c,l)&&(c[l]=i)):rh(l)&&(l.value=i,e.k&&(f[e.k]=i))};i?(p.id=-1,ah(p,r)):p()}}}const ah=AAe;function ZAe(e){return KAe(e)}function KAe(e,t){const r=zTe();r.__VUE__=!0;const{insert:a,remove:n,patchProp:o,createElement:i,createText:s,createComment:l,setText:u,setElementText:f,parentNode:c,nextSibling:h,setScopeId:v=Fd,cloneNode:p,insertStaticContent:d}=e,g=(re,se,de,Me=null,Ie=null,Ee=null,qe=!1,be=null,oe=!!se.dynamicChildren)=>{if(re===se)return;re&&!$3(re,se)&&(Me=Te(re),Z(re,Ie,Ee,!0),re=null),se.patchFlag===-2&&(oe=!1,se.dynamicChildren=null);const{type:ce,ref:ue,shapeFlag:Re}=se;switch(ce){case J6:m(re,se,de,Me);break;case J1:y(re,se,de,Me);break;case qk:re==null&&_(se,de,Me,qe);break;case Rg:R(re,se,de,Me,Ie,Ee,qe,be,oe);break;default:Re&1?w(re,se,de,Me,Ie,Ee,qe,be,oe):Re&6?B(re,se,de,Me,Ie,Ee,qe,be,oe):(Re&64||Re&128)&&ce.process(re,se,de,Me,Ie,Ee,qe,be,oe,xe)}ue!=null&&Ie&&K6(ue,re&&re.ref,Ee,se||re,!se)},m=(re,se,de,Me)=>{if(re==null)a(se.el=s(se.children),de,Me);else{const Ie=se.el=re.el;se.children!==re.children&&u(Ie,se.children)}},y=(re,se,de,Me)=>{re==null?a(se.el=l(se.children||""),de,Me):se.el=re.el},_=(re,se,de,Me)=>{[re.el,re.anchor]=d(re.children,se,de,Me)},S=({el:re,anchor:se},de,Me)=>{let Ie;for(;re&&re!==se;)Ie=h(re),a(re,de,Me),re=Ie;a(se,de,Me)},M=({el:re,anchor:se})=>{let de;for(;re&&re!==se;)de=h(re),n(re),re=de;n(se)},w=(re,se,de,Me,Ie,Ee,qe,be,oe)=>{qe=qe||se.type==="svg",re==null?A(se,de,Me,Ie,Ee,qe,be,oe):L(re,se,Ie,Ee,qe,be,oe)},A=(re,se,de,Me,Ie,Ee,qe,be)=>{let oe,ce;const{type:ue,props:Re,shapeFlag:Xe,transition:Ke,patchFlag:vt,dirs:Ze}=re;if(re.el&&p!==void 0&&vt===-1)oe=re.el=p(re.el);else{if(oe=re.el=i(re.type,Ee,Re&&Re.is,Re),Xe&8?f(oe,re.children):Xe&16&&T(re.children,oe,null,Me,Ie,Ee&&ue!=="foreignObject",qe,be),Ze&&Z1(re,null,Me,"created"),Re){for(const Je in Re)Je!=="value"&&!Pk(Je)&&o(oe,Je,null,Re[Je],Ee,re.children,Me,Ie,we);"value"in Re&&o(oe,"value",null,Re.value),(ce=Re.onVnodeBeforeMount)&&Hp(ce,Me,re)}k(oe,re,re.scopeId,qe,Me)}Ze&&Z1(re,null,Me,"beforeMount");const Qe=(!Ie||Ie&&!Ie.pendingBranch)&&Ke&&!Ke.persisted;Qe&&Ke.beforeEnter(oe),a(oe,se,de),((ce=Re&&Re.onVnodeMounted)||Qe||Ze)&&ah(()=>{ce&&Hp(ce,Me,re),Qe&&Ke.enter(oe),Ze&&Z1(re,null,Me,"mounted")},Ie)},k=(re,se,de,Me,Ie)=>{if(de&&v(re,de),Me)for(let Ee=0;Ee<Me.length;Ee++)v(re,Me[Ee]);if(Ie){let Ee=Ie.subTree;if(se===Ee){const qe=Ie.vnode;k(re,qe,qe.scopeId,qe.slotScopeIds,Ie.parent)}}},T=(re,se,de,Me,Ie,Ee,qe,be,oe=0)=>{for(let ce=oe;ce<re.length;ce++){const ue=re[ce]=be?ey(re[ce]):Up(re[ce]);g(null,ue,se,de,Me,Ie,Ee,qe,be)}},L=(re,se,de,Me,Ie,Ee,qe)=>{const be=se.el=re.el;let{patchFlag:oe,dynamicChildren:ce,dirs:ue}=se;oe|=re.patchFlag&16;const Re=re.props||ws,Xe=se.props||ws;let Ke;de&&K1(de,!1),(Ke=Xe.onVnodeBeforeUpdate)&&Hp(Ke,de,se,re),ue&&Z1(se,re,de,"beforeUpdate"),de&&K1(de,!0);const vt=Ie&&se.type!=="foreignObject";if(ce?C(re.dynamicChildren,ce,be,de,Me,vt,Ee):qe||Y(re,se,be,null,de,Me,vt,Ee,!1),oe>0){if(oe&16)I(be,se,Re,Xe,de,Me,Ie);else if(oe&2&&Re.class!==Xe.class&&o(be,"class",null,Xe.class,Ie),oe&4&&o(be,"style",Re.style,Xe.style,Ie),oe&8){const Ze=se.dynamicProps;for(let Qe=0;Qe<Ze.length;Qe++){const Je=Ze[Qe],je=Re[Je],$e=Xe[Je];($e!==je||Je==="value")&&o(be,Je,je,$e,Ie,re.children,de,Me,we)}}oe&1&&re.children!==se.children&&f(be,se.children)}else!qe&&ce==null&&I(be,se,Re,Xe,de,Me,Ie);((Ke=Xe.onVnodeUpdated)||ue)&&ah(()=>{Ke&&Hp(Ke,de,se,re),ue&&Z1(se,re,de,"updated")},Me)},C=(re,se,de,Me,Ie,Ee,qe)=>{for(let be=0;be<se.length;be++){const oe=re[be],ce=se[be],ue=oe.el&&(oe.type===Rg||!$3(oe,ce)||oe.shapeFlag&(6|64))?c(oe.el):de;g(oe,ce,ue,null,Me,Ie,Ee,qe,!0)}},I=(re,se,de,Me,Ie,Ee,qe)=>{if(de!==Me){for(const be in Me){if(Pk(be))continue;const oe=Me[be],ce=de[be];oe!==ce&&be!=="value"&&o(re,be,ce,oe,qe,se.children,Ie,Ee,we)}if(de!==ws)for(const be in de)!Pk(be)&&!(be in Me)&&o(re,be,de[be],null,qe,se.children,Ie,Ee,we);"value"in Me&&o(re,"value",de.value,Me.value)}},R=(re,se,de,Me,Ie,Ee,qe,be,oe)=>{const ce=se.el=re?re.el:s(""),ue=se.anchor=re?re.anchor:s("");let{patchFlag:Re,dynamicChildren:Xe,slotScopeIds:Ke}=se;Ke&&(be=be?be.concat(Ke):Ke),re==null?(a(ce,de,Me),a(ue,de,Me),T(se.children,de,ue,Ie,Ee,qe,be,oe)):Re>0&&Re&64&&Xe&&re.dynamicChildren?(C(re.dynamicChildren,Xe,de,Ie,Ee,qe,be),(se.key!=null||Ie&&se===Ie.subTree)&&Dq(re,se,!0)):Y(re,se,de,ue,Ie,Ee,qe,be,oe)},B=(re,se,de,Me,Ie,Ee,qe,be,oe)=>{se.slotScopeIds=be,re==null?se.shapeFlag&512?Ie.ctx.activate(se,de,Me,qe,oe):N(se,de,Me,Ie,Ee,qe,oe):D(re,se,oe)},N=(re,se,de,Me,Ie,Ee,qe)=>{const be=re.component=vSe(re,Me,Ie);if(gq(re)&&(be.ctx.renderer=xe),dSe(be),be.asyncDep){if(Ie&&Ie.registerDep(be,O),!re.el){const oe=be.subTree=$p(J1);y(null,oe,se,de)}return}O(be,re,se,de,Ie,Ee,qe)},D=(re,se,de)=>{const Me=se.component=re.component;if(_Ae(re,se,de))if(Me.asyncDep&&!Me.asyncResolved){$(Me,se,de);return}else Me.next=se,TSe(Me.update),Me.update();else se.component=re.component,se.el=re.el,Me.vnode=se},O=(re,se,de,Me,Ie,Ee,qe)=>{const be=()=>{if(re.isMounted){let{next:ue,bu:Re,u:Xe,parent:Ke,vnode:vt}=re,Ze=ue,Qe;K1(re,!1),ue?(ue.el=vt.el,$(re,ue,qe)):ue=vt,Re&&k6(Re),(Qe=ue.props&&ue.props.onVnodeBeforeUpdate)&&Hp(Qe,Ke,ue,vt),K1(re,!0);const Je=V6(re),je=re.subTree;re.subTree=Je,g(je,Je,c(je.el),Te(je),re,Ie,Ee),ue.el=Je.el,Ze===null&&wAe(re,Je.el),Xe&&ah(Xe,Ie),(Qe=ue.props&&ue.props.onVnodeUpdated)&&ah(()=>Hp(Qe,Ke,ue,vt),Ie)}else{let ue;const{el:Re,props:Xe}=se,{bm:Ke,m:vt,parent:Ze}=re,Qe=q6(se);if(K1(re,!1),Ke&&k6(Ke),!Qe&&(ue=Xe&&Xe.onVnodeBeforeMount)&&Hp(ue,Ze,se),K1(re,!0),Re&&ye){const Je=()=>{re.subTree=V6(re),ye(Re,re.subTree,re,Ie,null)};Qe?se.type.__asyncLoader().then(()=>!re.isUnmounted&&Je()):Je()}else{const Je=re.subTree=V6(re);g(null,Je,de,Me,re,Ie,Ee),se.el=Je.el}if(vt&&ah(vt,Ie),!Qe&&(ue=Xe&&Xe.onVnodeMounted)){const Je=se;ah(()=>Hp(ue,Ze,Je),Ie)}se.shapeFlag&256&&re.a&&ah(re.a,Ie),re.isMounted=!0,se=de=Me=null}},oe=re.effect=new I6(be,()=>jq(re.update),re.scope),ce=re.update=oe.run.bind(oe);ce.id=re.uid,K1(re,!0),ce()},$=(re,se,de)=>{se.component=re;const Me=re.vnode.props;re.vnode=se,re.next=null,VAe(re,se.props,Me,de),YAe(re,se.children,de),h_(),iR(void 0,re.update),W1()},Y=(re,se,de,Me,Ie,Ee,qe,be,oe=!1)=>{const ce=re&&re.children,ue=re?re.shapeFlag:0,Re=se.children,{patchFlag:Xe,shapeFlag:Ke}=se;if(Xe>0){if(Xe&128){ee(ce,Re,de,Me,Ie,Ee,qe,be,oe);return}else if(Xe&256){X(ce,Re,de,Me,Ie,Ee,qe,be,oe);return}}Ke&8?(ue&16&&we(ce,Ie,Ee),Re!==ce&&f(de,Re)):ue&16?Ke&16?ee(ce,Re,de,Me,Ie,Ee,qe,be,oe):we(ce,Ie,Ee,!0):(ue&8&&f(de,""),Ke&16&&T(Re,de,Me,Ie,Ee,qe,be,oe))},X=(re,se,de,Me,Ie,Ee,qe,be,oe)=>{re=re||l_,se=se||l_;const ce=re.length,ue=se.length,Re=Math.min(ce,ue);let Xe;for(Xe=0;Xe<Re;Xe++){const Ke=se[Xe]=oe?ey(se[Xe]):Up(se[Xe]);g(re[Xe],Ke,de,null,Ie,Ee,qe,be,oe)}ce>ue?we(re,Ie,Ee,!0,!1,Re):T(se,de,Me,Ie,Ee,qe,be,oe,Re)},ee=(re,se,de,Me,Ie,Ee,qe,be,oe)=>{let ce=0;const ue=se.length;let Re=re.length-1,Xe=ue-1;for(;ce<=Re&&ce<=Xe;){const Ke=re[ce],vt=se[ce]=oe?ey(se[ce]):Up(se[ce]);if($3(Ke,vt))g(Ke,vt,de,null,Ie,Ee,qe,be,oe);else break;ce++}for(;ce<=Re&&ce<=Xe;){const Ke=re[Re],vt=se[Xe]=oe?ey(se[Xe]):Up(se[Xe]);if($3(Ke,vt))g(Ke,vt,de,null,Ie,Ee,qe,be,oe);else break;Re--,Xe--}if(ce>Re){if(ce<=Xe){const Ke=Xe+1,vt=Ke<ue?se[Ke].el:Me;for(;ce<=Xe;)g(null,se[ce]=oe?ey(se[ce]):Up(se[ce]),de,vt,Ie,Ee,qe,be,oe),ce++}}else if(ce>Xe)for(;ce<=Re;)Z(re[ce],Ie,Ee,!0),ce++;else{const Ke=ce,vt=ce,Ze=new Map;for(ce=vt;ce<=Xe;ce++){const Pt=se[ce]=oe?ey(se[ce]):Up(se[ce]);Pt.key!=null&&Ze.set(Pt.key,ce)}let Qe,Je=0;const je=Xe-vt+1;let $e=!1,Ye=0;const yt=new Array(je);for(ce=0;ce<je;ce++)yt[ce]=0;for(ce=Ke;ce<=Re;ce++){const Pt=re[ce];if(Je>=je){Z(Pt,Ie,Ee,!0);continue}let Tt;if(Pt.key!=null)Tt=Ze.get(Pt.key);else for(Qe=vt;Qe<=Xe;Qe++)if(yt[Qe-vt]===0&&$3(Pt,se[Qe])){Tt=Qe;break}Tt===void 0?Z(Pt,Ie,Ee,!0):(yt[Tt-vt]=ce+1,Tt>=Ye?Ye=Tt:$e=!0,g(Pt,se[Tt],de,null,Ie,Ee,qe,be,oe),Je++)}const _t=$e?JAe(yt):l_;for(Qe=_t.length-1,ce=je-1;ce>=0;ce--){const Pt=vt+ce,Tt=se[Pt],Ot=Pt+1<ue?se[Pt+1].el:Me;yt[ce]===0?g(null,Tt,de,Ot,Ie,Ee,qe,be,oe):$e&&(Qe<0||ce!==_t[Qe]?Q(Tt,de,Ot,2):Qe--)}}},Q=(re,se,de,Me,Ie=null)=>{const{el:Ee,type:qe,transition:be,children:oe,shapeFlag:ce}=re;if(ce&6){Q(re.component.subTree,se,de,Me);return}if(ce&128){re.suspense.move(se,de,Me);return}if(ce&64){qe.move(re,se,de,xe);return}if(qe===Rg){a(Ee,se,de);for(let Re=0;Re<oe.length;Re++)Q(oe[Re],se,de,Me);a(re.anchor,se,de);return}if(qe===qk){S(re,se,de);return}if(Me!==2&&ce&1&&be)if(Me===0)be.beforeEnter(Ee),a(Ee,se,de),ah(()=>be.enter(Ee),Ie);else{const{leave:Re,delayLeave:Xe,afterLeave:Ke}=be,vt=()=>a(Ee,se,de),Ze=()=>{Re(Ee,()=>{vt(),Ke&&Ke()})};Xe?Xe(Ee,vt,Ze):Ze()}else a(Ee,se,de)},Z=(re,se,de,Me=!1,Ie=!1)=>{const{type:Ee,props:qe,ref:be,children:oe,dynamicChildren:ce,shapeFlag:ue,patchFlag:Re,dirs:Xe}=re;if(be!=null&&K6(be,null,de,re,!0),ue&256){se.ctx.deactivate(re);return}const Ke=ue&1&&Xe,vt=!q6(re);let Ze;if(vt&&(Ze=qe&&qe.onVnodeBeforeUnmount)&&Hp(Ze,se,re),ue&6)ie(re.component,de,Me);else{if(ue&128){re.suspense.unmount(de,Me);return}Ke&&Z1(re,null,se,"beforeUnmount"),ue&64?re.type.remove(re,se,de,Ie,xe,Me):ce&&(Ee!==Rg||Re>0&&Re&64)?we(ce,se,de,!1,!0):(Ee===Rg&&Re&(128|256)||!Ie&&ue&16)&&we(oe,se,de),Me&&q(re)}(vt&&(Ze=qe&&qe.onVnodeUnmounted)||Ke)&&ah(()=>{Ze&&Hp(Ze,se,re),Ke&&Z1(re,null,se,"unmounted")},de)},q=re=>{const{type:se,el:de,anchor:Me,transition:Ie}=re;if(se===Rg){ae(de,Me);return}if(se===qk){M(re);return}const Ee=()=>{n(de),Ie&&!Ie.persisted&&Ie.afterLeave&&Ie.afterLeave()};if(re.shapeFlag&1&&Ie&&!Ie.persisted){const{leave:qe,delayLeave:be}=Ie,oe=()=>qe(de,Ee);be?be(re.el,Ee,oe):oe()}else Ee()},ae=(re,se)=>{let de;for(;re!==se;)de=h(re),n(re),re=de;n(se)},ie=(re,se,de)=>{const{bum:Me,scope:Ie,update:Ee,subTree:qe,um:be}=re;Me&&k6(Me),Ie.stop(),Ee&&(Ee.active=!1,Z(qe,re,se,de)),be&&ah(be,se),ah(()=>{re.isUnmounted=!0},se),se&&se.pendingBranch&&!se.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===se.pendingId&&(se.deps--,se.deps===0&&se.resolve())},we=(re,se,de,Me=!1,Ie=!1,Ee=0)=>{for(let qe=Ee;qe<re.length;qe++)Z(re[qe],se,de,Me,Ie)},Te=re=>re.shapeFlag&6?Te(re.component.subTree):re.shapeFlag&128?re.suspense.next():h(re.anchor||re.el),he=(re,se,de)=>{re==null?se._vnode&&Z(se._vnode,null,null,!0):g(se._vnode||null,re,se,null,null,null,de),Wq(),se._vnode=re},xe={p:g,um:Z,m:Q,r:q,mt:N,mc:T,pc:Y,pbc:C,n:Te,o:e};let Se,ye;return t&&([Se,ye]=t(xe)),{render:he,hydrate:Se,createApp:XAe(he,Se)}}function K1({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Dq(e,t,r=!1){const a=e.children,n=t.children;if(bi(a)&&bi(n))for(let o=0;o<a.length;o++){const i=a[o];let s=n[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[o]=ey(n[o]),s.el=i.el),r||Dq(i,s))}}function JAe(e){const t=e.slice(),r=[0];let a,n,o,i,s;const l=e.length;for(a=0;a<l;a++){const u=e[a];if(u!==0){if(n=r[r.length-1],e[n]<u){t[a]=n,r.push(a);continue}for(o=0,i=r.length-1;o<i;)s=o+i>>1,e[r[s]]<u?o=s+1:i=s;u<e[r[o]]&&(o>0&&(t[a]=r[o-1]),r[o]=a)}}for(o=r.length,i=r[o-1];o-- >0;)r[o]=i,i=t[i];return r}const QAe=e=>e.__isTeleport,Rq="components";function gCt(e,t){return tSe(Rq,e,!0,t)||e}const eSe=Symbol();function tSe(e,t,r=!0,a=!1){const n=Bp||Xu;if(n){const o=n.type;if(e===Rq){const s=ySe(o);if(s&&(s===t||s===Np(t)||s===Dk(Np(t))))return o}const i=zq(n[e]||o[e],t)||zq(n.appContext[e],t);return!i&&a?o:i}}function zq(e,t){return e&&(e[t]||e[Np(t)]||e[Dk(Np(t))])}const Rg=Symbol(void 0),J6=Symbol(void 0),J1=Symbol(void 0),qk=Symbol(void 0),B3=[];let Q1=null;function rSe(e=!1){B3.push(Q1=e?null:[])}function aSe(){B3.pop(),Q1=B3[B3.length-1]||null}let Yk=1;function Fq(e){Yk+=e}function Oq(e){return e.dynamicChildren=Yk>0?Q1||l_:null,aSe(),Yk>0&&Q1&&Q1.push(e),e}function mCt(e,t,r,a,n,o){return Oq(Bq(e,t,r,a,n,o,!0))}function nSe(e,t,r,a,n){return Oq($p(e,t,r,a,n,!0))}function iSe(e){return e?e.__v_isVNode===!0:!1}function $3(e,t){return e.type===t.type&&e.key===t.key}const Wk="__vInternal",Nq=({key:e})=>e!=null?e:null,Xk=({ref:e,ref_key:t,ref_for:r})=>e!=null?Wu(e)||rh(e)||Ci(e)?{i:Bp,r:e,k:t,f:!!r}:e:null;function Bq(e,t=null,r=null,a=0,n=null,o=e===Rg?0:1,i=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Nq(t),ref:t&&Xk(t),scopeId:dq,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:a,dynamicProps:n,dynamicChildren:null,appContext:null};return s?(Q6(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=Wu(r)?8:16),Yk>0&&!i&&Q1&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Q1.push(l),l}const $p=oSe;function oSe(e,t=null,r=null,a=0,n=null,o=!1){if((!e||e===eSe)&&(e=J1),iSe(e)){const s=U3(e,t,!0);return r&&Q6(s,r),s}if(xSe(e)&&(e=e.__vccOpts),t){t=sSe(t);let{class:s,style:l}=t;s&&!Wu(s)&&(t.class=_6(s)),Pu(l)&&(fq(l)&&!bi(l)&&(l=tc({},l)),t.style=b6(l))}const i=Wu(e)?1:TAe(e)?128:QAe(e)?64:Pu(e)?4:Ci(e)?2:0;return Bq(e,t,r,a,n,i,o,!0)}function sSe(e){return e?fq(e)||Wk in e?tc({},e):e:null}function U3(e,t,r=!1){const{props:a,ref:n,patchFlag:o,children:i}=e,s=t?uSe(a||{},t):a;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&Nq(s),ref:t&&t.ref?r&&n?bi(n)?n.concat(Xk(t)):[n,Xk(t)]:Xk(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Rg?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&U3(e.ssContent),ssFallback:e.ssFallback&&U3(e.ssFallback),el:e.el,anchor:e.anchor}}function lSe(e=" ",t=0){return $p(J6,null,e,t)}function yCt(e,t){const r=$p(qk,null,e);return r.staticCount=t,r}function xCt(e="",t=!1){return t?(rSe(),nSe(J1,null,e)):$p(J1,null,e)}function Up(e){return e==null||typeof e=="boolean"?$p(J1):bi(e)?$p(Rg,null,e.slice()):typeof e=="object"?ey(e):$p(J6,null,String(e))}function ey(e){return e.el===null||e.memo?e:U3(e)}function Q6(e,t){let r=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(bi(t))r=16;else if(typeof t=="object")if(a&(1|64)){const n=t.default;n&&(n._c&&(n._d=!1),Q6(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(Wk in t)?t._ctx=Bp:n===3&&Bp&&(Bp.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ci(t)?(t={default:t,_ctx:Bp},r=32):(t=String(t),a&64?(r=16,t=[lSe(t)]):r=8);e.children=t,e.shapeFlag|=r}function uSe(...e){const t={};for(let r=0;r<e.length;r++){const a=e[r];for(const n in a)if(n==="class")t.class!==a.class&&(t.class=_6([t.class,a.class]));else if(n==="style")t.style=b6([t.style,a.style]);else if(Ck(n)){const o=t[n],i=a[n];o!==i&&!(bi(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=a[n])}return t}function Hp(e,t,r,a=null){Od(e,t,7,[r,a])}function bCt(e,t,r,a){let n;const o=r&&r[a];if(bi(e)||Wu(e)){n=new Array(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=t(e[i],i,void 0,o&&o[i])}else if(typeof e=="number"){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,o&&o[i])}else if(Pu(e))if(e[Symbol.iterator])n=Array.from(e,(i,s)=>t(i,s,void 0,o&&o[s]));else{const i=Object.keys(e);n=new Array(i.length);for(let s=0,l=i.length;s<l;s++){const u=i[s];n[s]=t(e[u],u,s,o&&o[s])}}else n=[];return r&&(r[a]=n),n}const eR=e=>e?$q(e)?tR(e)||e.proxy:eR(e.parent):null,Zk=tc(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eR(e.parent),$root:e=>eR(e.root),$emit:e=>e.emit,$options:e=>_q(e),$forceUpdate:e=>()=>jq(e.update),$nextTick:e=>_Se.bind(e.proxy),$watch:e=>MSe.bind(e)}),fSe={get({_:e},t){const{ctx:r,setupState:a,data:n,props:o,accessCache:i,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const v=i[t];if(v!==void 0)switch(v){case 1:return a[t];case 2:return n[t];case 4:return r[t];case 3:return o[t]}else{if(a!==ws&&mo(a,t))return i[t]=1,a[t];if(n!==ws&&mo(n,t))return i[t]=2,n[t];if((u=e.propsOptions[0])&&mo(u,t))return i[t]=3,o[t];if(r!==ws&&mo(r,t))return i[t]=4,r[t];Y6&&(i[t]=0)}}const f=Zk[t];let c,h;if(f)return t==="$attrs"&&Vh(e,"get",t),f(e);if((c=s.__cssModules)&&(c=c[t]))return c;if(r!==ws&&mo(r,t))return i[t]=4,r[t];if(h=l.config.globalProperties,mo(h,t))return h[t]},set({_:e},t,r){const{data:a,setupState:n,ctx:o}=e;if(n!==ws&&mo(n,t))n[t]=r;else if(a!==ws&&mo(a,t))a[t]=r;else if(mo(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:a,appContext:n,propsOptions:o}},i){let s;return!!r[i]||e!==ws&&mo(e,i)||t!==ws&&mo(t,i)||(s=o[0])&&mo(s,i)||mo(a,i)||mo(Zk,i)||mo(n.config.globalProperties,i)}},cSe=Iq();let hSe=0;function vSe(e,t,r){const a=e.type,n=(t?t.appContext:e.appContext)||cSe,o={uid:hSe++,vnode:e,type:a,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new FTe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Aq(a,n),emitsOptions:vq(a,n),emit:null,emitted:null,propsDefaults:ws,inheritAttrs:a.inheritAttrs,ctx:ws,data:ws,props:ws,attrs:ws,slots:ws,refs:ws,setupState:ws,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=mAe.bind(null,o),e.ce&&e.ce(o),o}let Xu=null;const d_=e=>{Xu=e,e.scope.on()},ex=()=>{Xu&&Xu.scope.off(),Xu=null};function $q(e){return e.vnode.shapeFlag&4}let Kk=!1;function dSe(e,t=!1){Kk=t;const{props:r,children:a}=e.vnode,n=$q(e);GAe(e,r,n,t),qAe(e,a);const o=n?pSe(e,t):void 0;return Kk=!1,o}function pSe(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=cq(new Proxy(e.ctx,fSe));const{setup:a}=r;if(a){const n=e.setupContext=a.length>1?mSe(e):null;d_(e),h_();const o=ty(a,e,0,[e.props,n]);if(W1(),ex(),Gj(o)){if(o.then(ex,ex),t)return o.then(i=>{Uq(e,i,t)}).catch(i=>{Jk(i,e,0)});e.asyncDep=o}else Uq(e,o,t)}else Gq(e,t)}function Uq(e,t,r){Ci(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pu(t)&&(e.setupState=hq(t)),Gq(e,r)}let Hq;function Gq(e,t,r){const a=e.type;if(!e.render){if(!t&&Hq&&!a.render){const n=a.template;if(n){const{isCustomElement:o,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:l}=a,u=tc(tc({isCustomElement:o,delimiters:s},i),l);a.render=Hq(n,u)}}e.render=a.render||Fd}d_(e),h_(),NAe(e),W1(),ex()}function gSe(e){return new Proxy(e.attrs,{get(t,r){return Vh(e,"get","$attrs"),t[r]}})}function mSe(e){const t=a=>{e.exposed=a||{}};let r;return{get attrs(){return r||(r=gSe(e))},slots:e.slots,emit:e.emit,expose:t}}function tR(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(hq(cq(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Zk)return Zk[r](e)}}))}function ySe(e){return Ci(e)&&e.displayName||e.name}function xSe(e){return Ci(e)&&"__vccOpts"in e}function ty(e,t,r,a){let n;try{n=a?e(...a):e()}catch(o){Jk(o,t,r)}return n}function Od(e,t,r,a){if(Ci(e)){const o=ty(e,t,r,a);return o&&Gj(o)&&o.catch(i=>{Jk(i,t,r)}),o}const n=[];for(let o=0;o<e.length;o++)n.push(Od(e[o],t,r,a));return n}function Jk(e,t,r,a=!0){const n=t?t.vnode:null;if(t){let o=t.parent;const i=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,i,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){ty(l,null,10,[e,i,s]);return}}bSe(e,r,n,a)}function bSe(e,t,r,a=!0){console.error(e)}let Qk=!1,rR=!1;const jh=[];let zg=0;const H3=[];let G3=null,p_=0;const V3=[];let ry=null,g_=0;const Vq=Promise.resolve();let aR=null,nR=null;function _Se(e){const t=aR||Vq;return e?t.then(this?e.bind(this):e):t}function wSe(e){let t=zg+1,r=jh.length;for(;t<r;){const a=t+r>>>1;j3(jh[a])<e?t=a+1:r=a}return t}function jq(e){(!jh.length||!jh.includes(e,Qk&&e.allowRecurse?zg+1:zg))&&e!==nR&&(e.id==null?jh.push(e):jh.splice(wSe(e.id),0,e),qq())}function qq(){!Qk&&!rR&&(rR=!0,aR=Vq.then(Xq))}function TSe(e){const t=jh.indexOf(e);t>zg&&jh.splice(t,1)}function Yq(e,t,r,a){bi(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?a+1:a))&&r.push(e),qq()}function ASe(e){Yq(e,G3,H3,p_)}function SSe(e){Yq(e,ry,V3,g_)}function iR(e,t=null){if(H3.length){for(nR=t,G3=[...new Set(H3)],H3.length=0,p_=0;p_<G3.length;p_++)G3[p_]();G3=null,p_=0,nR=null,iR(e,t)}}function Wq(e){if(V3.length){const t=[...new Set(V3)];if(V3.length=0,ry){ry.push(...t);return}for(ry=t,ry.sort((r,a)=>j3(r)-j3(a)),g_=0;g_<ry.length;g_++)ry[g_]();ry=null,g_=0}}const j3=e=>e.id==null?1/0:e.id;function Xq(e){rR=!1,Qk=!0,iR(e),jh.sort((r,a)=>j3(r)-j3(a));const t=Fd;try{for(zg=0;zg<jh.length;zg++){const r=jh[zg];r&&r.active!==!1&&ty(r,null,14)}}finally{zg=0,jh.length=0,Wq(),Qk=!1,aR=null,(jh.length||H3.length||V3.length)&&Xq(e)}}const Zq={};function oR(e,t,r){return Kq(e,t,r)}function Kq(e,t,{immediate:r,deep:a,flush:n,onTrack:o,onTrigger:i}=ws){const s=Xu;let l,u=!1,f=!1;if(rh(e)?(l=()=>e.value,u=!!e._shallow):v_(e)?(l=()=>e,a=!0):bi(e)?(f=!0,u=e.some(v_),l=()=>e.map(m=>{if(rh(m))return m.value;if(v_(m))return m_(m);if(Ci(m))return ty(m,s,2)})):Ci(e)?t?l=()=>ty(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return c&&c(),Od(e,s,3,[h])}:l=Fd,t&&a){const m=l;l=()=>m_(m())}let c,h=m=>{c=g.onStop=()=>{ty(m,s,4)}};if(Kk)return h=Fd,t?r&&Od(t,s,3,[l(),f?[]:void 0,h]):l(),Fd;let v=f?[]:Zq;const p=()=>{if(!!g.active)if(t){const m=g.run();(a||u||(f?m.some((y,_)=>Rk(y,v[_])):Rk(m,v)))&&(c&&c(),Od(t,s,3,[m,v===Zq?void 0:v,h]),v=m)}else g.run()};p.allowRecurse=!!t;let d;n==="sync"?d=p:n==="post"?d=()=>ah(p,s&&s.suspense):d=()=>{!s||s.isMounted?ASe(p):p()};const g=new I6(l,d);return t?r?p():v=g.run():n==="post"?ah(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&T6(s.scope.effects,g)}}function MSe(e,t,r){const a=this.proxy,n=Wu(e)?e.includes(".")?Jq(a,e):()=>a[e]:e.bind(a,a);let o;Ci(t)?o=t:(o=t.handler,r=t);const i=Xu;d_(this);const s=Kq(n,o.bind(a),r);return i?d_(i):ex(),s}function Jq(e,t){const r=t.split(".");return()=>{let a=e;for(let n=0;n<r.length&&a;n++)a=a[r[n]];return a}}function m_(e,t){if(!Pu(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),rh(e))m_(e.value,t);else if(bi(e))for(let r=0;r<e.length;r++)m_(e[r],t);else if(Hj(e)||u_(e))e.forEach(r=>{m_(r,t)});else if(jj(e))for(const r in e)m_(e[r],t);return e}const kSe="3.2.26",ESe="http://www.w3.org/2000/svg",y_=typeof document!="undefined"?document:null,Qq=new Map,CSe={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,a)=>{const n=t?y_.createElementNS(ESe,e):y_.createElement(e,r?{is:r}:void 0);return e==="select"&&a&&a.multiple!=null&&n.setAttribute("multiple",a.multiple),n},createText:e=>y_.createTextNode(e),createComment:e=>y_.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>y_.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,a){const n=r?r.previousSibling:t.lastChild;let o=Qq.get(e);if(!o){const i=y_.createElement("template");if(i.innerHTML=a?`<svg>${e}</svg>`:e,o=i.content,a){const s=o.firstChild;for(;s.firstChild;)o.appendChild(s.firstChild);o.removeChild(s)}Qq.set(e,o)}return t.insertBefore(o.cloneNode(!0),r),[n?n.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function LSe(e,t,r){const a=e._vtc;a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function PSe(e,t,r){const a=e.style,n=Wu(r);if(r&&!n){for(const o in r)sR(a,o,r[o]);if(t&&!Wu(t))for(const o in t)r[o]==null&&sR(a,o,"")}else{const o=a.display;n?t!==r&&(a.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(a.display=o)}}const eY=/\s*!important$/;function sR(e,t,r){if(bi(r))r.forEach(a=>sR(e,t,a));else if(t.startsWith("--"))e.setProperty(t,r);else{const a=ISe(e,t);eY.test(r)?e.setProperty(f_(a),r.replace(eY,""),"important"):e[a]=r}}const tY=["Webkit","Moz","ms"],lR={};function ISe(e,t){const r=lR[t];if(r)return r;let a=Np(t);if(a!=="filter"&&a in e)return lR[t]=a;a=Dk(a);for(let n=0;n<tY.length;n++){const o=tY[n]+a;if(o in e)return lR[t]=o}return t}const rY="http://www.w3.org/1999/xlink";function DSe(e,t,r,a,n){if(a&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(rY,t.slice(6,t.length)):e.setAttributeNS(rY,t,r);else{const o=ATe(t);r==null||o&&!$j(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function RSe(e,t,r,a,n,o,i){if(t==="innerHTML"||t==="textContent"){a&&i(a,n,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const s=r==null?"":r;(e.value!==s||e.tagName==="OPTION")&&(e.value=s),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const s=typeof e[t];if(s==="boolean"){e[t]=$j(r);return}else if(r==null&&s==="string"){e[t]="",e.removeAttribute(t);return}else if(s==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch{}}let e5=Date.now,aY=!1;if(typeof window!="undefined"){e5()>document.createEvent("Event").timeStamp&&(e5=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);aY=!!(e&&Number(e[1])<=53)}let uR=0;const zSe=Promise.resolve(),FSe=()=>{uR=0},OSe=()=>uR||(zSe.then(FSe),uR=e5());function NSe(e,t,r,a){e.addEventListener(t,r,a)}function BSe(e,t,r,a){e.removeEventListener(t,r,a)}function $Se(e,t,r,a,n=null){const o=e._vei||(e._vei={}),i=o[t];if(a&&i)i.value=a;else{const[s,l]=USe(t);if(a){const u=o[t]=HSe(a,n);NSe(e,s,u,l)}else i&&(BSe(e,s,i,l),o[t]=void 0)}}const nY=/(?:Once|Passive|Capture)$/;function USe(e){let t;if(nY.test(e)){t={};let r;for(;r=e.match(nY);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[f_(e.slice(2)),t]}function HSe(e,t){const r=a=>{const n=a.timeStamp||e5();(aY||n>=r.attached-1)&&Od(GSe(a,r.value),t,5,[a])};return r.value=e,r.attached=OSe(),r}function GSe(e,t){if(bi(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(a=>n=>!n._stopped&&a(n))}else return t}const iY=/^on[a-z]/,VSe=(e,t,r,a,n=!1,o,i,s,l)=>{t==="class"?LSe(e,a,n):t==="style"?PSe(e,r,a):Ck(t)?w6(t)||$Se(e,t,r,a,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jSe(e,t,a,n))?RSe(e,t,a,o,i,s,l):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),DSe(e,t,a,n))};function jSe(e,t,r,a){return a?!!(t==="innerHTML"||t==="textContent"||t in e&&iY.test(t)&&Ci(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||iY.test(t)&&Wu(r)?!1:t in e}const qSe=["ctrl","shift","alt","meta"],YSe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qSe.some(r=>e[`${r}Key`]&&!t.includes(r))},_Ct=(e,t)=>(r,...a)=>{for(let n=0;n<t.length;n++){const o=YSe[t[n]];if(o&&o(r,t))return}return e(r,...a)},WSe=tc({patchProp:VSe},CSe);let oY;function XSe(){return oY||(oY=ZAe(WSe))}const wCt=(...e)=>{const t=XSe().createApp(...e),{mount:r}=t;return t.mount=a=>{const n=ZSe(a);if(!n)return;const o=t._component;!Ci(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.innerHTML="";const i=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};function ZSe(e){return Wu(e)?document.querySelector(e):e}var ll=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function qh(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),t}function t5(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sY={exports:{}};/* @license
Papa Parse
v5.3.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){(function(r,a){e.exports=a()})(ll,function r(){var a=typeof self!="undefined"?self:typeof window!="undefined"?window:a!==void 0?a:{},n=!a.document&&!!a.postMessage,o=n&&/blob:/i.test((a.location||{}).protocol),i={},s=0,l={parse:function(k,T){var L=(T=T||{}).dynamicTyping||!1;if(A(L)&&(T.dynamicTypingFunction=L,L={}),T.dynamicTyping=L,T.transform=!!A(T.transform)&&T.transform,T.worker&&l.WORKERS_SUPPORTED){var C=function(){if(!l.WORKERS_SUPPORTED)return!1;var R=(N=a.URL||a.webkitURL||null,D=r.toString(),l.BLOB_URL||(l.BLOB_URL=N.createObjectURL(new Blob(["(",D,")();"],{type:"text/javascript"})))),B=new a.Worker(R),N,D;return B.onmessage=y,B.id=s++,i[B.id]=B}();return C.userStep=T.step,C.userChunk=T.chunk,C.userComplete=T.complete,C.userError=T.error,T.step=A(T.step),T.chunk=A(T.chunk),T.complete=A(T.complete),T.error=A(T.error),delete T.worker,void C.postMessage({input:k,config:T,workerId:C.id})}var I=null;return l.NODE_STREAM_INPUT,typeof k=="string"?I=T.download?new c(T):new v(T):k.readable===!0&&A(k.read)&&A(k.on)?I=new p(T):(a.File&&k instanceof File||k instanceof Object)&&(I=new h(T)),I.stream(k)},unparse:function(k,T){var L=!1,C=!0,I=",",R=`\r
`,B='"',N=B+B,D=!1,O=null,$=!1;(function(){if(typeof T=="object"){if(typeof T.delimiter!="string"||l.BAD_DELIMITERS.filter(function(Q){return T.delimiter.indexOf(Q)!==-1}).length||(I=T.delimiter),(typeof T.quotes=="boolean"||typeof T.quotes=="function"||Array.isArray(T.quotes))&&(L=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(D=T.skipEmptyLines),typeof T.newline=="string"&&(R=T.newline),typeof T.quoteChar=="string"&&(B=T.quoteChar),typeof T.header=="boolean"&&(C=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");O=T.columns}T.escapeChar!==void 0&&(N=T.escapeChar+B),typeof T.escapeFormulae=="boolean"&&($=T.escapeFormulae)}})();var Y=new RegExp(g(B),"g");if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return X(null,k,D);if(typeof k[0]=="object")return X(O||Object.keys(k[0]),k,D)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),X(k.fields||[],k.data||[],D);throw new Error("Unable to serialize unrecognized input");function X(Q,Z,q){var ae="";typeof Q=="string"&&(Q=JSON.parse(Q)),typeof Z=="string"&&(Z=JSON.parse(Z));var ie=Array.isArray(Q)&&0<Q.length,we=!Array.isArray(Z[0]);if(ie&&C){for(var Te=0;Te<Q.length;Te++)0<Te&&(ae+=I),ae+=ee(Q[Te],Te);0<Z.length&&(ae+=R)}for(var he=0;he<Z.length;he++){var xe=ie?Q.length:Z[he].length,Se=!1,ye=ie?Object.keys(Z[he]).length===0:Z[he].length===0;if(q&&!ie&&(Se=q==="greedy"?Z[he].join("").trim()==="":Z[he].length===1&&Z[he][0].length===0),q==="greedy"&&ie){for(var re=[],se=0;se<xe;se++){var de=we?Q[se]:se;re.push(Z[he][de])}Se=re.join("").trim()===""}if(!Se){for(var Me=0;Me<xe;Me++){0<Me&&!ye&&(ae+=I);var Ie=ie&&we?Q[Me]:Me;ae+=ee(Z[he][Ie],Me)}he<Z.length-1&&(!q||0<xe&&!ye)&&(ae+=R)}}return ae}function ee(Q,Z){if(Q==null)return"";if(Q.constructor===Date)return JSON.stringify(Q).slice(1,25);$===!0&&typeof Q=="string"&&Q.match(/^[=+\-@].*$/)!==null&&(Q="'"+Q);var q=Q.toString().replace(Y,N),ae=typeof L=="boolean"&&L||typeof L=="function"&&L(Q,Z)||Array.isArray(L)&&L[Z]||function(ie,we){for(var Te=0;Te<we.length;Te++)if(-1<ie.indexOf(we[Te]))return!0;return!1}(q,l.BAD_DELIMITERS)||-1<q.indexOf(I)||q.charAt(0)===" "||q.charAt(q.length-1)===" ";return ae?B+q+B:q}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!n&&!!a.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=m,l.ParserHandle=d,l.NetworkStreamer=c,l.FileStreamer=h,l.StringStreamer=v,l.ReadableStreamStreamer=p,a.jQuery){var u=a.jQuery;u.fn.parse=function(k){var T=k.config||{},L=[];return this.each(function(R){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)L.push({file:this.files[B],inputElem:this,instanceConfig:u.extend({},T)})}),C(),this;function C(){if(L.length!==0){var R,B,N,D,O=L[0];if(A(k.before)){var $=k.before(O.file,O.inputElem);if(typeof $=="object"){if($.action==="abort")return R="AbortError",B=O.file,N=O.inputElem,D=$.reason,void(A(k.error)&&k.error({name:R},B,N,D));if($.action==="skip")return void I();typeof $.config=="object"&&(O.instanceConfig=u.extend(O.instanceConfig,$.config))}else if($==="skip")return void I()}var Y=O.instanceConfig.complete;O.instanceConfig.complete=function(X){A(Y)&&Y(X,O.file,O.inputElem),I()},l.parse(O.file,O.instanceConfig)}else A(k.complete)&&k.complete()}function I(){L.splice(0,1),C()}}}function f(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(T){var L=M(T);L.chunkSize=parseInt(L.chunkSize),T.step||T.chunk||(L.chunkSize=null),this._handle=new d(L),(this._handle.streamer=this)._config=L}.call(this,k),this.parseChunk=function(T,L){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(T);C!==void 0&&(T=C)}this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+T;this._partialLine="";var R=this._handle.parse(I,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var B=R.meta.cursor;this._finished||(this._partialLine=I.substring(B-this._baseIndex),this._baseIndex=B),R&&R.data&&(this._rowCount+=R.data.length);var N=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)a.postMessage({results:R,workerId:l.WORKER_ID,finished:N});else if(A(this._config.chunk)&&!L){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);R=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!N||!A(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(T){A(this._config.error)?this._config.error(T):o&&this._config.error&&a.postMessage({workerId:l.WORKER_ID,error:T,finished:!1})}}function c(k){var T;(k=k||{}).chunkSize||(k.chunkSize=l.RemoteChunkSize),f.call(this,k),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),n||(T.onload=w(this._chunkLoaded,this),T.onerror=w(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var L=this._config.downloadRequestHeaders;for(var C in L)T.setRequestHeader(C,L[C])}if(this._config.chunkSize){var I=this._start+this._config.chunkSize-1;T.setRequestHeader("Range","bytes="+this._start+"-"+I)}try{T.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}n&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:T.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(L){var C=L.getResponseHeader("Content-Range");return C===null?-1:parseInt(C.substring(C.lastIndexOf("/")+1))}(T),this.parseChunk(T.responseText)))},this._chunkError=function(L){var C=T.statusText||L;this._sendError(new Error(C))}}function h(k){var T,L;(k=k||{}).chunkSize||(k.chunkSize=l.LocalChunkSize),f.call(this,k);var C=typeof FileReader!="undefined";this.stream=function(I){this._input=I,L=I.slice||I.webkitSlice||I.mozSlice,C?((T=new FileReader).onload=w(this._chunkLoaded,this),T.onerror=w(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var I=this._input;if(this._config.chunkSize){var R=Math.min(this._start+this._config.chunkSize,this._input.size);I=L.call(I,this._start,R)}var B=T.readAsText(I,this._config.encoding);C||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(I){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(I.target.result)},this._chunkError=function(){this._sendError(T.error)}}function v(k){var T;f.call(this,k=k||{}),this.stream=function(L){return T=L,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var L,C=this._config.chunkSize;return C?(L=T.substring(0,C),T=T.substring(C)):(L=T,T=""),this._finished=!T,this.parseChunk(L)}}}function p(k){f.call(this,k=k||{});var T=[],L=!0,C=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(I){this._input=I,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):L=!0},this._streamData=w(function(I){try{T.push(typeof I=="string"?I:I.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(R){this._streamError(R)}},this),this._streamError=w(function(I){this._streamCleanUp(),this._sendError(I)},this),this._streamEnd=w(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(k){var T,L,C,I=Math.pow(2,53),R=-I,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,N=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,D=this,O=0,$=0,Y=!1,X=!1,ee=[],Q={data:[],errors:[],meta:{}};if(A(k.step)){var Z=k.step;k.step=function(he){if(Q=he,ie())ae();else{if(ae(),Q.data.length===0)return;O+=he.data.length,k.preview&&O>k.preview?L.abort():(Q.data=Q.data[0],Z(Q,D))}}}function q(he){return k.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function ae(){if(Q&&C&&(Te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),C=!1),k.skipEmptyLines)for(var he=0;he<Q.data.length;he++)q(Q.data[he])&&Q.data.splice(he--,1);return ie()&&function(){if(!Q)return;function xe(ye,re){A(k.transformHeader)&&(ye=k.transformHeader(ye,re)),ee.push(ye)}if(Array.isArray(Q.data[0])){for(var Se=0;ie()&&Se<Q.data.length;Se++)Q.data[Se].forEach(xe);Q.data.splice(0,1)}else Q.data.forEach(xe)}(),function(){if(!Q||!k.header&&!k.dynamicTyping&&!k.transform)return Q;function xe(ye,re){var se,de=k.header?{}:[];for(se=0;se<ye.length;se++){var Me=se,Ie=ye[se];k.header&&(Me=se>=ee.length?"__parsed_extra":ee[se]),k.transform&&(Ie=k.transform(Ie,Me)),Ie=we(Me,Ie),Me==="__parsed_extra"?(de[Me]=de[Me]||[],de[Me].push(Ie)):de[Me]=Ie}return k.header&&(se>ee.length?Te("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+se,$+re):se<ee.length&&Te("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+se,$+re)),de}var Se=1;return!Q.data.length||Array.isArray(Q.data[0])?(Q.data=Q.data.map(xe),Se=Q.data.length):Q.data=xe(Q.data,0),k.header&&Q.meta&&(Q.meta.fields=ee),$+=Se,Q}()}function ie(){return k.header&&ee.length===0}function we(he,xe){return Se=he,k.dynamicTypingFunction&&k.dynamicTyping[Se]===void 0&&(k.dynamicTyping[Se]=k.dynamicTypingFunction(Se)),(k.dynamicTyping[Se]||k.dynamicTyping)===!0?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&(function(ye){if(B.test(ye)){var re=parseFloat(ye);if(R<re&&re<I)return!0}return!1}(xe)?parseFloat(xe):N.test(xe)?new Date(xe):xe===""?null:xe):xe;var Se}function Te(he,xe,Se,ye){var re={type:he,code:xe,message:Se};ye!==void 0&&(re.row=ye),Q.errors.push(re)}this.parse=function(he,xe,Se){var ye=k.quoteChar||'"';if(k.newline||(k.newline=function(de,Me){de=de.substring(0,1048576);var Ie=new RegExp(g(Me)+"([^]*?)"+g(Me),"gm"),Ee=(de=de.replace(Ie,"")).split("\r"),qe=de.split(`
`),be=1<qe.length&&qe[0].length<Ee[0].length;if(Ee.length===1||be)return`
`;for(var oe=0,ce=0;ce<Ee.length;ce++)Ee[ce][0]===`
`&&oe++;return oe>=Ee.length/2?`\r
`:"\r"}(he,ye)),C=!1,k.delimiter)A(k.delimiter)&&(k.delimiter=k.delimiter(he),Q.meta.delimiter=k.delimiter);else{var re=function(de,Me,Ie,Ee,qe){var be,oe,ce,ue;qe=qe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Re=0;Re<qe.length;Re++){var Xe=qe[Re],Ke=0,vt=0,Ze=0;ce=void 0;for(var Qe=new m({comments:Ee,delimiter:Xe,newline:Me,preview:10}).parse(de),Je=0;Je<Qe.data.length;Je++)if(Ie&&q(Qe.data[Je]))Ze++;else{var je=Qe.data[Je].length;vt+=je,ce!==void 0?0<je&&(Ke+=Math.abs(je-ce),ce=je):ce=je}0<Qe.data.length&&(vt/=Qe.data.length-Ze),(oe===void 0||Ke<=oe)&&(ue===void 0||ue<vt)&&1.99<vt&&(oe=Ke,be=Xe,ue=vt)}return{successful:!!(k.delimiter=be),bestDelimiter:be}}(he,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess);re.successful?k.delimiter=re.bestDelimiter:(C=!0,k.delimiter=l.DefaultDelimiter),Q.meta.delimiter=k.delimiter}var se=M(k);return k.preview&&k.header&&se.preview++,T=he,L=new m(se),Q=L.parse(T,xe,Se),ae(),Y?{meta:{paused:!0}}:Q||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,L.abort(),T=A(k.chunk)?"":T.substring(L.getCharIndex())},this.resume=function(){D.streamer._halted?(Y=!1,D.streamer.parseChunk(T,!0)):setTimeout(D.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,L.abort(),Q.meta.aborted=!0,A(k.complete)&&k.complete(Q),T=""}}function g(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(k){var T,L=(k=k||{}).delimiter,C=k.newline,I=k.comments,R=k.step,B=k.preview,N=k.fastMode,D=T=k.quoteChar===void 0?'"':k.quoteChar;if(k.escapeChar!==void 0&&(D=k.escapeChar),(typeof L!="string"||-1<l.BAD_DELIMITERS.indexOf(L))&&(L=","),I===L)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<l.BAD_DELIMITERS.indexOf(I))&&(I=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var O=0,$=!1;this.parse=function(Y,X,ee){if(typeof Y!="string")throw new Error("Input must be a string");var Q=Y.length,Z=L.length,q=C.length,ae=I.length,ie=A(R),we=[],Te=[],he=[],xe=O=0;if(!Y)return ue();if(N||N!==!1&&Y.indexOf(T)===-1){for(var Se=Y.split(C),ye=0;ye<Se.length;ye++){if(he=Se[ye],O+=he.length,ye!==Se.length-1)O+=C.length;else if(ee)return ue();if(!I||he.substring(0,ae)!==I){if(ie){if(we=[],qe(he.split(L)),Re(),$)return ue()}else qe(he.split(L));if(B&&B<=ye)return we=we.slice(0,B),ue(!0)}}return ue()}for(var re=Y.indexOf(L,O),se=Y.indexOf(C,O),de=new RegExp(g(D)+g(T),"g"),Me=Y.indexOf(T,O);;)if(Y[O]!==T)if(I&&he.length===0&&Y.substring(O,O+ae)===I){if(se===-1)return ue();O=se+q,se=Y.indexOf(C,O),re=Y.indexOf(L,O)}else if(re!==-1&&(re<se||se===-1))he.push(Y.substring(O,re)),O=re+Z,re=Y.indexOf(L,O);else{if(se===-1)break;if(he.push(Y.substring(O,se)),ce(se+q),ie&&(Re(),$))return ue();if(B&&we.length>=B)return ue(!0)}else for(Me=O,O++;;){if((Me=Y.indexOf(T,Me+1))===-1)return ee||Te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:we.length,index:O}),oe();if(Me===Q-1)return oe(Y.substring(O,Me).replace(de,T));if(T!==D||Y[Me+1]!==D){if(T===D||Me===0||Y[Me-1]!==D){re!==-1&&re<Me+1&&(re=Y.indexOf(L,Me+1)),se!==-1&&se<Me+1&&(se=Y.indexOf(C,Me+1));var Ie=be(se===-1?re:Math.min(re,se));if(Y[Me+1+Ie]===L){he.push(Y.substring(O,Me).replace(de,T)),Y[O=Me+1+Ie+Z]!==T&&(Me=Y.indexOf(T,O)),re=Y.indexOf(L,O),se=Y.indexOf(C,O);break}var Ee=be(se);if(Y.substring(Me+1+Ee,Me+1+Ee+q)===C){if(he.push(Y.substring(O,Me).replace(de,T)),ce(Me+1+Ee+q),re=Y.indexOf(L,O),Me=Y.indexOf(T,O),ie&&(Re(),$))return ue();if(B&&we.length>=B)return ue(!0);break}Te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:we.length,index:O}),Me++}}else Me++}return oe();function qe(Xe){we.push(Xe),xe=O}function be(Xe){var Ke=0;if(Xe!==-1){var vt=Y.substring(Me+1,Xe);vt&&vt.trim()===""&&(Ke=vt.length)}return Ke}function oe(Xe){return ee||(Xe===void 0&&(Xe=Y.substring(O)),he.push(Xe),O=Q,qe(he),ie&&Re()),ue()}function ce(Xe){O=Xe,qe(he),he=[],se=Y.indexOf(C,O)}function ue(Xe){return{data:we,errors:Te,meta:{delimiter:L,linebreak:C,aborted:$,truncated:!!Xe,cursor:xe+(X||0)}}}function Re(){R(ue()),we=[],Te=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return O}}function y(k){var T=k.data,L=i[T.workerId],C=!1;if(T.error)L.userError(T.error,T.file);else if(T.results&&T.results.data){var I={abort:function(){C=!0,_(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(A(L.userStep)){for(var R=0;R<T.results.data.length&&(L.userStep({data:T.results.data[R],errors:T.results.errors,meta:T.results.meta},I),!C);R++);delete T.results}else A(L.userChunk)&&(L.userChunk(T.results,I,T.file),delete T.results)}T.finished&&!C&&_(T.workerId,T.results)}function _(k,T){var L=i[k];A(L.userComplete)&&L.userComplete(T),L.terminate(),delete i[k]}function S(){throw new Error("Not implemented.")}function M(k){if(typeof k!="object"||k===null)return k;var T=Array.isArray(k)?[]:{};for(var L in k)T[L]=M(k[L]);return T}function w(k,T){return function(){k.apply(T,arguments)}}function A(k){return typeof k=="function"}return o&&(a.onmessage=function(k){var T=k.data;if(l.WORKER_ID===void 0&&T&&(l.WORKER_ID=T.workerId),typeof T.input=="string")a.postMessage({workerId:l.WORKER_ID,results:l.parse(T.input,T.config),finished:!0});else if(a.File&&T.input instanceof File||T.input instanceof Object){var L=l.parse(T.input,T.config);L&&a.postMessage({workerId:l.WORKER_ID,results:L,finished:!0})}}),(c.prototype=Object.create(f.prototype)).constructor=c,(h.prototype=Object.create(f.prototype)).constructor=h,(v.prototype=Object.create(v.prototype)).constructor=v,(p.prototype=Object.create(f.prototype)).constructor=p,l})})(sY);var TCt=sY.exports,lY={},fR={};fR.version="2.8.1";var KSe={exports:{}};/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(e){(function(r,a,n){a[r]=a[r]||n(),e.exports&&(e.exports=a[r])})("Promise",ll,function(){var r,a,n,o=Object.prototype.toString,i=typeof setImmediate!="undefined"?function(_){return setImmediate(_)}:setTimeout;try{Object.defineProperty({},"x",{}),r=function(_,S,M,w){return Object.defineProperty(_,S,{value:M,writable:!0,configurable:w!==!1})}}catch{r=function(S,M,w){return S[M]=w,S}}n=function(){var _,S,M;function w(A,k){this.fn=A,this.self=k,this.next=void 0}return{add:function(k,T){M=new w(k,T),S?S.next=M:_=M,S=M,M=void 0},drain:function(){var k=_;for(_=S=a=void 0;k;)k.fn.call(k.self),k=k.next}}}();function s(y,_){n.add(y,_),a||(a=i(n.drain))}function l(y){var _,S=typeof y;return y!=null&&(S=="object"||S=="function")&&(_=y.then),typeof _=="function"?_:!1}function u(){for(var y=0;y<this.chain.length;y++)f(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function f(y,_,S){var M,w;try{_===!1?S.reject(y.msg):(_===!0?M=y.msg:M=_.call(void 0,y.msg),M===S.promise?S.reject(TypeError("Promise-chain cycle")):(w=l(M))?w.call(M,S.resolve,S.reject):S.resolve(M))}catch(A){S.reject(A)}}function c(y){var _,S=this;if(!S.triggered){S.triggered=!0,S.def&&(S=S.def);try{(_=l(y))?s(function(){var M=new p(S);try{_.call(y,function(){c.apply(M,arguments)},function(){h.apply(M,arguments)})}catch(w){h.call(M,w)}}):(S.msg=y,S.state=1,S.chain.length>0&&s(u,S))}catch(M){h.call(new p(S),M)}}}function h(y){var _=this;_.triggered||(_.triggered=!0,_.def&&(_=_.def),_.msg=y,_.state=2,_.chain.length>0&&s(u,_))}function v(y,_,S,M){for(var w=0;w<_.length;w++)(function(k){y.resolve(_[k]).then(function(L){S(k,L)},M)})(w)}function p(y){this.def=y,this.triggered=!1}function d(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var _=new d(this);this.then=function(M,w){var A={success:typeof M=="function"?M:!0,failure:typeof w=="function"?w:!1};return A.promise=new this.constructor(function(T,L){if(typeof T!="function"||typeof L!="function")throw TypeError("Not a function");A.resolve=T,A.reject=L}),_.chain.push(A),_.state!==0&&s(u,_),A.promise},this.catch=function(M){return this.then(void 0,M)};try{y.call(void 0,function(M){c.call(_,M)},function(M){h.call(_,M)})}catch(S){h.call(_,S)}}var m=r({},"constructor",g,!1);return g.prototype=m,r(m,"__NPO__",0,!1),r(g,"resolve",function(_){var S=this;return _&&typeof _=="object"&&_.__NPO__===1?_:new S(function(w,A){if(typeof w!="function"||typeof A!="function")throw TypeError("Not a function");w(_)})}),r(g,"reject",function(_){return new this(function(M,w){if(typeof M!="function"||typeof w!="function")throw TypeError("Not a function");w(_)})}),r(g,"all",function(_){var S=this;return o.call(_)!="[object Array]"?S.reject(TypeError("Not an array")):_.length===0?S.resolve([]):new S(function(w,A){if(typeof w!="function"||typeof A!="function")throw TypeError("Not a function");var k=_.length,T=Array(k),L=0;v(S,_,function(I,R){T[I]=R,++L===k&&w(T)},A)})}),r(g,"race",function(_){var S=this;return o.call(_)!="[object Array]"?S.reject(TypeError("Not an array")):new S(function(w,A){if(typeof w!="function"||typeof A!="function")throw TypeError("Not a function");v(S,_,function(T,L){w(L)},A)})}),g})})(KSe);var bt={exports:{}},Ra={exports:{}};(function(e){(function(){var t={version:"3.8.0"},r=[].slice,a=function(U){return r.call(U)},n=self.document;function o(U){return U&&(U.ownerDocument||U.document||U).documentElement}function i(U){return U&&(U.ownerDocument&&U.ownerDocument.defaultView||U.document&&U||U.defaultView)}if(n)try{a(n.documentElement.childNodes)[0].nodeType}catch{a=function(K){for(var ne=K.length,ve=new Array(ne);ne--;)ve[ne]=K[ne];return ve}}if(Date.now||(Date.now=function(){return+new Date}),n)try{n.createElement("DIV").style.setProperty("opacity",0,"")}catch{var s=this.Element.prototype,l=s.setAttribute,u=s.setAttributeNS,f=this.CSSStyleDeclaration.prototype,c=f.setProperty;s.setAttribute=function(K,ne){l.call(this,K,ne+"")},s.setAttributeNS=function(K,ne,ve){u.call(this,K,ne,ve+"")},f.setProperty=function(K,ne,ve){c.call(this,K,ne+"",ve)}}t.ascending=h;function h(U,K){return U<K?-1:U>K?1:U>=K?0:NaN}t.descending=function(U,K){return K<U?-1:K>U?1:K>=U?0:NaN},t.min=function(U,K){var ne=-1,ve=U.length,ge,pe;if(arguments.length===1){for(;++ne<ve;)if((pe=U[ne])!=null&&pe>=pe){ge=pe;break}for(;++ne<ve;)(pe=U[ne])!=null&&ge>pe&&(ge=pe)}else{for(;++ne<ve;)if((pe=K.call(U,U[ne],ne))!=null&&pe>=pe){ge=pe;break}for(;++ne<ve;)(pe=K.call(U,U[ne],ne))!=null&&ge>pe&&(ge=pe)}return ge},t.max=function(U,K){var ne=-1,ve=U.length,ge,pe;if(arguments.length===1){for(;++ne<ve;)if((pe=U[ne])!=null&&pe>=pe){ge=pe;break}for(;++ne<ve;)(pe=U[ne])!=null&&pe>ge&&(ge=pe)}else{for(;++ne<ve;)if((pe=K.call(U,U[ne],ne))!=null&&pe>=pe){ge=pe;break}for(;++ne<ve;)(pe=K.call(U,U[ne],ne))!=null&&pe>ge&&(ge=pe)}return ge},t.extent=function(U,K){var ne=-1,ve=U.length,ge,pe,ze;if(arguments.length===1){for(;++ne<ve;)if((pe=U[ne])!=null&&pe>=pe){ge=ze=pe;break}for(;++ne<ve;)(pe=U[ne])!=null&&(ge>pe&&(ge=pe),ze<pe&&(ze=pe))}else{for(;++ne<ve;)if((pe=K.call(U,U[ne],ne))!=null&&pe>=pe){ge=ze=pe;break}for(;++ne<ve;)(pe=K.call(U,U[ne],ne))!=null&&(ge>pe&&(ge=pe),ze<pe&&(ze=pe))}return[ge,ze]};function v(U){return U===null?NaN:+U}function p(U){return!isNaN(U)}t.sum=function(U,K){var ne=0,ve=U.length,ge,pe=-1;if(arguments.length===1)for(;++pe<ve;)p(ge=+U[pe])&&(ne+=ge);else for(;++pe<ve;)p(ge=+K.call(U,U[pe],pe))&&(ne+=ge);return ne},t.mean=function(U,K){var ne=0,ve=U.length,ge,pe=-1,ze=ve;if(arguments.length===1)for(;++pe<ve;)p(ge=v(U[pe]))?ne+=ge:--ze;else for(;++pe<ve;)p(ge=v(K.call(U,U[pe],pe)))?ne+=ge:--ze;if(ze)return ne/ze},t.quantile=function(U,K){var ne=(U.length-1)*K+1,ve=Math.floor(ne),ge=+U[ve-1],pe=ne-ve;return pe?ge+pe*(U[ve]-ge):ge},t.median=function(U,K){var ne=[],ve=U.length,ge,pe=-1;if(arguments.length===1)for(;++pe<ve;)p(ge=v(U[pe]))&&ne.push(ge);else for(;++pe<ve;)p(ge=v(K.call(U,U[pe],pe)))&&ne.push(ge);if(ne.length)return t.quantile(ne.sort(h),.5)},t.variance=function(U,K){var ne=U.length,ve=0,ge,pe,ze=0,Le=-1,Ue=0;if(arguments.length===1)for(;++Le<ne;)p(ge=v(U[Le]))&&(pe=ge-ve,ve+=pe/++Ue,ze+=pe*(ge-ve));else for(;++Le<ne;)p(ge=v(K.call(U,U[Le],Le)))&&(pe=ge-ve,ve+=pe/++Ue,ze+=pe*(ge-ve));if(Ue>1)return ze/(Ue-1)},t.deviation=function(){var U=t.variance.apply(this,arguments);return U&&Math.sqrt(U)};function d(U){return{left:function(K,ne,ve,ge){for(arguments.length<3&&(ve=0),arguments.length<4&&(ge=K.length);ve<ge;){var pe=ve+ge>>>1;U(K[pe],ne)<0?ve=pe+1:ge=pe}return ve},right:function(K,ne,ve,ge){for(arguments.length<3&&(ve=0),arguments.length<4&&(ge=K.length);ve<ge;){var pe=ve+ge>>>1;U(K[pe],ne)>0?ge=pe:ve=pe+1}return ve}}}var g=d(h);t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(U){return d(U.length===1?function(K,ne){return h(U(K),ne)}:U)},t.shuffle=function(U,K,ne){(ve=arguments.length)<3&&(ne=U.length,ve<2&&(K=0));for(var ve=ne-K,ge,pe;ve;)pe=Math.random()*ve--|0,ge=U[ve+K],U[ve+K]=U[pe+K],U[pe+K]=ge;return U},t.permute=function(U,K){for(var ne=K.length,ve=new Array(ne);ne--;)ve[ne]=U[K[ne]];return ve},t.pairs=function(U){for(var K=0,ne=U.length-1,ve=U[0],ge=new Array(ne<0?0:ne);K<ne;)ge[K]=[ve,ve=U[++K]];return ge},t.transpose=function(U){if(!(pe=U.length))return[];for(var K=-1,ne=t.min(U,m),ve=new Array(ne);++K<ne;)for(var ge=-1,pe,ze=ve[K]=new Array(pe);++ge<pe;)ze[ge]=U[ge][K];return ve};function m(U){return U.length}t.zip=function(){return t.transpose(arguments)},t.keys=function(U){var K=[];for(var ne in U)K.push(ne);return K},t.values=function(U){var K=[];for(var ne in U)K.push(U[ne]);return K},t.entries=function(U){var K=[];for(var ne in U)K.push({key:ne,value:U[ne]});return K},t.merge=function(U){for(var K=U.length,ne,ve=-1,ge=0,pe,ze;++ve<K;)ge+=U[ve].length;for(pe=new Array(ge);--K>=0;)for(ze=U[K],ne=ze.length;--ne>=0;)pe[--ge]=ze[ne];return pe};var y=Math.abs;t.range=function(U,K,ne){if(arguments.length<3&&(ne=1,arguments.length<2&&(K=U,U=0)),(K-U)/ne==1/0)throw new Error("infinite range");var ve=[],ge=_(y(ne)),pe=-1,ze;if(U*=ge,K*=ge,ne*=ge,ne<0)for(;(ze=U+ne*++pe)>K;)ve.push(ze/ge);else for(;(ze=U+ne*++pe)<K;)ve.push(ze/ge);return ve};function _(U){for(var K=1;U*K%1;)K*=10;return K}function S(U,K){for(var ne in K)Object.defineProperty(U.prototype,ne,{value:K[ne],enumerable:!1})}t.map=function(U,K){var ne=new M;if(U instanceof M)U.forEach(function(Le,Ue){ne.set(Le,Ue)});else if(Array.isArray(U)){var ve=-1,ge=U.length,pe;if(arguments.length===1)for(;++ve<ge;)ne.set(ve,U[ve]);else for(;++ve<ge;)ne.set(K.call(U,pe=U[ve],ve),pe)}else for(var ze in U)ne.set(ze,U[ze]);return ne};function M(){this._=Object.create(null)}var w="__proto__",A="\0";S(M,{has:L,get:function(U){return this._[k(U)]},set:function(U,K){return this._[k(U)]=K},remove:C,keys:I,values:function(){var U=[];for(var K in this._)U.push(this._[K]);return U},entries:function(){var U=[];for(var K in this._)U.push({key:T(K),value:this._[K]});return U},size:R,empty:B,forEach:function(U){for(var K in this._)U.call(this,T(K),this._[K])}});function k(U){return(U+="")===w||U[0]===A?A+U:U}function T(U){return(U+="")[0]===A?U.slice(1):U}function L(U){return k(U)in this._}function C(U){return(U=k(U))in this._&&delete this._[U]}function I(){var U=[];for(var K in this._)U.push(T(K));return U}function R(){var U=0;for(var K in this._)++U;return U}function B(){for(var U in this._)return!1;return!0}t.nest=function(){var U={},K=[],ne=[],ve,ge;function pe(Le,Ue,nt){if(nt>=K.length)return ge?ge.call(U,Ue):ve?Ue.sort(ve):Ue;for(var tt=-1,xt=Ue.length,st=K[nt++],Vt,lr,kt,$t=new M,Ht;++tt<xt;)(Ht=$t.get(Vt=st(lr=Ue[tt])))?Ht.push(lr):$t.set(Vt,[lr]);return Le?(lr=Le(),kt=function(ar,nr){lr.set(ar,pe(Le,nr,nt))}):(lr={},kt=function(ar,nr){lr[ar]=pe(Le,nr,nt)}),$t.forEach(kt),lr}function ze(Le,Ue){if(Ue>=K.length)return Le;var nt=[],tt=ne[Ue++];return Le.forEach(function(xt,st){nt.push({key:xt,values:ze(st,Ue)})}),tt?nt.sort(function(xt,st){return tt(xt.key,st.key)}):nt}return U.map=function(Le,Ue){return pe(Ue,Le,0)},U.entries=function(Le){return ze(pe(t.map,Le,0),0)},U.key=function(Le){return K.push(Le),U},U.sortKeys=function(Le){return ne[K.length-1]=Le,U},U.sortValues=function(Le){return ve=Le,U},U.rollup=function(Le){return ge=Le,U},U},t.set=function(U){var K=new N;if(U)for(var ne=0,ve=U.length;ne<ve;++ne)K.add(U[ne]);return K};function N(){this._=Object.create(null)}S(N,{has:L,add:function(U){return this._[k(U+="")]=!0,U},remove:C,values:I,size:R,empty:B,forEach:function(U){for(var K in this._)U.call(this,T(K))}}),t.behavior={};function D(U){return U}t.rebind=function(U,K){for(var ne=1,ve=arguments.length,ge;++ne<ve;)U[ge=arguments[ne]]=O(U,K,K[ge]);return U};function O(U,K,ne){return function(){var ve=ne.apply(K,arguments);return ve===K?U:ve}}function $(U,K){if(K in U)return K;K=K.charAt(0).toUpperCase()+K.slice(1);for(var ne=0,ve=Y.length;ne<ve;++ne){var ge=Y[ne]+K;if(ge in U)return ge}}var Y=["webkit","ms","moz","Moz","o","O"];function X(){}t.dispatch=function(){for(var U=new ee,K=-1,ne=arguments.length;++K<ne;)U[arguments[K]]=Q(U);return U};function ee(){}ee.prototype.on=function(U,K){var ne=U.indexOf("."),ve="";if(ne>=0&&(ve=U.slice(ne+1),U=U.slice(0,ne)),U)return arguments.length<2?this[U].on(ve):this[U].on(ve,K);if(arguments.length===2){if(K==null)for(U in this)this.hasOwnProperty(U)&&this[U].on(ve,null);return this}};function Q(U){var K=[],ne=new M;function ve(){for(var ge=K,pe=-1,ze=ge.length,Le;++pe<ze;)(Le=ge[pe].on)&&Le.apply(this,arguments);return U}return ve.on=function(ge,pe){var ze=ne.get(ge),Le;return arguments.length<2?ze&&ze.on:(ze&&(ze.on=null,K=K.slice(0,Le=K.indexOf(ze)).concat(K.slice(Le+1)),ne.remove(ge)),pe&&K.push(ne.set(ge,{on:pe})),U)},ve}t.event=null;function Z(){t.event.preventDefault()}function q(){for(var U=t.event,K;K=U.sourceEvent;)U=K;return U}function ae(U){for(var K=new ee,ne=0,ve=arguments.length;++ne<ve;)K[arguments[ne]]=Q(K);return K.of=function(ge,pe){return function(ze){try{var Le=ze.sourceEvent=t.event;ze.target=U,t.event=ze,K[ze.type].apply(ge,pe)}finally{t.event=Le}}},K}t.requote=function(U){return U.replace(ie,"\\$&")};var ie=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,we=function(U,K){for(var ne in K)U[ne]=K[ne]};function Te(U){return we(U,ye),U}var he=function(U,K){return K.querySelector(U)},xe=function(U,K){return K.querySelectorAll(U)},Se=function(U,K){var ne=U.matches||U[$(U,"matchesSelector")];return Se=function(ve,ge){return ne.call(ve,ge)},Se(U,K)};typeof Sizzle=="function"&&(he=function(U,K){return Sizzle(U,K)[0]||null},xe=Sizzle,Se=Sizzle.matchesSelector),t.selection=function(){return t.select(n.documentElement)};var ye=t.selection.prototype=[];ye.select=function(U){var K=[],ne,ve,ge,pe;U=re(U);for(var ze=-1,Le=this.length;++ze<Le;){K.push(ne=[]),ne.parentNode=(ge=this[ze]).parentNode;for(var Ue=-1,nt=ge.length;++Ue<nt;)(pe=ge[Ue])?(ne.push(ve=U.call(pe,pe.__data__,Ue,ze)),ve&&"__data__"in pe&&(ve.__data__=pe.__data__)):ne.push(null)}return Te(K)};function re(U){return typeof U=="function"?U:function(){return he(U,this)}}ye.selectAll=function(U){var K=[],ne,ve;U=se(U);for(var ge=-1,pe=this.length;++ge<pe;)for(var ze=this[ge],Le=-1,Ue=ze.length;++Le<Ue;)(ve=ze[Le])&&(K.push(ne=a(U.call(ve,ve.__data__,Le,ge))),ne.parentNode=ve);return Te(K)};function se(U){return typeof U=="function"?U:function(){return xe(U,this)}}var de="http://www.w3.org/1999/xhtml",Me={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:Me,qualify:function(U){var K=U.indexOf(":"),ne=U;return K>=0&&(ne=U.slice(0,K))!=="xmlns"&&(U=U.slice(K+1)),Me.hasOwnProperty(ne)?{space:Me[ne],local:U}:U}},ye.attr=function(U,K){if(arguments.length<2){if(typeof U=="string"){var ne=this.node();return U=t.ns.qualify(U),U.local?ne.getAttributeNS(U.space,U.local):ne.getAttribute(U)}for(K in U)this.each(Ie(K,U[K]));return this}return this.each(Ie(U,K))};function Ie(U,K){U=t.ns.qualify(U);function ne(){this.removeAttribute(U)}function ve(){this.removeAttributeNS(U.space,U.local)}function ge(){this.setAttribute(U,K)}function pe(){this.setAttributeNS(U.space,U.local,K)}function ze(){var Ue=K.apply(this,arguments);Ue==null?this.removeAttribute(U):this.setAttribute(U,Ue)}function Le(){var Ue=K.apply(this,arguments);Ue==null?this.removeAttributeNS(U.space,U.local):this.setAttributeNS(U.space,U.local,Ue)}return K==null?U.local?ve:ne:typeof K=="function"?U.local?Le:ze:U.local?pe:ge}function Ee(U){return U.trim().replace(/\s+/g," ")}ye.classed=function(U,K){if(arguments.length<2){if(typeof U=="string"){var ne=this.node(),ve=(U=be(U)).length,ge=-1;if(K=ne.classList){for(;++ge<ve;)if(!K.contains(U[ge]))return!1}else for(K=ne.getAttribute("class");++ge<ve;)if(!qe(U[ge]).test(K))return!1;return!0}for(K in U)this.each(oe(K,U[K]));return this}return this.each(oe(U,K))};function qe(U){return new RegExp("(?:^|\\s+)"+t.requote(U)+"(?:\\s+|$)","g")}function be(U){return(U+"").trim().split(/^|\s+/)}function oe(U,K){U=be(U).map(ce);var ne=U.length;function ve(){for(var pe=-1;++pe<ne;)U[pe](this,K)}function ge(){for(var pe=-1,ze=K.apply(this,arguments);++pe<ne;)U[pe](this,ze)}return typeof K=="function"?ge:ve}function ce(U){var K=qe(U);return function(ne,ve){if(ge=ne.classList)return ve?ge.add(U):ge.remove(U);var ge=ne.getAttribute("class")||"";ve?(K.lastIndex=0,K.test(ge)||ne.setAttribute("class",Ee(ge+" "+U))):ne.setAttribute("class",Ee(ge.replace(K," ")))}}ye.style=function(U,K,ne){var ve=arguments.length;if(ve<3){if(typeof U!="string"){ve<2&&(K="");for(ne in U)this.each(ue(ne,U[ne],K));return this}if(ve<2){var ge=this.node();return i(ge).getComputedStyle(ge,null).getPropertyValue(U)}ne=""}return this.each(ue(U,K,ne))};function ue(U,K,ne){function ve(){this.style.removeProperty(U)}function ge(){this.style.setProperty(U,K,ne)}function pe(){var ze=K.apply(this,arguments);ze==null?this.style.removeProperty(U):this.style.setProperty(U,ze,ne)}return K==null?ve:typeof K=="function"?pe:ge}ye.property=function(U,K){if(arguments.length<2){if(typeof U=="string")return this.node()[U];for(K in U)this.each(Re(K,U[K]));return this}return this.each(Re(U,K))};function Re(U,K){function ne(){delete this[U]}function ve(){this[U]=K}function ge(){var pe=K.apply(this,arguments);pe==null?delete this[U]:this[U]=pe}return K==null?ne:typeof K=="function"?ge:ve}ye.text=function(U){return arguments.length?this.each(typeof U=="function"?function(){var K=U.apply(this,arguments);this.textContent=K==null?"":K}:U==null?function(){this.textContent=""}:function(){this.textContent=U}):this.node().textContent},ye.html=function(U){return arguments.length?this.each(typeof U=="function"?function(){var K=U.apply(this,arguments);this.innerHTML=K==null?"":K}:U==null?function(){this.innerHTML=""}:function(){this.innerHTML=U}):this.node().innerHTML},ye.append=function(U){return U=Xe(U),this.select(function(){return this.appendChild(U.apply(this,arguments))})};function Xe(U){function K(){var ve=this.ownerDocument,ge=this.namespaceURI;return ge===de&&ve.documentElement.namespaceURI===de?ve.createElement(U):ve.createElementNS(ge,U)}function ne(){return this.ownerDocument.createElementNS(U.space,U.local)}return typeof U=="function"?U:(U=t.ns.qualify(U)).local?ne:K}ye.insert=function(U,K){return U=Xe(U),K=re(K),this.select(function(){return this.insertBefore(U.apply(this,arguments),K.apply(this,arguments)||null)})},ye.remove=function(){return this.each(Ke)};function Ke(){var U=this.parentNode;U&&U.removeChild(this)}ye.data=function(U,K){var ne=-1,ve=this.length,ge,pe;if(!arguments.length){for(U=new Array(ve=(ge=this[0]).length);++ne<ve;)(pe=ge[ne])&&(U[ne]=pe.__data__);return U}function ze(tt,xt){var st,Vt=tt.length,lr=xt.length,kt=Math.min(Vt,lr),$t=new Array(lr),Ht=new Array(lr),ar=new Array(Vt),nr,Gt;if(K){var Yr=new M,ya=new Array(Vt),va;for(st=-1;++st<Vt;)(nr=tt[st])&&(Yr.has(va=K.call(nr,nr.__data__,st))?ar[st]=nr:Yr.set(va,nr),ya[st]=va);for(st=-1;++st<lr;)(nr=Yr.get(va=K.call(xt,Gt=xt[st],st)))?nr!==!0&&($t[st]=nr,nr.__data__=Gt):Ht[st]=vt(Gt),Yr.set(va,!0);for(st=-1;++st<Vt;)st in ya&&Yr.get(ya[st])!==!0&&(ar[st]=tt[st])}else{for(st=-1;++st<kt;)nr=tt[st],Gt=xt[st],nr?(nr.__data__=Gt,$t[st]=nr):Ht[st]=vt(Gt);for(;st<lr;++st)Ht[st]=vt(xt[st]);for(;st<Vt;++st)ar[st]=tt[st]}Ht.update=$t,Ht.parentNode=$t.parentNode=ar.parentNode=tt.parentNode,Le.push(Ht),Ue.push($t),nt.push(ar)}var Le=je([]),Ue=Te([]),nt=Te([]);if(typeof U=="function")for(;++ne<ve;)ze(ge=this[ne],U.call(ge,ge.parentNode.__data__,ne));else for(;++ne<ve;)ze(ge=this[ne],U);return Ue.enter=function(){return Le},Ue.exit=function(){return nt},Ue};function vt(U){return{__data__:U}}ye.datum=function(U){return arguments.length?this.property("__data__",U):this.property("__data__")},ye.filter=function(U){var K=[],ne,ve,ge;typeof U!="function"&&(U=Ze(U));for(var pe=0,ze=this.length;pe<ze;pe++){K.push(ne=[]),ne.parentNode=(ve=this[pe]).parentNode;for(var Le=0,Ue=ve.length;Le<Ue;Le++)(ge=ve[Le])&&U.call(ge,ge.__data__,Le,pe)&&ne.push(ge)}return Te(K)};function Ze(U){return function(){return Se(this,U)}}ye.order=function(){for(var U=-1,K=this.length;++U<K;)for(var ne=this[U],ve=ne.length-1,ge=ne[ve],pe;--ve>=0;)(pe=ne[ve])&&(ge&&ge!==pe.nextSibling&&ge.parentNode.insertBefore(pe,ge),ge=pe);return this},ye.sort=function(U){U=Qe.apply(this,arguments);for(var K=-1,ne=this.length;++K<ne;)this[K].sort(U);return this.order()};function Qe(U){return arguments.length||(U=h),function(K,ne){return K&&ne?U(K.__data__,ne.__data__):!K-!ne}}ye.each=function(U){return Je(this,function(K,ne,ve){U.call(K,K.__data__,ne,ve)})};function Je(U,K){for(var ne=0,ve=U.length;ne<ve;ne++)for(var ge=U[ne],pe=0,ze=ge.length,Le;pe<ze;pe++)(Le=ge[pe])&&K(Le,pe,ne);return U}ye.call=function(U){var K=a(arguments);return U.apply(K[0]=this,K),this},ye.empty=function(){return!this.node()},ye.node=function(){for(var U=0,K=this.length;U<K;U++)for(var ne=this[U],ve=0,ge=ne.length;ve<ge;ve++){var pe=ne[ve];if(pe)return pe}return null},ye.size=function(){var U=0;return Je(this,function(){++U}),U};function je(U){return we(U,$e),U}var $e=[];t.selection.enter=je,t.selection.enter.prototype=$e,$e.append=ye.append,$e.empty=ye.empty,$e.node=ye.node,$e.call=ye.call,$e.size=ye.size,$e.select=function(U){for(var K=[],ne,ve,ge,pe,ze,Le=-1,Ue=this.length;++Le<Ue;){ge=(pe=this[Le]).update,K.push(ne=[]),ne.parentNode=pe.parentNode;for(var nt=-1,tt=pe.length;++nt<tt;)(ze=pe[nt])?(ne.push(ge[nt]=ve=U.call(pe.parentNode,ze.__data__,nt,Le)),ve.__data__=ze.__data__):ne.push(null)}return Te(K)},$e.insert=function(U,K){return arguments.length<2&&(K=Ye(this)),ye.insert.call(this,U,K)};function Ye(U){var K,ne;return function(ve,ge,pe){var ze=U[pe].update,Le=ze.length,Ue;for(pe!=ne&&(ne=pe,K=0),ge>=K&&(K=ge+1);!(Ue=ze[K])&&++K<Le;);return Ue}}t.select=function(U){var K;return typeof U=="string"?(K=[he(U,n)],K.parentNode=n.documentElement):(K=[U],K.parentNode=o(U)),Te([K])},t.selectAll=function(U){var K;return typeof U=="string"?(K=a(xe(U,n)),K.parentNode=n.documentElement):(K=a(U),K.parentNode=null),Te([K])},ye.on=function(U,K,ne){var ve=arguments.length;if(ve<3){if(typeof U!="string"){ve<2&&(K=!1);for(ne in U)this.each(yt(ne,U[ne],K));return this}if(ve<2)return(ve=this.node()["__on"+U])&&ve._;ne=!1}return this.each(yt(U,K,ne))};function yt(U,K,ne){var ve="__on"+U,ge=U.indexOf("."),pe=Pt;ge>0&&(U=U.slice(0,ge));var ze=_t.get(U);ze&&(U=ze,pe=Tt);function Le(){var tt=this[ve];tt&&(this.removeEventListener(U,tt,tt.$),delete this[ve])}function Ue(){var tt=pe(K,a(arguments));Le.call(this),this.addEventListener(U,this[ve]=tt,tt.$=ne),tt._=K}function nt(){var tt=new RegExp("^__on([^.]+)"+t.requote(U)+"$"),xt;for(var st in this)if(xt=st.match(tt)){var Vt=this[st];this.removeEventListener(xt[1],Vt,Vt.$),delete this[st]}}return ge?K?Ue:Le:K?X:nt}var _t=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});n&&_t.forEach(function(U){"on"+U in n&&_t.remove(U)});function Pt(U,K){return function(ne){var ve=t.event;t.event=ne,K[0]=this.__data__;try{U.apply(this,K)}finally{t.event=ve}}}function Tt(U,K){var ne=Pt(U,K);return function(ve){var ge=this,pe=ve.relatedTarget;(!pe||pe!==ge&&!(pe.compareDocumentPosition(ge)&8))&&ne.call(ge,ve)}}var Ot,qt=0;function Xt(U){var K=".dragsuppress-"+ ++qt,ne="click"+K,ve=t.select(i(U)).on("touchmove"+K,Z).on("dragstart"+K,Z).on("selectstart"+K,Z);if(Ot==null&&(Ot="onselectstart"in U?!1:$(U.style,"userSelect")),Ot){var ge=o(U).style,pe=ge[Ot];ge[Ot]="none"}return function(ze){if(ve.on(K,null),Ot&&(ge[Ot]=pe),ze){var Le=function(){ve.on(ne,null)};ve.on(ne,function(){Z(),Le()},!0),setTimeout(Le,0)}}}t.mouse=function(U){return Br(U,q())};var Or=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Br(U,K){K.changedTouches&&(K=K.changedTouches[0]);var ne=U.ownerSVGElement||U;if(ne.createSVGPoint){var ve=ne.createSVGPoint();if(Or<0){var ge=i(U);if(ge.scrollX||ge.scrollY){ne=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var pe=ne[0][0].getScreenCTM();Or=!(pe.f||pe.e),ne.remove()}}return Or?(ve.x=K.pageX,ve.y=K.pageY):(ve.x=K.clientX,ve.y=K.clientY),ve=ve.matrixTransform(U.getScreenCTM().inverse()),[ve.x,ve.y]}var ze=U.getBoundingClientRect();return[K.clientX-ze.left-U.clientLeft,K.clientY-ze.top-U.clientTop]}t.touch=function(U,K,ne){if(arguments.length<3&&(ne=K,K=q().changedTouches),K){for(var ve=0,ge=K.length,pe;ve<ge;++ve)if((pe=K[ve]).identifier===ne)return Br(U,pe)}},t.behavior.drag=function(){var U=ae(ge,"drag","dragstart","dragend"),K=null,ne=pe(X,t.mouse,i,"mousemove","mouseup"),ve=pe(Qr,t.touch,D,"touchmove","touchend");function ge(){this.on("mousedown.drag",ne).on("touchstart.drag",ve)}function pe(ze,Le,Ue,nt,tt){return function(){var xt=this,st=t.event.target.correspondingElement||t.event.target,Vt=xt.parentNode,lr=U.of(xt,arguments),kt=0,$t=ze(),Ht=".drag"+($t==null?"":"-"+$t),ar,nr=t.select(Ue(st)).on(nt+Ht,ya).on(tt+Ht,va),Gt=Xt(st),Yr=Le(Vt,$t);K?(ar=K.apply(xt,arguments),ar=[ar.x-Yr[0],ar.y-Yr[1]]):ar=[0,0],lr({type:"dragstart"});function ya(){var ba=Le(Vt,$t),Ma,Ba;!ba||(Ma=ba[0]-Yr[0],Ba=ba[1]-Yr[1],kt|=Ma|Ba,Yr=ba,lr({type:"drag",x:ba[0]+ar[0],y:ba[1]+ar[1],dx:Ma,dy:Ba}))}function va(){!Le(Vt,$t)||(nr.on(nt+Ht,null).on(tt+Ht,null),Gt(kt),lr({type:"dragend"}))}}}return ge.origin=function(ze){return arguments.length?(K=ze,ge):K},t.rebind(ge,U,"on")};function Qr(){return t.event.changedTouches[0].identifier}t.touches=function(U,K){return arguments.length<2&&(K=q().touches),K?a(K).map(function(ne){var ve=Br(U,ne);return ve.identifier=ne.identifier,ve}):[]};var Sr=1e-6,Zr=Sr*Sr,Oe=Math.PI,it=2*Oe,ft=it-Sr,pt=Oe/2,Dt=Oe/180,Nt=180/Oe;function hr(U,K,ne){return(K[0]-U[0])*(ne[1]-U[1])-(K[1]-U[1])*(ne[0]-U[0])}function fr(U){return U>1?pt:U<-1?-pt:Math.asin(U)}function vr(U){return((U=Math.exp(U))-1/U)/2}function Ut(U){return((U=Math.exp(U))+1/U)/2}function Fr(U){return((U=Math.exp(2*U))-1)/(U+1)}var sa=Math.SQRT2,$r=2,Ca=4;t.interpolateZoom=function(U,K){var ne=U[0],ve=U[1],ge=U[2],pe=K[0],ze=K[1],Le=K[2],Ue=pe-ne,nt=ze-ve,tt=Ue*Ue+nt*nt,xt,st;if(tt<Zr)st=Math.log(Le/ge)/sa,xt=function(ar){return[ne+ar*Ue,ve+ar*nt,ge*Math.exp(sa*ar*st)]};else{var Vt=Math.sqrt(tt),lr=(Le*Le-ge*ge+Ca*tt)/(2*ge*$r*Vt),kt=(Le*Le-ge*ge-Ca*tt)/(2*Le*$r*Vt),$t=Math.log(Math.sqrt(lr*lr+1)-lr),Ht=Math.log(Math.sqrt(kt*kt+1)-kt);st=(Ht-$t)/sa,xt=function(ar){var nr=ar*st,Gt=Ut($t),Yr=ge/($r*Vt)*(Gt*Fr(sa*nr+$t)-vr($t));return[ne+Yr*Ue,ve+Yr*nt,ge*Gt/Ut(sa*nr+$t)]}}return xt.duration=st*1e3,xt},t.behavior.zoom=function(){var U={x:0,y:0,k:1},K,ne,ve,ge=[960,500],pe=on,ze=250,Le=0,Ue="mousedown.zoom",nt="mousemove.zoom",tt="mouseup.zoom",xt,st="touchstart.zoom",Vt,lr=ae(nr,"zoomstart","zoom","zoomend"),kt,$t,Ht,ar;jr||(jr="onwheel"in n?(Fa=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in n?(Fa=function(){return t.event.wheelDelta},"mousewheel"):(Fa=function(){return-t.event.detail},"MozMousePixelScroll"));function nr(pa){pa.on(Ue,un).on(jr+".zoom",ho).on("dblclick.zoom",Jn).on(st,ai)}nr.event=function(pa){pa.each(function(){var Sn=lr.of(this,arguments),Dn=U;jc?t.select(this).transition().each("start.zoom",function(){U=this.__chart__||{x:0,y:0,k:1},Ba(Sn)}).tween("zoom:zoom",function(){var Ln=ge[0],To=ge[1],Nn=ne?ne[0]:Ln/2,Ho=ne?ne[1]:To/2,vo=t.interpolateZoom([(Nn-U.x)/U.k,(Ho-U.y)/U.k,Ln/U.k],[(Nn-Dn.x)/Dn.k,(Ho-Dn.y)/Dn.k,Ln/Dn.k]);return function(Go){var Ps=vo(Go),Hs=Ln/Ps[2];this.__chart__=U={x:Nn-Ps[0]*Hs,y:Ho-Ps[1]*Hs,k:Hs},Ya(Sn)}}).each("interrupt.zoom",function(){Ta(Sn)}).each("end.zoom",function(){Ta(Sn)}):(this.__chart__=U,Ba(Sn),Ya(Sn),Ta(Sn))})},nr.translate=function(pa){return arguments.length?(U={x:+pa[0],y:+pa[1],k:U.k},Ma(),nr):[U.x,U.y]},nr.scale=function(pa){return arguments.length?(U={x:U.x,y:U.y,k:null},ya(+pa),Ma(),nr):U.k},nr.scaleExtent=function(pa){return arguments.length?(pe=pa==null?on:[+pa[0],+pa[1]],nr):pe},nr.center=function(pa){return arguments.length?(ve=pa&&[+pa[0],+pa[1]],nr):ve},nr.size=function(pa){return arguments.length?(ge=pa&&[+pa[0],+pa[1]],nr):ge},nr.duration=function(pa){return arguments.length?(ze=+pa,nr):ze},nr.x=function(pa){return arguments.length?($t=pa,kt=pa.copy(),U={x:0,y:0,k:1},nr):$t},nr.y=function(pa){return arguments.length?(ar=pa,Ht=pa.copy(),U={x:0,y:0,k:1},nr):ar};function Gt(pa){return[(pa[0]-U.x)/U.k,(pa[1]-U.y)/U.k]}function Yr(pa){return[pa[0]*U.k+U.x,pa[1]*U.k+U.y]}function ya(pa){U.k=Math.max(pe[0],Math.min(pe[1],pa))}function va(pa,Sn){Sn=Yr(Sn),U.x+=pa[0]-Sn[0],U.y+=pa[1]-Sn[1]}function ba(pa,Sn,Dn,Ln){pa.__chart__={x:U.x,y:U.y,k:U.k},ya(Math.pow(2,Ln)),va(ne=Sn,Dn),pa=t.select(pa),ze>0&&(pa=pa.transition().duration(ze)),pa.call(nr.event)}function Ma(){$t&&$t.domain(kt.range().map(function(pa){return(pa-U.x)/U.k}).map(kt.invert)),ar&&ar.domain(Ht.range().map(function(pa){return(pa-U.y)/U.k}).map(Ht.invert))}function Ba(pa){Le++||pa({type:"zoomstart"})}function Ya(pa){Ma(),pa({type:"zoom",scale:U.k,translate:[U.x,U.y]})}function Ta(pa){--Le||(pa({type:"zoomend"}),ne=null)}function un(){var pa=this,Sn=lr.of(pa,arguments),Dn=0,Ln=t.select(i(pa)).on(nt,Ho).on(tt,vo),To=Gt(t.mouse(pa)),Nn=Xt(pa);Hu.call(pa),Ba(Sn);function Ho(){Dn=1,va(t.mouse(pa),To),Ya(Sn)}function vo(){Ln.on(nt,null).on(tt,null),Nn(Dn),Ta(Sn)}}function ai(){var pa=this,Sn=lr.of(pa,arguments),Dn={},Ln=0,To,Nn=".zoom-"+t.event.changedTouches[0].identifier,Ho="touchmove"+Nn,vo="touchend"+Nn,Go=[],Ps=t.select(pa),Hs=Xt(pa);no(),Ba(Sn),Ps.on(Ue,null).on(st,no);function ss(){var Wa=t.touches(pa);return To=U.k,Wa.forEach(function(Mi){Mi.identifier in Dn&&(Dn[Mi.identifier]=Gt(Mi))}),Wa}function no(){var Wa=t.event.target;t.select(Wa).on(Ho,Ao).on(vo,tn),Go.push(Wa);for(var Mi=t.event.changedTouches,Io=0,ms=Mi.length;Io<ms;++Io)Dn[Mi[Io].identifier]=null;var Ti=ss(),_l=Date.now();if(Ti.length===1){if(_l-Vt<500){var Is=Ti[0];ba(pa,Is,Dn[Is.identifier],Math.floor(Math.log(U.k)/Math.LN2)+1),Z()}Vt=_l}else if(Ti.length>1){var Is=Ti[0],Mu=Ti[1],Qi=Is[0]-Mu[0],Ld=Is[1]-Mu[1];Ln=Qi*Qi+Ld*Ld}}function Ao(){var Wa=t.touches(pa),Mi,Io,ms,Ti;Hu.call(pa);for(var _l=0,Is=Wa.length;_l<Is;++_l,Ti=null)if(ms=Wa[_l],Ti=Dn[ms.identifier]){if(Io)break;Mi=ms,Io=Ti}if(Ti){var Mu=(Mu=ms[0]-Mi[0])*Mu+(Mu=ms[1]-Mi[1])*Mu,Qi=Ln&&Math.sqrt(Mu/Ln);Mi=[(Mi[0]+ms[0])/2,(Mi[1]+ms[1])/2],Io=[(Io[0]+Ti[0])/2,(Io[1]+Ti[1])/2],ya(Qi*To)}Vt=null,va(Mi,Io),Ya(Sn)}function tn(){if(t.event.touches.length){for(var Wa=t.event.changedTouches,Mi=0,Io=Wa.length;Mi<Io;++Mi)delete Dn[Wa[Mi].identifier];for(var ms in Dn)return void ss()}t.selectAll(Go).on(Nn,null),Ps.on(Ue,un).on(st,ai),Hs(),Ta(Sn)}}function ho(){var pa=lr.of(this,arguments);xt?clearTimeout(xt):(Hu.call(this),K=Gt(ne=ve||t.mouse(this)),Ba(pa)),xt=setTimeout(function(){xt=null,Ta(pa)},50),Z(),ya(Math.pow(2,Fa()*.002)*U.k),va(ne,K),Ya(pa)}function Jn(){var pa=t.mouse(this),Sn=Math.log(U.k)/Math.LN2;ba(this,pa,Gt(pa),t.event.shiftKey?Math.ceil(Sn)-1:Math.floor(Sn)+1)}return t.rebind(nr,lr,"on")};var on=[0,1/0],Fa,jr;t.color=Rn;function Rn(){}Rn.prototype.toString=function(){return this.rgb()+""},t.hsl=xa;function xa(U,K,ne){return this instanceof xa?(this.h=+U,this.s=+K,void(this.l=+ne)):arguments.length<2?U instanceof xa?new xa(U.h,U.s,U.l):yn(""+U,On,xa):new xa(U,K,ne)}var ia=xa.prototype=new Rn;ia.brighter=function(U){return U=Math.pow(.7,arguments.length?U:1),new xa(this.h,this.s,this.l/U)},ia.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new xa(this.h,this.s,U*this.l)},ia.rgb=function(){return vn(this.h,this.s,this.l)};function vn(U,K,ne){var ve,ge;U=isNaN(U)?0:(U%=360)<0?U+360:U,K=isNaN(K)||K<0?0:K>1?1:K,ne=ne<0?0:ne>1?1:ne,ge=ne<=.5?ne*(1+K):ne+K-ne*K,ve=2*ne-ge;function pe(Le){return Le>360?Le-=360:Le<0&&(Le+=360),Le<60?ve+(ge-ve)*Le/60:Le<180?ge:Le<240?ve+(ge-ve)*(240-Le)/60:ve}function ze(Le){return Math.round(pe(Le)*255)}return new la(ze(U+120),ze(U),ze(U-120))}t.hcl=ka;function ka(U,K,ne){return this instanceof ka?(this.h=+U,this.c=+K,void(this.l=+ne)):arguments.length<2?U instanceof ka?new ka(U.h,U.c,U.l):U instanceof Ne?sr(U.l,U.a,U.b):sr((U=dn((U=t.rgb(U)).r,U.g,U.b)).l,U.a,U.b):new ka(U,K,ne)}var Ge=ka.prototype=new Rn;Ge.brighter=function(U){return new ka(this.h,this.c,Math.min(100,this.l+We*(arguments.length?U:1)))},Ge.darker=function(U){return new ka(this.h,this.c,Math.max(0,this.l-We*(arguments.length?U:1)))},Ge.rgb=function(){return Pe(this.h,this.c,this.l).rgb()};function Pe(U,K,ne){return isNaN(U)&&(U=0),isNaN(K)&&(K=0),new Ne(ne,Math.cos(U*=Dt)*K,Math.sin(U)*K)}t.lab=Ne;function Ne(U,K,ne){return this instanceof Ne?(this.l=+U,this.a=+K,void(this.b=+ne)):arguments.length<2?U instanceof Ne?new Ne(U.l,U.a,U.b):U instanceof ka?Pe(U.h,U.c,U.l):dn((U=la(U)).r,U.g,U.b):new Ne(U,K,ne)}var We=18,lt=.95047,wt=1,Mt=1.08883,It=Ne.prototype=new Rn;It.brighter=function(U){return new Ne(Math.min(100,this.l+We*(arguments.length?U:1)),this.a,this.b)},It.darker=function(U){return new Ne(Math.max(0,this.l-We*(arguments.length?U:1)),this.a,this.b)},It.rgb=function(){return rr(this.l,this.a,this.b)};function rr(U,K,ne){var ve=(U+16)/116,ge=ve+K/500,pe=ve-ne/200;return ge=gr(ge)*lt,ve=gr(ve)*wt,pe=gr(pe)*Mt,new la(Vr(3.2404542*ge-1.5371385*ve-.4985314*pe),Vr(-.969266*ge+1.8760108*ve+.041556*pe),Vr(.0556434*ge-.2040259*ve+1.0572252*pe))}function sr(U,K,ne){return U>0?new ka(Math.atan2(ne,K)*Nt,Math.sqrt(K*K+ne*ne),U):new ka(NaN,NaN,U)}function gr(U){return U>.206893034?U*U*U:(U-4/29)/7.787037}function Ur(U){return U>.008856?Math.pow(U,1/3):7.787037*U+4/29}function Vr(U){return Math.round(255*(U<=.00304?12.92*U:1.055*Math.pow(U,1/2.4)-.055))}t.rgb=la;function la(U,K,ne){return this instanceof la?(this.r=~~U,this.g=~~K,void(this.b=~~ne)):arguments.length<2?U instanceof la?new la(U.r,U.g,U.b):yn(""+U,la,vn):new la(U,K,ne)}function Xa(U){return new la(U>>16,U>>8&255,U&255)}function La(U){return Xa(U)+""}var en=la.prototype=new Rn;en.brighter=function(U){U=Math.pow(.7,arguments.length?U:1);var K=this.r,ne=this.g,ve=this.b,ge=30;return!K&&!ne&&!ve?new la(ge,ge,ge):(K&&K<ge&&(K=ge),ne&&ne<ge&&(ne=ge),ve&&ve<ge&&(ve=ge),new la(Math.min(255,K/U),Math.min(255,ne/U),Math.min(255,ve/U)))},en.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new la(U*this.r,U*this.g,U*this.b)},en.hsl=function(){return On(this.r,this.g,this.b)},en.toString=function(){return"#"+In(this.r)+In(this.g)+In(this.b)};function In(U){return U<16?"0"+Math.max(0,U).toString(16):Math.min(255,U).toString(16)}function yn(U,K,ne){var ve=0,ge=0,pe=0,ze,Le,Ue;if(ze=/([a-z]+)\((.*)\)/.exec(U=U.toLowerCase()),ze)switch(Le=ze[2].split(","),ze[1]){case"hsl":return ne(parseFloat(Le[0]),parseFloat(Le[1])/100,parseFloat(Le[2])/100);case"rgb":return K(Oi(Le[0]),Oi(Le[1]),Oi(Le[2]))}return(Ue=No.get(U))?K(Ue.r,Ue.g,Ue.b):(U!=null&&U.charAt(0)==="#"&&!isNaN(Ue=parseInt(U.slice(1),16))&&(U.length===4?(ve=(Ue&3840)>>4,ve=ve>>4|ve,ge=Ue&240,ge=ge>>4|ge,pe=Ue&15,pe=pe<<4|pe):U.length===7&&(ve=(Ue&16711680)>>16,ge=(Ue&65280)>>8,pe=Ue&255)),K(ve,ge,pe))}function On(U,K,ne){var ve=Math.min(U/=255,K/=255,ne/=255),ge=Math.max(U,K,ne),pe=ge-ve,ze,Le,Ue=(ge+ve)/2;return pe?(Le=Ue<.5?pe/(ge+ve):pe/(2-ge-ve),U==ge?ze=(K-ne)/pe+(K<ne?6:0):K==ge?ze=(ne-U)/pe+2:ze=(U-K)/pe+4,ze*=60):(ze=NaN,Le=Ue>0&&Ue<1?0:ze),new xa(ze,Le,Ue)}function dn(U,K,ne){U=ni(U),K=ni(K),ne=ni(ne);var ve=Ur((.4124564*U+.3575761*K+.1804375*ne)/lt),ge=Ur((.2126729*U+.7151522*K+.072175*ne)/wt),pe=Ur((.0193339*U+.119192*K+.9503041*ne)/Mt);return Ne(116*ge-16,500*(ve-ge),200*(ge-pe))}function ni(U){return(U/=255)<=.04045?U/12.92:Math.pow((U+.055)/1.055,2.4)}function Oi(U){var K=parseFloat(U);return U.charAt(U.length-1)==="%"?Math.round(K*2.55):K}var No=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});No.forEach(function(U,K){No.set(U,Xa(K))});function kn(U){return typeof U=="function"?U:function(){return U}}t.functor=kn,t.xhr=ds(D);function ds(U){return function(K,ne,ve){return arguments.length===2&&typeof ne=="function"&&(ve=ne,ne=null),Kn(K,ne,U,ve)}}function Kn(U,K,ne,ve){var ge={},pe=t.dispatch("beforesend","progress","load","error"),ze={},Le=new XMLHttpRequest,Ue=null;self.XDomainRequest&&!("withCredentials"in Le)&&/^(http(s)?:)?\/\//.test(U)&&(Le=new XDomainRequest),"onload"in Le?Le.onload=Le.onerror=nt:Le.onreadystatechange=function(){Le.readyState>3&&nt()};function nt(){var tt=Le.status,xt;if(!tt&&yl(Le)||tt>=200&&tt<300||tt===304){try{xt=ne.call(ge,Le)}catch(st){pe.error.call(ge,st);return}pe.load.call(ge,xt)}else pe.error.call(ge,Le)}return Le.onprogress=function(tt){var xt=t.event;t.event=tt;try{pe.progress.call(ge,Le)}finally{t.event=xt}},ge.header=function(tt,xt){return tt=(tt+"").toLowerCase(),arguments.length<2?ze[tt]:(xt==null?delete ze[tt]:ze[tt]=xt+"",ge)},ge.mimeType=function(tt){return arguments.length?(K=tt==null?null:tt+"",ge):K},ge.responseType=function(tt){return arguments.length?(Ue=tt,ge):Ue},ge.response=function(tt){return ne=tt,ge},["get","post"].forEach(function(tt){ge[tt]=function(){return ge.send.apply(ge,[tt].concat(a(arguments)))}}),ge.send=function(tt,xt,st){if(arguments.length===2&&typeof xt=="function"&&(st=xt,xt=null),Le.open(tt,U,!0),K!=null&&!("accept"in ze)&&(ze.accept=K+",*/*"),Le.setRequestHeader)for(var Vt in ze)Le.setRequestHeader(Vt,ze[Vt]);return K!=null&&Le.overrideMimeType&&Le.overrideMimeType(K),Ue!=null&&(Le.responseType=Ue),st!=null&&ge.on("error",st).on("load",function(lr){st(null,lr)}),pe.beforesend.call(ge,Le),Le.send(xt==null?null:xt),ge},ge.abort=function(){return Le.abort(),ge},t.rebind(ge,pe,"on"),ve==null?ge:ge.get(_o(ve))}function _o(U){return U.length===1?function(K,ne){U(K==null?ne:null)}:U}function yl(U){var K=U.responseType;return K&&K!=="text"?U.response:U.responseText}t.dsv=function(U,K){var ne=new RegExp('["'+U+`
]`),ve=U.charCodeAt(0);function ge(nt,tt,xt){arguments.length<3&&(xt=tt,tt=null);var st=Kn(nt,K,tt==null?pe:ze(tt),xt);return st.row=function(Vt){return arguments.length?st.response((tt=Vt)==null?pe:ze(Vt)):tt},st}function pe(nt){return ge.parse(nt.responseText)}function ze(nt){return function(tt){return ge.parse(tt.responseText,nt)}}ge.parse=function(nt,tt){var xt;return ge.parseRows(nt,function(st,Vt){if(xt)return xt(st,Vt-1);var lr=function(kt){for(var $t={},Ht=st.length,ar=0;ar<Ht;++ar)$t[st[ar]]=kt[ar];return $t};xt=tt?function(kt,$t){return tt(lr(kt),$t)}:lr})},ge.parseRows=function(nt,tt){var xt={},st={},Vt=[],lr=nt.length,kt=0,$t=0,Ht,ar;function nr(){if(kt>=lr)return st;if(ar)return ar=!1,xt;var Yr=kt;if(nt.charCodeAt(Yr)===34){for(var ya=Yr;ya++<lr;)if(nt.charCodeAt(ya)===34){if(nt.charCodeAt(ya+1)!==34)break;++ya}kt=ya+2;var va=nt.charCodeAt(ya+1);return va===13?(ar=!0,nt.charCodeAt(ya+2)===10&&++kt):va===10&&(ar=!0),nt.slice(Yr+1,ya).replace(/""/g,'"')}for(;kt<lr;){var va=nt.charCodeAt(kt++),ba=1;if(va===10)ar=!0;else if(va===13)ar=!0,nt.charCodeAt(kt)===10&&(++kt,++ba);else if(va!==ve)continue;return nt.slice(Yr,kt-ba)}return nt.slice(Yr)}for(;(Ht=nr())!==st;){for(var Gt=[];Ht!==xt&&Ht!==st;)Gt.push(Ht),Ht=nr();tt&&(Gt=tt(Gt,$t++))==null||Vt.push(Gt)}return Vt},ge.format=function(nt){if(Array.isArray(nt[0]))return ge.formatRows(nt);var tt=new N,xt=[];return nt.forEach(function(st){for(var Vt in st)tt.has(Vt)||xt.push(tt.add(Vt))}),[xt.map(Ue).join(U)].concat(nt.map(function(st){return xt.map(function(Vt){return Ue(st[Vt])}).join(U)})).join(`
`)},ge.formatRows=function(nt){return nt.map(Le).join(`
`)};function Le(nt){return nt.map(Ue).join(U)}function Ue(nt){return ne.test(nt)?'"'+nt.replace(/\"/g,'""')+'"':nt}return ge},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("	","text/tab-separated-values");var xl,Hi,zi,Vn,nl=this[$(this,"requestAnimationFrame")]||function(U){setTimeout(U,17)};t.timer=function(){kh.apply(this,arguments)};function kh(U,K,ne){var ve=arguments.length;ve<2&&(K=0),ve<3&&(ne=Date.now());var ge=ne+K,pe={c:U,t:ge,n:null};return Hi?Hi.n=pe:xl=pe,Hi=pe,zi||(Vn=clearTimeout(Vn),zi=1,nl(wo)),pe}function wo(){var U=Eh(),K=Em()-U;K>24?(isFinite(K)&&(clearTimeout(Vn),Vn=setTimeout(wo,K)),zi=0):(zi=1,nl(wo))}t.timer.flush=function(){Eh(),Em()};function Eh(){for(var U=Date.now(),K=xl;K;)U>=K.t&&K.c(U-K.t)&&(K.c=null),K=K.n;return U}function Em(){for(var U,K=xl,ne=1/0;K;)K.c?(K.t<ne&&(ne=K.t),K=(U=K).n):K=U?U.n=K.n:xl=K.n;return Hi=U,ne}t.round=function(U,K){return K?Math.round(U*(K=Math.pow(10,K)))/K:Math.round(U)},t.geom={};function uv(U){return U[0]}function bc(U){return U[1]}t.geom.hull=function(U){var K=uv,ne=bc;if(arguments.length)return ve(U);function ve(ge){if(ge.length<3)return[];var pe=kn(K),ze=kn(ne),Le,Ue=ge.length,nt=[],tt=[];for(Le=0;Le<Ue;Le++)nt.push([+pe.call(this,ge[Le],Le),+ze.call(this,ge[Le],Le),Le]);for(nt.sort(Cm),Le=0;Le<Ue;Le++)tt.push([nt[Le][0],-nt[Le][1]]);var xt=O0(nt),st=O0(tt),Vt=st[0]===xt[0],lr=st[st.length-1]===xt[xt.length-1],kt=[];for(Le=xt.length-1;Le>=0;--Le)kt.push(ge[nt[xt[Le]][2]]);for(Le=+Vt;Le<st.length-lr;++Le)kt.push(ge[nt[st[Le]][2]]);return kt}return ve.x=function(ge){return arguments.length?(K=ge,ve):K},ve.y=function(ge){return arguments.length?(ne=ge,ve):ne},ve};function O0(U){for(var K=U.length,ne=[0,1],ve=2,ge=2;ge<K;ge++){for(;ve>1&&hr(U[ne[ve-2]],U[ne[ve-1]],U[ge])<=0;)--ve;ne[ve++]=ge}return ne.slice(0,ve)}function Cm(U,K){return U[0]-K[0]||U[1]-K[1]}t.geom.polygon=function(U){return we(U,ad),U};var ad=t.geom.polygon.prototype=[];ad.area=function(){for(var U=-1,K=this.length,ne,ve=this[K-1],ge=0;++U<K;)ne=ve,ve=this[U],ge+=ne[1]*ve[0]-ne[0]*ve[1];return ge*.5},ad.centroid=function(U){var K=-1,ne=this.length,ve=0,ge=0,pe,ze=this[ne-1],Le;for(arguments.length||(U=-1/(6*this.area()));++K<ne;)pe=ze,ze=this[K],Le=pe[0]*ze[1]-ze[0]*pe[1],ve+=(pe[0]+ze[0])*Le,ge+=(pe[1]+ze[1])*Le;return[ve*U,ge*U]},ad.clip=function(U){for(var K,ne=Ch(U),ve=-1,ge=this.length-Ch(this),pe,ze,Le=this[ge-1],Ue,nt,tt;++ve<ge;){for(K=U.slice(),U.length=0,Ue=this[ve],nt=K[(ze=K.length-ne)-1],pe=-1;++pe<ze;)tt=K[pe],fv(tt,Le,Ue)?(fv(nt,Le,Ue)||U.push(N0(nt,tt,Le,Ue)),U.push(tt)):fv(nt,Le,Ue)&&U.push(N0(nt,tt,Le,Ue)),nt=tt;ne&&U.push(U[0]),Le=Ue}return U};function fv(U,K,ne){return(ne[0]-K[0])*(U[1]-K[1])<(ne[1]-K[1])*(U[0]-K[0])}function N0(U,K,ne,ve){var ge=U[0],pe=ne[0],ze=K[0]-ge,Le=ve[0]-pe,Ue=U[1],nt=ne[1],tt=K[1]-Ue,xt=ve[1]-nt,st=(Le*(Ue-nt)-xt*(ge-pe))/(xt*ze-Le*tt);return[ge+st*ze,Ue+st*tt]}function Ch(U){var K=U[0],ne=U[U.length-1];return!(K[0]-ne[0]||K[1]-ne[1])}var Lh,uo,is,Fl=[],nd,Xl,id=[];function Lm(){mu(this),this.edge=this.site=this.circle=null}function B0(U){var K=Fl.pop()||new Lm;return K.site=U,K}function xp(U){sf(U),is.remove(U),Fl.push(U),mu(U)}function bp(U){var K=U.circle,ne=K.x,ve=K.cy,ge={x:ne,y:ve},pe=U.P,ze=U.N,Le=[U];xp(U);for(var Ue=pe;Ue.circle&&y(ne-Ue.circle.x)<Sr&&y(ve-Ue.circle.cy)<Sr;)pe=Ue.P,Le.unshift(Ue),xp(Ue),Ue=pe;Le.unshift(Ue),sf(Ue);for(var nt=ze;nt.circle&&y(ne-nt.circle.x)<Sr&&y(ve-nt.circle.cy)<Sr;)ze=nt.N,Le.push(nt),xp(nt),nt=ze;Le.push(nt),sf(nt);var tt=Le.length,xt;for(xt=1;xt<tt;++xt)nt=Le[xt],Ue=Le[xt-1],lf(nt.edge,Ue.site,nt.site,ge);Ue=Le[0],nt=Le[tt-1],nt.edge=Zl(Ue.site,nt.site,null,ge),of(Ue),of(nt)}function ea(U){for(var K=U.x,ne=U.y,ve,ge,pe,ze,Le=is._;Le;)if(pe=wa(Le,ne)-K,pe>Sr)Le=Le.L;else if(ze=K-_c(Le,ne),ze>Sr){if(!Le.R){ve=Le;break}Le=Le.R}else{pe>-Sr?(ve=Le.P,ge=Le):ze>-Sr?(ve=Le,ge=Le.N):ve=ge=Le;break}var Ue=B0(U);if(is.insert(ve,Ue),!(!ve&&!ge)){if(ve===ge){sf(ve),ge=B0(ve.site),is.insert(Ue,ge),Ue.edge=ge.edge=Zl(ve.site,Ue.site),of(ve),of(ge);return}if(!ge){Ue.edge=Zl(ve.site,Ue.site);return}sf(ve),sf(ge);var nt=ve.site,tt=nt.x,xt=nt.y,st=U.x-tt,Vt=U.y-xt,lr=ge.site,kt=lr.x-tt,$t=lr.y-xt,Ht=2*(st*$t-Vt*kt),ar=st*st+Vt*Vt,nr=kt*kt+$t*$t,Gt={x:($t*ar-Vt*nr)/Ht+tt,y:(st*nr-kt*ar)/Ht+xt};lf(ge.edge,nt,lr,Gt),Ue.edge=Zl(nt,U,null,Gt),ge.edge=Zl(U,lr,null,Gt),of(ve),of(ge)}}function wa(U,K){var ne=U.site,ve=ne.x,ge=ne.y,pe=ge-K;if(!pe)return ve;var ze=U.P;if(!ze)return-1/0;ne=ze.site;var Le=ne.x,Ue=ne.y,nt=Ue-K;if(!nt)return Le;var tt=Le-ve,xt=1/pe-1/nt,st=tt/nt;return xt?(-st+Math.sqrt(st*st-2*xt*(tt*tt/(-2*nt)-Ue+nt/2+ge-pe/2)))/xt+ve:(ve+Le)/2}function _c(U,K){var ne=U.N;if(ne)return wa(ne,K);var ve=U.site;return ve.y===K?ve.x:1/0}function wc(U){this.site=U,this.edges=[]}wc.prototype.prepare=function(){for(var U=this.edges,K=U.length,ne;K--;)ne=U[K].edge,(!ne.b||!ne.a)&&U.splice(K,1);return U.sort(Tc),U.length};function Wo(U){for(var K=U[0][0],ne=U[1][0],ve=U[0][1],ge=U[1][1],pe,ze,Le,Ue,nt=uo,tt=nt.length,xt,st,Vt,lr,kt,$t;tt--;)if(xt=nt[tt],!(!xt||!xt.prepare()))for(Vt=xt.edges,lr=Vt.length,st=0;st<lr;)$t=Vt[st].end(),Le=$t.x,Ue=$t.y,kt=Vt[++st%lr].start(),pe=kt.x,ze=kt.y,(y(Le-pe)>Sr||y(Ue-ze)>Sr)&&(Vt.splice(st,0,new Ac(Xn(xt.site,$t,y(Le-K)<Sr&&ge-Ue>Sr?{x:K,y:y(pe-K)<Sr?ze:ge}:y(Ue-ge)<Sr&&ne-Le>Sr?{x:y(ze-ge)<Sr?pe:ne,y:ge}:y(Le-ne)<Sr&&Ue-ve>Sr?{x:ne,y:y(pe-ne)<Sr?ze:ve}:y(Ue-ve)<Sr&&Le-K>Sr?{x:y(ze-ve)<Sr?pe:K,y:ve}:null),xt.site,null)),++lr)}function Tc(U,K){return K.angle-U.angle}function nf(){mu(this),this.x=this.y=this.arc=this.site=this.cy=null}function of(U){var K=U.P,ne=U.N;if(!(!K||!ne)){var ve=K.site,ge=U.site,pe=ne.site;if(ve!==pe){var ze=ge.x,Le=ge.y,Ue=ve.x-ze,nt=ve.y-Le,tt=pe.x-ze,xt=pe.y-Le,st=2*(Ue*xt-nt*tt);if(!(st>=-Zr)){var Vt=Ue*Ue+nt*nt,lr=tt*tt+xt*xt,kt=(xt*Vt-nt*lr)/st,$t=(Ue*lr-tt*Vt)/st,xt=$t+Le,Ht=id.pop()||new nf;Ht.arc=U,Ht.site=ge,Ht.x=kt+ze,Ht.y=xt+Math.sqrt(kt*kt+$t*$t),Ht.cy=xt,U.circle=Ht;for(var ar=null,nr=Xl._;nr;)if(Ht.y<nr.y||Ht.y===nr.y&&Ht.x<=nr.x)if(nr.L)nr=nr.L;else{ar=nr.P;break}else if(nr.R)nr=nr.R;else{ar=nr;break}Xl.insert(ar,Ht),ar||(nd=Ht)}}}}function sf(U){var K=U.circle;K&&(K.P||(nd=K.N),Xl.remove(K),id.push(K),mu(K),U.circle=null)}function Ha(U,K,ne,ve){return function(ge){var pe=ge.a,ze=ge.b,Le=pe.x,Ue=pe.y,nt=ze.x,tt=ze.y,xt=0,st=1,Vt=nt-Le,lr=tt-Ue,kt;if(kt=U-Le,!(!Vt&&kt>0)){if(kt/=Vt,Vt<0){if(kt<xt)return;kt<st&&(st=kt)}else if(Vt>0){if(kt>st)return;kt>xt&&(xt=kt)}if(kt=ne-Le,!(!Vt&&kt<0)){if(kt/=Vt,Vt<0){if(kt>st)return;kt>xt&&(xt=kt)}else if(Vt>0){if(kt<xt)return;kt<st&&(st=kt)}if(kt=K-Ue,!(!lr&&kt>0)){if(kt/=lr,lr<0){if(kt<xt)return;kt<st&&(st=kt)}else if(lr>0){if(kt>st)return;kt>xt&&(xt=kt)}if(kt=ve-Ue,!(!lr&&kt<0)){if(kt/=lr,lr<0){if(kt>st)return;kt>xt&&(xt=kt)}else if(lr>0){if(kt<xt)return;kt<st&&(st=kt)}return xt>0&&(ge.a={x:Le+xt*Vt,y:Ue+xt*lr}),st<1&&(ge.b={x:Le+st*Vt,y:Ue+st*lr}),ge}}}}}}function ri(U){for(var K=Lh,ne=Ha(U[0][0],U[0][1],U[1][0],U[1][1]),ve=K.length,ge;ve--;)ge=K[ve],(!Hn(ge,U)||!ne(ge)||y(ge.a.x-ge.b.x)<Sr&&y(ge.a.y-ge.b.y)<Sr)&&(ge.a=ge.b=null,K.splice(ve,1))}function Hn(U,K){var ne=U.b;if(ne)return!0;var ve=U.a,ge=K[0][0],pe=K[1][0],ze=K[0][1],Le=K[1][1],Ue=U.l,nt=U.r,tt=Ue.x,xt=Ue.y,st=nt.x,Vt=nt.y,lr=(tt+st)/2,kt=(xt+Vt)/2,$t,Ht;if(Vt===xt){if(lr<ge||lr>=pe)return;if(tt>st){if(!ve)ve={x:lr,y:ze};else if(ve.y>=Le)return;ne={x:lr,y:Le}}else{if(!ve)ve={x:lr,y:Le};else if(ve.y<ze)return;ne={x:lr,y:ze}}}else if($t=(tt-st)/(Vt-xt),Ht=kt-$t*lr,$t<-1||$t>1)if(tt>st){if(!ve)ve={x:(ze-Ht)/$t,y:ze};else if(ve.y>=Le)return;ne={x:(Le-Ht)/$t,y:Le}}else{if(!ve)ve={x:(Le-Ht)/$t,y:Le};else if(ve.y<ze)return;ne={x:(ze-Ht)/$t,y:ze}}else if(xt<Vt){if(!ve)ve={x:ge,y:$t*ge+Ht};else if(ve.x>=pe)return;ne={x:pe,y:$t*pe+Ht}}else{if(!ve)ve={x:pe,y:$t*pe+Ht};else if(ve.x<ge)return;ne={x:ge,y:$t*ge+Ht}}return U.a=ve,U.b=ne,!0}function Es(U,K){this.l=U,this.r=K,this.a=this.b=null}function Zl(U,K,ne,ve){var ge=new Es(U,K);return Lh.push(ge),ne&&lf(ge,U,K,ne),ve&&lf(ge,K,U,ve),uo[U.i].edges.push(new Ac(ge,U,K)),uo[K.i].edges.push(new Ac(ge,K,U)),ge}function Xn(U,K,ne){var ve=new Es(U,null);return ve.a=K,ve.b=ne,Lh.push(ve),ve}function lf(U,K,ne,ve){!U.a&&!U.b?(U.a=ve,U.l=K,U.r=ne):U.l===ne?U.b=ve:U.a=ve}function Ac(U,K,ne){var ve=U.a,ge=U.b;this.edge=U,this.site=K,this.angle=ne?Math.atan2(ne.y-K.y,ne.x-K.x):U.l===K?Math.atan2(ge.x-ve.x,ve.y-ge.y):Math.atan2(ve.x-ge.x,ge.y-ve.y)}Ac.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function il(){this._=null}function mu(U){U.U=U.C=U.L=U.R=U.P=U.N=null}il.prototype={insert:function(U,K){var ne,ve,ge;if(U){if(K.P=U,K.N=U.N,U.N&&(U.N.P=K),U.N=K,U.R){for(U=U.R;U.L;)U=U.L;U.L=K}else U.R=K;ne=U}else this._?(U=Sc(this._),K.P=null,K.N=U,U.P=U.L=K,ne=U):(K.P=K.N=null,this._=K,ne=null);for(K.L=K.R=null,K.U=ne,K.C=!0,U=K;ne&&ne.C;)ve=ne.U,ne===ve.L?(ge=ve.R,ge&&ge.C?(ne.C=ge.C=!1,ve.C=!0,U=ve):(U===ne.R&&(Po(this,ne),U=ne,ne=U.U),ne.C=!1,ve.C=!0,Xi(this,ve))):(ge=ve.L,ge&&ge.C?(ne.C=ge.C=!1,ve.C=!0,U=ve):(U===ne.L&&(Xi(this,ne),U=ne,ne=U.U),ne.C=!1,ve.C=!0,Po(this,ve))),ne=U.U;this._.C=!1},remove:function(U){U.N&&(U.N.P=U.P),U.P&&(U.P.N=U.N),U.N=U.P=null;var K=U.U,ne,ve=U.L,ge=U.R,pe,ze;if(ve?ge?pe=Sc(ge):pe=ve:pe=ge,K?K.L===U?K.L=pe:K.R=pe:this._=pe,ve&&ge?(ze=pe.C,pe.C=U.C,pe.L=ve,ve.U=pe,pe!==ge?(K=pe.U,pe.U=U.U,U=pe.R,K.L=U,pe.R=ge,ge.U=pe):(pe.U=K,K=pe,U=pe.R)):(ze=U.C,U=pe),U&&(U.U=K),!ze){if(U&&U.C){U.C=!1;return}do{if(U===this._)break;if(U===K.L){if(ne=K.R,ne.C&&(ne.C=!1,K.C=!0,Po(this,K),ne=K.R),ne.L&&ne.L.C||ne.R&&ne.R.C){(!ne.R||!ne.R.C)&&(ne.L.C=!1,ne.C=!0,Xi(this,ne),ne=K.R),ne.C=K.C,K.C=ne.R.C=!1,Po(this,K),U=this._;break}}else if(ne=K.L,ne.C&&(ne.C=!1,K.C=!0,Xi(this,K),ne=K.L),ne.L&&ne.L.C||ne.R&&ne.R.C){(!ne.L||!ne.L.C)&&(ne.R.C=!1,ne.C=!0,Po(this,ne),ne=K.L),ne.C=K.C,K.C=ne.L.C=!1,Xi(this,K),U=this._;break}ne.C=!0,U=K,K=K.U}while(!U.C);U&&(U.C=!1)}}};function Po(U,K){var ne=K,ve=K.R,ge=ne.U;ge?ge.L===ne?ge.L=ve:ge.R=ve:U._=ve,ve.U=ge,ne.U=ve,ne.R=ve.L,ne.R&&(ne.R.U=ne),ve.L=ne}function Xi(U,K){var ne=K,ve=K.L,ge=ne.U;ge?ge.L===ne?ge.L=ve:ge.R=ve:U._=ve,ve.U=ge,ne.U=ve,ne.L=ve.R,ne.L&&(ne.L.U=ne),ve.R=ne}function Sc(U){for(;U.L;)U=U.L;return U}function Vf(U,K){var ne=U.sort(Mc).pop(),ve,ge,pe;for(Lh=[],uo=new Array(U.length),is=new il,Xl=new il;;)if(pe=nd,ne&&(!pe||ne.y<pe.y||ne.y===pe.y&&ne.x<pe.x))(ne.x!==ve||ne.y!==ge)&&(uo[ne.i]=new wc(ne),ea(ne),ve=ne.x,ge=ne.y),ne=U.pop();else if(pe)bp(pe.arc);else break;K&&(ri(K),Wo(K));var ze={cells:uo,edges:Lh};return is=Xl=Lh=uo=null,ze}function Mc(U,K){return K.y-U.y||K.x-U.x}t.geom.voronoi=function(U){var K=uv,ne=bc,ve=K,ge=ne,pe=uf;if(U)return ze(U);function ze(Ue){var nt=new Array(Ue.length),tt=pe[0][0],xt=pe[0][1],st=pe[1][0],Vt=pe[1][1];return Vf(Le(Ue),pe).cells.forEach(function(lr,kt){var $t=lr.edges,Ht=lr.site,ar=nt[kt]=$t.length?$t.map(function(nr){var Gt=nr.start();return[Gt.x,Gt.y]}):Ht.x>=tt&&Ht.x<=st&&Ht.y>=xt&&Ht.y<=Vt?[[tt,Vt],[st,Vt],[st,xt],[tt,xt]]:[];ar.point=Ue[kt]}),nt}function Le(Ue){return Ue.map(function(nt,tt){return{x:Math.round(ve(nt,tt)/Sr)*Sr,y:Math.round(ge(nt,tt)/Sr)*Sr,i:tt}})}return ze.links=function(Ue){return Vf(Le(Ue)).edges.filter(function(nt){return nt.l&&nt.r}).map(function(nt){return{source:Ue[nt.l.i],target:Ue[nt.r.i]}})},ze.triangles=function(Ue){var nt=[];return Vf(Le(Ue)).cells.forEach(function(tt,xt){for(var st=tt.site,Vt=tt.edges.sort(Tc),lr=-1,kt=Vt.length,$t,Ht=Vt[kt-1].edge,ar=Ht.l===st?Ht.r:Ht.l;++lr<kt;)$t=ar,Ht=Vt[lr].edge,ar=Ht.l===st?Ht.r:Ht.l,xt<$t.i&&xt<ar.i&&I1(st,$t,ar)<0&&nt.push([Ue[xt],Ue[$t.i],Ue[ar.i]])}),nt},ze.x=function(Ue){return arguments.length?(ve=kn(K=Ue),ze):K},ze.y=function(Ue){return arguments.length?(ge=kn(ne=Ue),ze):ne},ze.clipExtent=function(Ue){return arguments.length?(pe=Ue==null?uf:Ue,ze):pe===uf?null:pe},ze.size=function(Ue){return arguments.length?ze.clipExtent(Ue&&[[0,0],Ue]):pe===uf?null:pe&&pe[1]},ze};var uf=[[-1e6,-1e6],[1e6,1e6]];function I1(U,K,ne){return(U.x-ne.x)*(K.y-U.y)-(U.x-K.x)*(ne.y-U.y)}t.geom.delaunay=function(U){return t.geom.voronoi().triangles(U)},t.geom.quadtree=function(U,K,ne,ve,ge){var pe=uv,ze=bc,Le;if(Le=arguments.length)return pe=$0,ze=Si,Le===3&&(ge=ne,ve=K,ne=K=0),Ue(U);function Ue(nt){var tt,xt=kn(pe),st=kn(ze),Vt,lr,kt,$t,Ht,ar,nr,Gt;if(K!=null)Ht=K,ar=ne,nr=ve,Gt=ge;else if(nr=Gt=-(Ht=ar=1/0),Vt=[],lr=[],$t=nt.length,Le)for(kt=0;kt<$t;++kt)tt=nt[kt],tt.x<Ht&&(Ht=tt.x),tt.y<ar&&(ar=tt.y),tt.x>nr&&(nr=tt.x),tt.y>Gt&&(Gt=tt.y),Vt.push(tt.x),lr.push(tt.y);else for(kt=0;kt<$t;++kt){var Yr=+xt(tt=nt[kt],kt),ya=+st(tt,kt);Yr<Ht&&(Ht=Yr),ya<ar&&(ar=ya),Yr>nr&&(nr=Yr),ya>Gt&&(Gt=ya),Vt.push(Yr),lr.push(ya)}var va=nr-Ht,ba=Gt-ar;va>ba?Gt=ar+va:nr=Ht+ba;function Ma(Ta,un,ai,ho,Jn,pa,Sn,Dn){if(!(isNaN(ai)||isNaN(ho)))if(Ta.leaf){var Ln=Ta.x,To=Ta.y;if(Ln!=null)if(y(Ln-ai)+y(To-ho)<.01)Ba(Ta,un,ai,ho,Jn,pa,Sn,Dn);else{var Nn=Ta.point;Ta.x=Ta.y=Ta.point=null,Ba(Ta,Nn,Ln,To,Jn,pa,Sn,Dn),Ba(Ta,un,ai,ho,Jn,pa,Sn,Dn)}else Ta.x=ai,Ta.y=ho,Ta.point=un}else Ba(Ta,un,ai,ho,Jn,pa,Sn,Dn)}function Ba(Ta,un,ai,ho,Jn,pa,Sn,Dn){var Ln=(Jn+Sn)*.5,To=(pa+Dn)*.5,Nn=ai>=Ln,Ho=ho>=To,vo=Ho<<1|Nn;Ta.leaf=!1,Ta=Ta.nodes[vo]||(Ta.nodes[vo]=cv()),Nn?Jn=Ln:Sn=Ln,Ho?pa=To:Dn=To,Ma(Ta,un,ai,ho,Jn,pa,Sn,Dn)}var Ya=cv();if(Ya.add=function(Ta){Ma(Ya,Ta,+xt(Ta,++kt),+st(Ta,kt),Ht,ar,nr,Gt)},Ya.visit=function(Ta){kc(Ta,Ya,Ht,ar,nr,Gt)},Ya.find=function(Ta){return Wn(Ya,Ta[0],Ta[1],Ht,ar,nr,Gt)},kt=-1,K==null){for(;++kt<$t;)Ma(Ya,nt[kt],Vt[kt],lr[kt],Ht,ar,nr,Gt);--kt}else nt.forEach(Ya.add);return Vt=lr=nt=tt=null,Ya}return Ue.x=function(nt){return arguments.length?(pe=nt,Ue):pe},Ue.y=function(nt){return arguments.length?(ze=nt,Ue):ze},Ue.extent=function(nt){return arguments.length?(nt==null?K=ne=ve=ge=null:(K=+nt[0][0],ne=+nt[0][1],ve=+nt[1][0],ge=+nt[1][1]),Ue):K==null?null:[[K,ne],[ve,ge]]},Ue.size=function(nt){return arguments.length?(nt==null?K=ne=ve=ge=null:(K=ne=0,ve=+nt[0],ge=+nt[1]),Ue):K==null?null:[ve-K,ge-ne]},Ue};function $0(U){return U.x}function Si(U){return U.y}function cv(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function kc(U,K,ne,ve,ge,pe){if(!U(K,ne,ve,ge,pe)){var ze=(ne+ge)*.5,Le=(ve+pe)*.5,Ue=K.nodes;Ue[0]&&kc(U,Ue[0],ne,ve,ze,Le),Ue[1]&&kc(U,Ue[1],ze,ve,ge,Le),Ue[2]&&kc(U,Ue[2],ne,Le,ze,pe),Ue[3]&&kc(U,Ue[3],ze,Le,ge,pe)}}function Wn(U,K,ne,ve,ge,pe,ze){var Le=1/0,Ue;return function nt(tt,xt,st,Vt,lr){if(!(xt>pe||st>ze||Vt<ve||lr<ge)){if(kt=tt.point){var kt,$t=K-tt.x,Ht=ne-tt.y,ar=$t*$t+Ht*Ht;if(ar<Le){var nr=Math.sqrt(Le=ar);ve=K-nr,ge=ne-nr,pe=K+nr,ze=ne+nr,Ue=kt}}for(var Gt=tt.nodes,Yr=(xt+Vt)*.5,ya=(st+lr)*.5,va=K>=Yr,ba=ne>=ya,Ma=ba<<1|va,Ba=Ma+4;Ma<Ba;++Ma)if(tt=Gt[Ma&3])switch(Ma&3){case 0:nt(tt,xt,st,Yr,ya);break;case 1:nt(tt,Yr,st,Vt,ya);break;case 2:nt(tt,xt,ya,Yr,lr);break;case 3:nt(tt,Yr,ya,Vt,lr);break}}}(U,ve,ge,pe,ze),Ue}t.interpolateRgb=$s;function $s(U,K){U=t.rgb(U),K=t.rgb(K);var ne=U.r,ve=U.g,ge=U.b,pe=K.r-ne,ze=K.g-ve,Le=K.b-ge;return function(Ue){return"#"+In(Math.round(ne+pe*Ue))+In(Math.round(ve+ze*Ue))+In(Math.round(ge+Le*Ue))}}t.interpolateObject=U0;function U0(U,K){var ne={},ve={},ge;for(ge in U)ge in K?ne[ge]=fo(U[ge],K[ge]):ve[ge]=U[ge];for(ge in K)ge in U||(ve[ge]=K[ge]);return function(pe){for(ge in ne)ve[ge]=ne[ge](pe);return ve}}t.interpolateNumber=os;function os(U,K){return U=+U,K=+K,function(ne){return U*(1-ne)+K*ne}}t.interpolateString=Bo;function Bo(U,K){var ne=ff.lastIndex=Cs.lastIndex=0,ve,ge,pe,ze=-1,Le=[],Ue=[];for(U=U+"",K=K+"";(ve=ff.exec(U))&&(ge=Cs.exec(K));)(pe=ge.index)>ne&&(pe=K.slice(ne,pe),Le[ze]?Le[ze]+=pe:Le[++ze]=pe),(ve=ve[0])===(ge=ge[0])?Le[ze]?Le[ze]+=ge:Le[++ze]=ge:(Le[++ze]=null,Ue.push({i:ze,x:os(ve,ge)})),ne=Cs.lastIndex;return ne<K.length&&(pe=K.slice(ne),Le[ze]?Le[ze]+=pe:Le[++ze]=pe),Le.length<2?Ue[0]?(K=Ue[0].x,function(nt){return K(nt)+""}):function(){return K}:(K=Ue.length,function(nt){for(var tt=0,xt;tt<K;++tt)Le[(xt=Ue[tt]).i]=xt.x(nt);return Le.join("")})}var ff=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cs=new RegExp(ff.source,"g");t.interpolate=fo;function fo(U,K){for(var ne=t.interpolators.length,ve;--ne>=0&&!(ve=t.interpolators[ne](U,K)););return ve}t.interpolators=[function(U,K){var ne=typeof K;return(ne==="string"?No.has(K.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(K)?$s:Bo:K instanceof Rn?$s:Array.isArray(K)?jf:ne==="object"&&isNaN(K)?U0:os)(U,K)}],t.interpolateArray=jf;function jf(U,K){var ne=[],ve=[],ge=U.length,pe=K.length,ze=Math.min(U.length,K.length),Le;for(Le=0;Le<ze;++Le)ne.push(fo(U[Le],K[Le]));for(;Le<ge;++Le)ve[Le]=U[Le];for(;Le<pe;++Le)ve[Le]=K[Le];return function(Ue){for(Le=0;Le<ze;++Le)ve[Le]=ne[Le](Ue);return ve}}var ps=function(){return D},yu=t.map({linear:ps,poly:cf,quad:function(){return Ec},cubic:function(){return Us},sin:function(){return $u},exp:function(){return od},circle:function(){return G0},elastic:hv,back:vv,bounce:function(){return V0}}),qf=t.map({in:D,out:Ol,"in-out":Pm,"out-in":function(U){return Pm(Ol(U))}});t.ease=function(U){var K=U.indexOf("-"),ne=K>=0?U.slice(0,K):U,ve=K>=0?U.slice(K+1):"in";return ne=yu.get(ne)||ps,ve=qf.get(ve)||D,H0(ve(ne.apply(null,r.call(arguments,1))))};function H0(U){return function(K){return K<=0?0:K>=1?1:U(K)}}function Ol(U){return function(K){return 1-U(1-K)}}function Pm(U){return function(K){return .5*(K<.5?U(2*K):2-U(2-2*K))}}function Ec(U){return U*U}function Us(U){return U*U*U}function D1(U){if(U<=0)return 0;if(U>=1)return 1;var K=U*U,ne=K*U;return 4*(U<.5?ne:3*(U-K)+ne-.75)}function cf(U){return function(K){return Math.pow(K,U)}}function $u(U){return 1-Math.cos(U*pt)}function od(U){return Math.pow(2,10*(U-1))}function G0(U){return 1-Math.sqrt(1-U*U)}function hv(U,K){var ne;return arguments.length<2&&(K=.45),arguments.length?ne=K/it*Math.asin(1/U):(U=1,ne=K/4),function(ve){return 1+U*Math.pow(2,-10*ve)*Math.sin((ve-ne)*it/K)}}function vv(U){return U||(U=1.70158),function(K){return K*K*((U+1)*K-U)}}function V0(U){return U<1/2.75?7.5625*U*U:U<2/2.75?7.5625*(U-=1.5/2.75)*U+.75:U<2.5/2.75?7.5625*(U-=2.25/2.75)*U+.9375:7.5625*(U-=2.625/2.75)*U+.984375}t.interpolateHcl=j0;function j0(U,K){U=t.hcl(U),K=t.hcl(K);var ne=U.h,ve=U.c,ge=U.l,pe=K.h-ne,ze=K.c-ve,Le=K.l-ge;return isNaN(ze)&&(ze=0,ve=isNaN(ve)?K.c:ve),isNaN(pe)?(pe=0,ne=isNaN(ne)?K.h:ne):pe>180?pe-=360:pe<-180&&(pe+=360),function(Ue){return Pe(ne+pe*Ue,ve+ze*Ue,ge+Le*Ue)+""}}t.interpolateHsl=q0;function q0(U,K){U=t.hsl(U),K=t.hsl(K);var ne=U.h,ve=U.s,ge=U.l,pe=K.h-ne,ze=K.s-ve,Le=K.l-ge;return isNaN(ze)&&(ze=0,ve=isNaN(ve)?K.s:ve),isNaN(pe)?(pe=0,ne=isNaN(ne)?K.h:ne):pe>180?pe-=360:pe<-180&&(pe+=360),function(Ue){return vn(ne+pe*Ue,ve+ze*Ue,ge+Le*Ue)+""}}t.interpolateLab=_p;function _p(U,K){U=t.lab(U),K=t.lab(K);var ne=U.l,ve=U.a,ge=U.b,pe=K.l-ne,ze=K.a-ve,Le=K.b-ge;return function(Ue){return rr(ne+pe*Ue,ve+ze*Ue,ge+Le*Ue)+""}}t.interpolateRound=Y0;function Y0(U,K){return K-=U,function(ne){return Math.round(U+K*ne)}}t.transform=function(U){var K=n.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(ne){if(ne!=null){K.setAttribute("transform",ne);var ve=K.transform.baseVal.consolidate()}return new W0(ve?ve.matrix:Z0)})(U)};function W0(U){var K=[U.a,U.b],ne=[U.c,U.d],ve=X0(K),ge=wp(K,ne),pe=X0(Im(ne,K,-ge))||0;K[0]*ne[1]<ne[0]*K[1]&&(K[0]*=-1,K[1]*=-1,ve*=-1,ge*=-1),this.rotate=(ve?Math.atan2(K[1],K[0]):Math.atan2(-ne[0],ne[1]))*Nt,this.translate=[U.e,U.f],this.scale=[ve,pe],this.skew=pe?Math.atan2(ge,pe)*Nt:0}W0.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function wp(U,K){return U[0]*K[0]+U[1]*K[1]}function X0(U){var K=Math.sqrt(wp(U,U));return K&&(U[0]/=K,U[1]/=K),K}function Im(U,K,ne){return U[0]+=ne*K[0],U[1]+=ne*K[1],U}var Z0={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=K0;function Ph(U){return U.length?U.pop()+",":""}function Cc(U,K,ne,ve){if(U[0]!==K[0]||U[1]!==K[1]){var ge=ne.push("translate(",null,",",null,")");ve.push({i:ge-4,x:os(U[0],K[0])},{i:ge-2,x:os(U[1],K[1])})}else(K[0]||K[1])&&ne.push("translate("+K+")")}function Tp(U,K,ne,ve){U!==K?(U-K>180?K+=360:K-U>180&&(U+=360),ve.push({i:ne.push(Ph(ne)+"rotate(",null,")")-2,x:os(U,K)})):K&&ne.push(Ph(ne)+"rotate("+K+")")}function Ap(U,K,ne,ve){U!==K?ve.push({i:ne.push(Ph(ne)+"skewX(",null,")")-2,x:os(U,K)}):K&&ne.push(Ph(ne)+"skewX("+K+")")}function sd(U,K,ne,ve){if(U[0]!==K[0]||U[1]!==K[1]){var ge=ne.push(Ph(ne)+"scale(",null,",",null,")");ve.push({i:ge-4,x:os(U[0],K[0])},{i:ge-2,x:os(U[1],K[1])})}else(K[0]!==1||K[1]!==1)&&ne.push(Ph(ne)+"scale("+K+")")}function K0(U,K){var ne=[],ve=[];return U=t.transform(U),K=t.transform(K),Cc(U.translate,K.translate,ne,ve),Tp(U.rotate,K.rotate,ne,ve),Ap(U.skew,K.skew,ne,ve),sd(U.scale,K.scale,ne,ve),U=K=null,function(ge){for(var pe=-1,ze=ve.length,Le;++pe<ze;)ne[(Le=ve[pe]).i]=Le.x(ge);return ne.join("")}}function Dm(U,K){return K=(K-=U=+U)||1/K,function(ne){return(ne-U)/K}}function R1(U,K){return K=(K-=U=+U)||1/K,function(ne){return Math.max(0,Math.min(1,(ne-U)/K))}}t.layout={},t.layout.bundle=function(){return function(U){for(var K=[],ne=-1,ve=U.length;++ne<ve;)K.push(J0(U[ne]));return K}};function J0(U){for(var K=U.source,ne=U.target,ve=Sp(K,ne),ge=[K];K!==ve;)K=K.parent,ge.push(K);for(var pe=ge.length;ne!==ve;)ge.splice(pe,0,ne),ne=ne.parent;return ge}function xu(U){for(var K=[],ne=U.parent;ne!=null;)K.push(U),U=ne,ne=ne.parent;return K.push(U),K}function Sp(U,K){if(U===K)return U;for(var ne=xu(U),ve=xu(K),ge=ne.pop(),pe=ve.pop(),ze=null;ge===pe;)ze=ge,ge=ne.pop(),pe=ve.pop();return ze}t.layout.chord=function(){var U={},K,ne,ve,ge,pe=0,ze,Le,Ue;function nt(){var xt={},st=[],Vt=t.range(ge),lr=[],kt,$t,Ht,ar,nr;for(K=[],ne=[],kt=0,ar=-1;++ar<ge;){for($t=0,nr=-1;++nr<ge;)$t+=ve[ar][nr];st.push($t),lr.push(t.range(ge)),kt+=$t}for(ze&&Vt.sort(function(Ya,Ta){return ze(st[Ya],st[Ta])}),Le&&lr.forEach(function(Ya,Ta){Ya.sort(function(un,ai){return Le(ve[Ta][un],ve[Ta][ai])})}),kt=(it-pe*ge)/kt,$t=0,ar=-1;++ar<ge;){for(Ht=$t,nr=-1;++nr<ge;){var Gt=Vt[ar],Yr=lr[Gt][nr],ya=ve[Gt][Yr],va=$t,ba=$t+=ya*kt;xt[Gt+"-"+Yr]={index:Gt,subindex:Yr,startAngle:va,endAngle:ba,value:ya}}ne[Gt]={index:Gt,startAngle:Ht,endAngle:$t,value:st[Gt]},$t+=pe}for(ar=-1;++ar<ge;)for(nr=ar-1;++nr<ge;){var Ma=xt[ar+"-"+nr],Ba=xt[nr+"-"+ar];(Ma.value||Ba.value)&&K.push(Ma.value<Ba.value?{source:Ba,target:Ma}:{source:Ma,target:Ba})}Ue&&tt()}function tt(){K.sort(function(xt,st){return Ue((xt.source.value+xt.target.value)/2,(st.source.value+st.target.value)/2)})}return U.matrix=function(xt){return arguments.length?(ge=(ve=xt)&&ve.length,K=ne=null,U):ve},U.padding=function(xt){return arguments.length?(pe=xt,K=ne=null,U):pe},U.sortGroups=function(xt){return arguments.length?(ze=xt,K=ne=null,U):ze},U.sortSubgroups=function(xt){return arguments.length?(Le=xt,K=null,U):Le},U.sortChords=function(xt){return arguments.length?(Ue=xt,K&&tt(),U):Ue},U.chords=function(){return K||nt(),K},U.groups=function(){return ne||nt(),ne},U},t.layout.force=function(){var U={},K=t.dispatch("start","tick","end"),ne,ve=[1,1],ge,pe,ze=.9,Le=fd,Ue=df,nt=-30,tt=gs,xt=.1,st=.64,Vt=[],lr=[],kt,$t,Ht;function ar(Gt){return function(Yr,ya,va,ba){if(Yr.point!==Gt){var Ma=Yr.cx-Gt.x,Ba=Yr.cy-Gt.y,Ya=ba-ya,Ta=Ma*Ma+Ba*Ba;if(Ya*Ya/st<Ta){if(Ta<tt){var un=Yr.charge/Ta;Gt.px-=Ma*un,Gt.py-=Ba*un}return!0}if(Yr.point&&Ta&&Ta<tt){var un=Yr.pointCharge/Ta;Gt.px-=Ma*un,Gt.py-=Ba*un}}return!Yr.charge}}U.tick=function(){if((pe*=.99)<.005)return ne=null,K.end({type:"end",alpha:pe=0}),!0;var Gt=Vt.length,Yr=lr.length,ya,va,ba,Ma,Ba,Ya,Ta,un,ai;for(va=0;va<Yr;++va)ba=lr[va],Ma=ba.source,Ba=ba.target,un=Ba.x-Ma.x,ai=Ba.y-Ma.y,(Ya=un*un+ai*ai)&&(Ya=pe*$t[va]*((Ya=Math.sqrt(Ya))-kt[va])/Ya,un*=Ya,ai*=Ya,Ba.x-=un*(Ta=Ma.weight+Ba.weight?Ma.weight/(Ma.weight+Ba.weight):.5),Ba.y-=ai*Ta,Ma.x+=un*(Ta=1-Ta),Ma.y+=ai*Ta);if((Ta=pe*xt)&&(un=ve[0]/2,ai=ve[1]/2,va=-1,Ta))for(;++va<Gt;)ba=Vt[va],ba.x+=(un-ba.x)*Ta,ba.y+=(ai-ba.y)*Ta;if(nt)for(ud(ya=t.geom.quadtree(Vt),pe,Ht),va=-1;++va<Gt;)(ba=Vt[va]).fixed||ya.visit(ar(ba));for(va=-1;++va<Gt;)ba=Vt[va],ba.fixed?(ba.x=ba.px,ba.y=ba.py):(ba.x-=(ba.px-(ba.px=ba.x))*ze,ba.y-=(ba.py-(ba.py=ba.y))*ze);K.tick({type:"tick",alpha:pe})},U.nodes=function(Gt){return arguments.length?(Vt=Gt,U):Vt},U.links=function(Gt){return arguments.length?(lr=Gt,U):lr},U.size=function(Gt){return arguments.length?(ve=Gt,U):ve},U.linkDistance=function(Gt){return arguments.length?(Le=typeof Gt=="function"?Gt:+Gt,U):Le},U.distance=U.linkDistance,U.linkStrength=function(Gt){return arguments.length?(Ue=typeof Gt=="function"?Gt:+Gt,U):Ue},U.friction=function(Gt){return arguments.length?(ze=+Gt,U):ze},U.charge=function(Gt){return arguments.length?(nt=typeof Gt=="function"?Gt:+Gt,U):nt},U.chargeDistance=function(Gt){return arguments.length?(tt=Gt*Gt,U):Math.sqrt(tt)},U.gravity=function(Gt){return arguments.length?(xt=+Gt,U):xt},U.theta=function(Gt){return arguments.length?(st=Gt*Gt,U):Math.sqrt(st)},U.alpha=function(Gt){return arguments.length?(Gt=+Gt,pe?Gt>0?pe=Gt:(ne.c=null,ne.t=NaN,ne=null,K.end({type:"end",alpha:pe=0})):Gt>0&&(K.start({type:"start",alpha:pe=Gt}),ne=kh(U.tick)),U):pe},U.start=function(){var Gt,Yr=Vt.length,ya=lr.length,va=ve[0],ba=ve[1],Ma,Ba;for(Gt=0;Gt<Yr;++Gt)(Ba=Vt[Gt]).index=Gt,Ba.weight=0;for(Gt=0;Gt<ya;++Gt)Ba=lr[Gt],typeof Ba.source=="number"&&(Ba.source=Vt[Ba.source]),typeof Ba.target=="number"&&(Ba.target=Vt[Ba.target]),++Ba.source.weight,++Ba.target.weight;for(Gt=0;Gt<Yr;++Gt)Ba=Vt[Gt],isNaN(Ba.x)&&(Ba.x=Ya("x",va)),isNaN(Ba.y)&&(Ba.y=Ya("y",ba)),isNaN(Ba.px)&&(Ba.px=Ba.x),isNaN(Ba.py)&&(Ba.py=Ba.y);if(kt=[],typeof Le=="function")for(Gt=0;Gt<ya;++Gt)kt[Gt]=+Le.call(this,lr[Gt],Gt);else for(Gt=0;Gt<ya;++Gt)kt[Gt]=Le;if($t=[],typeof Ue=="function")for(Gt=0;Gt<ya;++Gt)$t[Gt]=+Ue.call(this,lr[Gt],Gt);else for(Gt=0;Gt<ya;++Gt)$t[Gt]=Ue;if(Ht=[],typeof nt=="function")for(Gt=0;Gt<Yr;++Gt)Ht[Gt]=+nt.call(this,Vt[Gt],Gt);else for(Gt=0;Gt<Yr;++Gt)Ht[Gt]=nt;function Ya(Ta,un){if(!Ma){for(Ma=new Array(Yr),Jn=0;Jn<Yr;++Jn)Ma[Jn]=[];for(Jn=0;Jn<ya;++Jn){var ai=lr[Jn];Ma[ai.source.index].push(ai.target),Ma[ai.target.index].push(ai.source)}}for(var ho=Ma[Gt],Jn=-1,pa=ho.length,Sn;++Jn<pa;)if(!isNaN(Sn=ho[Jn][Ta]))return Sn;return Math.random()*un}return U.resume()},U.resume=function(){return U.alpha(.1)},U.stop=function(){return U.alpha(0)},U.drag=function(){if(ge||(ge=t.behavior.drag().origin(D).on("dragstart.force",ld).on("drag.force",nr).on("dragend.force",dv)),!arguments.length)return ge;this.on("mouseover.force",hf).on("mouseout.force",vf).call(ge)};function nr(Gt){Gt.px=t.event.x,Gt.py=t.event.y,U.resume()}return t.rebind(U,K,"on")};function ld(U){U.fixed|=2}function dv(U){U.fixed&=~6}function hf(U){U.fixed|=4,U.px=U.x,U.py=U.y}function vf(U){U.fixed&=~4}function ud(U,K,ne){var ve=0,ge=0;if(U.charge=0,!U.leaf)for(var pe=U.nodes,ze=pe.length,Le=-1,Ue;++Le<ze;)Ue=pe[Le],Ue!=null&&(ud(Ue,K,ne),U.charge+=Ue.charge,ve+=Ue.charge*Ue.cx,ge+=Ue.charge*Ue.cy);if(U.point){U.leaf||(U.point.x+=Math.random()-.5,U.point.y+=Math.random()-.5);var nt=K*ne[U.point.index];U.charge+=U.pointCharge=nt,ve+=nt*U.point.x,ge+=nt*U.point.y}U.cx=ve/U.charge,U.cy=ge/U.charge}var fd=20,df=1,gs=1/0;t.layout.hierarchy=function(){var U=Fm,K=Rm,ne=zm;function ve(ge){var pe=[ge],ze=[],Le;for(ge.depth=0;(Le=pe.pop())!=null;)if(ze.push(Le),(nt=K.call(ve,Le,Le.depth))&&(Ue=nt.length)){for(var Ue,nt,tt;--Ue>=0;)pe.push(tt=nt[Ue]),tt.parent=Le,tt.depth=Le.depth+1;ne&&(Le.value=0),Le.children=nt}else ne&&(Le.value=+ne.call(ve,Le,Le.depth)||0),delete Le.children;return Kl(ge,function(xt){var st,Vt;U&&(st=xt.children)&&st.sort(U),ne&&(Vt=xt.parent)&&(Vt.value+=xt.value)}),ze}return ve.sort=function(ge){return arguments.length?(U=ge,ve):U},ve.children=function(ge){return arguments.length?(K=ge,ve):K},ve.value=function(ge){return arguments.length?(ne=ge,ve):ne},ve.revalue=function(ge){return ne&&(cd(ge,function(pe){pe.children&&(pe.value=0)}),Kl(ge,function(pe){var ze;pe.children||(pe.value=+ne.call(ve,pe,pe.depth)||0),(ze=pe.parent)&&(ze.value+=pe.value)})),ge},ve};function Lc(U,K){return t.rebind(U,K,"sort","children","value"),U.nodes=U,U.links=Om,U}function cd(U,K){for(var ne=[U];(U=ne.pop())!=null;)if(K(U),(ge=U.children)&&(ve=ge.length))for(var ve,ge;--ve>=0;)ne.push(ge[ve])}function Kl(U,K){for(var ne=[U],ve=[];(U=ne.pop())!=null;)if(ve.push(U),(ze=U.children)&&(pe=ze.length))for(var ge=-1,pe,ze;++ge<pe;)ne.push(ze[ge]);for(;(U=ve.pop())!=null;)K(U)}function Rm(U){return U.children}function zm(U){return U.value}function Fm(U,K){return K.value-U.value}function Om(U){return t.merge(U.map(function(K){return(K.children||[]).map(function(ne){return{source:K,target:ne}})}))}t.layout.partition=function(){var U=t.layout.hierarchy(),K=[1,1];function ne(pe,ze,Le,Ue){var nt=pe.children;if(pe.x=ze,pe.y=pe.depth*Ue,pe.dx=Le,pe.dy=Ue,nt&&(xt=nt.length)){var tt=-1,xt,st,Vt;for(Le=pe.value?Le/pe.value:0;++tt<xt;)ne(st=nt[tt],ze,Vt=st.value*Le,Ue),ze+=Vt}}function ve(pe){var ze=pe.children,Le=0;if(ze&&(nt=ze.length))for(var Ue=-1,nt;++Ue<nt;)Le=Math.max(Le,ve(ze[Ue]));return 1+Le}function ge(pe,ze){var Le=U.call(this,pe,ze);return ne(Le[0],0,K[0],K[1]/ve(Le[0])),Le}return ge.size=function(pe){return arguments.length?(K=pe,ge):K},Lc(ge,U)},t.layout.pie=function(){var U=Number,K=Ih,ne=0,ve=it,ge=0;function pe(ze){var Le=ze.length,Ue=ze.map(function(ar,nr){return+U.call(pe,ar,nr)}),nt=+(typeof ne=="function"?ne.apply(this,arguments):ne),tt=(typeof ve=="function"?ve.apply(this,arguments):ve)-nt,xt=Math.min(Math.abs(tt)/Le,+(typeof ge=="function"?ge.apply(this,arguments):ge)),st=xt*(tt<0?-1:1),Vt=t.sum(Ue),lr=Vt?(tt-Le*st)/Vt:0,kt=t.range(Le),$t=[],Ht;return K!=null&&kt.sort(K===Ih?function(ar,nr){return Ue[nr]-Ue[ar]}:function(ar,nr){return K(ze[ar],ze[nr])}),kt.forEach(function(ar){$t[ar]={data:ze[ar],value:Ht=Ue[ar],startAngle:nt,endAngle:nt+=Ht*lr+st,padAngle:xt}}),$t}return pe.value=function(ze){return arguments.length?(U=ze,pe):U},pe.sort=function(ze){return arguments.length?(K=ze,pe):K},pe.startAngle=function(ze){return arguments.length?(ne=ze,pe):ne},pe.endAngle=function(ze){return arguments.length?(ve=ze,pe):ve},pe.padAngle=function(ze){return arguments.length?(ge=ze,pe):ge},pe};var Ih={};t.layout.stack=function(){var U=D,K=pf,ne=pv,ve=z1,ge=Q0,pe=hd;function ze(Le,Ue){if(!(lr=Le.length))return Le;var nt=Le.map(function(ar,nr){return U.call(ze,ar,nr)}),tt=nt.map(function(ar){return ar.map(function(nr,Gt){return[ge.call(ze,nr,Gt),pe.call(ze,nr,Gt)]})}),xt=K.call(ze,tt,Ue);nt=t.permute(nt,xt),tt=t.permute(tt,xt);var st=ne.call(ze,tt,Ue),Vt=nt[0].length,lr,kt,$t,Ht;for($t=0;$t<Vt;++$t)for(ve.call(ze,nt[0][$t],Ht=st[$t],tt[0][$t][1]),kt=1;kt<lr;++kt)ve.call(ze,nt[kt][$t],Ht+=tt[kt-1][$t][1],tt[kt][$t][1]);return Le}return ze.values=function(Le){return arguments.length?(U=Le,ze):U},ze.order=function(Le){return arguments.length?(K=typeof Le=="function"?Le:Mp.get(Le)||pf,ze):K},ze.offset=function(Le){return arguments.length?(ne=typeof Le=="function"?Le:Nl.get(Le)||pv,ze):ne},ze.x=function(Le){return arguments.length?(ge=Le,ze):ge},ze.y=function(Le){return arguments.length?(pe=Le,ze):pe},ze.out=function(Le){return arguments.length?(ve=Le,ze):ve},ze};function Q0(U){return U.x}function hd(U){return U.y}function z1(U,K,ne){U.y0=K,U.y=ne}var Mp=t.map({"inside-out":function(U){var K=U.length,ne,ve,ge=U.map(kp),pe=U.map(eg),ze=t.range(K).sort(function(xt,st){return ge[xt]-ge[st]}),Le=0,Ue=0,nt=[],tt=[];for(ne=0;ne<K;++ne)ve=ze[ne],Le<Ue?(Le+=pe[ve],nt.push(ve)):(Ue+=pe[ve],tt.push(ve));return tt.reverse().concat(nt)},reverse:function(U){return t.range(U.length).reverse()},default:pf}),Nl=t.map({silhouette:function(U){var K=U.length,ne=U[0].length,ve=[],ge=0,pe,ze,Le,Ue=[];for(ze=0;ze<ne;++ze){for(pe=0,Le=0;pe<K;pe++)Le+=U[pe][ze][1];Le>ge&&(ge=Le),ve.push(Le)}for(ze=0;ze<ne;++ze)Ue[ze]=(ge-ve[ze])/2;return Ue},wiggle:function(U){var K=U.length,ne=U[0],ve=ne.length,ge,pe,ze,Le,Ue,nt,tt,xt,st,Vt=[];for(Vt[0]=xt=st=0,pe=1;pe<ve;++pe){for(ge=0,Le=0;ge<K;++ge)Le+=U[ge][pe][1];for(ge=0,Ue=0,tt=ne[pe][0]-ne[pe-1][0];ge<K;++ge){for(ze=0,nt=(U[ge][pe][1]-U[ge][pe-1][1])/(2*tt);ze<ge;++ze)nt+=(U[ze][pe][1]-U[ze][pe-1][1])/tt;Ue+=nt*U[ge][pe][1]}Vt[pe]=xt-=Le?Ue/Le*tt:0,xt<st&&(st=xt)}for(pe=0;pe<ve;++pe)Vt[pe]-=st;return Vt},expand:function(U){var K=U.length,ne=U[0].length,ve=1/K,ge,pe,ze,Le=[];for(pe=0;pe<ne;++pe){for(ge=0,ze=0;ge<K;ge++)ze+=U[ge][pe][1];if(ze)for(ge=0;ge<K;ge++)U[ge][pe][1]/=ze;else for(ge=0;ge<K;ge++)U[ge][pe][1]=ve}for(pe=0;pe<ne;++pe)Le[pe]=0;return Le},zero:pv});function pf(U){return t.range(U.length)}function pv(U){for(var K=-1,ne=U[0].length,ve=[];++K<ne;)ve[K]=0;return ve}function kp(U){for(var K=1,ne=0,ve=U[0][1],ge,pe=U.length;K<pe;++K)(ge=U[K][1])>ve&&(ne=K,ve=ge);return ne}function eg(U){return U.reduce(tg,0)}function tg(U,K){return U+K[1]}t.layout.histogram=function(){var U=!0,K=Number,ne=co,ve=Nm;function ge(pe,ze){for(var Le=[],Ue=pe.map(K,this),nt=ne.call(this,Ue,ze),tt=ve.call(this,nt,Ue,ze),xt,ze=-1,st=Ue.length,Vt=tt.length-1,lr=U?1:1/st,kt;++ze<Vt;)xt=Le[ze]=[],xt.dx=tt[ze+1]-(xt.x=tt[ze]),xt.y=0;if(Vt>0)for(ze=-1;++ze<st;)kt=Ue[ze],kt>=nt[0]&&kt<=nt[1]&&(xt=Le[t.bisect(tt,kt,1,Vt)-1],xt.y+=lr,xt.push(pe[ze]));return Le}return ge.value=function(pe){return arguments.length?(K=pe,ge):K},ge.range=function(pe){return arguments.length?(ne=kn(pe),ge):ne},ge.bins=function(pe){return arguments.length?(ve=typeof pe=="number"?function(ze){return rg(ze,pe)}:kn(pe),ge):ve},ge.frequency=function(pe){return arguments.length?(U=!!pe,ge):U},ge};function Nm(U,K){return rg(U,Math.ceil(Math.log(K.length)/Math.LN2+1))}function rg(U,K){for(var ne=-1,ve=+U[0],ge=(U[1]-ve)/K,pe=[];++ne<=K;)pe[ne]=ge*ne+ve;return pe}function co(U){return[t.min(U),t.max(U)]}t.layout.pack=function(){var U=t.layout.hierarchy().sort(gv),K=0,ne=[1,1],ve;function ge(pe,ze){var Le=U.call(this,pe,ze),Ue=Le[0],nt=ne[0],tt=ne[1],xt=ve==null?Math.sqrt:typeof ve=="function"?ve:function(){return ve};if(Ue.x=Ue.y=0,Kl(Ue,function(Vt){Vt.r=+xt(Vt.value)}),Kl(Ue,Yf),K){var st=K*(ve?1:Math.max(2*Ue.r/nt,2*Ue.r/tt))/2;Kl(Ue,function(Vt){Vt.r+=st}),Kl(Ue,Yf),Kl(Ue,function(Vt){Vt.r-=st})}return Uu(Ue,nt/2,tt/2,ve?1:1/Math.max(2*Ue.r/nt,2*Ue.r/tt)),Le}return ge.size=function(pe){return arguments.length?(ne=pe,ge):ne},ge.radius=function(pe){return arguments.length?(ve=pe==null||typeof pe=="function"?pe:+pe,ge):ve},ge.padding=function(pe){return arguments.length?(K=+pe,ge):K},Lc(ge,U)};function gv(U,K){return U.value-K.value}function $o(U,K){var ne=U._pack_next;U._pack_next=K,K._pack_prev=U,K._pack_next=ne,ne._pack_prev=K}function Pc(U,K){U._pack_next=K,K._pack_prev=U}function Ic(U,K){var ne=K.x-U.x,ve=K.y-U.y,ge=U.r+K.r;return .999*ge*ge>ne*ne+ve*ve}function Yf(U){if(!(K=U.children)||!(st=K.length))return;var K,ne=1/0,ve=-1/0,ge=1/0,pe=-1/0,ze,Le,Ue,nt,tt,xt,st;function Vt(Gt){ne=Math.min(Gt.x-Gt.r,ne),ve=Math.max(Gt.x+Gt.r,ve),ge=Math.min(Gt.y-Gt.r,ge),pe=Math.max(Gt.y+Gt.r,pe)}if(K.forEach(Ls),ze=K[0],ze.x=-ze.r,ze.y=0,Vt(ze),st>1&&(Le=K[1],Le.x=Le.r,Le.y=0,Vt(Le),st>2))for(Ue=K[2],Wf(ze,Le,Ue),Vt(Ue),$o(ze,Ue),ze._pack_prev=Ue,$o(Ue,Le),Le=ze._pack_next,nt=3;nt<st;nt++){Wf(ze,Le,Ue=K[nt]);var lr=0,kt=1,$t=1;for(tt=Le._pack_next;tt!==Le;tt=tt._pack_next,kt++)if(Ic(tt,Ue)){lr=1;break}if(lr==1)for(xt=ze._pack_prev;xt!==tt._pack_prev&&!Ic(xt,Ue);xt=xt._pack_prev,$t++);lr?(kt<$t||kt==$t&&Le.r<ze.r?Pc(ze,Le=tt):Pc(ze=xt,Le),nt--):($o(ze,Ue),Le=Ue,Vt(Ue))}var Ht=(ne+ve)/2,ar=(ge+pe)/2,nr=0;for(nt=0;nt<st;nt++)Ue=K[nt],Ue.x-=Ht,Ue.y-=ar,nr=Math.max(nr,Ue.r+Math.sqrt(Ue.x*Ue.x+Ue.y*Ue.y));U.r=nr,K.forEach(Ep)}function Ls(U){U._pack_next=U._pack_prev=U}function Ep(U){delete U._pack_next,delete U._pack_prev}function Uu(U,K,ne,ve){var ge=U.children;if(U.x=K+=ve*U.x,U.y=ne+=ve*U.y,U.r*=ve,ge)for(var pe=-1,ze=ge.length;++pe<ze;)Uu(ge[pe],K,ne,ve)}function Wf(U,K,ne){var ve=U.r+ne.r,ge=K.x-U.x,pe=K.y-U.y;if(ve&&(ge||pe)){var ze=K.r+ne.r,Le=ge*ge+pe*pe;ze*=ze,ve*=ve;var Ue=.5+(ve-ze)/(2*Le),nt=Math.sqrt(Math.max(0,2*ze*(ve+Le)-(ve-=Le)*ve-ze*ze))/(2*Le);ne.x=U.x+Ue*ge+nt*pe,ne.y=U.y+Ue*pe-nt*ge}else ne.x=U.x+ve,ne.y=U.y}t.layout.tree=function(){var U=t.layout.hierarchy().sort(null).value(null),K=Dc,ne=[1,1],ve=null;function ge(tt,xt){var st=U.call(this,tt,xt),Vt=st[0],lr=pe(Vt);if(Kl(lr,ze),lr.parent.m=-lr.z,cd(lr,Le),ve)cd(Vt,nt);else{var kt=Vt,$t=Vt,Ht=Vt;cd(Vt,function(Yr){Yr.x<kt.x&&(kt=Yr),Yr.x>$t.x&&($t=Yr),Yr.depth>Ht.depth&&(Ht=Yr)});var ar=K(kt,$t)/2-kt.x,nr=ne[0]/($t.x+K($t,kt)/2+ar),Gt=ne[1]/(Ht.depth||1);cd(Vt,function(Yr){Yr.x=(Yr.x+ar)*nr,Yr.y=Yr.depth*Gt})}return st}function pe(tt){for(var xt={A:null,children:[tt]},st=[xt],Vt;(Vt=st.pop())!=null;)for(var lr=Vt.children,kt,$t=0,Ht=lr.length;$t<Ht;++$t)st.push((lr[$t]=kt={_:lr[$t],parent:Vt,children:(kt=lr[$t].children)&&kt.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:$t}).a=kt);return xt.children[0]}function ze(tt){var xt=tt.children,st=tt.parent.children,Vt=tt.i?st[tt.i-1]:null;if(xt.length){zc(tt);var lr=(xt[0].z+xt[xt.length-1].z)/2;Vt?(tt.z=Vt.z+K(tt._,Vt._),tt.m=tt.z-lr):tt.z=lr}else Vt&&(tt.z=Vt.z+K(tt._,Vt._));tt.parent.A=Ue(tt,Vt,tt.parent.A||st[0])}function Le(tt){tt._.x=tt.z+tt.parent.m,tt.m+=tt.parent.m}function Ue(tt,xt,st){if(xt){for(var Vt=tt,lr=tt,kt=xt,$t=Vt.parent.children[0],Ht=Vt.m,ar=lr.m,nr=kt.m,Gt=$t.m,Yr;kt=bu(kt),Vt=Xf(Vt),kt&&Vt;)$t=Xf($t),lr=bu(lr),lr.a=tt,Yr=kt.z+nr-Vt.z-Ht+K(kt._,Vt._),Yr>0&&(Rc(gf(kt,tt,st),tt,Yr),Ht+=Yr,ar+=Yr),nr+=kt.m,Ht+=Vt.m,Gt+=$t.m,ar+=lr.m;kt&&!bu(lr)&&(lr.t=kt,lr.m+=nr-ar),Vt&&!Xf($t)&&($t.t=Vt,$t.m+=Ht-Gt,st=tt)}return st}function nt(tt){tt.x*=ne[0],tt.y=tt.depth*ne[1]}return ge.separation=function(tt){return arguments.length?(K=tt,ge):K},ge.size=function(tt){return arguments.length?(ve=(ne=tt)==null?nt:null,ge):ve?null:ne},ge.nodeSize=function(tt){return arguments.length?(ve=(ne=tt)==null?null:nt,ge):ve?ne:null},Lc(ge,U)};function Dc(U,K){return U.parent==K.parent?1:2}function Xf(U){var K=U.children;return K.length?K[0]:U.t}function bu(U){var K=U.children,ne;return(ne=K.length)?K[ne-1]:U.t}function Rc(U,K,ne){var ve=ne/(K.i-U.i);K.c-=ve,K.s+=ne,U.c+=ve,K.z+=ne,K.m+=ne}function zc(U){for(var K=0,ne=0,ve=U.children,ge=ve.length,pe;--ge>=0;)pe=ve[ge],pe.z+=K,pe.m+=K,K+=pe.s+(ne+=pe.c)}function gf(U,K,ne){return U.a.parent===K.parent?U.a:ne}t.layout.cluster=function(){var U=t.layout.hierarchy().sort(null).value(null),K=Dc,ne=[1,1],ve=!1;function ge(pe,ze){var Le=U.call(this,pe,ze),Ue=Le[0],nt,tt=0;Kl(Ue,function(kt){var $t=kt.children;$t&&$t.length?(kt.x=F1($t),kt.y=ag($t)):(kt.x=nt?tt+=K(kt,nt):0,kt.y=0,nt=kt)});var xt=vd(Ue),st=Bm(Ue),Vt=xt.x-K(xt,st)/2,lr=st.x+K(st,xt)/2;return Kl(Ue,ve?function(kt){kt.x=(kt.x-Ue.x)*ne[0],kt.y=(Ue.y-kt.y)*ne[1]}:function(kt){kt.x=(kt.x-Vt)/(lr-Vt)*ne[0],kt.y=(1-(Ue.y?kt.y/Ue.y:1))*ne[1]}),Le}return ge.separation=function(pe){return arguments.length?(K=pe,ge):K},ge.size=function(pe){return arguments.length?(ve=(ne=pe)==null,ge):ve?null:ne},ge.nodeSize=function(pe){return arguments.length?(ve=(ne=pe)!=null,ge):ve?ne:null},Lc(ge,U)};function ag(U){return 1+t.max(U,function(K){return K.y})}function F1(U){return U.reduce(function(K,ne){return K+ne.x},0)/U.length}function vd(U){var K=U.children;return K&&K.length?vd(K[0]):U}function Bm(U){var K=U.children,ne;return K&&(ne=K.length)?Bm(K[ne-1]):U}t.layout.treemap=function(){var U=t.layout.hierarchy(),K=Math.round,ne=[1,1],ve=null,ge=mf,pe=!1,ze,Le="squarify",Ue=.5*(1+Math.sqrt(5));function nt(kt,$t){for(var Ht=-1,ar=kt.length,nr,Gt;++Ht<ar;)Gt=(nr=kt[Ht]).value*($t<0?0:$t),nr.area=isNaN(Gt)||Gt<=0?0:Gt}function tt(kt){var $t=kt.children;if($t&&$t.length){var Ht=ge(kt),ar=[],nr=$t.slice(),Gt,Yr=1/0,ya,va=Le==="slice"?Ht.dx:Le==="dice"?Ht.dy:Le==="slice-dice"?kt.depth&1?Ht.dy:Ht.dx:Math.min(Ht.dx,Ht.dy),ba;for(nt(nr,Ht.dx*Ht.dy/kt.value),ar.area=0;(ba=nr.length)>0;)ar.push(Gt=nr[ba-1]),ar.area+=Gt.area,Le!=="squarify"||(ya=st(ar,va))<=Yr?(nr.pop(),Yr=ya):(ar.area-=ar.pop().area,Vt(ar,va,Ht,!1),va=Math.min(Ht.dx,Ht.dy),ar.length=ar.area=0,Yr=1/0);ar.length&&(Vt(ar,va,Ht,!0),ar.length=ar.area=0),$t.forEach(tt)}}function xt(kt){var $t=kt.children;if($t&&$t.length){var Ht=ge(kt),ar=$t.slice(),nr,Gt=[];for(nt(ar,Ht.dx*Ht.dy/kt.value),Gt.area=0;nr=ar.pop();)Gt.push(nr),Gt.area+=nr.area,nr.z!=null&&(Vt(Gt,nr.z?Ht.dx:Ht.dy,Ht,!ar.length),Gt.length=Gt.area=0);$t.forEach(xt)}}function st(kt,$t){for(var Ht=kt.area,ar,nr=0,Gt=1/0,Yr=-1,ya=kt.length;++Yr<ya;)!(ar=kt[Yr].area)||(ar<Gt&&(Gt=ar),ar>nr&&(nr=ar));return Ht*=Ht,$t*=$t,Ht?Math.max($t*nr*Ue/Ht,Ht/($t*Gt*Ue)):1/0}function Vt(kt,$t,Ht,ar){var nr=-1,Gt=kt.length,Yr=Ht.x,ya=Ht.y,va=$t?K(kt.area/$t):0,ba;if($t==Ht.dx){for((ar||va>Ht.dy)&&(va=Ht.dy);++nr<Gt;)ba=kt[nr],ba.x=Yr,ba.y=ya,ba.dy=va,Yr+=ba.dx=Math.min(Ht.x+Ht.dx-Yr,va?K(ba.area/va):0);ba.z=!0,ba.dx+=Ht.x+Ht.dx-Yr,Ht.y+=va,Ht.dy-=va}else{for((ar||va>Ht.dx)&&(va=Ht.dx);++nr<Gt;)ba=kt[nr],ba.x=Yr,ba.y=ya,ba.dx=va,ya+=ba.dy=Math.min(Ht.y+Ht.dy-ya,va?K(ba.area/va):0);ba.z=!1,ba.dy+=Ht.y+Ht.dy-ya,Ht.x+=va,Ht.dx-=va}}function lr(kt){var $t=ze||U(kt),Ht=$t[0];return Ht.x=Ht.y=0,Ht.value?(Ht.dx=ne[0],Ht.dy=ne[1]):Ht.dx=Ht.dy=0,ze&&U.revalue(Ht),nt([Ht],Ht.dx*Ht.dy/Ht.value),(ze?xt:tt)(Ht),pe&&(ze=$t),$t}return lr.size=function(kt){return arguments.length?(ne=kt,lr):ne},lr.padding=function(kt){if(!arguments.length)return ve;function $t(nr){var Gt=kt.call(lr,nr,nr.depth);return Gt==null?mf(nr):dd(nr,typeof Gt=="number"?[Gt,Gt,Gt,Gt]:Gt)}function Ht(nr){return dd(nr,kt)}var ar;return ge=(ve=kt)==null?mf:(ar=typeof kt)==="function"?$t:(ar==="number"&&(kt=[kt,kt,kt,kt]),Ht),lr},lr.round=function(kt){return arguments.length?(K=kt?Math.round:Number,lr):K!=Number},lr.sticky=function(kt){return arguments.length?(pe=kt,ze=null,lr):pe},lr.ratio=function(kt){return arguments.length?(Ue=kt,lr):Ue},lr.mode=function(kt){return arguments.length?(Le=kt+"",lr):Le},Lc(lr,U)};function mf(U){return{x:U.x,y:U.y,dx:U.dx,dy:U.dy}}function dd(U,K){var ne=U.x+K[3],ve=U.y+K[0],ge=U.dx-K[1]-K[3],pe=U.dy-K[0]-K[2];return ge<0&&(ne+=ge/2,ge=0),pe<0&&(ve+=pe/2,pe=0),{x:ne,y:ve,dx:ge,dy:pe}}t.random={normal:function(U,K){var ne=arguments.length;return ne<2&&(K=1),ne<1&&(U=0),function(){var ve,ge,pe;do ve=Math.random()*2-1,ge=Math.random()*2-1,pe=ve*ve+ge*ge;while(!pe||pe>1);return U+K*ve*Math.sqrt(-2*Math.log(pe)/pe)}},logNormal:function(){var U=t.random.normal.apply(t,arguments);return function(){return Math.exp(U())}},bates:function(U){var K=t.random.irwinHall(U);return function(){return K()/U}},irwinHall:function(U){return function(){for(var K=0,ne=0;ne<U;ne++)K+=Math.random();return K}}},t.scale={};function pd(U){var K=U[0],ne=U[U.length-1];return K<ne?[K,ne]:[ne,K]}function mv(U){return U.rangeExtent?U.rangeExtent():pd(U.range())}function $m(U,K,ne,ve){var ge=ne(U[0],U[1]),pe=ve(K[0],K[1]);return function(ze){return pe(ge(ze))}}function gd(U,K){var ne=0,ve=U.length-1,ge=U[ne],pe=U[ve],ze;return pe<ge&&(ze=ne,ne=ve,ve=ze,ze=ge,ge=pe,pe=ze),U[ne]=K.floor(ge),U[ve]=K.ceil(pe),U}function ng(U){return U?{floor:function(K){return Math.floor(K/U)*U},ceil:function(K){return Math.ceil(K/U)*U}}:ig}var ig={floor:D,ceil:D};function Um(U,K,ne,ve){var ge=[],pe=[],ze=0,Le=Math.min(U.length,K.length)-1;for(U[Le]<U[0]&&(U=U.slice().reverse(),K=K.slice().reverse());++ze<=Le;)ge.push(ne(U[ze-1],U[ze])),pe.push(ve(K[ze-1],K[ze]));return function(Ue){var nt=t.bisect(U,Ue,1,Le)-1;return pe[nt](ge[nt](Ue))}}t.scale.linear=function(){return Fc([0,1],[0,1],fo,!1)};function Fc(U,K,ne,ve){var ge,pe;function ze(){var Ue=Math.min(U.length,K.length)>2?Um:$m,nt=ve?R1:Dm;return ge=Ue(U,K,nt,ne),pe=Ue(K,U,nt,fo),Le}function Le(Ue){return ge(Ue)}return Le.invert=function(Ue){return pe(Ue)},Le.domain=function(Ue){return arguments.length?(U=Ue.map(Number),ze()):U},Le.range=function(Ue){return arguments.length?(K=Ue,ze()):K},Le.rangeRound=function(Ue){return Le.range(Ue).interpolate(Y0)},Le.clamp=function(Ue){return arguments.length?(ve=Ue,ze()):ve},Le.interpolate=function(Ue){return arguments.length?(ne=Ue,ze()):ne},Le.ticks=function(Ue){return sg(U,Ue)},Le.tickFormat=function(Ue,nt){return d3_scale_linearTickFormat(U,Ue,nt)},Le.nice=function(Ue){return _u(U,Ue),ze()},Le.copy=function(){return Fc(U,K,ne,ve)},ze()}function og(U,K){return t.rebind(U,K,"range","rangeRound","interpolate","clamp")}function _u(U,K){return gd(U,ng(Cp(U,K)[2])),gd(U,ng(Cp(U,K)[2])),U}function Cp(U,K){K==null&&(K=10);var ne=pd(U),ve=ne[1]-ne[0],ge=Math.pow(10,Math.floor(Math.log(ve/K)/Math.LN10)),pe=K/ve*ge;return pe<=.15?ge*=10:pe<=.35?ge*=5:pe<=.75&&(ge*=2),ne[0]=Math.ceil(ne[0]/ge)*ge,ne[1]=Math.floor(ne[1]/ge)*ge+ge*.5,ne[2]=ge,ne}function sg(U,K){return t.range.apply(t,Cp(U,K))}t.scale.log=function(){return yf(t.scale.linear().domain([0,1]),10,!0,[1,10])};function yf(U,K,ne,ve){function ge(Le){return(ne?Math.log(Le<0?0:Le):-Math.log(Le>0?0:-Le))/Math.log(K)}function pe(Le){return ne?Math.pow(K,Le):-Math.pow(K,-Le)}function ze(Le){return U(ge(Le))}return ze.invert=function(Le){return pe(U.invert(Le))},ze.domain=function(Le){return arguments.length?(ne=Le[0]>=0,U.domain((ve=Le.map(Number)).map(ge)),ze):ve},ze.base=function(Le){return arguments.length?(K=+Le,U.domain(ve.map(ge)),ze):K},ze.nice=function(){var Le=gd(ve.map(ge),ne?Math:lg);return U.domain(Le),ve=Le.map(pe),ze},ze.ticks=function(){var Le=pd(ve),Ue=[],nt=Le[0],tt=Le[1],xt=Math.floor(ge(nt)),st=Math.ceil(ge(tt)),Vt=K%1?2:K;if(isFinite(st-xt)){if(ne){for(;xt<st;xt++)for(var lr=1;lr<Vt;lr++)Ue.push(pe(xt)*lr);Ue.push(pe(xt))}else for(Ue.push(pe(xt));xt++<st;)for(var lr=Vt-1;lr>0;lr--)Ue.push(pe(xt)*lr);for(xt=0;Ue[xt]<nt;xt++);for(st=Ue.length;Ue[st-1]>tt;st--);Ue=Ue.slice(xt,st)}return Ue},ze.copy=function(){return yf(U.copy(),K,ne,ve)},og(ze,U)}var lg={floor:function(U){return-Math.ceil(-U)},ceil:function(U){return-Math.floor(-U)}};t.scale.pow=function(){return Bl(t.scale.linear(),1,[0,1])};function Bl(U,K,ne){var ve=Jl(K),ge=Jl(1/K);function pe(ze){return U(ve(ze))}return pe.invert=function(ze){return ge(U.invert(ze))},pe.domain=function(ze){return arguments.length?(U.domain((ne=ze.map(Number)).map(ve)),pe):ne},pe.ticks=function(ze){return sg(ne,ze)},pe.tickFormat=function(ze,Le){return d3_scale_linearTickFormat(ne,ze,Le)},pe.nice=function(ze){return pe.domain(_u(ne,ze))},pe.exponent=function(ze){return arguments.length?(ve=Jl(K=ze),ge=Jl(1/K),U.domain(ne.map(ve)),pe):K},pe.copy=function(){return Bl(U.copy(),K,ne)},og(pe,U)}function Jl(U){return function(K){return K<0?-Math.pow(-K,U):Math.pow(K,U)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return Oc([],{t:"range",a:[[]]})};function Oc(U,K){var ne,ve,ge;function pe(Le){return ve[((ne.get(Le)||(K.t==="range"?ne.set(Le,U.push(Le)):NaN))-1)%ve.length]}function ze(Le,Ue){return t.range(U.length).map(function(nt){return Le+Ue*nt})}return pe.domain=function(Le){if(!arguments.length)return U;U=[],ne=new M;for(var Ue=-1,nt=Le.length,tt;++Ue<nt;)ne.has(tt=Le[Ue])||ne.set(tt,U.push(tt));return pe[K.t].apply(pe,K.a)},pe.range=function(Le){return arguments.length?(ve=Le,ge=0,K={t:"range",a:arguments},pe):ve},pe.rangePoints=function(Le,Ue){arguments.length<2&&(Ue=0);var nt=Le[0],tt=Le[1],xt=U.length<2?(nt=(nt+tt)/2,0):(tt-nt)/(U.length-1+Ue);return ve=ze(nt+xt*Ue/2,xt),ge=0,K={t:"rangePoints",a:arguments},pe},pe.rangeRoundPoints=function(Le,Ue){arguments.length<2&&(Ue=0);var nt=Le[0],tt=Le[1],xt=U.length<2?(nt=tt=Math.round((nt+tt)/2),0):(tt-nt)/(U.length-1+Ue)|0;return ve=ze(nt+Math.round(xt*Ue/2+(tt-nt-(U.length-1+Ue)*xt)/2),xt),ge=0,K={t:"rangeRoundPoints",a:arguments},pe},pe.rangeBands=function(Le,Ue,nt){arguments.length<2&&(Ue=0),arguments.length<3&&(nt=Ue);var tt=Le[1]<Le[0],xt=Le[tt-0],st=Le[1-tt],Vt=(st-xt)/(U.length-Ue+2*nt);return ve=ze(xt+Vt*nt,Vt),tt&&ve.reverse(),ge=Vt*(1-Ue),K={t:"rangeBands",a:arguments},pe},pe.rangeRoundBands=function(Le,Ue,nt){arguments.length<2&&(Ue=0),arguments.length<3&&(nt=Ue);var tt=Le[1]<Le[0],xt=Le[tt-0],st=Le[1-tt],Vt=Math.floor((st-xt)/(U.length-Ue+2*nt));return ve=ze(xt+Math.round((st-xt-(U.length-Ue)*Vt)/2),Vt),tt&&ve.reverse(),ge=Math.round(Vt*(1-Ue)),K={t:"rangeRoundBands",a:arguments},pe},pe.rangeBand=function(){return ge},pe.rangeExtent=function(){return pd(K.a[0])},pe.copy=function(){return Oc(U,K)},pe.domain(U)}t.scale.category10=function(){return t.scale.ordinal().range(ug)},t.scale.category20=function(){return t.scale.ordinal().range(fg)},t.scale.category20b=function(){return t.scale.ordinal().range(yv)},t.scale.category20c=function(){return t.scale.ordinal().range(Hm)};var ug=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(La),fg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(La),yv=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(La),Hm=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(La);t.scale.quantile=function(){return Nc([],[])};function Nc(U,K){var ne;function ve(){var pe=0,ze=K.length;for(ne=[];++pe<ze;)ne[pe-1]=t.quantile(U,pe/ze);return ge}function ge(pe){if(!isNaN(pe=+pe))return K[t.bisect(ne,pe)]}return ge.domain=function(pe){return arguments.length?(U=pe.map(v).filter(p).sort(h),ve()):U},ge.range=function(pe){return arguments.length?(K=pe,ve()):K},ge.quantiles=function(){return ne},ge.invertExtent=function(pe){return pe=K.indexOf(pe),pe<0?[NaN,NaN]:[pe>0?ne[pe-1]:U[0],pe<ne.length?ne[pe]:U[U.length-1]]},ge.copy=function(){return Nc(U,K)},ve()}t.scale.quantize=function(){return Lp(0,1,[0,1])};function Lp(U,K,ne){var ve,ge;function pe(Le){return ne[Math.max(0,Math.min(ge,Math.floor(ve*(Le-U))))]}function ze(){return ve=ne.length/(K-U),ge=ne.length-1,pe}return pe.domain=function(Le){return arguments.length?(U=+Le[0],K=+Le[Le.length-1],ze()):[U,K]},pe.range=function(Le){return arguments.length?(ne=Le,ze()):ne},pe.invertExtent=function(Le){return Le=ne.indexOf(Le),Le=Le<0?NaN:Le/ve+U,[Le,Le+1/ve]},pe.copy=function(){return Lp(U,K,ne)},ze()}t.scale.threshold=function(){return Bc([.5],[0,1])};function Bc(U,K){function ne(ve){if(ve<=ve)return K[t.bisect(U,ve)]}return ne.domain=function(ve){return arguments.length?(U=ve,ne):U},ne.range=function(ve){return arguments.length?(K=ve,ne):K},ne.invertExtent=function(ve){return ve=K.indexOf(ve),[U[ve-1],U[ve]]},ne.copy=function(){return Bc(U,K)},ne}t.scale.identity=function(){return $c([0,1])};function $c(U){function K(ne){return+ne}return K.invert=K,K.domain=K.range=function(ne){return arguments.length?(U=ne.map(K),K):U},K.ticks=function(ne){return sg(U,ne)},K.tickFormat=function(ne,ve){return d3_scale_linearTickFormat(U,ne,ve)},K.copy=function(){return $c(U)},K}t.svg={};function Gm(){return 0}t.svg.arc=function(){var U=Zi,K=md,ne=Gm,ve=xv,ge=cg,pe=hg,ze=yd;function Le(){var nt=Math.max(0,+U.apply(this,arguments)),tt=Math.max(0,+K.apply(this,arguments)),xt=ge.apply(this,arguments)-pt,st=pe.apply(this,arguments)-pt,Vt=Math.abs(st-xt),lr=xt>st?0:1;if(tt<nt&&(kt=tt,tt=nt,nt=kt),Vt>=ft)return Ue(tt,lr)+(nt?Ue(nt,1-lr):"")+"Z";var kt,$t,Ht,ar,nr=0,Gt=0,Yr,ya,va,ba,Ma,Ba,Ya,Ta,un=[];if((ar=(+ze.apply(this,arguments)||0)/2)&&(Ht=ve===xv?Math.sqrt(nt*nt+tt*tt):+ve.apply(this,arguments),lr||(Gt*=-1),tt&&(Gt=fr(Ht/tt*Math.sin(ar))),nt&&(nr=fr(Ht/nt*Math.sin(ar)))),tt){Yr=tt*Math.cos(xt+Gt),ya=tt*Math.sin(xt+Gt),va=tt*Math.cos(st-Gt),ba=tt*Math.sin(st-Gt);var ai=Math.abs(st-xt-2*Gt)<=Oe?0:1;if(Gt&&bv(Yr,ya,va,ba)===lr^ai){var ho=(xt+st)/2;Yr=tt*Math.cos(ho),ya=tt*Math.sin(ho),va=ba=null}}else Yr=ya=0;if(nt){Ma=nt*Math.cos(st-nr),Ba=nt*Math.sin(st-nr),Ya=nt*Math.cos(xt+nr),Ta=nt*Math.sin(xt+nr);var Jn=Math.abs(xt-st+2*nr)<=Oe?0:1;if(nr&&bv(Ma,Ba,Ya,Ta)===1-lr^Jn){var pa=(xt+st)/2;Ma=nt*Math.cos(pa),Ba=nt*Math.sin(pa),Ya=Ta=null}}else Ma=Ba=0;if(Vt>Sr&&(kt=Math.min(Math.abs(tt-nt)/2,+ne.apply(this,arguments)))>.001){$t=nt<tt^lr?0:1;var Sn=kt,Dn=kt;if(Vt<Oe){var Ln=Ya==null?[Ma,Ba]:va==null?[Yr,ya]:N0([Yr,ya],[Ya,Ta],[va,ba],[Ma,Ba]),To=Yr-Ln[0],Nn=ya-Ln[1],Ho=va-Ln[0],vo=ba-Ln[1],Go=1/Math.sin(Math.acos((To*Ho+Nn*vo)/(Math.sqrt(To*To+Nn*Nn)*Math.sqrt(Ho*Ho+vo*vo)))/2),Ps=Math.sqrt(Ln[0]*Ln[0]+Ln[1]*Ln[1]);Dn=Math.min(kt,(nt-Ps)/(Go-1)),Sn=Math.min(kt,(tt-Ps)/(Go+1))}if(va!=null){var Hs=Uc(Ya==null?[Ma,Ba]:[Ya,Ta],[Yr,ya],tt,Sn,lr),ss=Uc([va,ba],[Ma,Ba],tt,Sn,lr);kt===Sn?un.push("M",Hs[0],"A",Sn,",",Sn," 0 0,",$t," ",Hs[1],"A",tt,",",tt," 0 ",1-lr^bv(Hs[1][0],Hs[1][1],ss[1][0],ss[1][1]),",",lr," ",ss[1],"A",Sn,",",Sn," 0 0,",$t," ",ss[0]):un.push("M",Hs[0],"A",Sn,",",Sn," 0 1,",$t," ",ss[0])}else un.push("M",Yr,",",ya);if(Ya!=null){var no=Uc([Yr,ya],[Ya,Ta],nt,-Dn,lr),Ao=Uc([Ma,Ba],va==null?[Yr,ya]:[va,ba],nt,-Dn,lr);kt===Dn?un.push("L",Ao[0],"A",Dn,",",Dn," 0 0,",$t," ",Ao[1],"A",nt,",",nt," 0 ",lr^bv(Ao[1][0],Ao[1][1],no[1][0],no[1][1]),",",1-lr," ",no[1],"A",Dn,",",Dn," 0 0,",$t," ",no[0]):un.push("L",Ao[0],"A",Dn,",",Dn," 0 0,",$t," ",no[0])}else un.push("L",Ma,",",Ba)}else un.push("M",Yr,",",ya),va!=null&&un.push("A",tt,",",tt," 0 ",ai,",",lr," ",va,",",ba),un.push("L",Ma,",",Ba),Ya!=null&&un.push("A",nt,",",nt," 0 ",Jn,",",1-lr," ",Ya,",",Ta);return un.push("Z"),un.join("")}function Ue(nt,tt){return"M0,"+nt+"A"+nt+","+nt+" 0 1,"+tt+" 0,"+-nt+"A"+nt+","+nt+" 0 1,"+tt+" 0,"+nt}return Le.innerRadius=function(nt){return arguments.length?(U=kn(nt),Le):U},Le.outerRadius=function(nt){return arguments.length?(K=kn(nt),Le):K},Le.cornerRadius=function(nt){return arguments.length?(ne=kn(nt),Le):ne},Le.padRadius=function(nt){return arguments.length?(ve=nt==xv?xv:kn(nt),Le):ve},Le.startAngle=function(nt){return arguments.length?(ge=kn(nt),Le):ge},Le.endAngle=function(nt){return arguments.length?(pe=kn(nt),Le):pe},Le.padAngle=function(nt){return arguments.length?(ze=kn(nt),Le):ze},Le.centroid=function(){var nt=(+U.apply(this,arguments)+ +K.apply(this,arguments))/2,tt=(+ge.apply(this,arguments)+ +pe.apply(this,arguments))/2-pt;return[Math.cos(tt)*nt,Math.sin(tt)*nt]},Le};var xv="auto";function Zi(U){return U.innerRadius}function md(U){return U.outerRadius}function cg(U){return U.startAngle}function hg(U){return U.endAngle}function yd(U){return U&&U.padAngle}function bv(U,K,ne,ve){return(U-ne)*K-(K-ve)*U>0?0:1}function Uc(U,K,ne,ve,ge){var pe=U[0]-K[0],ze=U[1]-K[1],Le=(ge?ve:-ve)/Math.sqrt(pe*pe+ze*ze),Ue=Le*ze,nt=-Le*pe,tt=U[0]+Ue,xt=U[1]+nt,st=K[0]+Ue,Vt=K[1]+nt,lr=(tt+st)/2,kt=(xt+Vt)/2,$t=st-tt,Ht=Vt-xt,ar=$t*$t+Ht*Ht,nr=ne-ve,Gt=tt*Vt-st*xt,Yr=(Ht<0?-1:1)*Math.sqrt(Math.max(0,nr*nr*ar-Gt*Gt)),ya=(Gt*Ht-$t*Yr)/ar,va=(-Gt*$t-Ht*Yr)/ar,ba=(Gt*Ht+$t*Yr)/ar,Ma=(-Gt*$t+Ht*Yr)/ar,Ba=ya-lr,Ya=va-kt,Ta=ba-lr,un=Ma-kt;return Ba*Ba+Ya*Ya>Ta*Ta+un*un&&(ya=ba,va=Ma),[[ya-Ue,va-nt],[ya*ne/nr,va*ne/nr]]}function Pp(){return!0}function Vm(U){var K=uv,ne=bc,ve=Pp,ge=bl,pe=ge.key,ze=.7;function Le(Ue){var nt=[],tt=[],xt=-1,st=Ue.length,Vt,lr=kn(K),kt=kn(ne);function $t(){nt.push("M",ge(U(tt),ze))}for(;++xt<st;)ve.call(this,Vt=Ue[xt],xt)?tt.push([+lr.call(this,Vt,xt),+kt.call(this,Vt,xt)]):tt.length&&($t(),tt=[]);return tt.length&&$t(),nt.length?nt.join(""):null}return Le.x=function(Ue){return arguments.length?(K=Ue,Le):K},Le.y=function(Ue){return arguments.length?(ne=Ue,Le):ne},Le.defined=function(Ue){return arguments.length?(ve=Ue,Le):ve},Le.interpolate=function(Ue){return arguments.length?(typeof Ue=="function"?pe=ge=Ue:pe=(ge=vg.get(Ue)||bl).key,Le):pe},Le.tension=function(Ue){return arguments.length?(ze=Ue,Le):ze},Le}t.svg.line=function(){return Vm(D)};var vg=t.map({linear:bl,"linear-closed":xd,step:bd,"step-before":Hc,"step-after":wu,basis:jm,"basis-open":Au,"basis-closed":wd,bundle:Ip,cardinal:O1,"cardinal-open":dg,"cardinal-closed":_d,monotone:wv});vg.forEach(function(U,K){K.key=U,K.closed=/-closed$/.test(U)});function bl(U){return U.length>1?U.join("L"):U+"Z"}function xd(U){return U.join("L")+"Z"}function bd(U){for(var K=0,ne=U.length,ve=U[0],ge=[ve[0],",",ve[1]];++K<ne;)ge.push("H",(ve[0]+(ve=U[K])[0])/2,"V",ve[1]);return ne>1&&ge.push("H",ve[0]),ge.join("")}function Hc(U){for(var K=0,ne=U.length,ve=U[0],ge=[ve[0],",",ve[1]];++K<ne;)ge.push("V",(ve=U[K])[1],"H",ve[0]);return ge.join("")}function wu(U){for(var K=0,ne=U.length,ve=U[0],ge=[ve[0],",",ve[1]];++K<ne;)ge.push("H",(ve=U[K])[0],"V",ve[1]);return ge.join("")}function dg(U,K){return U.length<4?bl(U):U[1]+Tu(U.slice(1,-1),pg(U,K))}function _d(U,K){return U.length<3?xd(U):U[0]+Tu((U.push(U[0]),U),pg([U[U.length-2]].concat(U,[U[1]]),K))}function O1(U,K){return U.length<3?bl(U):U[0]+Tu(U,pg(U,K))}function Tu(U,K){if(K.length<1||U.length!=K.length&&U.length!=K.length+2)return bl(U);var ne=U.length!=K.length,ve="",ge=U[0],pe=U[1],ze=K[0],Le=ze,Ue=1;if(ne&&(ve+="Q"+(pe[0]-ze[0]*2/3)+","+(pe[1]-ze[1]*2/3)+","+pe[0]+","+pe[1],ge=U[1],Ue=2),K.length>1){Le=K[1],pe=U[Ue],Ue++,ve+="C"+(ge[0]+ze[0])+","+(ge[1]+ze[1])+","+(pe[0]-Le[0])+","+(pe[1]-Le[1])+","+pe[0]+","+pe[1];for(var nt=2;nt<K.length;nt++,Ue++)pe=U[Ue],Le=K[nt],ve+="S"+(pe[0]-Le[0])+","+(pe[1]-Le[1])+","+pe[0]+","+pe[1]}if(ne){var tt=U[Ue];ve+="Q"+(pe[0]+Le[0]*2/3)+","+(pe[1]+Le[1]*2/3)+","+tt[0]+","+tt[1]}return ve}function pg(U,K){for(var ne=[],ve=(1-K)/2,ge,pe=U[0],ze=U[1],Le=1,Ue=U.length;++Le<Ue;)ge=pe,pe=ze,ze=U[Le],ne.push([ve*(ze[0]-ge[0]),ve*(ze[1]-ge[1])]);return ne}function jm(U){if(U.length<3)return bl(U);var K=1,ne=U.length,ve=U[0],ge=ve[0],pe=ve[1],ze=[ge,ge,ge,(ve=U[1])[0]],Le=[pe,pe,pe,ve[1]],Ue=[ge,",",pe,"L",ol(Gc,ze),",",ol(Gc,Le)];for(U.push(U[ne-1]);++K<=ne;)ve=U[K],ze.shift(),ze.push(ve[0]),Le.shift(),Le.push(ve[1]),_v(Ue,ze,Le);return U.pop(),Ue.push("L",ve),Ue.join("")}function Au(U){if(U.length<4)return bl(U);for(var K=[],ne=-1,ve=U.length,ge,pe=[0],ze=[0];++ne<3;)ge=U[ne],pe.push(ge[0]),ze.push(ge[1]);for(K.push(ol(Gc,pe)+","+ol(Gc,ze)),--ne;++ne<ve;)ge=U[ne],pe.shift(),pe.push(ge[0]),ze.shift(),ze.push(ge[1]),_v(K,pe,ze);return K.join("")}function wd(U){for(var K,ne=-1,ve=U.length,ge=ve+4,pe,ze=[],Le=[];++ne<4;)pe=U[ne%ve],ze.push(pe[0]),Le.push(pe[1]);for(K=[ol(Gc,ze),",",ol(Gc,Le)],--ne;++ne<ge;)pe=U[ne%ve],ze.shift(),ze.push(pe[0]),Le.shift(),Le.push(pe[1]),_v(K,ze,Le);return K.join("")}function Ip(U,K){var ne=U.length-1;if(ne)for(var ve=U[0][0],ge=U[0][1],pe=U[ne][0]-ve,ze=U[ne][1]-ge,Le=-1,Ue,nt;++Le<=ne;)Ue=U[Le],nt=Le/ne,Ue[0]=K*Ue[0]+(1-K)*(ve+nt*pe),Ue[1]=K*Ue[1]+(1-K)*(ge+nt*ze);return jm(U)}function ol(U,K){return U[0]*K[0]+U[1]*K[1]+U[2]*K[2]+U[3]*K[3]}var Dh=[0,2/3,1/3,0],gg=[0,1/3,2/3,0],Gc=[0,1/6,2/3,1/6];function _v(U,K,ne){U.push("C",ol(Dh,K),",",ol(Dh,ne),",",ol(gg,K),",",ol(gg,ne),",",ol(Gc,K),",",ol(Gc,ne))}function Td(U,K){return(K[1]-U[1])/(K[0]-U[0])}function N1(U){for(var K=0,ne=U.length-1,ve=[],ge=U[0],pe=U[1],ze=ve[0]=Td(ge,pe);++K<ne;)ve[K]=(ze+(ze=Td(ge=pe,pe=U[K+1])))/2;return ve[K]=ze,ve}function Dp(U){for(var K=[],ne,ve,ge,pe,ze=N1(U),Le=-1,Ue=U.length-1;++Le<Ue;)ne=Td(U[Le],U[Le+1]),y(ne)<Sr?ze[Le]=ze[Le+1]=0:(ve=ze[Le]/ne,ge=ze[Le+1]/ne,pe=ve*ve+ge*ge,pe>9&&(pe=ne*3/Math.sqrt(pe),ze[Le]=pe*ve,ze[Le+1]=pe*ge));for(Le=-1;++Le<=Ue;)pe=(U[Math.min(Ue,Le+1)][0]-U[Math.max(0,Le-1)][0])/(6*(1+ze[Le]*ze[Le])),K.push([pe||0,ze[Le]*pe||0]);return K}function wv(U){return U.length<3?bl(U):U[0]+Tu(U,Dp(U))}t.svg.line.radial=function(){var U=Vm(mg);return U.radius=U.x,delete U.x,U.angle=U.y,delete U.y,U};function mg(U){for(var K,ne=-1,ve=U.length,ge,pe;++ne<ve;)K=U[ne],ge=K[0],pe=K[1]-pt,K[0]=ge*Math.cos(pe),K[1]=ge*Math.sin(pe);return U}function xf(U){var K=uv,ne=uv,ve=0,ge=bc,pe=Pp,ze=bl,Le=ze.key,Ue=ze,nt="L",tt=.7;function xt(st){var Vt=[],lr=[],kt=[],$t=-1,Ht=st.length,ar,nr=kn(K),Gt=kn(ve),Yr=K===ne?function(){return va}:kn(ne),ya=ve===ge?function(){return ba}:kn(ge),va,ba;function Ma(){Vt.push("M",ze(U(kt),tt),nt,Ue(U(lr.reverse()),tt),"Z")}for(;++$t<Ht;)pe.call(this,ar=st[$t],$t)?(lr.push([va=+nr.call(this,ar,$t),ba=+Gt.call(this,ar,$t)]),kt.push([+Yr.call(this,ar,$t),+ya.call(this,ar,$t)])):lr.length&&(Ma(),lr=[],kt=[]);return lr.length&&Ma(),Vt.length?Vt.join(""):null}return xt.x=function(st){return arguments.length?(K=ne=st,xt):ne},xt.x0=function(st){return arguments.length?(K=st,xt):K},xt.x1=function(st){return arguments.length?(ne=st,xt):ne},xt.y=function(st){return arguments.length?(ve=ge=st,xt):ge},xt.y0=function(st){return arguments.length?(ve=st,xt):ve},xt.y1=function(st){return arguments.length?(ge=st,xt):ge},xt.defined=function(st){return arguments.length?(pe=st,xt):pe},xt.interpolate=function(st){return arguments.length?(typeof st=="function"?Le=ze=st:Le=(ze=vg.get(st)||bl).key,Ue=ze.reverse||ze,nt=ze.closed?"M":"L",xt):Le},xt.tension=function(st){return arguments.length?(tt=st,xt):tt},xt}Hc.reverse=wu,wu.reverse=Hc,t.svg.area=function(){return xf(D)},t.svg.area.radial=function(){var U=xf(mg);return U.radius=U.x,delete U.x,U.innerRadius=U.x0,delete U.x0,U.outerRadius=U.x1,delete U.x1,U.angle=U.y,delete U.y,U.startAngle=U.y0,delete U.y0,U.endAngle=U.y1,delete U.y1,U};function Rp(U){return U.source}function Rh(U){return U.target}t.svg.chord=function(){var U=Rp,K=Rh,ne=zh,ve=cg,ge=hg;function pe(tt,xt){var st=ze(this,U,tt,xt),Vt=ze(this,K,tt,xt);return"M"+st.p0+Ue(st.r,st.p1,st.a1-st.a0)+(Le(st,Vt)?nt(st.r,st.p1,st.r,st.p0):nt(st.r,st.p1,Vt.r,Vt.p0)+Ue(Vt.r,Vt.p1,Vt.a1-Vt.a0)+nt(Vt.r,Vt.p1,st.r,st.p0))+"Z"}function ze(tt,xt,st,Vt){var lr=xt.call(tt,st,Vt),kt=ne.call(tt,lr,Vt),$t=ve.call(tt,lr,Vt)-pt,Ht=ge.call(tt,lr,Vt)-pt;return{r:kt,a0:$t,a1:Ht,p0:[kt*Math.cos($t),kt*Math.sin($t)],p1:[kt*Math.cos(Ht),kt*Math.sin(Ht)]}}function Le(tt,xt){return tt.a0==xt.a0&&tt.a1==xt.a1}function Ue(tt,xt,st){return"A"+tt+","+tt+" 0 "+ +(st>Oe)+",1 "+xt}function nt(tt,xt,st,Vt){return"Q 0,0 "+Vt}return pe.radius=function(tt){return arguments.length?(ne=kn(tt),pe):ne},pe.source=function(tt){return arguments.length?(U=kn(tt),pe):U},pe.target=function(tt){return arguments.length?(K=kn(tt),pe):K},pe.startAngle=function(tt){return arguments.length?(ve=kn(tt),pe):ve},pe.endAngle=function(tt){return arguments.length?(ge=kn(tt),pe):ge},pe};function zh(U){return U.radius}t.svg.diagonal=function(){var U=Rp,K=Rh,ne=yg;function ve(ge,pe){var ze=U.call(this,ge,pe),Le=K.call(this,ge,pe),Ue=(ze.y+Le.y)/2,nt=[ze,{x:ze.x,y:Ue},{x:Le.x,y:Ue},Le];return nt=nt.map(ne),"M"+nt[0]+"C"+nt[1]+" "+nt[2]+" "+nt[3]}return ve.source=function(ge){return arguments.length?(U=kn(ge),ve):U},ve.target=function(ge){return arguments.length?(K=kn(ge),ve):K},ve.projection=function(ge){return arguments.length?(ne=ge,ve):ne},ve};function yg(U){return[U.x,U.y]}t.svg.diagonal.radial=function(){var U=t.svg.diagonal(),K=yg,ne=U.projection;return U.projection=function(ve){return arguments.length?ne(Zf(K=ve)):K},U};function Zf(U){return function(){var K=U.apply(this,arguments),ne=K[0],ve=K[1]-pt;return[ne*Math.cos(ve),ne*Math.sin(ve)]}}t.svg.symbol=function(){var U=Fh,K=zp;function ne(ve,ge){return(Sd.get(U.call(this,ve,ge))||Ad)(K.call(this,ve,ge))}return ne.type=function(ve){return arguments.length?(U=kn(ve),ne):U},ne.size=function(ve){return arguments.length?(K=kn(ve),ne):K},ne};function zp(){return 64}function Fh(){return"circle"}function Ad(U){var K=Math.sqrt(U/Oe);return"M0,"+K+"A"+K+","+K+" 0 1,1 0,"+-K+"A"+K+","+K+" 0 1,1 0,"+K+"Z"}var Sd=t.map({circle:Ad,cross:function(U){var K=Math.sqrt(U/5)/2;return"M"+-3*K+","+-K+"H"+-K+"V"+-3*K+"H"+K+"V"+-K+"H"+3*K+"V"+K+"H"+K+"V"+3*K+"H"+-K+"V"+K+"H"+-3*K+"Z"},diamond:function(U){var K=Math.sqrt(U/(2*Md)),ne=K*Md;return"M0,"+-K+"L"+ne+",0 0,"+K+" "+-ne+",0Z"},square:function(U){var K=Math.sqrt(U)/2;return"M"+-K+","+-K+"L"+K+","+-K+" "+K+","+K+" "+-K+","+K+"Z"},"triangle-down":function(U){var K=Math.sqrt(U/Oh),ne=K*Oh/2;return"M0,"+ne+"L"+K+","+-ne+" "+-K+","+-ne+"Z"},"triangle-up":function(U){var K=Math.sqrt(U/Oh),ne=K*Oh/2;return"M0,"+-ne+"L"+K+","+ne+" "+-K+","+ne+"Z"}});t.svg.symbolTypes=Sd.keys();var Oh=Math.sqrt(3),Md=Math.tan(30*Dt);ye.transition=function(U){for(var K=jc||++Nh,ne=Ed(U),ve=[],ge,pe,ze=kd||{time:Date.now(),ease:D1,delay:0,duration:250},Le=-1,Ue=this.length;++Le<Ue;){ve.push(ge=[]);for(var nt=this[Le],tt=-1,xt=nt.length;++tt<xt;)(pe=nt[tt])&&hi(pe,tt,ne,K,ze),ge.push(pe)}return Vc(ve,ne,K)},ye.interrupt=function(U){return this.each(U==null?Hu:Tv(Ed(U)))};var Hu=Tv(Ed());function Tv(U){return function(){var K,ne,ve;(K=this[U])&&(ve=K[ne=K.active])&&(ve.timer.c=null,ve.timer.t=NaN,--K.count?delete K[ne]:delete this[U],K.active+=.5,ve.event&&ve.event.interrupt.call(this,this.__data__,ve.index))}}function Vc(U,K,ne){return we(U,Uo),U.namespace=K,U.id=ne,U}var Uo=[],Nh=0,jc,kd;Uo.call=ye.call,Uo.empty=ye.empty,Uo.node=ye.node,Uo.size=ye.size,t.transition=function(U,K){return U&&U.transition?jc?U.transition(K):U:t.selection().transition(U)},t.transition.prototype=Uo,Uo.select=function(U){var K=this.id,ne=this.namespace,ve=[],ge,pe,ze;U=re(U);for(var Le=-1,Ue=this.length;++Le<Ue;){ve.push(ge=[]);for(var nt=this[Le],tt=-1,xt=nt.length;++tt<xt;)(ze=nt[tt])&&(pe=U.call(ze,ze.__data__,tt,Le))?("__data__"in ze&&(pe.__data__=ze.__data__),hi(pe,tt,ne,K,ze[ne][K]),ge.push(pe)):ge.push(null)}return Vc(ve,ne,K)},Uo.selectAll=function(U){var K=this.id,ne=this.namespace,ve=[],ge,pe,ze,Le,Ue;U=se(U);for(var nt=-1,tt=this.length;++nt<tt;)for(var xt=this[nt],st=-1,Vt=xt.length;++st<Vt;)if(ze=xt[st]){Ue=ze[ne][K],pe=U.call(ze,ze.__data__,st,nt),ve.push(ge=[]);for(var lr=-1,kt=pe.length;++lr<kt;)(Le=pe[lr])&&hi(Le,lr,ne,K,Ue),ge.push(Le)}return Vc(ve,ne,K)},Uo.filter=function(U){var K=[],ne,ve,ge;typeof U!="function"&&(U=Ze(U));for(var pe=0,ze=this.length;pe<ze;pe++){K.push(ne=[]);for(var ve=this[pe],Le=0,Ue=ve.length;Le<Ue;Le++)(ge=ve[Le])&&U.call(ge,ge.__data__,Le,pe)&&ne.push(ge)}return Vc(K,this.namespace,this.id)},Uo.tween=function(U,K){var ne=this.id,ve=this.namespace;return arguments.length<2?this.node()[ve][ne].tween.get(U):Je(this,K==null?function(ge){ge[ve][ne].tween.remove(U)}:function(ge){ge[ve][ne].tween.set(U,K)})};function Av(U,K,ne,ve){var ge=U.id,pe=U.namespace;return Je(U,typeof ne=="function"?function(ze,Le,Ue){ze[pe][ge].tween.set(K,ve(ne.call(ze,ze.__data__,Le,Ue)))}:(ne=ve(ne),function(ze){ze[pe][ge].tween.set(K,ne)}))}Uo.attr=function(U,K){if(arguments.length<2){for(K in U)this.attr(K,U[K]);return this}var ne=U=="transform"?K0:fo,ve=t.ns.qualify(U);function ge(){this.removeAttribute(ve)}function pe(){this.removeAttributeNS(ve.space,ve.local)}function ze(Ue){return Ue==null?ge:(Ue+="",function(){var nt=this.getAttribute(ve),tt;return nt!==Ue&&(tt=ne(nt,Ue),function(xt){this.setAttribute(ve,tt(xt))})})}function Le(Ue){return Ue==null?pe:(Ue+="",function(){var nt=this.getAttributeNS(ve.space,ve.local),tt;return nt!==Ue&&(tt=ne(nt,Ue),function(xt){this.setAttributeNS(ve.space,ve.local,tt(xt))})})}return Av(this,"attr."+U,K,ve.local?Le:ze)},Uo.attrTween=function(U,K){var ne=t.ns.qualify(U);function ve(pe,ze){var Le=K.call(this,pe,ze,this.getAttribute(ne));return Le&&function(Ue){this.setAttribute(ne,Le(Ue))}}function ge(pe,ze){var Le=K.call(this,pe,ze,this.getAttributeNS(ne.space,ne.local));return Le&&function(Ue){this.setAttributeNS(ne.space,ne.local,Le(Ue))}}return this.tween("attr."+U,ne.local?ge:ve)},Uo.style=function(U,K,ne){var ve=arguments.length;if(ve<3){if(typeof U!="string"){ve<2&&(K="");for(ne in U)this.style(ne,U[ne],K);return this}ne=""}function ge(){this.style.removeProperty(U)}function pe(ze){return ze==null?ge:(ze+="",function(){var Le=i(this).getComputedStyle(this,null).getPropertyValue(U),Ue;return Le!==ze&&(Ue=fo(Le,ze),function(nt){this.style.setProperty(U,Ue(nt),ne)})})}return Av(this,"style."+U,K,pe)},Uo.styleTween=function(U,K,ne){arguments.length<3&&(ne="");function ve(ge,pe){var ze=K.call(this,ge,pe,i(this).getComputedStyle(this,null).getPropertyValue(U));return ze&&function(Le){this.style.setProperty(U,ze(Le),ne)}}return this.tween("style."+U,ve)},Uo.text=function(U){return Av(this,"text",U,Ql)};function Ql(U){return U==null&&(U=""),function(){this.textContent=U}}Uo.remove=function(){var U=this.namespace;return this.each("end.transition",function(){var K;this[U].count<2&&(K=this.parentNode)&&K.removeChild(this)})},Uo.ease=function(U){var K=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][K].ease:(typeof U!="function"&&(U=t.ease.apply(t,arguments)),Je(this,function(ve){ve[ne][K].ease=U}))},Uo.delay=function(U){var K=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][K].delay:Je(this,typeof U=="function"?function(ve,ge,pe){ve[ne][K].delay=+U.call(ve,ve.__data__,ge,pe)}:(U=+U,function(ve){ve[ne][K].delay=U}))},Uo.duration=function(U){var K=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][K].duration:Je(this,typeof U=="function"?function(ve,ge,pe){ve[ne][K].duration=Math.max(1,U.call(ve,ve.__data__,ge,pe))}:(U=Math.max(1,U),function(ve){ve[ne][K].duration=U}))},Uo.each=function(U,K){var ne=this.id,ve=this.namespace;if(arguments.length<2){var ge=kd,pe=jc;try{jc=ne,Je(this,function(ze,Le,Ue){kd=ze[ve][ne],U.call(ze,ze.__data__,Le,Ue)})}finally{kd=ge,jc=pe}}else Je(this,function(ze){var Le=ze[ve][ne];(Le.event||(Le.event=t.dispatch("start","end","interrupt"))).on(U,K)});return this},Uo.transition=function(){for(var U=this.id,K=++Nh,ne=this.namespace,ve=[],ge,pe,ze,Le,Ue=0,nt=this.length;Ue<nt;Ue++){ve.push(ge=[]);for(var pe=this[Ue],tt=0,xt=pe.length;tt<xt;tt++)(ze=pe[tt])&&(Le=ze[ne][U],hi(ze,tt,ne,K,{time:Le.time,ease:Le.ease,delay:Le.delay+Le.duration,duration:Le.duration})),ge.push(ze)}return Vc(ve,ne,K)};function Ed(U){return U==null?"__transition__":"__transition_"+U+"__"}function hi(U,K,ne,ve,ge){var pe=U[ne]||(U[ne]={active:0,count:0}),ze=pe[ve],Le,Ue,nt,tt,xt;function st(kt){var $t=ze.delay;if(Ue.t=$t+Le,$t<=kt)return Vt(kt-$t);Ue.c=Vt}function Vt(kt){var $t=pe.active,Ht=pe[$t];Ht&&(Ht.timer.c=null,Ht.timer.t=NaN,--pe.count,delete pe[$t],Ht.event&&Ht.event.interrupt.call(U,U.__data__,Ht.index));for(var ar in pe)if(+ar<ve){var nr=pe[ar];nr.timer.c=null,nr.timer.t=NaN,--pe.count,delete pe[ar]}Ue.c=lr,kh(function(){return Ue.c&&lr(kt||1)&&(Ue.c=null,Ue.t=NaN),1},0,Le),pe.active=ve,ze.event&&ze.event.start.call(U,U.__data__,K),xt=[],ze.tween.forEach(function(Gt,Yr){(Yr=Yr.call(U,U.__data__,K))&&xt.push(Yr)}),tt=ze.ease,nt=ze.duration}function lr(kt){for(var $t=kt/nt,Ht=tt($t),ar=xt.length;ar>0;)xt[--ar].call(U,Ht);if($t>=1)return ze.event&&ze.event.end.call(U,U.__data__,K),--pe.count?delete pe[ve]:delete U[ne],1}ze||(Le=ge.time,Ue=kh(st,0,Le),ze=pe[ve]={tween:new M,time:Le,timer:Ue,delay:ge.delay,duration:ge.duration,ease:ge.ease,index:K},ge=null,++pe.count)}t.svg.axis=function(){var U=t.scale.linear(),K=Sv,ne=6,ve=6,ge=3,pe=[10],ze=null,Le;function Ue(nt){nt.each(function(){var tt=t.select(this),xt=this.__chart__||U,st=this.__chart__=U.copy(),Vt=ze==null?st.ticks?st.ticks.apply(st,pe):st.domain():ze,lr=Le==null?st.tickFormat?st.tickFormat.apply(st,pe):D:Le,kt=tt.selectAll(".tick").data(Vt,st),$t=kt.enter().insert("g",".domain").attr("class","tick").style("opacity",Sr),Ht=t.transition(kt.exit()).style("opacity",Sr).remove(),ar=t.transition(kt.order()).style("opacity",1),nr=Math.max(ne,0)+ge,Gt,Yr=mv(st),ya=tt.selectAll(".domain").data([0]),va=(ya.enter().append("path").attr("class","domain"),t.transition(ya));$t.append("line"),$t.append("text");var ba=$t.select("line"),Ma=ar.select("line"),Ba=kt.select("text").text(lr),Ya=$t.select("text"),Ta=ar.select("text"),un=K==="top"||K==="left"?-1:1,ai,ho,Jn,pa;if(K==="bottom"||K==="top"?(Gt=eu,ai="x",Jn="y",ho="x2",pa="y2",Ba.attr("dy",un<0?"0em":".71em").style("text-anchor","middle"),va.attr("d","M"+Yr[0]+","+un*ve+"V0H"+Yr[1]+"V"+un*ve)):(Gt=Fi,ai="y",Jn="x",ho="y2",pa="x2",Ba.attr("dy",".32em").style("text-anchor",un<0?"end":"start"),va.attr("d","M"+un*ve+","+Yr[0]+"H0V"+Yr[1]+"H"+un*ve)),ba.attr(pa,un*ne),Ya.attr(Jn,un*nr),Ma.attr(ho,0).attr(pa,un*ne),Ta.attr(ai,0).attr(Jn,un*nr),st.rangeBand){var Sn=st,Dn=Sn.rangeBand()/2;xt=st=function(Ln){return Sn(Ln)+Dn}}else xt.rangeBand?xt=st:Ht.call(Gt,st,xt);$t.call(Gt,xt,st),ar.call(Gt,st,st)})}return Ue.scale=function(nt){return arguments.length?(U=nt,Ue):U},Ue.orient=function(nt){return arguments.length?(K=nt in Su?nt+"":Sv,Ue):K},Ue.ticks=function(){return arguments.length?(pe=a(arguments),Ue):pe},Ue.tickValues=function(nt){return arguments.length?(ze=nt,Ue):ze},Ue.tickFormat=function(nt){return arguments.length?(Le=nt,Ue):Le},Ue.tickSize=function(nt){var tt=arguments.length;return tt?(ne=+nt,ve=+arguments[tt-1],Ue):ne},Ue.innerTickSize=function(nt){return arguments.length?(ne=+nt,Ue):ne},Ue.outerTickSize=function(nt){return arguments.length?(ve=+nt,Ue):ve},Ue.tickPadding=function(nt){return arguments.length?(ge=+nt,Ue):ge},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var Sv="bottom",Su={top:1,right:1,bottom:1,left:1};function eu(U,K,ne){U.attr("transform",function(ve){var ge=K(ve);return"translate("+(isFinite(ge)?ge:ne(ve))+",0)"})}function Fi(U,K,ne){U.attr("transform",function(ve){var ge=K(ve);return"translate(0,"+(isFinite(ge)?ge:ne(ve))+")"})}t.svg.brush=function(){var U=ae(tt,"brushstart","brush","brushend"),K=null,ne=null,ve=[0,0],ge=[0,0],pe,ze,Le=!0,Ue=!0,nt=Cd[0];function tt(kt){kt.each(function(){var $t=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",lr).on("touchstart.brush",lr),Ht=$t.selectAll(".background").data([0]);Ht.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),$t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var ar=$t.selectAll(".resize").data(nt,D);ar.exit().remove(),ar.enter().append("g").attr("class",function(ya){return"resize "+ya}).style("cursor",function(ya){return Gi[ya]}).append("rect").attr("x",function(ya){return/[ew]$/.test(ya)?-3:null}).attr("y",function(ya){return/^[ns]/.test(ya)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),ar.style("display",tt.empty()?"none":null);var nr=t.transition($t),Gt=t.transition(Ht),Yr;K&&(Yr=mv(K),Gt.attr("x",Yr[0]).attr("width",Yr[1]-Yr[0]),st(nr)),ne&&(Yr=mv(ne),Gt.attr("y",Yr[0]).attr("height",Yr[1]-Yr[0]),Vt(nr)),xt(nr)})}tt.event=function(kt){kt.each(function(){var $t=U.of(this,arguments),Ht={x:ve,y:ge,i:pe,j:ze},ar=this.__chart__||Ht;this.__chart__=Ht,jc?t.select(this).transition().each("start.brush",function(){pe=ar.i,ze=ar.j,ve=ar.x,ge=ar.y,$t({type:"brushstart"})}).tween("brush:brush",function(){var nr=jf(ve,Ht.x),Gt=jf(ge,Ht.y);return pe=ze=null,function(Yr){ve=Ht.x=nr(Yr),ge=Ht.y=Gt(Yr),$t({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=Ht.i,ze=Ht.j,$t({type:"brush",mode:"resize"}),$t({type:"brushend"})}):($t({type:"brushstart"}),$t({type:"brush",mode:"resize"}),$t({type:"brushend"}))})};function xt(kt){kt.selectAll(".resize").attr("transform",function($t){return"translate("+ve[+/e$/.test($t)]+","+ge[+/^s/.test($t)]+")"})}function st(kt){kt.select(".extent").attr("x",ve[0]),kt.selectAll(".extent,.n>rect,.s>rect").attr("width",ve[1]-ve[0])}function Vt(kt){kt.select(".extent").attr("y",ge[0]),kt.selectAll(".extent,.e>rect,.w>rect").attr("height",ge[1]-ge[0])}function lr(){var kt=this,$t=t.select(t.event.target),Ht=U.of(kt,arguments),ar=t.select(kt),nr=$t.datum(),Gt=!/^(n|s)$/.test(nr)&&K,Yr=!/^(e|w)$/.test(nr)&&ne,ya=$t.classed("extent"),va=Xt(kt),ba,Ma=t.mouse(kt),Ba,Ya=t.select(i(kt)).on("keydown.brush",ai).on("keyup.brush",ho);if(t.event.changedTouches?Ya.on("touchmove.brush",Jn).on("touchend.brush",Sn):Ya.on("mousemove.brush",Jn).on("mouseup.brush",Sn),ar.interrupt().selectAll("*").interrupt(),ya)Ma[0]=ve[0]-Ma[0],Ma[1]=ge[0]-Ma[1];else if(nr){var Ta=+/w$/.test(nr),un=+/^n/.test(nr);Ba=[ve[1-Ta]-Ma[0],ge[1-un]-Ma[1]],Ma[0]=ve[Ta],Ma[1]=ge[un]}else t.event.altKey&&(ba=Ma.slice());ar.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",$t.style("cursor")),Ht({type:"brushstart"}),Jn();function ai(){t.event.keyCode==32&&(ya||(ba=null,Ma[0]-=ve[1],Ma[1]-=ge[1],ya=2),Z())}function ho(){t.event.keyCode==32&&ya==2&&(Ma[0]+=ve[1],Ma[1]+=ge[1],ya=0,Z())}function Jn(){var Dn=t.mouse(kt),Ln=!1;Ba&&(Dn[0]+=Ba[0],Dn[1]+=Ba[1]),ya||(t.event.altKey?(ba||(ba=[(ve[0]+ve[1])/2,(ge[0]+ge[1])/2]),Ma[0]=ve[+(Dn[0]<ba[0])],Ma[1]=ge[+(Dn[1]<ba[1])]):ba=null),Gt&&pa(Dn,K,0)&&(st(ar),Ln=!0),Yr&&pa(Dn,ne,1)&&(Vt(ar),Ln=!0),Ln&&(xt(ar),Ht({type:"brush",mode:ya?"move":"resize"}))}function pa(Dn,Ln,To){var Nn=mv(Ln),Ho=Nn[0],vo=Nn[1],Go=Ma[To],Ps=To?ge:ve,Hs=Ps[1]-Ps[0],ss,no;if(ya&&(Ho-=Go,vo-=Hs+Go),ss=(To?Ue:Le)?Math.max(Ho,Math.min(vo,Dn[To])):Dn[To],ya?no=(ss+=Go)+Hs:(ba&&(Go=Math.max(Ho,Math.min(vo,2*ba[To]-ss))),Go<ss?(no=ss,ss=Go):no=Go),Ps[0]!=ss||Ps[1]!=no)return To?ze=null:pe=null,Ps[0]=ss,Ps[1]=no,!0}function Sn(){Jn(),ar.style("pointer-events","all").selectAll(".resize").style("display",tt.empty()?"none":null),t.select("body").style("cursor",null),Ya.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),va(),Ht({type:"brushend"})}}return tt.x=function(kt){return arguments.length?(K=kt,nt=Cd[!K<<1|!ne],tt):K},tt.y=function(kt){return arguments.length?(ne=kt,nt=Cd[!K<<1|!ne],tt):ne},tt.clamp=function(kt){return arguments.length?(K&&ne?(Le=!!kt[0],Ue=!!kt[1]):K?Le=!!kt:ne&&(Ue=!!kt),tt):K&&ne?[Le,Ue]:K?Le:ne?Ue:null},tt.extent=function(kt){var $t,Ht,ar,nr,Gt;return arguments.length?(K&&($t=kt[0],Ht=kt[1],ne&&($t=$t[0],Ht=Ht[0]),pe=[$t,Ht],K.invert&&($t=K($t),Ht=K(Ht)),Ht<$t&&(Gt=$t,$t=Ht,Ht=Gt),($t!=ve[0]||Ht!=ve[1])&&(ve=[$t,Ht])),ne&&(ar=kt[0],nr=kt[1],K&&(ar=ar[1],nr=nr[1]),ze=[ar,nr],ne.invert&&(ar=ne(ar),nr=ne(nr)),nr<ar&&(Gt=ar,ar=nr,nr=Gt),(ar!=ge[0]||nr!=ge[1])&&(ge=[ar,nr])),tt):(K&&(pe?($t=pe[0],Ht=pe[1]):($t=ve[0],Ht=ve[1],K.invert&&($t=K.invert($t),Ht=K.invert(Ht)),Ht<$t&&(Gt=$t,$t=Ht,Ht=Gt))),ne&&(ze?(ar=ze[0],nr=ze[1]):(ar=ge[0],nr=ge[1],ne.invert&&(ar=ne.invert(ar),nr=ne.invert(nr)),nr<ar&&(Gt=ar,ar=nr,nr=Gt))),K&&ne?[[$t,ar],[Ht,nr]]:K?[$t,Ht]:ne&&[ar,nr])},tt.clear=function(){return tt.empty()||(ve=[0,0],ge=[0,0],pe=ze=null),tt},tt.empty=function(){return!!K&&ve[0]==ve[1]||!!ne&&ge[0]==ge[1]},t.rebind(tt,U,"on")};var Gi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cd=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];t.text=ds(function(U){return U.responseText}),t.json=function(U,K){return Kn(U,"application/json",bf,K)};function bf(U){return JSON.parse(U.responseText)}t.html=function(U,K){return Kn(U,"text/html",_f,K)};function _f(U){var K=n.createRange();return K.selectNode(n.body),K.createContextualFragment(U.responseText)}t.xml=ds(function(U){return U.responseXML}),e.exports?e.exports=t:this.d3=t}).apply(self)})(Ra);var cR=new Date,hR=new Date;function nu(e,t,r,a){function n(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return n.floor=function(o){return e(o=new Date(+o)),o},n.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},n.round=function(o){var i=n(o),s=n.ceil(o);return o-i<s-o?i:s},n.offset=function(o,i){return t(o=new Date(+o),i==null?1:Math.floor(i)),o},n.range=function(o,i,s){var l=[],u;if(o=n.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return l;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<i);return l},n.filter=function(o){return nu(function(i){if(i>=i)for(;e(i),!o(i);)i.setTime(i-1)},function(i,s){if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!o(i););else for(;--s>=0;)for(;t(i,1),!o(i););})},r&&(n.count=function(o,i){return cR.setTime(+o),hR.setTime(+i),e(cR),e(hR),Math.floor(r(cR,hR))},n.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?n.filter(a?function(i){return a(i)%o==0}:function(i){return n.count(0,i)%o==0}):n}),n}var r5=nu(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r5.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?nu(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e}):r5};var uY=r5,fY=r5.range,a5=1e3,tx=6e4,n5=36e5,cY=864e5,hY=6048e5,vY=nu(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*a5)},function(e,t){return(t-e)/a5},function(e){return e.getUTCSeconds()}),dY=vY,pY=vY.range,gY=nu(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a5)},function(e,t){e.setTime(+e+t*tx)},function(e,t){return(t-e)/tx},function(e){return e.getMinutes()}),JSe=gY,QSe=gY.range,mY=nu(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a5-e.getMinutes()*tx)},function(e,t){e.setTime(+e+t*n5)},function(e,t){return(t-e)/n5},function(e){return e.getHours()}),eMe=mY,tMe=mY.range,yY=nu(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tx)/cY},function(e){return e.getDate()-1}),vR=yY,rMe=yY.range;function rx(e){return nu(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,r){t.setDate(t.getDate()+r*7)},function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*tx)/hY})}var i5=rx(0),q3=rx(1),xY=rx(2),bY=rx(3),ax=rx(4),_Y=rx(5),wY=rx(6),TY=i5.range,aMe=q3.range,nMe=xY.range,iMe=bY.range,oMe=ax.range,sMe=_Y.range,lMe=wY.range,AY=nu(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),uMe=AY,fMe=AY.range,dR=nu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});dR.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:nu(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};var x_=dR,cMe=dR.range,SY=nu(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*tx)},function(e,t){return(t-e)/tx},function(e){return e.getUTCMinutes()}),hMe=SY,vMe=SY.range,MY=nu(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*n5)},function(e,t){return(t-e)/n5},function(e){return e.getUTCHours()}),dMe=MY,pMe=MY.range,kY=nu(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/cY},function(e){return e.getUTCDate()-1}),pR=kY,gMe=kY.range;function nx(e){return nu(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r*7)},function(t,r){return(r-t)/hY})}var o5=nx(0),Y3=nx(1),EY=nx(2),CY=nx(3),ix=nx(4),LY=nx(5),PY=nx(6),IY=o5.range,mMe=Y3.range,yMe=EY.range,xMe=CY.range,bMe=ix.range,_Me=LY.range,wMe=PY.range,DY=nu(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),TMe=DY,AMe=DY.range,gR=nu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});gR.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:nu(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};var b_=gR,SMe=gR.range,MMe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",timeInterval:nu,timeMillisecond:uY,timeMilliseconds:fY,utcMillisecond:uY,utcMilliseconds:fY,timeSecond:dY,timeSeconds:pY,utcSecond:dY,utcSeconds:pY,timeMinute:JSe,timeMinutes:QSe,timeHour:eMe,timeHours:tMe,timeDay:vR,timeDays:rMe,timeWeek:i5,timeWeeks:TY,timeSunday:i5,timeSundays:TY,timeMonday:q3,timeMondays:aMe,timeTuesday:xY,timeTuesdays:nMe,timeWednesday:bY,timeWednesdays:iMe,timeThursday:ax,timeThursdays:oMe,timeFriday:_Y,timeFridays:sMe,timeSaturday:wY,timeSaturdays:lMe,timeMonth:uMe,timeMonths:fMe,timeYear:x_,timeYears:cMe,utcMinute:hMe,utcMinutes:vMe,utcHour:dMe,utcHours:pMe,utcDay:pR,utcDays:gMe,utcWeek:o5,utcWeeks:IY,utcSunday:o5,utcSundays:IY,utcMonday:Y3,utcMondays:mMe,utcTuesday:EY,utcTuesdays:yMe,utcWednesday:CY,utcWednesdays:xMe,utcThursday:ix,utcThursdays:bMe,utcFriday:LY,utcFridays:_Me,utcSaturday:PY,utcSaturdays:wMe,utcMonth:TMe,utcMonths:AMe,utcYear:b_,utcYears:SMe});function mR(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yR(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function W3(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function RY(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,o=e.days,i=e.shortDays,s=e.months,l=e.shortMonths,u=X3(n),f=Z3(n),c=X3(o),h=Z3(o),v=X3(i),p=Z3(i),d=X3(s),g=Z3(s),m=X3(l),y=Z3(l),_={a:O,A:$,b:Y,B:X,c:null,d:$Y,e:$Y,f:XMe,g:ike,G:ske,H:qMe,I:YMe,j:WMe,L:UY,m:ZMe,M:KMe,p:ee,q:Q,Q:YY,s:WY,S:JMe,u:QMe,U:eke,V:tke,w:rke,W:ake,x:null,X:null,y:nke,Y:oke,Z:lke,"%":qY},S={a:Z,A:q,b:ae,B:ie,c:null,d:GY,e:GY,f:hke,g:wke,G:Ake,H:uke,I:fke,j:cke,L:VY,m:vke,M:dke,p:we,q:Te,Q:YY,s:WY,S:pke,u:gke,U:mke,V:yke,w:xke,W:bke,x:null,X:null,y:_ke,Y:Tke,Z:Ske,"%":qY},M={a:L,A:C,b:I,B:R,c:B,d:NY,e:NY,f:HMe,g:OY,G:FY,H:BY,I:BY,j:NMe,L:UMe,m:OMe,M:BMe,p:T,q:FMe,Q:VMe,s:jMe,S:$Me,u:PMe,U:IMe,V:DMe,w:LMe,W:RMe,x:N,X:D,y:OY,Y:FY,Z:zMe,"%":GMe};_.x=w(r,_),_.X=w(a,_),_.c=w(t,_),S.x=w(r,S),S.X=w(a,S),S.c=w(t,S);function w(he,xe){return function(Se){var ye=[],re=-1,se=0,de=he.length,Me,Ie,Ee;for(Se instanceof Date||(Se=new Date(+Se));++re<de;)he.charCodeAt(re)===37&&(ye.push(he.slice(se,re)),(Ie=zY[Me=he.charAt(++re)])!=null?Me=he.charAt(++re):Ie=Me==="e"?" ":"0",(Ee=xe[Me])&&(Me=Ee(Se,Ie)),ye.push(Me),se=re+1);return ye.push(he.slice(se,re)),ye.join("")}}function A(he,xe){return function(Se){var ye=W3(1900,void 0,1),re=k(ye,he,Se+="",0),se,de;if(re!=Se.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(xe&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(se=yR(W3(ye.y,0,1)),de=se.getUTCDay(),se=de>4||de===0?Y3.ceil(se):Y3(se),se=pR.offset(se,(ye.V-1)*7),ye.y=se.getUTCFullYear(),ye.m=se.getUTCMonth(),ye.d=se.getUTCDate()+(ye.w+6)%7):(se=mR(W3(ye.y,0,1)),de=se.getDay(),se=de>4||de===0?q3.ceil(se):q3(se),se=vR.offset(se,(ye.V-1)*7),ye.y=se.getFullYear(),ye.m=se.getMonth(),ye.d=se.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),de="Z"in ye?yR(W3(ye.y,0,1)).getUTCDay():mR(W3(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(de+5)%7:ye.w+ye.U*7-(de+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,yR(ye)):mR(ye)}}function k(he,xe,Se,ye){for(var re=0,se=xe.length,de=Se.length,Me,Ie;re<se;){if(ye>=de)return-1;if(Me=xe.charCodeAt(re++),Me===37){if(Me=xe.charAt(re++),Ie=M[Me in zY?xe.charAt(re++):Me],!Ie||(ye=Ie(he,Se,ye))<0)return-1}else if(Me!=Se.charCodeAt(ye++))return-1}return ye}function T(he,xe,Se){var ye=u.exec(xe.slice(Se));return ye?(he.p=f[ye[0].toLowerCase()],Se+ye[0].length):-1}function L(he,xe,Se){var ye=v.exec(xe.slice(Se));return ye?(he.w=p[ye[0].toLowerCase()],Se+ye[0].length):-1}function C(he,xe,Se){var ye=c.exec(xe.slice(Se));return ye?(he.w=h[ye[0].toLowerCase()],Se+ye[0].length):-1}function I(he,xe,Se){var ye=m.exec(xe.slice(Se));return ye?(he.m=y[ye[0].toLowerCase()],Se+ye[0].length):-1}function R(he,xe,Se){var ye=d.exec(xe.slice(Se));return ye?(he.m=g[ye[0].toLowerCase()],Se+ye[0].length):-1}function B(he,xe,Se){return k(he,t,xe,Se)}function N(he,xe,Se){return k(he,r,xe,Se)}function D(he,xe,Se){return k(he,a,xe,Se)}function O(he){return i[he.getDay()]}function $(he){return o[he.getDay()]}function Y(he){return l[he.getMonth()]}function X(he){return s[he.getMonth()]}function ee(he){return n[+(he.getHours()>=12)]}function Q(he){return 1+~~(he.getMonth()/3)}function Z(he){return i[he.getUTCDay()]}function q(he){return o[he.getUTCDay()]}function ae(he){return l[he.getUTCMonth()]}function ie(he){return s[he.getUTCMonth()]}function we(he){return n[+(he.getUTCHours()>=12)]}function Te(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var xe=w(he+="",_);return xe.toString=function(){return he},xe},parse:function(he){var xe=A(he+="",!1);return xe.toString=function(){return he},xe},utcFormat:function(he){var xe=w(he+="",S);return xe.toString=function(){return he},xe},utcParse:function(he){var xe=A(he+="",!0);return xe.toString=function(){return he},xe}}}var zY={"-":"",_:" ","0":"0"},Iu=/^\s*\d+/,kMe=/^%/,EMe=/[\\^$*+?|[\]().{}]/g;function yo(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",o=n.length;return a+(o<r?new Array(r-o+1).join(t)+n:n)}function CMe(e){return e.replace(EMe,"\\$&")}function X3(e){return new RegExp("^(?:"+e.map(CMe).join("|")+")","i")}function Z3(e){for(var t={},r=-1,a=e.length;++r<a;)t[e[r].toLowerCase()]=r;return t}function LMe(e,t,r){var a=Iu.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function PMe(e,t,r){var a=Iu.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function IMe(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function DMe(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function RMe(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function FY(e,t,r){var a=Iu.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function OY(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function zMe(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function FMe(e,t,r){var a=Iu.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function OMe(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function NY(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function NMe(e,t,r){var a=Iu.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function BY(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function BMe(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function $Me(e,t,r){var a=Iu.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function UMe(e,t,r){var a=Iu.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function HMe(e,t,r){var a=Iu.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function GMe(e,t,r){var a=kMe.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function VMe(e,t,r){var a=Iu.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function jMe(e,t,r){var a=Iu.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function $Y(e,t){return yo(e.getDate(),t,2)}function qMe(e,t){return yo(e.getHours(),t,2)}function YMe(e,t){return yo(e.getHours()%12||12,t,2)}function WMe(e,t){return yo(1+vR.count(x_(e),e),t,3)}function UY(e,t){return yo(e.getMilliseconds(),t,3)}function XMe(e,t){return UY(e,t)+"000"}function ZMe(e,t){return yo(e.getMonth()+1,t,2)}function KMe(e,t){return yo(e.getMinutes(),t,2)}function JMe(e,t){return yo(e.getSeconds(),t,2)}function QMe(e){var t=e.getDay();return t===0?7:t}function eke(e,t){return yo(i5.count(x_(e)-1,e),t,2)}function HY(e){var t=e.getDay();return t>=4||t===0?ax(e):ax.ceil(e)}function tke(e,t){return e=HY(e),yo(ax.count(x_(e),e)+(x_(e).getDay()===4),t,2)}function rke(e){return e.getDay()}function ake(e,t){return yo(q3.count(x_(e)-1,e),t,2)}function nke(e,t){return yo(e.getFullYear()%100,t,2)}function ike(e,t){return e=HY(e),yo(e.getFullYear()%100,t,2)}function oke(e,t){return yo(e.getFullYear()%1e4,t,4)}function ske(e,t){var r=e.getDay();return e=r>=4||r===0?ax(e):ax.ceil(e),yo(e.getFullYear()%1e4,t,4)}function lke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yo(t/60|0,"0",2)+yo(t%60,"0",2)}function GY(e,t){return yo(e.getUTCDate(),t,2)}function uke(e,t){return yo(e.getUTCHours(),t,2)}function fke(e,t){return yo(e.getUTCHours()%12||12,t,2)}function cke(e,t){return yo(1+pR.count(b_(e),e),t,3)}function VY(e,t){return yo(e.getUTCMilliseconds(),t,3)}function hke(e,t){return VY(e,t)+"000"}function vke(e,t){return yo(e.getUTCMonth()+1,t,2)}function dke(e,t){return yo(e.getUTCMinutes(),t,2)}function pke(e,t){return yo(e.getUTCSeconds(),t,2)}function gke(e){var t=e.getUTCDay();return t===0?7:t}function mke(e,t){return yo(o5.count(b_(e)-1,e),t,2)}function jY(e){var t=e.getUTCDay();return t>=4||t===0?ix(e):ix.ceil(e)}function yke(e,t){return e=jY(e),yo(ix.count(b_(e),e)+(b_(e).getUTCDay()===4),t,2)}function xke(e){return e.getUTCDay()}function bke(e,t){return yo(Y3.count(b_(e)-1,e),t,2)}function _ke(e,t){return yo(e.getUTCFullYear()%100,t,2)}function wke(e,t){return e=jY(e),yo(e.getUTCFullYear()%100,t,2)}function Tke(e,t){return yo(e.getUTCFullYear()%1e4,t,4)}function Ake(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ix(e):ix.ceil(e),yo(e.getUTCFullYear()%1e4,t,4)}function Ske(){return"+0000"}function qY(){return"%"}function YY(e){return+e}function WY(e){return Math.floor(+e/1e3)}var __,XY,ZY,xR,bR;KY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function KY(e){return __=RY(e),XY=__.format,ZY=__.parse,xR=__.utcFormat,bR=__.utcParse,__}var JY="%Y-%m-%dT%H:%M:%S.%LZ";function Mke(e){return e.toISOString()}var kke=Date.prototype.toISOString?Mke:xR(JY),Eke=kke;function Cke(e){var t=new Date(e);return isNaN(t)?null:t}var Lke=+new Date("2000-01-01T00:00:00.000Z")?Cke:bR(JY),Pke=Lke,Ike=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",timeFormatDefaultLocale:KY,get timeFormat(){return XY},get timeParse(){return ZY},get utcFormat(){return xR},get utcParse(){return bR},timeFormatLocale:RY,isoFormat:Eke,isoParse:Pke}),K3=qh(Ike);function Dke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function s5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function w_(e){return e=s5(Math.abs(e)),e?e[1]:NaN}function Rke(e,t){return function(r,a){for(var n=r.length,o=[],i=0,s=e[0],l=0;n>0&&s>0&&(l+s+1>a&&(s=Math.max(1,a-l)),o.push(r.substring(n-=s,n+s)),!((l+=s+1)>a));)s=e[i=(i+1)%e.length];return o.reverse().join(t)}}function zke(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Fke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l5(e){if(!(t=Fke.exec(e)))throw new Error("invalid format: "+e);var t;return new u5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}l5.prototype=u5.prototype;function u5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}u5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Oke(e){e:for(var t=e.length,r=1,a=-1,n;r<t;++r)switch(e[r]){case".":a=n=r;break;case"0":a===0&&(a=r),n=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var QY;function Nke(e,t){var r=s5(e,t);if(!r)return e+"";var a=r[0],n=r[1],o=n-(QY=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=a.length;return o===i?a:o>i?a+new Array(o-i+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+s5(e,Math.max(0,t+o-1))[0]}function eW(e,t){var r=s5(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}var tW={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Dke,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return eW(e*100,t)},r:eW,s:Nke,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function rW(e){return e}var aW=Array.prototype.map,nW=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function iW(e){var t=e.grouping===void 0||e.thousands===void 0?rW:Rke(aW.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?rW:zke(aW.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"-":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=l5(c);var h=c.fill,v=c.align,p=c.sign,d=c.symbol,g=c.zero,m=c.width,y=c.comma,_=c.precision,S=c.trim,M=c.type;M==="n"?(y=!0,M="g"):tW[M]||(_===void 0&&(_=12),S=!0,M="g"),(g||h==="0"&&v==="=")&&(g=!0,h="0",v="=");var w=d==="$"?r:d==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",A=d==="$"?a:/[%p]/.test(M)?i:"",k=tW[M],T=/[defgprs%]/.test(M);_=_===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(C){var I=w,R=A,B,N,D;if(M==="c")R=k(C)+R,C="";else{C=+C;var O=C<0||1/C<0;if(C=isNaN(C)?l:k(Math.abs(C),_),S&&(C=Oke(C)),O&&+C==0&&p!=="+"&&(O=!1),I=(O?p==="("?p:s:p==="-"||p==="("?"":p)+I,R=(M==="s"?nW[8+QY/3]:"")+R+(O&&p==="("?")":""),T){for(B=-1,N=C.length;++B<N;)if(D=C.charCodeAt(B),48>D||D>57){R=(D===46?n+C.slice(B+1):C.slice(B))+R,C=C.slice(0,B);break}}}y&&!g&&(C=t(C,1/0));var $=I.length+C.length+R.length,Y=$<m?new Array(m-$+1).join(h):"";switch(y&&g&&(C=t(Y+C,Y.length?m-R.length:1/0),Y=""),v){case"<":C=I+C+R+Y;break;case"=":C=I+Y+C+R;break;case"^":C=Y.slice(0,$=Y.length>>1)+I+C+R+Y.slice($);break;default:C=Y+I+C+R;break}return o(C)}return L.toString=function(){return c+""},L}function f(c,h){var v=u((c=l5(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(w_(h)/3)))*3,d=Math.pow(10,-p),g=nW[8+p/3];return function(m){return v(d*m)+g}}return{format:u,formatPrefix:f}}var f5,oW,sW;lW({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function lW(e){return f5=iW(e),oW=f5.format,sW=f5.formatPrefix,f5}function Bke(e){return Math.max(0,-w_(Math.abs(e)))}function $ke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(w_(t)/3)))*3-w_(Math.abs(e)))}function Uke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,w_(t)-w_(e))+1}var Hke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",formatDefaultLocale:lW,get format(){return oW},get formatPrefix(){return sW},formatLocale:iW,formatSpecifier:l5,FormatSpecifier:u5,precisionFixed:Bke,precisionPrefix:$ke,precisionRound:Uke}),uW=qh(Hke),Gke=function(e){for(var t=e.length,r,a=0;a<t;a++)if(r=e.charCodeAt(a),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0},Vke=Gke,gn=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&Vke(r))return!1}else if(t!=="number")return!1;return e-e<1},Un={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"},nh={},_R=Array.isArray,jke=ArrayBuffer,qke=DataView;function fW(e){return jke.isView(e)&&!(e instanceof qke)}nh.isTypedArray=fW;function c5(e){return _R(e)||fW(e)}nh.isArrayOrTypedArray=c5;function Yke(e){return!c5(e[0])}nh.isArray1D=Yke;nh.ensureArray=function(e,t){return _R(e)||(e=[]),e.length=t,e};nh.concat=function(){var e=[],t=!0,r=0,a,n,o,i,s,l,u,f;for(o=0;o<arguments.length;o++)i=arguments[o],l=i.length,l&&(n?e.push(i):(n=i,s=l),_R(i)?a=!1:(t=!1,r?a!==i.constructor&&(a=!1):a=i.constructor),r+=l);if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(a){for(u=new a(r),u.set(n),o=0;o<e.length;o++)i=e[o],u.set(i,s),s+=i.length;return u}for(u=new Array(r),f=0;f<n.length;f++)u[f]=n[f];for(o=0;o<e.length;o++){for(i=e[o],f=0;f<i.length;f++)u[s+f]=i[f];s+=f}return u};nh.maxRowLength=function(e){return cW(e,Math.max,0)};nh.minRowLength=function(e){return cW(e,Math.min,1/0)};function cW(e,t,r){if(c5(e))if(c5(e[0])){for(var a=r,n=0;n<e.length;n++)a=t(a,e[n].length);return a}else return e.length;return 0}var hW=gn,wR=nh.isArrayOrTypedArray,h5=function(t,r){if(hW(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";for(var a=0,n=r.split("."),o,i,s;a<n.length;){if(o=String(n[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),o){if(o[1])n[a]=o[1];else if(a===0)n.splice(0,1);else throw"bad property string";for(i=o[2].substr(1,o[2].length-2).split("]["),s=0;s<i.length;s++)a++,n.splice(a,0,Number(i[s]))}a++}return typeof t!="object"?Kke(t,r,n):{set:dW(t,n,r),get:vW(t,n),astr:r,parts:n,obj:t}};function vW(e,t){return function(){var r=e,a,n,o,i,s;for(i=0;i<t.length-1;i++){if(a=t[i],a===-1){for(n=!0,o=[],s=0;s<r.length;s++)o[s]=vW(r[s],t.slice(i+1))(),o[s]!==o[0]&&(n=!1);return n?o[0]:o}if(typeof a=="number"&&!wR(r)||(r=r[a],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(o=r[t[i]],o!==null))return o}}var Wke=/(^|\.)args\[/;function TR(e,t){return e===void 0||e===null&&!t.match(Wke)}function dW(e,t,r){return function(a){var n=e,o="",i=TR(a,r),s,l;for(l=0;l<t.length-1;l++){if(s=t[l],typeof s=="number"&&!wR(n))throw"array index but container is not an array";if(s===-1){if(i=!Zke(n,t.slice(l+1),a,r),i)break;return}if(!pW(n,s,t[l+1],i))break;if(n=n[s],typeof n!="object"||n===null)throw"container is not an object";o=Xke(o,s)}if(i){if(l===t.length-1&&(delete n[t[l]],Array.isArray(n)&&+t[l]==n.length-1))for(;n.length&&n[n.length-1]===void 0;)n.pop()}else n[t[l]]=a}}function Xke(e,t){var r=t;return hW(t)?r="["+t+"]":e&&(r="."+t),e+r}function Zke(e,t,r,a){var n=wR(r),o=!0,i=r,s=a.replace("-1",0),l=n?!1:TR(r,s),u=t[0],f;for(f=0;f<e.length;f++)s=a.replace("-1",f),n&&(i=r[f%r.length],l=TR(i,s)),l&&(o=!1),!!pW(e,f,u,l)&&dW(e[f],t,a.replace("-1",f))(i);return o}function pW(e,t,r,a){if(e[t]===void 0){if(a)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function Kke(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}var T_=h5,Jke=/^\w*$/,Qke=0,gW=1,v5=2,mW=3,ox=4,e5e=function(t,r,a,n){a=a||"name",n=n||"value";var o,i,s,l={};r&&r.length?(s=T_(t,r),i=s.get()):i=t,r=r||"";var u={};if(i)for(o=0;o<i.length;o++)u[i[o][a]]=o;var f=Jke.test(n),c={set:function(h,v){var p=v===null?ox:Qke;if(!i){if(!s||p===ox)return;i=[],s.set(i)}var d=u[h];if(d===void 0){if(p===ox)return;p=p|mW,d=i.length,u[h]=d}else v!==(f?i[d][n]:T_(i[d],n).get())&&(p=p|v5);var g=i[d]=i[d]||{};return g[a]=h,f?g[n]=v:T_(g,n).set(v),v!==null&&(p=p&~ox),l[d]=l[d]|p,c},get:function(h){if(!!i){var v=u[h];if(v!==void 0)return f?i[v][n]:T_(i[v],n).get()}},rename:function(h,v){var p=u[h];return p===void 0||(l[p]=l[p]|gW,u[v]=p,delete u[h],i[p][a]=v),c},remove:function(h){var v=u[h];if(v===void 0)return c;var p=i[v];if(Object.keys(p).length>2)return l[v]=l[v]|v5,c.set(h,null);if(f){for(o=v;o<i.length;o++)l[o]=l[o]|mW;for(o=v;o<i.length;o++)u[i[o][a]]--;i.splice(v,1),delete u[h]}else T_(p,n).set(null),l[v]=l[v]|v5|ox;return c},constructUpdate:function(){for(var h,v,p={},d=Object.keys(l),g=0;g<d.length;g++)v=d[g],h=r+"["+v+"]",i[v]?(l[v]&gW&&(p[h+"."+a]=i[v][a]),l[v]&v5&&(f?p[h+"."+n]=l[v]&ox?null:i[v][n]:p[h+"."+n]=l[v]&ox?null:T_(i[v],n).get())):p[h]=null;return p}};return c},t5e=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,r5e=/^[^\.\[\]]+$/,a5e=function(e,t){for(;t;){var r=e.match(t5e);if(r)e=r[1];else if(e.match(r5e))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t},A_=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")},n5e=gn,AR=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;return n5e(a)||(a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),a},yW=nh.isArrayOrTypedArray,J3=A_,i5e=function e(t,r){for(var a in r){var n=r[a],o=t[a];if(o!==n)if(a.charAt(0)==="_"||typeof n=="function"){if(a in t)continue;t[a]=n}else if(yW(n)&&yW(o)&&J3(n[0])){if(a==="customdata"||a==="ids")continue;for(var i=Math.min(n.length,o.length),s=0;s<i;s++)o[s]!==n[s]&&J3(n[s])&&J3(o[s])&&e(o[s],n[s])}else J3(n)&&J3(o)&&(e(o,n),Object.keys(o).length||delete t[a])}};function o5e(e,t){var r=e%t;return r<0?r+t:r}function s5e(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}var Q3={mod:o5e,modHalf:s5e},xW={},Hl={exports:{}};(function(e){(function(t){var r=/^\s+/,a=/\s+$/,n=0,o=t.round,i=t.min,s=t.max,l=t.random;function u(re,se){if(re=re||"",se=se||{},re instanceof u)return re;if(!(this instanceof u))return new u(re,se);var de=f(re);this._originalInput=re,this._r=de.r,this._g=de.g,this._b=de.b,this._a=de.a,this._roundA=o(100*this._a)/100,this._format=se.format||de.format,this._gradientType=se.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=de.ok,this._tc_id=n++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var re=this.toRgb();return(re.r*299+re.g*587+re.b*114)/1e3},getLuminance:function(){var re=this.toRgb(),se,de,Me,Ie,Ee,qe;return se=re.r/255,de=re.g/255,Me=re.b/255,se<=.03928?Ie=se/12.92:Ie=t.pow((se+.055)/1.055,2.4),de<=.03928?Ee=de/12.92:Ee=t.pow((de+.055)/1.055,2.4),Me<=.03928?qe=Me/12.92:qe=t.pow((Me+.055)/1.055,2.4),.2126*Ie+.7152*Ee+.0722*qe},setAlpha:function(re){return this._a=Y(re),this._roundA=o(100*this._a)/100,this},toHsv:function(){var re=p(this._r,this._g,this._b);return{h:re.h*360,s:re.s,v:re.v,a:this._a}},toHsvString:function(){var re=p(this._r,this._g,this._b),se=o(re.h*360),de=o(re.s*100),Me=o(re.v*100);return this._a==1?"hsv("+se+", "+de+"%, "+Me+"%)":"hsva("+se+", "+de+"%, "+Me+"%, "+this._roundA+")"},toHsl:function(){var re=h(this._r,this._g,this._b);return{h:re.h*360,s:re.s,l:re.l,a:this._a}},toHslString:function(){var re=h(this._r,this._g,this._b),se=o(re.h*360),de=o(re.s*100),Me=o(re.l*100);return this._a==1?"hsl("+se+", "+de+"%, "+Me+"%)":"hsla("+se+", "+de+"%, "+Me+"%, "+this._roundA+")"},toHex:function(re){return g(this._r,this._g,this._b,re)},toHexString:function(re){return"#"+this.toHex(re)},toHex8:function(re){return m(this._r,this._g,this._b,this._a,re)},toHex8String:function(re){return"#"+this.toHex8(re)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(X(this._r,255)*100)+"%",g:o(X(this._g,255)*100)+"%",b:o(X(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(X(this._r,255)*100)+"%, "+o(X(this._g,255)*100)+"%, "+o(X(this._b,255)*100)+"%)":"rgba("+o(X(this._r,255)*100)+"%, "+o(X(this._g,255)*100)+"%, "+o(X(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:O[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(re){var se="#"+y(this._r,this._g,this._b,this._a),de=se,Me=this._gradientType?"GradientType = 1, ":"";if(re){var Ie=u(re);de="#"+y(Ie._r,Ie._g,Ie._b,Ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+Me+"startColorstr="+se+",endColorstr="+de+")"},toString:function(re){var se=!!re;re=re||this._format;var de=!1,Me=this._a<1&&this._a>=0,Ie=!se&&Me&&(re==="hex"||re==="hex6"||re==="hex3"||re==="hex4"||re==="hex8"||re==="name");return Ie?re==="name"&&this._a===0?this.toName():this.toRgbString():(re==="rgb"&&(de=this.toRgbString()),re==="prgb"&&(de=this.toPercentageRgbString()),(re==="hex"||re==="hex6")&&(de=this.toHexString()),re==="hex3"&&(de=this.toHexString(!0)),re==="hex4"&&(de=this.toHex8String(!0)),re==="hex8"&&(de=this.toHex8String()),re==="name"&&(de=this.toName()),re==="hsl"&&(de=this.toHslString()),re==="hsv"&&(de=this.toHsvString()),de||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(re,se){var de=re.apply(null,[this].concat([].slice.call(se)));return this._r=de._r,this._g=de._g,this._b=de._b,this.setAlpha(de._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(S,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(re,se){return re.apply(null,[this].concat([].slice.call(se)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(R,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},u.fromRatio=function(re,se){if(typeof re=="object"){var de={};for(var Me in re)re.hasOwnProperty(Me)&&(Me==="a"?de[Me]=re[Me]:de[Me]=ie(re[Me]));re=de}return u(re,se)};function f(re){var se={r:0,g:0,b:0},de=1,Me=null,Ie=null,Ee=null,qe=!1,be=!1;return typeof re=="string"&&(re=Se(re)),typeof re=="object"&&(xe(re.r)&&xe(re.g)&&xe(re.b)?(se=c(re.r,re.g,re.b),qe=!0,be=String(re.r).substr(-1)==="%"?"prgb":"rgb"):xe(re.h)&&xe(re.s)&&xe(re.v)?(Me=ie(re.s),Ie=ie(re.v),se=d(re.h,Me,Ie),qe=!0,be="hsv"):xe(re.h)&&xe(re.s)&&xe(re.l)&&(Me=ie(re.s),Ee=ie(re.l),se=v(re.h,Me,Ee),qe=!0,be="hsl"),re.hasOwnProperty("a")&&(de=re.a)),de=Y(de),{ok:qe,format:re.format||be,r:i(255,s(se.r,0)),g:i(255,s(se.g,0)),b:i(255,s(se.b,0)),a:de}}function c(re,se,de){return{r:X(re,255)*255,g:X(se,255)*255,b:X(de,255)*255}}function h(re,se,de){re=X(re,255),se=X(se,255),de=X(de,255);var Me=s(re,se,de),Ie=i(re,se,de),Ee,qe,be=(Me+Ie)/2;if(Me==Ie)Ee=qe=0;else{var oe=Me-Ie;switch(qe=be>.5?oe/(2-Me-Ie):oe/(Me+Ie),Me){case re:Ee=(se-de)/oe+(se<de?6:0);break;case se:Ee=(de-re)/oe+2;break;case de:Ee=(re-se)/oe+4;break}Ee/=6}return{h:Ee,s:qe,l:be}}function v(re,se,de){var Me,Ie,Ee;re=X(re,360),se=X(se,100),de=X(de,100);function qe(ce,ue,Re){return Re<0&&(Re+=1),Re>1&&(Re-=1),Re<1/6?ce+(ue-ce)*6*Re:Re<1/2?ue:Re<2/3?ce+(ue-ce)*(2/3-Re)*6:ce}if(se===0)Me=Ie=Ee=de;else{var be=de<.5?de*(1+se):de+se-de*se,oe=2*de-be;Me=qe(oe,be,re+1/3),Ie=qe(oe,be,re),Ee=qe(oe,be,re-1/3)}return{r:Me*255,g:Ie*255,b:Ee*255}}function p(re,se,de){re=X(re,255),se=X(se,255),de=X(de,255);var Me=s(re,se,de),Ie=i(re,se,de),Ee,qe,be=Me,oe=Me-Ie;if(qe=Me===0?0:oe/Me,Me==Ie)Ee=0;else{switch(Me){case re:Ee=(se-de)/oe+(se<de?6:0);break;case se:Ee=(de-re)/oe+2;break;case de:Ee=(re-se)/oe+4;break}Ee/=6}return{h:Ee,s:qe,v:be}}function d(re,se,de){re=X(re,360)*6,se=X(se,100),de=X(de,100);var Me=t.floor(re),Ie=re-Me,Ee=de*(1-se),qe=de*(1-Ie*se),be=de*(1-(1-Ie)*se),oe=Me%6,ce=[de,qe,Ee,Ee,be,de][oe],ue=[be,de,de,qe,Ee,Ee][oe],Re=[Ee,Ee,be,de,de,qe][oe];return{r:ce*255,g:ue*255,b:Re*255}}function g(re,se,de,Me){var Ie=[ae(o(re).toString(16)),ae(o(se).toString(16)),ae(o(de).toString(16))];return Me&&Ie[0].charAt(0)==Ie[0].charAt(1)&&Ie[1].charAt(0)==Ie[1].charAt(1)&&Ie[2].charAt(0)==Ie[2].charAt(1)?Ie[0].charAt(0)+Ie[1].charAt(0)+Ie[2].charAt(0):Ie.join("")}function m(re,se,de,Me,Ie){var Ee=[ae(o(re).toString(16)),ae(o(se).toString(16)),ae(o(de).toString(16)),ae(we(Me))];return Ie&&Ee[0].charAt(0)==Ee[0].charAt(1)&&Ee[1].charAt(0)==Ee[1].charAt(1)&&Ee[2].charAt(0)==Ee[2].charAt(1)&&Ee[3].charAt(0)==Ee[3].charAt(1)?Ee[0].charAt(0)+Ee[1].charAt(0)+Ee[2].charAt(0)+Ee[3].charAt(0):Ee.join("")}function y(re,se,de,Me){var Ie=[ae(we(Me)),ae(o(re).toString(16)),ae(o(se).toString(16)),ae(o(de).toString(16))];return Ie.join("")}u.equals=function(re,se){return!re||!se?!1:u(re).toRgbString()==u(se).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function _(re,se){se=se===0?0:se||10;var de=u(re).toHsl();return de.s-=se/100,de.s=ee(de.s),u(de)}function S(re,se){se=se===0?0:se||10;var de=u(re).toHsl();return de.s+=se/100,de.s=ee(de.s),u(de)}function M(re){return u(re).desaturate(100)}function w(re,se){se=se===0?0:se||10;var de=u(re).toHsl();return de.l+=se/100,de.l=ee(de.l),u(de)}function A(re,se){se=se===0?0:se||10;var de=u(re).toRgb();return de.r=s(0,i(255,de.r-o(255*-(se/100)))),de.g=s(0,i(255,de.g-o(255*-(se/100)))),de.b=s(0,i(255,de.b-o(255*-(se/100)))),u(de)}function k(re,se){se=se===0?0:se||10;var de=u(re).toHsl();return de.l-=se/100,de.l=ee(de.l),u(de)}function T(re,se){var de=u(re).toHsl(),Me=(de.h+se)%360;return de.h=Me<0?360+Me:Me,u(de)}function L(re){var se=u(re).toHsl();return se.h=(se.h+180)%360,u(se)}function C(re){var se=u(re).toHsl(),de=se.h;return[u(re),u({h:(de+120)%360,s:se.s,l:se.l}),u({h:(de+240)%360,s:se.s,l:se.l})]}function I(re){var se=u(re).toHsl(),de=se.h;return[u(re),u({h:(de+90)%360,s:se.s,l:se.l}),u({h:(de+180)%360,s:se.s,l:se.l}),u({h:(de+270)%360,s:se.s,l:se.l})]}function R(re){var se=u(re).toHsl(),de=se.h;return[u(re),u({h:(de+72)%360,s:se.s,l:se.l}),u({h:(de+216)%360,s:se.s,l:se.l})]}function B(re,se,de){se=se||6,de=de||30;var Me=u(re).toHsl(),Ie=360/de,Ee=[u(re)];for(Me.h=(Me.h-(Ie*se>>1)+720)%360;--se;)Me.h=(Me.h+Ie)%360,Ee.push(u(Me));return Ee}function N(re,se){se=se||6;for(var de=u(re).toHsv(),Me=de.h,Ie=de.s,Ee=de.v,qe=[],be=1/se;se--;)qe.push(u({h:Me,s:Ie,v:Ee})),Ee=(Ee+be)%1;return qe}u.mix=function(re,se,de){de=de===0?0:de||50;var Me=u(re).toRgb(),Ie=u(se).toRgb(),Ee=de/100,qe={r:(Ie.r-Me.r)*Ee+Me.r,g:(Ie.g-Me.g)*Ee+Me.g,b:(Ie.b-Me.b)*Ee+Me.b,a:(Ie.a-Me.a)*Ee+Me.a};return u(qe)},u.readability=function(re,se){var de=u(re),Me=u(se);return(t.max(de.getLuminance(),Me.getLuminance())+.05)/(t.min(de.getLuminance(),Me.getLuminance())+.05)},u.isReadable=function(re,se,de){var Me=u.readability(re,se),Ie,Ee;switch(Ee=!1,Ie=ye(de),Ie.level+Ie.size){case"AAsmall":case"AAAlarge":Ee=Me>=4.5;break;case"AAlarge":Ee=Me>=3;break;case"AAAsmall":Ee=Me>=7;break}return Ee},u.mostReadable=function(re,se,de){var Me=null,Ie=0,Ee,qe,be,oe;de=de||{},qe=de.includeFallbackColors,be=de.level,oe=de.size;for(var ce=0;ce<se.length;ce++)Ee=u.readability(re,se[ce]),Ee>Ie&&(Ie=Ee,Me=u(se[ce]));return u.isReadable(re,Me,{level:be,size:oe})||!qe?Me:(de.includeFallbackColors=!1,u.mostReadable(re,["#fff","#000"],de))};var D=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=u.hexNames=$(D);function $(re){var se={};for(var de in re)re.hasOwnProperty(de)&&(se[re[de]]=de);return se}function Y(re){return re=parseFloat(re),(isNaN(re)||re<0||re>1)&&(re=1),re}function X(re,se){Z(re)&&(re="100%");var de=q(re);return re=i(se,s(0,parseFloat(re))),de&&(re=parseInt(re*se,10)/100),t.abs(re-se)<1e-6?1:re%se/parseFloat(se)}function ee(re){return i(1,s(0,re))}function Q(re){return parseInt(re,16)}function Z(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1}function q(re){return typeof re=="string"&&re.indexOf("%")!=-1}function ae(re){return re.length==1?"0"+re:""+re}function ie(re){return re<=1&&(re=re*100+"%"),re}function we(re){return t.round(parseFloat(re)*255).toString(16)}function Te(re){return Q(re)/255}var he=function(){var re="[-\\+]?\\d+%?",se="[-\\+]?\\d*\\.\\d+%?",de="(?:"+se+")|(?:"+re+")",Me="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?",Ie="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?";return{CSS_UNIT:new RegExp(de),rgb:new RegExp("rgb"+Me),rgba:new RegExp("rgba"+Ie),hsl:new RegExp("hsl"+Me),hsla:new RegExp("hsla"+Ie),hsv:new RegExp("hsv"+Me),hsva:new RegExp("hsva"+Ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function xe(re){return!!he.CSS_UNIT.exec(re)}function Se(re){re=re.replace(r,"").replace(a,"").toLowerCase();var se=!1;if(D[re])re=D[re],se=!0;else if(re=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var de;return(de=he.rgb.exec(re))?{r:de[1],g:de[2],b:de[3]}:(de=he.rgba.exec(re))?{r:de[1],g:de[2],b:de[3],a:de[4]}:(de=he.hsl.exec(re))?{h:de[1],s:de[2],l:de[3]}:(de=he.hsla.exec(re))?{h:de[1],s:de[2],l:de[3],a:de[4]}:(de=he.hsv.exec(re))?{h:de[1],s:de[2],v:de[3]}:(de=he.hsva.exec(re))?{h:de[1],s:de[2],v:de[3],a:de[4]}:(de=he.hex8.exec(re))?{r:Q(de[1]),g:Q(de[2]),b:Q(de[3]),a:Te(de[4]),format:se?"name":"hex8"}:(de=he.hex6.exec(re))?{r:Q(de[1]),g:Q(de[2]),b:Q(de[3]),format:se?"name":"hex"}:(de=he.hex4.exec(re))?{r:Q(de[1]+""+de[1]),g:Q(de[2]+""+de[2]),b:Q(de[3]+""+de[3]),a:Te(de[4]+""+de[4]),format:se?"name":"hex8"}:(de=he.hex3.exec(re))?{r:Q(de[1]+""+de[1]),g:Q(de[2]+""+de[2]),b:Q(de[3]+""+de[3]),format:se?"name":"hex"}:!1}function ye(re){var se,de;return re=re||{level:"AA",size:"small"},se=(re.level||"AA").toUpperCase(),de=(re.size||"small").toLowerCase(),se!=="AA"&&se!=="AAA"&&(se="AA"),de!=="small"&&de!=="large"&&(de="small"),{level:se,size:de}}e.exports?e.exports=u:window.tinycolor=u})(Math)})(Hl);var Ts=function(e){var t=e.editType,r=e.colorEditType;r===void 0&&(r=t);var a={family:{valType:"string",noBlank:!0,strict:!0,editType:t,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t,description:""+(e.description||"")+""};return e.autoSize&&(a.size.dflt="auto"),e.autoColor&&(a.color.dflt="auto"),e.arrayOk&&(a.family.arrayOk=!0,a.size.arrayOk=!0,a.color.arrayOk=!0),a},d5={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},bW=d5,_W=Ts,SR=_W({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});SR.family.dflt=bW.HOVERFONT;SR.size.dflt=bW.HOVERFONTSIZE;var ay={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:SR,grouptitlefont:_W({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},cn={},wW=A_,eT=Array.isArray;function l5e(e,t){var r,a;for(r=0;r<e.length;r++){if(a=e[r],a!==null&&typeof a=="object")return!1;a!==void 0&&(t[r]=a)}return!0}cn.extendFlat=function(){return tT(arguments,!1,!1,!1)};cn.extendDeep=function(){return tT(arguments,!0,!1,!1)};cn.extendDeepAll=function(){return tT(arguments,!0,!0,!1)};cn.extendDeepNoArrays=function(){return tT(arguments,!0,!1,!0)};function tT(e,t,r,a){var n=e[0],o=e.length,i,s,l,u,f,c,h;if(o===2&&eT(n)&&eT(e[1])&&n.length===0){if(h=l5e(e[1],n),h)return n;n.splice(0,n.length)}for(var v=1;v<o;v++){i=e[v];for(s in i)l=n[s],u=i[s],a&&eT(u)?n[s]=u:t&&u&&(wW(u)||(f=eT(u)))?(f?(f=!1,c=l&&eT(l)?l:[]):c=l&&wW(l)?l:{},n[s]=tT([c,u],t,r,a)):(typeof u!="undefined"||r)&&(n[s]=u)}return n}var u5e=Ts,p5=ay.hoverlabel,g5=cn.extendFlat,rT={hoverlabel:{bgcolor:g5({},p5.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:g5({},p5.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:u5e({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:g5({},p5.align,{arrayOk:!0}),namelength:g5({},p5.namelength,{arrayOk:!0}),editType:"none"}},f5e=Ts,c5e=rT,ao={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:f5e({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with `*reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:c5e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},h5e=Hl.exports,m5={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},TW=m5.RdBu;function v5e(e,t){if(t||(t=TW),!e)return t;function r(){try{e=m5[e]||JSON.parse(e)}catch{e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),AW(e)?e:t}function AW(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(a.length!==2||+a[0]<t||!h5e(a[1]).isValid())return!1;t=+a[0]}return!0}function d5e(e){return m5[e]!==void 0?!0:AW(e)}var S_={scales:m5,defaultScale:TW,get:v5e,isValid:d5e},Oa={exports:{}},us={};us.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];us.defaultLine="#444";us.lightLine="#eee";us.background="#fff";us.borderLine="#BEC8D9";us.lightFraction=100*(14-4)/(15-4);var Nd=Hl.exports,p5e=gn,g5e=nh.isTypedArray,iu=Oa.exports={},y5=us;iu.defaults=y5.defaults;var m5e=iu.defaultLine=y5.defaultLine;iu.lightLine=y5.lightLine;var MR=iu.background=y5.background;iu.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};iu.rgb=function(e){return iu.tinyRGB(Nd(e))};iu.opacity=function(e){return e?Nd(e).getAlpha():0};iu.addOpacity=function(e,t){var r=Nd(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};iu.combine=function(e,t){var r=Nd(e).toRgb();if(r.a===1)return Nd(e).toRgbString();var a=Nd(t||MR).toRgb(),n=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},o={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return Nd(o).toRgbString()};iu.contrast=function(e,t,r){var a=Nd(e);a.getAlpha()!==1&&(a=Nd(iu.combine(e,MR)));var n=a.isDark()?t?a.lighten(t):MR:r?a.darken(r):m5e;return n.toString()};iu.stroke=function(e,t){var r=Nd(t);e.style({stroke:iu.tinyRGB(r),"stroke-opacity":r.getAlpha()})};iu.fill=function(e,t){var r=Nd(t);e.style({fill:iu.tinyRGB(r),"fill-opacity":r.getAlpha()})};iu.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,a,n,o;for(r=0;r<t.length;r++)if(n=t[r],o=e[n],n.substr(n.length-5)==="color")if(Array.isArray(o))for(a=0;a<o.length;a++)o[a]=kR(o[a]);else e[n]=kR(o);else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(o))for(a=0;a<o.length;a++)Array.isArray(o[a])&&(o[a][1]=kR(o[a][1]));else if(Array.isArray(o)){var i=o[0];if(!Array.isArray(i)&&i&&typeof i=="object")for(a=0;a<o.length;a++)iu.clean(o[a])}else o&&typeof o=="object"&&!g5e(o)&&iu.clean(o)}};function kR(e){if(p5e(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var a=r[1].trim().split(/\s*[\s,]\s*/),n=t.charAt(3)==="a"&&a.length===4;if(!n&&a.length!==3)return e;for(var o=0;o<a.length;o++){if(!a[o].length||(a[o]=Number(a[o]),!(a[o]>=0)))return e;if(o===3)a[o]>1&&(a[o]=1);else if(a[o]>=1)return e}var i=Math.round(a[0]*255)+", "+Math.round(a[1]*255)+", "+Math.round(a[2]*255);return n?"rgba("+i+", "+a[3]+")":"rgb("+i+")"}var sx={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},M_={};M_.counter=function(e,t,r,a){var n=(t||"")+(r?"":"$"),o=a===!1?"":"^";return e==="xy"?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(o+e+"([2-9]|[1-9][0-9]+)?"+n)};(function(e){var t=gn,r=Hl.exports,a=ao,n=S_,o=Oa.exports,i=sx.DESELECTDIM,s=h5,l=M_.counter,u=Q3.modHalf,f=nh.isArrayOrTypedArray;e.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(h,v,p){f(h)?v.set(h):p!==void 0&&v.set(p)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(h,v,p,d){d.coerceNumber&&(h=+h),d.values.indexOf(h)===-1?v.set(p):v.set(h)},validateFunction:function(h,v){v.coerceNumber&&(h=+h);for(var p=v.values,d=0;d<p.length;d++){var g=String(p[d]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){var m=new RegExp(g.substr(1,g.length-2));if(m.test(h))return!0}else if(h===p[d])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(h,v,p){h===!0||h===!1?v.set(h):v.set(p)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(h,v,p,d){!t(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?v.set(p):v.set(+h)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(h,v,p,d){h%1||!t(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?v.set(p):v.set(+h)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(h,v,p,d){if(typeof h!="string"){var g=typeof h=="number";d.strict===!0||!g?v.set(p):v.set(String(h))}else d.noBlank&&!h?v.set(p):v.set(h)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(h,v,p){r(h).isValid()?v.set(h):v.set(p)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(h,v,p){function d(g){return r(g).isValid()}!Array.isArray(h)||!h.length?v.set(p):h.every(d)?v.set(h):v.set(p)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(n.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(h,v,p){v.set(n.get(h,p))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(h,v,p){h==="auto"?v.set("auto"):t(h)?v.set(u(+h,360)):v.set(p)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(h,v,p,d){var g=d.regex||l(p);if(typeof h=="string"&&g.test(h)){v.set(h);return}v.set(p)},validateFunction:function(h,v){var p=v.dflt;return h===p?!0:typeof h!="string"?!1:!!l(p).test(h)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(h,v,p,d){if(typeof h!="string"){v.set(p);return}if((d.extras||[]).indexOf(h)!==-1){v.set(h);return}for(var g=h.split("+"),m=0;m<g.length;){var y=g[m];d.flags.indexOf(y)===-1||g.indexOf(y)<m?g.splice(m,1):m++}g.length?v.set(g.join("+")):v.set(p)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(h,v,p){h===void 0?v.set(p):v.set(h)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(h,v,p,d){function g(B,N,D){var O,$={set:function(Y){O=Y}};return D===void 0&&(D=N.dflt),e.valObjectMeta[N.valType].coerceFunction(B,$,D,N),O}var m=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(h)&&Array.isArray(h[0]);if(!Array.isArray(h)){v.set(p);return}var y=d.items,_=[],S=Array.isArray(y),M=S&&m&&Array.isArray(y[0]),w=m&&S&&!M,A=S&&!w?y.length:h.length,k,T,L,C,I,R;if(p=Array.isArray(p)?p:[],m)for(k=0;k<A;k++)for(_[k]=[],L=Array.isArray(h[k])?h[k]:[],w?I=y.length:S?I=y[k].length:I=L.length,T=0;T<I;T++)w?C=y[T]:S?C=y[k][T]:C=y,R=g(L[T],C,(p[k]||[])[T]),R!==void 0&&(_[k][T]=R);else for(k=0;k<A;k++)R=g(h[k],S?y[k]:y,p[k]),R!==void 0&&(_[k]=R);v.set(_)},validateFunction:function(h,v){if(!Array.isArray(h))return!1;var p=v.items,d=Array.isArray(p),g=v.dimensions===2;if(!v.freeLength&&h.length!==p.length)return!1;for(var m=0;m<h.length;m++)if(g){if(!Array.isArray(h[m])||!v.freeLength&&h[m].length!==p[m].length)return!1;for(var y=0;y<h[m].length;y++)if(!c(h[m][y],d?p[m][y]:p))return!1}else if(!c(h[m],d?p[m]:p))return!1;return!0}}},e.coerce=function(h,v,p,d,g){var m=s(p,d).get(),y=s(h,d),_=s(v,d),S=y.get(),M=v._template;if(S===void 0&&M&&(S=s(M,d).get(),M=0),g===void 0&&(g=m.dflt),m.arrayOk&&f(S))return _.set(S),S;var w=e.valObjectMeta[m.valType].coerceFunction;w(S,_,g,m);var A=_.get();return M&&A===g&&!c(S,m)&&(S=s(M,d).get(),w(S,_,g,m),A=_.get()),A},e.coerce2=function(h,v,p,d,g){var m=s(h,d),y=e.coerce(h,v,p,d,g),_=m.get();return _!=null?y:!1},e.coerceFont=function(h,v,p){var d={};return p=p||{},d.family=h(v+".family",p.family),d.size=h(v+".size",p.size),d.color=h(v+".color",p.color),d},e.coercePattern=function(h,v,p,d){var g=h(v+".shape");if(g){h(v+".solidity"),h(v+".size");var m=h(v+".fillmode"),y=m==="overlay";if(!d){var _=h(v+".bgcolor",y?p:void 0);h(v+".fgcolor",y?o.contrast(_):p)}h(v+".fgopacity",y?.5:1)}},e.coerceHoverinfo=function(h,v,p){var d=v._module.attributes,g=d.hoverinfo?d:a,m=g.hoverinfo,y;if(p._dataLength===1){var _=m.dflt==="all"?m.flags.slice():m.dflt.split("+");_.splice(_.indexOf("name"),1),y=_.join("+")}return e.coerce(h,v,g,"hoverinfo",y)},e.coerceSelectionMarkerOpacity=function(h,v){if(!!h.marker){var p=h.marker.opacity;if(p!==void 0){var d,g;!f(p)&&!h.selected&&!h.unselected&&(d=p,g=i*p),v("selected.marker.opacity",d),v("unselected.marker.opacity",g)}}};function c(h,v){var p=e.valObjectMeta[v.valType];if(v.arrayOk&&f(h))return!0;if(p.validateFunction)return p.validateFunction(h,v);var d={},g=d,m={set:function(y){g=y}};return p.coerceFunction(h,m,d,v),g!==d}e.validate=c})(xW);var SW={},ny={exports:{}},MW={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},kW={};function EW(e,t){for(var r in e){var a=e[r];a.valType?t[r]=a.dflt:(t[r]||(t[r]={}),EW(a,t[r]))}}EW(MW,kW);var k_={configAttributes:MW,dfltConfig:kW},ER=Ra.exports,y5e=gn,aT=[],CW=function(e,t){if(aT.indexOf(e)!==-1)return;aT.push(e);var r=1e3;y5e(t)?r=t:t==="long"&&(r=3e3);var a=ER.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var n=a.selectAll(".notifier-note").data(aT);function o(i){i.duration(700).style("opacity",0).each("end",function(s){var l=aT.indexOf(s);l!==-1&&aT.splice(l,1),ER.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var s=ER.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(o)});for(var l=s.append("p"),u=i.split(/<br\s*\/?>/g),f=0;f<u.length;f++)f&&l.append("br"),l.append("span").text(u[f]);t==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(r).call(o)})},E_=k_.dfltConfig,CR=CW,LR=ny.exports={};LR.log=function(){var e;if(E_.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(E_.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);CR(r.join("<br>"),"long")}};LR.warn=function(){var e;if(E_.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(E_.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);CR(r.join("<br>"),"stick")}};LR.error=function(){var e;if(E_.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(E_.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);CR(r.join("<br>"),"stick")}};var Pa={},PR=function(){},LW=function(t,r){if(r instanceof RegExp){for(var a=r.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===a)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t},x5={},x5e=b5e;function b5e(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var _5e=w5e;function w5e(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var T5e=A5e;function A5e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var PW=S5e;function S5e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var M5e=k5e;function k5e(e,t){if(e===t){var r=t[1],a=t[2],n=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=o,e[11]=t[14],e[12]=n,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}var E5e=C5e;function C5e(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],p=t[12],d=t[13],g=t[14],m=t[15],y=r*s-a*i,_=r*l-n*i,S=r*u-o*i,M=a*l-n*s,w=a*u-o*s,A=n*u-o*l,k=f*d-c*p,T=f*g-h*p,L=f*m-v*p,C=c*g-h*d,I=c*m-v*d,R=h*m-v*g,B=y*R-_*I+S*C+M*L-w*T+A*k;return B?(B=1/B,e[0]=(s*R-l*I+u*C)*B,e[1]=(n*I-a*R-o*C)*B,e[2]=(d*A-g*w+m*M)*B,e[3]=(h*w-c*A-v*M)*B,e[4]=(l*L-i*R-u*T)*B,e[5]=(r*R-n*L+o*T)*B,e[6]=(g*S-p*A-m*_)*B,e[7]=(f*A-h*S+v*_)*B,e[8]=(i*I-s*L+u*k)*B,e[9]=(a*L-r*I-o*k)*B,e[10]=(p*w-d*S+m*y)*B,e[11]=(c*S-f*w-v*y)*B,e[12]=(s*T-i*C-l*k)*B,e[13]=(r*C-a*T+n*k)*B,e[14]=(d*_-p*M-g*y)*B,e[15]=(f*M-c*_+h*y)*B,e):null}var L5e=P5e;function P5e(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],p=t[12],d=t[13],g=t[14],m=t[15];return e[0]=s*(h*m-v*g)-c*(l*m-u*g)+d*(l*v-u*h),e[1]=-(a*(h*m-v*g)-c*(n*m-o*g)+d*(n*v-o*h)),e[2]=a*(l*m-u*g)-s*(n*m-o*g)+d*(n*u-o*l),e[3]=-(a*(l*v-u*h)-s*(n*v-o*h)+c*(n*u-o*l)),e[4]=-(i*(h*m-v*g)-f*(l*m-u*g)+p*(l*v-u*h)),e[5]=r*(h*m-v*g)-f*(n*m-o*g)+p*(n*v-o*h),e[6]=-(r*(l*m-u*g)-i*(n*m-o*g)+p*(n*u-o*l)),e[7]=r*(l*v-u*h)-i*(n*v-o*h)+f*(n*u-o*l),e[8]=i*(c*m-v*d)-f*(s*m-u*d)+p*(s*v-u*c),e[9]=-(r*(c*m-v*d)-f*(a*m-o*d)+p*(a*v-o*c)),e[10]=r*(s*m-u*d)-i*(a*m-o*d)+p*(a*u-o*s),e[11]=-(r*(s*v-u*c)-i*(a*v-o*c)+f*(a*u-o*s)),e[12]=-(i*(c*g-h*d)-f*(s*g-l*d)+p*(s*h-l*c)),e[13]=r*(c*g-h*d)-f*(a*g-n*d)+p*(a*h-n*c),e[14]=-(r*(s*g-l*d)-i*(a*g-n*d)+p*(a*l-n*s)),e[15]=r*(s*h-l*c)-i*(a*h-n*c)+f*(a*l-n*s),e}var I5e=D5e;function D5e(e){var t=e[0],r=e[1],a=e[2],n=e[3],o=e[4],i=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],h=e[11],v=e[12],p=e[13],d=e[14],g=e[15],m=t*i-r*o,y=t*s-a*o,_=t*l-n*o,S=r*s-a*i,M=r*l-n*i,w=a*l-n*s,A=u*p-f*v,k=u*d-c*v,T=u*g-h*v,L=f*d-c*p,C=f*g-h*p,I=c*g-h*d;return m*I-y*C+_*L+S*T-M*k+w*A}var R5e=z5e;function z5e(e,t,r){var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],h=t[9],v=t[10],p=t[11],d=t[12],g=t[13],m=t[14],y=t[15],_=r[0],S=r[1],M=r[2],w=r[3];return e[0]=_*a+S*s+M*c+w*d,e[1]=_*n+S*l+M*h+w*g,e[2]=_*o+S*u+M*v+w*m,e[3]=_*i+S*f+M*p+w*y,_=r[4],S=r[5],M=r[6],w=r[7],e[4]=_*a+S*s+M*c+w*d,e[5]=_*n+S*l+M*h+w*g,e[6]=_*o+S*u+M*v+w*m,e[7]=_*i+S*f+M*p+w*y,_=r[8],S=r[9],M=r[10],w=r[11],e[8]=_*a+S*s+M*c+w*d,e[9]=_*n+S*l+M*h+w*g,e[10]=_*o+S*u+M*v+w*m,e[11]=_*i+S*f+M*p+w*y,_=r[12],S=r[13],M=r[14],w=r[15],e[12]=_*a+S*s+M*c+w*d,e[13]=_*n+S*l+M*h+w*g,e[14]=_*o+S*u+M*v+w*m,e[15]=_*i+S*f+M*p+w*y,e}var F5e=O5e;function O5e(e,t,r){var a=r[0],n=r[1],o=r[2],i,s,l,u,f,c,h,v,p,d,g,m;return t===e?(e[12]=t[0]*a+t[4]*n+t[8]*o+t[12],e[13]=t[1]*a+t[5]*n+t[9]*o+t[13],e[14]=t[2]*a+t[6]*n+t[10]*o+t[14],e[15]=t[3]*a+t[7]*n+t[11]*o+t[15]):(i=t[0],s=t[1],l=t[2],u=t[3],f=t[4],c=t[5],h=t[6],v=t[7],p=t[8],d=t[9],g=t[10],m=t[11],e[0]=i,e[1]=s,e[2]=l,e[3]=u,e[4]=f,e[5]=c,e[6]=h,e[7]=v,e[8]=p,e[9]=d,e[10]=g,e[11]=m,e[12]=i*a+f*n+p*o+t[12],e[13]=s*a+c*n+d*o+t[13],e[14]=l*a+h*n+g*o+t[14],e[15]=u*a+v*n+m*o+t[15]),e}var N5e=B5e;function B5e(e,t,r){var a=r[0],n=r[1],o=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var $5e=U5e;function U5e(e,t,r,a){var n=a[0],o=a[1],i=a[2],s=Math.sqrt(n*n+o*o+i*i),l,u,f,c,h,v,p,d,g,m,y,_,S,M,w,A,k,T,L,C,I,R,B,N;return Math.abs(s)<1e-6?null:(s=1/s,n*=s,o*=s,i*=s,l=Math.sin(r),u=Math.cos(r),f=1-u,c=t[0],h=t[1],v=t[2],p=t[3],d=t[4],g=t[5],m=t[6],y=t[7],_=t[8],S=t[9],M=t[10],w=t[11],A=n*n*f+u,k=o*n*f+i*l,T=i*n*f-o*l,L=n*o*f-i*l,C=o*o*f+u,I=i*o*f+n*l,R=n*i*f+o*l,B=o*i*f-n*l,N=i*i*f+u,e[0]=c*A+d*k+_*T,e[1]=h*A+g*k+S*T,e[2]=v*A+m*k+M*T,e[3]=p*A+y*k+w*T,e[4]=c*L+d*C+_*I,e[5]=h*L+g*C+S*I,e[6]=v*L+m*C+M*I,e[7]=p*L+y*C+w*I,e[8]=c*R+d*B+_*N,e[9]=h*R+g*B+S*N,e[10]=v*R+m*B+M*N,e[11]=p*R+y*B+w*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}var H5e=G5e;function G5e(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[4],i=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*a,e[5]=i*n+f*a,e[6]=s*n+c*a,e[7]=l*n+h*a,e[8]=u*n-o*a,e[9]=f*n-i*a,e[10]=c*n-s*a,e[11]=h*n-l*a,e}var V5e=j5e;function j5e(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[0],i=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-u*a,e[1]=i*n-f*a,e[2]=s*n-c*a,e[3]=l*n-h*a,e[8]=o*a+u*n,e[9]=i*a+f*n,e[10]=s*a+c*n,e[11]=l*a+h*n,e}var q5e=Y5e;function Y5e(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[0],i=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*a,e[1]=i*n+f*a,e[2]=s*n+c*a,e[3]=l*n+h*a,e[4]=u*n-o*a,e[5]=f*n-i*a,e[6]=c*n-s*a,e[7]=h*n-l*a,e}var W5e=X5e;function X5e(e,t,r){var a,n,o,i=r[0],s=r[1],l=r[2],u=Math.sqrt(i*i+s*s+l*l);return Math.abs(u)<1e-6?null:(u=1/u,i*=u,s*=u,l*=u,a=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=i*i*o+n,e[1]=s*i*o+l*a,e[2]=l*i*o-s*a,e[3]=0,e[4]=i*s*o-l*a,e[5]=s*s*o+n,e[6]=l*s*o+i*a,e[7]=0,e[8]=i*l*o+s*a,e[9]=s*l*o-i*a,e[10]=l*l*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}var Z5e=K5e;function K5e(e,t,r){var a=t[0],n=t[1],o=t[2],i=t[3],s=a+a,l=n+n,u=o+o,f=a*s,c=a*l,h=a*u,v=n*l,p=n*u,d=o*u,g=i*s,m=i*l,y=i*u;return e[0]=1-(v+d),e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-(f+d),e[6]=p+g,e[7]=0,e[8]=h+m,e[9]=p-g,e[10]=1-(f+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}var J5e=Q5e;function Q5e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var eEe=tEe;function tEe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}var rEe=aEe;function aEe(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var nEe=iEe;function iEe(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var oEe=sEe;function sEe(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var IW=lEe;function lEe(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=r+r,s=a+a,l=n+n,u=r*i,f=a*i,c=a*s,h=n*i,v=n*s,p=n*l,d=o*i,g=o*s,m=o*l;return e[0]=1-c-p,e[1]=f+m,e[2]=h-g,e[3]=0,e[4]=f-m,e[5]=1-u-p,e[6]=v+d,e[7]=0,e[8]=h+g,e[9]=v-d,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var uEe=fEe;function fEe(e,t,r,a,n,o,i){var s=1/(r-t),l=1/(n-a),u=1/(o-i);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+a)*l,e[10]=(i+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*u,e[15]=0,e}var cEe=hEe;function hEe(e,t,r,a,n){var o=1/Math.tan(t/2),i=1/(a-n);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+a)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*a*i,e[15]=0,e}var vEe=dEe;function dEe(e,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+s),u=2/(n+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((i-s)*l*.5),e[9]=(n-o)*u*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e}var pEe=gEe;function gEe(e,t,r,a,n,o,i){var s=1/(t-r),l=1/(a-n),u=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+a)*l,e[14]=(i+o)*u,e[15]=1,e}var mEe=PW,yEe=xEe;function xEe(e,t,r,a){var n,o,i,s,l,u,f,c,h,v,p=t[0],d=t[1],g=t[2],m=a[0],y=a[1],_=a[2],S=r[0],M=r[1],w=r[2];return Math.abs(p-S)<1e-6&&Math.abs(d-M)<1e-6&&Math.abs(g-w)<1e-6?mEe(e):(f=p-S,c=d-M,h=g-w,v=1/Math.sqrt(f*f+c*c+h*h),f*=v,c*=v,h*=v,n=y*h-_*c,o=_*f-m*h,i=m*c-y*f,v=Math.sqrt(n*n+o*o+i*i),v?(v=1/v,n*=v,o*=v,i*=v):(n=0,o=0,i=0),s=c*i-h*o,l=h*n-f*i,u=f*o-c*n,v=Math.sqrt(s*s+l*l+u*u),v?(v=1/v,s*=v,l*=v,u*=v):(s=0,l=0,u=0),e[0]=n,e[1]=s,e[2]=f,e[3]=0,e[4]=o,e[5]=l,e[6]=c,e[7]=0,e[8]=i,e[9]=u,e[10]=h,e[11]=0,e[12]=-(n*p+o*d+i*g),e[13]=-(s*p+l*d+u*g),e[14]=-(f*p+c*d+h*g),e[15]=1,e)}var bEe=_Ee;function _Ee(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}var DW={create:x5e,clone:_5e,copy:T5e,identity:PW,transpose:M5e,invert:E5e,adjoint:L5e,determinant:I5e,multiply:R5e,translate:F5e,scale:N5e,rotate:$5e,rotateX:H5e,rotateY:V5e,rotateZ:q5e,fromRotation:W5e,fromRotationTranslation:Z5e,fromScaling:J5e,fromTranslation:eEe,fromXRotation:rEe,fromYRotation:nEe,fromZRotation:oEe,fromQuat:IW,frustum:uEe,perspective:cEe,perspectiveFromFieldOfView:vEe,ortho:pEe,lookAt:yEe,str:bEe};(function(e){var t=DW;e.init2dArray=function(r,a){for(var n=new Array(r),o=0;o<r;o++)n[o]=new Array(a);return n},e.transposeRagged=function(r){var a=0,n=r.length,o,i;for(o=0;o<n;o++)a=Math.max(a,r[o].length);var s=new Array(a);for(o=0;o<a;o++)for(s[o]=new Array(n),i=0;i<n;i++)s[o][i]=r[i][o];return s},e.dot=function(r,a){if(!(r.length&&a.length)||r.length!==a.length)return null;var n=r.length,o,i;if(r[0].length)for(o=new Array(n),i=0;i<n;i++)o[i]=e.dot(r[i],a);else if(a[0].length){var s=e.transposeRagged(a);for(o=new Array(s.length),i=0;i<s.length;i++)o[i]=e.dot(r,s[i])}else for(o=0,i=0;i<n;i++)o+=r[i]*a[i];return o},e.translationMatrix=function(r,a){return[[1,0,r],[0,1,a],[0,0,1]]},e.rotationMatrix=function(r){var a=r*Math.PI/180;return[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]]},e.rotationXYMatrix=function(r,a,n){return e.dot(e.dot(e.translationMatrix(a,n),e.rotationMatrix(r)),e.translationMatrix(-a,-n))},e.apply3DTransform=function(r){return function(){var a=arguments,n=arguments.length===1?a[0]:[a[0],a[1],a[2]||0];return e.dot(r,[n[0],n[1],n[2],1]).slice(0,3)}},e.apply2DTransform=function(r){return function(){var a=arguments;a.length===3&&(a=a[0]);var n=arguments.length===1?a[0]:[a[0],a[1]];return e.dot(r,[n[0],n[1],1]).slice(0,2)}},e.apply2DTransform2=function(r){var a=e.apply2DTransform(r);return function(n){return a(n.slice(0,2)).concat(a(n.slice(2,4)))}},e.convertCssMatrix=function(r){if(r){var a=r.length;if(a===16)return r;if(a===6)return[r[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.inverseTransformMatrix=function(r){var a=[];return t.invert(a,r),[[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]]}})(x5);var wEe=Ra.exports,TEe=ny.exports,AEe=x5,SEe=DW;function MEe(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function kEe(e){var t=wEe.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function RW(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function EEe(e,t){zW("global",e,t)}function zW(e,t,r){var a="plotly.js-style-"+e,n=document.getElementById(a);n||(n=document.createElement("style"),n.setAttribute("id",a),n.appendChild(document.createTextNode("")),document.head.appendChild(n));var o=n.sheet;o.insertRule?o.insertRule(t+"{"+r+"}",0):o.addRule?o.addRule(t,r,0):TEe.warn("addStyleRule failed")}function CEe(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&RW(r)}function LEe(e){var t=OW(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(a){var n=FW(a);if(n){var o=AEe.convertCssMatrix(n);r=SEe.multiply(r,r,o)}}),r}function FW(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(a){return+a})}function OW(e){for(var t=[];PEe(e);)t.push(e),e=e.parentNode;return t}function PEe(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function IEe(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}var IR={getGraphDiv:MEe,isPlotDiv:kEe,removeElement:RW,addStyleRule:EEe,addRelatedStyleRule:zW,deleteRelatedStyleRule:CEe,getFullTransformMatrix:LEe,getElementTransformMatrix:FW,getElementAndAncestors:OW,equalDomRects:IEe},b5={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},Bd={};Bd.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")};Bd.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var DEe=Bd.dash,REe=cn.extendFlat,zEe={newshape:{line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,editType:"none",description:"Sets the line width (in px)."},dash:REe({},DEe,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none",description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active shape."},editType:"none"}},DR=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the left side of the component."},editType:t}},RR=Ts,FEe=b5,_5=us,NW=zEe,OEe=DR,BW=cn.extendFlat,w5=RR({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});w5.family.dflt='"Open Sans", verdana, arial, sans-serif';w5.size.dflt=12;w5.color.dflt=_5.defaultLine;var C_={font:w5,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:RR({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:BW(OEe({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:_5.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:_5.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:_5.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:NW.newshape,activeshape:NW.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:BW({},FEe.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:RR({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}};(function(e){var t=ny.exports,r=PR,a=LW,n=A_,o=IR.addStyleRule,i=cn,s=ao,l=C_,u=i.extendFlat,f=i.extendDeepAll;e.modules={},e.allCategories={},e.allTypes=[],e.subplotsRegistry={},e.transformsRegistry={},e.componentsRegistry={},e.layoutArrayContainers=[],e.layoutArrayRegexes=[],e.traceLayoutAttributes={},e.localeRegistry={},e.apiMethodRegistry={},e.collectableSubplotTypes=null,e.register=function(w){if(e.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var A=0;A<w.length;A++){var k=w[A];if(!k)throw new Error("Invalid module was attempted to be registered!");switch(k.moduleType){case"trace":c(k);break;case"transform":p(k);break;case"component":v(k);break;case"locale":d(k);break;case"apiMethod":var T=k.name;e.apiMethodRegistry[T]=k.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},e.getModule=function(M){var w=e.modules[S(M)];return w?w._module:!1},e.traceIs=function(M,w){if(M=S(M),M==="various")return!1;var A=e.modules[M];return A||(M&&t.log("Unrecognized trace type "+M+"."),A=e.modules[s.type.dflt]),!!A.categories[w]},e.getTransformIndices=function(M,w){for(var A=[],k=M.transforms||[],T=0;T<k.length;T++)k[T].type===w&&A.push(T);return A},e.hasTransform=function(M,w){for(var A=M.transforms||[],k=0;k<A.length;k++)if(A[k].type===w)return!0;return!1},e.getComponentMethod=function(M,w){var A=e.componentsRegistry[M];return A&&A[w]||r},e.call=function(){var M=arguments[0],w=[].slice.call(arguments,1);return e.apiMethodRegistry[M].apply(null,w)};function c(M){var w=M.name,A=M.categories,k=M.meta;if(e.modules[w]){t.log("Type "+w+" already registered");return}e.subplotsRegistry[M.basePlotModule.name]||h(M.basePlotModule);for(var T={},L=0;L<A.length;L++)T[A[L]]=!0,e.allCategories[A[L]]=!0;e.modules[w]={_module:M,categories:T},k&&Object.keys(k).length&&(e.modules[w].meta=k),e.allTypes.push(w);for(var C in e.componentsRegistry)m(C,w);M.layoutAttributes&&u(e.traceLayoutAttributes,M.layoutAttributes);var I=M.basePlotModule,R=I.name;if(R==="mapbox"){var B=I.constants.styleRules;for(var N in B)o(".js-plotly-plot .plotly .mapboxgl-"+N,B[N])}(R==="geo"||R==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function h(M){var w=M.name;if(e.subplotsRegistry[w]){t.log("Plot type "+w+" already registered.");return}g(M),e.subplotsRegistry[w]=M;for(var A in e.componentsRegistry)_(A,M.name)}function v(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var w=M.name;e.componentsRegistry[w]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&a(e.layoutArrayContainers,w),g(M));for(var A in e.modules)m(w,A);for(var k in e.subplotsRegistry)_(w,k);for(var T in e.transformsRegistry)y(w,T);M.schema&&M.schema.layout&&f(l,M.schema.layout)}function p(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+M.name,A=typeof M.transform=="function",k=typeof M.calcTransform=="function";if(!A&&!k)throw new Error(w+" is missing a *transform* or *calcTransform* method.");A&&k&&t.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),n(M.attributes)||t.log(w+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&t.log(w+" registered without a *supplyDefaults* method."),e.transformsRegistry[M.name]=M;for(var T in e.componentsRegistry)y(T,M.name)}function d(M){var w=M.name,A=w.split("-")[0],k=M.dictionary,T=M.format,L=k&&Object.keys(k).length,C=T&&Object.keys(T).length,I=e.localeRegistry,R=I[w];if(R||(I[w]=R={}),A!==w){var B=I[A];B||(I[A]=B={}),L&&B.dictionary===R.dictionary&&(B.dictionary=k),C&&B.format===R.format&&(B.format=T)}L&&(R.dictionary=k),C&&(R.format=T)}function g(M){if(M.layoutAttributes){var w=M.layoutAttributes._arrayAttrRegexps;if(w)for(var A=0;A<w.length;A++)a(e.layoutArrayRegexes,w[A])}}function m(M,w){var A=e.componentsRegistry[M].schema;if(!(!A||!A.traces)){var k=A.traces[w];k&&f(e.modules[w]._module.attributes,k)}}function y(M,w){var A=e.componentsRegistry[M].schema;if(!(!A||!A.transforms)){var k=A.transforms[w];k&&f(e.transformsRegistry[w].attributes,k)}}function _(M,w){var A=e.componentsRegistry[M].schema;if(!(!A||!A.subplots)){var k=e.subplotsRegistry[w],T=k.layoutAttributes,L=k.attr==="subplot"?k.name:k.attr;Array.isArray(L)&&(L=L[0]);var C=A.subplots[L];T&&C&&f(T,C)}}function S(M){return typeof M=="object"&&(M=M.type),M}})(Pa);(function(e){var t=K3.timeFormat,r=gn,a=ny.exports,n=Q3.mod,o=Un,i=o.BADNUM,s=o.ONEDAY,l=o.ONEHOUR,u=o.ONEMIN,f=o.ONESEC,c=o.EPOCHJD,h=Pa,v=K3.utcFormat,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function m(O){return O&&h.componentsRegistry.calendars&&typeof O=="string"&&O!=="gregorian"}e.dateTick0=function(O,$){var Y=y(O,!!$);if($<2)return Y;var X=e.dateTime2ms(Y,O);return X+=s*($-1),e.ms2DateTime(X,0,O)};function y(O,$){return m(O)?$?h.getComponentMethod("calendars","CANONICAL_SUNDAY")[O]:h.getComponentMethod("calendars","CANONICAL_TICK")[O]:$?"2000-01-02":"2000-01-01"}e.dfltRange=function(O){return m(O)?h.getComponentMethod("calendars","DFLTRANGE")[O]:["2000-01-01","2001-01-01"]},e.isJSDate=function(O){return typeof O=="object"&&O!==null&&typeof O.getTime=="function"};var _,S;e.dateTime2ms=function(O,$){if(e.isJSDate(O)){var Y=O.getTimezoneOffset()*u,X=(O.getUTCMinutes()-O.getMinutes())*u+(O.getUTCSeconds()-O.getSeconds())*f+(O.getUTCMilliseconds()-O.getMilliseconds());if(X){var ee=3*u;Y=Y-ee/2+n(X-Y+ee/2,ee)}return O=Number(O)-Y,O>=_&&O<=S?O:i}if(typeof O!="string"&&typeof O!="number")return i;O=String(O);var Q=m($),Z=O.charAt(0);Q&&(Z==="G"||Z==="g")&&(O=O.substr(1),$="");var q=Q&&$.substr(0,7)==="chinese",ae=O.match(q?d:p);if(!ae)return i;var ie=ae[1],we=ae[3]||"1",Te=Number(ae[5]||1),he=Number(ae[7]||0),xe=Number(ae[9]||0),Se=Number(ae[11]||0);if(Q){if(ie.length===2)return i;ie=Number(ie);var ye;try{var re=h.getComponentMethod("calendars","getCal")($);if(q){var se=we.charAt(we.length-1)==="i";we=parseInt(we,10),ye=re.newDate(ie,re.toMonthIndex(ie,we,se),Te)}else ye=re.newDate(ie,Number(we),Te)}catch{return i}return ye?(ye.toJD()-c)*s+he*l+xe*u+Se*f:i}ie.length===2?ie=(Number(ie)+2e3-g)%100+g:ie=Number(ie),we-=1;var de=new Date(Date.UTC(2e3,we,Te,he,xe));return de.setUTCFullYear(ie),de.getUTCMonth()!==we||de.getUTCDate()!==Te?i:de.getTime()+Se*f},_=e.MIN_MS=e.dateTime2ms("-9999"),S=e.MAX_MS=e.dateTime2ms("9999-12-31 23:59:59.9999"),e.isDateTime=function(O,$){return e.dateTime2ms(O,$)!==i};function M(O,$){return String(O+Math.pow(10,$)).substr(1)}var w=90*s,A=3*l,k=5*u;e.ms2DateTime=function(O,$,Y){if(typeof O!="number"||!(O>=_&&O<=S))return i;$||($=0);var X=Math.floor(n(O+.05,1)*10),ee=Math.round(O-X/10),Q,Z,q,ae,ie,we;if(m(Y)){var Te=Math.floor(ee/s)+c,he=Math.floor(n(O,s));try{Q=h.getComponentMethod("calendars","getCal")(Y).fromJD(Te).formatDate("yyyy-mm-dd")}catch{Q=v("G%Y-%m-%d")(new Date(ee))}if(Q.charAt(0)==="-")for(;Q.length<11;)Q="-0"+Q.substr(1);else for(;Q.length<10;)Q="0"+Q;Z=$<w?Math.floor(he/l):0,q=$<w?Math.floor(he%l/u):0,ae=$<A?Math.floor(he%u/f):0,ie=$<k?he%f*10+X:0}else we=new Date(ee),Q=v("%Y-%m-%d")(we),Z=$<w?we.getUTCHours():0,q=$<w?we.getUTCMinutes():0,ae=$<A?we.getUTCSeconds():0,ie=$<k?we.getUTCMilliseconds()*10+X:0;return T(Q,Z,q,ae,ie)},e.ms2DateTimeLocal=function(O){if(!(O>=_+s&&O<=S-s))return i;var $=Math.floor(n(O+.05,1)*10),Y=new Date(Math.round(O-$/10)),X=t("%Y-%m-%d")(Y),ee=Y.getHours(),Q=Y.getMinutes(),Z=Y.getSeconds(),q=Y.getUTCMilliseconds()*10+$;return T(X,ee,Q,Z,q)};function T(O,$,Y,X,ee){if(($||Y||X||ee)&&(O+=" "+M($,2)+":"+M(Y,2),(X||ee)&&(O+=":"+M(X,2),ee))){for(var Q=4;ee%10==0;)Q-=1,ee/=10;O+="."+M(ee,Q)}return O}e.cleanDate=function(O,$,Y){if(O===i)return $;if(e.isJSDate(O)||typeof O=="number"&&isFinite(O)){if(m(Y))return a.error("JS Dates and milliseconds are incompatible with world calendars",O),$;if(O=e.ms2DateTimeLocal(+O),!O&&$!==void 0)return $}else if(!e.isDateTime(O,Y))return a.error("unrecognized date",O),$;return O};var L=/%\d?f/g,C=/%h/g,I={"1":"1","2":"1","3":"2","4":"2"};function R(O,$,Y,X){O=O.replace(L,function(Q){var Z=Math.min(+Q.charAt(1)||6,6),q=($/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0";return q});var ee=new Date(Math.floor($+.05));if(O=O.replace(C,function(){return I[Y("%q")(ee)]}),m(X))try{O=h.getComponentMethod("calendars","worldCalFmt")(O,$,X)}catch{return"Invalid"}return Y(O)(ee)}var B=[59,59.9,59.99,59.999,59.9999];function N(O,$){var Y=n(O+.05,s),X=M(Math.floor(Y/l),2)+":"+M(n(Math.floor(Y/u),60),2);if($!=="M"){r($)||($=0);var ee=Math.min(n(O/f,60),B[$]),Q=(100+ee).toFixed($).substr(1);$>0&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,"")),X+=":"+Q}return X}e.formatDate=function(O,$,Y,X,ee,Q){if(ee=m(ee)&&ee,!$)if(Y==="y")$=Q.year;else if(Y==="m")$=Q.month;else if(Y==="d")$=Q.dayMonth+`
`+Q.year;else return N(O,Y)+`
`+R(Q.dayMonthYear,O,X,ee);return R($,O,X,ee)};var D=3*s;e.incrementMonth=function(O,$,Y){Y=m(Y)&&Y;var X=n(O,s);if(O=Math.round(O-X),Y)try{var ee=Math.round(O/s)+c,Q=h.getComponentMethod("calendars","getCal")(Y),Z=Q.fromJD(ee);return $%12?Q.add(Z,$,"m"):Q.add(Z,$/12,"y"),(Z.toJD()-c)*s+X}catch{a.error("invalid ms "+O+" in calendar "+Y)}var q=new Date(O+D);return q.setUTCMonth(q.getUTCMonth()+$)+X-D},e.findExactDates=function(O,$){for(var Y=0,X=0,ee=0,Q=0,Z,q,ae=m($)&&h.getComponentMethod("calendars","getCal")($),ie=0;ie<O.length;ie++){if(q=O[ie],!r(q)){Q++;continue}if(!(q%s))if(ae)try{Z=ae.fromJD(q/s+c),Z.day()===1?Z.month()===1?Y++:X++:ee++}catch{}else Z=new Date(q),Z.getUTCDate()===1?Z.getUTCMonth()===0?Y++:X++:ee++}X+=Y,ee+=X;var we=O.length-Q;return{exactYears:Y/we,exactMonths:X/we,exactDays:ee/we}}})(SW);var T5={},A5=function(t){return t};(function(e){var t=gn,r=ny.exports,a=A5,n=Un.BADNUM,o=1e-9;e.findBin=function(f,c,h){if(t(c.start))return h?Math.ceil((f-c.start)/c.size-o)-1:Math.floor((f-c.start)/c.size+o);var v=0,p=c.length,d=0,g=p>1?(c[p-1]-c[0])/(p-1):1,m,y;for(g>=0?y=h?i:s:y=h?u:l,f+=g*o*(h?-1:1)*(g>=0?1:-1);v<p&&d++<100;)m=Math.floor((v+p)/2),y(c[m],f)?v=m+1:p=m;return d>90&&r.log("Long binary search..."),v-1};function i(f,c){return f<c}function s(f,c){return f<=c}function l(f,c){return f>c}function u(f,c){return f>=c}e.sorterAsc=function(f,c){return f-c},e.sorterDes=function(f,c){return c-f},e.distinctVals=function(f){var c=f.slice();c.sort(e.sorterAsc);var h;for(h=c.length-1;h>-1&&c[h]===n;h--);for(var v=c[h]-c[0]||1,p=v/(h||1)/1e4,d=[],g,m=0;m<=h;m++){var y=c[m],_=y-g;g===void 0?(d.push(y),g=y):_>p&&(v=Math.min(v,_),d.push(y),g=y)}return{vals:d,minDiff:v}},e.roundUp=function(f,c,h){for(var v=0,p=c.length-1,d,g=0,m=h?0:1,y=h?1:0,_=h?Math.ceil:Math.floor;v<p&&g++<100;)d=_((v+p)/2),c[d]<=f?v=d+m:p=d-y;return c[v]},e.sort=function(f,c){for(var h=0,v=0,p=1;p<f.length;p++){var d=c(f[p],f[p-1]);if(d<0?h=1:d>0&&(v=1),h&&v)return f.sort(c)}return v?f:f.reverse()},e.findIndexOfMin=function(f,c){c=c||a;for(var h=1/0,v,p=0;p<f.length;p++){var d=c(f[p]);d<h&&(h=d,v=p)}return v}})(T5);var L_=function(t){return Object.keys(t).sort()},$W={};(function(e){var t=gn,r=nh.isArrayOrTypedArray;e.aggNums=function(a,n,o,i){var s,l;if((!i||i>o.length)&&(i=o.length),t(n)||(n=!1),r(o[0])){for(l=new Array(i),s=0;s<i;s++)l[s]=e.aggNums(a,n,o[s]);o=l}for(s=0;s<i;s++)t(n)?t(o[s])&&(n=a(+n,+o[s])):n=o[s];return n},e.len=function(a){return e.aggNums(function(n){return n+1},0,a)},e.mean=function(a,n){return n||(n=e.len(a)),e.aggNums(function(o,i){return o+i},0,a)/n},e.midRange=function(a){if(!(a===void 0||a.length===0))return(e.aggNums(Math.max,null,a)+e.aggNums(Math.min,null,a))/2},e.variance=function(a,n,o){return n||(n=e.len(a)),t(o)||(o=e.mean(a,n)),e.aggNums(function(i,s){return i+Math.pow(s-o,2)},0,a)/n},e.stdev=function(a,n,o){return Math.sqrt(e.variance(a,n,o))},e.median=function(a){var n=a.slice().sort();return e.interp(n,.5)},e.interp=function(a,n){if(!t(n))throw"n should be a finite number";if(n=n*a.length-.5,n<0)return a[0];if(n>a.length-1)return a[a.length-1];var o=n%1;return o*a[Math.ceil(n)]+(1-o)*a[Math.floor(n)]}})($W);var UW=Q3,zR=UW.mod,NEe=UW.modHalf,nT=Math.PI,iy=2*nT;function BEe(e){return e/180*nT}function $Ee(e){return e/nT*180}function FR(e){return Math.abs(e[1]-e[0])>iy-1e-14}function HW(e,t){return NEe(t-e,iy)}function UEe(e,t){return Math.abs(HW(e,t))}function GW(e,t){if(FR(t))return!0;var r,a;t[0]<t[1]?(r=t[0],a=t[1]):(r=t[1],a=t[0]),r=zR(r,iy),a=zR(a,iy),r>a&&(a+=iy);var n=zR(e,iy),o=n+iy;return n>=r&&n<=a||o>=r&&o<=a}function HEe(e,t,r,a){if(!GW(t,a))return!1;var n,o;return r[0]<r[1]?(n=r[0],o=r[1]):(n=r[1],o=r[0]),e>=n&&e<=o}function OR(e,t,r,a,n,o,i){n=n||0,o=o||0;var s=FR([r,a]),l,u,f,c,h;s?(l=0,u=nT,f=iy):r<a?(l=r,f=a):(l=a,f=r),e<t?(c=e,h=t):(c=t,h=e);function v(m,y){return[m*Math.cos(y)+n,o-m*Math.sin(y)]}var p=Math.abs(f-l)<=nT?0:1;function d(m,y,_){return"A"+[m,m]+" "+[0,p,_]+" "+v(m,y)}var g;return s?c===null?g="M"+v(h,l)+d(h,u,0)+d(h,f,0)+"Z":g="M"+v(c,l)+d(c,u,0)+d(c,f,0)+"ZM"+v(h,l)+d(h,u,1)+d(h,f,1)+"Z":c===null?(g="M"+v(h,l)+d(h,f,0),i&&(g+="L0,0Z")):g="M"+v(c,l)+"L"+v(h,l)+d(h,f,0)+"L"+v(c,f)+d(c,l,1)+"Z",g}function GEe(e,t,r,a,n){return OR(null,e,t,r,a,n,0)}function VEe(e,t,r,a,n){return OR(null,e,t,r,a,n,1)}function jEe(e,t,r,a,n,o){return OR(e,t,r,a,n,o,1)}var qEe={deg2rad:BEe,rad2deg:$Ee,angleDelta:HW,angleDist:UEe,isFullCircle:FR,isAngleInsideSector:GW,isPtInsideSector:HEe,pathArc:GEe,pathSector:VEe,pathAnnulus:jEe},lx={};lx.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};lx.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};lx.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};lx.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};lx.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};lx.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3};var ux={},NR=Q3.mod;ux.segmentsIntersect=VW;function VW(e,t,r,a,n,o,i,s){var l=r-e,u=n-e,f=i-n,c=a-t,h=o-t,v=s-o,p=l*v-f*c;if(p===0)return null;var d=(u*v-f*h)/p,g=(u*c-l*h)/p;return g<0||g>1||d<0||d>1?null:{x:e+l*d,y:t+c*d}}ux.segmentDistance=function(t,r,a,n,o,i,s,l){if(VW(t,r,a,n,o,i,s,l))return 0;var u=a-t,f=n-r,c=s-o,h=l-i,v=u*u+f*f,p=c*c+h*h,d=Math.min(S5(u,f,v,o-t,i-r),S5(u,f,v,s-t,l-r),S5(c,h,p,t-o,r-i),S5(c,h,p,a-o,n-i));return Math.sqrt(d)};function S5(e,t,r,a,n){var o=a*e+n*t;if(o<0)return a*a+n*n;if(o>r){var i=a-e,s=n-t;return i*i+s*s}else{var l=a*t-n*e;return l*l/r}}var M5,BR,jW;ux.getTextLocation=function(t,r,a,n){if((t!==BR||n!==jW)&&(M5={},BR=t,jW=n),M5[a])return M5[a];var o=t.getPointAtLength(NR(a-n/2,r)),i=t.getPointAtLength(NR(a+n/2,r)),s=Math.atan((i.y-o.y)/(i.x-o.x)),l=t.getPointAtLength(NR(a,r)),u=(l.x*4+o.x+i.x)/6,f=(l.y*4+o.y+i.y)/6,c={x:u,y:f,theta:s};return M5[a]=c,c};ux.clearLocationCache=function(){BR=null};ux.getVisibleSegment=function(t,r,a){var n=r.left,o=r.right,i=r.top,s=r.bottom,l=0,u=t.getTotalLength(),f=u,c,h;function v(d){var g=t.getPointAtLength(d);d===0?c=g:d===u&&(h=g);var m=g.x<n?n-g.x:g.x>o?g.x-o:0,y=g.y<i?i-g.y:g.y>s?g.y-s:0;return Math.sqrt(m*m+y*y)}for(var p=v(l);p;){if(l+=p+a,l>f)return;p=v(l)}for(p=v(f);p;){if(f-=p+a,l>f)return;p=v(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-h.x)<.1&&Math.abs(c.y-h.y)<.1}};ux.findPointOnPath=function(t,r,a,n){n=n||{};for(var o=n.pathLength||t.getTotalLength(),i=n.tolerance||.001,s=n.iterationLimit||30,l=t.getPointAtLength(0)[a]>t.getPointAtLength(o)[a]?-1:1,u=0,f=0,c=o,h,v,p;u<s;){if(h=(f+c)/2,v=t.getPointAtLength(h),p=v[a]-r,Math.abs(p)<i)return v;l*p>0?c=h:f=h,u++}return v};var k5={};(function(e){var t={};e.throttle=function(n,o,i){var s=t[n],l=Date.now();if(!s){for(var u in t)t[u].ts<l-6e4&&delete t[u];s=t[n]={ts:0,timer:null}}r(s);function f(){i(),s.ts=Date.now(),s.onDone&&(s.onDone(),s.onDone=null)}if(l>s.ts+o){f();return}s.timer=setTimeout(function(){f(),s.timer=null},o)},e.done=function(a){var n=t[a];return!n||!n.timer?Promise.resolve():new Promise(function(o){var i=n.onDone;n.onDone=function(){i&&i(),o(),n.onDone=null}})},e.clear=function(a){if(a)r(t[a]),delete t[a];else for(var n in t)e.clear(n)};function r(a){a&&a.timer!==null&&(clearTimeout(a.timer),a.timer=null)}})(k5);var YEe=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)},E5={exports:{}};E5.exports=$R;E5.exports.isMobile=$R;E5.exports.default=$R;var WEe=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,XEe=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function $R(e){e||(e={});var t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var r=e.tablet?XEe.test(t):WEe.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}var ZEe=gn,KEe=E5.exports,JEe=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=QEe(),typeof r!="string")return!0;var a=KEe({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!a)for(var n=r.split(" "),o=1;o<n.length;o++){var i=n[o];if(i.indexOf("Safari")!==-1)for(var s=o-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(ZEe(u)&&(u=+u),u>=13)return!0}}}return a};function QEe(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}var eCe=Ra.exports,tCe=function(t,r,a){var n=t.selectAll("g."+a.replace(/\s/g,".")).data(r,function(i){return i[0].trace.uid});n.exit().remove(),n.enter().append("g").attr("class",a),n.order();var o=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each(function(i){i[0][o]=eCe.select(this)}),n},rCe=Pa,aCe=function(t,r){for(var a=t._context.locale,n=0;n<2;n++){for(var o=t._context.locales,i=0;i<2;i++){var s=(o[a]||{}).dictionary;if(s){var l=s[r];if(l)return l}o=rCe.localeRegistry}var u=a.split("-")[0];if(u===a)break;a=u}return r},qW=function(t){for(var r={},a=[],n=0,o=0;o<t.length;o++){var i=t[o];r[i]!==1&&(r[i]=1,a[n++]=i)}return a},nCe=function(t){for(var r=sCe(t)?oCe:iCe,a=[],n=0;n<t.length;n++){var o=t[n];r(o)&&a.push(o)}return a};function iCe(e){return e.visible===!0}function oCe(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function sCe(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}var lCe=function(t,r){if(!r)return t;var a=1/Math.abs(r),n=a>1?(a*t+a*r)/a:t+r,o=String(n).length;if(o>16){var i=String(r).length,s=String(t).length;if(o>=s+i){var l=parseFloat(n).toPrecision(12);l.indexOf("e+")===-1&&(n=+l)}}return n},uCe=gn,fCe=Un.BADNUM,cCe=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,hCe=function(t){return typeof t=="string"&&(t=t.replace(cCe,"")),uCe(t)?Number(t):fCe},iT=Ra.exports,vCe=K3.utcFormat,dCe=uW.format,YW=gn,WW=Un,XW=WW.FP_SAFE,pCe=-XW,ZW=WW.BADNUM,Jt=bt.exports={};Jt.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var KW={};Jt.warnBadFormat=function(e){var t=String(e);KW[t]||(KW[t]=1,Jt.warn('encountered bad format: "'+t+'"'))};Jt.noFormat=function(e){return String(e)};Jt.numberFormat=function(e){var t;try{t=dCe(Jt.adjustFormat(e))}catch{return Jt.warnBadFormat(e),Jt.noFormat}return t};Jt.nestedProperty=h5;Jt.keyedContainer=e5e;Jt.relativeAttr=a5e;Jt.isPlainObject=A_;Jt.toLogRange=AR;Jt.relinkPrivateKeys=i5e;var fx=nh;Jt.isTypedArray=fx.isTypedArray;Jt.isArrayOrTypedArray=fx.isArrayOrTypedArray;Jt.isArray1D=fx.isArray1D;Jt.ensureArray=fx.ensureArray;Jt.concat=fx.concat;Jt.maxRowLength=fx.maxRowLength;Jt.minRowLength=fx.minRowLength;var JW=Q3;Jt.mod=JW.mod;Jt.modHalf=JW.modHalf;var oy=xW;Jt.valObjectMeta=oy.valObjectMeta;Jt.coerce=oy.coerce;Jt.coerce2=oy.coerce2;Jt.coerceFont=oy.coerceFont;Jt.coercePattern=oy.coercePattern;Jt.coerceHoverinfo=oy.coerceHoverinfo;Jt.coerceSelectionMarkerOpacity=oy.coerceSelectionMarkerOpacity;Jt.validate=oy.validate;var Yh=SW;Jt.dateTime2ms=Yh.dateTime2ms;Jt.isDateTime=Yh.isDateTime;Jt.ms2DateTime=Yh.ms2DateTime;Jt.ms2DateTimeLocal=Yh.ms2DateTimeLocal;Jt.cleanDate=Yh.cleanDate;Jt.isJSDate=Yh.isJSDate;Jt.formatDate=Yh.formatDate;Jt.incrementMonth=Yh.incrementMonth;Jt.dateTick0=Yh.dateTick0;Jt.dfltRange=Yh.dfltRange;Jt.findExactDates=Yh.findExactDates;Jt.MIN_MS=Yh.MIN_MS;Jt.MAX_MS=Yh.MAX_MS;var cx=T5;Jt.findBin=cx.findBin;Jt.sorterAsc=cx.sorterAsc;Jt.sorterDes=cx.sorterDes;Jt.distinctVals=cx.distinctVals;Jt.roundUp=cx.roundUp;Jt.sort=cx.sort;Jt.findIndexOfMin=cx.findIndexOfMin;Jt.sortObjectKeys=L_;var sy=$W;Jt.aggNums=sy.aggNums;Jt.len=sy.len;Jt.mean=sy.mean;Jt.median=sy.median;Jt.midRange=sy.midRange;Jt.variance=sy.variance;Jt.stdev=sy.stdev;Jt.interp=sy.interp;var $d=x5;Jt.init2dArray=$d.init2dArray;Jt.transposeRagged=$d.transposeRagged;Jt.dot=$d.dot;Jt.translationMatrix=$d.translationMatrix;Jt.rotationMatrix=$d.rotationMatrix;Jt.rotationXYMatrix=$d.rotationXYMatrix;Jt.apply3DTransform=$d.apply3DTransform;Jt.apply2DTransform=$d.apply2DTransform;Jt.apply2DTransform2=$d.apply2DTransform2;Jt.convertCssMatrix=$d.convertCssMatrix;Jt.inverseTransformMatrix=$d.inverseTransformMatrix;var Gp=qEe;Jt.deg2rad=Gp.deg2rad;Jt.rad2deg=Gp.rad2deg;Jt.angleDelta=Gp.angleDelta;Jt.angleDist=Gp.angleDist;Jt.isFullCircle=Gp.isFullCircle;Jt.isAngleInsideSector=Gp.isAngleInsideSector;Jt.isPtInsideSector=Gp.isPtInsideSector;Jt.pathArc=Gp.pathArc;Jt.pathSector=Gp.pathSector;Jt.pathAnnulus=Gp.pathAnnulus;var P_=lx;Jt.isLeftAnchor=P_.isLeftAnchor;Jt.isCenterAnchor=P_.isCenterAnchor;Jt.isRightAnchor=P_.isRightAnchor;Jt.isTopAnchor=P_.isTopAnchor;Jt.isMiddleAnchor=P_.isMiddleAnchor;Jt.isBottomAnchor=P_.isBottomAnchor;var I_=ux;Jt.segmentsIntersect=I_.segmentsIntersect;Jt.segmentDistance=I_.segmentDistance;Jt.getTextLocation=I_.getTextLocation;Jt.clearLocationCache=I_.clearLocationCache;Jt.getVisibleSegment=I_.getVisibleSegment;Jt.findPointOnPath=I_.findPointOnPath;var C5=cn;Jt.extendFlat=C5.extendFlat;Jt.extendDeep=C5.extendDeep;Jt.extendDeepAll=C5.extendDeepAll;Jt.extendDeepNoArrays=C5.extendDeepNoArrays;var UR=ny.exports;Jt.log=UR.log;Jt.warn=UR.warn;Jt.error=UR.error;var gCe=M_;Jt.counterRegex=gCe.counter;var HR=k5;Jt.throttle=HR.throttle;Jt.throttleDone=HR.done;Jt.clearThrottle=HR.clear;var Vp=IR;Jt.getGraphDiv=Vp.getGraphDiv;Jt.isPlotDiv=Vp.isPlotDiv;Jt.removeElement=Vp.removeElement;Jt.addStyleRule=Vp.addStyleRule;Jt.addRelatedStyleRule=Vp.addRelatedStyleRule;Jt.deleteRelatedStyleRule=Vp.deleteRelatedStyleRule;Jt.getFullTransformMatrix=Vp.getFullTransformMatrix;Jt.getElementTransformMatrix=Vp.getElementTransformMatrix;Jt.getElementAndAncestors=Vp.getElementAndAncestors;Jt.equalDomRects=Vp.equalDomRects;Jt.clearResponsive=YEe;Jt.preserveDrawingBuffer=JEe;Jt.makeTraceGroups=tCe;Jt._=aCe;Jt.notifier=CW;Jt.filterUnique=qW;Jt.filterVisible=nCe;Jt.pushUnique=LW;Jt.increment=lCe;Jt.cleanNumber=hCe;Jt.ensureNumber=function(t){return YW(t)?(t=Number(t),t>XW||t<pCe?ZW:t):ZW};Jt.isIndex=function(e,t){return t!==void 0&&e>=t?!1:YW(e)&&e>=0&&e%1==0};Jt.noop=PR;Jt.identity=A5;Jt.repeat=function(e,t){for(var r=new Array(t),a=0;a<t;a++)r[a]=e;return r};Jt.swapAttrs=function(e,t,r,a){r||(r="x"),a||(a="y");for(var n=0;n<t.length;n++){var o=t[n],i=Jt.nestedProperty(e,o.replace("?",r)),s=Jt.nestedProperty(e,o.replace("?",a)),l=i.get();i.set(s.get()),s.set(l)}};Jt.raiseToTop=function(t){t.parentNode.appendChild(t)};Jt.cancelTransition=function(e){return e.transition().duration(0)};Jt.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};Jt.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};Jt.simpleMap=function(e,t,r,a,n){for(var o=e.length,i=new Array(o),s=0;s<o;s++)i[s]=t(e[s],r,a,n);return i};Jt.randstr=function e(t,r,a,n){if(a||(a=16),r===void 0&&(r=24),r<=0)return"0";var o=Math.log(Math.pow(2,r))/Math.log(a),i="",s,l,u;for(s=2;o===1/0;s*=2)o=Math.log(Math.pow(2,r/s))/Math.log(a)*s;var f=o-Math.floor(o);for(s=0;s<Math.floor(o);s++)u=Math.floor(Math.random()*a).toString(a),i=u+i;f&&(l=Math.pow(a,f),u=Math.floor(Math.random()*l).toString(a),i=u+i);var c=parseInt(i,a);return t&&t[i]||c!==1/0&&c>=Math.pow(2,r)?n>10?(Jt.warn("randstr failed uniqueness"),i):e(t,r,a,(n||0)+1):i};Jt.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(a){a[t]=e,r[a.name]=a,r.optionList.push(a)},r["_"+t]=e,r};Jt.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,a=2*r,n=2*t-1,o=new Array(n),i=new Array(r),s,l,u,f;for(s=0;s<n;s++)o[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t);for(s=0;s<r;s++){for(f=0,l=0;l<n;l++)u=s+l+1-t,u<-r?u-=a*Math.round(u/a):u>=a&&(u-=a*Math.floor(u/a)),u<0?u=-1-u:u>=r&&(u=a-1-u),f+=e[u]*o[l];i[s]=f}return i};Jt.syncOrAsync=function(e,t,r){var a,n;function o(){return Jt.syncOrAsync(e,t,r)}for(;e.length;)if(n=e.splice(0,1)[0],a=n(t),a&&a.then)return a.then(o);return r&&r(t)};Jt.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};Jt.noneOrAll=function(e,t,r){if(!!e){var a=!1,n=!0,o,i;for(o=0;o<r.length;o++)i=e[r[o]],i!=null?a=!0:n=!1;if(a&&!n)for(o=0;o<r.length;o++)e[r[o]]=t[r[o]]}};Jt.mergeArray=function(e,t,r,a){var n=typeof a=="function";if(Jt.isArrayOrTypedArray(e))for(var o=Math.min(e.length,t.length),i=0;i<o;i++){var s=e[i];t[i][r]=n?a(s):s}};Jt.mergeArrayCastPositive=function(e,t,r){return Jt.mergeArray(e,t,r,function(a){var n=+a;return isFinite(n)&&n>0?n:0})};Jt.fillArray=function(e,t,r,a){if(a=a||Jt.identity,Jt.isArrayOrTypedArray(e))for(var n=0;n<t.length;n++)t[n][r]=a(e[n])};Jt.castOption=function(e,t,r,a){a=a||Jt.identity;var n=Jt.nestedProperty(e,r).get();return Jt.isArrayOrTypedArray(n)?Array.isArray(t)&&Jt.isArrayOrTypedArray(n[t[0]])?a(n[t[0]][t[1]]):a(n[t]):n};Jt.extractOption=function(e,t,r,a){if(r in e)return e[r];var n=Jt.nestedProperty(t,a).get();if(!Array.isArray(n))return n};function QW(e){var t={};for(var r in e)for(var a=e[r],n=0;n<a.length;n++)t[a[n]]=+r;return t}Jt.tagSelected=function(e,t,r){var a=t.selectedpoints,n=t._indexToPoints,o;n&&(o=QW(n));function i(c){return c!==void 0&&c<e.length}for(var s=0;s<a.length;s++){var l=a[s];if(Jt.isIndex(l)||Jt.isArrayOrTypedArray(l)&&Jt.isIndex(l[0])&&Jt.isIndex(l[1])){var u=o?o[l]:l,f=r?r[u]:u;i(f)&&(e[f].selected=1)}}};Jt.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var a=QW(r),n=[],o=0;o<t.length;o++){var i=t[o];if(Jt.isIndex(i)){var s=a[i];Jt.isIndex(s)&&n.push(s)}}return n}else return t};Jt.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var a=Jt.nestedProperty(e,r).get();return Array.isArray(a)?a:!1}else if(Array.isArray(r))return r;return!1};Jt.minExtend=function(e,t){var r={};typeof t!="object"&&(t={});var a=3,n=Object.keys(e),o,i,s;for(o=0;o<n.length;o++)i=n[o],s=e[i],!(i.charAt(0)==="_"||typeof s=="function")&&(i==="module"?r[i]=s:Array.isArray(s)?i==="colorscale"?r[i]=s.slice():r[i]=s.slice(0,a):Jt.isTypedArray(s)?r[i]=s.subarray(0,a):s&&typeof s=="object"?r[i]=Jt.minExtend(e[i],t[i]):r[i]=s);for(n=Object.keys(t),o=0;o<n.length;o++)i=n[o],s=t[i],(typeof s!="object"||!(i in r)||typeof r[i]!="object")&&(r[i]=s);return r};Jt.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};Jt.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};Jt.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var mCe=/Version\/[\d\.]+.*Safari/;Jt.isSafari=function(){return mCe.test(window.navigator.userAgent)};var yCe=/iPad|iPhone|iPod/;Jt.isIOS=function(){return yCe.test(window.navigator.userAgent)};var xCe=/Firefox\/(\d+)\.\d+/;Jt.getFirefoxVersion=function(){var e=xCe.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};Jt.isD3Selection=function(e){return e instanceof iT.selection};Jt.ensureSingle=function(e,t,r,a){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var o=e.append(t);return r&&o.classed(r,!0),a&&o.call(a),o};Jt.ensureSingleById=function(e,t,r,a){var n=e.select(t+"#"+r);if(n.size())return n;var o=e.append(t).attr("id",r);return a&&o.call(a),o};Jt.objectFromPath=function(e,t){for(var r=e.split("."),a,n=a={},o=0;o<r.length;o++){var i=r[o],s=null,l=r[o].match(/(.*)\[([0-9]+)\]/);l?(i=l[1],s=l[2],a=a[i]=[],o===r.length-1?a[s]=t:a[s]={},a=a[s]):(o===r.length-1?a[i]=t:a[i]={},a=a[i])}return n};var bCe=/^([^\[\.]+)\.(.+)?/,_Ce=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;Jt.expandObjectPaths=function(e){var t,r,a,n,o,i,s;if(typeof e=="object"&&!Array.isArray(e))for(r in e)e.hasOwnProperty(r)&&((t=r.match(bCe))?(n=e[r],a=t[1],delete e[r],e[a]=Jt.extendDeepNoArrays(e[a]||{},Jt.objectFromPath(r,Jt.expandObjectPaths(n))[a])):(t=r.match(_Ce))?(n=e[r],a=t[1],o=parseInt(t[2]),delete e[r],e[a]=e[a]||[],t[3]==="."?(s=t[4],i=e[a][o]=e[a][o]||{},Jt.extendDeepNoArrays(i,Jt.objectFromPath(s,Jt.expandObjectPaths(n)))):e[a][o]=Jt.expandObjectPaths(n)):e[r]=Jt.expandObjectPaths(e[r]));return e};Jt.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var a=/(\d+)(\d{3})/,n=t.charAt(0),o=t.charAt(1),i=e.split("."),s=i[0],l=i.length>1?n+i[1]:"";if(o&&(i.length>1||s.length>4||r))for(;a.test(s);)s=s.replace(a,"$1"+o+"$2");return s+l};Jt.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var eX=/^\w*$/;Jt.templateString=function(e,t){var r={};return e.replace(Jt.TEMPLATE_STRING_REGEX,function(a,n){var o;return eX.test(n)?o=t[n]:(r[n]=r[n]||Jt.nestedProperty(t,n).get,o=r[n]()),Jt.isValidTextValue(o)?o:""})};var wCe={max:10,count:0,name:"hovertemplate"};Jt.hovertemplateString=function(){return rX.apply(wCe,arguments)};var TCe={max:10,count:0,name:"texttemplate"};Jt.texttemplateString=function(){return rX.apply(TCe,arguments)};var tX=/^[:|\|]/;function rX(e,t,r){var a=this,n=arguments;t||(t={});var o={};return e.replace(Jt.TEMPLATE_STRING_REGEX,function(i,s,l){var u=s==="xother"||s==="yother",f=s==="_xother"||s==="_yother",c=s==="_xother_"||s==="_yother_",h=s==="xother_"||s==="yother_",v=u||f||h||c,p=s;(f||c)&&(p=p.substring(1)),(h||c)&&(p=p.substring(0,p.length-1));var d;if(v){if(d=t[p],d===void 0)return""}else{var g,m;for(m=3;m<n.length;m++)if(g=n[m],!!g){if(g.hasOwnProperty(p)){d=g[p];break}if(eX.test(p)||(d=Jt.nestedProperty(g,p).get(),d=o[p]||Jt.nestedProperty(g,p).get(),d&&(o[p]=d)),d!==void 0)break}}if(d===void 0&&a)return a.count<a.max&&(Jt.warn("Variable '"+p+"' in "+a.name+" could not be found!"),d=i),a.count===a.max&&Jt.warn("Too many "+a.name+" warnings - additional warnings will be suppressed"),a.count++,i;if(l){var y;if(l[0]===":"&&(y=r?r.numberFormat:Jt.numberFormat,d=y(l.replace(tX,""))(d)),l[0]==="|"){y=r?r.timeFormat:vCe;var _=Jt.dateTime2ms(d);d=Jt.formatDate(_,l.replace(tX,""),!1,y)}}else{var S=p+"Label";t.hasOwnProperty(S)&&(d=t[S])}return v&&(d="("+d+")",(f||c)&&(d=" "+d),(h||c)&&(d=d+" ")),d})}var L5=48,aX=57;Jt.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,a=0,n=0,o=0;o<r;o++){var i=e.charCodeAt(o)||0,s=t.charCodeAt(o)||0,l=i>=L5&&i<=aX,u=s>=L5&&s<=aX;if(l&&(a=10*a+i-L5),u&&(n=10*n+s-L5),!l||!u){if(a!==n)return a-n;if(i!==s)return i-s}}return n-a};var D_=2e9;Jt.seedPseudoRandom=function(){D_=2e9};Jt.pseudoRandom=function(){var e=D_;return D_=(69069*D_+1)%4294967296,Math.abs(D_-e)<429496729?Jt.pseudoRandom():D_/4294967296};Jt.fillText=function(e,t,r){var a=Array.isArray(r)?function(i){r.push(i)}:function(i){r.text=i},n=Jt.extractOption(e,t,"htx","hovertext");if(Jt.isValidTextValue(n))return a(n);var o=Jt.extractOption(e,t,"tx","text");if(Jt.isValidTextValue(o))return a(o)};Jt.isValidTextValue=function(e){return e||e===0};Jt.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",a=0;a<t;a++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};Jt.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};Jt.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};Jt.strRotate=function(e){return e?"rotate("+e+")":""};Jt.strScale=function(e){return e!==1?"scale("+e+")":""};Jt.getTextTransform=function(e){var t=e.noCenter,r=e.textX,a=e.textY,n=e.targetX,o=e.targetY,i=e.anchorX||0,s=e.anchorY||0,l=e.rotate,u=e.scale;return u?u>1&&(u=1):u=0,Jt.strTranslate(n-u*(r+i),o-u*(a+s))+Jt.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+a)+")":"")};Jt.ensureUniformFontSize=function(e,t){var r=Jt.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};Jt.join2=function(e,t,r){var a=e.length;return a>1?e.slice(0,-1).join(t)+r+e[a-1]:e.join(t)};Jt.bigFont=function(e){return Math.round(1.2*e)};var nX=Jt.getFirefoxVersion(),ACe=nX!==null&&nX<86;Jt.getPositionFromD3Event=function(){return ACe?[iT.event.layerX,iT.event.layerY]:[iT.event.offsetX,iT.event.offsetY]};var SCe=bt.exports,iX={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var oX in iX){var MCe=oX.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");SCe.addStyleRule(MCe,iX[oX])}var fs={},P5={},kCe=!0,ECe=kCe,GR;typeof ll.matchMedia=="function"?GR=!ll.matchMedia("(hover: none)").matches:GR=ECe;var sX=GR,oT={exports:{}},R_=typeof Reflect=="object"?Reflect:null,lX=R_&&typeof R_.apply=="function"?R_.apply:function(t,r,a){return Function.prototype.apply.call(t,r,a)},I5;R_&&typeof R_.ownKeys=="function"?I5=R_.ownKeys:Object.getOwnPropertySymbols?I5=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:I5=function(t){return Object.getOwnPropertyNames(t)};function CCe(e){console&&console.warn&&console.warn(e)}var uX=Number.isNaN||function(t){return t!==t};function Ko(){Ko.init.call(this)}oT.exports=Ko;oT.exports.once=DCe;Ko.EventEmitter=Ko;Ko.prototype._events=void 0;Ko.prototype._eventsCount=0;Ko.prototype._maxListeners=void 0;var fX=10;function D5(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ko,"defaultMaxListeners",{enumerable:!0,get:function(){return fX},set:function(e){if(typeof e!="number"||e<0||uX(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");fX=e}});Ko.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ko.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||uX(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cX(e){return e._maxListeners===void 0?Ko.defaultMaxListeners:e._maxListeners}Ko.prototype.getMaxListeners=function(){return cX(this)};Ko.prototype.emit=function(t){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var i;if(r.length>0&&(i=r[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")lX(l,this,r);else for(var u=l.length,f=gX(l,u),a=0;a<u;++a)lX(f[a],this,r);return!0};function hX(e,t,r,a){var n,o,i;if(D5(r),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),i=o[t]),i===void 0)i=o[t]=r,++e._eventsCount;else if(typeof i=="function"?i=o[t]=a?[r,i]:[i,r]:a?i.unshift(r):i.push(r),n=cX(e),n>0&&i.length>n&&!i.warned){i.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=i.length,CCe(s)}return e}Ko.prototype.addListener=function(t,r){return hX(this,t,r,!1)};Ko.prototype.on=Ko.prototype.addListener;Ko.prototype.prependListener=function(t,r){return hX(this,t,r,!0)};function LCe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vX(e,t,r){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=LCe.bind(a);return n.listener=r,a.wrapFn=n,n}Ko.prototype.once=function(t,r){return D5(r),this.on(t,vX(this,t,r)),this};Ko.prototype.prependOnceListener=function(t,r){return D5(r),this.prependListener(t,vX(this,t,r)),this};Ko.prototype.removeListener=function(t,r){var a,n,o,i,s;if(D5(r),n=this._events,n===void 0)return this;if(a=n[t],a===void 0)return this;if(a===r||a.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,a.listener||r));else if(typeof a!="function"){for(o=-1,i=a.length-1;i>=0;i--)if(a[i]===r||a[i].listener===r){s=a[i].listener,o=i;break}if(o<0)return this;o===0?a.shift():PCe(a,o),a.length===1&&(n[t]=a[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};Ko.prototype.off=Ko.prototype.removeListener;Ko.prototype.removeAllListeners=function(t){var r,a,n;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var o=Object.keys(a),i;for(n=0;n<o.length;++n)i=o[n],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=a[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function dX(e,t,r){var a=e._events;if(a===void 0)return[];var n=a[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?ICe(n):gX(n,n.length)}Ko.prototype.listeners=function(t){return dX(this,t,!0)};Ko.prototype.rawListeners=function(t){return dX(this,t,!1)};Ko.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):pX.call(e,t)};Ko.prototype.listenerCount=pX;function pX(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ko.prototype.eventNames=function(){return this._eventsCount>0?I5(this._events):[]};function gX(e,t){for(var r=new Array(t),a=0;a<t;++a)r[a]=e[a];return r}function PCe(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ICe(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function DCe(e,t){return new Promise(function(r,a){function n(i){e.removeListener(t,o),a(i)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}mX(e,t,o,{once:!0}),t!=="error"&&RCe(e,n,{once:!0})})}function RCe(e,t,r){typeof e.on=="function"&&mX(e,"error",t,r)}function mX(e,t,r,a){if(typeof e.on=="function")a.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(o){a.once&&e.removeEventListener(t,n),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var VR=oT.exports.EventEmitter,zCe={init:function(e){if(e._ev instanceof VR)return e;var t=new VR,r=new VR;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(a,n){typeof jQuery!="undefined"&&jQuery(e).trigger(a,n),t.emit(a,n),r.emit(a,n)},e},triggerHandler:function(e,t,r){var a,n;typeof jQuery!="undefined"&&(a=jQuery(e).triggerHandler(t,r));var o=e._ev;if(!o)return a;var i=o._events[t];if(!i)return a;function s(u){if(u.listener){if(o.removeListener(t,u.listener),!u.fired)return u.fired=!0,u.listener.apply(o,[r])}else return u.apply(o,[r])}i=Array.isArray(i)?i:[i];var l;for(l=0;l<i.length-1;l++)s(i[l]);return n=s(i[l]),a!==void 0?a:n},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}},sT=zCe,yX=bt.exports,FCe=k_.dfltConfig;function OCe(e,t){for(var r=[],a,n=0;n<t.length;n++)a=t[n],a===e?r[n]=a:typeof a=="object"?r[n]=Array.isArray(a)?yX.extendDeep([],a):yX.extendDeepAll({},a):r[n]=a;return r}var Fg={};Fg.add=function(e,t,r,a,n){var o,i;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},i=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(i,e.undoQueue.queue.length-i,o),e.undoQueue.index+=1):o=e.undoQueue.queue[i-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(r),o.redo.calls.push(a),o.redo.args.push(n)),e.undoQueue.queue.length>FCe.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};Fg.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};Fg.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};Fg.undo=function(t){var r,a;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,a=0;a<r.undo.calls.length;a++)Fg.plotDo(t,r.undo.calls[a],r.undo.args[a]);t.undoQueue.inSequence=!1,t.autoplay=!1}};Fg.redo=function(t){var r,a;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,a=0;a<r.redo.calls.length;a++)Fg.plotDo(t,r.redo.calls[a],r.redo.args[a]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};Fg.plotDo=function(e,t,r){e.autoplay=!0,r=OCe(e,r),t.apply(null,r)};var NCe=Fg,ly={},xX={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}},bX=bt.exports,_X=bX.extendFlat,BCe=bX.isPlainObject,wX={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},TX={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},$Ce=wX.flags.slice().concat(["fullReplot"]),UCe=TX.flags.slice().concat("layoutReplot"),Jo={traces:wX,layout:TX,traceFlags:function(){return AX($Ce)},layoutFlags:function(){return AX(UCe)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var a=r.split("+"),n=0;n<a.length;n++)e[a[n]]=!0},overrideAll:SX};function AX(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function SX(e,t,r){var a=_X({},e);for(var n in a){var o=a[n];BCe(o)&&(a[n]=MX(o,t,r,n))}return r==="from-root"&&(a.editType=t),a}function MX(e,t,r,a){if(e.valType){var n=_X({},e);if(n.editType=t,Array.isArray(e.items)){n.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)n.items[o]=MX(e.items[o],t)}return n}else return SX(e,t,a.charAt(0)==="_"?"nested":"from-root")}(function(e){var t=Pa,r=bt.exports,a=ao,n=C_,o=xX,i=b5,s=k_.configAttributes,l=Jo,u=r.extendDeepAll,f=r.isPlainObject,c=r.isArrayOrTypedArray,h=r.nestedProperty,v=r.valObjectMeta,p="_isSubplotObj",d="_isLinkedToArray",g="_arrayAttrRegexps",m="_deprecated",y=[p,d,g,m];e.IS_SUBPLOT_OBJ=p,e.IS_LINKED_TO_ARRAY=d,e.DEPRECATED=m,e.UNDERSCORE_ATTRS=y,e.get=function(){var D={};t.allTypes.forEach(function($){D[$]=w($)});var O={};return Object.keys(t.transformsRegistry).forEach(function($){O[$]=k($)}),{defs:{valObjects:v,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:D,layout:A(),transforms:O,frames:T(),animation:L(i),config:L(s)}},e.crawl=function(D,O,$,Y){var X=$||0;Y=Y||"",Object.keys(D).forEach(function(ee){var Q=D[ee];if(y.indexOf(ee)===-1){var Z=(Y?Y+".":"")+ee;O(Q,ee,D,X,Z),!e.isValObject(Q)&&f(Q)&&ee!=="impliedEdits"&&e.crawl(Q,O,X+1,Z)}})},e.isValObject=function(D){return D&&D.valType!==void 0},e.findArrayAttributes=function(D){var O=[],$=[],Y=[],X,ee;function Q(Te,he,xe,Se){$=$.slice(0,Se).concat([he]),Y=Y.slice(0,Se).concat([Te&&Te._isLinkedToArray]);var ye=Te&&(Te.valType==="data_array"||Te.arrayOk===!0)&&!($[Se-1]==="colorbar"&&(he==="ticktext"||he==="tickvals"));!ye||Z(X,0,"")}function Z(Te,he,xe){var Se=Te[$[he]],ye=xe+$[he];if(he===$.length-1)c(Se)&&O.push(ee+ye);else if(Y[he]){if(Array.isArray(Se))for(var re=0;re<Se.length;re++)f(Se[re])&&Z(Se[re],he+1,ye+"["+re+"].")}else f(Se)&&Z(Se,he+1,ye+".")}X=D,ee="",e.crawl(a,Q),D._module&&D._module.attributes&&e.crawl(D._module.attributes,Q);var q=D.transforms;if(q)for(var ae=0;ae<q.length;ae++){var ie=q[ae],we=ie._module;we&&(ee="transforms["+ae+"].",X=ie,e.crawl(we.attributes,Q))}return O},e.getTraceValObject=function(D,O){var $=O[0],Y=1,X,ee;if($==="transforms"){if(O.length===1)return a.transforms;var Q=D.transforms;if(!Array.isArray(Q)||!Q.length)return!1;var Z=O[1];if(!M(Z)||Z>=Q.length)return!1;X=(t.transformsRegistry[Q[Z].type]||{}).attributes,ee=X&&X[O[2]],Y=3}else{var q=D._module;if(q||(q=(t.modules[D.type||a.type.dflt]||{})._module),!q)return!1;if(X=q.attributes,ee=X&&X[$],!ee){var ae=q.basePlotModule;ae&&ae.attributes&&(ee=ae.attributes[$])}ee||(ee=a[$])}return S(ee,O,Y)},e.getLayoutValObject=function(D,O){var $=_(D,O[0]);return S($,O,1)};function _(D,O){var $,Y,X,ee,Q=D._basePlotModules;if(Q){var Z;for($=0;$<Q.length;$++){if(X=Q[$],X.attrRegex&&X.attrRegex.test(O)){if(X.layoutAttrOverrides)return X.layoutAttrOverrides;!Z&&X.layoutAttributes&&(Z=X.layoutAttributes)}var q=X.baseLayoutAttrOverrides;if(q&&O in q)return q[O]}if(Z)return Z}var ae=D._modules;if(ae){for($=0;$<ae.length;$++)if(ee=ae[$].layoutAttributes,ee&&O in ee)return ee[O]}for(Y in t.componentsRegistry){if(X=t.componentsRegistry[Y],X.name==="colorscale"&&O.indexOf("coloraxis")===0)return X.layoutAttributes[O];if(!X.schema&&O===X.name)return X.layoutAttributes}return O in n?n[O]:!1}function S(D,O,$){if(!D)return!1;if(D._isLinkedToArray){if(M(O[$]))$++;else if($<O.length)return!1}for(;$<O.length;$++){var Y=D[O[$]];if(f(Y))D=Y;else break;if($===O.length-1)break;if(D._isLinkedToArray){if($++,!M(O[$]))return!1}else if(D.valType==="info_array"){$++;var X=O[$];if(!M(X))return!1;var ee=D.items;if(Array.isArray(ee)){if(X>=ee.length)return!1;if(D.dimensions===2){if($++,O.length===$)return D;var Q=O[$];if(!M(Q))return!1;D=ee[X][Q]}else D=ee[X]}else D=ee}}return D}function M(D){return D===Math.round(D)&&D>=0}function w(D){var O,$;O=t.modules[D]._module,$=O.basePlotModule;var Y={};Y.type=null;var X=u({},a),ee=u({},O.attributes);e.crawl(ee,function(q,ae,ie,we,Te){h(X,Te).set(void 0),q===void 0&&h(ee,Te).set(void 0)}),u(Y,X),t.traceIs(D,"noOpacity")&&delete Y.opacity,t.traceIs(D,"showLegend")||(delete Y.showlegend,delete Y.legendgroup),t.traceIs(D,"noHover")&&(delete Y.hoverinfo,delete Y.hoverlabel),O.selectPoints||delete Y.selectedpoints,u(Y,ee),$.attributes&&u(Y,$.attributes),Y.type=D;var Q={meta:O.meta||{},categories:O.categories||{},animatable:Boolean(O.animatable),type:D,attributes:L(Y)};if(O.layoutAttributes){var Z={};u(Z,O.layoutAttributes),Q.layoutAttributes=L(Z)}return O.animatable||e.crawl(Q,function(q){e.isValObject(q)&&"anim"in q&&delete q.anim}),Q}function A(){var D={},O,$;u(D,n);for(O in t.subplotsRegistry)if($=t.subplotsRegistry[O],!!$.layoutAttributes)if(Array.isArray($.attr))for(var Y=0;Y<$.attr.length;Y++)B(D,$,$.attr[Y]);else{var X=$.attr==="subplot"?$.name:$.attr;B(D,$,X)}for(O in t.componentsRegistry){$=t.componentsRegistry[O];var ee=$.schema;if(ee&&(ee.subplots||ee.layout)){var Q=ee.subplots;if(Q&&Q.xaxis&&!Q.yaxis)for(var Z in Q.xaxis)delete D.yaxis[Z]}else $.name==="colorscale"?u(D,$.layoutAttributes):$.layoutAttributes&&N(D,$.layoutAttributes,$.name)}return{layoutAttributes:L(D)}}function k(D){var O=t.transformsRegistry[D],$=u({},O.attributes);return Object.keys(t.componentsRegistry).forEach(function(Y){var X=t.componentsRegistry[Y];X.schema&&X.schema.transforms&&X.schema.transforms[D]&&Object.keys(X.schema.transforms[D]).forEach(function(ee){N($,X.schema.transforms[D][ee],ee)})}),{attributes:L($)}}function T(){var D={frames:u({},o)};return L(D),D.frames}function L(D){return C(D),I(D),R(D),D}function C(D){function O(Y){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+Y+"`.",editType:"none"}}function $(Y,X,ee){e.isValObject(Y)?(Y.arrayOk===!0||Y.valType==="data_array")&&(ee[X+"src"]=O(X)):f(Y)&&(Y.role="object")}e.crawl(D,$)}function I(D){function O($,Y,X){if(!!$){var ee=$[d];!ee||(delete $[d],X[Y]={items:{}},X[Y].items[ee]=$,X[Y].role="object")}}e.crawl(D,O)}function R(D){function O($){for(var Y in $)if(f($[Y]))O($[Y]);else if(Array.isArray($[Y]))for(var X=0;X<$[Y].length;X++)O($[Y][X]);else $[Y]instanceof RegExp&&($[Y]=$[Y].toString())}O(D)}function B(D,O,$){var Y=h(D,$),X=u({},O.layoutAttributes);X[p]=!0,Y.set(X)}function N(D,O,$){var Y=h(D,$);Y.set(u(Y.get()||{},O))}})(ly);var Eo={exports:{}},si={},z_=bt.exports,HCe=ao,uy="templateitemname",jR={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};jR[uy]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")};si.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=jR.name,t[uy]=jR[uy],t};si.traceTemplater=function(e){var t={},r,a;for(r in e)a=e[r],Array.isArray(a)&&a.length&&(t[r]=0);function n(o){r=z_.coerce(o,{},HCe,"type");var i={type:r,_template:null};if(r in t){a=e[r];var s=t[r]%a.length;t[r]++,i._template=a[s]}return i}return{newTrace:n}};si.newContainer=function(e,t,r){var a=e._template,n=a&&(a[t]||r&&a[r]);z_.isPlainObject(n)||(n=null);var o=e[t]={_template:n};return o};si.arrayTemplater=function(e,t,r){var a=e._template,n=a&&a[EX(t)],o=a&&a[t];(!Array.isArray(o)||!o.length)&&(o=[]);var i={};function s(u){var f={name:u.name,_input:u},c=f[uy]=u[uy];if(!kX(c))return f._template=n,f;for(var h=0;h<o.length;h++){var v=o[h];if(v.name===c)return i[c]=1,f._template=v,f}return f[r]=u[r]||!1,f._template=!1,f}function l(){for(var u=[],f=0;f<o.length;f++){var c=o[f],h=c.name;if(kX(h)&&!i[h]){var v={_template:c,name:h,_input:{_templateitemname:h}};v[uy]=c[uy],u.push(v),i[h]=1}}return u}return{newItem:s,defaultItems:l}};function kX(e){return e&&typeof e=="string"}function EX(e){var t=e.length-1;return e.charAt(t)!=="s"&&z_.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}si.arrayDefaultKey=EX;si.arrayEditor=function(e,t,r){var a=(z_.nestedProperty(e,t).get()||[]).length,n=r._index,o=n>=a&&(r._input||{})._templateitemname;o&&(n=a);var i=t+"["+n+"]",s;function l(){s={},o&&(s[i]={},s[i][uy]=o)}l();function u(v,p){s[v]=p}function f(v,p){o?z_.nestedProperty(s[i],v).set(p):s[i+"."+v]=p}function c(){var v=s;return l(),v}function h(v,p){v&&f(v,p);var d=c();for(var g in d)z_.nestedProperty(e,g).set(d[g])}return{modifyBase:u,modifyItem:f,getUpdateObj:c,applyUpdate:h}};var As={},lT=M_.counter,Sl={idRegex:{x:lT("x","( domain)?"),y:lT("y","( domain)?")},attrRegex:lT("[xy]axis"),xAxisMatch:lT("xaxis"),yAxisMatch:lT("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}};(function(e){var t=Pa,r=Sl;e.id2name=function(o){if(!(typeof o!="string"||!o.match(r.AX_ID_PATTERN))){var i=o.split(" ")[0].substr(1);return i==="1"&&(i=""),o.charAt(0)+"axis"+i}},e.name2id=function(o){if(!!o.match(r.AX_NAME_PATTERN)){var i=o.substr(5);return i==="1"&&(i=""),o.charAt(0)+i}},e.cleanId=function(o,i,s){var l=/( domain)$/.test(o);if(!(typeof o!="string"||!o.match(r.AX_ID_PATTERN))&&!(i&&o.charAt(0)!==i)&&!(l&&!s)){var u=o.split(" ")[0].substr(1).replace(/^0+/,"");return u==="1"&&(u=""),o.charAt(0)+u+(l&&s?" domain":"")}},e.list=function(n,o,i){var s=n._fullLayout;if(!s)return[];var l=e.listIds(n,o),u=new Array(l.length),f;for(f=0;f<l.length;f++){var c=l[f];u[f]=s[c.charAt(0)+"axis"+c.substr(1)]}if(!i){var h=s._subplots.gl3d||[];for(f=0;f<h.length;f++){var v=s[h[f]];o?u.push(v[o+"axis"]):u.push(v.xaxis,v.yaxis,v.zaxis)}}return u},e.listIds=function(n,o){var i=n._fullLayout;if(!i)return[];var s=i._subplots;return o?s[o+"axis"]:s.xaxis.concat(s.yaxis)},e.getFromId=function(n,o,i){var s=n._fullLayout;return o=o===void 0||typeof o!="string"?o:o.replace(" domain",""),i==="x"?o=o.replace(/y[0-9]*/,""):i==="y"&&(o=o.replace(/x[0-9]*/,"")),s[e.id2name(o)]},e.getFromTrace=function(n,o,i){var s=n._fullLayout,l=null;if(t.traceIs(o,"gl3d")){var u=o.scene;u.substr(0,5)==="scene"&&(l=s[u][i+"axis"])}else l=e.getFromId(n,o[i+"axis"]||i);return l},e.idSort=function(n,o){var i=n.charAt(0),s=o.charAt(0);return i!==s?i>s?1:-1:+(n.substr(1)||1)-+(o.substr(1)||1)},e.ref2id=function(n){return/^[xyz]/.test(n)?n.split(" ")[0]:!1};function a(n,o){if(o&&o.length){for(var i=0;i<o.length;i++)if(o[i][n])return!0}return!1}e.isLinked=function(n,o){return a(o,n._axisMatchGroups)||a(o,n._axisConstraintGroups)}})(As);function GCe(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function VCe(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}var uT={clearOutlineControllers:GCe,clearSelect:VCe},Ml={},fT=Pa,jCe=Sl.SUBPLOT_PATTERN;Ml.getSubplotCalcData=function(e,t,r){var a=fT.subplotsRegistry[t];if(!a)return[];for(var n=a.attr,o=[],i=0;i<e.length;i++){var s=e[i],l=s[0].trace;l[n]===r&&o.push(s)}return o};Ml.getModuleCalcData=function(e,t){var r=[],a=[],n;if(typeof t=="string"?n=fT.getModule(t).plot:typeof t=="function"?n=t:n=t.plot,!n)return[r,e];for(var o=0;o<e.length;o++){var i=e[o],s=i[0].trace;s.visible!==!0||s._length===0||(s._module.plot===n?r.push(i):a.push(i))}return[r,a]};Ml.getSubplotData=function(t,r,a){if(!fT.subplotsRegistry[r])return[];var n=fT.subplotsRegistry[r].attr,o=[],i,s,l;if(r==="gl2d"){var u=a.match(jCe);s="x"+u[1],l="y"+u[2]}for(var f=0;f<t.length;f++)i=t[f],r==="gl2d"&&fT.traceIs(i,"gl2d")?i[n[0]]===s&&i[n[1]]===l&&o.push(i):i[n]===a&&o.push(i);return o};var CX={};(function(e){var t=Pa,r=bt.exports;e.manageCommandObserver=function(l,u,f,c){var h={},v=!0;u&&u._commandObserver&&(h=u._commandObserver),h.cache||(h.cache={}),h.lookupTable={};var p=e.hasSimpleAPICommandBindings(l,f,h.lookupTable);if(u&&u._commandObserver){if(p)return h;if(u._commandObserver.remove)return u._commandObserver.remove(),u._commandObserver=null,h}if(p){a(l,p,h.cache),h.check=function(){if(!!v){var y=a(l,p,h.cache);return y.changed&&c&&h.lookupTable[y.value]!==void 0&&(h.disable(),Promise.resolve(c({value:y.value,type:p.type,prop:p.prop,traces:p.traces,index:h.lookupTable[y.value]})).then(h.enable,h.enable)),y.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],g=0;g<d.length;g++)l._internalOn(d[g],h.check);h.remove=function(){for(var m=0;m<d.length;m++)l._removeInternalListener(d[m],h.check)}}else r.log("Unable to automatically bind plot updates to API command"),h.lookupTable={},h.remove=function(){};return h.disable=function(){v=!1},h.enable=function(){v=!0},u&&(u._commandObserver=h),h},e.hasSimpleAPICommandBindings=function(l,u,f){var c,h=u.length,v;for(c=0;c<h;c++){var p,d=u[c],g=d.method,m=d.args;if(Array.isArray(m)||(m=[]),!g)return!1;var y=e.computeAPICommandBindings(l,g,m);if(y.length!==1)return!1;if(!v)v=y[0],Array.isArray(v.traces)&&v.traces.sort();else{if(p=y[0],p.type!==v.type||p.prop!==v.prop)return!1;if(Array.isArray(v.traces))if(Array.isArray(p.traces)){p.traces.sort();for(var _=0;_<v.traces.length;_++)if(v.traces[_]!==p.traces[_])return!1}else return!1;else if(p.prop!==v.prop)return!1}p=y[0];var S=p.value;if(Array.isArray(S))if(S.length===1)S=S[0];else return!1;f&&(f[S]=c)}return v};function a(l,u,f){var c,h,v,p=!1;if(u.type==="data")c=l._fullData[u.traces!==null?u.traces[0]:0];else if(u.type==="layout")c=l._fullLayout;else return!1;return h=r.nestedProperty(c,u.prop).get(),v=f[u.type]=f[u.type]||{},v.hasOwnProperty(u.prop)&&v[u.prop]!==h&&(p=!0),v[u.prop]=h,{changed:p,value:h}}e.executeAPICommand=function(l,u,f){if(u==="skip")return Promise.resolve();var c=t.apiMethodRegistry[u],h=[l];Array.isArray(f)||(f=[]);for(var v=0;v<f.length;v++)h.push(f[v]);return c.apply(null,h).catch(function(p){return r.warn("API call to Plotly."+u+" rejected.",p),Promise.reject(p)})},e.computeAPICommandBindings=function(l,u,f){var c;switch(Array.isArray(f)||(f=[]),u){case"restyle":c=i(l,f);break;case"relayout":c=o(l,f);break;case"update":c=i(l,[f[0],f[2]]).concat(o(l,[f[1]]));break;case"animate":c=n(l,f);break;default:c=[]}return c};function n(l,u){return Array.isArray(u[0])&&u[0].length===1&&["string","number"].indexOf(typeof u[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:u[0][0].toString()}]:[]}function o(l,u){var f=[],c=u[0],h={};if(typeof c=="string")h[c]=u[1];else if(r.isPlainObject(c))h=c;else return f;return s(h,function(v,p,d){f.push({type:"layout",prop:v,value:d})},"",0),f}function i(l,u){var f,c,h,v,p=[];if(c=u[0],h=u[1],f=u[2],v={},typeof c=="string")v[c]=h;else if(r.isPlainObject(c))v=c,f===void 0&&(f=h);else return p;return f===void 0&&(f=null),s(v,function(d,g,m){var y,_;if(Array.isArray(m)){_=m.slice();var S=Math.min(_.length,l.data.length);f&&(S=Math.min(S,f.length)),y=[];for(var M=0;M<S;M++)y[M]=f?f[M]:M}else _=m,y=f?f.slice():null;if(y===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(y)){if(!Array.isArray(_)){var w=_;_=[];for(var A=0;A<y.length;A++)_[A]=w}_.length=Math.min(y.length,_.length)}p.push({type:"data",prop:d,traces:y,value:_})},"",0),p}function s(l,u,f,c){Object.keys(l).forEach(function(h){var v=l[h];if(h[0]!=="_"){var p=f+(c>0?".":"")+h;r.isPlainObject(v)?s(v,u,p,c+1):u(p,h,v)}})}})(CX);var LX=Ra.exports,qCe=K3.timeFormatLocale,YCe=uW.formatLocale,R5=gn,Bi=Pa,PX=ly,WCe=si,Ua=bt.exports,IX=Oa.exports,DX=Un.BADNUM,Wh=As,XCe=uT.clearSelect,qR=b5,ZCe=xX,KCe=Ml.getModuleCalcData,YR=Ua.relinkPrivateKeys,F_=Ua._,_a=Eo.exports={};Ua.extendFlat(_a,Bi);_a.attributes=ao;_a.attributes.type.values=_a.allTypes;_a.fontAttrs=Ts;_a.layoutAttributes=C_;_a.fontWeight="normal";var z5=_a.transformsRegistry,F5=CX;_a.executeAPICommand=F5.executeAPICommand;_a.computeAPICommandBindings=F5.computeAPICommandBindings;_a.manageCommandObserver=F5.manageCommandObserver;_a.hasSimpleAPICommandBindings=F5.hasSimpleAPICommandBindings;_a.redrawText=function(e){return e=Ua.getGraphDiv(e),new Promise(function(t){setTimeout(function(){!e._fullLayout||(Bi.getComponentMethod("annotations","draw")(e),Bi.getComponentMethod("legend","draw")(e),Bi.getComponentMethod("colorbar","draw")(e),t(_a.previousPromises(e)))},300)})};_a.resize=function(e){e=Ua.getGraphDiv(e);var t,r=new Promise(function(a,n){(!e||Ua.isHidden(e))&&n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=a,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Ua.isHidden(e)){a(e);return}delete e.layout.width,delete e.layout.height;var o=e.changed;e.autoplay=!0,Bi.call("relayout",e,{autosize:!0}).then(function(){e.changed=o,e._resolveResize===a&&(delete e._resolveResize,a(e))})},100)});return t&&t(r),r};_a.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};_a.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=Ua.ensureSingle(t._paper,"text","js-plot-link-container",function(l){l.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:IX.defaultLine,"pointer-events":"all"}).each(function(){var u=LX.select(this);u.append("tspan").classed("js-link-to-tool",!0),u.append("tspan").classed("js-link-spacer",!0),u.append("tspan").classed("js-sourcelinks",!0)})}),a=r.node(),n={y:t._paper.attr("height")-9};document.body.contains(a)&&a.getComputedTextLength()>=t.width-20?(n["text-anchor"]="start",n.x=5):(n["text-anchor"]="end",n.x=t._paper.attr("width")-7),r.attr(n);var o=r.select(".js-link-to-tool"),i=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&JCe(e,o),i.text(o.text()&&s.text()?" - ":"")}};function JCe(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)r.on("click",function(){_a.sendDataToCloud(e)});else{var a=window.location.pathname.split("/"),n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+n})}}_a.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!!t){e.emit("plotly_beforeexport");var r=LX.select(e).append("div").attr("id","hiddenform").style("display","none"),a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),n=a.append("input").attr({type:"text",name:"data"});return n.node().value=_a.graphJson(e,!1,"keepdata"),a.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var QCe=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],eLe=["year","month","dayMonth","dayMonthYear"];_a.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,a=e._fullLayout||{};if(a._skipDefaults){delete a._skipDefaults;return}var n=e._fullLayout={},o=e.layout||{},i=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e.calcdata||[],f=e._context||{},c;e._transitionData||_a.createTransitionData(e),n._dfltTitle={plot:F_(e,"Click to enter Plot title"),x:F_(e,"Click to enter X axis title"),y:F_(e,"Click to enter Y axis title"),colorbar:F_(e,"Click to enter Colorscale title"),annotation:F_(e,"new text")},n._traceWord=F_(e,"trace");var h=RX(e,QCe);if(n._mapboxAccessToken=f.mapboxAccessToken,a._initialAutoSizeIsDone){var v=a.width,p=a.height;_a.supplyLayoutGlobalDefaults(o,n,h),o.width||(n.width=v),o.height||(n.height=p),_a.sanitizeMargins(n)}else{_a.supplyLayoutGlobalDefaults(o,n,h);var d=!o.width||!o.height,g=n.autosize,m=f.autosizable,y=d&&(g||m);y?_a.plotAutoSize(e,o,n):d&&_a.sanitizeMargins(n),!g&&d&&(o.width=n.width,o.height=n.height)}n._d3locale=aLe(h,n.separators),n._extraFormat=RX(e,eLe),n._initialAutoSizeIsDone=!0,n._dataLength=l.length,n._modules=[],n._visibleModules=[],n._basePlotModules=[];var _=n._subplots=rLe(),S=n._splomAxes={x:{},y:{}},M=n._splomSubplots={};n._splomGridDflt={},n._scatterStackOpts={},n._firstScatter={},n._alignmentOpts={},n._colorAxes={},n._requestRangeslider={},n._traceUids=tLe(i,l),n._globalTransforms=(e._context||{}).globalTransforms,_a.supplyDataDefaults(l,s,o,n);var w=Object.keys(S.x),A=Object.keys(S.y);if(w.length>1&&A.length>1){for(Bi.getComponentMethod("grid","sizeDefaults")(o,n),c=0;c<w.length;c++)Ua.pushUnique(_.xaxis,w[c]);for(c=0;c<A.length;c++)Ua.pushUnique(_.yaxis,A[c]);for(var k in M)Ua.pushUnique(_.cartesian,k)}if(n._has=_a._hasPlotType.bind(n),i.length===s.length)for(c=0;c<s.length;c++)YR(s[c],i[c]);_a.supplyLayoutModuleDefaults(o,n,s,e._transitionData);var T=n._visibleModules,L=[];for(c=0;c<T.length;c++){var C=T[c].crossTraceDefaults;C&&Ua.pushUnique(L,C)}for(c=0;c<L.length;c++)L[c](s,n);n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&w.length>15&&A.length>15&&n.shapes.length===0&&n.images.length===0,_a.linkSubplots(s,n,i,a),_a.cleanPlot(s,n,i,a);var I=!!(a._has&&a._has("gl2d")),R=!!(n._has&&n._has("gl2d")),B=!!(a._has&&a._has("cartesian")),N=!!(n._has&&n._has("cartesian")),D=B||I,O=N||R;D&&!O?a._bgLayer.remove():O&&!D&&(n._shouldCreateBgLayer=!0),a._zoomlayer&&!e._dragging&&XCe({_fullLayout:a}),nLe(s,n),YR(n,a),Bi.getComponentMethod("colorscale","crossTraceDefaults")(s,n),n._preGUI||(n._preGUI={}),n._tracePreGUI||(n._tracePreGUI={});var $=n._tracePreGUI,Y={},X;for(X in $)Y[X]="old";for(c=0;c<s.length;c++)X=s[c]._fullInput.uid,Y[X]||($[X]={}),Y[X]="new";for(X in Y)Y[X]==="old"&&delete $[X];FX(n),Bi.getComponentMethod("rangeslider","makeData")(n),!r&&u.length===s.length&&_a.supplyDefaultsUpdateCalc(u,s)};_a.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var a=t[r],n=(e[r]||[])[0];if(n&&n.trace){var o=n.trace;if(o._hasCalcTransform){var i=o._arrayAttrs,s,l,u;for(s=0;s<i.length;s++)l=i[s],u=Ua.nestedProperty(o,l).get().slice(),Ua.nestedProperty(a,l).set(u)}n.trace=a}}};function tLe(e,t){var r=t.length,a=[],n,o;for(n=0;n<e.length;n++){var i=e[n]._fullInput;i!==o&&a.push(i),o=i}var s=a.length,l=new Array(r),u={};function f(v,p){l[p]=v,u[v]=1}function c(v,p){if(v&&typeof v=="string"&&!u[v])return f(v,p),!0}for(n=0;n<r;n++){var h=t[n].uid;typeof h=="number"&&(h=String(h)),!c(h,n)&&(n<s&&c(a[n].uid,n)||f(Ua.randstr(u),n))}return l}function rLe(){var e=Bi.collectableSubplotTypes,t={},r,a;if(!e){e=[];var n=Bi.subplotsRegistry;for(var o in n){var i=n[o],s=i.attr;if(s&&(e.push(o),Array.isArray(s)))for(a=0;a<s.length;a++)Ua.pushUnique(e,s[a])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function RX(e,t){var r=e._context.locale;r||(r="en-US");var a=!1,n={};function o(c){for(var h=!0,v=0;v<t.length;v++){var p=t[v];n[p]||(c[p]?n[p]=c[p]:h=!1)}h&&(a=!0)}for(var i=0;i<2;i++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(o(u),a))break;s=Bi.localeRegistry}var f=r.split("-")[0];if(a||f===r)break;r=f}return a||o(Bi.localeRegistry.en.format),n}function aLe(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=YCe(e).format(Ua.adjustFormat(r))}catch{return Ua.warnBadFormat(r),Ua.noFormat}return r},timeFormat:qCe(e).utcFormat}}function nLe(e,t){var r,a=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var n=0;n<e.length;n++){var o=e[n];o.meta?a[o.index]=o._meta={meta:o.meta}:t.meta&&(o._meta={meta:t.meta}),t.meta&&(o._meta.layout={meta:t.meta})}a.length&&(r||(r=t._meta={}),r.data=a)}_a.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};_a._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var a=this._modules||[];for(t=0;t<a.length;t++){var n=a[t].name;if(n===e)return!0;var o=Bi.modules[n];if(o&&o.categories[e])return!0}return!1};_a.cleanPlot=function(e,t,r,a){var n,o,i=a._basePlotModules||[];for(n=0;n<i.length;n++){var s=i[n];s.clean&&s.clean(e,t,r,a)}var l=a._has&&a._has("gl"),u=t._has&&t._has("gl");l&&!u&&a._glcontainer!==void 0&&(a._glcontainer.selectAll(".gl-canvas").remove(),a._glcontainer.selectAll(".no-webgl").remove(),a._glcanvas=null);var f=!!a._infolayer;e:for(n=0;n<r.length;n++){var c=r[n],h=c.uid;for(o=0;o<e.length;o++){var v=e[o];if(h===v.uid)continue e}f&&a._infolayer.select(".cb"+h).remove()}};_a.linkSubplots=function(e,t,r,a){var n,o,i=a._plots||{},s=t._plots={},l=t._subplots,u={_fullData:e,_fullLayout:t},f=l.cartesian.concat(l.gl2d||[]);for(n=0;n<f.length;n++){var c=f[n],h=i[c],v=Wh.getFromId(u,c,"x"),p=Wh.getFromId(u,c,"y"),d;for(h?d=s[c]=h:(d=s[c]={},d.id=c),v._counterAxes.push(p._id),p._counterAxes.push(v._id),v._subplotsWith.push(c),p._subplotsWith.push(c),d.xaxis=v,d.yaxis=p,d._hasClipOnAxisFalse=!1,o=0;o<e.length;o++){var g=e[o];if(g.xaxis===d.xaxis._id&&g.yaxis===d.yaxis._id&&g.cliponaxis===!1){d._hasClipOnAxisFalse=!0;break}}}var m=Wh.list(u,null,!0),y;for(n=0;n<m.length;n++){y=m[n];var _=null;y.overlaying&&(_=Wh.getFromId(u,y.overlaying),_&&_.overlaying&&(y.overlaying=!1,_=null)),y._mainAxis=_||y,_&&(y.domain=_.domain.slice()),y._anchorAxis=y.anchor==="free"?null:Wh.getFromId(u,y.anchor)}for(n=0;n<m.length;n++)if(y=m[n],y._counterAxes.sort(Wh.idSort),y._subplotsWith.sort(Ua.subplotSort),y._mainSubplot=iLe(y,t),y._counterAxes.length&&(y.spikemode&&y.spikemode.indexOf("across")!==-1||y.automargin&&y.mirror&&y.anchor!=="free"||Bi.getComponentMethod("rangeslider","isVisible")(y))){var S=1,M=0;for(o=0;o<y._counterAxes.length;o++){var w=Wh.getFromId(u,y._counterAxes[o]);S=Math.min(S,w.domain[0]),M=Math.max(M,w.domain[1])}S<M&&(y._counterDomainMin=S,y._counterDomainMax=M)}};function iLe(e,t){var r={_fullLayout:t},a=e._id.charAt(0)==="x",n=e._mainAxis._anchorAxis,o="",i="",s="";if(n&&(s=n._mainAxis._id,o=a?e._id+s:s+e._id),!o||!t._plots[o]){o="";for(var l=e._counterAxes,u=0;u<l.length;u++){var f=l[u],c=a?e._id+f:f+e._id;i||(i=c);var h=Wh.getFromId(r,f);if(s&&h.overlaying===s){o=c;break}}}return o||i}_a.clearExpandedTraceDefaultColors=function(e){var t,r,a;function n(i,s,l,u){r[u]=s,r.length=u+1,i.valType==="color"&&i.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],PX.crawl(e._module.attributes,n)),a=0;a<t.length;a++){var o=Ua.nestedProperty(e,"_input."+t[a]);o.get()||Ua.nestedProperty(e,t[a]).set(null)}};_a.supplyDataDefaults=function(e,t,r,a){var n=a._modules,o=a._visibleModules,i=a._basePlotModules,s=0,l=0,u,f,c;a._transformModules=[];function h(A){t.push(A);var k=A._module;!k||(Ua.pushUnique(n,k),A.visible===!0&&Ua.pushUnique(o,k),Ua.pushUnique(i,A._module.basePlotModule),s++,A._input.visible!==!1&&l++)}var v={},p=[],d=(r.template||{}).data||{},g=WCe.traceTemplater(d);for(u=0;u<e.length;u++){if(c=e[u],f=g.newTrace(c),f.uid=a._traceUids[u],_a.supplyTraceDefaults(c,f,l,a,u),f.index=u,f._input=c,f._expandedIndex=s,f.transforms&&f.transforms.length)for(var m=c.visible!==!1&&f.visible===!1,y=oLe(f,t,r,a),_=0;_<y.length;_++){var S=y[_],M={_template:f._template,type:f.type,uid:f.uid+_};m&&S.visible===!1&&delete S.visible,_a.supplyTraceDefaults(S,M,s,a,u),YR(M,S),M.index=u,M._input=c,M._fullInput=f,M._expandedIndex=s,M._expandedInput=S,h(M)}else f._fullInput=f,f._expandedInput=f,h(f);Bi.traceIs(f,"carpetAxis")&&(v[f.carpet]=f),Bi.traceIs(f,"carpetDependent")&&p.push(u)}for(u=0;u<p.length;u++)if(f=t[p[u]],!!f.visible){var w=v[f.carpet];if(f._carpet=w,!w||!w.visible){f.visible=!1;continue}f.xaxis=w.xaxis,f.yaxis=w.yaxis}};_a.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function a(n,o){return Ua.coerce(e||{},r,qR,n,o)}if(a("mode"),a("direction"),a("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=_a.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=_a.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=_a.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=_a.supplyAnimationTransitionDefaults(e.transition||{});return r};_a.supplyAnimationFrameDefaults=function(e){var t={};function r(a,n){return Ua.coerce(e||{},t,qR.frame,a,n)}return r("duration"),r("redraw"),t};_a.supplyAnimationTransitionDefaults=function(e){var t={};function r(a,n){return Ua.coerce(e||{},t,qR.transition,a,n)}return r("duration"),r("easing"),t};_a.supplyFrameDefaults=function(e){var t={};function r(a,n){return Ua.coerce(e,t,ZCe,a,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};_a.supplyTraceDefaults=function(e,t,r,a,n){var o=a.colorway||IX.defaults,i=o[r%o.length],s;function l(y,_){return Ua.coerce(e,t,_a.attributes,y,_)}var u=l("visible");l("type"),l("name",a._traceWord+" "+n),l("uirevision",a.uirevision);var f=_a.getModule(t);if(t._module=f,f){var c=f.basePlotModule,h=c.attr,v=c.attributes;if(h&&v){var p=a._subplots,d="";if(u||c.name!=="gl2d"){if(Array.isArray(h))for(s=0;s<h.length;s++){var g=h[s],m=Ua.coerce(e,t,v,g);p[g]&&Ua.pushUnique(p[g],m),d+=m}else d=Ua.coerce(e,t,v,h);p[c.name]&&Ua.pushUnique(p[c.name],d)}}}return u&&(l("customdata"),l("ids"),l("meta"),Bi.traceIs(t,"showLegend")?(Ua.coerce(e,t,f.attributes.showlegend?f.attributes:_a.attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,f&&f.supplyDefaults(e,t,i,a),Bi.traceIs(t,"noOpacity")||l("opacity"),Bi.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Bi.traceIs(t,"noHover")||(t.hovertemplate||Ua.coerceHoverinfo(e,t,a),t.type!=="parcats"&&Bi.getComponentMethod("fx","supplyDefaults")(e,t,i,a)),f&&f.selectPoints&&l("selectedpoints"),_a.supplyTransformDefaults(e,t,a)),t};function zX(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var a=t[r],n=a._module||z5[a.type];if(n&&n.makesData)return!0}return!1}_a.hasMakesDataTransform=zX;_a.supplyTransformDefaults=function(e,t,r){if(!!(t._length||zX(e))){var a=r._globalTransforms||[],n=r._transformModules||[];if(!(!Array.isArray(e.transforms)&&a.length===0))for(var o=e.transforms||[],i=a.concat(o),s=t.transforms=[],l=0;l<i.length;l++){var u=i[l],f=u.type,c=z5[f],h,v=!(u._module&&u._module===c),p=c&&typeof c.transform=="function";c||Ua.warn("Unrecognized transform type "+f+"."),c&&c.supplyDefaults&&(v||p)?(h=c.supplyDefaults(u,t,r,e),h.type=f,h._module=c,Ua.pushUnique(n,c)):h=Ua.extendFlat({},u),s.push(h)}}};function oLe(e,t,r,a){for(var n=e.transforms,o=[e],i=0;i<n.length;i++){var s=n[i],l=z5[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:a,transformIndex:i}))}return o}_a.supplyLayoutGlobalDefaults=function(e,t,r){function a(u,f){return Ua.coerce(e,t,_a.layoutAttributes,u,f)}var n=e.template;Ua.isPlainObject(n)&&(t.template=n,t._template=n.layout,t._dataTemplate=n.data),a("autotypenumbers");var o=Ua.coerceFont(a,"font"),i=o.size;Ua.coerceFont(a,"title.font",Ua.extendFlat({},o,{size:Math.round(i*1.4)})),a("title.text",t._dfltTitle.plot),a("title.xref"),a("title.yref"),a("title.x"),a("title.y"),a("title.xanchor"),a("title.yanchor"),a("title.pad.t"),a("title.pad.r"),a("title.pad.b"),a("title.pad.l");var s=a("uniformtext.mode");s&&a("uniformtext.minsize"),a("autosize",!(e.width&&e.height)),a("width"),a("height"),a("margin.l"),a("margin.r"),a("margin.t"),a("margin.b"),a("margin.pad"),a("margin.autoexpand"),e.width&&e.height&&_a.sanitizeMargins(t),Bi.getComponentMethod("grid","sizeDefaults")(e,t),a("paper_bgcolor"),a("separators",r.decimal+r.thousands),a("hidesources"),a("colorway"),a("datarevision");var l=a("uirevision");a("editrevision",l),a("selectionrevision",l),Bi.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Bi.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,a),a("meta"),Ua.isPlainObject(e.transition)&&(a("transition.duration"),a("transition.easing"),a("transition.ordering")),Bi.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Bi.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,a)};function O5(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}_a.plotAutoSize=function(t,r,a){var n=t._context||{},o=n.frameMargins,i,s,l=Ua.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),n.fillFrame)i=window.innerWidth,s=window.innerHeight,document.body.style.overflow="hidden";else{var u=l?window.getComputedStyle(t):{};if(i=O5(u.width)||O5(u.maxWidth)||a.width,s=O5(u.height)||O5(u.maxHeight)||a.height,R5(o)&&o>0){var f=1-2*o;i=Math.round(f*i),s=Math.round(f*s)}}var c=_a.layoutAttributes.width.min,h=_a.layoutAttributes.height.min;i<c&&(i=c),s<h&&(s=h);var v=!r.width&&Math.abs(a.width-i)>1,p=!r.height&&Math.abs(a.height-s)>1;(p||v)&&(v&&(a.width=i),p&&(a.height=s)),t._initialAutoSize||(t._initialAutoSize={width:i,height:s}),_a.sanitizeMargins(a)};_a.supplyLayoutModuleDefaults=function(e,t,r,a){var n=Bi.componentsRegistry,o=t._basePlotModules,i,s,l,u=Bi.subplotsRegistry.cartesian;for(i in n)l=n[i],l.includeBasePlot&&l.includeBasePlot(e,t);o.length||o.push(u),t._has("cartesian")&&(Bi.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t));for(var f in t._subplots)t._subplots[f].sort(Ua.subplotSort);for(s=0;s<o.length;s++)l=o[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var c=t._modules;for(s=0;s<c.length;s++)l=c[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var h=t._transformModules;for(s=0;s<h.length;s++)l=h[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r,a);for(i in n)l=n[i],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r)};_a.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Ua.clearThrottle(),Ua.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};_a.style=function(e){var t=e._fullLayout._visibleModules,r=[],a;for(a=0;a<t.length;a++){var n=t[a];n.style&&Ua.pushUnique(r,n.style)}for(a=0;a<r.length;a++)r[a](e)};_a.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,a=e.margin,n=t-(a.l+a.r),o=r-(a.t+a.b),i;n<0&&(i=(t-1)/(a.l+a.r),a.l=Math.floor(i*a.l),a.r=Math.floor(i*a.r)),o<0&&(i=(r-1)/(a.t+a.b),a.t=Math.floor(i*a.t),a.b=Math.floor(i*a.b))}};_a.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};_a.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function FX(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}var OX=2,NX=2,BX=64,$X=64;_a.autoMargin=function(e,t,r){var a=e._fullLayout,n=a.width,o=a.height,i=a.margin,s=Ua.constrain(n-i.l-i.r,OX,BX),l=Ua.constrain(o-i.t-i.b,NX,$X),u=Math.max(0,n-s),f=Math.max(0,o-l),c=a._pushmargin,h=a._pushmarginIds;if(i.autoexpand!==!1){if(!r)delete c[t],delete h[t];else{var v=r.pad;if(v===void 0&&(v=Math.min(12,i.l,i.r,i.t,i.b)),u){var p=(r.l+r.r)/u;p>1&&(r.l/=p,r.r/=p)}if(f){var d=(r.t+r.b)/f;d>1&&(r.t/=d,r.b/=d)}var g=r.xl!==void 0?r.xl:r.x,m=r.xr!==void 0?r.xr:r.x,y=r.yt!==void 0?r.yt:r.y,_=r.yb!==void 0?r.yb:r.y;c[t]={l:{val:g,size:r.l+v},r:{val:m,size:r.r+v},b:{val:_,size:r.b+v},t:{val:y,size:r.t+v}},h[t]=1}if(!a._replotting)return _a.doAutoMargin(e)}};_a.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,a=t.height;t._size||(t._size={}),FX(t);var n=t._size,o=t.margin,i=Ua.extendFlat({},n),s=o.l,l=o.r,u=o.t,f=o.b,c=t._pushmargin,h=t._pushmarginIds;if(t.margin.autoexpand!==!1){for(var v in c)h[v]||delete c[v];c.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:u},b:{val:0,size:f}};for(var p in c){var d=c[p].l||{},g=c[p].b||{},m=d.val,y=d.size,_=g.val,S=g.size;for(var M in c){if(R5(y)&&c[M].r){var w=c[M].r.val,A=c[M].r.size;if(w>m){var k=(y*w+(A-r)*m)/(w-m),T=(A*(1-m)+(y-r)*(1-w))/(w-m);k+T>s+l&&(s=k,l=T)}}if(R5(S)&&c[M].t){var L=c[M].t.val,C=c[M].t.size;if(L>_){var I=(S*L+(C-a)*_)/(L-_),R=(C*(1-_)+(S-a)*(1-L))/(L-_);I+R>f+u&&(f=I,u=R)}}}}}var B=Ua.constrain(r-o.l-o.r,OX,BX),N=Ua.constrain(a-o.t-o.b,NX,$X),D=Math.max(0,r-B),O=Math.max(0,a-N);if(D){var $=(s+l)/D;$>1&&(s/=$,l/=$)}if(O){var Y=(f+u)/O;Y>1&&(f/=Y,u/=Y)}if(n.l=Math.round(s),n.r=Math.round(l),n.t=Math.round(u),n.b=Math.round(f),n.p=Math.round(o.pad),n.w=Math.round(r)-n.l-n.r,n.h=Math.round(a)-n.t-n.b,!t._replotting&&_a.didMarginChange(i,n)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var X=3*(1+Object.keys(h).length);if(t._redrawFromAutoMarginCount<X)return Bi.call("_doPlot",e);t._size=i,Ua.warn("Too many auto-margin redraws.")}sLe(e)};function sLe(e){var t=Wh.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var a=0;a<t.length;a++){var n=t[a][r];n&&n()}})}var UX=["l","r","t","b","p","w","h"];_a.didMarginChange=function(e,t){for(var r=0;r<UX.length;r++){var a=UX[r],n=e[a],o=t[a];if(!R5(n)||Math.abs(o-n)>1)return!0}return!1};_a.graphJson=function(e,t,r,a,n,o){(n&&t&&!e._fullData||n&&!t&&!e._fullLayout)&&_a.supplyDefaults(e);var i=n?e._fullData:e.data,s=n?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(h,v){if(typeof h=="function")return v?"_function_":null;if(Ua.isPlainObject(h)){var p={},d;return Object.keys(h).sort().forEach(function(g){if(["_","["].indexOf(g.charAt(0))===-1){if(typeof h[g]=="function"){v&&(p[g]="_function");return}if(r==="keepdata"){if(g.substr(g.length-3)==="src")return}else if(r==="keepstream"){if(d=h[g+"src"],typeof d=="string"&&d.indexOf(":")>0&&!Ua.isPlainObject(h.stream))return}else if(r!=="keepall"&&(d=h[g+"src"],typeof d=="string"&&d.indexOf(":")>0))return;p[g]=u(h[g],v)}}),p}return Array.isArray(h)?h.map(function(g){return u(g,v)}):Ua.isTypedArray(h)?Ua.simpleMap(h,Ua.identity):Ua.isJSDate(h)?Ua.ms2DateTimeLocal(+h):h}var f={data:(i||[]).map(function(h){var v=u(h);return t&&delete v.fit,v})};if(!t&&(f.layout=u(s),n)){var c=s._size;f.layout.computed={margin:{b:c.b,l:c.l,r:c.r,t:c.t}}}return l&&(f.frames=u(l)),o&&(f.config=u(e._context,!0)),a==="object"?f:JSON.stringify(f)};_a.modifyFrames=function(e,t){var r,a,n,o=e._transitionData._frames,i=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(a=t[r],a.type){case"replace":n=a.value;var s=(o[a.index]||{}).name,l=n.name;o[a.index]=i[l]=n,l!==s&&(delete i[s],i[l]=n);break;case"insert":n=a.value,i[n.name]=n,o.splice(a.index,0,n);break;case"delete":n=o[a.index],delete i[n.name],o.splice(a.index,1);break}return Promise.resolve()};_a.computeFrame=function(e,t){var r=e._transitionData._frameHash,a,n,o,i;if(!t)throw new Error("computeFrame must be given a string frame name");var s=r[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=r[s.baseframe.toString()])&&u.indexOf(s.name)===-1;)l.push(s),u.push(s.name);for(var f={};s=l.pop();)if(s.layout&&(f.layout=_a.extendLayout(f.layout,s.layout)),s.data){if(f.data||(f.data=[]),n=s.traces,!n)for(n=[],a=0;a<s.data.length;a++)n[a]=a;for(f.traces||(f.traces=[]),a=0;a<s.data.length;a++)o=n[a],o!=null&&(i=f.traces.indexOf(o),i===-1&&(i=f.data.length,f.traces[i]=o),f.data[i]=_a.extendTrace(f.data[i],s.data[a]))}return f};_a.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,a=0;a<r.length;a++){var n=r[a];n&&n.name&&(t[n.name]=n)}};_a.extendObjectWithContainers=function(e,t,r){var a,n,o,i,s,l,u,f,c=Ua.extendDeepNoArrays({},t||{}),h=Ua.expandObjectPaths(c),v={};if(r&&r.length)for(o=0;o<r.length;o++)a=Ua.nestedProperty(h,r[o]),n=a.get(),n===void 0?Ua.nestedProperty(v,r[o]).set(null):(a.set(null),Ua.nestedProperty(v,r[o]).set(n));if(e=Ua.extendDeepNoArrays(e||{},h),r&&r.length){for(o=0;o<r.length;o++)if(s=Ua.nestedProperty(v,r[o]),u=s.get(),!!u){for(l=Ua.nestedProperty(e,r[o]),f=l.get(),Array.isArray(f)||(f=[],l.set(f)),i=0;i<u.length;i++){var p=u[i];p===null?f[i]=null:f[i]=_a.extendObjectWithContainers(f[i],p)}l.set(f)}}return e};_a.dataArrayContainers=["transforms","dimensions"];_a.layoutArrayContainers=Bi.layoutArrayContainers;_a.extendTrace=function(e,t){return _a.extendObjectWithContainers(e,t,_a.dataArrayContainers)};_a.extendLayout=function(e,t){return _a.extendObjectWithContainers(e,t,_a.layoutArrayContainers)};_a.transition=function(e,t,r,a,n,o){var i={redraw:n.redraw},s={},l=[];return i.prepareFn=function(){for(var u=Array.isArray(t)?t.length:0,f=a.slice(0,u),c=0;c<f.length;c++){var h=f[c],v=e._fullData[h],p=v._module;if(!!p){if(p.animatable){var d=p.basePlotModule.name;s[d]||(s[d]=[]),s[d].push(h)}e.data[f[c]]=_a.extendTrace(e.data[f[c]],t[c])}}var g=Ua.expandObjectPaths(Ua.extendDeepNoArrays({},r)),m=/^[xy]axis[0-9]*$/;for(var y in g)!m.test(y)||delete g[y].range;_a.extendLayout(e.layout,g),delete e.calcdata,_a.supplyDefaults(e),_a.doCalcdata(e);var _=Ua.expandObjectPaths(r);if(_){var S=e._fullLayout._plots;for(var M in S){var w=S[M],A=w.xaxis,k=w.yaxis,T=A.range.slice(),L=k.range.slice(),C=null,I=null,R=null,B=null;Array.isArray(_[A._name+".range"])?C=_[A._name+".range"].slice():Array.isArray((_[A._name]||{}).range)&&(C=_[A._name].range.slice()),Array.isArray(_[k._name+".range"])?I=_[k._name+".range"].slice():Array.isArray((_[k._name]||{}).range)&&(I=_[k._name].range.slice()),T&&C&&(A.r2l(T[0])!==A.r2l(C[0])||A.r2l(T[1])!==A.r2l(C[1]))&&(R={xr0:T,xr1:C}),L&&I&&(k.r2l(L[0])!==k.r2l(I[0])||k.r2l(L[1])!==k.r2l(I[1]))&&(B={yr0:L,yr1:I}),(R||B)&&l.push(Ua.extendFlat({plotinfo:w},R,B))}}return Promise.resolve()},i.runFn=function(u){var f,c=e._fullLayout._basePlotModules,h=l.length,v;if(r)for(v=0;v<c.length;v++)c[v].transitionAxes&&c[v].transitionAxes(e,l,o,u);h?(f=Ua.extendFlat({},o),f.duration=0,delete s.cartesian):f=o;for(var p in s){var d=s[p],g=e._fullData[d[0]]._module;g.basePlotModule.plot(e,d,f,u)}},HX(e,o,i)};_a.transitionFromReact=function(e,t,r,a){var n=e._fullLayout,o=n.transition,i={},s=[];return i.prepareFn=function(){var l=n._plots;i.redraw=!1,t.anim==="some"&&(i.redraw=!0),r.anim==="some"&&(i.redraw=!0);for(var u in l){var f=l[u],c=f.xaxis,h=f.yaxis,v=a[c._name].range.slice(),p=a[h._name].range.slice(),d=c.range.slice(),g=h.range.slice();c.setScale(),h.setScale();var m=null,y=null;(c.r2l(v[0])!==c.r2l(d[0])||c.r2l(v[1])!==c.r2l(d[1]))&&(m={xr0:v,xr1:d}),(h.r2l(p[0])!==h.r2l(g[0])||h.r2l(p[1])!==h.r2l(g[1]))&&(y={yr0:p,yr1:g}),(m||y)&&s.push(Ua.extendFlat({plotinfo:f},m,y))}return Promise.resolve()},i.runFn=function(l){for(var u=e._fullData,f=e._fullLayout,c=f._basePlotModules,h,v,p,d=[],g=0;g<u.length;g++)d.push(g);function m(){if(!!e._fullLayout)for(var _=0;_<c.length;_++)c[_].transitionAxes&&c[_].transitionAxes(e,s,h,l)}function y(){if(!!e._fullLayout)for(var _=0;_<c.length;_++)c[_].plot(e,p,v,l)}s.length&&t.anim?o.ordering==="traces first"?(h=Ua.extendFlat({},o,{duration:0}),p=d,v=o,setTimeout(m,o.duration),y()):(h=o,p=null,v=Ua.extendFlat({},o,{duration:0}),setTimeout(y,h.duration),m()):s.length?(h=o,m()):t.anim&&(p=d,v=o,y())},HX(e,o,i)};function HX(e,t,r){var a=!1;function n(c){var h=Promise.resolve();if(!c)return h;for(;c.length;)h=h.then(c.shift());return h}function o(c){if(!!c)for(;c.length;)c.shift()}function i(){return e.emit("plotly_transitioning",[]),new Promise(function(c){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){a=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return Bi.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var h=0,v=0;function p(){return h++,function(){v++,!a&&v===h&&s(c)}}r.runFn(p),setTimeout(p())})}function s(c){if(!!e._transitionData)return o(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return Bi.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(c)}function l(){if(!!e._transitionData)return e._transitioning=!1,n(e._transitionData._interruptCallbacks)}var u=[_a.previousPromises,l,r.prepareFn,_a.rehover,i],f=Ua.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve()),f.then(function(){return e})}_a.doCalcdata=function(e,t){var r=Wh.list(e),a=e._fullData,n=e._fullLayout,o,i,s,l,u=new Array(a.length),f=(e.calcdata||[]).slice();for(e.calcdata=u,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},s=0;s<a.length;s++)if(Array.isArray(t)&&t.indexOf(s)===-1){u[s]=f[s];continue}for(s=0;s<a.length;s++)o=a[s],o._arrayAttrs=PX.findArrayAttributes(o),o._extremes={};var c=n._subplots.polar||[];for(s=0;s<c.length;s++)r.push(n[c[s]].radialaxis,n[c[s]].angularaxis);for(var h in n._colorAxes){var v=n[h];v.cauto!==!1&&(delete v.cmin,delete v.cmax)}var p=!1;function d(y){if(o=a[y],i=o._module,o.visible===!0&&o.transforms){if(i&&i.calc){var _=i.calc(e,o);_[0]&&_[0].t&&_[0].t._scene&&delete _[0].t._scene.dirty}for(l=0;l<o.transforms.length;l++){var S=o.transforms[l];i=z5[S.type],i&&i.calcTransform&&(o._hasCalcTransform=!0,p=!0,i.calcTransform(e,o,S))}}}function g(y,_){if(o=a[y],i=o._module,!!i.isContainer===_){var S=[];if(o.visible===!0&&o._length!==0){delete o._indexToPoints;var M=o.transforms||[];for(l=M.length-1;l>=0;l--)if(M[l].enabled){o._indexToPoints=M[l]._indexToPoints;break}i&&i.calc&&(S=i.calc(e,o))}(!Array.isArray(S)||!S[0])&&(S=[{x:DX,y:DX}]),S[0].t||(S[0].t={}),S[0].trace=o,u[y]=S}}for(GX(r,a,n),s=0;s<a.length;s++)g(s,!0);for(s=0;s<a.length;s++)d(s);for(p&&GX(r,a,n),s=0;s<a.length;s++)g(s,!0);for(s=0;s<a.length;s++)g(s,!1);VX(e);var m=uLe(r,e);if(m.length){for(n._numBoxes=0,n._numViolins=0,s=0;s<m.length;s++)g(m[s],!0);for(s=0;s<m.length;s++)g(m[s],!1);VX(e)}Bi.getComponentMethod("fx","calc")(e),Bi.getComponentMethod("errorbars","calc")(e)};var lLe=/(total|sum|min|max|mean|median) (ascending|descending)/;function uLe(e,t){var r=[],a,n,o,i,s;function l(D,O,$){var Y=O._id.charAt(0);if(D==="histogram2dcontour"){var X=O._counterAxes[0],ee=Wh.getFromId(t,X),Q=Y==="x"||X==="x"&&ee.type==="category",Z=Y==="y"||X==="y"&&ee.type==="category";return function(q,ae){return q===0||ae===0||Q&&q===$[ae].length-1||Z&&ae===$.length-1?-1:(Y==="y"?ae:q)-1}}else return function(q,ae){return Y==="y"?ae:q}}var u={min:function(D){return Ua.aggNums(Math.min,null,D)},max:function(D){return Ua.aggNums(Math.max,null,D)},sum:function(D){return Ua.aggNums(function(O,$){return O+$},null,D)},total:function(D){return Ua.aggNums(function(O,$){return O+$},null,D)},mean:function(D){return Ua.mean(D)},median:function(D){return Ua.median(D)}};for(a=0;a<e.length;a++){var f=e[a];if(f.type==="category"){var c=f.categoryorder.match(lLe);if(c){var h=c[1],v=c[2],p=f._id.charAt(0),d=p==="x",g=[];for(n=0;n<f._categories.length;n++)g.push([f._categories[n],[]]);for(n=0;n<f._traceIndices.length;n++){var m=f._traceIndices[n],y=t._fullData[m];if(y.visible===!0){var _=y.type;Bi.traceIs(y,"histogram")&&(delete y._xautoBinFinished,delete y._yautoBinFinished);var S=_==="splom",M=_==="scattergl",w=t.calcdata[m];for(o=0;o<w.length;o++){var A=w[o],k,T;if(S){var L=y._axesDim[f._id];if(!d){var C=y._diag[L][0];C&&(f=t._fullLayout[Wh.id2name(C)])}var I=A.trace.dimensions[L].values;for(i=0;i<I.length;i++)for(k=f._categoriesMap[I[i]],s=0;s<A.trace.dimensions.length;s++)if(s!==L){var R=A.trace.dimensions[s];g[k][1].push(R.values[i])}}else if(M){for(i=0;i<A.t.x.length;i++)d?(k=A.t.x[i],T=A.t.y[i]):(k=A.t.y[i],T=A.t.x[i]),g[k][1].push(T);A.t&&A.t._scene&&delete A.t._scene.dirty}else if(A.hasOwnProperty("z")){T=A.z;var B=l(y.type,f,T);for(i=0;i<T.length;i++)for(s=0;s<T[i].length;s++)k=B(s,i),k+1&&g[k][1].push(T[i][s])}else for(k=A.p,k===void 0&&(k=A[p]),T=A.s,T===void 0&&(T=A.v),T===void 0&&(T=d?A.y:A.x),Array.isArray(T)||(T===void 0?T=[]:T=[T]),i=0;i<T.length;i++)g[k][1].push(T[i])}}}f._categoriesValue=g;var N=[];for(n=0;n<g.length;n++)N.push([g[n][0],u[h](g[n][1])]);N.sort(function(D,O){return D[1]-O[1]}),f._categoriesAggregatedValue=N,f._initialCategories=N.map(function(D){return D[0]}),v==="descending"&&f._initialCategories.reverse(),r=r.concat(f.sortByInitialCategories())}}}return r}function GX(e,t,r){var a={};function n(l){l.clearCalc(),l.type==="multicategory"&&l.setupMultiCategory(t),a[l._id]=1}Ua.simpleMap(e,n);for(var o=r._axisMatchGroups||[],i=0;i<o.length;i++)for(var s in o[i])a[s]||n(r[Wh.id2name(s)])}function VX(e){var t=e._fullLayout,r=t._visibleModules,a={},n,o,i;for(o=0;o<r.length;o++){var s=r[o],l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;a[u]?Ua.pushUnique(a[u],l):a[u]=[l]}}for(i in a){var f=a[i],c=t._subplots[i];if(Array.isArray(c))for(n=0;n<c.length;n++){var h=c[n],v=i==="cartesian"?t._plots[h]:t[h];for(o=0;o<f.length;o++)f[o](e,v,h)}else for(o=0;o<f.length;o++)f[o](e)}}_a.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};_a.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};_a.generalUpdatePerTraceModule=function(e,t,r,a){var n=t.traceHash,o={},i;for(i=0;i<r.length;i++){var s=r[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var u in n)if(!o[u]){var f=n[u][0],c=f[0].trace;c.visible=!1,o[u]=[f]}for(var h in o){var v=o[h],p=v[0][0].trace._module;p.plot(e,t,Ua.filterVisible(v),a)}t.traceHash=o};_a.plotBasePlot=function(e,t,r,a,n){var o=Bi.getModule(e),i=KCe(t.calcdata,o)[0];o.plot(t,i,a,n)};_a.cleanBasePlot=function(e,t,r,a,n){var o=n._has&&n._has(e),i=r._has&&r._has(e);o&&!i&&n["_"+e+"layer"].selectAll("g.trace").remove()};var rn={exports:{}},xo={},Xh={};(function(e){e.xmlns="http://www.w3.org/2000/xmlns/",e.svg="http://www.w3.org/2000/svg",e.xlink="http://www.w3.org/1999/xlink",e.svgAttrs={xmlns:e.svg,"xmlns:xlink":e.xlink}})(Xh);var ou={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};(function(e){var t=Ra.exports,r=bt.exports,a=r.strTranslate,n=Xh,o=ou.LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;e.convertToTspans=function($,Y,X){var ee=$.text(),Q=!$.attr("data-notex")&&typeof MathJax!="undefined"&&ee.match(i),Z=t.select($.node().parentNode);if(Z.empty())return;var q=$.attr("class")?$.attr("class").split(" ")[0]:"text";q+="-math",Z.selectAll("svg."+q).remove(),Z.selectAll("g."+q+"-group").remove(),$.style("display",null).attr({"data-unformatted":ee,"data-math":"N"});function ae(){Z.empty()||(q=$.attr("class")+"-math",Z.select("svg."+q).remove()),$.text("").style("white-space","pre");var ie=B($.node(),ee);ie&&$.style("pointer-events","all"),e.positionText($),X&&X.call($)}return Q?(Y&&Y._promises||[]).push(new Promise(function(ie){$.style("display","none");var we=parseInt($.node().style.fontSize,10),Te={fontSize:we};f(Q[2],Te,function(he,xe,Se){Z.selectAll("svg."+q).remove(),Z.selectAll("g."+q+"-group").remove();var ye=he&&he.select("svg");if(!ye||!ye.node()){ae(),ie();return}var re=Z.append("g").classed(q+"-group",!0).attr({"pointer-events":"none","data-unformatted":ee,"data-math":"Y"});re.node().appendChild(ye.node()),xe&&xe.node()&&ye.node().insertBefore(xe.node().cloneNode(!0),ye.node().firstChild);var se=Se.width,de=Se.height;ye.attr({class:q,height:de,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Me=$.node().style.fill||"black",Ie=ye.select("g");Ie.attr({fill:Me,stroke:Me});var Ee=Ie.node().getBoundingClientRect(),qe=Ee.width,be=Ee.height;(qe>se||be>de)&&(ye.style("overflow","hidden"),Ee=ye.node().getBoundingClientRect(),qe=Ee.width,be=Ee.height);var oe=+$.attr("x"),ce=+$.attr("y"),ue=we||$.node().getBoundingClientRect().height,Re=-ue/4;if(q[0]==="y")re.attr({transform:"rotate("+[-90,oe,ce]+")"+a(-qe/2,Re-be/2)});else if(q[0]==="l")ce=Re-be/2;else if(q[0]==="a"&&q.indexOf("atitle")!==0)oe=0,ce=Re;else{var Xe=$.attr("text-anchor");oe=oe-qe*(Xe==="middle"?.5:Xe==="end"?1:0),ce=ce+Re-be/2}ye.attr({x:oe,y:ce}),X&&X.call($,re),ie(re)})})):ae(),$};var s=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;function u($){return $.replace(s,"\\lt ").replace(l,"\\gt ")}function f($,Y,X){var ee,Q,Z,q;MathJax.Hub.Queue(function(){return Q=r.extendDeepAll({},MathJax.Hub.config),Z=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(ee=MathJax.Hub.config.menuSettings.renderer,ee!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var ae="math-output-"+r.randstr({},64);return q=t.select("body").append("div").attr({id:ae}).style({visibility:"hidden",position:"absolute"}).style({"font-size":Y.fontSize+"px"}).text(u($)),MathJax.Hub.Typeset(q.node())},function(){var ae=t.select("body").select("#MathJax_SVG_glyphs");if(q.select(".MathJax_SVG").empty()||!q.select("svg").node())r.log("There was an error in the tex syntax.",$),X();else{var ie=q.select("svg").node().getBoundingClientRect();X(q.select(".MathJax_SVG"),ae,ie)}if(q.remove(),ee!=="SVG")return MathJax.Hub.setRenderer(ee)},function(){return Z!==void 0&&(MathJax.Hub.processSectionDelay=Z),MathJax.Hub.Config(Q)})}var c={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},p="\u200B",d=["http:","https:","mailto:","",void 0,":"],g=e.NEWLINES=/(\r\n?|\n)/g,m=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,_=/<br(\s+.*)?>/i;e.BR_TAG_ALL=/<br(\s+.*)?>/gi;var S=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function k($,Y){if(!$)return null;var X=$.match(Y),ee=X&&(X[3]||X[4]);return ee&&I(ee)}var T=/(^|;)\s*color:/;e.plainText=function($,Y){Y=Y||{};for(var X=Y.len!==void 0&&Y.len!==-1?Y.len:1/0,ee=Y.allowedTags!==void 0?Y.allowedTags:["br"],Q="...",Z=Q.length,q=$.split(m),ae=[],ie="",we=0,Te=0;Te<q.length;Te++){var he=q[Te],xe=he.match(y),Se=xe&&xe[2].toLowerCase();if(Se)ee.indexOf(Se)!==-1&&(ae.push(he),ie=Se);else{var ye=he.length;if(we+ye<X)ae.push(he),we+=ye;else if(we<X){var re=X-we;ie&&(ie!=="br"||re<=Z||ye<=Z)&&ae.pop(),X>Z?ae.push(he.substr(0,re-Z)+Q):ae.push(he.substr(0,re));break}ie=""}}return ae.join("")};var L={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function I($){return $.replace(C,function(Y,X){var ee;return X.charAt(0)==="#"?ee=R(X.charAt(1)==="x"?parseInt(X.substr(2),16):parseInt(X.substr(1),10)):ee=L[X],ee||Y})}e.convertEntities=I;function R($){if(!($>1114111)){var Y=String.fromCodePoint;if(Y)return Y($);var X=String.fromCharCode;return $<=65535?X($):X(($>>10)+55232,$%1024+56320)}}function B($,Y){Y=Y.replace(g," ");var X=!1,ee=[],Q,Z=-1;function q(){Z++;var be=document.createElementNS(n.svg,"tspan");t.select(be).attr({class:"line",dy:Z*o+"em"}),$.appendChild(be),Q=be;var oe=ee;if(ee=[{node:be}],oe.length>1)for(var ce=1;ce<oe.length;ce++)ae(oe[ce])}function ae(be){var oe=be.type,ce={},ue;if(oe==="a"){ue="a";var Re=be.target,Xe=be.href,Ke=be.popup;Xe&&(ce={"xlink:xlink:show":Re==="_blank"||Re.charAt(0)!=="_"?"new":"replace",target:Re,"xlink:xlink:href":Xe},Ke&&(ce.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ke+'");return false;'))}else ue="tspan";be.style&&(ce.style=be.style);var vt=document.createElementNS(n.svg,ue);if(oe==="sup"||oe==="sub"){ie(Q,p),Q.appendChild(vt);var Ze=document.createElementNS(n.svg,"tspan");ie(Ze,p),t.select(Ze).attr("dy",v[oe]),ce.dy=h[oe],Q.appendChild(vt),Q.appendChild(Ze)}else Q.appendChild(vt);t.select(vt).attr(ce),Q=be.node=vt,ee.push(be)}function ie(be,oe){be.appendChild(document.createTextNode(oe))}function we(be){if(ee.length===1){r.log("Ignoring unexpected end tag </"+be+">.",Y);return}var oe=ee.pop();be!==oe.type&&r.log("Start tag <"+oe.type+"> doesnt match end tag <"+be+">. Pretending it did match.",Y),Q=ee[ee.length-1].node}var Te=_.test(Y);Te?q():(Q=$,ee=[{node:$}]);for(var he=Y.split(m),xe=0;xe<he.length;xe++){var Se=he[xe],ye=Se.match(y),re=ye&&ye[2].toLowerCase(),se=c[re];if(re==="br")q();else if(se===void 0)ie(Q,I(Se));else if(ye[1])we(re);else{var de=ye[4],Me={type:re},Ie=k(de,S);if(Ie?(Ie=Ie.replace(T,"$1 fill:"),se&&(Ie+=";"+se)):se&&(Ie=se),Ie&&(Me.style=Ie),re==="a"){X=!0;var Ee=k(de,M);if(Ee){var qe=N(Ee);qe&&(Me.href=qe,Me.target=k(de,w)||"_blank",Me.popup=k(de,A))}}ae(Me)}}return X}function N($){var Y=encodeURI(decodeURI($)),X=document.createElement("a"),ee=document.createElement("a");X.href=$,ee.href=Y;var Q=X.protocol,Z=ee.protocol;return d.indexOf(Q)!==-1&&d.indexOf(Z)!==-1?Y:""}e.sanitizeHTML=function(Y){Y=Y.replace(g," ");for(var X=document.createElement("p"),ee=X,Q=[],Z=Y.split(m),q=0;q<Z.length;q++){var ae=Z[q],ie=ae.match(y),we=ie&&ie[2].toLowerCase();if(we in c)if(ie[1])Q.length&&(ee=Q.pop());else{var Te=ie[4],he=k(Te,S),xe=he?{style:he}:{};if(we==="a"){var Se=k(Te,M);if(Se){var ye=N(Se);if(ye){xe.href=ye;var re=k(Te,w);re&&(xe.target=re)}}}var se=document.createElement(we);ee.appendChild(se),t.select(se).attr(xe),ee=se,Q.push(se)}else ee.appendChild(document.createTextNode(I(ae)))}var de="innerHTML";return X[de]},e.lineCount=function(Y){return Y.selectAll("tspan.line").size()||1},e.positionText=function(Y,X,ee){return Y.each(function(){var Q=t.select(this);function Z(ie,we){return we===void 0?(we=Q.attr(ie),we===null&&(Q.attr(ie,0),we=0)):Q.attr(ie,we),we}var q=Z("x",X),ae=Z("y",ee);this.nodeName==="text"&&Q.selectAll("tspan.line").attr({x:q,y:ae})})};function D($,Y,X){var ee=X.horizontalAlign,Q=X.verticalAlign||"top",Z=$.node().getBoundingClientRect(),q=Y.node().getBoundingClientRect(),ae,ie,we;return Q==="bottom"?ie=function(){return Z.bottom-ae.height}:Q==="middle"?ie=function(){return Z.top+(Z.height-ae.height)/2}:ie=function(){return Z.top},ee==="right"?we=function(){return Z.right-ae.width}:ee==="center"?we=function(){return Z.left+(Z.width-ae.width)/2}:we=function(){return Z.left},function(){ae=this.node().getBoundingClientRect();var Te=we()-q.left,he=ie()-q.top,xe=X.gd||{};if(X.gd){xe._fullLayout._calcInverseTransform(xe);var Se=r.apply3DTransform(xe._fullLayout._invTransform)(Te,he);Te=Se[0],he=Se[1]}return this.style({top:he+"px",left:Te+"px","z-index":1e3}),this}}var O="1px ";e.makeTextShadow=function($){var Y=O,X=O,ee=O;return Y+X+ee+$+", -"+Y+"-"+X+ee+$+", "+Y+"-"+X+ee+$+", -"+Y+X+ee+$},e.makeEditable=function($,Y){var X=Y.gd,ee=Y.delegate,Q=t.dispatch("edit","input","cancel"),Z=ee||$;if($.style({"pointer-events":ee?"none":"all"}),$.size()!==1)throw new Error("boo");function q(){ie(),$.style({opacity:0});var we=Z.attr("class"),Te;we?Te="."+we.split(" ")[0]+"-math-group":Te="[class*=-math-group]",Te&&t.select($.node().parentNode).select(Te).style({opacity:0})}function ae(we){var Te=we.node(),he=document.createRange();he.selectNodeContents(Te);var xe=window.getSelection();xe.removeAllRanges(),xe.addRange(he),Te.focus()}function ie(){var we=t.select(X),Te=we.select(".svg-container"),he=Te.append("div"),xe=$.node().style,Se=parseFloat(xe.fontSize||12),ye=Y.text;ye===void 0&&(ye=$.attr("data-unformatted")),he.classed("plugin-editable editable",!0).style({position:"absolute","font-family":xe.fontFamily||"Arial","font-size":Se,color:Y.fill||xe.fill||"black",opacity:1,"background-color":Y.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Se/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ye).call(D($,Te,Y)).on("blur",function(){X._editing=!1,$.text(this.textContent).style({opacity:1});var re=t.select(this).attr("class"),se;re?se="."+re.split(" ")[0]+"-math-group":se="[class*=-math-group]",se&&t.select($.node().parentNode).select(se).style({opacity:0});var de=this.textContent;t.select(this).transition().duration(0).remove(),t.select(document).on("mouseup",null),Q.edit.call($,de)}).on("focus",function(){var re=this;X._editing=!0,t.select(document).on("mouseup",function(){if(t.event.target===re)return!1;document.activeElement===he.node()&&he.node().blur()})}).on("keyup",function(){t.event.which===27?(X._editing=!1,$.style({opacity:1}),t.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Q.cancel.call($,this.textContent)):(Q.input.call($,this.textContent),t.select(this).call(D($,Te,Y)))}).on("keydown",function(){t.event.which===13&&this.blur()}).call(ae)}return Y.immediate?q():Z.on("click",q),t.rebind($,Q,"on")}})(xo);var xn={exports:{}},fLe=Ra.exports,N5=Hl.exports,cT=gn,B5=bt.exports,jX=Oa.exports,cLe=S_.isValid;function hLe(e,t,r){var a=t?B5.nestedProperty(e,t).get()||{}:e,n=a[r||"color"],o=!1;if(B5.isArrayOrTypedArray(n)){for(var i=0;i<n.length;i++)if(cT(n[i])){o=!0;break}}return B5.isPlainObject(a)&&(o||a.showscale===!0||cT(a.cmin)&&cT(a.cmax)||cLe(a.colorscale)||B5.isPlainObject(a.colorbar))}var qX=["showscale","autocolorscale","colorscale","reversescale","colorbar"],hT=["min","max","mid","auto"];function YX(e){var t=e._colorAx,r=t||e,a={},n,o,i;for(o=0;o<qX.length;o++)i=qX[o],a[i]=r[i];if(t)for(n="c",o=0;o<hT.length;o++)i=hT[o],a[i]=r["c"+i];else{var s;for(o=0;o<hT.length;o++){if(i=hT[o],s="c"+i,s in r){a[i]=r[s];continue}s="z"+i,s in r&&(a[i]=r[s])}n=s.charAt(0)}return a._sync=function(l,u){var f=hT.indexOf(l)!==-1?n+l:l;r[f]=r["_"+f]=u},a}function WX(e){for(var t=YX(e),r=t.min,a=t.max,n=t.reversescale?XX(t.colorscale):t.colorscale,o=n.length,i=new Array(o),s=new Array(o),l=0;l<o;l++){var u=n[l];i[l]=r+u[0]*(a-r),s[l]=u[1]}return{domain:i,range:s}}function XX(e){for(var t=e.length,r=new Array(t),a=t-1,n=0;a>=0;a--,n++){var o=e[a];r[n]=[1-o[0],o[1]]}return r}function ZX(e,t){t=t||{};for(var r=e.domain,a=e.range,n=a.length,o=new Array(n),i=0;i<n;i++){var s=N5(a[i]).toRgb();o[i]=[s.r,s.g,s.b,s.a]}var l=fLe.scale.linear().domain(r).range(o).clamp(!0),u=t.noNumericCheck,f=t.returnArray,c;return u&&f?c=l:u?c=function(h){return KX(l(h))}:f?c=function(h){return cT(h)?l(h):N5(h).isValid()?h:jX.defaultLine}:c=function(h){return cT(h)?KX(l(h)):N5(h).isValid()?h:jX.defaultLine},c.domain=l.domain,c.range=function(){return a},c}function vLe(e,t){return ZX(WX(e),t)}function KX(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return N5(t).toRgbString()}var ac={hasColorscale:hLe,extractOpts:YX,extractScale:WX,flipScale:XX,makeColorScaleFunc:ZX,makeColorScaleFuncFromTrace:vLe},JX={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},QX=JX,dLe=QX.FORMAT_LINK,pLe=QX.DATE_FORMAT_LINK;function gLe(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?WR:eZ)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function WR(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+dLe+"."].join(" ")}function eZ(e,t){return WR(e,t)+[" And for dates see: "+pLe+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var Ss={axisHoverFormat:gLe,descriptionOnlyNumbers:WR,descriptionWithDates:eZ},XR=Ts,O_=us,mLe=Bd.dash,yLe=cn.extendFlat,tZ=si.templatedArray,rZ=Ss.descriptionWithDates,xLe=Un.ONEDAY,jp=Sl,ZR=jp.HOUR_PATTERN,KR=jp.WEEKDAY_PATTERN,Zu={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:O_.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:XR({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[jp.idRegex.x.toString(),jp.idRegex.y.toString()],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[jp.idRegex.x.toString(),jp.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:tZ("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[KR,ZR,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+KR+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+ZR+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+KR+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+ZR+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:xLe,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},tickvals:{valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks",description:"Sets the tick length (in px)."},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the tick width (in px)."},tickcolor:{valType:"color",dflt:O_.defaultLine,editType:"ticks",description:"Sets the tick color."},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},automargin:{valType:"boolean",dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:yLe({},mLe,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:XR({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:rZ("tick label")},tickformatstops:tZ("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:rZ("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:O_.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},gridcolor:{valType:"color",dflt:O_.lightLine,editType:"ticks",description:"Sets the color of the grid lines."},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the width (in px) of the grid lines."},zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:O_.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:O_.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",jp.idRegex.x.toString(),jp.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",jp.idRegex.x.toString(),jp.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:XR({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},Ms=Zu,JR=Ts,aZ=cn.extendFlat,bLe=Jo.overrideAll,QR=bLe({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,description:["Sets the x position of the color bar (in plot fraction).","Defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction).","Defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:Ms.linecolor,outlinewidth:Ms.linewidth,bordercolor:Ms.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:Ms.tickmode,nticks:Ms.nticks,tick0:Ms.tick0,dtick:Ms.dtick,tickvals:Ms.tickvals,ticktext:Ms.ticktext,ticks:aZ({},Ms.ticks,{dflt:""}),ticklabeloverflow:aZ({},Ms.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:Ms.ticklen,tickwidth:Ms.tickwidth,tickcolor:Ms.tickcolor,showticklabels:Ms.showticklabels,tickfont:JR({description:"Sets the color bar's tick label font"}),tickangle:Ms.tickangle,tickformat:Ms.tickformat,tickformatstops:Ms.tickformatstops,tickprefix:Ms.tickprefix,showtickprefix:Ms.showtickprefix,ticksuffix:Ms.ticksuffix,showticksuffix:Ms.showticksuffix,separatethousands:Ms.separatethousands,exponentformat:Ms.exponentformat,minexponent:Ms.minexponent,showexponent:Ms.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:JR({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:JR({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),_Le=QR,wLe=M_.counter,TLe=L_,nZ=S_.scales,ALe=TLe(nZ);function vT(e){return"`"+e+"`"}var bo=function(t,r){t=t||"",r=r||{};var a=r.cLetter||"c",n="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t),o="noScale"in r?r.noScale:t==="marker.line",i="showScaleDflt"in r?r.showScaleDflt:a==="z",s=typeof r.colorscaleDflt=="string"?nZ[r.colorscaleDflt]:null,l=r.editTypeOverride||"",u=t?t+".":"",f,c;"colorAttr"in r?(f=r.colorAttr,c=r.colorAttr):(f={z:"z",c:"color"}[a],c="in "+vT(u+f));var h=n?" Has an effect only if "+c+"is set to a numerical array.":"",v=a+"auto",p=a+"min",d=a+"max",g=a+"mid",m=vT(u+v),y=vT(u+p),_=vT(u+d),S=y+" and "+_,M={};M[p]=M[d]=void 0;var w={};w[v]=!1;var A={};return f==="color"&&(A.color={valType:"color",arrayOk:!0,editType:l||"style",description:["Sets the",t,"color."," It accepts either a specific color"," or an array of numbers that are mapped to the colorscale"," relative to the max and min values of the array or relative to"," "+S+" if set."].join("")},r.anim&&(A.color.anim=!0)),A[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:M,description:["Determines whether or not the color domain is computed"," with respect to the input data (here "+c+") or the bounds set in"," ",S," ",h," Defaults to `false` when ",S," are set by the user."].join("")},A[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w,description:["Sets the lower bound of the color domain.",h," Value should have the same units as ",c," and if set, ",_," must be set as well."].join("")},A[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w,description:["Sets the upper bound of the color domain.",h," Value should have the same units as ",c," and if set, ",y," must be set as well."].join("")},A[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:M,description:["Sets the mid-point of the color domain by scaling ",y," and/or ",_," to be equidistant to this point.",h," Value should have the same units as ",c,". ","Has no effect when ",m," is `false`."].join("")},A.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale.",h," The colorscale must be an array containing"," arrays mapping a normalized value to an"," rgb, rgba, hex, hsl, hsv, or named color string."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`."," To control the bounds of the colorscale in color space,"," use",S,"."," Alternatively, `colorscale` may be a palette name string"," of the following list: "+ALe+"."].join("")},A.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)"," or the palette determined by ",vT(u+"colorscale"),".",h," In case `colorscale` is unspecified or `autocolorscale` is true, the default "," palette will be chosen according to whether numbers in the `color` array are"," all positive, all negative or mixed."].join("")},A.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true.",h," If true, ",y," will correspond to the last color"," in the array and ",_," will correspond to the first color."].join("")},o||(A.showscale={valType:"boolean",dflt:i,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace.",h].join("")},A.colorbar=_Le),r.noColorAxis||(A.coloraxis={valType:"subplotid",regex:wLe("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),A},SLe=cn.extendFlat,MLe=bo,ez=S_.scales,tz="Note that `autocolorscale` must be true for this attribute to work.",iZ={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:ez.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",tz].join(" ")},sequentialminus:{valType:"colorscale",dflt:ez.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",tz].join(" ")},diverging:{valType:"colorscale",dflt:ez.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",tz].join(" ")}},coloraxis:SLe({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},MLe("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},kLe=bt.exports,oZ=function(t){return kLe.isPlainObject(t.colorbar)},$5={},rz=gn,sZ=bt.exports,lZ=Un,ELe=lZ.ONEDAY,CLe=lZ.ONEWEEK;$5.dtick=function(e,t){var r=t==="log",a=t==="date",n=t==="category",o=a?ELe:1;if(!e)return o;if(rz(e))return e=Number(e),e<=0?o:n?Math.max(1,Math.round(e)):a?Math.max(.1,e):e;if(typeof e!="string"||!(a||r))return o;var i=e.charAt(0),s=e.substr(1);return s=rz(s)?Number(s):0,s<=0||!(a&&i==="M"&&s===Math.round(s)||r&&i==="L"||r&&i==="D"&&(s===1||s===2))?o:e};$5.tick0=function(e,t,r,a){if(t==="date")return sZ.cleanDate(e,sZ.dateTick0(r,a%CLe==0?1:0));if(!(a==="D1"||a==="D2"))return rz(e)?Number(e):0};var uZ=$5,LLe=bt.exports.isArrayOrTypedArray,N_=function(t,r,a,n){function o(v){var p=t[v];return p!==void 0?p:(r._template||{})[v]}var i=o("tick0"),s=o("dtick"),l=o("tickvals"),u=LLe(l)?"array":s?"linear":"auto",f=a("tickmode",u);if(f==="auto")a("nticks");else if(f==="linear"){var c=r.dtick=uZ.dtick(s,n);r.tick0=uZ.tick0(i,n,r.calendar,c)}else if(n!=="multicategory"){var h=a("tickvals");h===void 0?r.tickmode="auto":a("ticktext")}},az=bt.exports,nz=Zu,dT=function(t,r,a,n){var o=az.coerce2(t,r,nz,"ticklen"),i=az.coerce2(t,r,nz,"tickwidth"),s=az.coerce2(t,r,nz,"tickcolor",r.color),l=a("ticks",n.outerTicks||o||i||s?"outside":"");l||(delete r.ticklen,delete r.tickwidth,delete r.tickcolor)},fZ=function(t){var r=["showexponent","showtickprefix","showticksuffix"],a=r.filter(function(o){return t[o]!==void 0}),n=function(o){return t[o]===t[a[0]]};if(a.every(n)||a.length===1)return t[a[0]]},U5=bt.exports,PLe=si,nc=function(t,r,a){var n=a.name,o=a.inclusionAttr||"visible",i=r[n],s=U5.isArrayOrTypedArray(t[n])?t[n]:[],l=r[n]=[],u=PLe.arrayTemplater(r,n,o),f,c;for(f=0;f<s.length;f++){var h=s[f];U5.isPlainObject(h)?c=u.newItem(h):(c=u.newItem({}),c[o]=!1),c._index=f,c[o]!==!1&&a.handleItemDefaults(h,c,r,a),l.push(c)}var v=u.defaultItems();for(f=0;f<v.length;f++)c=v[f],c._index=l.length,a.handleItemDefaults({},c,r,a,{}),l.push(c);if(U5.isArrayOrTypedArray(i)){var p=Math.min(i.length,l.length);for(f=0;f<p;f++)U5.relinkPrivateKeys(l[f],i[f])}return l},cZ=bt.exports,ILe=Oa.exports.contrast,hZ=Zu,DLe=fZ,RLe=nc,hx=function(t,r,a,n,o){o||(o={});var i=DLe(t),s=a("showticklabels");if(s){var l=o.font||{},u=r.color,f=r.ticklabelposition||"",c=f.indexOf("inside")!==-1?ILe(o.bgColor):u&&u!==hZ.color.dflt?u:l.color;if(cZ.coerceFont(a,"tickfont",{family:l.family,size:l.size,color:c}),o.noAng||a("tickangle"),n!=="category"){var h=a("tickformat");RLe(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:zLe}),r.tickformatstops.length||delete r.tickformatstops,!o.noExp&&!h&&n!=="date"&&(a("showexponent",i),a("exponentformat"),a("minexponent"),a("separatethousands"))}}};function zLe(e,t){function r(n,o){return cZ.coerce(e,t,hZ.tickformatstops,n,o)}var a=r("enabled");a&&(r("dtickrange"),r("value"))}var FLe=fZ,vx=function(t,r,a,n,o){o||(o={});var i=o.tickSuffixDflt,s=FLe(t),l=a("tickprefix");l&&a("showtickprefix",s);var u=a("ticksuffix",i);u&&a("showticksuffix",s)},B_=bt.exports,OLe=si,NLe=N_,BLe=dT,$Le=hx,ULe=vx,HLe=QR,vZ=function(t,r,a){var n=OLe.newContainer(r,"colorbar"),o=t.colorbar||{};function i(_,S){return B_.coerce(o,n,HLe,_,S)}var s=a.margin||{t:0,b:0,l:0,r:0},l=a.width-s.l-s.r,u=a.height-s.t-s.b,f=i("orientation"),c=f==="v",h=i("thicknessmode");i("thickness",h==="fraction"?30/(c?l:u):30);var v=i("lenmode");i("len",v==="fraction"?1:c?u:l),i("x",c?1.02:.5),i("xanchor",c?"left":"center"),i("xpad"),i("y",c?.5:1.02),i("yanchor",c?"middle":"bottom"),i("ypad"),B_.noneOrAll(o,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var p=B_.coerce(o,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":"hide past div"),NLe(o,n,i,"linear");var d=a.font,g={outerTicks:!1,font:d};p.indexOf("inside")!==-1&&(g.bgColor="black"),ULe(o,n,i,"linear",g),$Le(o,n,i,"linear",g),BLe(o,n,i,"linear"),i("title.text",a._dfltTitle.colorbar);var m=n.tickfont,y=B_.extendFlat({},m,{color:d.color,size:B_.bigFont(m.size)});B_.coerceFont(i,"title.font",y),i("title.side",c?"top":"right")},dZ=gn,iz=bt.exports,GLe=oZ,VLe=vZ,pZ=S_.isValid,jLe=Pa.traceIs;function oz(e,t){var r=t.slice(0,t.length-1);return t?iz.nestedProperty(e,r).get()||{}:e}var su=function e(t,r,a,n,o){var i=o.prefix,s=o.cLetter,l="_module"in r,u=oz(t,i),f=oz(r,i),c=oz(r._template||{},i)||{},h=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,a,n,o)};if(l){var v=a._colorAxes||{},p=n(i+"coloraxis");if(p){var d=jLe(r,"contour")&&iz.nestedProperty(r,"contours.coloring").get()||"heatmap",g=v[p];g?(g[2].push(h),g[0]!==d&&(g[0]=!1,iz.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[p]=[d,r,[h]];return}}var m=u[s+"min"],y=u[s+"max"],_=dZ(m)&&dZ(y)&&m<y,S=n(i+s+"auto",!_);S?n(i+s+"mid"):(n(i+s+"min"),n(i+s+"max"));var M=u.colorscale,w=c.colorscale,A;if(M!==void 0&&(A=!pZ(M)),w!==void 0&&(A=!pZ(w)),n(i+"autocolorscale",A),n(i+"colorscale"),n(i+"reversescale"),i!=="marker.line."){var k;i&&l&&(k=GLe(u));var T=n(i+"showscale",k);T&&(i&&c&&(f._template=c),VLe(u,f,a))}},gZ=bt.exports,qLe=si,mZ=iZ,YLe=su,WLe=function(t,r){function a(c,h){return gZ.coerce(t,r,mZ,c,h)}a("colorscale.sequential"),a("colorscale.sequentialminus"),a("colorscale.diverging");var n=r._colorAxes,o,i;function s(c,h){return gZ.coerce(o,i,mZ.coloraxis,c,h)}for(var l in n){var u=n[l];if(u[0])o=t[l]||{},i=qLe.newContainer(r,l,"coloraxis"),i._name=l,YLe(o,i,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<u[2].length;f++)u[2][f]();delete r._colorAxes[l]}}},XLe=bt.exports,ZLe=ac.hasColorscale,KLe=ac.extractOpts,JLe=function(t,r){function a(f,c){var h=f["_"+c];h!==void 0&&(f[c]=h)}function n(f,c){var h=c.container?XLe.nestedProperty(f,c.container).get():f;if(h)if(h.coloraxis)h._colorAx=r[h.coloraxis];else{var v=KLe(h),p=v.auto;(p||v.min===void 0)&&a(h,c.min),(p||v.max===void 0)&&a(h,c.max),v.autocolorscale&&a(h,"colorscale")}}for(var o=0;o<t.length;o++){var i=t[o],s=i._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)n(i,s[l]);else n(i,s);ZLe(i,"marker.line")&&n(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in r._colorAxes)n(r[u],{min:"cmin",max:"cmax"})},yZ=gn,sz=bt.exports,QLe=ac.extractOpts,ih=function(t,r,a){var n=t._fullLayout,o=a.vals,i=a.containerStr,s=i?sz.nestedProperty(r,i).get():r,l=QLe(s),u=l.auto!==!1,f=l.min,c=l.max,h=l.mid,v=function(){return sz.aggNums(Math.min,null,o)},p=function(){return sz.aggNums(Math.max,null,o)};if(f===void 0?f=v():u&&(s._colorAx&&yZ(f)?f=Math.min(f,v()):f=v()),c===void 0?c=p():u&&(s._colorAx&&yZ(c)?c=Math.max(c,p()):c=p()),u&&h!==void 0&&(c-h>h-f?f=h-(c-h):c-h<h-f&&(c=h+(h-f))),f===c&&(f-=.5,c+=.5),l._sync("min",f),l._sync("max",c),l.autocolorscale){var d;f*c<0?d=n.colorscale.diverging:f>=0?d=n.colorscale.sequential:d=n.colorscale.sequentialminus,l._sync("colorscale",d)}},H5=S_,$_=ac,Qo={moduleType:"component",name:"colorscale",attributes:bo,layoutAttributes:iZ,supplyLayoutDefaults:WLe,handleDefaults:su,crossTraceDefaults:JLe,calc:ih,scales:H5.scales,defaultScale:H5.defaultScale,getScale:H5.get,isValidScale:H5.isValid,hasColorscale:$_.hasColorscale,extractOpts:$_.extractOpts,extractScale:$_.extractScale,flipScale:$_.flipScale,makeColorScaleFunc:$_.makeColorScaleFunc,makeColorScaleFuncFromTrace:$_.makeColorScaleFuncFromTrace},xZ=bt.exports,Ro={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return xZ.isPlainObject(e.marker)&&xZ.isArrayOrTypedArray(e.marker.size)}},e4e=gn,G5=function(t,r){r||(r=2);var a=t.marker,n=a.sizeref||1,o=a.sizemin||0,i=a.sizemode==="area"?function(s){return Math.sqrt(s/n)}:function(s){return s/n};return function(s){var l=i(s/r);return e4e(l)&&l>0?Math.max(l,o):0}},oh={};(function(e){var t=bt.exports;e.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},e.isTraceInSubplots=function(s,l){if(s.type==="splom"){for(var u=s.xaxes||[],f=s.yaxes||[],c=0;c<u.length;c++)for(var h=0;h<f.length;h++)if(l.indexOf(u[c]+f[h])!==-1)return!0;return!1}return l.indexOf(e.getSubplot(s))!==-1},e.flat=function(s,l){for(var u=new Array(s.length),f=0;f<s.length;f++)u[f]=l;return u},e.p2c=function(s,l){for(var u=new Array(s.length),f=0;f<s.length;f++)u[f]=s[f].p2c(l);return u},e.getDistanceFunction=function(s,l,u,f){return s==="closest"?f||e.quadrature(l,u):s.charAt(0)==="x"?l:u},e.getClosest=function(s,l,u){if(u.index!==!1)u.index>=0&&u.index<s.length?u.distance=0:u.index=!1;else for(var f=0;f<s.length;f++){var c=l(s[f]);c<=u.distance&&(u.index=f,u.distance=c)}return u},e.inbox=function(s,l,u){return s*l<0||s===0?u:1/0},e.quadrature=function(s,l){return function(u){var f=s(u),c=l(u);return Math.sqrt(f*f+c*c)}},e.makeEventData=function(s,l,u){var f="index"in s?s.index:s.pointNumber,c={data:l._input,fullData:l,curveNumber:l.index,pointNumber:f};if(l._indexToPoints){var h=l._indexToPoints[f];h.length===1?c.pointIndex=h[0]:c.pointIndices=h}else c.pointIndex=f;return l._module.eventData?c=l._module.eventData(c,s,l,u,f):("xVal"in s?c.x=s.xVal:"x"in s&&(c.x=s.x),"yVal"in s?c.y=s.yVal:"y"in s&&(c.y=s.y),s.xa&&(c.xaxis=s.xa),s.ya&&(c.yaxis=s.ya),s.zLabelVal!==void 0&&(c.z=s.zLabelVal)),e.appendArrayPointValue(c,l,f),c},e.appendArrayPointValue=function(s,l,u){var f=l._arrayAttrs;if(!!f)for(var c=0;c<f.length;c++){var h=f[c],v=a(h);if(s[v]===void 0){var p=t.nestedProperty(l,h).get(),d=n(p,u);d!==void 0&&(s[v]=d)}}},e.appendArrayMultiPointValues=function(s,l,u){var f=l._arrayAttrs;if(!!f)for(var c=0;c<f.length;c++){var h=f[c],v=a(h);if(s[v]===void 0){for(var p=t.nestedProperty(l,h).get(),d=new Array(u.length),g=0;g<u.length;g++)d[g]=n(p,u[g]);s[v]=d}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(s){return r[s]||s}function n(s,l){if(Array.isArray(l)){if(Array.isArray(s)&&Array.isArray(s[l[0]]))return s[l[0]][l[1]]}else return s[l]}var o={x:!0,y:!0},i={"x unified":!0,"y unified":!0};e.isUnifiedHover=function(s){return typeof s!="string"?!1:!!i[s]},e.isXYhover=function(s){return typeof s!="string"?!1:!!o[s]}})(oh);var ca=Ra.exports,t4e={circle:{n:0,f:function(e){var t=ca.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=ca.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=ca.round(e*.4,2),r=ca.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=ca.round(e*.8/Math.sqrt(2),2),r="l"+t+","+t,a="l"+t+",-"+t,n="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+r+a+n+a+n+o+n+o+r+o+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=ca.round(e*2/Math.sqrt(3),2),r=ca.round(e/2,2),a=ca.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=ca.round(e*2/Math.sqrt(3),2),r=ca.round(e/2,2),a=ca.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=ca.round(e*2/Math.sqrt(3),2),r=ca.round(e/2,2),a=ca.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=ca.round(e*2/Math.sqrt(3),2),r=ca.round(e/2,2),a=ca.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=ca.round(e*.6,2),r=ca.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=ca.round(e*.6,2),r=ca.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=ca.round(e*.6,2),r=ca.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=ca.round(e*.6,2),r=ca.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=ca.round(e*.951,2),r=ca.round(e*.588,2),a=ca.round(-e,2),n=ca.round(e*-.309,2),o=ca.round(e*.809,2);return"M"+t+","+n+"L"+r+","+o+"H-"+r+"L-"+t+","+n+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=ca.round(e,2),r=ca.round(e/2,2),a=ca.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+t+"L-"+a+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=ca.round(e,2),r=ca.round(e/2,2),a=ca.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+t+",0L"+r+",-"+a+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=ca.round(e*.924,2),r=ca.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4,r=ca.round(t*.225,2),a=ca.round(t*.951,2),n=ca.round(t*.363,2),o=ca.round(t*.588,2),i=ca.round(-t,2),s=ca.round(t*-.309,2),l=ca.round(t*.118,2),u=ca.round(t*.809,2),f=ca.round(t*.382,2);return"M"+r+","+s+"H"+a+"L"+n+","+l+"L"+o+","+u+"L0,"+f+"L-"+o+","+u+"L-"+n+","+l+"L-"+a+","+s+"H-"+r+"L0,"+i+"Z"}},hexagram:{n:18,f:function(e){var t=ca.round(e*.66,2),r=ca.round(e*.38,2),a=ca.round(e*.76,2);return"M-"+a+",0l-"+r+",-"+t+"h"+a+"l"+r+",-"+t+"l"+r+","+t+"h"+a+"l-"+r+","+t+"l"+r+","+t+"h-"+a+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=ca.round(e*Math.sqrt(3)*.8,2),r=ca.round(e*.8,2),a=ca.round(e*1.6,2),n=ca.round(e*4,2),o="A "+n+","+n+" 0 0 1 ";return"M-"+t+","+r+o+t+","+r+o+"0,-"+a+o+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=ca.round(e*Math.sqrt(3)*.8,2),r=ca.round(e*.8,2),a=ca.round(e*1.6,2),n=ca.round(e*4,2),o="A "+n+","+n+" 0 0 1 ";return"M"+t+",-"+r+o+"-"+t+",-"+r+o+"0,"+a+o+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=ca.round(e*1.1,2),r=ca.round(e*2,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=ca.round(e*1.4,2),r=ca.round(e*1.9,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=ca.round(e*.7,2),r=ca.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=ca.round(e*1.4,2),r=ca.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=ca.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=ca.round(e,2),r=ca.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=ca.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=ca.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=ca.round(e*1.3,2),r=ca.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=ca.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=ca.round(e*1.2,2),r=ca.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=ca.round(e/2,2),r=ca.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=ca.round(e*1.2,2),r=ca.round(e*1.6,2),a=ca.round(e*.8,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=ca.round(e*1.2,2),r=ca.round(e*1.6,2),a=ca.round(e*.8,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=ca.round(e*1.2,2),r=ca.round(e*1.6,2),a=ca.round(e*.8,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=ca.round(e*1.2,2),r=ca.round(e*1.6,2),a=ca.round(e*.8,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=ca.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=ca.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=ca.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=ca.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=ca.round(e,2),r=ca.round(e*2,2);return"M0,0L-"+t+","+r+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=ca.round(e,2),r=ca.round(e*2,2);return"M0,0L-"+t+",-"+r+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=ca.round(e*2,2),r=ca.round(e,2);return"M0,0L"+t+",-"+r+"V"+r+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=ca.round(e*2,2),r=ca.round(e,2);return"M0,0L-"+t+",-"+r+"V"+r+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=ca.round(e,2),r=ca.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+r+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=ca.round(e,2),r=ca.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+r+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=ca.round(e*2,2),r=ca.round(e,2);return"M0,-"+r+"V"+r+"M0,0L"+t+",-"+r+"V"+r+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=ca.round(e*2,2),r=ca.round(e,2);return"M0,-"+r+"V"+r+"M0,0L-"+t+",-"+r+"V"+r+"Z"},needLine:!0,noDot:!0}},qi=Ra.exports,es=bt.exports,r4e=es.numberFormat,pT=gn,a4e=Hl.exports,V5=Pa,ic=Oa.exports,n4e=Qo,gT=es.strTranslate,lz=xo,i4e=Xh,o4e=ou,s4e=o4e.LINE_SPACING,bZ=sx.DESELECTDIM,l4e=Ro,u4e=G5,f4e=oh.appendArrayPointValue,za=xn.exports={};za.font=function(e,t,r,a){es.isPlainObject(t)&&(a=t.color,r=t.size,t=t.family),t&&e.style("font-family",t),r+1&&e.style("font-size",r+"px"),a&&e.call(ic.fill,a)};za.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};za.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};za.setRect=function(e,t,r,a,n){e.call(za.setPosition,t,r).call(za.setSize,a,n)};za.translatePoint=function(e,t,r,a){var n=r.c2p(e.x),o=a.c2p(e.y);if(pT(n)&&pT(o)&&t.node())t.node().nodeName==="text"?t.attr("x",n).attr("y",o):t.attr("transform",gT(n,o));else return!1;return!0};za.translatePoints=function(e,t,r){e.each(function(a){var n=qi.select(this);za.translatePoint(a,n,t,r)})};za.hideOutsideRangePoint=function(e,t,r,a,n,o){t.attr("display",r.isPtWithinRange(e,n)&&a.isPtWithinRange(e,o)?null:"none")};za.hideOutsideRangePoints=function(e,t){if(!!t._hasClipOnAxisFalse){var r=t.xaxis,a=t.yaxis;e.each(function(n){var o=n[0].trace,i=o.xcalendar,s=o.ycalendar,l=V5.traceIs(o,"bar-like")?".bartext":".point,.textpoint";e.selectAll(l).each(function(u){za.hideOutsideRangePoint(u,qi.select(this),r,a,i,s)})})}};za.crispRound=function(e,t,r){return!t||!pT(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};za.singleLineStyle=function(e,t,r,a,n){t.style("fill","none");var o=(((e||[])[0]||{}).trace||{}).line||{},i=r||o.width||0,s=n||o.dash||"";ic.stroke(t,a||o.color),za.dashLine(t,s,i)};za.lineGroupStyle=function(e,t,r,a){e.style("fill","none").each(function(n){var o=(((n||[])[0]||{}).trace||{}).line||{},i=t||o.width||0,s=a||o.dash||"";qi.select(this).call(ic.stroke,r||o.color).call(za.dashLine,s,i)})};za.dashLine=function(e,t,r){r=+r||0,t=za.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};za.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};za.singleFillStyle=function(e){var t=qi.select(e.node()),r=t.data(),a=(((r[0]||[])[0]||{}).trace||{}).fillcolor;a&&e.call(ic.fill,a)};za.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var r=qi.select(this);t[0].trace&&r.call(ic.fill,t[0].trace.fillcolor)})};var _Z=t4e;za.symbolNames=[];za.symbolFuncs=[];za.symbolNeedLines={};za.symbolNoDot={};za.symbolNoFill={};za.symbolList=[];Object.keys(_Z).forEach(function(e){var t=_Z[e],r=t.n;za.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),za.symbolNames[r]=e,za.symbolFuncs[r]=t.f,t.needLine&&(za.symbolNeedLines[r]=!0),t.noDot?za.symbolNoDot[r]=!0:za.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(za.symbolNoFill[r]=!0)});var c4e=za.symbolNames.length,h4e="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";za.symbolNumber=function(e){if(pT(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=za.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=c4e||e>=400?0:Math.floor(Math.max(e,0))};function wZ(e,t){var r=e%100;return za.symbolFuncs[r](t)+(e>=200?h4e:"")}var TZ={x1:1,x2:0,y1:0,y2:0},AZ={x1:0,x2:0,y1:1,y2:0},SZ=r4e("~f"),MZ={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:TZ},horizontalreversed:{node:"linearGradient",attrs:TZ,reversed:!0},vertical:{node:"linearGradient",attrs:AZ},verticalreversed:{node:"linearGradient",attrs:AZ,reversed:!0}};za.gradient=function(e,t,r,a,n,o){for(var i=n.length,s=MZ[a],l=new Array(i),u=0;u<i;u++)s.reversed?l[i-1-u]=[SZ((1-n[u][0])*100),n[u][1]]:l[u]=[SZ(n[u][0]*100),n[u][1]];var f=t._fullLayout,c="g"+f._uid+"-"+r,h=f._defs.select(".gradients").selectAll("#"+c).data([a+l.join(";")],es.identity);h.exit().remove(),h.enter().append(s.node).each(function(){var d=qi.select(this);s.attrs&&d.attr(s.attrs),d.attr("id",c);var g=d.selectAll("stop").data(l);g.exit().remove(),g.enter().append("stop"),g.each(function(m){var y=a4e(m[1]);qi.select(this).attr({offset:m[0]+"%","stop-color":ic.tinyRGB(y),"stop-opacity":y.getAlpha()})})}),e.style(o,cz(c,t)).style(o+"-opacity",null);var v=function(d){return"."+d.attr("class").replace(/\s/g,".")},p=v(qi.select(e.node().parentNode))+">"+v(e);f._gradientUrlQueryParts[p]=1};za.pattern=function(e,t,r,a,n,o,i,s,l,u,f,c){var h=t==="legend";s&&(l==="overlay"?(u=s,f=ic.contrast(u)):(u=void 0,f=s));var v=r._fullLayout,p="p"+v._uid+"-"+a,d,g,m=function(C,I,R,B,N){return B+(N-B)*(C-I)/(R-I)},y,_,S,M,w={};switch(n){case"/":d=o*Math.sqrt(2),g=o*Math.sqrt(2),y="M-"+d/4+","+g/4+"l"+d/2+",-"+g/2+"M0,"+g+"L"+d+",0M"+d/4*3+","+g/4*5+"l"+d/2+",-"+g/2,_=i*o,M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case"\\":d=o*Math.sqrt(2),g=o*Math.sqrt(2),y="M"+d/4*3+",-"+g/4+"l"+d/2+","+g/2+"M0,0L"+d+","+g+"M-"+d/4+","+g/4*3+"l"+d/2+","+g/2,_=i*o,M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case"x":d=o*Math.sqrt(2),g=o*Math.sqrt(2),y="M-"+d/4+","+g/4+"l"+d/2+",-"+g/2+"M0,"+g+"L"+d+",0M"+d/4*3+","+g/4*5+"l"+d/2+",-"+g/2+"M"+d/4*3+",-"+g/4+"l"+d/2+","+g/2+"M0,0L"+d+","+g+"M-"+d/4+","+g/4*3+"l"+d/2+","+g/2,_=o-o*Math.sqrt(1-i),M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case"|":d=o,g=o,M="path",y="M"+d/2+",0L"+d/2+","+g,_=i*o,M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case"-":d=o,g=o,M="path",y="M0,"+g/2+"L"+d+","+g/2,_=i*o,M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case"+":d=o,g=o,M="path",y="M"+d/2+",0L"+d/2+","+g+"M0,"+g/2+"L"+d+","+g/2,_=o-o*Math.sqrt(1-i),M="path",w={d:y,opacity:c,stroke:f,"stroke-width":_+"px"};break;case".":d=o,g=o,i<Math.PI/4?S=Math.sqrt(i*o*o/Math.PI):S=m(i,Math.PI/4,1,o/2,o/Math.sqrt(2)),M="circle",w={cx:d/2,cy:g/2,r:S,opacity:c,fill:f};break}var A=[n||"noSh",u||"noBg",f||"noFg",o,i].join(";"),k=v._defs.select(".patterns").selectAll("#"+p).data([A],es.identity);k.exit().remove(),k.enter().append("pattern").each(function(){var C=qi.select(this);if(C.attr({id:p,width:d+"px",height:g+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),u){var I=C.selectAll("rect").data([0]);I.exit().remove(),I.enter().append("rect").attr({width:d+"px",height:g+"px",fill:u})}var R=C.selectAll(M).data([0]);R.exit().remove(),R.enter().append(M).attr(w)}),e.style("fill",cz(p,r)).style("fill-opacity",null),e.classed("pattern_filled",!0);var T=function(C){return"."+C.attr("class").replace(/\s/g,".")},L=T(qi.select(e.node().parentNode))+">.pattern_filled";v._patternUrlQueryParts[L]=1};za.initGradients=function(e){var t=e._fullLayout,r=es.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),t._gradientUrlQueryParts={}};za.initPatterns=function(e){var t=e._fullLayout,r=es.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),t._patternUrlQueryParts={}};za.getPatternAttr=function(e,t,r){return e&&es.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};za.pointStyle=function(e,t,r){if(!!e.size()){var a=za.makePointStyleFns(t);e.each(function(n){za.singlePointStyle(n,qi.select(this),t,a,r)})}};za.singlePointStyle=function(e,t,r,a,n){var o=r.marker,i=o.line;if(t.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(e):e.mo===void 0?o.opacity:e.mo),a.ms2mrc){var s;e.ms==="various"||o.size==="various"?s=3:s=a.ms2mrc(e.ms),e.mrc=s,a.selectedSizeFn&&(s=e.mrc=a.selectedSizeFn(e));var l=za.symbolNumber(e.mx||o.symbol)||0;e.om=l%200>=100,t.attr("d",wZ(l,s))}var u=!1,f,c,h;if(e.so)h=i.outlierwidth,c=i.outliercolor,f=o.outliercolor;else{var v=(i||{}).width;h=(e.mlw+1||v+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?c=e.mlcc=a.lineScale(e.mlc):es.isArrayOrTypedArray(i.color)?c=ic.defaultLine:c=i.color,es.isArrayOrTypedArray(o.color)&&(f=ic.defaultLine,u=!0),"mc"in e?f=e.mcc=a.markerScale(e.mc):f=o.color||"rgba(0,0,0,0)",a.selectedColorFn&&(f=a.selectedColorFn(e))}if(e.om)t.call(ic.stroke,f).style({"stroke-width":(h||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:h)+"px");var p=o.gradient,d=e.mgt;d?u=!0:d=p&&p.type,es.isArrayOrTypedArray(d)&&(d=d[0],MZ[d]||(d=0));var g=o.pattern,m=g&&za.getPatternAttr(g.shape,e.i,"");if(d&&d!=="none"){var y=e.mgc;y?u=!0:y=p.color;var _=r.uid;u&&(_+="-"+e.i),za.gradient(t,n,_,d,[[0,y],[1,f]],"fill")}else if(m){var S=za.getPatternAttr(g.bgcolor,e.i,null),M=za.getPatternAttr(g.fgcolor,e.i,null),w=g.fgopacity,A=za.getPatternAttr(g.size,e.i,8),k=za.getPatternAttr(g.solidity,e.i,.3),T=e.mcc||es.isArrayOrTypedArray(g.shape)||es.isArrayOrTypedArray(g.bgcolor)||es.isArrayOrTypedArray(g.size)||es.isArrayOrTypedArray(g.solidity),L=r.uid;T&&(L+="-"+e.i),za.pattern(t,"point",n,L,m,A,k,e.mcc,g.fillmode,S,M,w)}else ic.fill(t,f);h&&ic.stroke(t,c)}};za.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=za.tryColorscale(r,""),t.lineScale=za.tryColorscale(r,"line"),V5.traceIs(e,"symbols")&&(t.ms2mrc=l4e.isBubble(e)?u4e(e):function(){return(r.size||6)/2}),e.selectedpoints&&es.extendFlat(t,za.makeSelectedPointStyleFns(e)),t};za.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},a=e.unselected||{},n=e.marker||{},o=r.marker||{},i=a.marker||{},s=n.opacity,l=o.opacity,u=i.opacity,f=l!==void 0,c=u!==void 0;(es.isArrayOrTypedArray(s)||f||c)&&(t.selectedOpacityFn=function(S){var M=S.mo===void 0?n.opacity:S.mo;return S.selected?f?l:M:c?u:bZ*M});var h=n.color,v=o.color,p=i.color;(v||p)&&(t.selectedColorFn=function(S){var M=S.mcc||h;return S.selected?v||M:p||M});var d=n.size,g=o.size,m=i.size,y=g!==void 0,_=m!==void 0;return V5.traceIs(e,"symbols")&&(y||_)&&(t.selectedSizeFn=function(S){var M=S.mrc||d/2;return S.selected?y?g/2:M:_?m/2:M}),t};za.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},a=e.unselected||{},n=e.textfont||{},o=r.textfont||{},i=a.textfont||{},s=n.color,l=o.color,u=i.color;return t.selectedTextColorFn=function(f){var c=f.tc||s;return f.selected?l||c:u||(l?c:ic.addOpacity(c,bZ))},t};za.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=za.makeSelectedPointStyleFns(t),a=t.marker||{},n=[];r.selectedOpacityFn&&n.push(function(o,i){o.style("opacity",r.selectedOpacityFn(i))}),r.selectedColorFn&&n.push(function(o,i){ic.fill(o,r.selectedColorFn(i))}),r.selectedSizeFn&&n.push(function(o,i){var s=i.mx||a.symbol||0,l=r.selectedSizeFn(i);o.attr("d",wZ(za.symbolNumber(s),l)),i.mrc2=l}),n.length&&e.each(function(o){for(var i=qi.select(this),s=0;s<n.length;s++)n[s](i,o)})}};za.tryColorscale=function(e,t){var r=t?es.nestedProperty(e,t).get():e;if(r){var a=r.color;if((r.colorscale||r._colorAx)&&es.isArrayOrTypedArray(a))return n4e.makeColorScaleFuncFromTrace(r)}return es.identity};var uz={start:1,end:-1,middle:0,bottom:1,top:-1};function kZ(e,t,r,a,n){var o=qi.select(e.node().parentNode),i=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",s=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",l=a?a/.8+1:0,u=(lz.lineCount(e)-1)*s4e+1,f=uz[s]*l,c=r*.75+uz[i]*l+(uz[i]-1)*u*r/2;e.attr("text-anchor",s),n||o.attr("transform",gT(f,c))}function EZ(e,t){var r=e.ts||t.textfont.size;return pT(r)&&r>0?r:0}za.textPointStyle=function(e,t,r){if(!!e.size()){var a;if(t.selectedpoints){var n=za.makeSelectedTextStyleFns(t);a=n.selectedTextColorFn}var o=t.texttemplate,i=r._fullLayout;e.each(function(s){var l=qi.select(this),u=o?es.extractOption(s,t,"txt","texttemplate"):es.extractOption(s,t,"tx","text");if(!u&&u!==0){l.remove();return}if(o){var f=t._module.formatLabels,c=f?f(s,t,i):{},h={};f4e(h,t,s.i);var v=t._meta||{};u=es.texttemplateString(u,c,i._d3locale,h,s,v)}var p=s.tp||t.textposition,d=EZ(s,t),g=a?a(s):s.tc||t.textfont.color;l.call(za.font,s.tf||t.textfont.family,d,g).text(u).call(lz.convertToTspans,r).call(kZ,p,d,s.mrc)})}};za.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=za.makeSelectedTextStyleFns(t);e.each(function(a){var n=qi.select(this),o=r.selectedTextColorFn(a),i=a.tp||t.textposition,s=EZ(a,t);ic.fill(n,o);var l=V5.traceIs(t,"bar-like");kZ(n,i,s,a.mrc2||a.mrc,l)})}};var CZ=.5;za.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],a=[],n;for(n=1;n<e.length-1;n++)a.push(j5(e[n-1],e[n],e[n+1],t));for(r+="Q"+a[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n];return r+="Q"+a[e.length-3][1]+" "+e[e.length-1],r};za.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],a=e.length-1,n=[j5(e[a],e[0],e[1],t)],o;for(o=1;o<a;o++)n.push(j5(e[o-1],e[o],e[o+1],t));for(n.push(j5(e[a-1],e[a],e[0],t)),o=1;o<=a;o++)r+="C"+n[o-1][1]+" "+n[o][0]+" "+e[o];return r+="C"+n[a][1]+" "+n[0][0]+" "+e[0]+"Z",r};function j5(e,t,r,a){var n=e[0]-t[0],o=e[1]-t[1],i=r[0]-t[0],s=r[1]-t[1],l=Math.pow(n*n+o*o,CZ/2),u=Math.pow(i*i+s*s,CZ/2),f=(u*u*n-l*l*i)*a,c=(u*u*o-l*l*s)*a,h=3*u*(l+u),v=3*l*(l+u);return[[qi.round(t[0]+(h&&f/h),2),qi.round(t[1]+(h&&c/h),2)],[qi.round(t[0]-(v&&f/v),2),qi.round(t[1]-(v&&c/v),2)]]}var v4e={hv:function(e,t){return"H"+qi.round(t[0],2)+"V"+qi.round(t[1],2)},vh:function(e,t){return"V"+qi.round(t[1],2)+"H"+qi.round(t[0],2)},hvh:function(e,t){return"H"+qi.round((e[0]+t[0])/2,2)+"V"+qi.round(t[1],2)+"H"+qi.round(t[0],2)},vhv:function(e,t){return"V"+qi.round((e[1]+t[1])/2,2)+"H"+qi.round(t[0],2)+"V"+qi.round(t[1],2)}},d4e=function(e,t){return"L"+qi.round(t[0],2)+","+qi.round(t[1],2)};za.steps=function(e){var t=v4e[e]||d4e;return function(r){for(var a="M"+qi.round(r[0][0],2)+","+qi.round(r[0][1],2),n=1;n<r.length;n++)a+=t(r[n-1],r[n]);return a}};za.makeTester=function(){var e=es.ensureSingleById(qi.select("body"),"svg","js-plotly-tester",function(r){r.attr(i4e.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=es.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});za.tester=e,za.testref=t};za.savedBBoxes={};var fz=0,p4e=1e4;za.bBox=function(e,t,r){r||(r=LZ(e));var a;if(r){if(a=za.savedBBoxes[r],a)return es.extendFlat({},a)}else if(e.childNodes.length===1){var n=e.childNodes[0];if(r=LZ(n),r){var o=+n.getAttribute("x")||0,i=+n.getAttribute("y")||0,s=n.getAttribute("transform");if(!s){var l=za.bBox(n,!1,r);return o&&(l.left+=o,l.right+=o),i&&(l.top+=i,l.bottom+=i),l}if(r+="~"+o+"~"+i+"~"+s,a=za.savedBBoxes[r],a)return es.extendFlat({},a)}}var u,f;t?u=e:(f=za.tester.node(),u=e.cloneNode(!0),f.appendChild(u)),qi.select(u).attr("transform",null).call(lz.positionText,0,0);var c=u.getBoundingClientRect(),h=za.testref.node().getBoundingClientRect();t||f.removeChild(u);var v={height:c.height,width:c.width,left:c.left-h.left,top:c.top-h.top,right:c.right-h.left,bottom:c.bottom-h.top};return fz>=p4e&&(za.savedBBoxes={},fz=0),r&&(za.savedBBoxes[r]=v),fz++,es.extendFlat({},v)};function LZ(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}za.setClipUrl=function(e,t,r){e.attr("clip-path",cz(t,r))};function cz(e,t){if(!e)return null;var r=t._context,a=r._exportedPlot?"":r._baseUrl||"";return a?"url('"+a+"#"+e+"')":"url(#"+e+")"}za.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",a=e[r]("transform")||"",n=a.replace(t,function(o,i,s){return[i,s].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};za.setTranslate=function(e,t,r){var a=/(\btranslate\(.*?\);?)/,n=e.attr?"attr":"getAttribute",o=e.attr?"attr":"setAttribute",i=e[n]("transform")||"";return t=t||0,r=r||0,i=i.replace(a,"").trim(),i+=gT(t,r),i=i.trim(),e[o]("transform",i),i};za.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",a=e[r]("transform")||"",n=a.replace(t,function(o,i,s){return[i,s].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};za.setScale=function(e,t,r){var a=/(\bscale\(.*?\);?)/,n=e.attr?"attr":"getAttribute",o=e.attr?"attr":"setAttribute",i=e[n]("transform")||"";return t=t||1,r=r||1,i=i.replace(a,"").trim(),i+="scale("+t+","+r+")",i=i.trim(),e[o]("transform",i),i};var g4e=/\s*sc.*/;za.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var a=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var n=(this.getAttribute("transform")||"").replace(g4e,"");n+=a,n=n.trim(),this.setAttribute("transform",n)})}};var m4e=/translate\([^)]*\)\s*$/;za.setTextPointsScale=function(e,t,r){!e||e.each(function(){var a,n=qi.select(this),o=n.select("text");if(!!o.node()){var i=parseFloat(o.attr("x")||0),s=parseFloat(o.attr("y")||0),l=(n.attr("transform")||"").match(m4e);t===1&&r===1?a=[]:a=[gT(i,s),"scale("+t+","+r+")",gT(-i,-s)],l&&a.push(l),n.attr("transform",a.join(""))}})};var q5=Ra.exports,y4e=gn,PZ=Eo.exports,IZ=Pa,U_=bt.exports,DZ=U_.strTranslate,RZ=xn.exports,zZ=Oa.exports,hz=xo,FZ=sx,x4e=ou.OPPOSITE_SIDE,OZ=/ [XY][0-9]* /;function b4e(e,t,r){var a=r.propContainer,n=r.propName,o=r.placeholder,i=r.traceIndex,s=r.avoid||{},l=r.attributes,u=r.transform,f=r.containerGroup,c=e._fullLayout,h=1,v=!1,p=a.title,d=(p&&p.text?p.text:"").trim(),g=p&&p.font?p.font:{},m=g.family,y=g.size,_=g.color,S;n==="title.text"?S="titleText":n.indexOf("axis")!==-1?S="axisTitleText":n.indexOf("colorbar"!==-1)&&(S="colorbarTitleText");var M=e._context.edits[S];d===""?h=0:d.replace(OZ," % ")===o.replace(OZ," % ")&&(h=.2,v=!0,M||(d="")),r._meta?d=U_.templateString(d,r._meta):c._meta&&(d=U_.templateString(d,c._meta));var w=d||M,A;f||(f=U_.ensureSingle(c._infolayer,"g","g-"+t),A=c._hColorbarMoveTitle);var k=f.selectAll("text").data(w?[0]:[]);if(k.enter().append("text"),k.text(d).attr("class",t),k.exit().remove(),!w)return f;function T(R){U_.syncOrAsync([L,C],R)}function L(R){var B;return!u&&A&&(u={}),u?(B="",u.rotate&&(B+="rotate("+[u.rotate,l.x,l.y]+")"),(u.offset||A)&&(B+=DZ(0,(u.offset||0)-(A||0)))):B=null,R.attr("transform",B),R.style({"font-family":m,"font-size":q5.round(y,2)+"px",fill:zZ.rgb(_),opacity:h*zZ.opacity(_),"font-weight":PZ.fontWeight}).attr(l).call(hz.convertToTspans,e),PZ.previousPromises(e)}function C(R){var B=q5.select(R.node().parentNode);if(s&&s.selection&&s.side&&d){B.attr("transform",null);var N=x4e[s.side],D=s.side==="left"||s.side==="top"?-1:1,O=y4e(s.pad)?s.pad:2,$=RZ.bBox(B.node()),Y={left:0,top:0,right:c.width,bottom:c.height},X=s.maxShift||D*(Y[s.side]-$[s.side]),ee=0;if(X<0)ee=X;else{var Q=s.offsetLeft||0,Z=s.offsetTop||0;$.left-=Q,$.right-=Q,$.top-=Z,$.bottom-=Z,s.selection.each(function(){var ae=RZ.bBox(this);U_.bBoxIntersect($,ae,O)&&(ee=Math.max(ee,D*(ae[s.side]-$[N])+O))}),ee=Math.min(X,ee)}if(ee>0||X<0){var q={left:[-ee,0],right:[ee,0],top:[0,-ee],bottom:[0,ee]}[s.side];B.attr("transform",DZ(q[0],q[1]))}}}k.call(T);function I(){h=0,v=!0,k.text(o).on("mouseover.opacity",function(){q5.select(this).transition().duration(FZ.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){q5.select(this).transition().duration(FZ.HIDE_PLACEHOLDER).style("opacity",0)})}return M&&(d?k.on(".opacity",null):I(),k.call(hz.makeEditable,{gd:e}).on("edit",function(R){i!==void 0?IZ.call("_guiRestyle",e,n,R,i):IZ.call("_guiRelayout",e,n,R)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(T)}).on("input",function(R){this.text(R||" ").call(hz.positionText,l.x,l.y)})),k.classed("js-placeholder",v),f}var H_={draw:b4e},_4e=Ra.exports,w4e=K3.utcFormat,ts=bt.exports,T4e=ts.numberFormat,qp=gn,fy=ts.cleanNumber,A4e=ts.ms2DateTime,NZ=ts.dateTime2ms,Yp=ts.ensureNumber,BZ=ts.isArrayOrTypedArray,cy=Un,Y5=cy.FP_SAFE,Ud=cy.BADNUM,S4e=cy.LOG_CLIP,M4e=cy.ONEWEEK,W5=cy.ONEDAY,X5=cy.ONEHOUR,$Z=cy.ONEMIN,UZ=cy.ONESEC,Z5=As,K5=Sl,J5=K5.HOUR_PATTERN,Q5=K5.WEEKDAY_PATTERN;function mT(e){return Math.pow(10,e)}function vz(e){return e!=null}var Og=function(t,r){r=r||{};var a=t._id||"x",n=a.charAt(0);function o(S,M){if(S>0)return Math.log(S)/Math.LN10;if(S<=0&&M&&t.range&&t.range.length===2){var w=t.range[0],A=t.range[1];return .5*(w+A-2*S4e*Math.abs(w-A))}else return Ud}function i(S,M,w,A){if((A||{}).msUTC&&qp(S))return+S;var k=NZ(S,w||t.calendar);if(k===Ud)if(qp(S)){S=+S;var T=Math.floor(ts.mod(S+.05,1)*10),L=Math.round(S-T/10);k=NZ(new Date(L))+T/10}else return Ud;return k}function s(S,M,w){return A4e(S,M,w||t.calendar)}function l(S){return t._categories[Math.round(S)]}function u(S){if(vz(S)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[S]!==void 0)return t._categoriesMap[S];t._categories.push(typeof S=="number"?String(S):S);var M=t._categories.length-1;return t._categoriesMap[S]=M,M}return Ud}function f(S,M){for(var w=new Array(M),A=0;A<M;A++){var k=(S[0]||[])[A],T=(S[1]||[])[A];w[A]=c([k,T])}return w}function c(S){if(t._categoriesMap)return t._categoriesMap[S]}function h(S){var M=c(S);if(M!==void 0)return M;if(qp(S))return+S}function v(S){return qp(S)?+S:c(S)}function p(S,M,w){return _4e.round(w+M*S,2)}function d(S,M,w){return(S-w)/M}var g=function(M){return qp(M)?p(M,t._m,t._b):Ud},m=function(S){return d(S,t._m,t._b)};if(t.rangebreaks){var y=n==="y";g=function(S){if(!qp(S))return Ud;var M=t._rangebreaks.length;if(!M)return p(S,t._m,t._b);var w=y;t.range[0]>t.range[1]&&(w=!w);for(var A=w?-1:1,k=A*S,T=0,L=0;L<M;L++){var C=A*t._rangebreaks[L].min,I=A*t._rangebreaks[L].max;if(k<C)break;if(k>I)T=L+1;else{T=k<(C+I)/2?L:L+1;break}}var R=t._B[T]||0;return isFinite(R)?p(S,t._m2,R):0},m=function(S){var M=t._rangebreaks.length;if(!M)return d(S,t._m,t._b);for(var w=0,A=0;A<M&&!(S<t._rangebreaks[A].pmin);A++)S>t._rangebreaks[A].pmax&&(w=A+1);return d(S,t._m2,t._B[w])}}t.c2l=t.type==="log"?o:Yp,t.l2c=t.type==="log"?mT:Yp,t.l2p=g,t.p2l=m,t.c2p=t.type==="log"?function(S,M){return g(o(S,M))}:g,t.p2c=t.type==="log"?function(S){return mT(m(S))}:m,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=fy,t.c2d=t.c2r=t.l2d=t.l2r=Yp,t.d2p=t.r2p=function(S){return t.l2p(fy(S))},t.p2d=t.p2r=m,t.cleanPos=Yp):t.type==="log"?(t.d2r=t.d2l=function(S,M){return o(fy(S),M)},t.r2d=t.r2c=function(S){return mT(fy(S))},t.d2c=t.r2l=fy,t.c2d=t.l2r=Yp,t.c2r=o,t.l2d=mT,t.d2p=function(S,M){return t.l2p(t.d2r(S,M))},t.p2d=function(S){return mT(m(S))},t.r2p=function(S){return t.l2p(fy(S))},t.p2r=m,t.cleanPos=Yp):t.type==="date"?(t.d2r=t.r2d=ts.identity,t.d2c=t.r2c=t.d2l=t.r2l=i,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(S,M,w){return t.l2p(i(S,0,w))},t.p2d=t.p2r=function(S,M,w){return s(m(S),M,w)},t.cleanPos=function(S){return ts.cleanDate(S,Ud,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=u,t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(S){var M=v(S);return M!==void 0?M:t.fraction2r(.5)},t.l2r=t.c2r=Yp,t.r2l=v,t.d2p=function(S){return t.l2p(t.r2c(S))},t.p2d=function(S){return l(m(S))},t.r2p=t.d2p,t.p2r=m,t.cleanPos=function(S){return typeof S=="string"&&S!==""?S:Yp(S)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(S){var M=h(S);return M!==void 0?M:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=Yp,t.r2l=h,t.d2p=function(S){return t.l2p(t.r2c(S))},t.p2d=function(S){return l(m(S))},t.r2p=t.d2p,t.p2r=m,t.cleanPos=function(S){return Array.isArray(S)||typeof S=="string"&&S!==""?S:Yp(S)},t.setupMultiCategory=function(S){var M=t._traceIndices,w,A,k=t._matchGroup;if(k&&t._categories.length===0){for(var T in k)if(T!==a){var L=r[Z5.id2name(T)];M=M.concat(L._traceIndices)}}var C=[[0,{}],[0,{}]],I=[];for(w=0;w<M.length;w++){var R=S[M[w]];if(n in R){var B=R[n],N=R._length||ts.minRowLength(B);if(BZ(B[0])&&BZ(B[1]))for(A=0;A<N;A++){var D=B[0][A],O=B[1][A];vz(D)&&vz(O)&&(I.push([D,O]),D in C[0][1]||(C[0][1][D]=C[0][0]++),O in C[1][1]||(C[1][1][O]=C[1][0]++))}}}for(I.sort(function($,Y){var X=C[0][1],ee=X[$[0]]-X[Y[0]];if(ee)return ee;var Q=C[1][1];return Q[$[1]]-Q[Y[1]]}),w=0;w<I.length;w++)u(I[w])}),t.fraction2r=function(S){var M=t.r2l(t.range[0]),w=t.r2l(t.range[1]);return t.l2r(M+S*(w-M))},t.r2fraction=function(S){var M=t.r2l(t.range[0]),w=t.r2l(t.range[1]);return(t.r2l(S)-M)/(w-M)},t.cleanRange=function(S,M){M||(M={}),S||(S="range");var w=ts.nestedProperty(t,S).get(),A,k;if(t.type==="date"?k=ts.dfltRange(t.calendar):n==="y"?k=K5.DFLTRANGEY:t._name==="realaxis"?k=[0,1]:k=M.dfltRange||K5.DFLTRANGEX,k=k.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(k[0]=0),!w||w.length!==2){ts.nestedProperty(t,S).set(k);return}for(t.type==="date"&&!t.autorange&&(w[0]=ts.cleanDate(w[0],Ud,t.calendar),w[1]=ts.cleanDate(w[1],Ud,t.calendar)),A=0;A<2;A++)if(t.type==="date"){if(!ts.isDateTime(w[A],t.calendar)){t[S]=k;break}if(t.r2l(w[0])===t.r2l(w[1])){var T=ts.constrain(t.r2l(w[0]),ts.MIN_MS+1e3,ts.MAX_MS-1e3);w[0]=t.l2r(T-1e3),w[1]=t.l2r(T+1e3);break}}else{if(!qp(w[A]))if(qp(w[1-A]))w[A]=w[1-A]*(A?10:.1);else{t[S]=k;break}if(w[A]<-Y5?w[A]=-Y5:w[A]>Y5&&(w[A]=Y5),w[0]===w[1]){var L=Math.max(1,Math.abs(w[0]*1e-6));w[0]-=L,w[1]+=L}}},t.setScale=function(S){var M=r._size;if(t.overlaying){var w=Z5.getFromId({_fullLayout:r},t.overlaying);t.domain=w.domain}var A=S&&t._r?"_r":"range",k=t.calendar;t.cleanRange(A);var T=t.r2l(t[A][0],k),L=t.r2l(t[A][1],k),C=n==="y";if(C?(t._offset=M.t+(1-t.domain[1])*M.h,t._length=M.h*(t.domain[1]-t.domain[0]),t._m=t._length/(T-L),t._b=-t._m*L):(t._offset=M.l+t.domain[0]*M.w,t._length=M.w*(t.domain[1]-t.domain[0]),t._m=t._length/(L-T),t._b=-t._m*T),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var I,R;if(t._rangebreaks=t.locateBreaks(Math.min(T,L),Math.max(T,L)),t._rangebreaks.length){for(I=0;I<t._rangebreaks.length;I++)R=t._rangebreaks[I],t._lBreaks+=Math.abs(R.max-R.min);var B=C;T>L&&(B=!B),B&&t._rangebreaks.reverse();var N=B?-1:1;for(t._m2=N*t._length/(Math.abs(L-T)-t._lBreaks),t._B.push(-t._m2*(C?L:T)),I=0;I<t._rangebreaks.length;I++)R=t._rangebreaks[I],t._B.push(t._B[t._B.length-1]-N*t._m2*(R.max-R.min));for(I=0;I<t._rangebreaks.length;I++)R=t._rangebreaks[I],R.pmin=g(R.min),R.pmax=g(R.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(S){var M=t.rangebreaks||[],w,A,k,T,L;M._cachedPatterns||(M._cachedPatterns=M.map(function(X){return X.enabled&&X.bounds?ts.simpleMap(X.bounds,X.pattern?fy:t.d2c):null})),M._cachedValues||(M._cachedValues=M.map(function(X){return X.enabled&&X.values?ts.simpleMap(X.values,t.d2c).sort(ts.sorterAsc):null}));for(var C=0;C<M.length;C++){var I=M[C];if(I.enabled){if(I.bounds){var R=I.pattern;switch(w=M._cachedPatterns[C],A=w[0],k=w[1],R){case Q5:L=new Date(S),T=L.getUTCDay(),A>k&&(k+=7,T<A&&(T+=7));break;case J5:L=new Date(S);var B=L.getUTCHours(),N=L.getUTCMinutes(),D=L.getUTCSeconds(),O=L.getUTCMilliseconds();T=B+(N/60+D/3600+O/36e5),A>k&&(k+=24,T<A&&(T+=24));break;case"":T=S;break}if(T>=A&&T<k)return Ud}else for(var $=M._cachedValues[C],Y=0;Y<$.length;Y++)if(A=$[Y],k=A+I.dvalue,S>=A&&S<k)return Ud}}return S},t.locateBreaks=function(S,M){var w,A,k,T,L=[];if(!t.rangebreaks)return L;var C=t.rangebreaks.slice().sort(function(Q,Z){return Q.pattern===Q5&&Z.pattern===J5?-1:Z.pattern===Q5&&Q.pattern===J5?1:0}),I=function(Q,Z){if(Q=ts.constrain(Q,S,M),Z=ts.constrain(Z,S,M),Q!==Z){for(var q=!0,ae=0;ae<L.length;ae++){var ie=L[ae];Q<ie.max&&Z>=ie.min&&(Q<ie.min&&(ie.min=Q),Z>ie.max&&(ie.max=Z),q=!1)}q&&L.push({min:Q,max:Z})}};for(w=0;w<C.length;w++){var R=C[w];if(R.enabled)if(R.bounds){var B=S,N=M;R.pattern&&(B=Math.floor(B)),A=ts.simpleMap(R.bounds,R.pattern?fy:t.r2l),k=A[0],T=A[1];var D=new Date(B),O,$;switch(R.pattern){case Q5:$=M4e,O=((T<k?7:0)+(T-k))*W5,B+=k*W5-(D.getUTCDay()*W5+D.getUTCHours()*X5+D.getUTCMinutes()*$Z+D.getUTCSeconds()*UZ+D.getUTCMilliseconds());break;case J5:$=W5,O=((T<k?24:0)+(T-k))*X5,B+=k*X5-(D.getUTCHours()*X5+D.getUTCMinutes()*$Z+D.getUTCSeconds()*UZ+D.getUTCMilliseconds());break;default:B=Math.min(A[0],A[1]),N=Math.max(A[0],A[1]),$=N-B,O=$}for(var Y=B;Y<N;Y+=$)I(Y,Y+O)}else for(var X=ts.simpleMap(R.values,t.d2c),ee=0;ee<X.length;ee++)k=X[ee],T=k+R.dvalue,I(k,T)}return L.sort(function(Q,Z){return Q.min-Z.min}),L},t.makeCalcdata=function(S,M,w){var A,k,T,L,C=t.type,I=C==="date"&&S[M+"calendar"];if(M in S){if(A=S[M],L=S._length||ts.minRowLength(A),ts.isTypedArray(A)&&(C==="linear"||C==="log")){if(L===A.length)return A;if(A.subarray)return A.subarray(0,L)}if(C==="multicategory")return f(A,L);for(k=new Array(L),T=0;T<L;T++)k[T]=t.d2c(A[T],0,I,w)}else{var R=M+"0"in S?t.d2c(S[M+"0"],0,I):0,B=S["d"+M]?Number(S["d"+M]):1;for(A=S[{x:"y",y:"x"}[M]],L=S._length||A.length,k=new Array(L),T=0;T<L;T++)k[T]=R+T*B}if(t.rangebreaks)for(T=0;T<L;T++)k[T]=t.maskBreaks(k[T]);return k},t.isValidRange=function(S){return Array.isArray(S)&&S.length===2&&qp(t.r2l(S[0]))&&qp(t.r2l(S[1]))},t.isPtWithinRange=function(S,M){var w=t.c2l(S[n],null,M),A=t.r2l(t.range[0]),k=t.r2l(t.range[1]);return A<k?A<=w&&w<=k:k<=w&&w<=A},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var S=t._matchGroup;if(S){var M=null,w=null;for(var A in S){var k=r[Z5.id2name(A)];if(k._categories){M=k._categories,w=k._categoriesMap;break}}M&&w?(t._categories=M,t._categoriesMap=w):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var T=0;T<t._initialCategories.length;T++)u(t._initialCategories[T])},t.sortByInitialCategories=function(){var S=[];if(t._emptyCategories(),t._initialCategories)for(var M=0;M<t._initialCategories.length;M++)u(t._initialCategories[M]);S=S.concat(t._traceIndices);var w=t._matchGroup;for(var A in w)if(a!==A){var k=r[Z5.id2name(A)];k._categories=t._categories,k._categoriesMap=t._categoriesMap,S=S.concat(k._traceIndices)}return S};var _=r._d3locale;t.type==="date"&&(t._dateFormat=_?_.timeFormat:w4e,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=_?_.numberFormat:T4e,delete t._minDtick,delete t._forceTick0},HZ=gn,dz=bt.exports,k4e=Un.BADNUM,eE=dz.isArrayOrTypedArray,E4e=dz.isDateTime,C4e=dz.cleanNumber,GZ=Math.round,yT=function(t,r,a){var n=t,o=a.noMultiCategory;if(eE(n)&&!n.length)return"-";if(!o&&R4e(n))return"multicategory";if(o&&Array.isArray(n[0])){for(var i=[],s=0;s<n.length;s++)if(eE(n[s]))for(var l=0;l<n[s].length;l++)i.push(n[s][l]);n=i}if(I4e(n,r))return"date";var u=a.autotypenumbers!=="strict";return D4e(n,u)?"category":P4e(n,u)?"linear":"-"};function L4e(e,t){return t?HZ(e):typeof e=="number"}function P4e(e,t){for(var r=e.length,a=0;a<r;a++)if(L4e(e[a],t))return!0;return!1}function I4e(e,t){for(var r=e.length,a=VZ(r),n=0,o=0,i={},s=0;s<r;s+=a){var l=GZ(s),u=e[l],f=String(u);i[f]||(i[f]=1,E4e(u,t)&&n++,HZ(u)&&o++)}return n>o*2}function VZ(e){return Math.max(1,(e-1)/1e3)}function D4e(e,t){for(var r=e.length,a=VZ(r),n=0,o=0,i={},s=0;s<r;s+=a){var l=GZ(s),u=e[l],f=String(u);if(!i[f]){i[f]=1;var c=typeof u;c==="boolean"?o++:(t?C4e(u)!==k4e:c==="number")?n++:c==="string"&&o++}}return o>n*2}function R4e(e){return eE(e[0])&&eE(e[1])}var z4e=Ra.exports,jZ=gn,dx=bt.exports,tE=Un.FP_SAFE,F4e=Pa,O4e=xn.exports,qZ=As,N4e=qZ.getFromId,B4e=qZ.isLinked,Hd={getAutoRange:pz,makePadFn:gz,doAutoRange:U4e,findExtremes:H4e,concatExtremes:mz};function pz(e,t){var r,a,n=[],o=e._fullLayout,i=gz(o,t,0),s=gz(o,t,1),l=mz(e,t),u=l.min,f=l.max;if(u.length===0||f.length===0)return dx.simpleMap(t.range,t.r2l);var c=u[0].val,h=f[0].val;for(r=1;r<u.length&&c===h;r++)c=Math.min(c,u[r].val);for(r=1;r<f.length&&c===h;r++)h=Math.max(h,f[r].val);var v=!1;if(t.range){var p=dx.simpleMap(t.range,t.r2l);v=p[1]<p[0]}t.autorange==="reversed"&&(v=!0,t.autorange=!0);var d=t.rangemode,g=d==="tozero",m=d==="nonnegative",y=t._length,_=y/10,S=0,M,w,A,k,T,L;for(r=0;r<u.length;r++)for(M=u[r],a=0;a<f.length;a++)w=f[a],L=w.val-M.val-YZ(t,M.val,w.val),L>0&&(T=y-i(M)-s(w),T>_?L/T>S&&(A=M,k=w,S=L/T):L/y>S&&(A={val:M.val,nopad:1},k={val:w.val,nopad:1},S=L/y));function C(D,O){return Math.max(D,s(O))}if(c===h){var I=c-1,R=c+1;if(g)if(c===0)n=[0,1];else{var B=(c>0?f:u).reduce(C,0),N=c/(1-Math.min(.5,B/y));n=c>0?[0,N]:[N,0]}else m?n=[Math.max(0,I),Math.max(1,R)]:n=[I,R]}else g?(A.val>=0&&(A={val:0,nopad:1}),k.val<=0&&(k={val:0,nopad:1})):m&&(A.val-S*i(A)<0&&(A={val:0,nopad:1}),k.val<=0&&(k={val:1,nopad:1})),S=(k.val-A.val-YZ(t,M.val,w.val))/(y-i(A)-s(k)),n=[A.val-S*i(A),k.val+S*s(k)];return v&&n.reverse(),dx.simpleMap(n,t.l2r||Number)}function YZ(e,t,r){var a=0;if(e.rangebreaks)for(var n=e.locateBreaks(t,r),o=0;o<n.length;o++){var i=n[o];a+=i.max-i.min}return a}function gz(e,t,r){var a=.05*t._length,n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var o=t.autorange==="reversed";if(!o){var i=dx.simpleMap(t.range,t.r2l);o=i[1]<i[0]}o&&(r=!r)}var s=0;return B4e(e,t._id)||(s=$4e(e,t,r)),a=Math.max(s,a),t.constrain==="domain"&&t._inputDomain&&(a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(u){return u.nopad?0:u.pad+(u.extrapad?a:s)}}var WZ=3;function $4e(e,t,r){var a=0,n=t._id.charAt(0)==="x";for(var o in e._plots){var i=e._plots[o];if(!(t._id!==i.xaxis._id&&t._id!==i.yaxis._id)){var s=(n?i.yaxis:i.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right"))){if(s._vals){var l=dx.deg2rad(s._tickAngles[s._id+"tick"]||0),u=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l));if(!s._vals[0].bb){var c=s._id+"tick",h=s._selections[c];h.each(function(y){var _=z4e.select(this),S=_.select(".text-math-group");S.empty()&&(y.bb=O4e.bBox(_.node()))})}for(var v=0;v<s._vals.length;v++){var p=s._vals[v],d=p.bb;if(d){var g=2*WZ+d.width,m=2*WZ+d.height;a=Math.max(a,n?Math.max(g*u,m*f):Math.max(m*u,g*f))}}}s.ticks==="inside"&&s.ticklabelposition==="inside"&&(a+=s.ticklen||0)}}}return a}function mz(e,t,r){var a=t._id,n=e._fullData,o=e._fullLayout,i=[],s=[],l,u,f;function c(g,m){for(l=0;l<m.length;l++){var y=g[m[l]],_=(y._extremes||{})[a];if(y.visible===!0&&_){for(u=0;u<_.min.length;u++)f=_.min[u],yz(i,f.val,f.pad,{extrapad:f.extrapad});for(u=0;u<_.max.length;u++)f=_.max[u],xz(s,f.val,f.pad,{extrapad:f.extrapad})}}}if(c(n,t._traceIndices),c(o.annotations||[],t._annIndices||[]),c(o.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var h in t._matchGroup)if(h!==t._id){var v=N4e(e,h),p=mz(e,v,!0),d=t._length/v._length;for(u=0;u<p.min.length;u++)f=p.min[u],yz(i,f.val,f.pad*d,{extrapad:f.extrapad});for(u=0;u<p.max.length;u++)f=p.max[u],xz(s,f.val,f.pad*d,{extrapad:f.extrapad})}}return{min:i,max:s}}function U4e(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():pz(e,t),t._r=t.range.slice(),t._rl=dx.simpleMap(t._r,t.r2l);var a=t._input,n={};n[t._attr+".range"]=t.range,n[t._attr+".autorange"]=t.autorange,F4e.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n),a.range=t.range.slice(),a.autorange=t.autorange}var o=t._anchorAxis;if(o&&o.rangeslider){var i=o.rangeslider[t._name];i&&i.rangemode==="auto"&&(i.range=pz(e,t)),o._input.rangeslider[t._name]=dx.extendFlat({},i)}}function H4e(e,t,r){r||(r={}),e._m||e.setScale();var a=[],n=[],o=t.length,i=r.padded||!1,s=r.tozero&&(e.type==="linear"||e.type==="-"),l=e.type==="log",u=!1,f=r.vpadLinearized||!1,c,h,v,p,d,g,m,y,_;function S(I){if(Array.isArray(I))return u=!0,function(B){return Math.max(Number(I[B]||0),0)};var R=Math.max(Number(I||0),0);return function(){return R}}var M=S((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),w=S((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),A=S(r.vpadplus||r.vpad),k=S(r.vpadminus||r.vpad);if(!u){if(y=1/0,_=-1/0,l)for(c=0;c<o;c++)h=t[c],h<y&&h>0&&(y=h),h>_&&h<tE&&(_=h);else for(c=0;c<o;c++)h=t[c],h<y&&h>-tE&&(y=h),h>_&&h<tE&&(_=h);t=[y,_],o=2}var T={tozero:s,extrapad:i};function L(I){v=t[I],!!jZ(v)&&(g=M(I),m=w(I),f?(p=e.c2l(v)-k(I),d=e.c2l(v)+A(I)):(y=v-k(I),_=v+A(I),l&&y<_/10&&(y=_/10),p=e.c2l(y),d=e.c2l(_)),s&&(p=Math.min(0,p),d=Math.max(0,d)),ZZ(p)&&yz(a,p,m,T),ZZ(d)&&xz(n,d,g,T))}var C=Math.min(6,o);for(c=0;c<C;c++)L(c);for(c=o-1;c>=C;c--)L(c);return{min:a,max:n,opts:r}}function yz(e,t,r,a){XZ(e,t,r,a,G4e)}function xz(e,t,r,a){XZ(e,t,r,a,V4e)}function XZ(e,t,r,a,n){for(var o=a.tozero,i=a.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!i)){s=!1;break}else n(t,u.val)&&u.pad<=r&&(i||!u.extrapad)&&(e.splice(l,1),l--)}if(s){var f=o&&t===0;e.push({val:t,pad:f?0:r,extrapad:f?!1:i})}}function ZZ(e){return jZ(e)&&Math.abs(e)<tE}function G4e(e,t){return e<=t}function V4e(e,t){return e>=t}var Wp=Ra.exports,Gl=gn,G_=Eo.exports,xT=Pa,Gn=bt.exports,V_=Gn.strTranslate,bT=xo,j4e=H_,_T=Oa.exports,Gd=xn.exports,q4e=Zu,KZ=$5,Mf=Un,Y4e=Mf.ONEMAXYEAR,rE=Mf.ONEAVGYEAR,bz=Mf.ONEMINYEAR,W4e=Mf.ONEMAXQUARTER,_z=Mf.ONEAVGQUARTER,wz=Mf.ONEMINQUARTER,X4e=Mf.ONEMAXMONTH,wT=Mf.ONEAVGMONTH,Tz=Mf.ONEMINMONTH,px=Mf.ONEWEEK,Cv=Mf.ONEDAY,gx=Cv/2,Ng=Mf.ONEHOUR,aE=Mf.ONEMIN,Az=Mf.ONESEC,mx=Mf.MINUS_SIGN,nE=Mf.BADNUM,Sz={K:"zeroline"},Mz={K:"gridline",L:"path"},JZ={K:"tick",L:"path"},QZ={K:"tick",L:"text"},iE=ou,oE=iE.MID_SHIFT,yx=iE.CAP_SHIFT,sE=iE.LINE_SPACING,Z4e=iE.OPPOSITE_SIDE,kz=3,fa=rn.exports={};fa.setConvert=Og;var K4e=yT,Bg=As,J4e=Bg.idSort,Q4e=Bg.isLinked;fa.id2name=Bg.id2name;fa.name2id=Bg.name2id;fa.cleanId=Bg.cleanId;fa.list=Bg.list;fa.listIds=Bg.listIds;fa.getFromId=Bg.getFromId;fa.getFromTrace=Bg.getFromTrace;var eK=Hd;fa.getAutoRange=eK.getAutoRange;fa.findExtremes=eK.findExtremes;var ePe=1e-4;function Ez(e){var t=(e[1]-e[0])*ePe;return[e[0]-t,e[1]+t]}fa.coerceRef=function(e,t,r,a,n,o){var i=a.charAt(a.length-1),s=r._fullLayout._subplots[i+"axis"],l=a+"ref",u={};return n||(n=s[0]||(typeof o=="string"?o:o[0])),o||(o=n),s=s.concat(s.map(function(f){return f+" domain"})),u[l]={valType:"enumerated",values:s.concat(o?typeof o=="string"?[o]:o:[]),dflt:n},Gn.coerce(e,t,u,l)};fa.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};fa.coercePosition=function(e,t,r,a,n,o){var i,s,l=fa.getRefType(a);if(l!=="range")i=Gn.ensureNumber,s=r(n,o);else{var u=fa.getFromId(t,a);o=u.fraction2r(o),s=r(n,o),i=u.cleanPos}e[n]=i(s)};fa.cleanPosition=function(e,t,r){var a=r==="paper"||r==="pixel"?Gn.ensureNumber:fa.getFromId(t,r).cleanPos;return a(e)};fa.redrawComponents=function(e,t){t=t||fa.listIds(e);var r=e._fullLayout;function a(n,o,i,s){for(var l=xT.getComponentMethod(n,o),u={},f=0;f<t.length;f++)for(var c=r[fa.id2name(t[f])],h=c[i],v=0;v<h.length;v++){var p=h[v];if(!u[p]&&(l(e,p),u[p]=1,s))return}}a("annotations","drawOne","_annIndices"),a("shapes","drawOne","_shapeIndices"),a("images","draw","_imgIndices",!0)};var tPe=fa.getDataConversions=function(e,t,r,a){var n,o=r==="x"||r==="y"||r==="z"?r:a;if(Array.isArray(o)){if(n={type:K4e(a,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},fa.setConvert(n),n.type==="category")for(var i=0;i<a.length;i++)n.d2c(a[i])}else n=fa.getFromTrace(e,t,o);return n?{d2c:n.d2c,c2d:n.c2d}:o==="ids"?{d2c:rK,c2d:rK}:{d2c:tK,c2d:tK}};function tK(e){return+e}function rK(e){return String(e)}fa.getDataToCoordFunc=function(e,t,r,a){return tPe(e,t,r,a).d2c};fa.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};fa.minDtick=function(e,t,r,a){["log","category","multicategory"].indexOf(e.type)!==-1||!a?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};fa.saveRangeInitial=function(e,t){for(var r=fa.list(e,"",!0),a=!1,n=0;n<r.length;n++){var o=r[n],i=o._rangeInitial===void 0,s=i||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(i&&o.autorange===!1||t&&s)&&(o._rangeInitial=o.range.slice(),a=!0)}return a};fa.saveShowSpikeInitial=function(e,t){for(var r=fa.list(e,"",!0),a=!1,n="on",o=0;o<r.length;o++){var i=r[o],s=i._showSpikeInitial===void 0,l=s||i.showspikes!==i._showspikes;(s||t&&l)&&(i._showSpikeInitial=i.showspikes,a=!0),n==="on"&&!i.showspikes&&(n="off")}return e._fullLayout._cartesianSpikesEnabled=n,a};fa.autoBin=function(e,t,r,a,n,o){var i=Gn.aggNums(Math.min,null,e),s=Gn.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:i-.5,end:s+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:s-i};n||(n=t.calendar);var l;if(t.type==="log"?l={type:"linear",range:[i,s]}:l={type:t.type,range:Gn.simpleMap([i,s],t.c2r,0,n),calendar:n},fa.setConvert(l),o=o&&KZ.dtick(o,l.type),o)l.dtick=o,l.tick0=KZ.tick0(void 0,l.type,n);else{var u;if(r)u=(s-i)/r;else{var f=Gn.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=c*Gn.roundUp(f.minDiff/c,[.9,1.9,4.9,9.9],!0);u=Math.max(h,2*Gn.stdev(e)/Math.pow(e.length,a?.25:.4)),Gl(u)||(u=1)}fa.autoTicks(l,u)}var v=l.dtick,p=fa.tickIncrement(fa.tickFirst(l),v,"reverse",n),d,g;if(typeof v=="number")p=rPe(p,e,l,i,s),g=1+Math.floor((s-p)/v),d=p+g*v;else for(l.dtick.charAt(0)==="M"&&(p=aPe(p,e,v,i,n)),d=p,g=0;d<=s;)d=fa.tickIncrement(d,v,!1,n),g++;return{start:t.c2r(p,0,n),end:t.c2r(d,0,n),size:v,_dataSpan:s-i}};function rPe(e,t,r,a,n){var o=0,i=0,s=0,l=0;function u(v){return(1+(v-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1==0?s++:Gl(t[f])||l++,u(t[f])&&o++,u(t[f]+r.dtick/2)&&i++;var c=t.length-l;if(s===c&&r.type!=="date")r.dtick<1?e=a-.5*r.dtick:(e-=.5,e+r.dtick<a&&(e+=r.dtick));else if(i<c*.1&&(o>c*.3||u(a)||u(n))){var h=r.dtick/2;e+=e+h<a?h:-h}return e}function aPe(e,t,r,a,n){var o=Gn.findExactDates(t,n),i=.8;if(o.exactDays>i){var s=Number(r.substr(1));o.exactYears>i&&s%12==0?e=fa.tickIncrement(e,"M6","reverse")+Cv*1.5:o.exactMonths>i?e=fa.tickIncrement(e,"M1","reverse")+Cv*15.5:e-=gx;var l=fa.tickIncrement(e,r);if(l<=a)return l}return e}fa.prepTicks=function(e,t){var r=Gn.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e._dtickInit=e.dtick,e._tick0Init=e.tick0,e.tickmode==="auto"||!e.dtick){var a=e.nticks,n;a||(e.type==="category"||e.type==="multicategory"?(n=e.tickfont?Gn.bigFont(e.tickfont.size||12):15,a=e._length/n):(n=e._id.charAt(0)==="y"?40:80,a=Gn.constrain(e._length/n,4,9)+1),e._name==="radialaxis"&&(a*=2)),e.tickmode==="array"&&(a*=100),e._roughDTick=Math.abs(r[1]-r[0])/a,fa.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&nPe(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),sK(e)};function Cz(e){return+e.substring(1)}function nPe(e){var t;function r(){return!(Gl(e.dtick)||e.dtick.charAt(0)!=="M")}var a=r(),n=fa.getTickFormat(e);if(n){var o=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(n)||(/%[HI]/.test(n)?(t=Ng,o&&!a&&e.dtick<Ng&&(e.dtick=Ng)):/%p/.test(n)?(t=gx,o&&!a&&e.dtick<gx&&(e.dtick=gx)):/%[Aadejuwx]/.test(n)?(t=Cv,o&&!a&&e.dtick<Cv&&(e.dtick=Cv)):/%[UVW]/.test(n)?(t=px,o&&!a&&e.dtick<px&&(e.dtick=px)):/%[Bbm]/.test(n)?(t=wT,o&&(a?Cz(e.dtick)<1:e.dtick<Tz)&&(e.dtick="M1")):/%[q]/.test(n)?(t=_z,o&&(a?Cz(e.dtick)<3:e.dtick<wz)&&(e.dtick="M3")):/%[Yy]/.test(n)&&(t=rE,o&&(a?Cz(e.dtick)<12:e.dtick<bz)&&(e.dtick="M12")))}a=r(),a&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function iPe(e,t,r){for(var a=0;a<e.length;a++){var n=e[a].value,o=a,i=a+1;a<e.length-1?(o=a,i=a+1):a>0?(o=a-1,i=a):(o=a,i=a);var s=e[o].value,l=e[i].value,u=Math.abs(l-s),f=r||u,c=0;f>=bz?u>=bz&&u<=Y4e?c=u:c=rE:r===_z&&f>=wz?u>=wz&&u<=W4e?c=u:c=_z:f>=Tz?u>=Tz&&u<=X4e?c=u:c=wT:r===px&&f>=px?c=px:f>=Cv?c=Cv:r===gx&&f>=gx?c=gx:r===Ng&&f>=Ng&&(c=Ng);var h;c>=u&&(c=u,h=!0);var v=n+c;if(t.rangebreaks&&c>0){for(var p=84,d=0,g=0;g<p;g++){var m=(g+.5)/p;t.maskBreaks(n*(1-m)+m*v)!==nE&&d++}c*=d/p,c||(e[a].drop=!0),h&&u>px&&(c=u)}(c>0||a===0)&&(e[a].periodX=n+c/2)}}fa.calcTicks=function(t,r){fa.prepTicks(t,r);var a=Gn.simpleMap(t.range,t.r2l,void 0,void 0,r);if(t.tickmode==="array")return oPe(t);var n=Ez(a),o=n[0],i=n[1],s=a[1]<a[0],l=Math.min(a[0],a[1]),u=Math.max(a[0],a[1]),f=t.type==="log"&&!(Gl(t.dtick)||t.dtick.charAt(0)==="L"),c=t.ticklabelmode==="period";if(t._tmin=fa.tickFirst(t,r),t._tmin<o!==s)return[];(t.type==="category"||t.type==="multicategory")&&(i=s?Math.max(-.5,i):Math.min(t._categories.length-.5,i));var h=t._tmin;t.rangebreaks&&t._tick0Init!==t.tick0&&(h=Fz(h,t),s||(h=fa.tickIncrement(h,t.dtick,!s,t.calendar))),c&&(h=fa.tickIncrement(h,t.dtick,!s,t.calendar));for(var v=Math.max(1e3,t._length||0),p=[],d=null;s?h>=i:h<=i;h=fa.tickIncrement(h,t.dtick,s,t.calendar)){if(t.rangebreaks&&!s){if(h<o)continue;if(t.maskBreaks(h)===nE&&Fz(h,t)>=u)break}if(p.length>v||h===d)break;d=h;var g=!1;f&&h!==(h|0)&&(g=!0),p.push({minor:g,value:h})}c&&iPe(p,t,t._definedDelta);var m;if(t.rangebreaks){var y=t._id.charAt(0)==="y",_=1;t.tickmode==="auto"&&(_=t.tickfont?t.tickfont.size:12);var S=NaN;for(m=p.length-1;m>-1;m--){if(p[m].drop){p.splice(m,1);continue}p[m].value=Fz(p[m].value,t);var M=t.c2p(p[m].value);(y?S>M-_:S<M+_)?p.splice(s?m+1:m,1):S=M}}zz(t)&&Math.abs(a[1]-a[0])===360&&p.pop(),t._tmax=(p[p.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var w=[],A,k;for(m=0;m<p.length;m++){var T=p[m].minor,L=p[m].value;A=fa.tickText(t,L,!1,T),k=p[m].periodX,k!==void 0&&(A.periodX=k,(k>u||k<l)&&(k>u&&(A.periodX=u),k<l&&(A.periodX=l),A.text=" ",t._prevDateHead="")),w.push(A)}return t._inCalcTicks=!1,w};function oPe(e){var t=e.tickvals,r=e.ticktext,a=new Array(t.length),n=Gn.simpleMap(e.range,e.r2l),o=Ez(n),i=Math.min(o[0],o[1]),s=Math.max(o[0],o[1]),l=0;Array.isArray(r)||(r=[]);var u=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var f=0;f<t.length;f++){var c=u(t[f]);c>i&&c<s&&(r[f]===void 0?a[l]=fa.tickText(e,c):a[l]=Lz(e,c,String(r[f])),l++)}return l<t.length&&a.splice(l,t.length-l),e.rangebreaks&&(a=a.filter(function(h){return e.maskBreaks(h.x)!==nE})),a}var lE=[2,5,10],aK=[1,2,3,6,12],nK=[1,2,5,10,15,30],sPe=[1,2,3,7,14],iK=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],oK=[-.301,0,.301,.699,1],lPe=[15,30,45,90,180];function Xp(e,t,r){return t*Gn.roundUp(e/t,r)}fa.autoTicks=function(e,t){var r;function a(f){return Math.pow(f,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=Gn.dateTick0(e.calendar,0);var n=2*t;if(n>rE)t/=rE,r=a(10),e.dtick="M"+12*Xp(t,r,lE);else if(n>wT)t/=wT,e.dtick="M"+Xp(t,1,aK);else if(n>Cv){e.dtick=Xp(t,Cv,e._hasDayOfWeekBreaks?[1,2,7,14]:sPe);var o=fa.getTickFormat(e),i=e.ticklabelmode==="period";i&&(e._rawTick0=e.tick0),/%[uVW]/.test(o)?e.tick0=Gn.dateTick0(e.calendar,2):e.tick0=Gn.dateTick0(e.calendar,1),i&&(e._dowTick0=e.tick0)}else n>Ng?e.dtick=Xp(t,Ng,aK):n>aE?e.dtick=Xp(t,aE,nK):n>Az?e.dtick=Xp(t,Az,nK):(r=a(10),e.dtick=Xp(t,r,lE))}else if(e.type==="log"){e.tick0=0;var s=Gn.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l,r=a(10),e.dtick="L"+Xp(t,r,lE)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):zz(e)?(e.tick0=0,r=1,e.dtick=Xp(t,r,lPe)):(e.tick0=0,r=a(10),e.dtick=Xp(t,r,lE));if(e.dtick===0&&(e.dtick=1),!Gl(e.dtick)&&typeof e.dtick!="string"){var u=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(u)}};function sK(e){var t=e.dtick;if(e._tickexponent=0,!Gl(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),a=e.l2r(r).replace(/(^-|i)/g,""),n=a.length;if(String(t).charAt(0)==="M")n>10||a.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=Cv&&n<=10||t>=Cv*15)e._tickround="d";else if(t>=aE&&n<=16||t>=Ng)e._tickround="M";else if(t>=Az&&n<=19||t>=aE)e._tickround="S";else{var o=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,o)-20,e._tickround<0&&(e._tickround=4)}}else if(Gl(t)||t.charAt(0)==="L"){var i=e.range.map(e.r2d||Number);Gl(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(i[0]),Math.abs(i[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),u=e.minexponent===void 0?3:e.minexponent;Math.abs(l)>u&&(uE(e.exponentformat)&&!Pz(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}fa.tickIncrement=function(e,t,r,a){var n=r?-1:1;if(Gl(t))return Gn.increment(e,n*t);var o=t.charAt(0),i=n*Number(t.substr(1));if(o==="M")return Gn.incrementMonth(e,i,a);if(o==="L")return Math.log(Math.pow(10,e)+i)/Math.LN10;if(o==="D"){var s=t==="D2"?oK:iK,l=e+n*.01,u=Gn.roundUp(Gn.mod(l,1),s,r);return Math.floor(l)+Math.log(Wp.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};fa.tickFirst=function(e,t){var r=e.r2l||Number,a=Gn.simpleMap(e.range,r,void 0,void 0,t),n=a[1]<a[0],o=n?Math.floor:Math.ceil,i=Ez(a)[0],s=e.dtick,l=r(e.tick0);if(Gl(s)){var u=o((i-l)/s)*s+l;return(e.type==="category"||e.type==="multicategory")&&(u=Gn.constrain(u,0,e._categories.length-1)),u}var f=s.charAt(0),c=Number(s.substr(1));if(f==="M"){for(var h=0,v=l,p,d,g;h<10;){if(p=fa.tickIncrement(v,s,n,e.calendar),(p-i)*(v-i)<=0)return n?Math.min(v,p):Math.max(v,p);d=(i-(v+p)/2)/(p-v),g=f+(Math.abs(Math.round(d))||1)*c,v=fa.tickIncrement(v,g,d<0?!n:n,e.calendar),h++}return Gn.error("tickFirst did not converge",e),v}else{if(f==="L")return Math.log(o((Math.pow(10,i)-l)/c)*c+l)/Math.LN10;if(f==="D"){var m=s==="D2"?oK:iK,y=Gn.roundUp(Gn.mod(i,1),m,n);return Math.floor(i)+Math.log(Wp.round(Math.pow(10,y),1))/Math.LN10}else throw"unrecognized dtick "+String(s)}};fa.tickText=function(e,t,r,a){var n=Lz(e,t),o=e.tickmode==="array",i=r||o,s=e.type,l=s==="category"?e.d2l_noadd:e.d2l,u;if(o&&Array.isArray(e.ticktext)){var f=Gn.simpleMap(e.range,e.r2l),c=(Math.abs(f[1]-f[0])-(e._lBreaks||0))/1e4;for(u=0;u<e.ticktext.length&&!(Math.abs(t-l(e.tickvals[u]))<c);u++);if(u<e.ticktext.length)return n.text=String(e.ticktext[u]),n}function h(d){if(d===void 0)return!0;if(r)return d==="none";var g={first:e._tmin,last:e._tmax}[d];return d!=="all"&&t!==g}var v=r?"never":e.exponentformat!=="none"&&h(e.showexponent)?"hide":"";if(s==="date"?uPe(e,n,r,i):s==="log"?fPe(e,n,r,i,v):s==="category"?cPe(e,n):s==="multicategory"?hPe(e,n,r):zz(e)?dPe(e,n,r,i,v):vPe(e,n,r,i,v),a||(e.tickprefix&&!h(e.showtickprefix)&&(n.text=e.tickprefix+n.text),e.ticksuffix&&!h(e.showticksuffix)&&(n.text+=e.ticksuffix)),e.tickson==="boundaries"||e.showdividers){var p=function(d){var g=e.l2p(d);return g>=0&&g<=e._length?d:null};n.xbnd=[p(n.x-.5),p(n.x+e.dtick-.5)]}return n};fa.hoverLabelText=function(e,t,r){r&&(e=Gn.extendFlat({},e,{hoverformat:r}));var a=Array.isArray(t)?t[0]:t,n=Array.isArray(t)?t[1]:void 0;if(n!==void 0&&n!==a)return fa.hoverLabelText(e,a,r)+" - "+fa.hoverLabelText(e,n,r);var o=e.type==="log"&&a<=0,i=fa.tickText(e,e.c2l(o?-a:a),"hover").text;return o?a===0?"0":mx+i:i};function Lz(e,t,r){var a=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:a.size,font:a.family,fontColor:a.color}}function uPe(e,t,r,a){var n=e._tickround,o=r&&e.hoverformat||fa.getTickFormat(e);a&&(Gl(n)?n=4:n={y:"m",m:"d",d:"M",M:"S",S:4}[n]);var i=Gn.formatDate(t.x,o,n,e._dateFormat,e.calendar,e._extraFormat),s,l=i.indexOf(`
`);if(l!==-1&&(s=i.substr(l+1),i=i.substr(0,l)),a&&(i==="00:00:00"||i==="00:00"?(i=s,s=""):i.length===8&&(i=i.replace(/:00$/,""))),s)if(r)n==="d"?i+=", "+s:i=s+(i?", "+i:"");else if(!e._inCalcTicks||e._prevDateHead!==s)e._prevDateHead=s,i+="<br>"+s;else{var u=AT(e),f=e._trueSide||e.side;(!u&&f==="top"||u&&f==="bottom")&&(i+="<br> ")}t.text=i}function fPe(e,t,r,a,n){var o=e.dtick,i=t.x,s=e.tickformat,l=typeof o=="string"&&o.charAt(0);if(n==="never"&&(n=""),a&&l!=="L"&&(o="L3",l="L"),s||l==="L")t.text=TT(Math.pow(10,i),e,n,a);else if(Gl(o)||l==="D"&&Gn.mod(i+.01,1)<.1){var u=Math.round(i),f=Math.abs(u),c=e.exponentformat;c==="power"||uE(c)&&Pz(u)?(u===0?t.text=1:u===1?t.text="10":t.text="10<sup>"+(u>1?"":mx)+f+"</sup>",t.fontSize*=1.25):(c==="e"||c==="E")&&f>2?t.text="1"+c+(u>0?"+":mx)+f:(t.text=TT(Math.pow(10,i),e,"","fakehover"),o==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(l==="D")t.text=String(Math.round(Math.pow(10,Gn.mod(i,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(o);if(e.dtick==="D1"){var h=String(t.text).charAt(0);(h==="0"||h==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(i<0?.5:.25)))}}function cPe(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function hPe(e,t,r){var a=Math.round(t.x),n=e._categories[a]||[],o=n[1]===void 0?"":String(n[1]),i=n[0]===void 0?"":String(n[0]);r?t.text=i+" - "+o:(t.text=o,t.text2=i)}function vPe(e,t,r,a,n){n==="never"?n="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(n="hide"),t.text=TT(t.x,e,n,a)}function dPe(e,t,r,a,n){if(e.thetaunit==="radians"&&!r){var o=t.x/180;if(o===0)t.text="0";else{var i=pPe(o);if(i[1]>=100)t.text=TT(Gn.deg2rad(t.x),e,n,a);else{var s=t.x<0;i[1]===1?i[0]===1?t.text="\u03C0":t.text=i[0]+"\u03C0":t.text=["<sup>",i[0],"</sup>","\u2044","<sub>",i[1],"</sub>","\u03C0"].join(""),s&&(t.text=mx+t.text)}}}else t.text=TT(t.x,e,n,a)}function pPe(e){function t(s,l){return Math.abs(s-l)<=1e-6}function r(s,l){return t(l,0)?s:r(l,s%l)}function a(s){for(var l=1;!t(Math.round(s*l)/l,s);)l*=10;return l}var n=a(e),o=e*n,i=Math.abs(r(o,n));return[Math.round(o/i),Math.round(n/i)]}var gPe=["f","p","n","\u03BC","m","","k","M","G","T"];function uE(e){return e==="SI"||e==="B"}function Pz(e){return e>14||e<-15}function TT(e,t,r,a){var n=e<0,o=t._tickround,i=r||t.exponentformat||"B",s=t._tickexponent,l=fa.getTickFormat(t),u=t.separatethousands;if(a){var f={exponentformat:i,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:Gl(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};sK(f),o=(Number(f._tickround)||0)+4,s=f._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,mx);var c=Math.pow(10,-o)/2;if(i==="none"&&(s=0),e=Math.abs(e),e<c)e="0",n=!1;else{if(e+=c,s&&(e*=Math.pow(10,-s),o+=s),o===0)e=String(Math.floor(e));else if(o<0){e=String(Math.round(e)),e=e.substr(0,e.length+o);for(var h=o;h<0;h++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;v&&(e=e.substr(0,v+o).replace(/\.?0+$/,""))}e=Gn.numSeparate(e,t._separators,u)}if(s&&i!=="hide"){uE(i)&&Pz(s)&&(i="power");var p;s<0?p=mx+-s:i!=="power"?p="+"+s:p=String(s),i==="e"||i==="E"?e+=i+p:i==="power"?e+="\xD710<sup>"+p+"</sup>":i==="B"&&s===9?e+="B":uE(i)&&(e+=gPe[s/3+5])}return n?mx+e:e}fa.getTickFormat=function(e){var t;function r(l){return typeof l!="string"?l:Number(l.replace("M",""))*wT}function a(l,u){var f=["L","D"];if(typeof l==typeof u){if(typeof l=="number")return l-u;var c=f.indexOf(l.charAt(0)),h=f.indexOf(u.charAt(0));return c===h?Number(l.replace(/(L|D)/g,""))-Number(u.replace(/(L|D)/g,"")):c-h}else return typeof l=="number"?1:-1}function n(l,u,f){var c=f||function(p){return p},h=u[0],v=u[1];return(!h&&typeof h!="number"||c(h)<=c(l))&&(!v&&typeof v!="number"||c(v)>=c(l))}function o(l,u){var f=u[0]===null,c=u[1]===null,h=a(l,u[0])>=0,v=a(l,u[1])<=0;return(f||h)&&(c||v)}var i,s;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&n(e.dtick,s.dtickrange,r)){i=s;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&o(e.dtick,s.dtickrange)){i=s;break}break}}return i?i.value:e.tickformat};fa.getSubplots=function(e,t){var r=e._fullLayout._subplots,a=r.cartesian.concat(r.gl2d||[]),n=t?fa.findSubplotsWithAxis(a,t):a;return n.sort(function(o,i){var s=o.substr(1).split("y"),l=i.substr(1).split("y");return s[0]===l[0]?+s[1]-+l[1]:+s[0]-+l[0]}),n};fa.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),a=[],n=0;n<e.length;n++){var o=e[n];r.test(o)&&a.push(o)}return a};fa.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},n=fa.list(e,"x",!0),o=fa.list(e,"y",!0),i=[],s,l;for(s=0;s<n.length;s++)for(i.push({x:n[s],y:a}),l=0;l<o.length;l++)s===0&&i.push({x:r,y:o[l]}),i.push({x:n[s],y:o[l]});var u=t._clips.selectAll(".axesclip").data(i,function(f){return f.x._id+f.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(f){return"clip"+t._uid+f.x._id+f.y._id}).append("rect"),u.exit().remove(),u.each(function(f){Wp.select(this).select("rect").attr({x:f.x._offset||0,y:f.y._offset||0,width:f.x._length||1,height:f.y._length||1})})}};fa.draw=function(e,t,r){var a=e._fullLayout;t==="redraw"&&a._paper.selectAll("g.subplot").each(function(o){var i=o[0],s=a._plots[i];if(s){var l=s.xaxis,u=s.yaxis;s.xaxislayer.selectAll("."+l._id+"tick").remove(),s.yaxislayer.selectAll("."+u._id+"tick").remove(),s.xaxislayer.selectAll("."+l._id+"tick2").remove(),s.yaxislayer.selectAll("."+u._id+"tick2").remove(),s.xaxislayer.selectAll("."+l._id+"divider").remove(),s.yaxislayer.selectAll("."+u._id+"divider").remove(),s.gridlayer&&s.gridlayer.selectAll("path").remove(),s.zerolinelayer&&s.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+l._id+"title").remove(),a._infolayer.select(".g-"+u._id+"title").remove()}});var n=!t||t==="redraw"?fa.listIds(e):t;return Gn.syncOrAsync(n.map(function(o){return function(){if(!!o){var i=fa.getFromId(e,o),s=fa.drawOne(e,i,r);return i._r=i.range.slice(),i._rl=Gn.simpleMap(i._r,i.r2l),s}}}))};fa.drawOne=function(e,t,r){r=r||{};var a,n,o;t.setScale();var i=e._fullLayout,s=t._id,l=s.charAt(0),u=fa.counterLetter(s),f=i._plots[t._mainSubplot];if(!f)return;var c=f[l+"axislayer"],h=t._mainLinePosition,v=t._mainMirrorPosition,p=t._vals=fa.calcTicks(t),d=[t.mirror,h,v].join("_");for(a=0;a<p.length;a++)p[a].axInfo=d;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var g={};function m(Te){var he=s+(Te||"tick");return g[he]||(g[he]=bPe(t,he)),g[he]}if(!!t.visible){var y=fa.makeTransTickFn(t),_=fa.makeTransTickLabelFn(t),S,M,w=t.ticks==="inside",A=t.ticks==="outside";if(t.tickson==="boundaries"){var k=mPe(t,p);M=fa.clipEnds(t,k),S=w?M:k}else M=fa.clipEnds(t,p),S=w&&t.ticklabelmode!=="period"?M:p;var T=t._gridVals=M,L=xPe(t,p);if(!i._hasOnlyLargeSploms){var C=t._subplotsWith,I={};for(a=0;a<C.length;a++){n=C[a],o=i._plots[n];var R=o[u+"axis"],B=R._mainAxis._id;if(!I[B]){I[B]=1;var N=l==="x"?"M0,"+R._offset+"v"+R._length:"M"+R._offset+",0h"+R._length;fa.drawGrid(e,t,{vals:T,counterAxis:R,layer:o.gridlayer.select("."+s),path:N,transFn:y}),fa.drawZeroLine(e,t,{counterAxis:R,layer:o.zerolinelayer,path:N,transFn:y})}}}var D=fa.getTickSigns(t),O=[];if(t.ticks){var $=fa.makeTickPath(t,h,D[2]),Y,X;t._anchorAxis&&t.mirror&&t.mirror!==!0?(Y=fa.makeTickPath(t,v,D[3]),X=$+Y):(Y="",X=$);var ee;if(t.showdividers&&A&&t.tickson==="boundaries"){var Q={};for(a=0;a<L.length;a++)Q[L[a].x]=1;ee=function(Te){return Q[Te.x]?Y:X}}else ee=X;fa.drawTicks(e,t,{vals:S,layer:c,path:ee,transFn:y}),t.mirror==="allticks"&&(O=Object.keys(t._linepositions||{}))}for(a=0;a<O.length;a++){n=O[a],o=i._plots[n];var Z=t._linepositions[n]||[],q=fa.makeTickPath(t,Z[0],D[0])+fa.makeTickPath(t,Z[1],D[1]);fa.drawTicks(e,t,{vals:S,layer:o[l+"axislayer"],path:q,transFn:y})}var ae=[];if(ae.push(function(){return fa.drawLabels(e,t,{vals:p,layer:c,plotinfo:o,transFn:_,labelFns:fa.makeLabelFns(t,h)})}),t.type==="multicategory"){var ie={x:2,y:10}[l];ae.push(function(){var Te={x:"height",y:"width"}[l],he=m()[Te]+ie+(t._tickAngles[s+"tick"]?t.tickfont.size*sE:0);return fa.drawLabels(e,t,{vals:yPe(t,p),layer:c,cls:s+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:y,labelFns:fa.makeLabelFns(t,h+he*D[4])})}),ae.push(function(){return t._depth=D[4]*(m("tick2")[t.side]-h),wPe(e,t,{vals:L,layer:c,path:fa.makeTickPath(t,h,D[4],t._depth),transFn:y})})}else t.title.hasOwnProperty("standoff")&&ae.push(function(){t._depth=D[4]*(m()[t.side]-h)});var we=xT.getComponentMethod("rangeslider","isVisible")(t);return ae.push(function(){var Te=t.side.charAt(0),he=Z4e[t.side].charAt(0),xe=fa.getPxPosition(e,t),Se=A?t.ticklen:0,ye,re,se,de;if((t.automargin||we)&&(t.type==="multicategory"?ye=m("tick2"):(ye=m(),l==="x"&&Te==="b"&&(t._depth=Math.max(ye.width>0?ye.bottom-xe:0,Se)))),t.automargin){re={x:0,y:0,r:0,l:0,t:0,b:0};var Me=[0,1];if(l==="x"){if(Te==="b"?re[Te]=t._depth:(re[Te]=t._depth=Math.max(ye.width>0?xe-ye.top:0,Se),Me.reverse()),ye.width>0){var Ie=ye.right-(t._offset+t._length);Ie>0&&(re.xr=1,re.r=Ie);var Ee=t._offset-ye.left;Ee>0&&(re.xl=0,re.l=Ee)}}else if(Te==="l"?re[Te]=t._depth=Math.max(ye.height>0?xe-ye.left:0,Se):(re[Te]=t._depth=Math.max(ye.height>0?ye.right-xe:0,Se),Me.reverse()),ye.height>0){var qe=ye.bottom-(t._offset+t._length);qe>0&&(re.yb=0,re.b=qe);var be=t._offset-ye.top;be>0&&(re.yt=1,re.t=be)}re[u]=t.anchor==="free"?t.position:t._anchorAxis.domain[Me[0]],t.title.text!==i._dfltTitle[l]&&(re[Te]+=lK(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(se={x:0,y:0,r:0,l:0,t:0,b:0},se[he]=t.linewidth,t.mirror&&t.mirror!==!0&&(se[he]+=Se),t.mirror===!0||t.mirror==="ticks"?se[u]=t._anchorAxis.domain[Me[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(se[u]=[t._counterDomainMin,t._counterDomainMax][Me[1]]))}we&&(de=xT.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),G_.autoMargin(e,Rz(t),re),G_.autoMargin(e,fK(t),se),G_.autoMargin(e,cK(t),de)}),!r.skipTitle&&!(we&&t.side==="bottom")&&ae.push(function(){return TPe(e,t)}),Gn.syncOrAsync(ae)}};function mPe(e,t){var r=[],a,n=function(o,i){var s=o.xbnd[i];s!==null&&r.push(Gn.extendFlat({},o,{x:s}))};if(t.length){for(a=0;a<t.length;a++)n(t[a],0);n(t[a-1],1)}return r}function yPe(e,t){for(var r=[],a={},n=0;n<t.length;n++){var o=t[n];a[o.text2]?a[o.text2].push(o.x):a[o.text2]=[o.x]}for(var i in a)r.push(Lz(e,Gn.interp(a[i],.5),i));return r}function xPe(e,t){var r=[],a,n,o=t.length&&t[t.length-1].x<t[0].x,i=function(l,u){var f=l.xbnd[u];f!==null&&r.push(Gn.extendFlat({},l,{x:f}))};if(e.showdividers&&t.length){for(a=0;a<t.length;a++){var s=t[a];s.text2!==n&&i(s,o?1:0),n=s.text2}i(t[a-1],o?0:1)}return r}function bPe(e,t){var r,a,n,o;return e._selections[t].size()?(r=1/0,a=-1/0,n=1/0,o=-1/0,e._selections[t].each(function(){var i=Dz(this),s=Gd.bBox(i.node().parentNode);r=Math.min(r,s.top),a=Math.max(a,s.bottom),n=Math.min(n,s.left),o=Math.max(o,s.right)})):(r=0,a=0,n=0,o=0),{top:r,bottom:a,left:n,right:o,height:a-r,width:o-n}}fa.getTickSigns=function(e){var t=e._id.charAt(0),r={x:"top",y:"right"}[t],a=e.side===r?1:-1,n=[-1,1,a,-a];return e.ticks!=="inside"==(t==="x")&&(n=n.map(function(o){return-o})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n};fa.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return V_(e._offset+e.l2p(t.x),0)}:function(t){return V_(0,e._offset+e.l2p(t.x))}};fa.makeTransTickLabelFn=function(e){var t=_Pe(e),r=t[0],a=t[1];return e._id.charAt(0)==="x"?function(n){return V_(r+e._offset+e.l2p(Iz(n)),a)}:function(n){return V_(a,r+e._offset+e.l2p(Iz(n)))}};function Iz(e){return e.periodX!==void 0?e.periodX:e.x}function _Pe(e){var t=e.ticklabelposition||"",r=function(v){return t.indexOf(v)!==-1},a=r("top"),n=r("left"),o=r("right"),i=r("bottom"),s=r("inside"),l=i||n||a||o;if(!l&&!s)return[0,0];var u=e.side,f=l?(e.tickwidth||0)/2:0,c=kz,h=e.tickfont?e.tickfont.size:12;return(i||a)&&(f+=h*yx,c+=(e.linewidth||0)/2),(n||o)&&(f+=(e.linewidth||0)/2,c+=kz),s&&u==="top"&&(c-=h*(1-yx)),(n||a)&&(f=-f),(u==="bottom"||u==="right")&&(c=-c),[l?f:0,s?c:0]}fa.makeTickPath=function(e,t,r,a){a=a!==void 0?a:e.ticklen;var n=e._id.charAt(0),o=(e.linewidth||1)/2;return n==="x"?"M0,"+(t+o*r)+"v"+a*r:"M"+(t+o*r)+",0h"+a*r};fa.makeLabelFns=function(e,t,r){var a=e.ticklabelposition||"",n=function(I){return a.indexOf(I)!==-1},o=n("top"),i=n("left"),s=n("right"),l=n("bottom"),u=l||i||o||s,f=n("inside"),c=a==="inside"&&e.ticks==="inside"||!f&&e.ticks==="outside"&&e.tickson!=="boundaries",h=0,v=0,p=c?e.ticklen:0;if(f?p*=-1:u&&(p=0),c&&(h+=p,r)){var d=Gn.deg2rad(r);h=p*Math.cos(d)+1,v=p*Math.sin(d)}e.showticklabels&&(c||e.showline)&&(h+=.2*e.tickfont.size),h+=(e.linewidth||1)/2*(f?-1:1);var g={labelStandoff:h,labelShift:v},m,y,_,S,M=0,w=e.side,A=e._id.charAt(0),k=e.tickangle,T;if(A==="x")T=!f&&w==="bottom"||f&&w==="top",S=T?1:-1,f&&(S*=-1),m=v*S,y=t+h*S,_=T?1:-.2,Math.abs(k)===90&&(f?_+=oE:k===-90&&w==="bottom"?_=yx:k===90&&w==="top"?_=oE:_=.5,M=oE/2*(k/90)),g.xFn=function(I){return I.dx+m+M*I.fontSize},g.yFn=function(I){return I.dy+y+I.fontSize*_},g.anchorFn=function(I,R){if(u){if(i)return"end";if(s)return"start"}return!Gl(R)||R===0||R===180?"middle":R*S<0!==f?"end":"start"},g.heightFn=function(I,R,B){return R<-60||R>60?-.5*B:e.side==="top"!==f?-B:0};else if(A==="y"){if(T=!f&&w==="left"||f&&w==="right",S=T?1:-1,f&&(S*=-1),m=h,y=v*S,_=0,!f&&Math.abs(k)===90&&(k===-90&&w==="left"||k===90&&w==="right"?_=yx:_=.5),f){var L=Gl(k)?+k:0;if(L!==0){var C=Gn.deg2rad(L);M=Math.abs(Math.sin(C))*yx*S,_=0}}g.xFn=function(I){return I.dx+t-(m+I.fontSize*_)*S+M*I.fontSize},g.yFn=function(I){return I.dy+y+I.fontSize*oE},g.anchorFn=function(I,R){return Gl(R)&&Math.abs(R)===90?"middle":T?"end":"start"},g.heightFn=function(I,R,B){return e.side==="right"&&(R*=-1),R<-30?-B:R<30?-.5*B:0}}return g};function fE(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}fa.drawTicks=function(e,t,r){r=r||{};var a=t._id+"tick",n=r.vals;t.ticklabelmode==="period"&&(n=n.slice(),n.shift());var o=r.layer.selectAll("path."+a).data(t.ticks?n:[],fE);o.exit().remove(),o.enter().append("path").classed(a,1).classed("ticks",1).classed("crisp",r.crisp!==!1).call(_T.stroke,t.tickcolor).style("stroke-width",Gd.crispRound(e,t.tickwidth,1)+"px").attr("d",r.path).style("display",null),hE(t,[JZ]),o.attr("transform",r.transFn)};fa.drawGrid=function(e,t,r){r=r||{};var a=t._id+"grid",n=r.vals,o=r.counterAxis;if(t.showgrid===!1)n=[];else if(o&&fa.shouldShowZeroLine(e,t,o))for(var i=t.tickmode==="array",s=0;s<n.length;s++){var l=n[s].x;if(i?!l:Math.abs(l)<t.dtick/100)if(n=n.slice(0,s).concat(n.slice(s+1)),i)s--;else break}var u=r.layer.selectAll("path."+a).data(n,fE);u.exit().remove(),u.enter().append("path").classed(a,1).classed("crisp",r.crisp!==!1),t._gw=Gd.crispRound(e,t.gridwidth,1),u.attr("transform",r.transFn).attr("d",r.path).call(_T.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),hE(t,[Mz]),typeof r.path=="function"&&u.attr("d",r.path)};fa.drawZeroLine=function(e,t,r){r=r||r;var a=t._id+"zl",n=fa.shouldShowZeroLine(e,t,r.counterAxis),o=r.layer.selectAll("path."+a).data(n?[{x:0,id:t._id}]:[]);o.exit().remove(),o.enter().append("path").classed(a,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(i,s){return J4e(i.id,s.id)})}),o.attr("transform",r.transFn).attr("d",r.path).call(_T.stroke,t.zerolinecolor||_T.defaultLine).style("stroke-width",Gd.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),hE(t,[Sz])};fa.drawLabels=function(e,t,r){r=r||{};var a=e._fullLayout,n=t._id,o=n.charAt(0),i=r.cls||n+"tick",s=r.vals,l=r.labelFns,u=r.secondary?0:t.tickangle,f=(t._prevTickAngles||{})[i],c=r.layer.selectAll("g."+i).data(t.showticklabels?s:[],fE),h=[];c.enter().append("g").classed(i,1).append("text").attr("text-anchor","middle").each(function(S){var M=Wp.select(this),w=e._promises.length;M.call(bT.positionText,l.xFn(S),l.yFn(S)).call(Gd.font,S.font,S.fontSize,S.fontColor).text(S.text).call(bT.convertToTspans,e),e._promises[w]?h.push(e._promises.pop().then(function(){v(M,u)})):v(M,u)}),hE(t,[QZ]),c.exit().remove(),r.repositionOnUpdate&&c.each(function(S){Wp.select(this).select("text").call(bT.positionText,l.xFn(S),l.yFn(S))});function v(S,M){S.each(function(w){var A=Wp.select(this),k=A.select(".text-math-group"),T=l.anchorFn(w,M),L=r.transFn.call(A.node(),w)+(Gl(M)&&+M!=0?" rotate("+M+","+l.xFn(w)+","+(l.yFn(w)-w.fontSize/2)+")":""),C=bT.lineCount(A),I=sE*w.fontSize,R=l.heightFn(w,Gl(M)?+M:0,(C-1)*I);if(R&&(L+=V_(0,R)),k.empty()){var B=A.select("text");B.attr({transform:L,"text-anchor":T}),B.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var N=Gd.bBox(k.node()).width,D=N*{end:-.5,start:.5}[T];k.attr("transform",L+V_(D,0))}})}t._adjustTickLabelsOverflow=function(){var S=t.ticklabeloverflow;if(!(!S||S==="allow")){var M=S.indexOf("hide")!==-1,w=t._id.charAt(0)==="x",A=0,k=w?e._fullLayout.width:e._fullLayout.height;if(S.indexOf("domain")!==-1){var T=Gn.simpleMap(t.range,t.r2l);A=t.l2p(T[0])+t._offset,k=t.l2p(T[1])+t._offset}var L=Math.min(A,k),C=Math.max(A,k),I=t.side,R=1/0,B=-1/0;c.each(function($){var Y=Wp.select(this),X=Y.select(".text-math-group");if(X.empty()){var ee=Gd.bBox(Y.node()),Q=0;w?(ee.right>C||ee.left<L)&&(Q=1):(ee.bottom>C||ee.top+(t.tickangle?0:$.fontSize/4)<L)&&(Q=1);var Z=Y.select("text");Q?M&&Z.style("opacity",0):(Z.style("opacity",1),I==="bottom"||I==="right"?R=Math.min(R,w?ee.top:ee.left):R=-1/0,I==="top"||I==="left"?B=Math.max(B,w?ee.bottom:ee.right):B=1/0)}});for(var N in a._plots){var D=a._plots[N];if(!(t._id!==D.xaxis._id&&t._id!==D.yaxis._id)){var O=w?D.yaxis:D.xaxis;O&&(O["_visibleLabelMin_"+t._id]=R,O["_visibleLabelMax_"+t._id]=B)}}}},t._hideCounterAxisInsideTickLabels=function(S){var M=t._id.charAt(0)==="x",w=[];for(var A in a._plots){var k=a._plots[A];t._id!==k.xaxis._id&&t._id!==k.yaxis._id||w.push(M?k.yaxis:k.xaxis)}w.forEach(function(T,L){T&&AT(T)&&(S||[Sz,Mz,JZ,QZ]).forEach(function(C){var I=C.K==="tick"&&C.L==="text"&&t.ticklabelmode==="period",R=a._plots[t._mainSubplot],B;C.K===Sz.K?B=R.zerolinelayer.selectAll("."+t._id+"zl"):C.K===Mz.K?B=R.gridlayer.selectAll("."+t._id):B=R[t._id.charAt(0)+"axislayer"],B.each(function(){var N=Wp.select(this);C.L&&(N=N.selectAll(C.L)),N.each(function(D){var O=t.l2p(I?Iz(D):D.x)+t._offset,$=Wp.select(this);O<t["_visibleLabelMax_"+T._id]&&O>t["_visibleLabelMin_"+T._id]?$.style("display","none"):C.K==="tick"&&!L&&$.style("display",null)})})})})},v(c,f+1?f:u);function p(){return h.length&&Promise.all(h)}var d=null;function g(){if(v(c,u),s.length&&o==="x"&&!Gl(u)&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){d=0;var S=0,M=[],w;if(c.each(function(ee){S=Math.max(S,ee.fontSize);var Q=t.l2p(ee.x),Z=Dz(this),q=Gd.bBox(Z.node());M.push({top:0,bottom:10,height:10,left:Q-q.width/2,right:Q+q.width/2+2,width:q.width+2})}),(t.tickson==="boundaries"||t.showdividers)&&!r.secondary){var A=2;for(t.ticks&&(A+=t.tickwidth/2),w=0;w<M.length;w++){var k=s[w].xbnd,T=M[w];if(k[0]!==null&&T.left-t.l2p(k[0])<A||k[1]!==null&&t.l2p(k[1])-T.right<A){d=90;break}}}else{var L=s.length,C=Math.abs((s[L-1].x-s[0].x)*t._m)/(L-1),I=t.ticklabelposition||"",R=function(ee){return I.indexOf(ee)!==-1},B=R("top"),N=R("left"),D=R("right"),O=R("bottom"),$=O||N||B||D,Y=$?(t.tickwidth||0)+2*kz:0,X=C<S*2.5||t.type==="multicategory"||t._name==="realaxis";for(w=0;w<M.length-1;w++)if(Gn.bBoxIntersect(M[w],M[w+1],Y)){d=X?90:30;break}}d&&v(c,d)}}t._selections&&(t._selections[i]=c);var m=[p];t.automargin&&a._redrawFromAutoMarginCount&&f===90?(d=90,m.push(function(){v(c,f)})):m.push(g),t._tickAngles&&m.push(function(){t._tickAngles[i]=d===null?Gl(u)?u:0:d});var y=t._anchorAxis;y&&y.autorange&&AT(t)&&!Q4e(a,t._id)&&(a._insideTickLabelsAutorange||(a._insideTickLabelsAutorange={}),a._insideTickLabelsAutorange[y._name+".autorange"]=y.autorange,m.push(function(){c.each(function(M,w){var A=Dz(this),k=A.select(".text-math-group");k.empty()&&(t._vals[w].bb=Gd.bBox(A.node()))})}));var _=Gn.syncOrAsync(m);return _&&_.then&&e._promises.push(_),_};function wPe(e,t,r){var a=t._id+"divider",n=r.vals,o=r.layer.selectAll("path."+a).data(n,fE);o.exit().remove(),o.enter().insert("path",":first-child").classed(a,1).classed("crisp",1).call(_T.stroke,t.dividercolor).style("stroke-width",Gd.crispRound(e,t.dividerwidth,1)+"px"),o.attr("transform",r.transFn).attr("d",r.path)}fa.getPxPosition=function(e,t){var r=e._fullLayout._size,a=t._id.charAt(0),n=t.side,o;if(t.anchor!=="free"?o=t._anchorAxis:a==="x"?o={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:a==="y"&&(o={_offset:r.l+(t.position||0)*r.w,_length:0}),n==="top"||n==="left")return o._offset;if(n==="bottom"||n==="right")return o._offset+o._length};function lK(e){var t=e.title.font.size,r=(e.title.text.match(bT.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?r?t*(yx+r*sE):t*yx:r?t*(r+1)*sE:t}function TPe(e,t){var r=e._fullLayout,a=t._id,n=a.charAt(0),o=t.title.font.size,i;if(t.title.hasOwnProperty("standoff"))i=t._depth+t.title.standoff+lK(t);else{var s=AT(t);if(t.type==="multicategory")i=t._depth;else{var l=1.5*o;s&&(l=.5*o,t.ticks==="outside"&&(l+=t.ticklen)),i=10+l+(t.linewidth?t.linewidth-1:0)}s||(n==="x"?i+=t.side==="top"?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):i+=t.side==="right"?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0))}var u=fa.getPxPosition(e,t),f,c,h;n==="x"?(c=t._offset+t._length/2,h=t.side==="top"?u-i:u+i):(h=t._offset+t._length/2,c=t.side==="right"?u+i:u-i,f={rotate:"-90",offset:0});var v;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];if(v={selection:p,side:t.side},p&&p.node()&&p.node().parentNode){var d=Gd.getTranslate(p.node().parentNode);v.offsetLeft=d.x,v.offsetTop=d.y}t.title.hasOwnProperty("standoff")&&(v.pad=0)}return j4e.draw(e,a+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:v,transform:f,attributes:{x:c,y:h,"text-anchor":"middle"}})}fa.shouldShowZeroLine=function(e,t,r){var a=Gn.simpleMap(t.range,t.r2l);return a[0]*a[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===nE)&&(uK(t,0)||!APe(e,t,r,a)||SPe(e,t))};fa.clipEnds=function(e,t){return t.filter(function(r){return uK(e,r.x)})};function uK(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function APe(e,t,r,a){var n=r._mainAxis;if(!n)return;var o=e._fullLayout,i=t._id.charAt(0),s=fa.counterLetter(t._id),l=t._offset+(Math.abs(a[0])<Math.abs(a[1])==(i==="x")?0:t._length);function u(p){if(!p.showline||!p.linewidth)return!1;var d=Math.max((p.linewidth+t.zerolinewidth)/2,1);function g(_){return typeof _=="number"&&Math.abs(_-l)<d}if(g(p._mainLinePosition)||g(p._mainMirrorPosition))return!0;var m=p._linepositions||{};for(var y in m)if(g(m[y][0])||g(m[y][1]))return!0}var f=o._plots[r._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return u(r);for(var c=fa.list(e,s),h=0;h<c.length;h++){var v=c[h];if(v._mainAxis===n&&u(v))return!0}}function SPe(e,t){for(var r=e._fullData,a=t._mainSubplot,n=t._id.charAt(0),o=0;o<r.length;o++){var i=r[o];if(i.visible===!0&&i.xaxis+i.yaxis===a&&(xT.traceIs(i,"bar-like")&&i.orientation==={x:"h",y:"v"}[n]||i.fill&&i.fill.charAt(i.fill.length-1)===n))return!0}return!1}function Dz(e){var t=Wp.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}fa.allowAutoMargin=function(e){for(var t=fa.list(e,"",!0),r=0;r<t.length;r++){var a=t[r];a.automargin&&(G_.allowAutoMargin(e,Rz(a)),a.mirror&&G_.allowAutoMargin(e,fK(a))),xT.getComponentMethod("rangeslider","isVisible")(a)&&G_.allowAutoMargin(e,cK(a))}};function Rz(e){return e._id+".automargin"}function fK(e){return Rz(e)+".mirror"}function cK(e){return e._id+".rangeslider"}fa.swap=function(e,t){for(var r=MPe(e,t),a=0;a<r.length;a++)kPe(e,r[a].x,r[a].y)};function MPe(e,t){var r=[],a,n;for(a=0;a<t.length;a++){var o=[],i=e._fullData[t[a]].xaxis,s=e._fullData[t[a]].yaxis;if(!(!i||!s)){for(n=0;n<r.length;n++)(r[n].x.indexOf(i)!==-1||r[n].y.indexOf(s)!==-1)&&o.push(n);if(!o.length){r.push({x:[i],y:[s]});continue}var l=r[o[0]],u;if(o.length>1)for(n=1;n<o.length;n++)u=r[o[n]],cE(l.x,u.x),cE(l.y,u.y);cE(l.x,[i]),cE(l.y,[s])}}return r}function cE(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function kPe(e,t,r){var a=[],n=[],o=e.layout,i,s;for(i=0;i<t.length;i++)a.push(fa.getFromId(e,t[i]));for(i=0;i<r.length;i++)n.push(fa.getFromId(e,r[i]));var l=Object.keys(q4e),u=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(i=0;i<l.length;i++){var c=l[i],h=a[0][c],v=n[0][c],p=!0,d=!1,g=!1;if(!(c.charAt(0)==="_"||typeof h=="function"||u.indexOf(c)!==-1)){for(s=1;s<a.length&&p;s++){var m=a[s][c];c==="type"&&f.indexOf(h)!==-1&&f.indexOf(m)!==-1&&h!==m?d=!0:m!==h&&(p=!1)}for(s=1;s<n.length&&p;s++){var y=n[s][c];c==="type"&&f.indexOf(v)!==-1&&f.indexOf(y)!==-1&&v!==y?g=!0:n[s][c]!==v&&(p=!1)}p&&(d&&(o[a[0]._name].type="linear"),g&&(o[n[0]._name].type="linear"),EPe(o,c,a,n,e._fullLayout._dfltTitle))}}for(i=0;i<e._fullLayout.annotations.length;i++){var _=e._fullLayout.annotations[i];t.indexOf(_.xref)!==-1&&r.indexOf(_.yref)!==-1&&Gn.swapAttrs(o.annotations[i],["?"])}}function EPe(e,t,r,a,n){var o=Gn.nestedProperty,i=o(e[r[0]._name],t).get(),s=o(e[a[0]._name],t).get(),l;for(t==="title"&&(i&&i.text===n.x&&(i.text=n.y),s&&s.text===n.y&&(s.text=n.x)),l=0;l<r.length;l++)o(e,r[l]._name+"."+t).set(s);for(l=0;l<a.length;l++)o(e,a[l]._name+"."+t).set(i)}function zz(e){return e._id==="angularaxis"}function Fz(e,t){for(var r=t._rangebreaks.length,a=0;a<r;a++){var n=t._rangebreaks[a];if(e>=n.min&&e<n.max)return n.max}return e}function AT(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function hE(e,t){AT(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}var Oz={},kf={exports:{}},CPe={left:0,top:0},hK=LPe;function LPe(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var a=e.clientX||0,n=e.clientY||0,o=PPe(t);return r[0]=a-o.left,r[1]=n-o.top,r}function PPe(e){return e===window||e===document||e===document.body?CPe:e.getBoundingClientRect()}function IPe(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{e=!1}return e}var vE=IPe(),DPe=function(t,r,a,n,o){var i=(t-a)/(n-a),s=i+r/(n-a),l=(i+s)/2;return o==="left"||o==="bottom"?i:o==="center"||o==="middle"?l:o==="right"||o==="top"?s:i<2/3-l?i:s>4/3-l?s:l},vK=bt.exports,RPe=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],zPe=function(t,r,a,n){return a==="left"?t=0:a==="center"?t=1:a==="right"?t=2:t=vK.constrain(Math.floor(t*3),0,2),n==="bottom"?r=0:n==="middle"?r=1:n==="top"?r=2:r=vK.constrain(Math.floor(r*3),0,2),RPe[r][t]},dK={exports:{}},FPe=sT,OPe=k5,NPe=IR.getGraphDiv,BPe=d5,Nz=dK.exports={};Nz.wrapped=function(e,t,r){e=NPe(e),e._fullLayout&&OPe.clear(e._fullLayout._uid+BPe.HOVERID),Nz.raw(e,t,r)};Nz.raw=function(t,r){var a=t._fullLayout,n=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&FPe.triggerHandler(t,"plotly_beforehover",r)===!1)&&(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&n&&t.emit("plotly_unhover",{event:r,points:n}))};var $Pe=hK,Bz=sX,UPe=vE,HPe=bt.exports.removeElement,GPe=Sl,xx=kf.exports={};xx.align=DPe;xx.getCursor=zPe;var pK=dK.exports;xx.unhover=pK.wrapped;xx.unhoverRaw=pK.raw;xx.init=function(t){var r=t.gd,a=1,n=r._context.doubleClickDelay,o=t.element,i,s,l,u,f,c,h,v;r._mouseDownTime||(r._mouseDownTime=0),o.style.pointerEvents="all",o.onmousedown=g,UPe?(o._ontouchstart&&o.removeEventListener("touchstart",o._ontouchstart),o._ontouchstart=g,o.addEventListener("touchstart",g,{passive:!1})):o.ontouchstart=g;function p(_,S,M){return Math.abs(_)<M&&(_=0),Math.abs(S)<M&&(S=0),[_,S]}var d=t.clampFn||p;function g(_){r._dragged=!1,r._dragging=!0;var S=$z(_);i=S[0],s=S[1],h=_.target,c=_,v=_.buttons===2||_.ctrlKey,typeof _.clientX=="undefined"&&typeof _.clientY=="undefined"&&(_.clientX=i,_.clientY=s),l=new Date().getTime(),l-r._mouseDownTime<n?a+=1:(a=1,r._mouseDownTime=l),t.prepFn&&t.prepFn(_,i,s),Bz&&!v?(f=gK(),f.style.cursor=window.getComputedStyle(o).cursor):Bz||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(o).cursor),document.addEventListener("mouseup",y),document.addEventListener("touchend",y),t.dragmode!==!1&&(_.preventDefault(),document.addEventListener("mousemove",m),document.addEventListener("touchmove",m,{passive:!1}))}function m(_){_.preventDefault();var S=$z(_),M=t.minDrag||GPe.MINDRAG,w=d(S[0]-i,S[1]-s,M),A=w[0],k=w[1];(A||k)&&(r._dragged=!0,xx.unhover(r,_)),r._dragged&&t.moveFn&&!v&&(r._dragdata={element:o,dx:A,dy:k},t.moveFn(A,k))}function y(_){if(delete r._dragdata,t.dragmode!==!1&&(_.preventDefault(),document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",m)),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y),Bz?HPe(f):u&&(f.documentElement.style.cursor=u,u=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>n&&(a=Math.max(a-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(a,c),!v){var S;try{S=new MouseEvent("click",_)}catch{var M=$z(_);S=document.createEvent("MouseEvents"),S.initMouseEvent("click",_.bubbles,_.cancelable,_.view,_.detail,_.screenX,_.screenY,M[0],M[1],_.ctrlKey,_.altKey,_.shiftKey,_.metaKey,_.button,_.relatedTarget)}h.dispatchEvent(S)}r._dragging=!1,r._dragged=!1}};function gK(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}xx.coverSlip=gK;function $z(e){return $Pe(e.changedTouches?e.changedTouches[0]:e,document.body)}var dE={},Zp=function(t,r){(t.attr("class")||"").split(" ").forEach(function(a){a.indexOf("cursor-")===0&&t.classed(a,!1)}),r&&t.classed("cursor-"+r,!0)},Uz=Zp,ST="data-savedcursor",mK="!!",VPe=function(t,r){var a=t.attr(ST);if(r){if(!a){for(var n=(t.attr("class")||"").split(" "),o=0;o<n.length;o++){var i=n[o];i.indexOf("cursor-")===0&&t.attr(ST,i.substr(7)).classed(i,!1)}t.attr(ST)||t.attr(ST,mK)}Uz(t,r)}else a&&(t.attr(ST,null),a===mK?Uz(t):Uz(t,a))},Hz=Ts,jPe=us,yK={bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:jPe.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:Hz({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:Hz({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the x position (in normalized coordinates) of the legend.","Defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the y position (in normalized coordinates) of the legend.","Defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:Hz({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},j_={};j_.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};j_.isVertical=function(t){return t.orientation!=="h"};j_.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1};var Gz=Pa,Vd=bt.exports,qPe=si,YPe=ao,WPe=yK,XPe=C_,Vz=j_,xK=function(t,r,a){var n=t.legend||{},o=qPe.newContainer(r,"legend");function i(k,T){return Vd.coerce(n,o,WPe,k,T)}for(var s,l=function(k,T){var L=s._input,C=s;return Vd.coerce(L,C,YPe,k,T)},u=r.font||{},f=Vd.coerceFont(i,"grouptitlefont",Vd.extendFlat({},u,{size:Math.round(u.size*1.1)})),c=0,h=!1,v="normal",p=0;p<a.length;p++)s=a[p],!!s.visible&&((s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&s._module.attributes.showlegend.dflt===!1))&&(c++,s.showlegend&&(h=!0,(Gz.traceIs(s,"pie-like")||s._input.showlegend===!0)&&c++),Vd.coerceFont(l,"legendgrouptitle.font",f)),(Gz.traceIs(s,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(s.fill)!==-1)&&(v=Vz.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),s.legendgroup!==void 0&&s.legendgroup!==""&&(v=Vz.isReversed({traceorder:v})?"reversed+grouped":"grouped"));var d=Vd.coerce(t,r,XPe,"showlegend",h&&c>1);if(d===!1&&(r.legend=void 0),!(d===!1&&!n.uirevision)&&(i("uirevision",r.uirevision),d!==!1)){i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth");var g=Vd.coerceFont(i,"font",r.font),m=i("orientation"),y=m==="h",_,S,M;y?(_=0,Gz.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(S=1.1,M="bottom"):(S=-.1,M="top")):(_=1.02,S=1,M="auto"),i("traceorder",v),Vz.isGrouped(r.legend)&&i("tracegroupgap"),i("itemsizing"),i("itemwidth"),i("itemclick"),i("itemdoubleclick"),i("groupclick"),i("x",_),i("xanchor"),i("y",S),i("yanchor",M),i("valign"),Vd.noneOrAll(n,o,["x","y"]);var w=i("title.text");if(w){i("title.side",y?"left":"top");var A=Vd.extendFlat({},g,{size:Vd.bigFont(g.size)});Vd.coerceFont(i,"title.font",A)}}},jz=bt.exports,bx=Pa,qz=!0,ZPe=function(t,r,a){var n=r._fullLayout;if(r._dragged||r._editing)return;var o=n.legend.itemclick,i=n.legend.itemdoubleclick,s=n.legend.groupclick;a===1&&o==="toggle"&&i==="toggleothers"&&qz&&r.data&&r._context.showTips&&jz.notifier(jz._(r,"Double-click on legend to isolate one trace"),"long"),qz=!1;var l;if(a===1?l=o:a===2&&(l=i),!l)return;var u=s==="togglegroup",f=n.hiddenlabels?n.hiddenlabels.slice():[],c=t.data()[0][0];if(c.groupTitle&&c.noClick)return;var h=r._fullData,v=c.trace,p=v.legendgroup,d,g,m,y,_,S,M={},w=[],A=[],k=[];function T(q,ae,ie){var we=w.indexOf(q),Te=M[ae];return Te||(Te=M[ae]=[]),w.indexOf(q)===-1&&(w.push(q),we=w.length-1),Te[we]=ie,we}function L(q,ae){if(!(c.groupTitle&&!u)){var ie=q._fullInput;if(bx.hasTransform(ie,"groupby")){var we=A[ie.index];if(!we){var Te=bx.getTransformIndices(ie,"groupby"),he=Te[Te.length-1];we=jz.keyedContainer(ie,"transforms["+he+"].styles","target","value.visible"),A[ie.index]=we}var xe=we.get(q._group);xe===void 0&&(xe=!0),xe!==!1&&we.set(q._group,ae),k[ie.index]=T(ie.index,"visible",ie.visible!==!1)}else{var Se=ie.visible===!1?!1:ae;T(ie.index,"visible",Se)}}}if(bx.traceIs(v,"pie-like")){var C=c.label,I=f.indexOf(C);l==="toggle"?I===-1?f.push(C):f.splice(I,1):l==="toggleothers"&&(f=[],r.calcdata[0].forEach(function(q){C!==q.label&&f.push(q.label)}),r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===f.length&&I===-1&&(f=[])),bx.call("_guiRelayout",r,"hiddenlabels",f)}else{var R=p&&p.length,B=[],N;if(R)for(d=0;d<h.length;d++)N=h[d],!!N.visible&&N.legendgroup===p&&B.push(d);if(l==="toggle"){var D;switch(v.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0;break}if(R)if(u)for(d=0;d<h.length;d++)h[d].visible!==!1&&h[d].legendgroup===p&&L(h[d],D);else L(v,D);else L(v,D)}else if(l==="toggleothers"){var O,$,Y,X,ee=!0;for(d=0;d<h.length;d++)if(O=h[d]===v,Y=h[d].showlegend!==!0,!(O||Y)&&($=R&&h[d].legendgroup===p,!$&&h[d].visible===!0&&!bx.traceIs(h[d],"notLegendIsolatable"))){ee=!1;break}for(d=0;d<h.length;d++)if(h[d].visible!==!1&&!bx.traceIs(h[d],"notLegendIsolatable"))switch(v.visible){case"legendonly":L(h[d],!0);break;case!0:X=ee?!0:"legendonly",O=h[d]===v,Y=h[d].showlegend!==!0&&!h[d].legendgroup,$=O||R&&h[d].legendgroup===p,L(h[d],$||Y?!0:X);break}}for(d=0;d<A.length;d++)if(m=A[d],!!m){var Q=m.constructUpdate(),Z=Object.keys(Q);for(g=0;g<Z.length;g++)y=Z[g],S=M[y]=M[y]||[],S[k[d]]=Q[y]}for(_=Object.keys(M),d=0;d<_.length;d++)for(y=_[d],g=0;g<w.length;g++)M[y].hasOwnProperty(g)||(M[y][g]=void 0);bx.call("_guiRestyle",r,M,w)}},bK={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},_K=Pa,Yz=j_,KPe=function(t,r){var a=r._inHover,n=Yz.isGrouped(r),o=Yz.isReversed(r),i={},s=[],l=!1,u={},f=0,c=0,h,v;function p(N,D){if(N===""||!Yz.isGrouped(r)){var O="~~i"+f;s.push(O),i[O]=[D],f++}else s.indexOf(N)===-1?(s.push(N),l=!0,i[N]=[D]):i[N].push(D)}for(h=0;h<t.length;h++){var d=t[h],g=d[0],m=g.trace,y=m.legendgroup;if(!(!a&&(!m.visible||!m.showlegend)))if(_K.traceIs(m,"pie-like"))for(u[y]||(u[y]={}),v=0;v<d.length;v++){var _=d[v].label;u[y][_]||(p(y,{label:_,color:d[v].color,i:d[v].i,trace:m,pts:d[v].pts}),u[y][_]=!0,c=Math.max(c,(_||"").length))}else p(y,g),c=Math.max(c,(m.name||"").length)}if(!s.length)return[];var S=!l||!n,M=[];for(h=0;h<s.length;h++){var w=i[s[h]];S?M.push(w[0]):M.push(w)}for(S&&(M=[M]),h=0;h<M.length;h++){var A=1/0;for(v=0;v<M[h].length;v++){var k=M[h][v].trace.legendrank;A>k&&(A=k)}M[h][0]._groupMinRank=A,M[h][0]._preGroupSort=h}var T=function(N,D){return N[0]._groupMinRank-D[0]._groupMinRank||N[0]._preGroupSort-D[0]._preGroupSort},L=function(N,D){return N.trace.legendrank-D.trace.legendrank||N._preSort-D._preSort};for(M.forEach(function(N,D){N[0]._preGroupSort=D}),M.sort(T),h=0;h<M.length;h++){M[h].forEach(function(N,D){N._preSort=D}),M[h].sort(L);var C=M[h][0].trace,I=null;for(v=0;v<M[h].length;v++){var R=M[h][v].trace.legendgrouptitle;if(R&&R.text){I=R,a&&(R.font=r._groupTitleFont);break}}if(o&&M[h].reverse(),I){var B=!1;for(v=0;v<M[h].length;v++)if(_K.traceIs(M[h][v].trace,"pie-like")){B=!0;break}M[h].unshift({i:-1,groupTitle:I,noClick:B,trace:{showlegend:C.showlegend,legendgroup:C.legendgroup,visible:r.groupclick==="toggleitem"?!0:C.visible}})}for(v=0;v<M[h].length;v++)M[h][v]=[M[h][v]]}return r._lgroupsLength=M.length,r._maxNameLength=c,M},hy={};(function(e){var t=bt.exports;function r(a){return a.indexOf("e")!==-1?a.replace(/[.]?0+e/,"e"):a.indexOf(".")!==-1?a.replace(/[.]?0+$/,""):a}e.formatPiePercent=function(n,o){var i=r((n*100).toPrecision(3));return t.numSeparate(i,o)+"%"},e.formatPieValue=function(n,o){var i=r(n.toPrecision(10));return t.numSeparate(i,o)},e.getFirstFilled=function(n,o){if(!!Array.isArray(n))for(var i=0;i<o.length;i++){var s=n[o[i]];if(s||s===0||s==="")return s}},e.castOption=function(n,o){if(Array.isArray(n))return e.getFirstFilled(n,o);if(n)return n},e.getRotationAngle=function(a){return(a==="auto"?0:a)*Math.PI/180}})(hy);var Wz=Oa.exports,wK=hy.castOption,MT=function(t,r,a){var n=a.marker.line,o=wK(n.color,r.pts)||Wz.defaultLine,i=wK(n.width,r.pts)||0;t.style("stroke-width",i).call(Wz.fill,r.color).call(Wz.stroke,o)},Ef=Ra.exports,Xz=Pa,Ku=bt.exports,TK=Ku.strTranslate,oc=xn.exports,Lv=Oa.exports,Zz=ac.extractOpts,pE=Ro,JPe=MT,QPe=hy.castOption,eIe=bK,AK=12,SK=5,_x=2,tIe=10,q_=5,MK=function(t,r,a){var n=r._fullLayout;a||(a=n.legend);var o=a.itemsizing==="constant",i=a.itemwidth,s=(i+eIe.itemGap*2)/2,l=TK(s,0),u=function(A,k,T,L){var C;if(A+1)C=A;else if(k&&k.width>0)C=k.width;else return 0;return o?L:Math.min(C,T)};t.each(function(A){var k=Ef.select(this),T=Ku.ensureSingle(k,"g","layers");T.style("opacity",A[0].trace.opacity);var L=a.valign,C=A[0].lineHeight,I=A[0].height;if(L==="middle"||!C||!I)T.attr("transform",null);else{var R={top:1,bottom:-1}[L],B=R*(.5*(C-I+3));T.attr("transform",TK(0,B))}var N=T.selectAll("g.legendfill").data([A]);N.enter().append("g").classed("legendfill",!0);var D=T.selectAll("g.legendlines").data([A]);D.enter().append("g").classed("legendlines",!0);var O=T.selectAll("g.legendsymbols").data([A]);O.enter().append("g").classed("legendsymbols",!0),O.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(w).each(h).each(p).each(v).each(g).each(S).each(_).each(f).each(c).each(m).each(y);function f(A){var k=kK(A),T=k.showFill,L=k.showLine,C=k.showGradientLine,I=k.showGradientFill,R=k.anyFill,B=k.anyLine,N=A[0],D=N.trace,O,$,Y=Zz(D),X=Y.colorscale,ee=Y.reversescale,Q=function(he){if(he.size()){var xe="legendfill-"+D.uid;oc.gradient(he,r,xe,Kz(ee),X,"fill")}},Z=function(he){if(he.size()){var xe="legendline-"+D.uid;oc.lineGroupStyle(he),oc.gradient(he,r,xe,Kz(ee),X,"stroke")}},q=pE.hasMarkers(D)||!R?"M5,0":B?"M5,-2":"M5,-3",ae=Ef.select(this),ie=ae.select(".legendfill").selectAll("path").data(T||I?[A]:[]);if(ie.enter().append("path").classed("js-fill",!0),ie.exit().remove(),ie.attr("d",q+"h"+i+"v6h-"+i+"z").call(T?oc.fillGroupStyle:Q),L||C){var we=u(void 0,D.line,tIe,SK);$=Ku.minExtend(D,{line:{width:we}}),O=[Ku.minExtend(N,{trace:$})]}var Te=ae.select(".legendlines").selectAll("path").data(L||C?[O]:[]);Te.enter().append("path").classed("js-line",!0),Te.exit().remove(),Te.attr("d",q+(C?"l"+i+",0.0001":"h"+i)).call(L?oc.lineGroupStyle:Z)}function c(A){var k=kK(A),T=k.anyFill,L=k.anyLine,C=k.showLine,I=k.showMarker,R=A[0],B=R.trace,N=!I&&!L&&!T&&pE.hasText(B),D,O;function $(ie,we,Te,he){var xe=Ku.nestedProperty(B,ie).get(),Se=Ku.isArrayOrTypedArray(xe)&&we?we(xe):xe;if(o&&Se&&he!==void 0&&(Se=he),Te){if(Se<Te[0])return Te[0];if(Se>Te[1])return Te[1]}return Se}function Y(ie){return R._distinct&&R.index&&ie[R.index]?ie[R.index]:ie[0]}if(I||N||C){var X={},ee={};if(I){X.mc=$("marker.color",Y),X.mx=$("marker.symbol",Y),X.mo=$("marker.opacity",Ku.mean,[.2,1]),X.mlc=$("marker.line.color",Y),X.mlw=$("marker.line.width",Ku.mean,[0,5],_x),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Q=$("marker.size",Ku.mean,[2,16],AK);X.ms=Q,ee.marker.size=Q}C&&(ee.line={width:$("line.width",Y,[0,10],SK)}),N&&(X.tx="Aa",X.tp=$("textposition",Y),X.ts=10,X.tc=$("textfont.color",Y),X.tf=$("textfont.family",Y)),D=[Ku.minExtend(R,X)],O=Ku.minExtend(B,ee),O.selectedpoints=null,O.texttemplate=null}var Z=Ef.select(this).select("g.legendpoints"),q=Z.selectAll("path.scatterpts").data(I?D:[]);q.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",l),q.exit().remove(),q.call(oc.pointStyle,O,r),I&&(D[0].mrc=3);var ae=Z.selectAll("g.pointtext").data(N?D:[]);ae.enter().append("g").classed("pointtext",!0).append("text").attr("transform",l),ae.exit().remove(),ae.selectAll("text").call(oc.textPointStyle,O,r)}function h(A){var k=A[0].trace,T=k.type==="waterfall";if(A[0]._distinct&&T){var L=A[0].trace[A[0].dir].marker;return A[0].mc=L.color,A[0].mlw=L.line.width,A[0].mlc=L.line.color,d(A,this,"waterfall")}var C=[];k.visible&&T&&(C=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var I=Ef.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(C);I.enter().append("path").classed("legendwaterfall",!0).attr("transform",l).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(R){var B=Ef.select(this),N=k[R[0]].marker,D=u(void 0,N.line,q_,_x);B.attr("d",R[1]).style("stroke-width",D+"px").call(Lv.fill,N.color),D&&B.call(Lv.stroke,N.line.color)})}function v(A){d(A,this)}function p(A){d(A,this,"funnel")}function d(A,k,T){var L=A[0].trace,C=L.marker||{},I=C.line||{},R=T?L.visible&&L.type===T:Xz.traceIs(L,"bar"),B=Ef.select(k).select("g.legendpoints").selectAll("path.legend"+T).data(R?[A]:[]);B.enter().append("path").classed("legend"+T,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),B.exit().remove(),B.each(function(N){var D=Ef.select(this),O=N[0],$=u(O.mlw,C.line,q_,_x);D.style("stroke-width",$+"px");var Y=O.mcc;if(!a._inHover&&"mc"in O){var X=Zz(C),ee=X.mid;ee===void 0&&(ee=(X.max+X.min)/2),Y=oc.tryColorscale(C,"")(ee)}var Q=Y||O.mc||C.color,Z=C.pattern,q=Z&&oc.getPatternAttr(Z.shape,0,"");if(q){var ae=oc.getPatternAttr(Z.bgcolor,0,null),ie=oc.getPatternAttr(Z.fgcolor,0,null),we=Z.fgopacity,Te=EK(Z.size,8,10),he=EK(Z.solidity,.5,1),xe="legend-"+L.uid;D.call(oc.pattern,"legend",r,xe,q,Te,he,Y,Z.fillmode,ae,ie,we)}else D.call(Lv.fill,Q);$&&Lv.stroke(D,O.mlc||I.color)})}function g(A){var k=A[0].trace,T=Ef.select(this).select("g.legendpoints").selectAll("path.legendbox").data(k.visible&&Xz.traceIs(k,"box-violin")?[A]:[]);T.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),T.exit().remove(),T.each(function(){var L=Ef.select(this);if((k.boxpoints==="all"||k.points==="all")&&Lv.opacity(k.fillcolor)===0&&Lv.opacity((k.line||{}).color)===0){var C=Ku.minExtend(k,{marker:{size:o?AK:Ku.constrain(k.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});T.call(oc.pointStyle,C,r)}else{var I=u(void 0,k.line,q_,_x);L.style("stroke-width",I+"px").call(Lv.fill,k.fillcolor),I&&Lv.stroke(L,k.line.color)}})}function m(A){var k=A[0].trace,T=Ef.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(k.visible&&k.type==="candlestick"?[A,A]:[]);T.enter().append("path").classed("legendcandle",!0).attr("d",function(L,C){return C?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",l).style("stroke-miterlimit",1),T.exit().remove(),T.each(function(L,C){var I=Ef.select(this),R=k[C?"increasing":"decreasing"],B=u(void 0,R.line,q_,_x);I.style("stroke-width",B+"px").call(Lv.fill,R.fillcolor),B&&Lv.stroke(I,R.line.color)})}function y(A){var k=A[0].trace,T=Ef.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(k.visible&&k.type==="ohlc"?[A,A]:[]);T.enter().append("path").classed("legendohlc",!0).attr("d",function(L,C){return C?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",l).style("stroke-miterlimit",1),T.exit().remove(),T.each(function(L,C){var I=Ef.select(this),R=k[C?"increasing":"decreasing"],B=u(void 0,R.line,q_,_x);I.style("fill","none").call(oc.dashLine,R.line.dash,B),B&&Lv.stroke(I,R.line.color)})}function _(A){M(A,this,"pie")}function S(A){M(A,this,"funnelarea")}function M(A,k,T){var L=A[0],C=L.trace,I=T?C.visible&&C.type===T:Xz.traceIs(C,T),R=Ef.select(k).select("g.legendpoints").selectAll("path.legend"+T).data(I?[A]:[]);if(R.enter().append("path").classed("legend"+T,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),R.exit().remove(),R.size()){var B=(C.marker||{}).line,N=u(QPe(B.width,L.pts),B,q_,_x),D=Ku.minExtend(C,{marker:{line:{width:N}}});D.marker.line.color=B.color;var O=Ku.minExtend(L,{trace:D});JPe(R,O,D)}}function w(A){var k=A[0].trace,T,L=[];if(k.visible)switch(k.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],T=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],T=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],T="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],T=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],T=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],T=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],T=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],T=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],T=!1;break}var C=Ef.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);C.enter().append("path").classed("legend3dandfriends",!0).attr("transform",l).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(I,R){var B=Ef.select(this),N=Zz(k),D=N.colorscale,O=N.reversescale,$=function(Q){if(Q.size()){var Z="legendfill-"+k.uid;oc.gradient(Q,r,Z,Kz(O,T==="radial"),D,"fill")}},Y;if(D){if(!T){var ee=D.length;Y=R===0?D[O?ee-1:0][1]:R===1?D[O?0:ee-1][1]:D[Math.floor((ee-1)/2)][1]}}else{var X=k.vertexcolor||k.facecolor||k.color;Y=Ku.isArrayOrTypedArray(X)?X[R]||X[0]:X}B.attr("d",I[0]),Y?B.call(Lv.fill,Y):B.call($)})}};function Kz(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function kK(e){var t=e[0].trace,r=t.contours,a=pE.hasLines(t),n=pE.hasMarkers(t),o=t.visible&&t.fill&&t.fill!=="none",i=!1,s=!1;if(r){var l=r.coloring;l==="lines"?i=!0:a=l==="none"||l==="heatmap"||r.showlines,r.type==="constraint"?o=r._operation!=="=":(l==="fill"||l==="heatmap")&&(s=!0)}return{showMarker:n,showLine:a,showFill:o,showGradientLine:i,showGradientFill:s,anyLine:a||i,anyFill:o||s}}function EK(e,t,r){return e&&Ku.isArrayOrTypedArray(e)?t:e>r?r:e}var Zh=Ra.exports,Ys=bt.exports,Jz=Eo.exports,wx=Pa,CK=sT,Qz=kf.exports,kl=xn.exports,gE=Oa.exports,Y_=xo,LK=ZPe,Du=bK,eF=ou,rIe=eF.LINE_SPACING,mE=eF.FROM_TL,PK=eF.FROM_BR,IK=KPe,aIe=MK,DK=j_,W_=1,RK=function(t,r){return r||(r=t._fullLayout.legend||{}),nIe(t,r)};function nIe(e,t){var r=e._fullLayout,a="legend"+r._uid,n,o=t._inHover;if(o?(n=t.layer,a+="-hover"):n=r._infolayer,!!n){e._legendMouseDownTime||(e._legendMouseDownTime=0);var i;if(o){if(!t.entries)return;i=IK(t.entries,t)}else{if(!e.calcdata)return;i=r.showlegend&&IK(e.calcdata,t)}var s=r.hiddenlabels||[];if(!o&&(!r.showlegend||!i.length))return n.selectAll(".legend").remove(),r._topdefs.select("#"+a).remove(),Jz.autoMargin(e,"legend");var l=Ys.ensureSingle(n,"g","legend",function(m){o||m.attr("pointer-events","all")}),u=Ys.ensureSingleById(r._topdefs,"clipPath",a,function(m){m.append("rect")}),f=Ys.ensureSingle(l,"rect","bg",function(m){m.attr("shape-rendering","crispEdges")});f.call(gE.stroke,t.bordercolor).call(gE.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");var c=Ys.ensureSingle(l,"g","scrollbox"),h=t.title;if(t._titleWidth=0,t._titleHeight=0,h.text){var v=Ys.ensureSingle(c,"text","legendtitletext");v.attr("text-anchor","start").call(kl.font,h.font).text(h.text),yE(v,c,e,t,W_)}else c.selectAll(".legendtitletext").remove();var p=Ys.ensureSingle(l,"rect","scrollbar",function(m){m.attr(Du.scrollBarEnterAttrs).call(gE.fill,Du.scrollBarColor)}),d=c.selectAll("g.groups").data(i);d.enter().append("g").attr("class","groups"),d.exit().remove();var g=d.selectAll("g.traces").data(Ys.identity);g.enter().append("g").attr("class","traces"),g.exit().remove(),g.style("opacity",function(m){var y=m[0].trace;return wx.traceIs(y,"pie-like")?s.indexOf(m[0].label)!==-1?.5:1:y.visible==="legendonly"?.5:1}).each(function(){Zh.select(this).call(iIe,e,t)}).call(aIe,e,t).each(function(){o||Zh.select(this).call(oIe,e)}),Ys.syncOrAsync([Jz.previousPromises,function(){return uIe(e,d,g,t)},function(){var m=r._size,y=t.borderwidth;if(!o){var _=fIe(e);if(_)return;var S=m.l+m.w*t.x-mE[tF(t)]*t._width,M=m.t+m.h*(1-t.y)-mE[rF(t)]*t._effHeight;if(r.margin.autoexpand){var w=S,A=M;S=Ys.constrain(S,0,r.width-t._width),M=Ys.constrain(M,0,r.height-t._effHeight),S!==w&&Ys.log("Constrain legend.x to make legend fit inside graph"),M!==A&&Ys.log("Constrain legend.y to make legend fit inside graph")}kl.setTranslate(l,S,M)}if(p.on(".drag",null),l.on("wheel",null),o||t._height<=t._maxHeight||e._context.staticPlot){var k=t._effHeight;o&&(k=t._height),f.attr({width:t._width-y,height:k-y,x:y/2,y:y/2}),kl.setTranslate(c,0,0),u.select("rect").attr({width:t._width-2*y,height:k-2*y,x:y,y}),kl.setClipUrl(c,a,e),kl.setRect(p,0,0,0,0),delete t._scrollY}else{var T=Math.max(Du.scrollBarMinHeight,t._effHeight*t._effHeight/t._height),L=t._effHeight-T-2*Du.scrollBarMargin,C=t._height-t._effHeight,I=L/C,R=Math.min(t._scrollY||0,C);f.attr({width:t._width-2*y+Du.scrollBarWidth+Du.scrollBarMargin,height:t._effHeight-y,x:y/2,y:y/2}),u.select("rect").attr({width:t._width-2*y+Du.scrollBarWidth+Du.scrollBarMargin,height:t._effHeight-2*y,x:y,y:y+R}),kl.setClipUrl(c,a,e),ee(R,T,I),l.on("wheel",function(){R=Ys.constrain(t._scrollY+Zh.event.deltaY/L*C,0,C),ee(R,T,I),R!==0&&R!==C&&Zh.event.preventDefault()});var B,N,D,O=function(ie,we,Te){var he=(Te-we)/I+ie;return Ys.constrain(he,0,C)},$=function(ie,we,Te){var he=(we-Te)/I+ie;return Ys.constrain(he,0,C)},Y=Zh.behavior.drag().on("dragstart",function(){var ie=Zh.event.sourceEvent;ie.type==="touchstart"?B=ie.changedTouches[0].clientY:B=ie.clientY,D=R}).on("drag",function(){var ie=Zh.event.sourceEvent;ie.buttons===2||ie.ctrlKey||(ie.type==="touchmove"?N=ie.changedTouches[0].clientY:N=ie.clientY,R=O(D,B,N),ee(R,T,I))});p.call(Y);var X=Zh.behavior.drag().on("dragstart",function(){var ie=Zh.event.sourceEvent;ie.type==="touchstart"&&(B=ie.changedTouches[0].clientY,D=R)}).on("drag",function(){var ie=Zh.event.sourceEvent;ie.type==="touchmove"&&(N=ie.changedTouches[0].clientY,R=$(D,B,N),ee(R,T,I))});c.call(X)}function ee(ie,we,Te){t._scrollY=e._fullLayout.legend._scrollY=ie,kl.setTranslate(c,0,-ie),kl.setRect(p,t._width,Du.scrollBarMargin+ie*Te,Du.scrollBarWidth,we),u.select("rect").attr("y",y+ie)}if(e._context.edits.legendPosition){var Q,Z,q,ae;l.classed("cursor-move",!0),Qz.init({element:l.node(),gd:e,prepFn:function(){var ie=kl.getTranslate(l);q=ie.x,ae=ie.y},moveFn:function(ie,we){var Te=q+ie,he=ae+we;kl.setTranslate(l,Te,he),Q=Qz.align(Te,0,m.l,m.l+m.w,t.xanchor),Z=Qz.align(he,0,m.t+m.h,m.t,t.yanchor)},doneFn:function(){Q!==void 0&&Z!==void 0&&wx.call("_guiRelayout",e,{"legend.x":Q,"legend.y":Z})},clickFn:function(ie,we){var Te=n.selectAll("g.traces").filter(function(){var he=this.getBoundingClientRect();return we.clientX>=he.left&&we.clientX<=he.right&&we.clientY>=he.top&&we.clientY<=he.bottom});Te.size()>0&&zK(e,l,Te,ie,we)}})}}],e)}}function zK(e,t,r,a,n){var o=r.data()[0][0].trace,i={event:n,node:r.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};o._group&&(i.group=o._group),wx.traceIs(o,"pie-like")&&(i.label=r.datum()[0].label);var s=CK.triggerHandler(e,"plotly_legendclick",i);if(s!==!1){if(a===1)t._clickTimeout=setTimeout(function(){!e._fullLayout||LK(r,e,a)},e._context.doubleClickDelay);else if(a===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var l=CK.triggerHandler(e,"plotly_legenddoubleclick",i);l!==!1&&LK(r,e,a)}}}function iIe(e,t,r){var a=e.data()[0][0],n=a.trace,o=wx.traceIs(n,"pie-like"),i=!r._inHover&&t._context.edits.legendText&&!o,s=r._maxNameLength,l,u;a.groupTitle?(l=a.groupTitle.text,u=a.groupTitle.font):(u=r.font,r.entries?l=a.text:(l=o?a.label:n.name,n._meta&&(l=Ys.templateString(l,n._meta))));var f=Ys.ensureSingle(e,"text","legendtext");f.attr("text-anchor","start").call(kl.font,u).text(i?FK(l,s):l);var c=r.itemwidth+Du.itemGap*2;Y_.positionText(f,c,0),i?f.call(Y_.makeEditable,{gd:t,text:l}).call(yE,e,t,r).on("edit",function(h){this.text(FK(h,s)).call(yE,e,t,r);var v=a.trace._fullInput||{},p={};if(wx.hasTransform(v,"groupby")){var d=wx.getTransformIndices(v,"groupby"),g=d[d.length-1],m=Ys.keyedContainer(v,"transforms["+g+"].styles","target","value.name");m.set(a.trace._group,h),p=m.constructUpdate()}else p.name=h;return wx.call("_guiRestyle",t,p,n.index)}):yE(f,e,t,r)}function FK(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var a=r-e.length;a>0;a--)e+=" ";return e}function oIe(e,t){var r=t._context.doubleClickDelay,a,n=1,o=Ys.ensureSingle(e,"rect","legendtoggle",function(i){t._context.staticPlot||i.style("cursor","pointer").attr("pointer-events","all"),i.call(gE.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(o.on("mousedown",function(){a=new Date().getTime(),a-t._legendMouseDownTime<r?n+=1:(n=1,t._legendMouseDownTime=a)}),o.on("mouseup",function(){if(!(t._dragged||t._editing)){var i=t._fullLayout.legend;new Date().getTime()-t._legendMouseDownTime>r&&(n=Math.max(n-1,1)),zK(t,i,e,n,Zh.event)}}))}function yE(e,t,r,a,n){a._inHover&&e.attr("data-notex",!0),Y_.convertToTspans(e,r,function(){sIe(t,r,a,n)})}function sIe(e,t,r,a){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var o=e.select("g[class*=math-group]"),i=o.node();r||(r=t._fullLayout.legend);var s=r.borderwidth,l;a===W_?l=r.title.font:n.groupTitle?l=n.groupTitle.font:l=r.font;var u=l.size*rIe,f,c;if(i){var h=kl.bBox(i);f=h.height,c=h.width,a===W_?kl.setTranslate(o,s,s+f*.75):kl.setTranslate(o,0,f*.25)}else{var v=e.select(a===W_?".legendtitletext":".legendtext"),p=Y_.lineCount(v),d=v.node();if(f=u*p,c=d?kl.bBox(d).width:0,a===W_)r.title.side==="left"&&(c+=Du.itemGap*2),Y_.positionText(v,s+Du.titlePad,s+u);else{var g=Du.itemGap*2+r.itemwidth;n.groupTitle&&(g=Du.itemGap,c-=r.itemwidth),Y_.positionText(v,g,-u*((p-1)/2-.3))}}a===W_?(r._titleWidth=c,r._titleHeight=f):(n.lineHeight=u,n.height=Math.max(f,16)+3,n.width=c)}function lIe(e){var t=0,r=0,a=e.title.side;return a&&(a.indexOf("left")!==-1&&(t=e._titleWidth),a.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function uIe(e,t,r,a){var n=e._fullLayout;a||(a=n.legend);var o=n._size,i=DK.isVertical(a),s=DK.isGrouped(a),l=a.borderwidth,u=2*l,f=Du.itemGap,c=a.itemwidth+f*2,h=2*(l+f),v=rF(a),p=a.y<0||a.y===0&&v==="top",d=a.y>1||a.y===1&&v==="bottom",g=a.tracegroupgap;a._maxHeight=Math.max(p||d?n.height/2:o.h,30);var m=0;a._width=0,a._height=0;var y=lIe(a);if(i)r.each(function(Q){var Z=Q[0].height;kl.setTranslate(this,l+y[0],l+y[1]+a._height+Z/2+f),a._height+=Z,a._width=Math.max(a._width,Q[0].width)}),m=c+a._width,a._width+=f+c+u,a._height+=h,s&&(t.each(function(Q,Z){kl.setTranslate(this,0,Z*a.tracegroupgap)}),a._height+=(a._lgroupsLength-1)*a.tracegroupgap);else{var _=tF(a),S=a.x<0||a.x===0&&_==="right",M=a.x>1||a.x===1&&_==="left",w=d||p,A=n.width/2;a._maxWidth=Math.max(S?w&&_==="left"?o.l+o.w:A:M?w&&_==="right"?o.r+o.w:A:o.w,2*c);var k=0,T=0;r.each(function(Q){var Z=Q[0].width+c;k=Math.max(k,Z),T+=Z}),m=null;var L=0;if(s){var C=0,I=0,R=0;t.each(function(){var Q=0,Z=0;Zh.select(this).selectAll("g.traces").each(function(ae){var ie=ae[0].width,we=ae[0].height;kl.setTranslate(this,y[0],y[1]+l+f+we/2+Z),Z+=we,Q=Math.max(Q,c+ie)}),C=Math.max(C,Z);var q=Q+f;I>0&&q+l+I>a._maxWidth&&(L=Math.max(L,I),I=0,R+=C+g,C=Z),kl.setTranslate(this,I,R),I+=q}),a._width=Math.max(L,I)+l,a._height=R+C+h}else{var B=r.size(),N=T+u+(B-1)*f<a._maxWidth,D=0,O=0,$=0,Y=0;r.each(function(Q){var Z=Q[0].height,q=c+Q[0].width,ae=(N?q:k)+f;ae+l+O-f>=a._maxWidth&&(L=Math.max(L,Y),O=0,$+=D,a._height+=D,D=0),kl.setTranslate(this,y[0]+l+O,y[1]+l+$+Z/2+f),Y=O+q+f,O+=ae,D=Math.max(D,Z)}),N?(a._width=O+u,a._height=D+h):(a._width=Math.max(L,Y)+u,a._height+=D+h)}}a._width=Math.ceil(Math.max(a._width+y[0],a._titleWidth+2*(l+Du.titlePad))),a._height=Math.ceil(Math.max(a._height+y[1],a._titleHeight+2*(l+Du.itemGap))),a._effHeight=Math.min(a._height,a._maxHeight);var X=e._context.edits,ee=X.legendText||X.legendPosition;r.each(function(Q){var Z=Zh.select(this).select(".legendtoggle"),q=Q[0].height,ae=ee?c:m||c+Q[0].width;i||(ae+=f/2),kl.setRect(Z,0,-q/2,ae,q)})}function fIe(e){var t=e._fullLayout,r=t.legend,a=tF(r),n=rF(r);return Jz.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*mE[a],r:r._width*PK[a],b:r._effHeight*PK[n],t:r._effHeight*mE[n]})}function tF(e){return Ys.isRightAnchor(e)?"right":Ys.isCenterAnchor(e)?"center":"left"}function rF(e){return Ys.isBottomAnchor(e)?"bottom":Ys.isMiddleAnchor(e)?"middle":"top"}var Tx=Ra.exports,$g=gn,OK=Hl.exports,Ws=bt.exports,aF=Ws.strTranslate,cIe=Ws.strRotate,hIe=sT,Pv=xo,vIe=VPe,Kp=xn.exports,Vl=Oa.exports,xE=kf.exports,vy=rn.exports,X_=Pa,jd=oh,Ax=d5,dIe=xK,pIe=RK,NK=Ax.YANGLE,nF=Math.PI*NK/180,gIe=1/Math.sin(nF),mIe=Math.cos(nF),yIe=Math.sin(nF),rs=Ax.HOVERARROWSIZE,_i=Ax.HOVERTEXTPAD,BK={box:!0,ohlc:!0,violin:!0,candlestick:!0},xIe={scatter:!0,scattergl:!0,splom:!0};dE.hover=function(t,r,a,n){t=Ws.getGraphDiv(t);var o=r.target;Ws.throttle(t._fullLayout._uid+Ax.HOVERID,Ax.HOVERMINTIME,function(){bIe(t,r,a,n,o)})};dE.loneHover=function(t,r){var a=!0;Array.isArray(t)||(a=!1,t=[t]);var n=r.gd,o=WK(n),i=XK(n),s=t.map(function(d){var g=d._x0||d.x0||d.x||0,m=d._x1||d.x1||d.x||0,y=d._y0||d.y0||d.y||0,_=d._y1||d.y1||d.y||0,S=d.eventData;if(S){var M=Math.min(g,m),w=Math.max(g,m),A=Math.min(y,_),k=Math.max(y,_),T=d.trace;if(X_.traceIs(T,"gl3d")){var L=n._fullLayout[T.scene]._scene.container,C=L.offsetLeft,I=L.offsetTop;M+=C,w+=C,A+=I,k+=I}S.bbox={x0:M+i,x1:w+i,y0:A+o,y1:k+o},r.inOut_bbox&&r.inOut_bbox.push(S.bbox)}else S=!1;return{color:d.color||Vl.defaultLine,x0:d.x0||d.x||0,x1:d.x1||d.x||0,y0:d.y0||d.y||0,y1:d.y1||d.y||0,xLabel:d.xLabel,yLabel:d.yLabel,zLabel:d.zLabel,text:d.text,name:d.name,idealAlign:d.idealAlign,borderColor:d.borderColor,fontFamily:d.fontFamily,fontSize:d.fontSize,fontColor:d.fontColor,nameLength:d.nameLength,textAlign:d.textAlign,trace:d.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:d.hovertemplate||!1,hovertemplateLabels:d.hovertemplateLabels||!1,eventData:S}}),l=!1,u=UK(s,{gd:n,hovermode:"closest",rotateLabels:l,bgColor:r.bgColor||Vl.background,container:Tx.select(r.container),outerContainer:r.outerContainer||r.container}),f=5,c=0,h=0;u.sort(function(d,g){return d.y0-g.y0}).each(function(d,g){var m=d.y0-d.by/2;m-f<c?d.offset=c-m+f:d.offset=0,c=m+d.by+d.offset,g===r.anchorIndex&&(h=d.offset)}).each(function(d){d.offset-=h});var v=n._fullLayout._invScaleX,p=n._fullLayout._invScaleY;return GK(u,l,v,p),a?u:u.node()};function bIe(e,t,r,a,n){r||(r="xy");var o=Array.isArray(r)?r:[r],i=e._fullLayout,s=i._plots||[],l=s[r],u=i._has("cartesian");if(l){var f=l.overlays.map(function(Dt){return Dt.id});o=o.concat(f)}for(var c=o.length,h=new Array(c),v=new Array(c),p=!1,d=0;d<c;d++){var g=o[d];if(s[g])p=!0,h[d]=s[g].xaxis,v[d]=s[g].yaxis;else if(i[g]&&i[g]._subplot){var m=i[g]._subplot;h[d]=m.xaxis,v[d]=m.yaxis}else{Ws.warn("Unrecognized subplot: "+g);return}}var y=t.hovermode||i.hovermode;if(y&&!p&&(y="closest"),["x","y","closest","x unified","y unified"].indexOf(y)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return xE.unhoverRaw(e,t);var _=i.hoverdistance;_===-1&&(_=1/0);var S=i.spikedistance;S===-1&&(S=1/0);var M=[],w=[],A,k,T,L,C,I,R,B,N,D,O,$,Y,X={hLinePoint:null,vLinePoint:null},ee=!1;if(Array.isArray(t))for(y="array",T=0;T<t.length;T++)C=e.calcdata[t[T].curveNumber||0],C&&(I=C[0].trace,C[0].trace.hoverinfo!=="skip"&&(w.push(C),I.orientation==="h"&&(ee=!0)));else{for(L=0;L<e.calcdata.length;L++)C=e.calcdata[L],I=C[0].trace,I.hoverinfo!=="skip"&&jd.isTraceInSubplots(I,o)&&(w.push(C),I.orientation==="h"&&(ee=!0));var Q=!n,Z,q;if(Q)"xpx"in t?Z=t.xpx:Z=h[0]._length/2,"ypx"in t?q=t.ypx:q=v[0]._length/2;else{if(hIe.triggerHandler(e,"plotly_beforehover",t)===!1)return;var ae=n.getBoundingClientRect();Z=t.clientX-ae.left,q=t.clientY-ae.top,i._calcInverseTransform(e);var ie=Ws.apply3DTransform(i._invTransform)(Z,q);if(Z=ie[0],q=ie[1],Z<0||Z>h[0]._length||q<0||q>v[0]._length)return xE.unhoverRaw(e,t)}if(t.pointerX=Z+h[0]._offset,t.pointerY=q+v[0]._offset,"xval"in t?A=jd.flat(o,t.xval):A=jd.p2c(h,Z),"yval"in t?k=jd.flat(o,t.yval):k=jd.p2c(v,q),!$g(A[0])||!$g(k[0]))return Ws.warn("Fx.hover failed",t,e),xE.unhoverRaw(e,t)}var we=1/0;function Te(Dt,Nt){for(L=0;L<w.length;L++)if(C=w[L],!(!C||!C[0]||!C[0].trace)&&(I=C[0].trace,!(I.visible!==!0||I._length===0)&&["carpet","contourcarpet"].indexOf(I._module.name)===-1)){if(I.type==="splom"?(B=0,R=o[B]):(R=jd.getSubplot(I),B=o.indexOf(R)),N=y,jd.isUnifiedHover(N)&&(N=N.charAt(0)),$={cd:C,trace:I,xa:h[B],ya:v[B],maxHoverDistance:_,maxSpikeDistance:S,index:!1,distance:Math.min(we,_),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Vl.defaultLine,name:I.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},i[R]&&($.subplot=i[R]._subplot),i._splomScenes&&i._splomScenes[I.uid]&&($.scene=i._splomScenes[I.uid]),Y=M.length,N==="array"){var hr=t[L];"pointNumber"in hr?($.index=hr.pointNumber,N="closest"):(N="","xval"in hr&&(D=hr.xval,N="x"),"yval"in hr&&(O=hr.yval,N=N?"closest":"y"))}else Dt!==void 0&&Nt!==void 0?(D=Dt,O=Nt):(D=A[B],O=k[B]);if(_!==0)if(I._module&&I._module.hoverPoints){var fr=I._module.hoverPoints($,D,O,N,{finiteRange:!0,hoverLayer:i._hoverlayer});if(fr)for(var vr,Ut=0;Ut<fr.length;Ut++)vr=fr[Ut],$g(vr.x0)&&$g(vr.y0)&&M.push(TIe(vr,y))}else Ws.log("Unrecognized trace type in hover:",I);if(y==="closest"&&M.length>Y&&(M.splice(0,Y),we=M[0].distance),u&&S!==0&&M.length===0){$.distance=S,$.index=!1;var Fr=I._module.hoverPoints($,D,O,"closest",{hoverLayer:i._hoverlayer});if(Fr&&(Fr=Fr.filter(function(jr){return jr.spikeDistance<=S})),Fr&&Fr.length){var sa,$r=Fr.filter(function(jr){return jr.xa.showspikes&&jr.xa.spikesnap!=="hovered data"});if($r.length){var Ca=$r[0];$g(Ca.x0)&&$g(Ca.y0)&&(sa=xe(Ca),(!X.vLinePoint||X.vLinePoint.spikeDistance>sa.spikeDistance)&&(X.vLinePoint=sa))}var on=Fr.filter(function(jr){return jr.ya.showspikes&&jr.ya.spikesnap!=="hovered data"});if(on.length){var Fa=on[0];$g(Fa.x0)&&$g(Fa.y0)&&(sa=xe(Fa),(!X.hLinePoint||X.hLinePoint.spikeDistance>sa.spikeDistance)&&(X.hLinePoint=sa))}}}}}Te();function he(Dt,Nt,hr){for(var fr=null,vr=1/0,Ut,Fr=0;Fr<Dt.length;Fr++)Ut=Dt[Fr].spikeDistance,hr&&Fr===0&&(Ut=-1/0),Ut<=vr&&Ut<=Nt&&(fr=Dt[Fr],vr=Ut);return fr}function xe(Dt){return Dt?{xa:Dt.xa,ya:Dt.ya,x:Dt.xSpike!==void 0?Dt.xSpike:(Dt.x0+Dt.x1)/2,y:Dt.ySpike!==void 0?Dt.ySpike:(Dt.y0+Dt.y1)/2,distance:Dt.distance,spikeDistance:Dt.spikeDistance,curveNumber:Dt.trace.index,color:Dt.color,pointNumber:Dt.index}:null}var Se={fullLayout:i,container:i._hoverlayer,event:t},ye=e._spikepoints,re={vLinePoint:X.vLinePoint,hLinePoint:X.hLinePoint};e._spikepoints=re;var se=function(){M.sort(function(Dt,Nt){return Dt.distance-Nt.distance}),M=SIe(M,y)};se();var de=y.charAt(0),Me=(de==="x"||de==="y")&&M[0]&&xIe[M[0].trace.type];if(u&&S!==0&&M.length!==0){var Ie=M.filter(function(Dt){return Dt.ya.showspikes}),Ee=he(Ie,S,Me);X.hLinePoint=xe(Ee);var qe=M.filter(function(Dt){return Dt.xa.showspikes}),be=he(qe,S,Me);X.vLinePoint=xe(be)}if(M.length===0){var oe=xE.unhoverRaw(e,t);return u&&(X.hLinePoint!==null||X.vLinePoint!==null)&&jK(ye)&&VK(e,X,Se),oe}if(u&&jK(ye)&&VK(e,X,Se),jd.isXYhover(N)&&M[0].length!==0&&M[0].trace.type!=="splom"){var ce=M[0];BK[ce.trace.type]?M=M.filter(function(Dt){return Dt.trace.index===ce.trace.index}):M=[ce];var ue=M.length,Re=YK("x",ce,i),Xe=YK("y",ce,i);Te(Re,Xe);var Ke=[],vt={},Ze=0,Qe=function(Dt){var Nt=BK[Dt.trace.type]?$K(Dt):Dt.trace.index;if(!vt[Nt])Ze++,vt[Nt]=Ze,Ke.push(Dt);else{var hr=vt[Nt]-1,fr=Ke[hr];hr>0&&Math.abs(Dt.distance)<Math.abs(fr.distance)&&(Ke[hr]=Dt)}},Je;for(Je=0;Je<ue;Je++)Qe(M[Je]);for(Je=M.length-1;Je>ue-1;Je--)Qe(M[Je]);M=Ke,se()}var je=e._hoverdata,$e=[],Ye=WK(e),yt=XK(e);for(T=0;T<M.length;T++){var _t=M[T],Pt=jd.makeEventData(_t,_t.trace,_t.cd);if(_t.hovertemplate!==!1){var Tt=!1;_t.cd[_t.index]&&_t.cd[_t.index].ht&&(Tt=_t.cd[_t.index].ht),_t.hovertemplate=Tt||_t.trace.hovertemplate||!1}if(_t.xa&&_t.ya){var Ot=_t.x0+_t.xa._offset,qt=_t.x1+_t.xa._offset,Xt=_t.y0+_t.ya._offset,Or=_t.y1+_t.ya._offset,Br=Math.min(Ot,qt),Qr=Math.max(Ot,qt),Sr=Math.min(Xt,Or),Zr=Math.max(Xt,Or);Pt.bbox={x0:Br+yt,x1:Qr+yt,y0:Sr+Ye,y1:Zr+Ye}}_t.eventData=[Pt],$e.push(Pt)}e._hoverdata=$e;var Oe=y==="y"&&(w.length>1||M.length>1)||y==="closest"&&ee&&M.length>1,it=Vl.combine(i.plot_bgcolor||Vl.background,i.paper_bgcolor),ft=UK(M,{gd:e,hovermode:y,rotateLabels:Oe,bgColor:it,container:i._hoverlayer,outerContainer:i._paper.node(),commonLabelOpts:i.hoverlabel,hoverdistance:i.hoverdistance});if(jd.isUnifiedHover(y)||(wIe(ft,Oe?"xa":"ya",i),GK(ft,Oe,i._invScaleX,i._invScaleY)),n&&n.tagName){var pt=X_.getComponentMethod("annotations","hasClickToShow")(e,$e);vIe(Tx.select(n),pt?"pointer":"")}!n||a||!AIe(e,t,je)||(je&&e.emit("plotly_unhover",{event:t,points:je}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:h,yaxes:v,xvals:A,yvals:k}))}function $K(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var _Ie=/<extra>([\s\S]*)<\/extra>/;function UK(e,t){var r=t.gd,a=r._fullLayout,n=t.hovermode,o=t.rotateLabels,i=t.bgColor,s=t.container,l=t.outerContainer,u=t.commonLabelOpts||{};if(e.length===0)return[[]];var f=t.fontFamily||Ax.HOVERFONT,c=t.fontSize||Ax.HOVERFONTSIZE,h=e[0],v=h.xa,p=h.ya,d=n.charAt(0),g=h[d+"Label"],m=Z_(r,l),y=m.top,_=m.width,S=m.height,M=g!==void 0&&h.distance<=t.hoverdistance&&(n==="x"||n==="y");if(M){var w=!0,A,k;for(A=0;A<e.length;A++)if(w&&e[A].zLabel===void 0&&(w=!1),k=e[A].hoverinfo||e[A].trace.hoverinfo,k){var T=Array.isArray(k)?k:k.split("+");if(T.indexOf("all")===-1&&T.indexOf(n)===-1){M=!1;break}}w&&(M=!1)}var L=s.selectAll("g.axistext").data(M?[0]:[]);if(L.enter().append("g").classed("axistext",!0),L.exit().remove(),L.each(function(){var be=Tx.select(this),oe=Ws.ensureSingle(be,"path","",function(Or){Or.style({"stroke-width":"1px"})}),ce=Ws.ensureSingle(be,"text","",function(Or){Or.attr("data-notex",1)}),ue=u.bgcolor||Vl.defaultLine,Re=u.bordercolor||Vl.contrast(ue),Xe=Vl.contrast(ue),Ke={family:u.font.family||f,size:u.font.size||c,color:u.font.color||Xe};oe.style({fill:ue,stroke:Re}),ce.text(g).call(Kp.font,Ke).call(Pv.positionText,0,0).call(Pv.convertToTspans,r),be.attr("transform","");var vt=Z_(r,ce.node()),Ze,Qe;if(n==="x"){var Je=v.side==="top"?"-":"";ce.attr("text-anchor","middle").call(Pv.positionText,0,v.side==="top"?y-vt.bottom-rs-_i:y-vt.top+rs+_i),Ze=v._offset+(h.x0+h.x1)/2,Qe=p._offset+(v.side==="top"?0:p._length);var je=vt.width/2+_i;Ze<je?(Ze=je,oe.attr("d","M-"+(je-rs)+",0L-"+(je-rs*2)+","+Je+rs+"H"+(_i+vt.width/2)+"v"+Je+(_i*2+vt.height)+"H-"+je+"V"+Je+rs+"Z")):Ze>a.width-je?(Ze=a.width-je,oe.attr("d","M"+(je-rs)+",0L"+je+","+Je+rs+"v"+Je+(_i*2+vt.height)+"H-"+je+"V"+Je+rs+"H"+(je-rs*2)+"Z")):oe.attr("d","M0,0L"+rs+","+Je+rs+"H"+(_i+vt.width/2)+"v"+Je+(_i*2+vt.height)+"H-"+(_i+vt.width/2)+"V"+Je+rs+"H-"+rs+"Z")}else{var $e,Ye,yt;p.side==="right"?($e="start",Ye=1,yt="",Ze=v._offset+v._length):($e="end",Ye=-1,yt="-",Ze=v._offset),Qe=p._offset+(h.y0+h.y1)/2,ce.attr("text-anchor",$e),oe.attr("d","M0,0L"+yt+rs+","+rs+"V"+(_i+vt.height/2)+"h"+yt+(_i*2+vt.width)+"V-"+(_i+vt.height/2)+"H"+yt+rs+"V-"+rs+"Z");var _t=vt.height/2,Pt=y-vt.top-_t,Tt="clip"+a._uid+"commonlabel"+p._id,Ot;if(Ze<vt.width+2*_i+rs){Ot="M-"+(rs+_i)+"-"+_t+"h-"+(vt.width-_i)+"V"+_t+"h"+(vt.width-_i)+"Z";var qt=vt.width-Ze+_i;Pv.positionText(ce,qt,Pt),$e==="end"&&ce.selectAll("tspan").each(function(){var Or=Tx.select(this),Br=Kp.tester.append("text").text(Or.text()).call(Kp.font,Ke),Qr=Z_(r,Br.node());Math.round(Qr.width)<Math.round(vt.width)&&Or.attr("x",qt-Qr.width),Br.remove()})}else Pv.positionText(ce,Ye*(_i+rs),Pt),Ot=null;var Xt=a._topclips.selectAll("#"+Tt).data(Ot?[0]:[]);Xt.enter().append("clipPath").attr("id",Tt).append("path"),Xt.exit().remove(),Xt.select("path").attr("d",Ot),Kp.setClipUrl(ce,Ot?Tt:null,r)}be.attr("transform",aF(Ze,Qe))}),jd.isUnifiedHover(n)){s.selectAll("g.hovertext").remove();var C=e.filter(function(be){return be.hoverinfo!=="none"});if(C.length===0)return;var I=a.hoverlabel,R=I.font,B={showlegend:!0,legend:{title:{text:g,font:R},font:R,bgcolor:I.bgcolor,bordercolor:I.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:a.legend?a.legend.traceorder:void 0,orientation:"v"}},N={font:R};dIe(B,N,r._fullData);var D=N.legend;D.entries=[];for(var O=0;O<C.length;O++){var $=C[O];if($.hoverinfo!=="none"){var Y=HK($,!0,n,a,g),X=Y[0],ee=Y[1];$.name=ee,ee!==""?$.text=ee+" : "+X:$.text=X;var Q=$.cd[$.index];Q&&(Q.mc&&($.mc=Q.mc),Q.mcc&&($.mc=Q.mcc),Q.mlc&&($.mlc=Q.mlc),Q.mlcc&&($.mlc=Q.mlcc),Q.mlw&&($.mlw=Q.mlw),Q.mrc&&($.mrc=Q.mrc),Q.dir&&($.dir=Q.dir)),$._distinct=!0,D.entries.push([$])}}D.entries.sort(function(be,oe){return be[0].trace.index-oe[0].trace.index}),D.layer=s,D._inHover=!0,D._groupTitleFont=I.grouptitlefont,pIe(r,D);var Z=s.select("g.legend"),q=Z_(r,Z.node()),ae=q.width+2*_i,ie=q.height+2*_i,we=C[0],Te=(we.x0+we.x1)/2,he=(we.y0+we.y1)/2,xe=!(X_.traceIs(we.trace,"bar-like")||X_.traceIs(we.trace,"box-violin")),Se,ye;d==="y"?xe?(ye=he-_i,Se=he+_i):(ye=Math.min.apply(null,C.map(function(be){return Math.min(be.y0,be.y1)})),Se=Math.max.apply(null,C.map(function(be){return Math.max(be.y0,be.y1)}))):ye=Se=Ws.mean(C.map(function(be){return(be.y0+be.y1)/2}))-ie/2;var re,se;d==="x"?xe?(re=Te+_i,se=Te-_i):(re=Math.max.apply(null,C.map(function(be){return Math.max(be.x0,be.x1)})),se=Math.min.apply(null,C.map(function(be){return Math.min(be.x0,be.x1)}))):re=se=Ws.mean(C.map(function(be){return(be.x0+be.x1)/2}))-ae/2;var de=v._offset,Me=p._offset;Se+=Me,re+=de,se+=de-ae,ye+=Me-ie;var Ie,Ee;return re+ae<_&&re>=0?Ie=re:se+ae<_&&se>=0?Ie=se:de+ae<_?Ie=de:re-Te<Te-se+ae?Ie=_-ae:Ie=0,Ie+=_i,Se+ie<S&&Se>=0?Ee=Se:ye+ie<S&&ye>=0?Ee=ye:Me+ie<S?Ee=Me:Se-he<he-ye+ie?Ee=S-ie:Ee=0,Ee+=_i,Z.attr("transform",aF(Ie-1,Ee-1)),Z}var qe=s.selectAll("g.hovertext").data(e,function(be){return $K(be)});return qe.enter().append("g").classed("hovertext",!0).each(function(){var be=Tx.select(this);be.append("rect").call(Vl.fill,Vl.addOpacity(i,.8)),be.append("text").classed("name",!0),be.append("path").style("stroke-width","1px"),be.append("text").classed("nums",!0).call(Kp.font,f,c)}),qe.exit().remove(),qe.each(function(be){var oe=Tx.select(this).attr("transform",""),ce=be.color;Array.isArray(ce)&&(ce=ce[be.eventData[0].pointNumber]);var ue=be.bgcolor||ce,Re=Vl.combine(Vl.opacity(ue)?ue:Vl.defaultLine,i),Xe=Vl.combine(Vl.opacity(ce)?ce:Vl.defaultLine,i),Ke=be.borderColor||Vl.contrast(Re),vt=HK(be,M,n,a,g,oe),Ze=vt[0],Qe=vt[1],Je=oe.select("text.nums").call(Kp.font,be.fontFamily||f,be.fontSize||c,be.fontColor||Ke).text(Ze).attr("data-notex",1).call(Pv.positionText,0,0).call(Pv.convertToTspans,r),je=oe.select("text.name"),$e=0,Ye=0;if(Qe&&Qe!==Ze){je.call(Kp.font,be.fontFamily||f,be.fontSize||c,Xe).text(Qe).attr("data-notex",1).call(Pv.positionText,0,0).call(Pv.convertToTspans,r);var yt=Z_(r,je.node());$e=yt.width+2*_i,Ye=yt.height+2*_i}else je.remove(),oe.select("rect").remove();oe.select("path").style({fill:Re,stroke:Ke});var _t=be.xa._offset+(be.x0+be.x1)/2,Pt=be.ya._offset+(be.y0+be.y1)/2,Tt=Math.abs(be.x1-be.x0),Ot=Math.abs(be.y1-be.y0),qt=Z_(r,Je.node()),Xt=qt.width/a._invScaleX,Or=qt.height/a._invScaleY;be.ty0=(y-qt.top)/a._invScaleY,be.bx=Xt+2*_i,be.by=Math.max(Or+2*_i,Ye),be.anchor="start",be.txwidth=Xt,be.tx2width=$e,be.offset=0;var Br=(Xt+rs+_i+$e)*a._invScaleX,Qr,Sr;if(o)be.pos=_t,Qr=Pt+Ot/2+Br<=S,Sr=Pt-Ot/2-Br>=0,(be.idealAlign==="top"||!Qr)&&Sr?(Pt-=Ot/2,be.anchor="end"):Qr?(Pt+=Ot/2,be.anchor="start"):be.anchor="middle";else if(be.pos=Pt,Qr=_t+Tt/2+Br<=_,Sr=_t-Tt/2-Br>=0,(be.idealAlign==="left"||!Qr)&&Sr)_t-=Tt/2,be.anchor="end";else if(Qr)_t+=Tt/2,be.anchor="start";else{be.anchor="middle";var Zr=Br/2,Oe=_t+Zr-_,it=_t-Zr;Oe>0&&(_t-=Oe),it<0&&(_t+=-it)}Je.attr("text-anchor",be.anchor),$e&&je.attr("text-anchor",be.anchor),oe.attr("transform",aF(_t,Pt)+(o?cIe(NK):""))}),qe}function HK(e,t,r,a,n,o){var i="",s="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=Ws.templateString(e.name,e.trace._meta)),i=qK(e.name,e.nameLength));var l=r.charAt(0),u=l==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(s+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(s+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===n?s=e[u+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(s=e.yLabel):e.yLabel===void 0?s=e.xLabel:s="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),e.extraText!==void 0&&(s+=(s?"<br>":"")+e.extraText),o&&s===""&&!e.hovertemplate&&(i===""&&o.remove(),s=i);var f=e.hovertemplate||!1;if(f){var c=e.hovertemplateLabels||e;e[l+"Label"]!==n&&(c[l+"other"]=c[l+"Val"],c[l+"otherLabel"]=c[l+"Label"]),s=Ws.hovertemplateString(f,c,a._d3locale,e.eventData[0]||{},e.trace._meta),s=s.replace(_Ie,function(h,v){return i=qK(v,e.nameLength),""})}return[s,i]}function wIe(e,t,r){var a=0,n=1,o=e.size(),i=new Array(o),s=0;e.each(function(A){var k=A[t],T=k._id.charAt(0)==="x",L=k.range;s===0&&L&&L[0]>L[1]!==T&&(n=-1),i[s++]=[{datum:A,traceIndex:A.trace.index,dp:0,pos:A.pos,posref:A.posref,size:A.by*(T?gIe:1)/2,pmin:0,pmax:T?r.width:r.height}]}),i.sort(function(A,k){return A[0].posref-k[0].posref||n*(k[0].traceIndex-A[0].traceIndex)});var l,u,f,c,h,v,p;function d(A){var k=A[0],T=A[A.length-1];if(u=k.pmin-k.pos-k.dp+k.size,f=T.pos+T.dp+T.size-k.pmax,u>.01){for(h=A.length-1;h>=0;h--)A[h].dp+=u;l=!1}if(!(f<.01)){if(u<-.01){for(h=A.length-1;h>=0;h--)A[h].dp-=f;l=!1}if(!!l){var L=0;for(c=0;c<A.length;c++)v=A[c],v.pos+v.dp+v.size>k.pmax&&L++;for(c=A.length-1;c>=0&&!(L<=0);c--)v=A[c],v.pos>k.pmax-1&&(v.del=!0,L--);for(c=0;c<A.length&&!(L<=0);c++)if(v=A[c],v.pos<k.pmin+1)for(v.del=!0,L--,f=v.size*2,h=A.length-1;h>=0;h--)A[h].dp-=f;for(c=A.length-1;c>=0&&!(L<=0);c--)v=A[c],v.pos+v.dp+v.size>k.pmax&&(v.del=!0,L--)}}}for(;!l&&a<=o;){for(a++,l=!0,c=0;c<i.length-1;){var g=i[c],m=i[c+1],y=g[g.length-1],_=m[0];if(u=y.pos+y.dp+y.size-_.pos-_.dp+_.size,u>.01&&y.pmin===_.pmin&&y.pmax===_.pmax){for(h=m.length-1;h>=0;h--)m[h].dp+=u;for(g.push.apply(g,m),i.splice(c+1,1),p=0,h=g.length-1;h>=0;h--)p+=g[h].dp;for(f=p/g.length,h=g.length-1;h>=0;h--)g[h].dp-=f;l=!1}else c++}i.forEach(d)}for(c=i.length-1;c>=0;c--){var S=i[c];for(h=S.length-1;h>=0;h--){var M=S[h],w=M.datum;w.offset=M.dp,w.del=M.del}}}function GK(e,t,r,a){var n=function(i){return i*r},o=function(i){return i*a};e.each(function(i){var s=Tx.select(this);if(i.del)return s.remove();var l=s.select("text.nums"),u=i.anchor,f=u==="end"?-1:1,c={start:1,end:-1,middle:0}[u],h=c*(rs+_i),v=h+c*(i.txwidth+_i),p=0,d=i.offset,g=u==="middle";g&&(h-=i.tx2width/2,v+=i.txwidth/2+_i),t&&(d*=-yIe,p=i.offset*mIe),s.select("path").attr("d",g?"M-"+n(i.bx/2+i.tx2width/2)+","+o(d-i.by/2)+"h"+n(i.bx)+"v"+o(i.by)+"h-"+n(i.bx)+"Z":"M0,0L"+n(f*rs+p)+","+o(rs+d)+"v"+o(i.by/2-rs)+"h"+n(f*i.bx)+"v-"+o(i.by)+"H"+n(f*rs+p)+"V"+o(d-rs)+"Z");var m=p+h,y=d+i.ty0-i.by/2+_i,_=i.textAlign||"auto";_!=="auto"&&(_==="left"&&u!=="start"?(l.attr("text-anchor","start"),m=g?-i.bx/2-i.tx2width/2+_i:-i.bx-_i):_==="right"&&u!=="end"&&(l.attr("text-anchor","end"),m=g?i.bx/2-i.tx2width/2-_i:i.bx+_i)),l.call(Pv.positionText,n(m),o(y)),i.tx2width&&(s.select("text.name").call(Pv.positionText,n(v+c*_i+p),o(d+i.ty0-i.by/2+_i)),s.select("rect").call(Kp.setRect,n(v+(c-1)*i.tx2width/2+p),o(d-i.by/2-1),n(i.tx2width),o(i.by+2)))})}function TIe(e,t){var r=e.index,a=e.trace||{},n=e.cd[0],o=e.cd[r]||{};function i(h){return h||$g(h)&&h===0}var s=Array.isArray(r)?function(h,v){var p=Ws.castOption(n,r,h);return i(p)?p:Ws.extractOption({},a,"",v)}:function(h,v){return Ws.extractOption(o,a,h,v)};function l(h,v,p){var d=s(v,p);i(d)&&(e[h]=d)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&a.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=Ws.constrain(e.x0,0,e.xa._length),e.x1=Ws.constrain(e.x1,0,e.xa._length),e.y0=Ws.constrain(e.y0,0,e.ya._length),e.y1=Ws.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:vy.hoverLabelText(e.xa,e.xLabelVal,a.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:vy.hoverLabelText(e.ya,e.yLabelVal,a.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=vy.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+u+" / -"+vy.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+u,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var f=vy.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+f+" / -"+vy.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+f,t==="y"&&(e.distance+=1)}var c=e.hoverinfo||e.trace.hoverinfo;return c&&c!=="all"&&(c=Array.isArray(c)?c:c.split("+"),c.indexOf("x")===-1&&(e.xLabel=void 0),c.indexOf("y")===-1&&(e.yLabel=void 0),c.indexOf("z")===-1&&(e.zLabel=void 0),c.indexOf("text")===-1&&(e.text=void 0),c.indexOf("name")===-1&&(e.name=void 0)),e}function VK(e,t,r){var a=r.container,n=r.fullLayout,o=n._size,i=r.event,s=!!t.hLinePoint,l=!!t.vLinePoint,u,f;if(a.selectAll(".spikeline").remove(),!!(l||s)){var c=Vl.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var h=t.hLinePoint,v,p;u=h&&h.xa,f=h&&h.ya;var d=f.spikesnap;d==="cursor"?(v=i.pointerX,p=i.pointerY):(v=u._offset+h.x,p=f._offset+h.y);var g=OK.readability(h.color,c)<1.5?Vl.contrast(c):h.color,m=f.spikemode,y=f.spikethickness,_=f.spikecolor||g,S=vy.getPxPosition(e,f),M,w;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1&&(M=S,w=v),m.indexOf("across")!==-1){var A=f._counterDomainMin,k=f._counterDomainMax;f.anchor==="free"&&(A=Math.min(A,f.position),k=Math.max(k,f.position)),M=o.l+A*o.w,w=o.l+k*o.w}a.insert("line",":first-child").attr({x1:M,x2:w,y1:p,y2:p,"stroke-width":y,stroke:_,"stroke-dasharray":Kp.dashStyle(f.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:M,x2:w,y1:p,y2:p,"stroke-width":y+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}m.indexOf("marker")!==-1&&a.insert("circle",":first-child").attr({cx:S+(f.side!=="right"?y:-y),cy:p,r:y,fill:_}).classed("spikeline",!0)}if(l){var T=t.vLinePoint,L,C;u=T&&T.xa,f=T&&T.ya;var I=u.spikesnap;I==="cursor"?(L=i.pointerX,C=i.pointerY):(L=u._offset+T.x,C=f._offset+T.y);var R=OK.readability(T.color,c)<1.5?Vl.contrast(c):T.color,B=u.spikemode,N=u.spikethickness,D=u.spikecolor||R,O=vy.getPxPosition(e,u),$,Y;if(B.indexOf("toaxis")!==-1||B.indexOf("across")!==-1){if(B.indexOf("toaxis")!==-1&&($=O,Y=C),B.indexOf("across")!==-1){var X=u._counterDomainMin,ee=u._counterDomainMax;u.anchor==="free"&&(X=Math.min(X,u.position),ee=Math.max(ee,u.position)),$=o.t+(1-ee)*o.h,Y=o.t+(1-X)*o.h}a.insert("line",":first-child").attr({x1:L,x2:L,y1:$,y2:Y,"stroke-width":N,stroke:D,"stroke-dasharray":Kp.dashStyle(u.spikedash,N)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:L,x2:L,y1:$,y2:Y,"stroke-width":N+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}B.indexOf("marker")!==-1&&a.insert("circle",":first-child").attr({cx:L,cy:O-(u.side!=="top"?N:-N),r:N,fill:D}).classed("spikeline",!0)}}}function AIe(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var a=r.length-1;a>=0;a--){var n=r[a],o=e._hoverdata[a];if(n.curveNumber!==o.curveNumber||String(n.pointNumber)!==String(o.pointNumber)||String(n.pointNumbers)!==String(o.pointNumbers))return!0}return!1}function jK(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function qK(e,t){return Pv.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function SIe(e,t){for(var r=t.charAt(0),a=[],n=[],o=[],i=0;i<e.length;i++){var s=e[i];X_.traceIs(s.trace,"bar-like")||X_.traceIs(s.trace,"box-violin")?o.push(s):s.trace[r+"period"]?n.push(s):a.push(s)}return a.concat(n).concat(o)}function YK(e,t,r){var a=t[e+"a"],n=t[e+"Val"],o=t.cd[0];if(a.type==="category")n=a._categoriesMap[n];else if(a.type==="date"){var i=t.trace[e+"periodalignment"];if(i){var s=t.cd[t.index],l=s[e+"Start"];l===void 0&&(l=s[e]);var u=s[e+"End"];u===void 0&&(u=s[e]);var f=u-l;i==="end"?n+=f:i==="middle"&&(n+=f/2)}n=a.d2c(n)}return o&&o.t&&o.t.posLetter===a._id&&(r.boxmode==="group"||r.violinmode==="group")&&(n+=o.t.dPos),n}function WK(e){return e.offsetTop+e.clientTop}function XK(e){return e.offsetLeft+e.clientLeft}function Z_(e,t){var r=e._fullLayout,a=t.getBoundingClientRect(),n=a.x,o=a.y,i=n+a.width,s=o+a.height,l=Ws.apply3DTransform(r._invTransform)(n,o),u=Ws.apply3DTransform(r._invTransform)(i,s),f=l[0],c=l[1],h=u[0],v=u[1];return{x:f,y:c,width:h-f,height:v-c,top:Math.min(c,v),left:Math.min(f,h),right:Math.max(f,h),bottom:Math.max(c,v)}}var MIe=bt.exports,kIe=Oa.exports,EIe=oh.isUnifiedHover,bE=function(t,r,a,n){n=n||{};var o=r.legend;function i(s){n.font[s]||(n.font[s]=o?r.legend.font[s]:r.font[s])}r&&EIe(r.hovermode)&&(n.font||(n.font={}),i("size"),i("family"),i("color"),o?(n.bgcolor||(n.bgcolor=kIe.combine(r.legend.bgcolor,r.paper_bgcolor)),n.bordercolor||(n.bordercolor=r.legend.bordercolor)):n.bgcolor||(n.bgcolor=r.paper_bgcolor)),a("hoverlabel.bgcolor",n.bgcolor),a("hoverlabel.bordercolor",n.bordercolor),a("hoverlabel.namelength",n.namelength),MIe.coerceFont(a,"hoverlabel.font",n.font),a("hoverlabel.align",n.align)},CIe=bt.exports,LIe=bE,PIe=ay,IIe=function(t,r){function a(n,o){return CIe.coerce(t,r,PIe,n,o)}LIe(t,r,a)},ZK=bt.exports,DIe=rT,RIe=bE,zIe=function(t,r,a,n){function o(s,l){return ZK.coerce(t,r,DIe,s,l)}var i=ZK.extendFlat({},n.hoverlabel);r.hovertemplate&&(i.namelength=-1),RIe(t,r,o,i)},FIe=bt.exports,OIe=ay,KK=function(t,r){function a(n,o){return r[n]!==void 0?r[n]:FIe.coerce(t,r,OIe,n,o)}return a("clickmode"),a("hovermode")},JK=bt.exports,NIe=ay,BIe=KK,$Ie=bE,UIe=function(t,r){function a(u,f){return JK.coerce(t,r,NIe,u,f)}var n=BIe(t,r);n&&(a("hoverdistance"),a("spikedistance"));var o=a("dragmode");o==="select"&&a("selectdirection");var i=r._has("mapbox"),s=r._has("geo"),l=r._basePlotModules.length;r.dragmode==="zoom"&&((i||s)&&l===1||i&&s&&l===2)&&(r.dragmode="pan"),$Ie(t,r,a),JK.coerceFont(a,"hoverlabel.grouptitlefont",r.hoverlabel.font)},iF=bt.exports,QK=Pa,HIe=function(t){var r=t.calcdata,a=t._fullLayout;function n(u){return function(f){return iF.coerceHoverinfo({hoverinfo:f},{_module:u._module},a)}}for(var o=0;o<r.length;o++){var i=r[o],s=i[0].trace;if(!QK.traceIs(s,"pie-like")){var l=QK.traceIs(s,"2dMap")?GIe:iF.fillArray;l(s.hoverinfo,i,"hi",n(s)),s.hovertemplate&&l(s.hovertemplate,i,"ht"),!!s.hoverlabel&&(l(s.hoverlabel.bgcolor,i,"hbg"),l(s.hoverlabel.bordercolor,i,"hbc"),l(s.hoverlabel.font.size,i,"hts"),l(s.hoverlabel.font.color,i,"htc"),l(s.hoverlabel.font.family,i,"htf"),l(s.hoverlabel.namelength,i,"hnl"),l(s.hoverlabel.align,i,"hta"))}}};function GIe(e,t,r,a){a=a||iF.identity,Array.isArray(e)&&(t[0][r]=a(e))}var VIe=Pa,jIe=dE.hover,qIe=function(t,r,a){var n=VIe.getComponentMethod("annotations","onClick")(t,t._hoverdata);a!==void 0&&jIe(t,r,a,!0);function o(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(n&&n.then?n.then(o):o(),r.stopImmediatePropagation&&r.stopImmediatePropagation())},YIe=Ra.exports,_E=bt.exports,WIe=kf.exports,kT=oh,eJ=ay,tJ=dE,Rs={moduleType:"component",name:"fx",constants:d5,schema:{layout:eJ},attributes:rT,layoutAttributes:eJ,supplyLayoutGlobalDefaults:IIe,supplyDefaults:zIe,supplyLayoutDefaults:UIe,calc:HIe,getDistanceFunction:kT.getDistanceFunction,getClosest:kT.getClosest,inbox:kT.inbox,quadrature:kT.quadrature,appendArrayPointValue:kT.appendArrayPointValue,castHoverOption:ZIe,castHoverinfo:KIe,hover:tJ.hover,unhover:WIe.unhover,loneHover:tJ.loneHover,loneUnhover:XIe,click:qIe};function XIe(e){var t=_E.isD3Selection(e)?e:YIe.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function ZIe(e,t,r){return _E.castOption(e,t,"hoverlabel."+r)}function KIe(e,t,r){function a(n){return _E.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}return _E.castOption(e,r,"hoverinfo",a)}var Jp={};(function(e){e.selectMode=function(t){return t==="lasso"||t==="select"},e.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},e.openMode=function(t){return t==="drawline"||t==="drawopenpath"},e.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},e.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},e.selectingOrDrawing=function(t){return e.freeMode(t)||e.rectMode(t)}})(Jp);var wE=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0,depth:!0})})},ET={},oF={exports:{}},sF={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}},CT={},lF=QIe,uF={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},JIe=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function QIe(e){var t=[];return e.replace(JIe,function(r,a,n){var o=a.toLowerCase();for(n=tDe(n),o=="m"&&n.length>2&&(t.push([a].concat(n.splice(0,2))),o="l",a=a=="m"?"l":"L");;){if(n.length==uF[o])return n.unshift(a),t.push(n);if(n.length<uF[o])throw new Error("malformed path data");t.push([a].concat(n.splice(0,uF[o])))}}),t}var eDe=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function tDe(e){var t=e.match(eDe);return t?t.map(Number):[]}var TE=32,fF={CIRCLE_SIDES:TE,i000:0,i090:TE/4,i180:TE/2,i270:TE/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},rDe=bt.exports.strTranslate;function rJ(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function aDe(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function nDe(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return rJ(e,r[t])}}function iDe(e){return rDe(e.xaxis._offset,e.yaxis._offset)}var cF={p2r:rJ,r2p:aDe,axValue:nDe,getTransform:iDe};(function(e){var t=lF,r=fF,a=r.CIRCLE_SIDES,n=r.SQRT2,o=cF,i=o.p2r,s=o.r2p,l=[0,3,4,5,6,1,2],u=[0,3,4,1,2];e.writePaths=function(h){var v=h.length;if(!v)return"M0,0Z";for(var p="",d=0;d<v;d++)for(var g=h[d].length,m=0;m<g;m++){var y=h[d][m][0];if(y==="Z")p+="Z";else for(var _=h[d][m].length,S=0;S<_;S++){var M=S;y==="Q"||y==="S"?M=u[S]:y==="C"&&(M=l[S]),p+=h[d][m][M],S>0&&S<_-1&&(p+=",")}}return p},e.readPaths=function(h,v,p,d){var g=t(h),m=[],y=-1,_=function(){y++,m[y]=[]},S,M=0,w=0,A,k,T=function(){A=M,k=w};T();for(var L=0;L<g.length;L++){var C=[],I,R,B,N,D=g[L][0],O=D;switch(D){case"M":_(),M=+g[L][1],w=+g[L][2],C.push([O,M,w]),T();break;case"Q":case"S":I=+g[L][1],B=+g[L][2],M=+g[L][3],w=+g[L][4],C.push([O,M,w,I,B]);break;case"C":I=+g[L][1],B=+g[L][2],R=+g[L][3],N=+g[L][4],M=+g[L][5],w=+g[L][6],C.push([O,M,w,I,B,R,N]);break;case"T":case"L":M=+g[L][1],w=+g[L][2],C.push([O,M,w]);break;case"H":O="L",M=+g[L][1],C.push([O,M,w]);break;case"V":O="L",w=+g[L][1],C.push([O,M,w]);break;case"A":O="L";var $=+g[L][1],Y=+g[L][2];+g[L][4]||($=-$,Y=-Y);var X=M-$,ee=w;for(S=1;S<=a/2;S++){var Q=2*Math.PI*S/a;C.push([O,X+$*Math.cos(Q),ee+Y*Math.sin(Q)])}break;case"Z":(M!==A||w!==k)&&(M=A,w=k,C.push([O,M,w]));break}for(var Z=(p||{}).domain,q=v._fullLayout._size,ae=p&&p.xsizemode==="pixel",ie=p&&p.ysizemode==="pixel",we=d===!1,Te=0;Te<C.length;Te++){for(S=0;S+2<7;S+=2){var he=C[Te][S+1],xe=C[Te][S+2];he===void 0||xe===void 0||(M=he,w=xe,p&&(p.xaxis&&p.xaxis.p2r?(we&&(he-=p.xaxis._offset),ae?he=s(p.xaxis,p.xanchor)+he:he=i(p.xaxis,he)):(we&&(he-=q.l),Z?he=Z.x[0]+he/q.w:he=he/q.w),p.yaxis&&p.yaxis.p2r?(we&&(xe-=p.yaxis._offset),ie?xe=s(p.yaxis,p.yanchor)-xe:xe=i(p.yaxis,xe)):(we&&(xe-=q.t),Z?xe=Z.y[1]-xe/q.h:xe=1-xe/q.h)),C[Te][S+1]=he,C[Te][S+2]=xe)}m[y].push(C[Te].slice())}}return m};function f(h,v){return Math.abs(h-v)<=1e-6}function c(h,v){var p=v[1]-h[1],d=v[2]-h[2];return Math.sqrt(p*p+d*d)}e.pointsShapeRectangle=function(h){var v=h.length;if(v!==5)return!1;for(var p=1;p<3;p++){var d=h[0][p]-h[1][p],g=h[3][p]-h[2][p];if(!f(d,g))return!1;var m=h[0][p]-h[3][p],y=h[1][p]-h[2][p];if(!f(m,y))return!1}return!f(h[0][1],h[1][1])&&!f(h[0][1],h[3][1])?!1:!!(c(h[0],h[1])*c(h[0],h[3]))},e.pointsShapeEllipse=function(h){var v=h.length;if(v!==a+1)return!1;v=a;for(var p=0;p<v;p++){var d=(v*2-p)%v,g=(v/2+d)%v,m=(v/2+p)%v;if(!f(c(h[p],h[m]),c(h[d],h[g])))return!1}return!0},e.handleEllipse=function(h,v,p){if(!h)return[v,p];var d=e.ellipseOver({x0:v[0],y0:v[1],x1:p[0],y1:p[1]}),g=(d.x1+d.x0)/2,m=(d.y1+d.y0)/2,y=(d.x1-d.x0)/2,_=(d.y1-d.y0)/2;y||(y=_=_/n),_||(_=y=y/n);for(var S=[],M=0;M<a;M++){var w=M*2*Math.PI/a;S.push([g+y*Math.cos(w),m+_*Math.sin(w)])}return S},e.ellipseOver=function(h){var v=h.x0,p=h.y0,d=h.x1,g=h.y1,m=d-v,y=g-p;v-=m,p-=y;var _=(v+d)/2,S=(p+g)/2,M=n;return m*=M,y*=M,{x0:_-m,y0:S-y,x1:_+m,y1:S+y}}})(CT);var aJ=Jp,oDe=aJ.drawMode,sDe=aJ.openMode,K_=fF,nJ=K_.i000,iJ=K_.i090,oJ=K_.i180,sJ=K_.i270,lDe=K_.cos45,uDe=K_.sin45,lJ=cF,AE=lJ.p2r,dy=lJ.r2p,fDe=uT,cDe=fDe.clearSelect,hF=CT,hDe=hF.readPaths,vDe=hF.writePaths,dDe=hF.ellipseOver,uJ=function(t,r){if(!!t.length){var a=t[0][0];if(!!a){var n=a.getAttribute("d"),o=r.gd,i=o._fullLayout.newshape,s=r.plotinfo,l=s.xaxis,u=s.yaxis,f=!!s.domain||!s.xaxis,c=!!s.domain||!s.yaxis,h=r.isActiveShape,v=r.dragmode,p=(o.layout||{}).shapes||[];if(!oDe(v)&&h!==void 0){var d=o._fullLayout._activeShapeIndex;if(d<p.length)switch(o._fullLayout.shapes[d].type){case"rect":v="drawrect";break;case"circle":v="drawcircle";break;case"line":v="drawline";break;case"path":var g=p[d].path||"";g[g.length-1]==="Z"?v="drawclosedpath":v="drawopenpath";break}}var m=sDe(v),y=hDe(n,o,s,h),_={editable:!0,xref:f?"paper":l._id,yref:c?"paper":u._id,layer:i.layer,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};m||(_.fillcolor=i.fillcolor,_.fillrule=i.fillrule);var S;if(y.length===1&&(S=y[0]),S&&v==="drawrect")_.type="rect",_.x0=S[0][1],_.y0=S[0][2],_.x1=S[2][1],_.y1=S[2][2];else if(S&&v==="drawline")_.type="line",_.x0=S[0][1],_.y0=S[0][2],_.x1=S[1][1],_.y1=S[1][2];else if(S&&v==="drawcircle"){_.type="circle";var M=S[nJ][1],w=S[iJ][1],A=S[oJ][1],k=S[sJ][1],T=S[nJ][2],L=S[iJ][2],C=S[oJ][2],I=S[sJ][2],R=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log"),B=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");R&&(M=dy(s.xaxis,M),w=dy(s.xaxis,w),A=dy(s.xaxis,A),k=dy(s.xaxis,k)),B&&(T=dy(s.yaxis,T),L=dy(s.yaxis,L),C=dy(s.yaxis,C),I=dy(s.yaxis,I));var N=(w+k)/2,D=(T+C)/2,O=(k-w+A-M)/2,$=(I-L+C-T)/2,Y=dDe({x0:N,y0:D,x1:N+O*lDe,y1:D+$*uDe});R&&(Y.x0=AE(s.xaxis,Y.x0),Y.x1=AE(s.xaxis,Y.x1)),B&&(Y.y0=AE(s.yaxis,Y.y0),Y.y1=AE(s.yaxis,Y.y1)),_.x0=Y.x0,_.y0=Y.y0,_.x1=Y.x1,_.y1=Y.y1}else _.type="path",l&&u&&pDe(y,l,u),_.path=vDe(y),S=null;cDe(o);for(var X=r.editHelpers,ee=(X||{}).modifyItem,Q=[],Z=0;Z<p.length;Z++){var q=o._fullLayout.shapes[Z];if(Q[Z]=q._input,h!==void 0&&Z===o._fullLayout._activeShapeIndex){var ae=_;switch(q.type){case"line":case"rect":case"circle":ee("x0",ae.x0),ee("x1",ae.x1),ee("y0",ae.y0),ee("y1",ae.y1);break;case"path":ee("path",ae.path);break}}}return h===void 0?(Q.push(_),Q):X?X.getUpdateObj():{}}}};function pDe(e,t,r){var a=t.type==="date",n=r.type==="date";if(!a&&!n)return e;for(var o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++)for(var s=0;s+2<e[o][i].length;s+=2)a&&(e[o][i][s+1]=e[o][i][s+1].replace(" ","_")),n&&(e[o][i][s+2]=e[o][i][s+2].replace(" ","_"));return e}var fJ=kf.exports,gDe=Jp,mDe=gDe.drawMode,yDe=Pa,SE=fF,xDe=SE.i000,bDe=SE.i090,_De=SE.i180,wDe=SE.i270,TDe=uT,ADe=TDe.clearOutlineControllers,vF=CT,ME=vF.pointsShapeRectangle,dF=vF.pointsShapeEllipse,SDe=vF.writePaths,MDe=uJ,cJ=function e(t,r,a,n){n||(n=0);var o=a.gd;function i(){e(t,r,a,n++),dF(t[0])&&s({redrawing:!0})}function s(B){a.isActiveShape=!1;var N=MDe(r,a);Object.keys(N).length&&yDe.call((B||{}).redrawing?"relayout":"_guiRelayout",o,N)}var l=a.isActiveShape,u=o._fullLayout,f=u._zoomlayer,c=a.dragmode,h=mDe(c);h?o._fullLayout._drawing=!0:o._fullLayout._activeShapeIndex>=0&&ADe(o),r.attr("d",SDe(t));var v,p,d,g,m;if(l&&!n){m=kDe([],t);var y=f.append("g").attr("class","outline-controllers");k(y),R()}function _(B){d=+B.srcElement.getAttribute("data-i"),g=+B.srcElement.getAttribute("data-j"),v[d][g].moveFn=S}function S(B,N){if(!!t.length){var D=m[d][g][1],O=m[d][g][2],$=t[d],Y=$.length;if(ME($)){for(var X=0;X<Y;X++)if(X!==g){var ee=$[X];ee[1]===$[g][1]&&(ee[1]=D+B),ee[2]===$[g][2]&&(ee[2]=O+N)}if($[g][1]=D+B,$[g][2]=O+N,!ME($))for(var Q=0;Q<Y;Q++)for(var Z=0;Z<$[Q].length;Z++)$[Q][Z]=m[d][Q][Z]}else $[g][1]=D+B,$[g][2]=O+N;i()}}function M(){s()}function w(){if(!!t.length&&!!t[d]&&!!t[d].length){for(var B=[],N=0;N<t[d].length;N++)N!==g&&B.push(t[d][N]);B.length>1&&!(B.length===2&&B[1][0]==="Z")&&(g===0&&(B[0][0]="M"),t[d]=B,i(),s())}}function A(B,N){if(B===2){d=+N.srcElement.getAttribute("data-i"),g=+N.srcElement.getAttribute("data-j");var D=t[d];!ME(D)&&!dF(D)&&w()}}function k(B){v=[];for(var N=0;N<t.length;N++){var D=t[N],O=ME(D),$=!O&&dF(D);v[N]=[];for(var Y=0;Y<D.length;Y++)if(D[Y][0]!=="Z"&&!($&&Y!==xDe&&Y!==bDe&&Y!==_De&&Y!==wDe)){var X=D[Y][1],ee=D[Y][2],Q=B.append("circle").classed("cursor-grab",!0).attr("data-i",N).attr("data-j",Y).attr("cx",X).attr("cy",ee).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});v[N][Y]={element:Q.node(),gd:o,prepFn:_,doneFn:M,clickFn:A},fJ.init(v[N][Y])}}}function T(B,N){if(!!t.length)for(var D=0;D<t.length;D++)for(var O=0;O<t[D].length;O++)for(var $=0;$+2<t[D][O].length;$+=2)t[D][O][$+1]=m[D][O][$+1]+B,t[D][O][$+2]=m[D][O][$+2]+N}function L(B,N){T(B,N),i()}function C(B){d=+B.srcElement.getAttribute("data-i"),d||(d=0),p[d].moveFn=L}function I(){s()}function R(){if(p=[],!!t.length){var B=0;p[B]={element:r[0][0],gd:o,prepFn:C,doneFn:I},fJ.init(p[B])}}};function kDe(e,t){for(var r=0;r<t.length;r++){var a=t[r];e[r]=[];for(var n=0;n<a.length;n++){e[r][n]=[];for(var o=0;o<a[n].length;o++)e[r][n][o]=a[n][o]}}return e}var pF={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},kE={};(function(e){var t=pF,r=bt.exports;e.rangeToShapePosition=function(a){return a.type==="log"?a.r2d:function(n){return n}},e.shapePositionToRange=function(a){return a.type==="log"?a.d2r:function(n){return n}},e.decodeDate=function(a){return function(n){return n.replace&&(n=n.replace("_"," ")),a(n)}},e.encodeDate=function(a){return function(n){return a(n).replace(" ","_")}},e.extractPathCoords=function(a,n){var o=[],i=a.match(t.segmentRE);return i.forEach(function(s){var l=n[s.charAt(0)].drawn;if(l!==void 0){var u=s.substr(1).match(t.paramRE);!u||u.length<l||o.push(r.cleanNumber(u[l]))}}),o},e.getDataToPixel=function(a,n,o,i){var s=a._fullLayout._size,l;if(n)if(i==="domain")l=function(f){return n._length*(o?1-f:f)+n._offset};else{var u=e.shapePositionToRange(n);l=function(f){return n._offset+n.r2p(u(f,!0))},n.type==="date"&&(l=e.decodeDate(l))}else o?l=function(f){return s.t+s.h*(1-f)}:l=function(f){return s.l+s.w*f};return l},e.getPixelToData=function(a,n,o,i){var s=a._fullLayout._size,l;if(n)if(i==="domain")l=function(f){var c=(f-n._offset)/n._length;return o?1-c:c};else{var u=e.rangeToShapePosition(n);l=function(f){return u(n.p2r(f-n._offset))}}else o?l=function(f){return 1-(f-s.t)/s.h}:l=function(f){return(f-s.l)/s.w};return l},e.roundPositionForSharpStrokeRendering=function(a,n){var o=Math.round(n%2)===1,i=Math.round(a);return o?i+.5:i},e.makeOptionsAndPlotinfo=function(a,n){var o=a._fullLayout.shapes[n]||{},i=a._fullLayout._plots[o.xref+o.yref],s=!!i;return s?i._hadPlotinfo=!0:(i={},o.xref&&o.xref!=="paper"&&(i.xaxis=a._fullLayout[o.xref+"axis"]),o.yref&&o.yref!=="paper"&&(i.yaxis=a._fullLayout[o.yref+"axis"])),i.xsizemode=o.xsizemode,i.ysizemode=o.ysizemode,i.xanchor=o.xanchor,i.yanchor=o.yanchor,{options:o,plotinfo:i}}})(kE);var hJ=Pa,gF=bt.exports,Qp=rn.exports,EDe=CT.readPaths,CDe=cJ,vJ=uT.clearOutlineControllers,mF=Oa.exports,yF=xn.exports,LDe=si.arrayEditor,dJ=kf.exports,pJ=Zp,Iv=pF,Ju=kE,gJ={draw:xF,drawOne:mJ,eraseActiveShape:RDe};function xF(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var a=t._plots[r].shapelayer;a&&a.selectAll("path").remove()}for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible&&mJ(e,n)}function EE(e){return!!e._fullLayout._drawing}function CE(e){return!e._context.edits.shapePosition}function mJ(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=Ju.makeOptionsAndPlotinfo(e,t),a=r.options,n=r.plotinfo;if(!a._input||a.visible===!1)return;if(a.layer!=="below")i(e._fullLayout._shapeUpperLayer);else if(a.xref==="paper"||a.yref==="paper")i(e._fullLayout._shapeLowerLayer);else if(n._hadPlotinfo){var o=n.mainplotinfo||n;i(o.shapelayer)}else i(e._fullLayout._shapeLowerLayer);function i(s){var l=bF(e,a),u={"data-index":t,"fill-rule":a.fillrule,d:l},f=a.opacity,c=a.fillcolor,h=a.line.width?a.line.color:"rgba(0,0,0,0)",v=a.line.width,p=a.line.dash;!v&&a.editable===!0&&(v=5,p="solid");var d=l[l.length-1]!=="Z",g=CE(e)&&a.editable&&e._fullLayout._activeShapeIndex===t;g&&(c=d?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,f=e._fullLayout.activeshape.opacity);var m=s.append("path").attr(u).style("opacity",f).call(mF.stroke,h).call(mF.fill,c).call(yF.dashLine,p,v);yJ(m,e,a);var y;if((g||e._context.edits.shapePosition)&&(y=LDe(e.layout,"shapes",a)),g){m.style({cursor:"move"});var _={element:m.node(),plotinfo:n,gd:e,editHelpers:y,isActiveShape:!0},S=EDe(l,e);CDe(S,m,_)}else e._context.edits.shapePosition?PDe(e,m,a,t,s,y):a.editable===!0&&m.style("pointer-events",d||mF.opacity(c)*f<=.5?"stroke":"all");m.node().addEventListener("click",function(){return DDe(e,m)})}}function yJ(e,t,r){var a=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");yF.setClipUrl(e,a?"clip"+t._fullLayout._uid+a:null,t)}function PDe(e,t,r,a,n,o){var i=10,s=10,l=r.xsizemode==="pixel",u=r.ysizemode==="pixel",f=r.type==="line",c=r.type==="path",h=o.modifyItem,v,p,d,g,m,y,_,S,M,w,A,k,T,L,C,I=Qp.getFromId(e,r.xref),R=Qp.getRefType(r.xref),B=Qp.getFromId(e,r.yref),N=Qp.getRefType(r.yref),D=Ju.getDataToPixel(e,I,!1,R),O=Ju.getDataToPixel(e,B,!0,N),$=Ju.getPixelToData(e,I,!1,R),Y=Ju.getPixelToData(e,B,!0,N),X=Z(),ee={element:X.node(),gd:e,prepFn:ie,doneFn:we,clickFn:Te},Q;dJ.init(ee),X.node().onmousemove=ae;function Z(){return f?q():t}function q(){var se=10,de=Math.max(r.line.width,se),Me=n.append("g").attr("data-index",a);Me.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":de,"stroke-opacity":"0"});var Ie={"fill-opacity":"0"},Ee=Math.max(de/2,se);return Me.append("circle").attr({"data-line-point":"start-point",cx:l?D(r.xanchor)+r.x0:D(r.x0),cy:u?O(r.yanchor)-r.y0:O(r.y0),r:Ee}).style(Ie).classed("cursor-grab",!0),Me.append("circle").attr({"data-line-point":"end-point",cx:l?D(r.xanchor)+r.x1:D(r.x1),cy:u?O(r.yanchor)-r.y1:O(r.y1),r:Ee}).style(Ie).classed("cursor-grab",!0),Me}function ae(se){if(EE(e)){Q=null;return}if(f)se.target.tagName==="path"?Q="move":Q=se.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var de=ee.element.getBoundingClientRect(),Me=de.right-de.left,Ie=de.bottom-de.top,Ee=se.clientX-de.left,qe=se.clientY-de.top,be=!c&&Me>i&&Ie>s&&!se.shiftKey?dJ.getCursor(Ee/Me,1-qe/Ie):"move";pJ(t,be),Q=be.split("-")[0]}}function ie(se){EE(e)||(l&&(m=D(r.xanchor)),u&&(y=O(r.yanchor)),r.type==="path"?C=r.path:(v=l?r.x0:D(r.x0),p=u?r.y0:O(r.y0),d=l?r.x1:D(r.x1),g=u?r.y1:O(r.y1)),v<d?(M=v,T="x0",w=d,L="x1"):(M=d,T="x1",w=v,L="x0"),!u&&p<g||u&&p>g?(_=p,A="y0",S=g,k="y1"):(_=g,A="y1",S=p,k="y0"),ae(se),Se(n,r),re(t,r,e),ee.moveFn=Q==="move"?he:xe,ee.altKey=se.altKey)}function we(){EE(e)||(pJ(t),ye(n),yJ(t,e,r),hJ.call("_guiRelayout",e,o.getUpdateObj()))}function Te(){EE(e)||ye(n)}function he(se,de){if(r.type==="path"){var Me=function(qe){return qe},Ie=Me,Ee=Me;l?h("xanchor",r.xanchor=$(m+se)):(Ie=function(be){return $(D(be)+se)},I&&I.type==="date"&&(Ie=Ju.encodeDate(Ie))),u?h("yanchor",r.yanchor=Y(y+de)):(Ee=function(be){return Y(O(be)+de)},B&&B.type==="date"&&(Ee=Ju.encodeDate(Ee))),h("path",r.path=xJ(C,Ie,Ee))}else l?h("xanchor",r.xanchor=$(m+se)):(h("x0",r.x0=$(v+se)),h("x1",r.x1=$(d+se))),u?h("yanchor",r.yanchor=Y(y+de)):(h("y0",r.y0=Y(p+de)),h("y1",r.y1=Y(g+de)));t.attr("d",bF(e,r)),Se(n,r)}function xe(se,de){if(c){var Me=function($e){return $e},Ie=Me,Ee=Me;l?h("xanchor",r.xanchor=$(m+se)):(Ie=function(Ye){return $(D(Ye)+se)},I&&I.type==="date"&&(Ie=Ju.encodeDate(Ie))),u?h("yanchor",r.yanchor=Y(y+de)):(Ee=function(Ye){return Y(O(Ye)+de)},B&&B.type==="date"&&(Ee=Ju.encodeDate(Ee))),h("path",r.path=xJ(C,Ie,Ee))}else if(f){if(Q==="resize-over-start-point"){var qe=v+se,be=u?p-de:p+de;h("x0",r.x0=l?qe:$(qe)),h("y0",r.y0=u?be:Y(be))}else if(Q==="resize-over-end-point"){var oe=d+se,ce=u?g-de:g+de;h("x1",r.x1=l?oe:$(oe)),h("y1",r.y1=u?ce:Y(ce))}}else{var ue=function($e){return Q.indexOf($e)!==-1},Re=ue("n"),Xe=ue("s"),Ke=ue("w"),vt=ue("e"),Ze=Re?_+de:_,Qe=Xe?S+de:S,Je=Ke?M+se:M,je=vt?w+se:w;u&&(Re&&(Ze=_-de),Xe&&(Qe=S-de)),(!u&&Qe-Ze>s||u&&Ze-Qe>s)&&(h(A,r[A]=u?Ze:Y(Ze)),h(k,r[k]=u?Qe:Y(Qe))),je-Je>i&&(h(T,r[T]=l?Je:$(Je)),h(L,r[L]=l?je:$(je)))}t.attr("d",bF(e,r)),Se(n,r)}function Se(se,de){(l||u)&&Me();function Me(){var Ie=de.type!=="path",Ee=se.selectAll(".visual-cue").data([0]),qe=1;Ee.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":qe}).classed("visual-cue",!0);var be=D(l?de.xanchor:gF.midRange(Ie?[de.x0,de.x1]:Ju.extractPathCoords(de.path,Iv.paramIsX))),oe=O(u?de.yanchor:gF.midRange(Ie?[de.y0,de.y1]:Ju.extractPathCoords(de.path,Iv.paramIsY)));if(be=Ju.roundPositionForSharpStrokeRendering(be,qe),oe=Ju.roundPositionForSharpStrokeRendering(oe,qe),l&&u){var ce="M"+(be-1-qe)+","+(oe-1-qe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Ee.attr("d",ce)}else if(l){var ue="M"+(be-1-qe)+","+(oe-9-qe)+"v18 h2 v-18 Z";Ee.attr("d",ue)}else{var Re="M"+(be-9-qe)+","+(oe-1-qe)+"h18 v2 h-18 Z";Ee.attr("d",Re)}}}function ye(se){se.selectAll(".visual-cue").remove()}function re(se,de,Me){var Ie=de.xref,Ee=de.yref,qe=Qp.getFromId(Me,Ie),be=Qp.getFromId(Me,Ee),oe="";Ie!=="paper"&&!qe.autorange&&(oe+=Ie),Ee!=="paper"&&!be.autorange&&(oe+=Ee),yF.setClipUrl(se,oe?"clip"+Me._fullLayout._uid+oe:null,Me)}}function bF(e,t){var r=t.type,a=Qp.getRefType(t.xref),n=Qp.getRefType(t.yref),o=Qp.getFromId(e,t.xref),i=Qp.getFromId(e,t.yref),s=e._fullLayout._size,l,u,f,c,h,v,p,d;if(o?a==="domain"?u=function(T){return o._offset+o._length*T}:(l=Ju.shapePositionToRange(o),u=function(T){return o._offset+o.r2p(l(T,!0))}):u=function(T){return s.l+s.w*T},i?n==="domain"?c=function(T){return i._offset+i._length*(1-T)}:(f=Ju.shapePositionToRange(i),c=function(T){return i._offset+i.r2p(f(T,!0))}):c=function(T){return s.t+s.h*(1-T)},r==="path")return o&&o.type==="date"&&(u=Ju.decodeDate(u)),i&&i.type==="date"&&(c=Ju.decodeDate(c)),IDe(t,u,c);if(t.xsizemode==="pixel"){var g=u(t.xanchor);h=g+t.x0,v=g+t.x1}else h=u(t.x0),v=u(t.x1);if(t.ysizemode==="pixel"){var m=c(t.yanchor);p=m-t.y0,d=m-t.y1}else p=c(t.y0),d=c(t.y1);if(r==="line")return"M"+h+","+p+"L"+v+","+d;if(r==="rect")return"M"+h+","+p+"H"+v+"V"+d+"H"+h+"Z";var y=(h+v)/2,_=(p+d)/2,S=Math.abs(y-h),M=Math.abs(_-p),w="A"+S+","+M,A=y+S+","+_,k=y+","+(_-M);return"M"+A+w+" 0 1,1 "+k+w+" 0 0,1 "+A+"Z"}function IDe(e,t,r){var a=e.path,n=e.xsizemode,o=e.ysizemode,i=e.xanchor,s=e.yanchor;return a.replace(Iv.segmentRE,function(l){var u=0,f=l.charAt(0),c=Iv.paramIsX[f],h=Iv.paramIsY[f],v=Iv.numParams[f],p=l.substr(1).replace(Iv.paramRE,function(d){return c[u]?n==="pixel"?d=t(i)+Number(d):d=t(d):h[u]&&(o==="pixel"?d=r(s)-Number(d):d=r(d)),u++,u>v&&(d="X"),d});return u>v&&(p=p.replace(/[\s,]*X.*/,""),gF.log("Ignoring extra params in segment "+l)),f+p})}function xJ(e,t,r){return e.replace(Iv.segmentRE,function(a){var n=0,o=a.charAt(0),i=Iv.paramIsX[o],s=Iv.paramIsY[o],l=Iv.numParams[o],u=a.substr(1).replace(Iv.paramRE,function(f){return n>=l||(i[n]?f=t(f):s[n]&&(f=r(f)),n++),f});return o+u})}function DDe(e,t){if(!!CE(e)){var r=t.node(),a=+r.getAttribute("data-index");if(a>=0){if(a===e._fullLayout._activeShapeIndex){bJ(e);return}e._fullLayout._activeShapeIndex=a,e._fullLayout._deactivateShape=bJ,xF(e)}}}function bJ(e){if(!!CE(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(vJ(e),delete e._fullLayout._activeShapeIndex,xF(e))}}function RDe(e){if(!!CE(e)){vJ(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var a=[],n=0;n<r.length;n++)n!==t&&a.push(r[n]);delete e._fullLayout._activeShapeIndex,hJ.call("_guiRelayout",e,{shapes:a})}}}var Dv=Pa,_J=Eo.exports,wJ=As,Li=sF,zDe=gJ.eraseActiveShape,J_=bt.exports,li=J_._,Pi=oF.exports={};Pi.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?li(e,"Download plot as a png"):li(e,"Download plot")},icon:Li.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};J_.notifier(li(e,"Taking snapshot - this may take a few seconds"),"long"),r.format!=="svg"&&J_.isIE()&&(J_.notifier(li(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(a){a in t&&(r[a]=t[a])}),Dv.call("downloadImage",e,r).then(function(a){J_.notifier(li(e,"Snapshot succeeded")+" - "+a,"long")}).catch(function(){J_.notifier(li(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Pi.sendDataToCloud={name:"sendDataToCloud",title:function(e){return li(e,"Edit in Chart Studio")},icon:Li.disk,click:function(e){_J.sendDataToCloud(e)}};Pi.editInChartStudio={name:"editInChartStudio",title:function(e){return li(e,"Edit in Chart Studio")},icon:Li.pencil,click:function(e){_J.sendDataToCloud(e)}};Pi.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return li(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Li.zoombox,click:Cf};Pi.pan2d={name:"pan2d",_cat:"pan",title:function(e){return li(e,"Pan")},attr:"dragmode",val:"pan",icon:Li.pan,click:Cf};Pi.select2d={name:"select2d",_cat:"select",title:function(e){return li(e,"Box Select")},attr:"dragmode",val:"select",icon:Li.selectbox,click:Cf};Pi.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return li(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Li.lasso,click:Cf};Pi.drawclosedpath={name:"drawclosedpath",title:function(e){return li(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Li.drawclosedpath,click:Cf};Pi.drawopenpath={name:"drawopenpath",title:function(e){return li(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Li.drawopenpath,click:Cf};Pi.drawline={name:"drawline",title:function(e){return li(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Li.drawline,click:Cf};Pi.drawrect={name:"drawrect",title:function(e){return li(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Li.drawrect,click:Cf};Pi.drawcircle={name:"drawcircle",title:function(e){return li(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Li.drawcircle,click:Cf};Pi.eraseshape={name:"eraseshape",title:function(e){return li(e,"Erase active shape")},icon:Li.eraseshape,click:zDe};Pi.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return li(e,"Zoom in")},attr:"zoom",val:"in",icon:Li.zoom_plus,click:Cf};Pi.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return li(e,"Zoom out")},attr:"zoom",val:"out",icon:Li.zoom_minus,click:Cf};Pi.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return li(e,"Autoscale")},attr:"zoom",val:"auto",icon:Li.autoscale,click:Cf};Pi.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return li(e,"Reset axes")},attr:"zoom",val:"reset",icon:Li.home,click:Cf};Pi.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return li(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Li.tooltip_basic,gravity:"ne",click:Cf};Pi.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return li(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Li.tooltip_compare,gravity:"ne",click:Cf};function Cf(e,t){var r=t.currentTarget,a=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,o=e._fullLayout,i={},s=wJ.list(e,null,!0),l=o._cartesianSpikesEnabled,u,f;if(a==="zoom"){var c=n==="in"?.5:2,h=(1+c)/2,v=(1-c)/2,p;for(f=0;f<s.length;f++)if(u=s[f],!u.fixedrange)if(p=u._name,n==="auto")i[p+".autorange"]=!0;else if(n==="reset"){if(u._rangeInitial===void 0)i[p+".autorange"]=!0;else{var d=u._rangeInitial.slice();i[p+".range[0]"]=d[0],i[p+".range[1]"]=d[1]}u._showSpikeInitial!==void 0&&(i[p+".showspikes"]=u._showSpikeInitial,l==="on"&&!u._showSpikeInitial&&(l="off"))}else{var g=[u.r2l(u.range[0]),u.r2l(u.range[1])],m=[h*g[0]+v*g[1],h*g[1]+v*g[0]];i[p+".range[0]"]=u.l2r(m[0]),i[p+".range[1]"]=u.l2r(m[1])}}else a==="hovermode"&&(n==="x"||n==="y")&&(n=o._isHoriz?"y":"x",r.setAttribute("data-val",n)),i[a]=n;o._cartesianSpikesEnabled=l,Dv.call("_guiRelayout",e,i)}Pi.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return li(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Li.zoombox,click:LE};Pi.pan3d={name:"pan3d",_cat:"pan",title:function(e){return li(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Li.pan,click:LE};Pi.orbitRotation={name:"orbitRotation",title:function(e){return li(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Li["3d_rotate"],click:LE};Pi.tableRotation={name:"tableRotation",title:function(e){return li(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Li["z-axis"],click:LE};function LE(e,t){for(var r=t.currentTarget,a=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,o=e._fullLayout._subplots.gl3d||[],i={},s=a.split("."),l=0;l<o.length;l++)i[o[l]+"."+s[1]]=n;var u=n==="pan"?n:"zoom";i.dragmode=u,Dv.call("_guiRelayout",e,i)}Pi.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return li(e,"Reset camera to default")},attr:"resetDefault",icon:Li.home,click:_F};Pi.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return li(e,"Reset camera to last save")},attr:"resetLastSave",icon:Li.movie,click:_F};function _F(e,t){for(var r=t.currentTarget,a=r.getAttribute("data-attr"),n=a==="resetLastSave",o=a==="resetDefault",i=e._fullLayout,s=i._subplots.gl3d||[],l={},u=0;u<s.length;u++){var f=s[u],c=f+".camera",h=f+".aspectratio",v=f+".aspectmode",p=i[f]._scene,d;n?(l[c+".up"]=p.viewInitial.up,l[c+".eye"]=p.viewInitial.eye,l[c+".center"]=p.viewInitial.center,d=!0):o&&(l[c+".up"]=null,l[c+".eye"]=null,l[c+".center"]=null,d=!0),d&&(l[h+".x"]=p.viewInitial.aspectratio.x,l[h+".y"]=p.viewInitial.aspectratio.y,l[h+".z"]=p.viewInitial.aspectratio.z,l[v]=p.viewInitial.aspectmode)}Dv.call("_guiRelayout",e,l)}Pi.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return li(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Li.tooltip_basic,gravity:"ne",click:FDe};function TJ(e,t){var r=t.currentTarget,a=r._previousVal,n=e._fullLayout,o=n._subplots.gl3d||[],i=["xaxis","yaxis","zaxis"],s={},l={};if(a)l=a,r._previousVal=null;else{for(var u=0;u<o.length;u++){var f=o[u],c=n[f],h=f+".hovermode";s[h]=c.hovermode,l[h]=!1;for(var v=0;v<3;v++){var p=i[v],d=f+"."+p+".showspikes";l[d]=!1,s[d]=c[p].showspikes}}r._previousVal=s}return l}function FDe(e,t){var r=TJ(e,t);Dv.call("_guiRelayout",e,r)}Pi.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return li(e,"Zoom in")},attr:"zoom",val:"in",icon:Li.zoom_plus,click:wF};Pi.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return li(e,"Zoom out")},attr:"zoom",val:"out",icon:Li.zoom_minus,click:wF};Pi.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return li(e,"Reset")},attr:"reset",val:null,icon:Li.autoscale,click:wF};Pi.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return li(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Li.tooltip_basic,gravity:"ne",click:TF};function wF(e,t){for(var r=t.currentTarget,a=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,o=e._fullLayout,i=o._subplots.geo||[],s=0;s<i.length;s++){var l=i[s],u=o[l];if(a==="zoom"){var f=u.projection.scale,c=n==="in"?2*f:.5*f;Dv.call("_guiRelayout",e,l+".projection.scale",c)}}a==="reset"&&PE(e,"geo")}Pi.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return li(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Li.tooltip_basic,gravity:"ne",click:TF};Pi.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return li(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Li.tooltip_basic,gravity:"ne",click:TF};function AJ(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function TF(e){var t=AJ(e);Dv.call("_guiRelayout",e,"hovermode",t)}Pi.resetViewSankey={name:"resetSankeyGroup",title:function(e){return li(e,"Reset view")},icon:Li.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var a=e._fullData[r]._viewInitial;t["node.groups"].push(a.node.groups.slice()),t["node.x"].push(a.node.x.slice()),t["node.y"].push(a.node.y.slice())}Dv.call("restyle",e,t)}};Pi.toggleHover={name:"toggleHover",title:function(e){return li(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Li.tooltip_basic,gravity:"ne",click:function(e,t){var r=TJ(e,t);r.hovermode=AJ(e),Dv.call("_guiRelayout",e,r)}};Pi.resetViews={name:"resetViews",title:function(e){return li(e,"Reset views")},icon:Li.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Cf(e,t),r.setAttribute("data-attr","resetLastSave"),_F(e,t),PE(e,"geo"),PE(e,"mapbox")}};Pi.toggleSpikelines={name:"toggleSpikelines",title:function(e){return li(e,"Toggle Spike Lines")},icon:Li.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",Dv.call("_guiRelayout",e,ODe(e))}};function ODe(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",a=wJ.list(e,null,!0),n={},o=0;o<a.length;o++){var i=a[o];n[i._name+".showspikes"]=r?!0:i._showSpikeInitial}return n}Pi.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return li(e,"Reset view")},attr:"reset",icon:Li.home,click:function(e){PE(e,"mapbox")}};Pi.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return li(e,"Zoom in")},attr:"zoom",val:"in",icon:Li.zoom_plus,click:SJ};Pi.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return li(e,"Zoom out")},attr:"zoom",val:"out",icon:Li.zoom_minus,click:SJ};function SJ(e,t){for(var r=t.currentTarget,a=r.getAttribute("data-val"),n=e._fullLayout,o=n._subplots.mapbox||[],i=1.05,s={},l=0;l<o.length;l++){var u=o[l],f=n[u].zoom,c=a==="in"?i*f:f/i;s[u+".zoom"]=c}Dv.call("_guiRelayout",e,s)}function PE(e,t){for(var r=e._fullLayout,a=r._subplots[t]||[],n={},o=0;o<a.length;o++)for(var i=a[o],s=r[i]._subplot,l=s.viewInitial,u=Object.keys(l),f=0;f<u.length;f++){var c=u[f];n[i+"."+c]=l[c]}Dv.call("_guiRelayout",e,n)}var MJ=oF.exports,NDe=Object.keys(MJ),kJ=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],EJ=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(kJ),Q_=[],BDe=function(e){if(EJ.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();Q_.indexOf(t)===-1&&Q_.push(t),Q_.indexOf(r)===-1&&Q_.push(r)}};NDe.forEach(function(e){BDe(MJ[e])});Q_.sort();var CJ={DRAW_MODES:kJ,backButtons:EJ,foreButtons:Q_},LJ=CJ,PJ={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+LJ.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+LJ.foreButtons.join("*, *")+"*."].join(" ")}},$De=bt.exports,LT=Oa.exports,UDe=si,HDe=PJ,GDe=function(t,r){var a=t.modebar||{},n=UDe.newContainer(r,"modebar");function o(s,l){return $De.coerce(a,n,HDe,s,l)}o("orientation"),o("bgcolor",LT.addOpacity(r.paper_bgcolor,.5));var i=LT.contrast(LT.rgb(r.modebar.bgcolor));o("color",LT.addOpacity(i,.3)),o("activecolor",LT.addOpacity(i,.7)),o("uirevision",r.uirevision),o("add"),o("remove")},AF=Ra.exports,VDe=gn,Ug=bt.exports,IJ=sF,jDe=new DOMParser;function DJ(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var e0=DJ.prototype;e0.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,a=this.graphInfo._fullLayout,n="modebar-"+a._uid;this.element.setAttribute("id",n),this._uid=n,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var o=a.modebar,i=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";Ug.deleteRelatedStyleRule(n),Ug.addRelatedStyleRule(n,i+"#"+n+" .modebar-group","background-color: "+o.bgcolor),Ug.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+o.color),Ug.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+o.activecolor),Ug.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+o.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==r.displaylogo,u=this.locale!==r.locale;if(this.locale=r.locale,(s||l||u)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var f=this.getLogo();r.watermark&&(f.className=f.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()};e0.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var a=t.createGroup();r.forEach(function(n){var o=n.name;if(!o)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(o)!==-1)throw new Error("button name '"+o+"' is taken");t.buttonsNames.push(o);var i=t.createButton(n);t.buttonElements.push(i),a.appendChild(i)}),t.element.appendChild(a)})};e0.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};e0.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var a=e.title;a===void 0?a=e.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&r.setAttribute("data-title",a),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var n=e.val;n!==void 0&&(typeof n=="function"&&(n=n(this.graphInfo)),r.setAttribute("data-val",n));var o=e.click;if(typeof o!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(s){e.click(t.graphInfo,s),t.updateActiveButton(s.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&AF.select(r).classed("active",!0);var i=e.icon;return typeof i=="function"?r.appendChild(i()):r.appendChild(this.createIcon(i||IJ.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};e0.createIcon=function(e){var t=VDe(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",a;if(e.path){a=document.createElementNS(r,"svg"),a.setAttribute("viewBox",[0,0,e.width,t].join(" ")),a.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):e.ascent!==void 0&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),a.appendChild(n)}if(e.svg){var o=jDe.parseFromString(e.svg,"application/xml");a=o.childNodes[0]}return a.setAttribute("height","1em"),a.setAttribute("width","1em"),a};e0.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var n=a.getAttribute("data-val")||!0,o=a.getAttribute("data-attr"),i=a.getAttribute("data-toggle")==="true",s=AF.select(a);if(i)o===r&&s.classed("active",!s.classed("active"));else{var l=o===null?o:Ug.nestedProperty(t,o).get();s.classed("active",l===n)}})};e0.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var a=0;a<e[r].length;a++)if(e[r][a].name!==t[r][a].name)return!1}return!0};e0.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",Ug._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(IJ.newplotlylogo)),e.appendChild(t),e};e0.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};e0.destroy=function(){Ug.removeElement(this.container.querySelector(".modebar")),Ug.deleteRelatedStyleRule(this._uid)};function qDe(e,t){var r=e._fullLayout,a=new DJ({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&AF.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}var YDe=qDe,WDe=As,RJ=Ro,SF=Pa,XDe=oh.isUnifiedHover,ZDe=YDe,IE=oF.exports,KDe=CJ.DRAW_MODES,JDe=function(t){var r=t._fullLayout,a=t._context,n=r._modeBar;if(!a.displayModeBar&&!a.watermark){n&&(n.destroy(),delete r._modeBar);return}if(!Array.isArray(a.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(a.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var o=a.modeBarButtons,i;Array.isArray(o)&&o.length?i=n6e(o):!a.displayModeBar&&a.watermark?i=[]:i=QDe(t),n?n.update(t,i):r._modeBar=ZDe(t,i)};function QDe(e){var t=e._fullLayout,r=e._fullData,a=e._context;function n($,Y){if(typeof Y=="string"){if(Y.toLowerCase()===$.toLowerCase())return!0}else{var X=Y.name,ee=Y._cat||Y.name;if(X===$||ee===$.toLowerCase())return!0}return!1}var o=t.modebar.add;typeof o=="string"&&(o=[o]);var i=t.modebar.remove;typeof i=="string"&&(i=[i]);var s=a.modeBarButtonsToAdd.concat(o.filter(function($){for(var Y=0;Y<a.modeBarButtonsToRemove.length;Y++)if(n($,a.modeBarButtonsToRemove[Y]))return!1;return!0})),l=a.modeBarButtonsToRemove.concat(i.filter(function($){for(var Y=0;Y<a.modeBarButtonsToAdd.length;Y++)if(n($,a.modeBarButtonsToAdd[Y]))return!1;return!0})),u=t._has("cartesian"),f=t._has("gl3d"),c=t._has("geo"),h=t._has("pie"),v=t._has("funnelarea"),p=t._has("gl2d"),d=t._has("ternary"),g=t._has("mapbox"),m=t._has("polar"),y=t._has("smith"),_=t._has("sankey"),S=e6e(t),M=XDe(t.hovermode),w=[];function A($){if(!!$.length){for(var Y=[],X=0;X<$.length;X++){for(var ee=$[X],Q=IE[ee],Z=Q.name.toLowerCase(),q=(Q._cat||Q.name).toLowerCase(),ae=!1,ie=0;ie<l.length;ie++){var we=l[ie].toLowerCase();if(we===Z||we===q){ae=!0;break}}ae||Y.push(IE[ee])}w.push(Y)}}var k=["toImage"];a.showEditInChartStudio?k.push("editInChartStudio"):a.showSendToCloud&&k.push("sendDataToCloud"),A(k);var T=[],L=[],C=[],I=[];(u||p||h||v||d)+c+f+g+m+y>1?(L=["toggleHover"],C=["resetViews"]):c?(T=["zoomInGeo","zoomOutGeo"],L=["hoverClosestGeo"],C=["resetGeo"]):f?(L=["hoverClosest3d"],C=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(T=["zoomInMapbox","zoomOutMapbox"],L=["toggleHover"],C=["resetViewMapbox"]):p?L=["hoverClosestGl2d"]:h?L=["hoverClosestPie"]:_?(L=["hoverClosestCartesian","hoverCompareCartesian"],C=["resetViewSankey"]):L=["toggleHover"],u&&(L=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(r6e(r)||M)&&(L=[]),(u||p)&&!S&&(T=["zoomIn2d","zoomOut2d","autoScale2d"],C[0]!=="resetViews"&&(C=["resetScale2d"])),f?I=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||p)&&!S||d?I=["zoom2d","pan2d"]:g||c?I=["pan2d"]:m&&(I=["zoom2d"]),t6e(r)&&I.push("select2d","lasso2d");var R=[],B=function($){R.indexOf($)===-1&&L.indexOf($)!==-1&&R.push($)};if(Array.isArray(s)){for(var N=[],D=0;D<s.length;D++){var O=s[D];typeof O=="string"?(O=O.toLowerCase(),KDe.indexOf(O)!==-1?(t._has("mapbox")||t._has("cartesian"))&&I.push(O):O==="togglespikelines"?B("toggleSpikelines"):O==="togglehover"?B("toggleHover"):O==="hovercompare"?B("hoverCompareCartesian"):O==="hoverclosest"?(B("hoverClosestCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie")):O==="v1hovermode"&&(B("toggleHover"),B("hoverClosestCartesian"),B("hoverCompareCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie"))):N.push(O)}s=N}return A(I),A(T.concat(C)),A(R),a6e(w,s)}function e6e(e){for(var t=WDe.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function t6e(e){for(var t=!1,r=0;r<e.length&&!t;r++){var a=e[r];!a._module||!a._module.selectPoints||(SF.traceIs(a,"scatter-like")?(RJ.hasMarkers(a)||RJ.hasText(a))&&(t=!0):SF.traceIs(a,"box-violin")?(a.boxpoints==="all"||a.points==="all")&&(t=!0):t=!0)}return t}function r6e(e){for(var t=0;t<e.length;t++)if(!SF.traceIs(e[t],"noHover"))return!1;return!0}function a6e(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function n6e(e){for(var t=0;t<e.length;t++)for(var r=e[t],a=0;a<r.length;a++){var n=r[a];if(typeof n=="string")if(IE[n]!==void 0)e[t][a]=IE[n];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return e}var zJ={moduleType:"component",name:"modebar",layoutAttributes:PJ,supplyLayoutDefaults:GDe,manage:JDe},qd={},i6e=ou.FROM_BL,FJ=function(t,r,a){a===void 0&&(a=i6e[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],o=n[0]+(n[1]-n[0])*a;t.range=t._input.range=[t.l2r(o+(n[0]-o)*r),t.l2r(o+(n[1]-o)*r)],t.setScale()},Sx=bt.exports,MF=Hd,Yd=As.id2name,o6e=Zu,OJ=FJ,s6e=Og,l6e=Un.ALMOST_EQUAL,u6e=ou.FROM_BL;qd.handleDefaults=function(e,t,r){var a=r.axIds,n=r.axHasImage,o=t._axisConstraintGroups=[],i=t._axisMatchGroups=[],s,l,u,f,c,h,v,p;for(s=0;s<a.length;s++)f=Yd(a[s]),c=e[f],h=t[f],f6e(c,h,{axIds:a,layoutOut:t,hasImage:n[f]});function d(k,T){for(s=0;s<k.length;s++){l=k[s];for(u in l)t[Yd(u)][T]=l}}for(d(i,"_matchGroup"),s=0;s<o.length;s++){l=o[s];for(u in l)if(h=t[Yd(u)],h.fixedrange){for(var g in l){var m=Yd(g);(e[m]||{}).fixedrange===!1&&Sx.warn("fixedrange was specified as false for axis "+m+" but was overridden because another axis in its constraint group has fixedrange true"),t[m].fixedrange=!0}break}}for(s=0;s<o.length;){l=o[s];for(u in l){h=t[Yd(u)],h._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(l).length&&(o.splice(s,1),s--);break}s++}d(o,"_constraintGroup");var y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],_=!1,S=!1;function M(){p=h[v],v==="rangebreaks"&&(S=h._hasDayOfWeekBreaks)}for(s=0;s<i.length;s++){l=i[s];for(var w=0;w<y.length;w++){v=y[w],p=null;var A;for(u in l)if(f=Yd(u),c=e[f],h=t[f],v in h){if(!h.matches&&(A=h,v in c)){M();break}p===null&&v in c&&M()}if(v==="range"&&p&&(_=!0),v==="autorange"&&p===null&&_&&(p=!1),p===null&&v in A&&(p=A[v]),p!==null)for(u in l)h=t[Yd(u)],h[v]=v==="range"?p.slice():p,v==="rangebreaks"&&(h._hasDayOfWeekBreaks=S,s6e(h,t))}}};function f6e(e,t,r){var a=r.axIds,n=r.layoutOut,o=r.hasImage,i=n._axisConstraintGroups,s=n._axisMatchGroups,l=t._id,u=l.charAt(0),f=((n._splomAxes||{})[u]||{})[l]||{},c=t._id,h=c.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function v(I,R){return Sx.coerce(e,t,o6e,I,R)}v("constrain",o?"domain":"range"),Sx.coerce(e,t,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var p=t.type,d,g,m=[];for(d=0;d<a.length;d++)if(g=a[d],g!==c){var y=n[Yd(g)];y.type===p&&m.push(g)}var _=BJ(i,c);if(_){var S=[];for(d=0;d<m.length;d++)g=m[d],_[g]||S.push(g);m=S}var M=m.length,w,A;M&&(e.matches||f.matches)&&(w=Sx.coerce(e,t,{matches:{valType:"enumerated",values:m,dflt:m.indexOf(f.matches)!==-1?f.matches:void 0}},"matches"));var k=o&&!h?t.anchor:void 0;if(M&&!w&&(e.scaleanchor||k)&&(A=Sx.coerce(e,t,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",k)),w){t._matchGroup=kF(s,c,w,1);var T=n[Yd(w)],L=NJ(n,t)/NJ(n,T);h!==(w.charAt(0)==="x")&&(L=(h?"x":"y")+L),kF(i,c,w,L)}else e.matches&&a.indexOf(e.matches)!==-1&&Sx.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(A){var C=v("scaleratio");C||(C=t.scaleratio=1),kF(i,c,A,C)}else e.scaleanchor&&a.indexOf(e.scaleanchor)!==-1&&Sx.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function NJ(e,t){var r=t.domain;return r||(r=e[Yd(t.overlaying)].domain),r[1]-r[0]}function BJ(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function kF(e,t,r,a){var n,o,i,s,l,u=BJ(e,t);u===null?(u={},u[t]=1,l=e.length,e.push(u)):l=e.indexOf(u);var f=Object.keys(u);for(n=0;n<e.length;n++)if(i=e[n],n!==l&&i[r]){var c=i[r];for(o=0;o<f.length;o++)s=f[o],i[s]=EF(c,EF(a,u[s]));e.splice(l,1);return}if(a!==1)for(o=0;o<f.length;o++){var h=f[o];u[h]=EF(a,u[h])}u[r]=1}function EF(e,t){var r="",a="",n,o;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],n=r.length,e=+e.substr(n)),typeof t=="string"&&(a=t.match(/^[xy]*/)[0],o=a.length,t=+t.substr(o));var i=e*t;return!n&&!o?i:!n||!o||r.charAt(0)===a.charAt(0)?r+a+e*t:n===o?i:(n>o?r.substr(o):a.substr(n))+i}function c6e(e,t){for(var r=t._size,a=r.h/r.w,n={},o=Object.keys(e),i=0;i<o.length;i++){var s=o[i],l=e[s];if(typeof l=="string"){var u=l.match(/^[xy]*/)[0],f=u.length;l=+l.substr(f);for(var c=u.charAt(0)==="y"?a:1/a,h=0;h<f;h++)l*=c}n[s]=l}return n}qd.enforce=function(t){var r=t._fullLayout,a=r._axisConstraintGroups||[],n,o,i,s,l,u,f,c;for(n=0;n<a.length;n++){i=c6e(a[n],r);var h=Object.keys(i),v=1/0,p=0,d=1/0,g={},m={},y=!1;for(o=0;o<h.length;o++)s=h[o],m[s]=l=r[Yd(s)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),g[s]=u=Math.abs(l._m)/i[s],v=Math.min(v,u),(l.constrain==="domain"||!l._constraintShrinkable)&&(d=Math.min(d,u)),delete l._constraintShrinkable,p=Math.max(p,u),l.constrain==="domain"&&(y=!0);if(!(v>l6e*p&&!y)){for(o=0;o<h.length;o++)if(s=h[o],u=g[s],l=m[s],f=l.constrain,u!==d||f==="domain")if(c=u/d,f==="range")OJ(l,c);else{var _=l._inputDomain,S=(l.domain[1]-l.domain[0])/(_[1]-_[0]),M=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if(c/=S,c*M<1){l.domain=l._input.domain=_.slice(),OJ(l,c);continue}if(M<1&&(l.range=l._input.range=l._inputRange.slice(),c*=M),l.autorange){var w=l.r2l(l.range[0]),A=l.r2l(l.range[1]),k=(w+A)/2,T=k,L=k,C=Math.abs(A-k),I=k-C*c*1.0001,R=k+C*c*1.0001,B=MF.makePadFn(r,l,0),N=MF.makePadFn(r,l,1);$J(l,c);var D=Math.abs(l._m),O=MF.concatExtremes(t,l),$=O.min,Y=O.max,X,ee;for(ee=0;ee<$.length;ee++)X=$[ee].val-B($[ee])/D,X>I&&X<T&&(T=X);for(ee=0;ee<Y.length;ee++)X=Y[ee].val+N(Y[ee])/D,X<R&&X>L&&(L=X);var Q=(L-T)/(2*C);c/=Q,T=l.l2r(T),L=l.l2r(L),l.range=l._input.range=w<A?[T,L]:[L,T]}$J(l,c)}}}};qd.getAxisGroup=function(t,r){for(var a=t._axisMatchGroups,n=0;n<a.length;n++){var o=a[n];if(o[r])return"g"+n}return r};qd.clean=function(t,r){if(r._inputDomain){for(var a=!1,n=r._id,o=t._fullLayout._axisConstraintGroups,i=0;i<o.length;i++)if(o[i][n]){a=!0;break}(!a||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function $J(e,t){var r=e._inputDomain,a=u6e[e.constraintoward],n=r[0]+(r[1]-r[0])*a;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t],e.setScale()}(function(e){var t=Ra.exports,r=Pa,a=Eo.exports,n=bt.exports,o=wE,i=Oa.exports,s=xn.exports,l=H_,u=zJ,f=rn.exports,c=ou,h=qd,v=h.enforce,p=h.clean,d=Hd.doAutoRange,g="start",m="middle",y="end";e.layoutStyles=function(I){return n.syncOrAsync([a.doAutoMargin,S],I)};function _(I,R,B){for(var N=0;N<B.length;N++){var D=B[N][0],O=B[N][1];if(!(D[0]>=I[1]||D[1]<=I[0])&&O[0]<R[1]&&O[1]>R[0])return!0}return!1}function S(I){var R=I._fullLayout,B=R._size,N=B.p,D=f.list(I,"",!0),O,$,Y,X,ee,Q;if(R._paperdiv.style({width:I._context.responsive&&R.autosize&&!I._context._hasZeroWidth&&!I.layout.width?"100%":R.width+"px",height:I._context.responsive&&R.autosize&&!I._context._hasZeroHeight&&!I.layout.height?"100%":R.height+"px"}).selectAll(".main-svg").call(s.setSize,R.width,R.height),I._context.setBackground(I,R.paper_bgcolor),e.drawMainTitle(I),u.manage(I),!R._has("cartesian"))return a.previousPromises(I);function Z(qt,Xt,Or){var Br=qt._lw/2;if(qt._id.charAt(0)==="x"){if(Xt){if(Or==="top")return Xt._offset-N-Br}else return B.t+B.h*(1-(qt.position||0))+Br%1;return Xt._offset+Xt._length+N+Br}if(Xt){if(Or==="right")return Xt._offset+Xt._length+N+Br}else return B.l+B.w*(qt.position||0)+Br%1;return Xt._offset-N-Br}for(O=0;O<D.length;O++){X=D[O];var q=X._anchorAxis;X._linepositions={},X._lw=s.crispRound(I,X.linewidth,1),X._mainLinePosition=Z(X,q,X.side),X._mainMirrorPosition=X.mirror&&q?Z(X,q,c.OPPOSITE_SIDE[X.side]):null}var ae=[],ie=[],we=[],Te=i.opacity(R.paper_bgcolor)===1&&i.opacity(R.plot_bgcolor)===1&&R.paper_bgcolor===R.plot_bgcolor;for($ in R._plots)if(Y=R._plots[$],Y.mainplot)Y.bg&&Y.bg.remove(),Y.bg=void 0;else{var he=Y.xaxis.domain,xe=Y.yaxis.domain,Se=Y.plotgroup;if(_(he,xe,we)){var ye=Se.node(),re=Y.bg=n.ensureSingle(Se,"rect","bg");ye.insertBefore(re.node(),ye.childNodes[0]),ie.push($)}else Se.select("rect.bg").remove(),we.push([he,xe]),Te||(ae.push($),ie.push($))}var se=R._bgLayer.selectAll(".bg").data(ae);for(se.enter().append("rect").classed("bg",!0),se.exit().remove(),se.each(function(qt){R._plots[qt].bg=t.select(this)}),O=0;O<ie.length;O++)Y=R._plots[ie[O]],ee=Y.xaxis,Q=Y.yaxis,Y.bg&&ee._offset!==void 0&&Q._offset!==void 0&&Y.bg.call(s.setRect,ee._offset-N,Q._offset-N,ee._length+2*N,Q._length+2*N).call(i.fill,R.plot_bgcolor).style("stroke-width",0);if(!R._hasOnlyLargeSploms)for($ in R._plots){Y=R._plots[$],ee=Y.xaxis,Q=Y.yaxis;var de=Y.clipId="clip"+R._uid+$+"plot",Me=n.ensureSingleById(R._clips,"clipPath",de,function(qt){qt.classed("plotclip",!0).append("rect")});Y.clipRect=Me.select("rect").attr({width:ee._length,height:Q._length}),s.setTranslate(Y.plot,ee._offset,Q._offset);var Ie,Ee;Y._hasClipOnAxisFalse?(Ie=null,Ee=de):(Ie=de,Ee=null),s.setClipUrl(Y.plot,Ie,I),Y.layerClipId=Ee}var qe,be,oe,ce,ue,Re,Xe,Ke,vt,Ze,Qe,Je,je;function $e(qt){return"M"+qe+","+qt+"H"+be}function Ye(qt){return"M"+ee._offset+","+qt+"h"+ee._length}function yt(qt){return"M"+qt+","+Ke+"V"+Xe}function _t(qt){return"M"+qt+","+Q._offset+"v"+Q._length}function Pt(qt,Xt,Or){if(!qt.showline||$!==qt._mainSubplot)return"";if(!qt._anchorAxis)return Or(qt._mainLinePosition);var Br=Xt(qt._mainLinePosition);return qt.mirror&&(Br+=Xt(qt._mainMirrorPosition)),Br}for($ in R._plots){Y=R._plots[$],ee=Y.xaxis,Q=Y.yaxis;var Tt="M0,0";M(ee,$)&&(ue=A(ee,"left",Q,D),qe=ee._offset-(ue?N+ue:0),Re=A(ee,"right",Q,D),be=ee._offset+ee._length+(Re?N+Re:0),oe=Z(ee,Q,"bottom"),ce=Z(ee,Q,"top"),je=!ee._anchorAxis||$!==ee._mainSubplot,je&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[$]=[oe,ce]),Tt=Pt(ee,$e,Ye),je&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(Tt+=$e(oe)+$e(ce)),Y.xlines.style("stroke-width",ee._lw+"px").call(i.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),Y.xlines.attr("d",Tt);var Ot="M0,0";M(Q,$)&&(Qe=A(Q,"bottom",ee,D),Xe=Q._offset+Q._length+(Qe?N:0),Je=A(Q,"top",ee,D),Ke=Q._offset-(Je?N:0),vt=Z(Q,ee,"left"),Ze=Z(Q,ee,"right"),je=!Q._anchorAxis||$!==Q._mainSubplot,je&&(Q.mirror==="allticks"||Q.mirror==="all")&&(Q._linepositions[$]=[vt,Ze]),Ot=Pt(Q,yt,_t),je&&Q.showline&&(Q.mirror==="all"||Q.mirror==="allticks")&&(Ot+=yt(vt)+yt(Ze)),Y.ylines.style("stroke-width",Q._lw+"px").call(i.stroke,Q.showline?Q.linecolor:"rgba(0,0,0,0)")),Y.ylines.attr("d",Ot)}return f.makeClipPaths(I),a.previousPromises(I)}function M(I,R){return(I.ticks||I.showline)&&(R===I._mainSubplot||I.mirror==="all"||I.mirror==="allticks")}function w(I,R,B){if(!B.showline||!B._lw)return!1;if(B.mirror==="all"||B.mirror==="allticks")return!0;var N=B._anchorAxis;if(!N)return!1;var D=c.FROM_BL[R];return B.side===R?N.domain[D]===I.domain[D]:B.mirror&&N.domain[1-D]===I.domain[1-D]}function A(I,R,B,N){if(w(I,R,B))return B._lw;for(var D=0;D<N.length;D++){var O=N[D];if(O._mainAxis===B._mainAxis&&w(I,R,O))return O._lw}return 0}e.drawMainTitle=function(I){var R=I._fullLayout,B=L(R),N=C(R);l.draw(I,"gtitle",{propContainer:R,propName:"title.text",placeholder:R._dfltTitle.plot,attributes:{x:k(R,B),y:T(R,N),"text-anchor":B,dy:N}})};function k(I,R){var B=I.title,N=I._size,D=0;switch(R===g?D=B.pad.l:R===y&&(D=-B.pad.r),B.xref){case"paper":return N.l+N.w*B.x+D;case"container":default:return I.width*B.x+D}}function T(I,R){var B=I.title,N=I._size,D=0;if(R==="0em"||!R?D=-B.pad.b:R===c.CAP_SHIFT+"em"&&(D=B.pad.t),B.y==="auto")return N.t/2;switch(B.yref){case"paper":return N.t+N.h-N.h*B.y+D;case"container":default:return I.height-I.height*B.y+D}}function L(I){var R=I.title,B=m;return n.isRightAnchor(R)?B=y:n.isLeftAnchor(R)&&(B=g),B}function C(I){var R=I.title,B="0em";return n.isTopAnchor(R)?B=c.CAP_SHIFT+"em":n.isMiddleAnchor(R)&&(B=c.MID_SHIFT+"em"),B}e.doTraceStyle=function(I){var R=I.calcdata,B=[],N;for(N=0;N<R.length;N++){var D=R[N],O=D[0]||{},$=O.trace||{},Y=$._module||{},X=Y.arraysToCalcdata;X&&X(D,$);var ee=Y.editStyle;ee&&B.push({fn:ee,cd0:O})}if(B.length){for(N=0;N<B.length;N++){var Q=B[N];Q.fn(I,Q.cd0)}o(I),e.redrawReglTraces(I)}return a.style(I),r.getComponentMethod("legend","draw")(I),a.previousPromises(I)},e.doColorBars=function(I){return r.getComponentMethod("colorbar","draw")(I),a.previousPromises(I)},e.layoutReplot=function(I){var R=I.layout;return I.layout=void 0,r.call("_doPlot",I,"",R)},e.doLegend=function(I){return r.getComponentMethod("legend","draw")(I),a.previousPromises(I)},e.doTicksRelayout=function(I){return f.draw(I,"redraw"),I._fullLayout._hasOnlyLargeSploms&&(r.subplotsRegistry.splom.updateGrid(I),o(I),e.redrawReglTraces(I)),e.drawMainTitle(I),a.previousPromises(I)},e.doModeBar=function(I){var R=I._fullLayout;u.manage(I);for(var B=0;B<R._basePlotModules.length;B++){var N=R._basePlotModules[B].updateFx;N&&N(I)}return a.previousPromises(I)},e.doCamera=function(I){for(var R=I._fullLayout,B=R._subplots.gl3d,N=0;N<B.length;N++){var D=R[B[N]],O=D._scene;O.setViewport(D)}},e.drawData=function(I){var R=I._fullLayout;o(I);for(var B=R._basePlotModules,N=0;N<B.length;N++)B[N].plot(I);return e.redrawReglTraces(I),a.style(I),r.getComponentMethod("shapes","draw")(I),r.getComponentMethod("annotations","draw")(I),r.getComponentMethod("images","draw")(I),R._replotting=!1,a.previousPromises(I)},e.redrawReglTraces=function(I){var R=I._fullLayout;if(R._has("regl")){var B=I._fullData,N=[],D=[],O,$;for(R._hasOnlyLargeSploms&&R._splomGrid.draw(),O=0;O<B.length;O++){var Y=B[O];Y.visible===!0&&Y._length!==0&&(Y.type==="splom"?R._splomScenes[Y.uid].draw():Y.type==="scattergl"?n.pushUnique(N,Y.xaxis+Y.yaxis):Y.type==="scatterpolargl"&&n.pushUnique(D,Y.subplot))}for(O=0;O<N.length;O++)$=R._plots[N[O]],$._scene&&$._scene.draw();for(O=0;O<D.length;O++)$=R[D[O]]._subplot,$._scene&&$._scene.draw()}},e.doAutoRangeAndConstraints=function(I){for(var R=f.list(I,"",!0),B,N={},D=0;D<R.length;D++)if(B=R[D],!N[B._id]){N[B._id]=1,p(I,B),d(I,B);var O=B._matchGroup;if(O)for(var $ in O){var Y=f.getFromId(I,$);d(I,Y,B.range),N[$]=1}}v(I)},e.finalDraw=function(I){r.getComponentMethod("rangeslider","draw")(I),r.getComponentMethod("rangeselector","draw")(I)},e.drawMarginPushers=function(I){r.getComponentMethod("legend","draw")(I),r.getComponentMethod("rangeselector","draw")(I),r.getComponentMethod("sliders","draw")(I),r.getComponentMethod("updatemenus","draw")(I),r.getComponentMethod("colorbar","draw")(I)}})(ET);function h6e(){var e,t=0,r=!1;function a(n,o){return e.list.push({type:n,data:o?JSON.parse(JSON.stringify(o)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(n,o){return a("check",{seg1:n,seg2:o})},segmentChop:function(n,o){return a("div_seg",{seg:n,pt:o}),a("chop",{seg:n,pt:o})},statusRemove:function(n){return a("pop_seg",{seg:n})},segmentUpdate:function(n){return a("seg_update",{seg:n})},segmentNew:function(n,o){return a("new_seg",{seg:n,primary:o})},segmentRemove:function(n){return a("rem_seg",{seg:n})},tempStatus:function(n,o,i){return a("temp_status",{seg:n,above:o,below:i})},rewind:function(n){return a("rewind",{seg:n})},status:function(n,o,i){return a("status",{seg:n,above:o,below:i})},vert:function(n){return n===r?e:(r=n,a("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),a("log",{txt:n})},reset:function(){return a("reset")},selected:function(n){return a("selected",{segs:n})},chainStart:function(n){return a("chain_start",{seg:n})},chainRemoveHead:function(n,o){return a("chain_rem_head",{index:n,pt:o})},chainRemoveTail:function(n,o){return a("chain_rem_tail",{index:n,pt:o})},chainNew:function(n,o){return a("chain_new",{pt1:n,pt2:o})},chainMatch:function(n){return a("chain_match",{index:n})},chainClose:function(n){return a("chain_close",{index:n})},chainAddHead:function(n,o){return a("chain_add_head",{index:n,pt:o})},chainAddTail:function(n,o){return a("chain_add_tail",{index:n,pt:o})},chainConnect:function(n,o){return a("chain_con",{index1:n,index2:o})},chainReverse:function(n){return a("chain_rev",{index:n})},chainJoin:function(n,o){return a("chain_join",{index1:n,index2:o})},done:function(){return a("done")}},e}var v6e=h6e;function d6e(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,a,n){var o=a[0],i=a[1],s=n[0],l=n[1],u=r[0],f=r[1];return(s-o)*(f-i)-(l-i)*(u-o)>=-e},pointBetween:function(r,a,n){var o=r[1]-a[1],i=n[0]-a[0],s=r[0]-a[0],l=n[1]-a[1],u=s*i+o*l;if(u<e)return!1;var f=i*i+l*l;return!(u-f>-e)},pointsSameX:function(r,a){return Math.abs(r[0]-a[0])<e},pointsSameY:function(r,a){return Math.abs(r[1]-a[1])<e},pointsSame:function(r,a){return t.pointsSameX(r,a)&&t.pointsSameY(r,a)},pointsCompare:function(r,a){return t.pointsSameX(r,a)?t.pointsSameY(r,a)?0:r[1]<a[1]?-1:1:r[0]<a[0]?-1:1},pointsCollinear:function(r,a,n){var o=r[0]-a[0],i=r[1]-a[1],s=a[0]-n[0],l=a[1]-n[1];return Math.abs(o*l-s*i)<e},linesIntersect:function(r,a,n,o){var i=a[0]-r[0],s=a[1]-r[1],l=o[0]-n[0],u=o[1]-n[1],f=i*u-s*l;if(Math.abs(f)<e)return!1;var c=r[0]-n[0],h=r[1]-n[1],v=(l*h-u*c)/f,p=(i*h-s*c)/f,d={alongA:0,alongB:0,pt:[r[0]+v*i,r[1]+v*s]};return v<=-e?d.alongA=-2:v<e?d.alongA=-1:v-1<=-e?d.alongA=0:v-1<e?d.alongA=1:d.alongA=2,p<=-e?d.alongB=-2:p<e?d.alongB=-1:p-1<=-e?d.alongB=0:p-1<e?d.alongB=1:d.alongB=2,d},pointInsideRegion:function(r,a){for(var n=r[0],o=r[1],i=a[a.length-1][0],s=a[a.length-1][1],l=!1,u=0;u<a.length;u++){var f=a[u][0],c=a[u][1];c-o>e!=s-o>e&&(i-f)*(o-c)/(s-c)+f-n>e&&(l=!l),i=f,s=c}return l}};return t}var p6e=d6e,g6e={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var a=e.root,n=e.root.next;n!==null;){if(r(n)){t.prev=n.prev,t.next=n,n.prev.next=t,n.prev=t;return}a=n,n=n.next}a.next=t,t.prev=a,t.next=null},findTransition:function(t){for(var r=e.root,a=e.root.next;a!==null&&!t(a);)r=a,a=a.next;return{before:r===e.root?null:r,after:a,insert:function(n){return n.prev=r,n.next=a,r.next=n,a!==null&&(a.prev=n),n}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}},m6e=g6e,PT=m6e;function y6e(e,t,r){function a(p,d){return{id:r?r.segmentId():-1,start:p,end:d,myFill:{above:null,below:null},otherFill:null}}function n(p,d,g){return{id:r?r.segmentId():-1,start:p,end:d,myFill:{above:g.myFill.above,below:g.myFill.below},otherFill:null}}var o=PT.create();function i(p,d,g,m,y,_){var S=t.pointsCompare(d,y);return S!==0?S:t.pointsSame(g,_)?0:p!==m?p?1:-1:t.pointAboveOrOnLine(g,m?y:_,m?_:y)?1:-1}function s(p,d){o.insertBefore(p,function(g){var m=i(p.isStart,p.pt,d,g.isStart,g.pt,g.other.pt);return m<0})}function l(p,d){var g=PT.node({isStart:!0,pt:p.start,seg:p,primary:d,other:null,status:null});return s(g,p.end),g}function u(p,d,g){var m=PT.node({isStart:!1,pt:d.end,seg:d,primary:g,other:p,status:null});p.other=m,s(m,p.pt)}function f(p,d){var g=l(p,d);return u(g,p,d),g}function c(p,d){r&&r.segmentChop(p.seg,d),p.other.remove(),p.seg.end=d,p.other.pt=d,s(p.other,p.pt)}function h(p,d){var g=n(d,p.seg.end,p.seg);return c(p,d),f(g,p.primary)}function v(p,d){var g=PT.create();function m(B,N){var D=B.seg.start,O=B.seg.end,$=N.seg.start,Y=N.seg.end;return t.pointsCollinear(D,$,Y)?t.pointsCollinear(O,$,Y)||t.pointAboveOrOnLine(O,$,Y)?1:-1:t.pointAboveOrOnLine(D,$,Y)?1:-1}function y(B){return g.findTransition(function(N){var D=m(B,N.ev);return D>0})}function _(B,N){var D=B.seg,O=N.seg,$=D.start,Y=D.end,X=O.start,ee=O.end;r&&r.checkIntersection(D,O);var Q=t.linesIntersect($,Y,X,ee);if(Q===!1){if(!t.pointsCollinear($,Y,X)||t.pointsSame($,ee)||t.pointsSame(Y,X))return!1;var Z=t.pointsSame($,X),q=t.pointsSame(Y,ee);if(Z&&q)return N;var ae=!Z&&t.pointBetween($,X,ee),ie=!q&&t.pointBetween(Y,X,ee);if(Z)return ie?h(N,Y):h(B,ee),N;ae&&(q||(ie?h(N,Y):h(B,ee)),h(N,$))}else Q.alongA===0&&(Q.alongB===-1?h(B,X):Q.alongB===0?h(B,Q.pt):Q.alongB===1&&h(B,ee)),Q.alongB===0&&(Q.alongA===-1?h(N,$):Q.alongA===0?h(N,Q.pt):Q.alongA===1&&h(N,Y));return!1}for(var S=[];!o.isEmpty();){var M=o.getHead();if(r&&r.vert(M.pt[0]),M.isStart){let B=function(){if(A){var N=_(M,A);if(N)return N}return k?_(M,k):!1};r&&r.segmentNew(M.seg,M.primary);var w=y(M),A=w.before?w.before.ev:null,k=w.after?w.after.ev:null;r&&r.tempStatus(M.seg,A?A.seg:!1,k?k.seg:!1);var T=B();if(T){if(e){var L;M.seg.myFill.below===null?L=!0:L=M.seg.myFill.above!==M.seg.myFill.below,L&&(T.seg.myFill.above=!T.seg.myFill.above)}else T.seg.otherFill=M.seg.myFill;r&&r.segmentUpdate(T.seg),M.other.remove(),M.remove()}if(o.getHead()!==M){r&&r.rewind(M.seg);continue}if(e){var L;M.seg.myFill.below===null?L=!0:L=M.seg.myFill.above!==M.seg.myFill.below,k?M.seg.myFill.below=k.seg.myFill.above:M.seg.myFill.below=p,L?M.seg.myFill.above=!M.seg.myFill.below:M.seg.myFill.above=M.seg.myFill.below}else if(M.seg.otherFill===null){var C;k?M.primary===k.primary?C=k.seg.otherFill.above:C=k.seg.myFill.above:C=M.primary?d:p,M.seg.otherFill={above:C,below:C}}r&&r.status(M.seg,A?A.seg:!1,k?k.seg:!1),M.other.status=w.insert(PT.node({ev:M}))}else{var I=M.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(g.exists(I.prev)&&g.exists(I.next)&&_(I.prev.ev,I.next.ev),r&&r.statusRemove(I.ev.seg),I.remove(),!M.primary){var R=M.seg.myFill;M.seg.myFill=M.seg.otherFill,M.seg.otherFill=R}S.push(M.seg)}o.getHead().remove()}return r&&r.done(),S}return e?{addRegion:function(p){for(var d,g=p[p.length-1],m=0;m<p.length;m++){d=g,g=p[m];var y=t.pointsCompare(d,g);y!==0&&f(a(y<0?d:g,y<0?g:d),!0)}},calculate:function(p){return v(p,!1)}}:{calculate:function(p,d,g,m){return p.forEach(function(y){f(n(y.start,y.end,y),!0)}),g.forEach(function(y){f(n(y.start,y.end,y),!1)}),v(d,m)}}}var x6e=y6e;function b6e(e,t,r){var a=[],n=[];return e.forEach(function(o){var i=o.start,s=o.end;if(t.pointsSame(i,s)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(o);var l={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},f=l;function c(I,R,B){return f.index=I,f.matches_head=R,f.matches_pt1=B,f===l?(f=u,!1):(f=null,!0)}for(var h=0;h<a.length;h++){var v=a[h],p=v[0];v[1];var d=v[v.length-1];if(v[v.length-2],t.pointsSame(p,i)){if(c(h,!0,!0))break}else if(t.pointsSame(p,s)){if(c(h,!0,!1))break}else if(t.pointsSame(d,i)){if(c(h,!1,!0))break}else if(t.pointsSame(d,s)&&c(h,!1,!1))break}if(f===l){a.push([i,s]),r&&r.chainNew(i,s);return}if(f===u){r&&r.chainMatch(l.index);var g=l.index,m=l.matches_pt1?s:i,y=l.matches_head,v=a[g],_=y?v[0]:v[v.length-1],S=y?v[1]:v[v.length-2],M=y?v[v.length-1]:v[0],w=y?v[v.length-2]:v[1];if(t.pointsCollinear(S,_,m)&&(y?(r&&r.chainRemoveHead(l.index,m),v.shift()):(r&&r.chainRemoveTail(l.index,m),v.pop()),_=S),t.pointsSame(M,m)){a.splice(g,1),t.pointsCollinear(w,M,_)&&(y?(r&&r.chainRemoveTail(l.index,_),v.pop()):(r&&r.chainRemoveHead(l.index,_),v.shift())),r&&r.chainClose(l.index),n.push(v);return}y?(r&&r.chainAddHead(l.index,m),v.unshift(m)):(r&&r.chainAddTail(l.index,m),v.push(m));return}function A(I){r&&r.chainReverse(I),a[I].reverse()}function k(I,R){var B=a[I],N=a[R],D=B[B.length-1],O=B[B.length-2],$=N[0],Y=N[1];t.pointsCollinear(O,D,$)&&(r&&r.chainRemoveTail(I,D),B.pop(),D=O),t.pointsCollinear(D,$,Y)&&(r&&r.chainRemoveHead(R,$),N.shift()),r&&r.chainJoin(I,R),a[I]=B.concat(N),a.splice(R,1)}var T=l.index,L=u.index;r&&r.chainConnect(T,L);var C=a[T].length<a[L].length;l.matches_head?u.matches_head?C?(A(T),k(T,L)):(A(L),k(L,T)):k(L,T):u.matches_head?k(T,L):C?(A(T),k(L,T)):(A(L),k(T,L))}),n}var _6e=b6e;function IT(e,t,r){var a=[];return e.forEach(function(n){var o=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);t[o]!==0&&a.push({id:r?r.segmentId():-1,start:n.start,end:n.end,myFill:{above:t[o]===1,below:t[o]===2},otherFill:null})}),r&&r.selected(a),a}var w6e={union:function(e,t){return IT(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return IT(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return IT(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return IT(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return IT(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}},T6e=w6e,A6e={toPolygon:function(e,t){function r(o){if(o.length<=0)return e.segments({inverted:!1,regions:[]});function i(u){var f=u.slice(0,u.length-1);return e.segments({inverted:!1,regions:[f]})}for(var s=i(o[0]),l=1;l<o.length;l++)s=e.selectDifference(e.combine(s,i(o[l])));return s}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var a=e.segments({inverted:!1,regions:[]}),n=0;n<t.coordinates.length;n++)a=e.selectUnion(e.combine(a,r(t.coordinates[n])));return e.polygon(a)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function a(v,p){return t.pointInsideRegion([(v[0][0]+v[1][0])*.5,(v[0][1]+v[1][1])*.5],p)}function n(v){return{region:v,children:[]}}var o=n(null);function i(v,p){for(var d=0;d<v.children.length;d++){var g=v.children[d];if(a(p,g.region)){i(g,p);return}}for(var m=n(p),d=0;d<v.children.length;d++){var g=v.children[d];a(g.region,p)&&(m.children.push(g),v.children.splice(d,1),d--)}v.children.push(m)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||i(o,l)}function u(v,p){for(var d=0,g=v[v.length-1][0],m=v[v.length-1][1],y=[],_=0;_<v.length;_++){var S=v[_][0],M=v[_][1];y.push([S,M]),d+=M*g-S*m,g=S,m=M}var w=d<0;return w!==p&&y.reverse(),y.push([y[0][0],y[0][1]]),y}var f=[];function c(v){var p=[u(v.region,!1)];f.push(p);for(var d=0;d<v.children.length;d++)p.push(h(v.children[d]))}function h(v){for(var p=0;p<v.children.length;p++)c(v.children[p]);return u(v.region,!0)}for(var s=0;s<o.children.length;s++)c(o.children[s]);return f.length<=0?{type:"Polygon",coordinates:[]}:f.length==1?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}},S6e=A6e;/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var M6e=v6e,k6e=p6e,UJ=x6e,E6e=_6e,DT=T6e,HJ=S6e,Rv=!1,RT=k6e(),sh;sh={buildLog:function(e){return e===!0?Rv=M6e():e===!1&&(Rv=!1),Rv===!1?!1:Rv.list},epsilon:function(e){return RT.epsilon(e)},segments:function(e){var t=UJ(!0,RT,Rv);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=UJ(!1,RT,Rv);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:DT.union(e.combined,Rv),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:DT.intersect(e.combined,Rv),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:DT.difference(e.combined,Rv),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:DT.differenceRev(e.combined,Rv),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:DT.xor(e.combined,Rv),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:E6e(e.segments,RT,Rv),inverted:e.inverted}},polygonFromGeoJSON:function(e){return HJ.toPolygon(sh,e)},polygonToGeoJSON:function(e){return HJ.fromPolygon(sh,RT,e)},union:function(e,t){return zT(e,t,sh.selectUnion)},intersect:function(e,t){return zT(e,t,sh.selectIntersect)},difference:function(e,t){return zT(e,t,sh.selectDifference)},differenceRev:function(e,t){return zT(e,t,sh.selectDifferenceRev)},xor:function(e,t){return zT(e,t,sh.selectXor)}};function zT(e,t,r){var a=sh.segments(e),n=sh.segments(t),o=sh.combine(a,n),i=r(o);return sh.polygon(i)}typeof window=="object"&&(window.PolyBool=sh);var C6e=sh,FT={exports:{}},CF=x5.dot,DE=Un.BADNUM,RE=FT.exports={};RE.tester=function(t){var r=t.slice(),a=r[0][0],n=a,o=r[0][1],i=o,s;for(r.push(r[0]),s=1;s<r.length;s++)a=Math.min(a,r[s][0]),n=Math.max(n,r[s][0]),o=Math.min(o,r[s][1]),i=Math.max(i,r[s][1]);var l=!1,u;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,u=function(p){return p[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,u=function(p){return p[1]===r[0][1]}));function f(p,d){var g=p[0],m=p[1];return!(g===DE||g<a||g>n||m===DE||m<o||m>i||d&&u(p))}function c(p,d){var g=p[0],m=p[1];if(g===DE||g<a||g>n||m===DE||m<o||m>i)return!1;var y=r.length,_=r[0][0],S=r[0][1],M=0,w,A,k,T,L;for(w=1;w<y;w++)if(A=_,k=S,_=r[w][0],S=r[w][1],T=Math.min(A,_),!(g<T||g>Math.max(A,_)||m>Math.max(k,S)))if(m<Math.min(k,S))g!==T&&M++;else{if(_===A?L=m:L=k+(g-A)*(S-k)/(_-A),m===L)return!(w===1&&d);m<=L&&g!==T&&M++}return M%2==1}var h=!0,v=r[0];for(s=1;s<r.length;s++)if(v[0]!==r[s][0]||v[1]!==r[s][1]){h=!1;break}return{xmin:a,xmax:n,ymin:o,ymax:i,pts:r,contains:l?f:c,isRect:l,degenerate:h}};RE.isSegmentBent=function(t,r,a,n){var o=t[r],i=[t[a][0]-o[0],t[a][1]-o[1]],s=CF(i,i),l=Math.sqrt(s),u=[-i[1]/l,i[0]/l],f,c,h;for(f=r+1;f<a;f++)if(c=[t[f][0]-o[0],t[f][1]-o[1]],h=CF(c,i),h<0||h>s||Math.abs(CF(c,u))>n)return!0;return!1};RE.filter=function(t,r){var a=[t[0]],n=0,o=0;function i(l){t.push(l);var u=a.length,f=n;a.splice(o+1);for(var c=f+1;c<t.length;c++)(c===t.length-1||RE.isSegmentBent(t,f,c+1,r))&&(a.push(t[c]),a.length<u-2&&(n=c,o=a.length-1),f=c)}if(t.length>1){var s=t.pop();i(s)}return{addPt:i,raw:t,filtered:a}};var GJ=C6e,VJ=Pa,L6e=xn.exports.dashStyle,jJ=Oa.exports,P6e=Rs,I6e=oh.makeEventData,OT=Jp,D6e=OT.freeMode,R6e=OT.rectMode,zE=OT.drawMode,LF=OT.openMode,z6e=OT.selectMode,qJ=cJ,PF=CT.handleEllipse,F6e=uJ,IF=bt.exports,DF=FT.exports,NT=k5,YJ=As.getFromId,O6e=wE,N6e=ET.redrawReglTraces,FE=Sl,t0=FE.MINSELECT,B6e=DF.filter,$6e=DF.tester,WJ=uT.clearSelect,RF=cF,XJ=RF.p2r,U6e=RF.axValue,H6e=RF.getTransform;function G6e(e,t,r,a,n){var o=D6e(n),i=R6e(n),s=LF(n),l=zE(n),u=z6e(n),f=n==="drawline",c=n==="drawcircle",h=f||c,v=a.gd,p=v._fullLayout,d=p._zoomlayer,g=a.element.getBoundingClientRect(),m=a.plotinfo,y=H6e(m),_=t-g.left,S=r-g.top;p._calcInverseTransform(v);var M=IF.apply3DTransform(p._invTransform)(_,S);_=M[0],S=M[1];var w=p._invScaleX,A=p._invScaleY,k=_,T=S,L="M"+_+","+S,C=a.xaxes[0]._length,I=a.yaxes[0]._length,R=a.xaxes.concat(a.yaxes),B=e.altKey&&!(zE(n)&&s),N,D,O,$,Y,X,ee;JJ(e,v,a),o&&(N=B6e([[_,S]],FE.BENDPX));var Q=d.selectAll("path.select-outline-"+m.id).data(l?[0]:[1,2]),Z=p.newshape;Q.enter().append("path").attr("class",function(xe){return"select-outline select-outline-"+xe+" select-outline-"+m.id}).style(l?{opacity:Z.opacity/2,fill:s?void 0:Z.fillcolor,stroke:Z.line.color,"stroke-dasharray":L6e(Z.line.dash,Z.line.width),"stroke-width":Z.line.width+"px"}:{}).attr("fill-rule",Z.fillrule).classed("cursor-move",!!l).attr("transform",y).attr("d",L+"Z");var q=d.append("path").attr("class","zoombox-corners").style({fill:jJ.background,stroke:jJ.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z"),ae=p._uid+FE.SELECTID,ie=[],we=QJ(v,a.xaxes,a.yaxes,a.subplot);function Te(xe,Se){return xe-Se}var he;m.fillRangeItems?he=m.fillRangeItems:i?he=function(xe,Se){var ye=xe.range={};for(Y=0;Y<R.length;Y++){var re=R[Y],se=re._id.charAt(0);ye[re._id]=[XJ(re,Se[se+"min"]),XJ(re,Se[se+"max"])].sort(Te)}}:he=function(xe,Se,ye){var re=xe.lassoPoints={};for(Y=0;Y<R.length;Y++){var se=R[Y];re[se._id]=ye.filtered.map(U6e(se))}},a.moveFn=function(xe,Se){k=Math.max(0,Math.min(C,w*xe+_)),T=Math.max(0,Math.min(I,A*Se+S));var ye=Math.abs(k-_),re=Math.abs(T-S);if(i){var se,de,Me;if(u){var Ie=p.selectdirection;switch(Ie==="any"?re<Math.min(ye*.6,t0)?se="h":ye<Math.min(re*.6,t0)?se="v":se="d":se=Ie,se){case"h":de=c?I/2:0,Me=I;break;case"v":de=c?C/2:0,Me=C;break}}if(l)switch(p.newshape.drawdirection){case"vertical":se="h",de=c?I/2:0,Me=I;break;case"horizontal":se="v",de=c?C/2:0,Me=C;break;case"ortho":ye<re?(se="h",de=S,Me=T):(se="v",de=_,Me=k);break;default:se="d"}se==="h"?($=h?PF(c,[k,de],[k,Me]):[[_,de],[_,Me],[k,Me],[k,de]],$.xmin=h?k:Math.min(_,k),$.xmax=h?k:Math.max(_,k),$.ymin=Math.min(de,Me),$.ymax=Math.max(de,Me),q.attr("d","M"+$.xmin+","+(S-t0)+"h-4v"+2*t0+"h4ZM"+($.xmax-1)+","+(S-t0)+"h4v"+2*t0+"h-4Z")):se==="v"?($=h?PF(c,[de,T],[Me,T]):[[de,S],[de,T],[Me,T],[Me,S]],$.xmin=Math.min(de,Me),$.xmax=Math.max(de,Me),$.ymin=h?T:Math.min(S,T),$.ymax=h?T:Math.max(S,T),q.attr("d","M"+(_-t0)+","+$.ymin+"v-4h"+2*t0+"v4ZM"+(_-t0)+","+($.ymax-1)+"v4h"+2*t0+"v-4Z")):se==="d"&&($=h?PF(c,[_,S],[k,T]):[[_,S],[_,T],[k,T],[k,S]],$.xmin=Math.min(_,k),$.xmax=Math.max(_,k),$.ymin=Math.min(S,T),$.ymax=Math.max(S,T),q.attr("d","M0,0Z"))}else o&&(N.addPt([k,T]),$=N.filtered);a.selectionDefs&&a.selectionDefs.length?(O=Z6e(a.mergedPolygons,$,B),$.subtract=B,D=KJ(a.selectionDefs.concat([$]))):(O=[$],D=$6e($)),qJ(rQ(O,s),Q,a),u&&NT.throttle(ae,FE.SELECTDELAY,function(){ie=[];var Ee,qe;for(Y=0;Y<we.length;Y++)if(X=we[Y],qe=X._module.selectPoints(X,D),Ee=tQ(qe,X),ie.length)for(var be=0;be<Ee.length;be++)ie.push(Ee[be]);else ie=Ee;ee={points:ie},OE(v,we,ee),he(ee,$,N),a.gd.emit("plotly_selecting",ee)})},a.clickFn=function(xe,Se){if(q.remove(),v._fullLayout._activeShapeIndex>=0){v._fullLayout._deactivateShape(v);return}if(!l){var ye=p.clickmode;NT.done(ae).then(function(){if(NT.clear(ae),xe===2){for(Q.remove(),Y=0;Y<we.length;Y++)X=we[Y],X._module.selectPoints(X,!1);OE(v,we),BT(a),v.emit("plotly_deselect",null)}else ye.indexOf("select")>-1&&ZJ(Se,v,a.xaxes,a.yaxes,a.subplot,a,Q),ye==="event"&&v.emit("plotly_selected",void 0);P6e.click(v,Se)}).catch(IF.error)}},a.doneFn=function(){q.remove(),NT.done(ae).then(function(){NT.clear(ae),a.gd.emit("plotly_selected",ee),$&&a.selectionDefs&&($.subtract=B,a.selectionDefs.push($),a.mergedPolygons.length=0,[].push.apply(a.mergedPolygons,O)),a.doneFnCompleted&&a.doneFnCompleted(ie)}).catch(IF.error),l&&BT(a)}}function ZJ(e,t,r,a,n,o,i){var s=t._hoverdata,l=t._fullLayout,u=l.clickmode,f=u.indexOf("event")>-1,c=[],h,v,p,d,g,m,y,_,S,M;if(q6e(s)){JJ(e,t,o),h=QJ(t,r,a,n);var w=Y6e(s,h),A=w.pointNumbers.length>0;if(A?W6e(h,w):X6e(h)&&(y=eQ(w))){for(i&&i.remove(),M=0;M<h.length;M++)v=h[M],v._module.selectPoints(v,!1);OE(t,h),BT(o),f&&t.emit("plotly_deselect",null)}else{_=e.shiftKey&&(y!==void 0?y:eQ(w)),p=V6e(w.pointNumber,w.searchInfo,_);var k=o.selectionDefs.concat([p]);for(d=KJ(k),M=0;M<h.length;M++)if(g=h[M]._module.selectPoints(h[M],d),m=tQ(g,h[M]),c.length)for(var T=0;T<m.length;T++)c.push(m[T]);else c=m;if(S={points:c},OE(t,h,S),p&&o&&o.selectionDefs.push(p),i){var L=o.mergedPolygons,C=LF(o.dragmode);qJ(rQ(L,C),i,o)}f&&t.emit("plotly_selected",S)}}}function V6e(e,t,r){return{pointNumber:e,searchInfo:t,subtract:r}}function zF(e){return"pointNumber"in e&&"searchInfo"in e}function j6e(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,a,n){var o=e.searchInfo.cd[0].trace._expandedIndex,i=n.cd[0].trace._expandedIndex;return i===o&&a===e.pointNumber},isRect:!1,degenerate:!1,subtract:e.subtract}}function KJ(e){for(var t=[],r=zF(e[0])?0:e[0][0][0],a=r,n=zF(e[0])?0:e[0][0][1],o=n,i=0;i<e.length;i++)if(zF(e[i]))t.push(j6e(e[i]));else{var s=DF.tester(e[i]);s.subtract=e[i].subtract,t.push(s),r=Math.min(r,s.xmin),a=Math.max(a,s.xmax),n=Math.min(n,s.ymin),o=Math.max(o,s.ymax)}function l(u,f,c,h){for(var v=!1,p=0;p<t.length;p++)t[p].contains(u,f,c,h)&&(v=t[p].subtract===!1);return v}return{xmin:r,xmax:a,ymin:n,ymax:o,pts:[],contains:l,isRect:!1,degenerate:!1}}function JJ(e,t,r){t._fullLayout._drawing=!1;var a=t._fullLayout,n=r.plotinfo,o=r.dragmode,i=a._lastSelectedSubplot&&a._lastSelectedSubplot===n.id,s=(e.shiftKey||e.altKey)&&!(zE(o)&&LF(o));i&&s&&n.selection&&n.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=n.selection.selectionDefs,r.mergedPolygons=n.selection.mergedPolygons):(!s||!n.selection)&&BT(r),i||(WJ(t),a._lastSelectedSubplot=n.id)}function BT(e){var t=e.dragmode,r=e.plotinfo,a=e.gd;if(a._fullLayout._activeShapeIndex>=0&&a._fullLayout._deactivateShape(a),zE(t)){var n=a._fullLayout,o=n._zoomlayer,i=o.selectAll(".select-outline-"+r.id);if(i&&a._fullLayout._drawing){var s=F6e(i,e);s&&VJ.call("_guiRelayout",a,{shapes:s}),a._fullLayout._drawing=!1}}r.selection={},r.selection.selectionDefs=e.selectionDefs=[],r.selection.mergedPolygons=e.mergedPolygons=[]}function QJ(e,t,r,a){var n=[],o=t.map(function(v){return v._id}),i=r.map(function(v){return v._id}),s,l,u;for(u=0;u<e.calcdata.length;u++)if(s=e.calcdata[u],l=s[0].trace,!(l.visible!==!0||!l._module||!l._module.selectPoints))if(a&&(l.subplot===a||l.geo===a))n.push(h(l._module,s,t[0],r[0]));else if(l.type==="splom"&&l._xaxes[o[0]]&&l._yaxes[i[0]]){var f=h(l._module,s,t[0],r[0]);f.scene=e._fullLayout._splomScenes[l.uid],n.push(f)}else if(l.type==="sankey"){var c=h(l._module,s,t[0],r[0]);n.push(c)}else{if(o.indexOf(l.xaxis)===-1||i.indexOf(l.yaxis)===-1)continue;n.push(h(l._module,s,YJ(e,l.xaxis),YJ(e,l.yaxis)))}return n;function h(v,p,d,g){return{_module:v,cd:p,xaxis:d,yaxis:g}}}function q6e(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function Y6e(e,t){var r=e[0],a=-1,n=[],o,i;for(i=0;i<t.length;i++)if(o=t[i],r.fullData._expandedIndex===o.cd[0].trace._expandedIndex){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?a=r.pointNumber:r.binNumber!==void 0&&(a=r.binNumber,n=r.pointNumbers);break}return{pointNumber:a,pointNumbers:n,searchInfo:o}}function eQ(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,a=e.pointNumbers,n=a.length>0,o=n?a[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(o)>-1:!1}function W6e(e,t){var r=[],a,n,o,i;for(i=0;i<e.length;i++)a=e[i],a.cd[0].trace.selectedpoints&&a.cd[0].trace.selectedpoints.length>0&&r.push(a);if(r.length===1&&(o=r[0]===t.searchInfo,o&&(n=t.searchInfo.cd[0].trace,n.selectedpoints.length===t.pointNumbers.length))){for(i=0;i<t.pointNumbers.length;i++)if(n.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}function X6e(e){var t=0,r,a,n;for(n=0;n<e.length;n++)if(r=e[n],a=r.cd[0].trace,a.selectedpoints&&(a.selectedpoints.length>1||(t+=a.selectedpoints.length,t>1)))return!1;return t===1}function OE(e,t,r){var a,n,o,i;for(a=0;a<t.length;a++){var s=t[a].cd[0].trace._fullInput,l=e._fullLayout._tracePreGUI[s.uid]||{};l.selectedpoints===void 0&&(l.selectedpoints=s._input.selectedpoints||null)}if(r){var u=r.points||[];for(a=0;a<t.length;a++)i=t[a].cd[0].trace,i._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(a=0;a<u.length;a++){var f=u[a],c=f.data,h=f.fullData;f.pointIndices?([].push.apply(c.selectedpoints,f.pointIndices),i._fullInput!==i&&[].push.apply(h.selectedpoints,f.pointIndices)):(c.selectedpoints.push(f.pointIndex),i._fullInput!==i&&h.selectedpoints.push(f.pointIndex))}}else for(a=0;a<t.length;a++)i=t[a].cd[0].trace,delete i.selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;var v=!1;for(a=0;a<t.length;a++){n=t[a],o=n.cd,i=o[0].trace,VJ.traceIs(i,"regl")&&(v=!0);var p=n._module,d=p.styleOnSelect||p.style;d&&(d(e,o,o[0].node3),o[0].nodeRangePlot3&&d(e,o,o[0].nodeRangePlot3))}v&&(O6e(e),N6e(e))}function Z6e(e,t,r){var a;return r?(a=GJ.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}),a.regions):(a=GJ.union({regions:e,inverted:!1},{regions:[t],inverted:!1}),a.regions)}function tQ(e,t){if(Array.isArray(e))for(var r=t.cd,a=t.cd[0].trace,n=0;n<e.length;n++)e[n]=I6e(e[n],a,r);return e}function rQ(e,t){for(var r=[],a=0;a<e.length;a++){r[a]=[];for(var n=0;n<e[a].length;n++){r[a][n]=[],r[a][n][0]=n?"L":"M";for(var o=0;o<e[a][n].length;o++)r[a][n].push(e[a][n][o])}t||r[a].push(["Z",r[a][0][1],r[a][0][2]])}return r}var lu={prepSelect:G6e,clearSelect:WJ,clearSelectionsCache:BT,selectOnClick:ZJ},FF=Ra.exports,zv=bt.exports,aQ=zv.numberFormat,K6e=Hl.exports,J6e=vE,NE=Pa,nQ=zv.strTranslate,Q6e=xo,iQ=Oa.exports,py=xn.exports,eRe=Rs,oQ=rn.exports,tRe=Zp,rRe=kf.exports,sQ=Jp,BE=sQ.selectingOrDrawing,aRe=sQ.freeMode,nRe=ou.FROM_TL,iRe=wE,oRe=ET.redrawReglTraces,sRe=Eo.exports,OF=As.getFromId,lRe=lu.prepSelect,uRe=lu.clearSelect,fRe=lu.selectOnClick,NF=FJ,BF=Sl,lQ=BF.MINDRAG,sc=BF.MINZOOM,uQ=!0;function cRe(e,t,r,a,n,o,i,s){var l=e._fullLayout._zoomlayer,u=i+s==="nsew",f=(i+s).length===1,c,h,v,p,d,g,m,y,_,S,M,w,A,k,T,L,C,I,R,B,N,D,O;function $(){if(c=t.xaxis,h=t.yaxis,_=c._length,S=h._length,m=c._offset,y=h._offset,v={},v[c._id]=c,p={},p[h._id]=h,i&&s)for(var $e=t.overlays,Ye=0;Ye<$e.length;Ye++){var yt=$e[Ye].xaxis;v[yt._id]=yt;var _t=$e[Ye].yaxis;p[_t._id]=_t}d=_Q(v),g=_Q(p),A=hQ(d,s),k=hQ(g,i),T=!k&&!A,w=xQ(e,e._fullLayout._axisMatchGroups,v,p),M=xQ(e,e._fullLayout._axisConstraintGroups,v,p,w);var Pt=M.isSubplotConstrained||w.isSubplotConstrained;L=s||Pt,C=i||Pt;var Tt=e._fullLayout;I=Tt._has("scattergl"),R=Tt._has("splom"),B=Tt._has("svg")}$();var Y=dRe(k+A,e._fullLayout.dragmode,u),X=cQ(t,i+s+"drag",Y,r,a,n,o);if(T&&!u)return X.onmousedown=null,X.style.pointerEvents="none",X;var ee={element:X,gd:e,plotinfo:t};ee.prepFn=function($e,Ye,yt){var _t=ee.dragmode,Pt=e._fullLayout.dragmode;Pt!==_t&&(ee.dragmode=Pt),$(),D=e._fullLayout._invScaleX,O=e._fullLayout._invScaleY,T||(u?$e.shiftKey?Pt==="pan"?Pt="zoom":BE(Pt)||(Pt="pan"):$e.ctrlKey&&(Pt="pan"):Pt="pan"),aRe(Pt)?ee.minDrag=1:ee.minDrag=void 0,BE(Pt)?(ee.xaxes=d,ee.yaxes=g,lRe($e,Ye,yt,ee,Pt)):(ee.clickFn=Z,BE(_t)&&Q(),T||(Pt==="zoom"?(ee.moveFn=de,ee.doneFn=Ie,ee.minDrag=1,se($e,Ye,yt)):Pt==="pan"&&(ee.moveFn=ue,ee.doneFn=vt))),e._fullLayout._redrag=function(){var Tt=e._dragdata;if(Tt&&Tt.element===X){var Ot=e._fullLayout.dragmode;BE(Ot)||($(),Ze([0,0,_,S]),ee.moveFn(Tt.dx,Tt.dy))}}};function Q(){ee.plotinfo.selection=!1,uRe(e)}function Z($e,Ye){var yt=ee.gd;if(yt._fullLayout._activeShapeIndex>=0){yt._fullLayout._deactivateShape(yt);return}var _t=yt._fullLayout.clickmode;if(UF(yt),$e===2&&!f&&Ke(),u)_t.indexOf("select")>-1&&fRe(Ye,yt,d,g,t.id,ee),_t.indexOf("event")>-1&&eRe.click(yt,Ye,t.id);else if($e===1&&f){var Pt=i?h:c,Tt=i==="s"||s==="w"?0:1,Ot=Pt._name+".range["+Tt+"]",qt=hRe(Pt,Tt),Xt="left",Or="middle";if(Pt.fixedrange)return;i?(Or=i==="n"?"top":"bottom",Pt.side==="right"&&(Xt="right")):s==="e"&&(Xt="right"),yt._context.showAxisRangeEntryBoxes&&FF.select(X).call(Q6e.makeEditable,{gd:yt,immediate:!0,background:yt._fullLayout.paper_bgcolor,text:String(qt),fill:Pt.tickfont?Pt.tickfont.color:"#444",horizontalAlign:Xt,verticalAlign:Or}).on("edit",function(Br){var Qr=Pt.d2r(Br);Qr!==void 0&&NE.call("_guiRelayout",yt,Ot,Qr)})}}rRe.init(ee);var q,ae,ie,we,Te,he,xe,Se,ye,re;function se($e,Ye,yt){var _t=X.getBoundingClientRect();q=Ye-_t.left,ae=yt-_t.top,e._fullLayout._calcInverseTransform(e);var Pt=zv.apply3DTransform(e._fullLayout._invTransform)(q,ae);q=Pt[0],ae=Pt[1],ie={l:q,r:q,w:0,t:ae,b:ae,h:0},we=e._hmpixcount?e._hmlumcount/e._hmpixcount:K6e(e._fullLayout.plot_bgcolor).getLuminance(),Te="M0,0H"+_+"V"+S+"H0V0",he=!1,xe="xy",re=!1,Se=dQ(l,we,m,y,Te),ye=pQ(l,m,y)}function de($e,Ye){if(e._transitioningWithDuration)return!1;var yt=Math.max(0,Math.min(_,D*$e+q)),_t=Math.max(0,Math.min(S,O*Ye+ae)),Pt=Math.abs(yt-q),Tt=Math.abs(_t-ae);ie.l=Math.min(q,yt),ie.r=Math.max(q,yt),ie.t=Math.min(ae,_t),ie.b=Math.max(ae,_t);function Ot(){xe="",ie.r=ie.l,ie.t=ie.b,ye.attr("d","M0,0Z")}if(M.isSubplotConstrained)Pt>sc||Tt>sc?(xe="xy",Pt/_>Tt/S?(Tt=Pt*S/_,ae>_t?ie.t=ae-Tt:ie.b=ae+Tt):(Pt=Tt*_/S,q>yt?ie.l=q-Pt:ie.r=q+Pt),ye.attr("d",$E(ie))):Ot();else if(w.isSubplotConstrained)if(Pt>sc||Tt>sc){xe="xy";var qt=Math.min(ie.l/_,(S-ie.b)/S),Xt=Math.max(ie.r/_,(S-ie.t)/S);ie.l=qt*_,ie.r=Xt*_,ie.b=(1-qt)*S,ie.t=(1-Xt)*S,ye.attr("d",$E(ie))}else Ot();else!k||Tt<Math.min(Math.max(Pt*.6,lQ),sc)?Pt<lQ||!A?Ot():(ie.t=0,ie.b=S,xe="x",ye.attr("d",pRe(ie,ae))):!A||Pt<Math.min(Tt*.6,sc)?(ie.l=0,ie.r=_,xe="y",ye.attr("d",gRe(ie,q))):(xe="xy",ye.attr("d",$E(ie)));ie.w=ie.r-ie.l,ie.h=ie.b-ie.t,xe&&(re=!0),e._dragged=re,gQ(Se,ye,ie,Te,he,we),Me(),e.emit("plotly_relayouting",N),he=!0}function Me(){N={},(xe==="xy"||xe==="x")&&($F(d,ie.l/_,ie.r/_,N,M.xaxes),Re("x",N)),(xe==="xy"||xe==="y")&&($F(g,(S-ie.b)/S,(S-ie.t)/S,N,M.yaxes),Re("y",N))}function Ie(){Me(),UF(e),vt(),yQ(e)}var Ee=[0,0,_,S],qe=null,be=BF.REDRAWDELAY,oe=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ce($e){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(Q(),e._transitioningWithDuration){$e.preventDefault(),$e.stopPropagation();return}$(),clearTimeout(qe);var Ye=-$e.deltaY;if(isFinite(Ye)||(Ye=$e.wheelDelta/10),!isFinite(Ye)){zv.log("Did not find wheel motion attributes: ",$e);return}var yt=Math.exp(-Math.min(Math.max(Ye,-20),20)/200),_t=oe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Pt=($e.clientX-_t.left)/_t.width,Tt=(_t.bottom-$e.clientY)/_t.height,Ot;function qt(Xt,Or,Br){if(Xt.fixedrange)return;var Qr=zv.simpleMap(Xt.range,Xt.r2l),Sr=Qr[0]+(Qr[1]-Qr[0])*Or;function Zr(Oe){return Xt.l2r(Sr+(Oe-Sr)*Br)}Xt.range=Qr.map(Zr)}if(L){for(s||(Pt=.5),Ot=0;Ot<d.length;Ot++)qt(d[Ot],Pt,yt);Re("x"),Ee[2]*=yt,Ee[0]+=Ee[2]*Pt*(1/yt-1)}if(C){for(i||(Tt=.5),Ot=0;Ot<g.length;Ot++)qt(g[Ot],Tt,yt);Re("y"),Ee[3]*=yt,Ee[1]+=Ee[3]*(1-Tt)*(1/yt-1)}Ze(Ee),Xe(),e.emit("plotly_relayouting",N),qe=setTimeout(function(){!e._fullLayout||(Ee=[0,0,_,S],vt())},be),$e.preventDefault()}i.length*s.length!=1&&bQ(X,ce);function ue($e,Ye){if($e=$e*D,Ye=Ye*O,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,A==="ew"||k==="ns"){var yt=A?-$e:0,_t=k?-Ye:0;if(w.isSubplotConstrained){if(A&&k){var Pt=($e/_-Ye/S)/2;$e=Pt*_,Ye=-Pt*S,yt=-$e,_t=-Ye}k?yt=-_t*_/S:_t=-yt*S/_}A&&(vQ(d,$e),Re("x")),k&&(vQ(g,Ye),Re("y")),Ze([yt,_t,_,S]),Xe(),e.emit("plotly_relayouting",N);return}function Tt(Zr,Oe,it){for(var ft=1-Oe,pt,Dt,Nt=0;Nt<Zr.length;Nt++){var hr=Zr[Nt];if(!hr.fixedrange){pt=hr,Dt=hr._rl[ft]+(hr._rl[Oe]-hr._rl[ft])/vRe(it/hr._length);var fr=hr.l2r(Dt);fr!==!1&&fr!==void 0&&(hr.range[Oe]=fr)}}return pt._length*(pt._rl[Oe]-Dt)/(pt._rl[Oe]-pt._rl[ft])}var Ot=A==="w"==(k==="n")?1:-1;if(A&&k&&(M.isSubplotConstrained||w.isSubplotConstrained)){var qt=($e/_+Ot*Ye/S)/2;$e=qt*_,Ye=Ot*qt*S}var Xt,Or;if(A==="w"?$e=Tt(d,0,$e):A==="e"?$e=Tt(d,1,-$e):A||($e=0),k==="n"?Ye=Tt(g,1,Ye):k==="s"?Ye=Tt(g,0,-Ye):k||(Ye=0),Xt=A==="w"?$e:0,Or=k==="n"?Ye:0,M.isSubplotConstrained&&!w.isSubplotConstrained||w.isSubplotConstrained&&A&&k&&Ot>0){var Br;if(w.isSubplotConstrained||!A&&k.length===1){for(Br=0;Br<d.length;Br++)d[Br].range=d[Br]._r.slice(),NF(d[Br],1-Ye/S);$e=Ye*_/S,Xt=$e/2}if(w.isSubplotConstrained||!k&&A.length===1){for(Br=0;Br<g.length;Br++)g[Br].range=g[Br]._r.slice(),NF(g[Br],1-$e/_);Ye=$e*S/_,Or=Ye/2}}(!w.isSubplotConstrained||!k)&&Re("x"),(!w.isSubplotConstrained||!A)&&Re("y");var Qr=_-$e,Sr=S-Ye;w.isSubplotConstrained&&!(A&&k)&&(A?(Or=Xt?0:$e*S/_,Sr=Qr*S/_):(Xt=Or?0:Ye*_/S,Qr=Sr*_/S)),Ze([Xt,Or,Qr,Sr]),Xe(),e.emit("plotly_relayouting",N)}function Re($e,Ye){for(var yt=w.isSubplotConstrained?{x:g,y:d}[$e]:w[$e+"axes"],_t=w.isSubplotConstrained?{x:d,y:g}[$e]:[],Pt=0;Pt<yt.length;Pt++){var Tt=yt[Pt],Ot=Tt._id,qt=w.xLinks[Ot]||w.yLinks[Ot],Xt=_t[0]||v[qt]||p[qt];Xt&&(Ye?(Ye[Tt._name+".range[0]"]=Ye[Xt._name+".range[0]"],Ye[Tt._name+".range[1]"]=Ye[Xt._name+".range[1]"]):Tt.range=Xt.range.slice())}}function Xe(){var $e=[],Ye;function yt(Tt){for(Ye=0;Ye<Tt.length;Ye++)Tt[Ye].fixedrange||$e.push(Tt[Ye]._id)}for(L&&(yt(d),yt(M.xaxes),yt(w.xaxes)),C&&(yt(g),yt(M.yaxes),yt(w.yaxes)),N={},Ye=0;Ye<$e.length;Ye++){var _t=$e[Ye],Pt=OF(e,_t);oQ.drawOne(e,Pt,{skipTitle:!0}),N[Pt._name+".range[0]"]=Pt.range[0],N[Pt._name+".range[1]"]=Pt.range[1]}oQ.redrawComponents(e,$e)}function Ke(){if(!e._transitioningWithDuration){var $e=e._context.doubleClick,Ye=[];A&&(Ye=Ye.concat(d)),k&&(Ye=Ye.concat(g)),w.xaxes&&(Ye=Ye.concat(w.xaxes)),w.yaxes&&(Ye=Ye.concat(w.yaxes));var yt={},_t,Pt,Tt;if($e==="reset+autosize"){for($e="autosize",Pt=0;Pt<Ye.length;Pt++)if(_t=Ye[Pt],_t._rangeInitial&&(_t.range[0]!==_t._rangeInitial[0]||_t.range[1]!==_t._rangeInitial[1])||!_t._rangeInitial&&!_t.autorange){$e="reset";break}}if($e==="autosize")for(Pt=0;Pt<Ye.length;Pt++)_t=Ye[Pt],_t.fixedrange||(yt[_t._name+".autorange"]=!0);else if($e==="reset")for((A||M.isSubplotConstrained)&&(Ye=Ye.concat(M.xaxes)),k&&!M.isSubplotConstrained&&(Ye=Ye.concat(M.yaxes)),M.isSubplotConstrained&&(A?k||(Ye=Ye.concat(g)):Ye=Ye.concat(d)),Pt=0;Pt<Ye.length;Pt++)_t=Ye[Pt],_t.fixedrange||(_t._rangeInitial?(Tt=_t._rangeInitial,yt[_t._name+".range[0]"]=Tt[0],yt[_t._name+".range[1]"]=Tt[1]):yt[_t._name+".autorange"]=!0);e.emit("plotly_doubleclick",null),NE.call("_guiRelayout",e,yt)}}function vt(){Ze([0,0,_,S]),zv.syncOrAsync([sRe.previousPromises,function(){e._fullLayout._replotting=!1,NE.call("_guiRelayout",e,N)}],e)}function Ze($e){var Ye=e._fullLayout,yt=Ye._plots,_t=Ye._subplots.cartesian,Pt,Tt,Ot,qt;if(R&&NE.subplotsRegistry.splom.drag(e),I){for(Pt=0;Pt<_t.length;Pt++)if(Tt=yt[_t[Pt]],Ot=Tt.xaxis,qt=Tt.yaxis,Tt._scene){var Xt=zv.simpleMap(Ot.range,Ot.r2l),Or=zv.simpleMap(qt.range,qt.r2l);Tt._scene.update({range:[Xt[0],Or[0],Xt[1],Or[1]]})}}if((R||I)&&(iRe(e),oRe(e)),B){var Br=$e[2]/c._length,Qr=$e[3]/h._length;for(Pt=0;Pt<_t.length;Pt++){Tt=yt[_t[Pt]],Ot=Tt.xaxis,qt=Tt.yaxis;var Sr=(L||w.isSubplotConstrained)&&!Ot.fixedrange&&v[Ot._id],Zr=(C||w.isSubplotConstrained)&&!qt.fixedrange&&p[qt._id],Oe,it,ft,pt;if(Sr?(Oe=Br,ft=s||w.isSubplotConstrained?$e[0]:je(Ot,Oe)):w.xaHash[Ot._id]?(Oe=Br,ft=$e[0]*Ot._length/c._length):w.yaHash[Ot._id]?(Oe=Qr,ft=k==="ns"?-$e[1]*Ot._length/h._length:je(Ot,Oe,{n:"top",s:"bottom"}[k])):(Oe=Qe(Ot,Br,Qr),ft=Je(Ot,Oe)),Zr?(it=Qr,pt=i||w.isSubplotConstrained?$e[1]:je(qt,it)):w.yaHash[qt._id]?(it=Qr,pt=$e[1]*qt._length/h._length):w.xaHash[qt._id]?(it=Br,pt=A==="ew"?-$e[0]*qt._length/c._length:je(qt,it,{e:"right",w:"left"}[A])):(it=Qe(qt,Br,Qr),pt=Je(qt,it)),!(!Oe&&!it)){Oe||(Oe=1),it||(it=1);var Dt=Ot._offset-ft/Oe,Nt=qt._offset-pt/it;Tt.clipRect.call(py.setTranslate,ft,pt).call(py.setScale,Oe,it),Tt.plot.call(py.setTranslate,Dt,Nt).call(py.setScale,1/Oe,1/it),(Oe!==Tt.xScaleFactor||it!==Tt.yScaleFactor)&&(py.setPointGroupScale(Tt.zoomScalePts,Oe,it),py.setTextPointsScale(Tt.zoomScaleTxt,Oe,it)),py.hideOutsideRangePoints(Tt.clipOnAxisFalseTraces,Tt),Tt.xScaleFactor=Oe,Tt.yScaleFactor=it}}}}function Qe($e,Ye,yt){return $e.fixedrange?0:L&&M.xaHash[$e._id]?Ye:C&&(M.isSubplotConstrained?M.xaHash:M.yaHash)[$e._id]?yt:0}function Je($e,Ye){return Ye?($e.range=$e._r.slice(),NF($e,Ye),je($e,Ye)):0}function je($e,Ye,yt){return $e._length*(1-Ye)*nRe[yt||$e.constraintoward||"middle"]}return X}function fQ(e,t,r,a){var n=zv.ensureSingle(e.draglayer,t,r,function(o){o.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return n.call(tRe,a),n.node()}function cQ(e,t,r,a,n,o,i){var s=fQ(e,"rect",t,r);return FF.select(s).call(py.setRect,a,n,o,i),s}function hQ(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function hRe(e,t){var r=e.range[t],a=Math.abs(r-e.range[1-t]),n;return e.type==="date"?r:e.type==="log"?(n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3,aQ("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4,aQ("."+String(n)+"g")(r))}function $F(e,t,r,a,n){for(var o=0;o<e.length;o++){var i=e[o];if(!i.fixedrange)if(i.rangebreaks){var s=i._id.charAt(0)==="y",l=s?1-t:t,u=s?1-r:r;a[i._name+".range[0]"]=i.l2r(i.p2l(l*i._length)),a[i._name+".range[1]"]=i.l2r(i.p2l(u*i._length))}else{var f=i._rl[0],c=i._rl[1]-f;a[i._name+".range[0]"]=i.l2r(f+c*t),a[i._name+".range[1]"]=i.l2r(f+c*r)}}if(n&&n.length){var h=(t+(1-r))/2;$F(n,h,1-h,a,[])}}function vQ(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(!a.fixedrange)if(a.rangebreaks){var n=0,o=a._length,i=a.p2l(n+t)-a.p2l(n),s=a.p2l(o+t)-a.p2l(o),l=(i+s)/2;a.range=[a.l2r(a._rl[0]-l),a.l2r(a._rl[1]-l)]}else a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)]}}function vRe(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function dRe(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function dQ(e,t,r,a,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",nQ(r,a)).attr("d",n+"Z")}function pQ(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:iQ.background,stroke:iQ.defaultLine,"stroke-width":1,opacity:0}).attr("transform",nQ(t,r)).attr("d","M0,0Z")}function gQ(e,t,r,a,n,o){e.attr("d",a+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),mQ(e,t,n,o)}function mQ(e,t,r,a){r||(e.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function UF(e){FF.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function yQ(e){uQ&&e.data&&e._context.showTips&&(zv.notifier(zv._(e,"Double-click to zoom back out"),"long"),uQ=!1)}function pRe(e,t){return"M"+(e.l-.5)+","+(t-sc-.5)+"h-3v"+(2*sc+1)+"h3ZM"+(e.r+.5)+","+(t-sc-.5)+"h3v"+(2*sc+1)+"h-3Z"}function gRe(e,t){return"M"+(t-sc-.5)+","+(e.t-.5)+"v-3h"+(2*sc+1)+"v3ZM"+(t-sc-.5)+","+(e.b+.5)+"v3h"+(2*sc+1)+"v-3Z"}function $E(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,sc)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function xQ(e,t,r,a,n){for(var o=!1,i={},s={},l,u,f,c,h=(n||{}).xaHash,v=(n||{}).yaHash,p=0;p<t.length;p++){var d=t[p];for(l in r)if(d[l]){for(f in d)!(n&&(h[f]||v[f]))&&!(f.charAt(0)==="x"?r:a)[f]&&(i[f]=l);for(u in a)!(n&&(h[u]||v[u]))&&d[u]&&(o=!0)}for(u in a)if(d[u])for(c in d)!(n&&(h[c]||v[c]))&&!(c.charAt(0)==="x"?r:a)[c]&&(s[c]=u)}o&&(zv.extendFlat(i,s),s={});var g={},m=[];for(f in i){var y=OF(e,f);m.push(y),g[y._id]=y}var _={},S=[];for(c in s){var M=OF(e,c);S.push(M),_[M._id]=M}return{xaHash:g,yaHash:_,xaxes:m,yaxes:S,xLinks:i,yLinks:s,isSubplotConstrained:o}}function bQ(e,t){if(!J6e)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function _Q(e){var t=[];for(var r in e)t.push(e[r]);return t}var wQ={makeDragBox:cRe,makeDragger:fQ,makeRectDragger:cQ,makeZoombox:dQ,makeCorners:pQ,updateZoombox:gQ,xyCorners:$E,transitionZoombox:mQ,removeZoombox:UF,showDoubleClickNotifier:yQ,attachWheelEventHandler:bQ};(function(e){var t=Ra.exports,r=Rs,a=kf.exports,n=Zp,o=wQ.makeDragBox,i=Sl.DRAGGERSIZE;e.initInteractions=function(l){var u=l._fullLayout;if(l._context.staticPlot){t.select(l).selectAll(".drag").remove();return}if(!(!u._has("cartesian")&&!u._has("splom"))){var f=Object.keys(u._plots||{}).sort(function(h,v){if((u._plots[h].mainplot&&!0)===(u._plots[v].mainplot&&!0)){var p=h.split("y"),d=v.split("y");return p[0]===d[0]?Number(p[1]||1)-Number(d[1]||1):Number(p[0]||1)-Number(d[0]||1)}return u._plots[h].mainplot?1:-1});f.forEach(function(h){var v=u._plots[h],p=v.xaxis,d=v.yaxis;if(!v.mainplot){var g=o(l,v,p._offset,d._offset,p._length,d._length,"ns","ew");g.onmousemove=function(_){l._fullLayout._rehover=function(){l._fullLayout._hoversubplot===h&&l._fullLayout._plots[h]&&r.hover(l,_,h)},r.hover(l,_,h),l._fullLayout._lasthover=g,l._fullLayout._hoversubplot=h},g.onmouseout=function(_){l._dragging||(l._fullLayout._hoversubplot=null,a.unhover(l,_))},l._context.showAxisDragHandles&&(o(l,v,p._offset-i,d._offset-i,i,i,"n","w"),o(l,v,p._offset+p._length,d._offset-i,i,i,"n","e"),o(l,v,p._offset-i,d._offset+d._length,i,i,"s","w"),o(l,v,p._offset+p._length,d._offset+d._length,i,i,"s","e"))}if(l._context.showAxisDragHandles){if(h===p._mainSubplot){var m=p._mainLinePosition;p.side==="top"&&(m-=i),o(l,v,p._offset+p._length*.1,m,p._length*.8,i,"","ew"),o(l,v,p._offset,m,p._length*.1,i,"","w"),o(l,v,p._offset+p._length*.9,m,p._length*.1,i,"","e")}if(h===d._mainSubplot){var y=d._mainLinePosition;d.side!=="right"&&(y-=i),o(l,v,y,d._offset+d._length*.1,i,d._length*.8,"ns",""),o(l,v,y,d._offset+d._length*.9,i,d._length*.1,"s",""),o(l,v,y,d._offset,i,d._length*.1,"n","")}}});var c=u._hoverlayer.node();c.onmousemove=function(h){h.target=l._fullLayout._lasthover,r.hover(l,h,u._hoversubplot)},c.onclick=function(h){h.target=l._fullLayout._lasthover,r.click(l,h)},c.onmousedown=function(h){l._fullLayout._lasthover.onmousedown(h)},e.updateFx(l)}},e.updateFx=function(s){var l=s._fullLayout,u=l.dragmode==="pan"?"move":"crosshair";n(l._draggers,u)}})(Oz);var $T={},TQ=Pa,mRe=function(t){for(var r=TQ.layoutArrayContainers,a=TQ.layoutArrayRegexes,n=t.split("[")[0],o,i,s=0;s<a.length;s++)if(i=t.match(a[s]),i&&i.index===0){o=i[0];break}if(o||(o=r[r.indexOf(n)]),!o)return!1;var l=t.substr(o.length);return l?(i=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),i?{array:o,index:Number(i[1]),property:i[3]||""}:!1):{array:o,index:"",property:""}},yRe=A_,HF=PR,UT=ny.exports,xRe=T5.sorterAsc,GF=Pa;$T.containerArrayMatch=mRe;var bRe=$T.isAddVal=function(t){return t==="add"||yRe(t)},AQ=$T.isRemoveVal=function(t){return t===null||t==="remove"};$T.applyContainerArrayChanges=function(t,r,a,n,o){var i=r.astr,s=GF.getComponentMethod(i,"supplyLayoutDefaults"),l=GF.getComponentMethod(i,"draw"),u=GF.getComponentMethod(i,"drawOne"),f=n.replot||n.recalc||s===HF||l===HF,c=t.layout,h=t._fullLayout;if(a[""]){Object.keys(a).length>1&&UT.warn("Full array edits are incompatible with other edits",i);var v=a[""][""];if(AQ(v))r.set(null);else if(Array.isArray(v))r.set(v);else return UT.warn("Unrecognized full array edit value",i,v),!0;return f?!1:(s(c,h),l(t),!0)}var p=Object.keys(a).map(Number).sort(xRe),d=r.get(),g=d||[],m=o(h,i).get(),y=[],_=-1,S=g.length,M,w,A,k,T,L,C,I;for(M=0;M<p.length;M++){if(A=p[M],k=a[A],T=Object.keys(k),L=k[""],C=bRe(L),A<0||A>g.length-(C?0:1)){UT.warn("index out of range",i,A);continue}if(L!==void 0)T.length>1&&UT.warn("Insertion & removal are incompatible with edits to the same index.",i,A),AQ(L)?y.push(A):C?(L==="add"&&(L={}),g.splice(A,0,L),m&&m.splice(A,0,{})):UT.warn("Unrecognized full object edit value",i,A,L),_===-1&&(_=A);else for(w=0;w<T.length;w++)I=i+"["+A+"].",o(g[A],T[w],I).set(k[T[w]])}for(M=y.length-1;M>=0;M--)g.splice(y[M],1),m&&m.splice(y[M],1);if(g.length?d||r.set(g):r.set(null),f)return!1;if(s(c,h),u!==HF){var R;if(_===-1)R=p;else{for(S=Math.max(g.length,S),R=[],M=0;M<p.length&&(A=p[M],!(A>=_));M++)R.push(A);for(M=_;M<S;M++)R.push(M)}for(M=0;M<R.length;M++)u(t,R[M])}else l(t);return!0};var SQ={};(function(e){var t=gn,r=IW,a=Pa,n=bt.exports,o=Eo.exports,i=As,s=Oa.exports,l=i.cleanId,u=i.getFromTrace,f=a.traceIs;e.clearPromiseQueue=function(S){Array.isArray(S._promises)&&S._promises.length>0&&n.log("Clearing previous rejected promises from queue."),S._promises=[]},e.cleanLayout=function(S){var M,w;S||(S={}),S.xaxis1&&(S.xaxis||(S.xaxis=S.xaxis1),delete S.xaxis1),S.yaxis1&&(S.yaxis||(S.yaxis=S.yaxis1),delete S.yaxis1),S.scene1&&(S.scene||(S.scene=S.scene1),delete S.scene1);var A=(o.subplotsRegistry.cartesian||{}).attrRegex,k=(o.subplotsRegistry.polar||{}).attrRegex,T=(o.subplotsRegistry.ternary||{}).attrRegex,L=(o.subplotsRegistry.gl3d||{}).attrRegex,C=Object.keys(S);for(M=0;M<C.length;M++){var I=C[M];if(A&&A.test(I)){var R=S[I];R.anchor&&R.anchor!=="free"&&(R.anchor=l(R.anchor)),R.overlaying&&(R.overlaying=l(R.overlaying)),R.type||(R.isdate?R.type="date":R.islog?R.type="log":R.isdate===!1&&R.islog===!1&&(R.type="linear")),(R.autorange==="withzero"||R.autorange==="tozero")&&(R.autorange=!0,R.rangemode="tozero"),delete R.islog,delete R.isdate,delete R.categories,g(R,"domain")&&delete R.domain,R.autotick!==void 0&&(R.tickmode===void 0&&(R.tickmode=R.autotick?"auto":"linear"),delete R.autotick),h(R)}else if(k&&k.test(I)){var B=S[I];h(B.radialaxis)}else if(T&&T.test(I)){var N=S[I];h(N.aaxis),h(N.baxis),h(N.caxis)}else if(L&&L.test(I)){var D=S[I],O=D.cameraposition;if(Array.isArray(O)&&O[0].length===4){var $=O[0],Y=O[1],X=O[2],ee=r([],$),Q=[];for(w=0;w<3;++w)Q[w]=Y[w]+X*ee[2+4*w];D.camera={eye:{x:Q[0],y:Q[1],z:Q[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}h(D.xaxis),h(D.yaxis),h(D.zaxis)}}var Z=Array.isArray(S.annotations)?S.annotations.length:0;for(M=0;M<Z;M++){var q=S.annotations[M];!n.isPlainObject(q)||(q.ref&&(q.ref==="paper"?(q.xref="paper",q.yref="paper"):q.ref==="data"&&(q.xref="x",q.yref="y"),delete q.ref),c(q,"xref"),c(q,"yref"))}var ae=Array.isArray(S.shapes)?S.shapes.length:0;for(M=0;M<ae;M++){var ie=S.shapes[M];!n.isPlainObject(ie)||(c(ie,"xref"),c(ie,"yref"))}var we=Array.isArray(S.images)?S.images.length:0;for(M=0;M<we;M++){var Te=S.images[M];!n.isPlainObject(Te)||(c(Te,"xref"),c(Te,"yref"))}var he=S.legend;return he&&(he.x>3?(he.x=1.02,he.xanchor="left"):he.x<-2&&(he.x=-.02,he.xanchor="right"),he.y>3?(he.y=1.02,he.yanchor="bottom"):he.y<-2&&(he.y=-.02,he.yanchor="top")),h(S),S.dragmode==="rotate"&&(S.dragmode="orbit"),s.clean(S),S.template&&S.template.layout&&e.cleanLayout(S.template.layout),S};function c(S,M){var w=S[M],A=M.charAt(0);w&&w!=="paper"&&(S[M]=l(w,A,!0))}function h(S){S&&((typeof S.title=="string"||typeof S.title=="number")&&(S.title={text:S.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(w,A){var k=S[w],T=S.title&&S.title[A];k&&!T&&(S.title||(S.title={}),S.title[A]=S[w],delete S[w])}}e.cleanData=function(S){for(var M=0;M<S.length;M++){var w=S[M],A;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var k=s.defaults,T=w.error_y.color||(f(w,"bar")?s.defaultLine:k[M%k.length]);w.error_y.color=s.addOpacity(s.rgb(T),s.opacity(T)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(f(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",e.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&e.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=l(w.xaxis,"x")),w.yaxis&&(w.yaxis=l(w.yaxis,"y")),f(w,"gl3d")&&w.scene&&(w.scene=o.subplotsRegistry.gl3d.cleanId(w.scene)),!f(w,"pie-like")&&!f(w,"bar-like"))if(Array.isArray(w.textposition))for(A=0;A<w.textposition.length;A++)w.textposition[A]=d(w.textposition[A]);else w.textposition&&(w.textposition=d(w.textposition));var L=a.getModule(w);if(L&&L.colorbar){var C=L.colorbar.container,I=C?w[C]:w;I&&I.colorscale&&(I.colorscale==="YIGnBu"&&(I.colorscale="YlGnBu"),I.colorscale==="YIOrRd"&&(I.colorscale="YlOrRd"))}if(w.type==="surface"&&n.isPlainObject(w.contours)){var R=["x","y","z"];for(A=0;A<R.length;A++){var B=w.contours[R[A]];!n.isPlainObject(B)||(B.highlightColor&&(B.highlightcolor=B.highlightColor,delete B.highlightColor),B.highlightWidth&&(B.highlightwidth=B.highlightWidth,delete B.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var N=(w.increasing||{}).showlegend!==!1,D=(w.decreasing||{}).showlegend!==!1,O=v(w.increasing),$=v(w.decreasing);if(O!==!1&&$!==!1){var Y=p(O,$,N,D);Y&&(w.name=Y)}else(O||$)&&!w.name&&(w.name=O||$)}if(Array.isArray(w.transforms)){var X=w.transforms;for(A=0;A<X.length;A++){var ee=X[A];if(!!n.isPlainObject(ee))switch(ee.type){case"filter":ee.filtersrc&&(ee.target=ee.filtersrc,delete ee.filtersrc),ee.calendar&&(ee.valuecalendar||(ee.valuecalendar=ee.calendar),delete ee.calendar);break;case"groupby":if(ee.styles=ee.styles||ee.style,ee.styles&&!Array.isArray(ee.styles)){var Q=ee.styles,Z=Object.keys(Q);ee.styles=[];for(var q=0;q<Z.length;q++)ee.styles.push({target:Z[q],value:Q[Z[q]]})}break}}}g(w,"line")&&delete w.line,"marker"in w&&(g(w.marker,"line")&&delete w.marker.line,g(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),h(w),w.colorbar&&h(w.colorbar),w.marker&&w.marker.colorbar&&h(w.marker.colorbar),w.line&&w.line.colorbar&&h(w.line.colorbar),w.aaxis&&h(w.aaxis),w.baxis&&h(w.baxis)}};function v(S){if(!n.isPlainObject(S))return!1;var M=S.name;return delete S.name,delete S.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function p(S,M,w,A){if(w&&!A)return S;if(A&&!w||!S.trim())return M;if(!M.trim())return S;var k=Math.min(S.length,M.length),T;for(T=0;T<k&&S.charAt(T)===M.charAt(T);T++);var L=S.substr(0,T);return L.trim()}function d(S){var M="middle",w="center";return typeof S=="string"&&(S.indexOf("top")!==-1?M="top":S.indexOf("bottom")!==-1&&(M="bottom"),S.indexOf("left")!==-1?w="left":S.indexOf("right")!==-1&&(w="right")),M+" "+w}function g(S,M){return M in S&&typeof S[M]=="object"&&Object.keys(S[M]).length===0}e.swapXYData=function(S){var M;if(n.swapAttrs(S,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(S.z)&&Array.isArray(S.z[0])&&(S.transpose?delete S.transpose:S.transpose=!0),S.error_x&&S.error_y){var w=S.error_y,A="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);n.swapAttrs(S,["error_?.copy_ystyle"]),A&&n.swapAttrs(S,["error_?.color","error_?.thickness","error_?.width"])}if(typeof S.hoverinfo=="string"){var k=S.hoverinfo.split("+");for(M=0;M<k.length;M++)k[M]==="x"?k[M]="y":k[M]==="y"&&(k[M]="x");S.hoverinfo=k.join("+")}},e.coerceTraceIndices=function(S,M){if(t(M))return[M];if(!Array.isArray(M)||!M.length)return S.data.map(function(k,T){return T});if(Array.isArray(M)){for(var w=[],A=0;A<M.length;A++)n.isIndex(M[A],S.data.length)?w.push(M[A]):n.warn("trace index (",M[A],") is not a number or is out of bounds");return w}return M},e.manageArrayContainers=function(S,M,w){var A=S.obj,k=S.parts,T=k.length,L=k[T-1],C=t(L);if(C&&M===null){var I=k.slice(0,T-1).join("."),R=n.nestedProperty(A,I).get();R.splice(L,1)}else C&&S.get()===void 0&&S.get()===void 0&&(w[S.astr]=null),S.set(M)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(S){var M=S.search(m);if(M>0)return S.substr(0,M)}e.hasParent=function(S,M){for(var w=y(M);w;){if(w in S)return!0;w=y(w)}return!1};var _=["x","y","z"];e.clearAxisTypes=function(S,M,w){for(var A=0;A<M.length;A++)for(var k=S._fullData[A],T=0;T<3;T++){var L=u(S,k,_[T]);if(L&&L.type!=="log"){var C=L._name,I=L._id.substr(1);if(I.substr(0,5)==="scene"){if(w[I]!==void 0)continue;C=I+"."+C}var R=C+".type";w[C]===void 0&&w[R]===void 0&&n.nestedProperty(S.layout,R).set(null)}}}})(SQ);(function(e){var t=Ra.exports,r=gn,a=sX,n=bt.exports,o=n.nestedProperty,i=sT,s=NCe,l=Pa,u=ly,f=Eo.exports,c=rn.exports,h=xn.exports,v=Oa.exports,p=Oz.initInteractions,d=Xh,g=lu.clearSelect,m=k_.dfltConfig,y=$T,_=SQ,S=ET,M=Jo,w=Sl.AX_NAME_PATTERN,A=0,k=5;function T(Oe,it,ft,pt){var Dt;if(Oe=n.getGraphDiv(Oe),i.init(Oe),n.isPlainObject(it)){var Nt=it;it=Nt.data,ft=Nt.layout,pt=Nt.config,Dt=Nt.frames}var hr=i.triggerHandler(Oe,"plotly_beforeplot",[it,ft,pt]);if(hr===!1)return Promise.reject();!it&&!ft&&!n.isPlotDiv(Oe)&&n.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Oe);function fr(){if(Dt)return e.addFrames(Oe,Dt)}B(Oe,pt),ft||(ft={}),t.select(Oe).classed("js-plotly-plot",!0),h.makeTester(),Array.isArray(Oe._promises)||(Oe._promises=[]);var vr=(Oe.data||[]).length===0&&Array.isArray(it);Array.isArray(it)&&(_.cleanData(it),vr?Oe.data=it:Oe.data.push.apply(Oe.data,it),Oe.empty=!1),(!Oe.layout||vr)&&(Oe.layout=_.cleanLayout(ft)),f.supplyDefaults(Oe);var Ut=Oe._fullLayout,Fr=Ut._has("cartesian");Ut._replotting=!0,(vr||Ut._shouldCreateBgLayer)&&(Zr(Oe),Ut._shouldCreateBgLayer&&delete Ut._shouldCreateBgLayer),h.initGradients(Oe),h.initPatterns(Oe),vr&&c.saveShowSpikeInitial(Oe);var sa=!Oe.calcdata||Oe.calcdata.length!==(Oe._fullData||[]).length;sa&&f.doCalcdata(Oe);for(var $r=0;$r<Oe.calcdata.length;$r++)Oe.calcdata[$r][0].trace=Oe._fullData[$r];Oe._context.responsive?Oe._responsiveChartHandler||(Oe._responsiveChartHandler=function(){n.isHidden(Oe)||f.resize(Oe)},window.addEventListener("resize",Oe._responsiveChartHandler)):n.clearResponsive(Oe);var Ca=n.extendFlat({},Ut._size),on=0;function Fa(){for(var Ne=Ut._basePlotModules,We=0;We<Ne.length;We++)Ne[We].drawFramework&&Ne[We].drawFramework(Oe);!Ut._glcanvas&&Ut._has("gl")&&(Ut._glcanvas=Ut._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(It){return It.key}),Ut._glcanvas.enter().append("canvas").attr("class",function(It){return"gl-canvas gl-canvas-"+It.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var lt=Oe._context.plotGlPixelRatio;if(Ut._glcanvas){Ut._glcanvas.attr("width",Ut.width*lt).attr("height",Ut.height*lt).style("width",Ut.width+"px").style("height",Ut.height+"px");var wt=Ut._glcanvas.data()[0].regl;if(wt&&(Math.floor(Ut.width*lt)!==wt._gl.drawingBufferWidth||Math.floor(Ut.height*lt)!==wt._gl.drawingBufferHeight)){var Mt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(on)n.error(Mt);else return n.log(Mt+" Clearing graph and plotting again."),f.cleanPlot([],{},Oe._fullData,Ut),f.supplyDefaults(Oe),Ut=Oe._fullLayout,f.doCalcdata(Oe),on++,Fa()}}return Ut.modebar.orientation==="h"?Ut._modebardiv.style("height",null).style("width","100%"):Ut._modebardiv.style("width",null).style("height",Ut.height+"px"),f.previousPromises(Oe)}function jr(){if(f.clearAutoMarginIds(Oe),S.drawMarginPushers(Oe),c.allowAutoMargin(Oe),Ut._has("pie"))for(var Ne=Oe._fullData,We=0;We<Ne.length;We++){var lt=Ne[We];lt.type==="pie"&&lt.automargin&&f.allowAutoMargin(Oe,"pie."+lt.uid+".automargin")}return f.doAutoMargin(Oe),f.previousPromises(Oe)}function Rn(){if(!!f.didMarginChange(Ca,Ut._size))return n.syncOrAsync([jr,S.layoutStyles],Oe)}function xa(){if(!sa){ia();return}return n.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),ia],Oe)}function ia(){Oe._transitioning||(S.doAutoRangeAndConstraints(Oe),vr&&c.saveRangeInitial(Oe),l.getComponentMethod("rangeslider","calcAutorange")(Oe))}function vn(){return c.draw(Oe,vr?"":"redraw")}var ka=[f.previousPromises,fr,Fa,jr,Rn];Fr&&ka.push(xa),ka.push(S.layoutStyles),Fr&&ka.push(vn,function(We){We._fullLayout._insideTickLabelsAutorange&&Ie(We,We._fullLayout._insideTickLabelsAutorange).then(function(){We._fullLayout._insideTickLabelsAutorange=void 0})}),ka.push(S.drawData,S.finalDraw,p,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,Ge,f.previousPromises);function Ge(Ne){Ne._fullLayout._insideTickLabelsAutorange&&vr&&c.saveRangeInitial(Ne,!0)}var Pe=n.syncOrAsync(ka,Oe);return(!Pe||!Pe.then)&&(Pe=Promise.resolve()),Pe.then(function(){return L(Oe),Oe})}function L(Oe){var it=Oe._fullLayout;it._redrawFromAutoMarginCount?it._redrawFromAutoMarginCount--:Oe.emit("plotly_afterplot")}function C(Oe){return n.extendFlat(m,Oe)}function I(Oe,it){try{Oe._fullLayout._paper.style("background",it)}catch(ft){n.error(ft)}}function R(Oe,it){var ft=v.combine(it,"white");I(Oe,ft)}function B(Oe,it){if(!Oe._context){Oe._context=n.extendDeep({},m);var ft=t.select("base");Oe._context._baseUrl=ft.size()&&ft.attr("href")?window.location.href.split("#")[0]:""}var pt=Oe._context,Dt,Nt,hr;if(it){for(Nt=Object.keys(it),Dt=0;Dt<Nt.length;Dt++)hr=Nt[Dt],!(hr==="editable"||hr==="edits")&&hr in pt&&(hr==="setBackground"&&it[hr]==="opaque"?pt[hr]=R:pt[hr]=it[hr]);it.plot3dPixelRatio&&!pt.plotGlPixelRatio&&(pt.plotGlPixelRatio=pt.plot3dPixelRatio);var fr=it.editable;if(fr!==void 0)for(pt.editable=fr,Nt=Object.keys(pt.edits),Dt=0;Dt<Nt.length;Dt++)pt.edits[Nt[Dt]]=fr;if(it.edits)for(Nt=Object.keys(it.edits),Dt=0;Dt<Nt.length;Dt++)hr=Nt[Dt],hr in pt.edits&&(pt.edits[hr]=it.edits[hr]);pt._exportedPlot=it._exportedPlot}pt.staticPlot&&(pt.editable=!1,pt.edits={},pt.autosizable=!1,pt.scrollZoom=!1,pt.doubleClick=!1,pt.showTips=!1,pt.showLink=!1,pt.displayModeBar=!1),pt.displayModeBar==="hover"&&!a&&(pt.displayModeBar=!0),(pt.setBackground==="transparent"||typeof pt.setBackground!="function")&&(pt.setBackground=I),pt._hasZeroHeight=pt._hasZeroHeight||Oe.clientHeight===0,pt._hasZeroWidth=pt._hasZeroWidth||Oe.clientWidth===0;var vr=pt.scrollZoom,Ut=pt._scrollZoom={};if(vr===!0)Ut.cartesian=1,Ut.gl3d=1,Ut.geo=1,Ut.mapbox=1;else if(typeof vr=="string"){var Fr=vr.split("+");for(Dt=0;Dt<Fr.length;Dt++)Ut[Fr[Dt]]=1}else vr!==!1&&(Ut.gl3d=1,Ut.geo=1,Ut.mapbox=1)}function N(Oe){if(Oe=n.getGraphDiv(Oe),!n.isPlotDiv(Oe))throw new Error("This element is not a Plotly plot: "+Oe);return _.cleanData(Oe.data),_.cleanLayout(Oe.layout),Oe.calcdata=void 0,e._doPlot(Oe).then(function(){return Oe.emit("plotly_redraw"),Oe})}function D(Oe,it,ft,pt){return Oe=n.getGraphDiv(Oe),f.cleanPlot([],{},Oe._fullData||[],Oe._fullLayout||{}),f.purge(Oe),e._doPlot(Oe,it,ft,pt)}function O(Oe,it){var ft=it+1,pt=[],Dt,Nt;for(Dt=0;Dt<Oe.length;Dt++)Nt=Oe[Dt],Nt<0?pt.push(ft+Nt):pt.push(Nt);return pt}function $(Oe,it,ft){var pt,Dt;for(pt=0;pt<it.length;pt++){if(Dt=it[pt],Dt!==parseInt(Dt,10))throw new Error("all values in "+ft+" must be integers");if(Dt>=Oe.data.length||Dt<-Oe.data.length)throw new Error(ft+" must be valid indices for gd.data.");if(it.indexOf(Dt,pt+1)>-1||Dt>=0&&it.indexOf(-Oe.data.length+Dt)>-1||Dt<0&&it.indexOf(Oe.data.length+Dt)>-1)throw new Error("each index in "+ft+" must be unique.")}}function Y(Oe,it,ft){if(!Array.isArray(Oe.data))throw new Error("gd.data must be an array.");if(typeof it=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(it)||(it=[it]),$(Oe,it,"currentIndices"),typeof ft!="undefined"&&!Array.isArray(ft)&&(ft=[ft]),typeof ft!="undefined"&&$(Oe,ft,"newIndices"),typeof ft!="undefined"&&it.length!==ft.length)throw new Error("current and new indices must be of equal length.")}function X(Oe,it,ft){var pt,Dt;if(!Array.isArray(Oe.data))throw new Error("gd.data must be an array.");if(typeof it=="undefined")throw new Error("traces must be defined.");for(Array.isArray(it)||(it=[it]),pt=0;pt<it.length;pt++)if(Dt=it[pt],typeof Dt!="object"||Array.isArray(Dt)||Dt===null)throw new Error("all values in traces array must be non-array objects");if(typeof ft!="undefined"&&!Array.isArray(ft)&&(ft=[ft]),typeof ft!="undefined"&&ft.length!==it.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function ee(Oe,it,ft,pt){var Dt=n.isPlainObject(pt);if(!Array.isArray(Oe.data))throw new Error("gd.data must be an array");if(!n.isPlainObject(it))throw new Error("update must be a key:value object");if(typeof ft=="undefined")throw new Error("indices must be an integer or array of integers");$(Oe,ft,"indices");for(var Nt in it){if(!Array.isArray(it[Nt])||it[Nt].length!==ft.length)throw new Error("attribute "+Nt+" must be an array of length equal to indices array length");if(Dt&&(!(Nt in pt)||!Array.isArray(pt[Nt])||pt[Nt].length!==it[Nt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function Q(Oe,it,ft,pt){var Dt=n.isPlainObject(pt),Nt=[],hr,fr,vr,Ut,Fr;Array.isArray(ft)||(ft=[ft]),ft=O(ft,Oe.data.length-1);for(var sa in it)for(var $r=0;$r<ft.length;$r++){if(hr=Oe.data[ft[$r]],vr=o(hr,sa),fr=vr.get(),Ut=it[sa][$r],!n.isArrayOrTypedArray(Ut))throw new Error("attribute: "+sa+" index: "+$r+" must be an array");if(!n.isArrayOrTypedArray(fr))throw new Error("cannot extend missing or non-array attribute: "+sa);if(fr.constructor!==Ut.constructor)throw new Error("cannot extend array with an array of a different type: "+sa);Fr=Dt?pt[sa][$r]:pt,r(Fr)||(Fr=-1),Nt.push({prop:vr,target:fr,insert:Ut,maxp:Math.floor(Fr)})}return Nt}function Z(Oe,it,ft,pt,Dt){ee(Oe,it,ft,pt);for(var Nt=Q(Oe,it,ft,pt),hr={},fr={},vr=0;vr<Nt.length;vr++){var Ut=Nt[vr].prop,Fr=Nt[vr].maxp,sa=Dt(Nt[vr].target,Nt[vr].insert,Fr);Ut.set(sa[0]),Array.isArray(hr[Ut.astr])||(hr[Ut.astr]=[]),hr[Ut.astr].push(sa[1]),Array.isArray(fr[Ut.astr])||(fr[Ut.astr]=[]),fr[Ut.astr].push(Nt[vr].target.length)}return{update:hr,maxPoints:fr}}function q(Oe,it){var ft=new Oe.constructor(Oe.length+it.length);return ft.set(Oe),ft.set(it,Oe.length),ft}function ae(Oe,it,ft,pt){Oe=n.getGraphDiv(Oe);function Dt(vr,Ut,Fr){var sa,$r;if(n.isTypedArray(vr))if(Fr<0){var Ca=new vr.constructor(0),on=q(vr,Ut);Fr<0?(sa=on,$r=Ca):(sa=Ca,$r=on)}else if(sa=new vr.constructor(Fr),$r=new vr.constructor(vr.length+Ut.length-Fr),Fr===Ut.length)sa.set(Ut),$r.set(vr);else if(Fr<Ut.length){var Fa=Ut.length-Fr;sa.set(Ut.subarray(Fa)),$r.set(vr),$r.set(Ut.subarray(0,Fa),vr.length)}else{var jr=Fr-Ut.length,Rn=vr.length-jr;sa.set(vr.subarray(Rn)),sa.set(Ut,jr),$r.set(vr.subarray(0,Rn))}else sa=vr.concat(Ut),$r=Fr>=0&&Fr<sa.length?sa.splice(0,sa.length-Fr):[];return[sa,$r]}var Nt=Z(Oe,it,ft,pt,Dt),hr=e.redraw(Oe),fr=[Oe,Nt.update,ft,Nt.maxPoints];return s.add(Oe,e.prependTraces,fr,ae,arguments),hr}function ie(Oe,it,ft,pt){Oe=n.getGraphDiv(Oe);function Dt(vr,Ut,Fr){var sa,$r;if(n.isTypedArray(vr))if(Fr<=0){var Ca=new vr.constructor(0),on=q(Ut,vr);Fr<0?(sa=on,$r=Ca):(sa=Ca,$r=on)}else if(sa=new vr.constructor(Fr),$r=new vr.constructor(vr.length+Ut.length-Fr),Fr===Ut.length)sa.set(Ut),$r.set(vr);else if(Fr<Ut.length){var Fa=Ut.length-Fr;sa.set(Ut.subarray(0,Fa)),$r.set(Ut.subarray(Fa)),$r.set(vr,Fa)}else{var jr=Fr-Ut.length;sa.set(Ut),sa.set(vr.subarray(0,jr),Ut.length),$r.set(vr.subarray(jr))}else sa=Ut.concat(vr),$r=Fr>=0&&Fr<sa.length?sa.splice(Fr,sa.length):[];return[sa,$r]}var Nt=Z(Oe,it,ft,pt,Dt),hr=e.redraw(Oe),fr=[Oe,Nt.update,ft,Nt.maxPoints];return s.add(Oe,e.extendTraces,fr,ie,arguments),hr}function we(Oe,it,ft){Oe=n.getGraphDiv(Oe);var pt=[],Dt=e.deleteTraces,Nt=we,hr=[Oe,pt],fr=[Oe,it],vr,Ut;for(X(Oe,it,ft),Array.isArray(it)||(it=[it]),it=it.map(function(Fr){return n.extendFlat({},Fr)}),_.cleanData(it),vr=0;vr<it.length;vr++)Oe.data.push(it[vr]);for(vr=0;vr<it.length;vr++)pt.push(-it.length+vr);if(typeof ft=="undefined")return Ut=e.redraw(Oe),s.add(Oe,Dt,hr,Nt,fr),Ut;Array.isArray(ft)||(ft=[ft]);try{Y(Oe,pt,ft)}catch(Fr){throw Oe.data.splice(Oe.data.length-it.length,it.length),Fr}return s.startSequence(Oe),s.add(Oe,Dt,hr,Nt,fr),Ut=e.moveTraces(Oe,pt,ft),s.stopSequence(Oe),Ut}function Te(Oe,it){Oe=n.getGraphDiv(Oe);var ft=[],pt=e.addTraces,Dt=Te,Nt=[Oe,ft,it],hr=[Oe,it],fr,vr;if(typeof it=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(it)||(it=[it]),$(Oe,it,"indices"),it=O(it,Oe.data.length-1),it.sort(n.sorterDes),fr=0;fr<it.length;fr+=1)vr=Oe.data.splice(it[fr],1)[0],ft.push(vr);var Ut=e.redraw(Oe);return s.add(Oe,pt,Nt,Dt,hr),Ut}function he(Oe,it,ft){Oe=n.getGraphDiv(Oe);var pt=[],Dt=[],Nt=he,hr=he,fr=[Oe,ft,it],vr=[Oe,it,ft],Ut;if(Y(Oe,it,ft),it=Array.isArray(it)?it:[it],typeof ft=="undefined")for(ft=[],Ut=0;Ut<it.length;Ut++)ft.push(-it.length+Ut);for(ft=Array.isArray(ft)?ft:[ft],it=O(it,Oe.data.length-1),ft=O(ft,Oe.data.length-1),Ut=0;Ut<Oe.data.length;Ut++)it.indexOf(Ut)===-1&&pt.push(Oe.data[Ut]);for(Ut=0;Ut<it.length;Ut++)Dt.push({newIndex:ft[Ut],trace:Oe.data[it[Ut]]});for(Dt.sort(function(sa,$r){return sa.newIndex-$r.newIndex}),Ut=0;Ut<Dt.length;Ut+=1)pt.splice(Dt[Ut].newIndex,0,Dt[Ut].trace);Oe.data=pt;var Fr=e.redraw(Oe);return s.add(Oe,Nt,fr,hr,vr),Fr}function xe(Oe,it,ft,pt){Oe=n.getGraphDiv(Oe),_.clearPromiseQueue(Oe);var Dt={};if(typeof it=="string")Dt[it]=ft;else if(n.isPlainObject(it))Dt=n.extendFlat({},it),pt===void 0&&(pt=ft);else return n.warn("Restyle fail.",it,ft,pt),Promise.reject();Object.keys(Dt).length&&(Oe.changed=!0);var Nt=_.coerceTraceIndices(Oe,pt),hr=de(Oe,Dt,Nt),fr=hr.flags;fr.calc&&(Oe.calcdata=void 0),fr.clearAxisTypes&&_.clearAxisTypes(Oe,Nt,{});var vr=[];fr.fullReplot?vr.push(e._doPlot):(vr.push(f.previousPromises),f.supplyDefaults(Oe),fr.markerSize&&(f.doCalcdata(Oe),qe(vr)),fr.style&&vr.push(S.doTraceStyle),fr.colorbars&&vr.push(S.doColorBars),vr.push(L)),vr.push(f.rehover,f.redrag),s.add(Oe,xe,[Oe,hr.undoit,hr.traces],xe,[Oe,hr.redoit,hr.traces]);var Ut=n.syncOrAsync(vr,Oe);return(!Ut||!Ut.then)&&(Ut=Promise.resolve()),Ut.then(function(){return Oe.emit("plotly_restyle",hr.eventData),Oe})}function Se(Oe){return Oe===void 0?null:Oe}function ye(Oe,it){return it?function(ft,pt,Dt){var Nt=o(ft,pt),hr=Nt.set;return Nt.set=function(fr){var vr=(Dt||"")+pt;re(vr,Nt.get(),fr,Oe),hr(fr)},Nt}:o}function re(Oe,it,ft,pt){if(Array.isArray(it)||Array.isArray(ft))for(var Dt=Array.isArray(it)?it:[],Nt=Array.isArray(ft)?ft:[],hr=Math.max(Dt.length,Nt.length),fr=0;fr<hr;fr++)re(Oe+"["+fr+"]",Dt[fr],Nt[fr],pt);else if(n.isPlainObject(it)||n.isPlainObject(ft)){var vr=n.isPlainObject(it)?it:{},Ut=n.isPlainObject(ft)?ft:{},Fr=n.extendFlat({},vr,Ut);for(var sa in Fr)re(Oe+"."+sa,vr[sa],Ut[sa],pt)}else pt[Oe]===void 0&&(pt[Oe]=Se(it))}function se(Oe,it,ft){for(var pt in ft){var Dt=o(Oe,pt);re(pt,Dt.get(),ft[pt],it)}}function de(Oe,it,ft){var pt=Oe._fullLayout,Dt=Oe._fullData,Nt=Oe.data,hr=pt._guiEditing,fr=ye(pt._preGUI,hr),vr=n.extendDeepAll({},it),Ut;Me(it);var Fr=M.traceFlags(),sa={},$r={},Ca;function on(){return ft.map(function(){})}function Fa(Kn){var _o=c.id2name(Kn);Ca.indexOf(_o)===-1&&Ca.push(_o)}function jr(Kn){return"LAYOUT"+Kn+".autorange"}function Rn(Kn){return"LAYOUT"+Kn+".range"}function xa(Kn){for(var _o=Kn;_o<Dt.length;_o++)if(Dt[_o]._input===Nt[Kn])return Dt[_o]}function ia(Kn,_o,yl){if(Array.isArray(Kn)){Kn.forEach(function(Vn){ia(Vn,_o,yl)});return}if(!(Kn in it||_.hasParent(it,Kn))){var xl;if(Kn.substr(0,6)==="LAYOUT")xl=fr(Oe.layout,Kn.replace("LAYOUT",""));else{var Hi=ft[yl],zi=pt._tracePreGUI[xa(Hi)._fullInput.uid];xl=ye(zi,hr)(Nt[Hi],Kn)}Kn in $r||($r[Kn]=on()),$r[Kn][yl]===void 0&&($r[Kn][yl]=Se(xl.get())),_o!==void 0&&xl.set(_o)}}function vn(Kn){return function(_o){return Dt[_o][Kn]}}function ka(Kn){return function(_o,yl){return _o===!1?Dt[ft[yl]][Kn]:null}}for(var Ge in it){if(_.hasParent(it,Ge))throw new Error("cannot set "+Ge+" and a parent attribute simultaneously");var Pe=it[Ge],Ne,We,lt,wt,Mt,It;if((Ge==="autobinx"||Ge==="autobiny")&&(Ge=Ge.charAt(Ge.length-1)+"bins",Array.isArray(Pe)?Pe=Pe.map(ka(Ge)):Pe===!1?Pe=ft.map(vn(Ge)):Pe=null),sa[Ge]=Pe,Ge.substr(0,6)==="LAYOUT"){lt=fr(Oe.layout,Ge.replace("LAYOUT","")),$r[Ge]=[Se(lt.get())],lt.set(Array.isArray(Pe)?Pe[0]:Pe),Fr.calc=!0;continue}for($r[Ge]=on(),Ut=0;Ut<ft.length;Ut++){Ne=Nt[ft[Ut]],We=xa(ft[Ut]);var rr=pt._tracePreGUI[We._fullInput.uid];if(lt=ye(rr,hr)(Ne,Ge),wt=lt.get(),Mt=Array.isArray(Pe)?Pe[Ut%Pe.length]:Pe,Mt!==void 0){var sr=lt.parts[lt.parts.length-1],gr=Ge.substr(0,Ge.length-sr.length-1),Ur=gr?gr+".":"",Vr=gr?o(We,gr).get():We;if(It=u.getTraceValObject(We,lt.parts),It&&It.impliedEdits&&Mt!==null)for(var la in It.impliedEdits)ia(n.relativeAttr(Ge,la),It.impliedEdits[la],Ut);else if((sr==="thicknessmode"||sr==="lenmode")&&wt!==Mt&&(Mt==="fraction"||Mt==="pixels")&&Vr){var Xa=pt._size,La=Vr.orient,en=La==="top"||La==="bottom";if(sr==="thicknessmode"){var In=en?Xa.h:Xa.w;ia(Ur+"thickness",Vr.thickness*(Mt==="fraction"?1/In:In),Ut)}else{var yn=en?Xa.w:Xa.h;ia(Ur+"len",Vr.len*(Mt==="fraction"?1/yn:yn),Ut)}}else if(Ge==="type"&&(Mt==="pie"!=(wt==="pie")||Mt==="funnelarea"!=(wt==="funnelarea"))){var On="x",dn="y";(Mt==="bar"||wt==="bar")&&Ne.orientation==="h"&&(On="y",dn="x"),n.swapAttrs(Ne,["?","?src"],"labels",On),n.swapAttrs(Ne,["d?","?0"],"label",On),n.swapAttrs(Ne,["?","?src"],"values",dn),wt==="pie"||wt==="funnelarea"?(o(Ne,"marker.color").set(o(Ne,"marker.colors").get()),pt._pielayer.selectAll("g.trace").remove()):l.traceIs(Ne,"cartesian")&&o(Ne,"marker.colors").set(o(Ne,"marker.color").get())}$r[Ge][Ut]=Se(wt);var ni=["swapxy","swapxyaxes","orientation","orientationaxes"];if(ni.indexOf(Ge)!==-1){if(Ge==="orientation"){lt.set(Mt);var Oi=Ne.x&&!Ne.y?"h":"v";if((lt.get()||Oi)===We.orientation)continue}else Ge==="orientationaxes"&&(Ne.orientation={v:"h",h:"v"}[We.orientation]);_.swapXYData(Ne),Fr.calc=Fr.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(lt.parts[0])!==-1?(_.manageArrayContainers(lt,Mt,$r),Fr.calc=!0):(It?It.arrayOk&&!l.traceIs(We,"regl")&&(n.isArrayOrTypedArray(Mt)||n.isArrayOrTypedArray(wt))?Fr.calc=!0:M.update(Fr,It):Fr.calc=!0,lt.set(Mt))}}if(["swapxyaxes","orientationaxes"].indexOf(Ge)!==-1&&c.swap(Oe,ft),Ge==="orientationaxes"){var No=o(Oe.layout,"hovermode"),kn=No.get();kn==="x"?No.set("y"):kn==="y"?No.set("x"):kn==="x unified"?No.set("y unified"):kn==="y unified"&&No.set("x unified")}if(["orientation","type"].indexOf(Ge)!==-1){for(Ca=[],Ut=0;Ut<ft.length;Ut++){var ds=Nt[ft[Ut]];l.traceIs(ds,"cartesian")&&(Fa(ds.xaxis||"x"),Fa(ds.yaxis||"y"))}ia(Ca.map(jr),!0,0),ia(Ca.map(Rn),[0,1],0)}}return(Fr.calc||Fr.plot)&&(Fr.fullReplot=!0),{flags:Fr,undoit:$r,redoit:sa,traces:ft,eventData:n.extendDeepNoArrays([],[vr,ft])}}function Me(Oe){var it=n.counterRegex("axis",".title",!1,!1),ft=/colorbar\.title$/,pt=Object.keys(Oe),Dt,Nt,hr;for(Dt=0;Dt<pt.length;Dt++)Nt=pt[Dt],hr=Oe[Nt],(Nt==="title"||it.test(Nt)||ft.test(Nt))&&(typeof hr=="string"||typeof hr=="number")?fr(Nt,Nt.replace("title","title.text")):Nt.indexOf("titlefont")>-1&&Nt.indexOf("grouptitlefont")===-1?fr(Nt,Nt.replace("titlefont","title.font")):Nt.indexOf("titleposition")>-1?fr(Nt,Nt.replace("titleposition","title.position")):Nt.indexOf("titleside")>-1?fr(Nt,Nt.replace("titleside","title.side")):Nt.indexOf("titleoffset")>-1&&fr(Nt,Nt.replace("titleoffset","title.offset"));function fr(vr,Ut){Oe[Ut]=Oe[vr],delete Oe[vr]}}function Ie(Oe,it,ft){Oe=n.getGraphDiv(Oe),_.clearPromiseQueue(Oe);var pt={};if(typeof it=="string")pt[it]=ft;else if(n.isPlainObject(it))pt=n.extendFlat({},it);else return n.warn("Relayout fail.",it,ft),Promise.reject();Object.keys(pt).length&&(Oe.changed=!0);var Dt=ue(Oe,pt),Nt=Dt.flags;Nt.calc&&(Oe.calcdata=void 0);var hr=[f.previousPromises];Nt.layoutReplot?hr.push(S.layoutReplot):Object.keys(pt).length&&(Ee(Oe,Nt,Dt)||f.supplyDefaults(Oe),Nt.legend&&hr.push(S.doLegend),Nt.layoutstyle&&hr.push(S.layoutStyles),Nt.axrange&&qe(hr,Dt.rangesAltered),Nt.ticks&&hr.push(S.doTicksRelayout),Nt.modebar&&hr.push(S.doModeBar),Nt.camera&&hr.push(S.doCamera),Nt.colorbars&&hr.push(S.doColorBars),hr.push(L)),hr.push(f.rehover,f.redrag),s.add(Oe,Ie,[Oe,Dt.undoit],Ie,[Oe,Dt.redoit]);var fr=n.syncOrAsync(hr,Oe);return(!fr||!fr.then)&&(fr=Promise.resolve(Oe)),fr.then(function(){return Oe.emit("plotly_relayout",Dt.eventData),Oe})}function Ee(Oe,it,ft){var pt=Oe._fullLayout;if(!it.axrange)return!1;for(var Dt in it)if(Dt!=="axrange"&&it[Dt])return!1;for(var Nt in ft.rangesAltered){var hr=c.id2name(Nt),fr=Oe.layout[hr],vr=pt[hr];if(vr.autorange=fr.autorange,fr.range&&(vr.range=fr.range.slice()),vr.cleanRange(),vr._matchGroup){for(var Ut in vr._matchGroup)if(Ut!==Nt){var Fr=pt[c.id2name(Ut)];Fr.autorange=vr.autorange,Fr.range=vr.range.slice(),Fr._input.range=vr.range.slice()}}}return!0}function qe(Oe,it){var ft=it?function(pt){var Dt=[],Nt=!0;for(var hr in it){var fr=c.getFromId(pt,hr);if(Dt.push(hr),(fr.ticklabelposition||"").indexOf("inside")!==-1&&fr._anchorAxis&&Dt.push(fr._anchorAxis._id),fr._matchGroup)for(var vr in fr._matchGroup)it[vr]||Dt.push(vr);fr.automargin&&(Nt=!1)}return c.draw(pt,Dt,{skipTitle:Nt})}:function(pt){return c.draw(pt,"redraw")};Oe.push(g,S.doAutoRangeAndConstraints,ft,S.drawData,S.finalDraw)}var be=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,ce=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ue(Oe,it){var ft=Oe.layout,pt=Oe._fullLayout,Dt=pt._guiEditing,Nt=ye(pt._preGUI,Dt),hr=Object.keys(it),fr=c.list(Oe),vr=n.extendDeepAll({},it),Ut={},Fr,sa,$r;for(Me(it),hr=Object.keys(it),sa=0;sa<hr.length;sa++)if(hr[sa].indexOf("allaxes")===0){for($r=0;$r<fr.length;$r++){var Ca=fr[$r]._id.substr(1),on=Ca.indexOf("scene")!==-1?Ca+".":"",Fa=hr[sa].replace("allaxes",on+fr[$r]._name);it[Fa]||(it[Fa]=it[hr[sa]])}delete it[hr[sa]]}var jr=M.layoutFlags(),Rn={},xa={};function ia(Hi,zi){if(Array.isArray(Hi)){Hi.forEach(function(nl){ia(nl,zi)});return}if(!(Hi in it||_.hasParent(it,Hi))){var Vn=Nt(ft,Hi);Hi in xa||(xa[Hi]=Se(Vn.get())),zi!==void 0&&Vn.set(zi)}}var vn={},ka;function Ge(Hi){var zi=c.name2id(Hi.split(".")[0]);return vn[zi]=1,zi}for(var Pe in it){if(_.hasParent(it,Pe))throw new Error("cannot set "+Pe+" and a parent attribute simultaneously");for(var Ne=Nt(ft,Pe),We=it[Pe],lt=Ne.parts.length,wt=lt-1;wt>0&&typeof Ne.parts[wt]!="string";)wt--;var Mt=Ne.parts[wt],It=Ne.parts[wt-1]+"."+Mt,rr=Ne.parts.slice(0,wt).join("."),sr=o(Oe.layout,rr).get(),gr=o(pt,rr).get(),Ur=Ne.get();if(We!==void 0){Rn[Pe]=We,xa[Pe]=Mt==="reverse"?We:Se(Ur);var Vr=u.getLayoutValObject(pt,Ne.parts);if(Vr&&Vr.impliedEdits&&We!==null)for(var la in Vr.impliedEdits)ia(n.relativeAttr(Pe,la),Vr.impliedEdits[la]);if(["width","height"].indexOf(Pe)!==-1)if(We){ia("autosize",null);var Xa=Pe==="height"?"width":"height";ia(Xa,pt[Xa])}else pt[Pe]=Oe._initialAutoSize[Pe];else if(Pe==="autosize")ia("width",We?null:pt.width),ia("height",We?null:pt.height);else if(It.match(be))Ge(It),o(pt,rr+"._inputRange").set(null);else if(It.match(oe)){Ge(It),o(pt,rr+"._inputRange").set(null);var La=o(pt,rr).get();La._inputDomain&&(La._input.domain=La._inputDomain.slice())}else It.match(ce)&&o(pt,rr+"._inputDomain").set(null);if(Mt==="type"){ka=sr;var en=gr.type==="linear"&&We==="log",In=gr.type==="log"&&We==="linear";if(en||In){if(!ka||!ka.range)ia(rr+".autorange",!0);else if(gr.autorange)en&&(ka.range=ka.range[1]>ka.range[0]?[1,2]:[2,1]);else{var yn=ka.range[0],On=ka.range[1];en?(yn<=0&&On<=0&&ia(rr+".autorange",!0),yn<=0?yn=On/1e6:On<=0&&(On=yn/1e6),ia(rr+".range[0]",Math.log(yn)/Math.LN10),ia(rr+".range[1]",Math.log(On)/Math.LN10)):(ia(rr+".range[0]",Math.pow(10,yn)),ia(rr+".range[1]",Math.pow(10,On)))}Array.isArray(pt._subplots.polar)&&pt._subplots.polar.length&&pt[Ne.parts[0]]&&Ne.parts[1]==="radialaxis"&&delete pt[Ne.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(Oe,gr,We,ia),l.getComponentMethod("images","convertCoords")(Oe,gr,We,ia)}else ia(rr+".autorange",!0),ia(rr+".range",null);o(pt,rr+"._inputRange").set(null)}else if(Mt.match(w)){var dn=o(pt,Pe).get(),ni=(We||{}).type;(!ni||ni==="-")&&(ni="linear"),l.getComponentMethod("annotations","convertCoords")(Oe,dn,ni,ia),l.getComponentMethod("images","convertCoords")(Oe,dn,ni,ia)}var Oi=y.containerArrayMatch(Pe);if(Oi){Fr=Oi.array,sa=Oi.index;var No=Oi.property,kn=Vr||{editType:"calc"};sa!==""&&No===""&&(y.isAddVal(We)?xa[Pe]=null:y.isRemoveVal(We)?xa[Pe]=(o(ft,Fr).get()||[])[sa]:n.warn("unrecognized full object value",it)),M.update(jr,kn),Ut[Fr]||(Ut[Fr]={});var ds=Ut[Fr][sa];ds||(ds=Ut[Fr][sa]={}),ds[No]=We,delete it[Pe]}else Mt==="reverse"?(sr.range?sr.range.reverse():(ia(rr+".autorange",!0),sr.range=[1,0]),gr.autorange?jr.calc=!0:jr.plot=!0):(pt._has("scatter-like")&&pt._has("regl")&&Pe==="dragmode"&&(We==="lasso"||We==="select")&&!(Ur==="lasso"||Ur==="select")||pt._has("gl2d")?jr.plot=!0:Vr?M.update(jr,Vr):jr.calc=!0,Ne.set(We))}}for(Fr in Ut){var Kn=y.applyContainerArrayChanges(Oe,Nt(ft,Fr),Ut[Fr],jr,Nt);Kn||(jr.plot=!0)}for(var _o in vn){ka=c.getFromId(Oe,_o);var yl=ka&&ka._constraintGroup;if(yl){jr.calc=!0;for(var xl in yl)vn[xl]||(c.getFromId(Oe,xl)._constraintShrinkable=!0)}}return(Re(Oe)||it.height||it.width)&&(jr.plot=!0),(jr.plot||jr.calc)&&(jr.layoutReplot=!0),{flags:jr,rangesAltered:vn,undoit:xa,redoit:Rn,eventData:vr}}function Re(Oe){var it=Oe._fullLayout,ft=it.width,pt=it.height;return Oe.layout.autosize&&f.plotAutoSize(Oe,Oe.layout,it),it.width!==ft||it.height!==pt}function Xe(Oe,it,ft,pt){Oe=n.getGraphDiv(Oe),_.clearPromiseQueue(Oe),n.isPlainObject(it)||(it={}),n.isPlainObject(ft)||(ft={}),Object.keys(it).length&&(Oe.changed=!0),Object.keys(ft).length&&(Oe.changed=!0);var Dt=_.coerceTraceIndices(Oe,pt),Nt=de(Oe,n.extendFlat({},it),Dt),hr=Nt.flags,fr=ue(Oe,n.extendFlat({},ft)),vr=fr.flags;(hr.calc||vr.calc)&&(Oe.calcdata=void 0),hr.clearAxisTypes&&_.clearAxisTypes(Oe,Dt,ft);var Ut=[];vr.layoutReplot?Ut.push(S.layoutReplot):hr.fullReplot?Ut.push(e._doPlot):(Ut.push(f.previousPromises),Ee(Oe,vr,fr)||f.supplyDefaults(Oe),hr.style&&Ut.push(S.doTraceStyle),(hr.colorbars||vr.colorbars)&&Ut.push(S.doColorBars),vr.legend&&Ut.push(S.doLegend),vr.layoutstyle&&Ut.push(S.layoutStyles),vr.axrange&&qe(Ut,fr.rangesAltered),vr.ticks&&Ut.push(S.doTicksRelayout),vr.modebar&&Ut.push(S.doModeBar),vr.camera&&Ut.push(S.doCamera),Ut.push(L)),Ut.push(f.rehover,f.redrag),s.add(Oe,Xe,[Oe,Nt.undoit,fr.undoit,Nt.traces],Xe,[Oe,Nt.redoit,fr.redoit,Nt.traces]);var Fr=n.syncOrAsync(Ut,Oe);return(!Fr||!Fr.then)&&(Fr=Promise.resolve(Oe)),Fr.then(function(){return Oe.emit("plotly_update",{data:Nt.eventData,layout:fr.eventData}),Oe})}function Ke(Oe){return function(ft){ft._fullLayout._guiEditing=!0;var pt=Oe.apply(null,arguments);return ft._fullLayout._guiEditing=!1,pt}}var vt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ze=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Qe(Oe,it){for(var ft=0;ft<it.length;ft++){var pt=it[ft],Dt=Oe.match(pt.pattern);if(Dt){var Nt=Dt[1]||"";return{head:Nt,tail:Oe.substr(Nt.length+1),attr:pt.attr}}}}function Je(Oe,it){var ft=o(it,Oe).get();if(ft!==void 0)return ft;var pt=Oe.split(".");for(pt.pop();pt.length>1;)if(pt.pop(),ft=o(it,pt.join(".")+".uirevision").get(),ft!==void 0)return ft;return it.uirevision}function je(Oe,it){for(var ft=0;ft<it.length;ft++)if(it[ft]._fullInput.uid===Oe)return ft;return-1}function $e(Oe,it,ft){for(var pt=0;pt<it.length;pt++)if(it[pt].uid===Oe)return pt;return!it[ft]||it[ft].uid?-1:ft}function Ye(Oe,it){var ft=n.isPlainObject(Oe),pt=Array.isArray(Oe);return ft||pt?(ft&&n.isPlainObject(it)||pt&&Array.isArray(it))&&JSON.stringify(Oe)===JSON.stringify(it):Oe===it}function yt(Oe,it,ft,pt){var Dt=pt._preGUI,Nt,hr,fr,vr,Ut,Fr,sa,$r,Ca,on,Fa=[],jr={},Rn={};for(Nt in Dt){if(Ut=Qe(Nt,vt),Ut){if(Ca=Ut.head,on=Ut.tail,hr=Ut.attr||Ca+".uirevision",fr=o(pt,hr).get(),vr=fr&&Je(hr,it),vr&&vr===fr){if(Fr=Dt[Nt],Fr===null&&(Fr=void 0),sa=o(it,Nt),$r=sa.get(),Ye($r,Fr)){$r===void 0&&on==="autorange"&&Fa.push(Ca),sa.set(Se(o(pt,Nt).get()));continue}else if(on==="autorange"||on.substr(0,6)==="range["){var xa=Dt[Ca+".range[0]"],ia=Dt[Ca+".range[1]"],vn=Dt[Ca+".autorange"];if(vn||vn===null&&xa===null&&ia===null){if(!(Ca in jr)){var ka=o(it,Ca).get();jr[Ca]=ka&&(ka.autorange||ka.autorange!==!1&&(!ka.range||ka.range.length!==2))}if(jr[Ca]){sa.set(Se(o(pt,Nt).get()));continue}}}}}else n.warn("unrecognized GUI edit: "+Nt);delete Dt[Nt],Ut&&Ut.tail.substr(0,6)==="range["&&(Rn[Ut.head]=1)}for(var Ge=0;Ge<Fa.length;Ge++){var Pe=Fa[Ge];if(Rn[Pe]){var Ne=o(it,Pe).get();Ne&&delete Ne.autorange}}var We=pt._tracePreGUI;for(var lt in We){var wt=We[lt],Mt=null,It;for(Nt in wt){if(!Mt){var rr=je(lt,ft);if(rr<0){delete We[lt];break}var sr=ft[rr];It=sr._fullInput;var gr=$e(lt,Oe,It.index);if(gr<0){delete We[lt];break}Mt=Oe[gr]}if(Ut=Qe(Nt,Ze),Ut){if(Ut.attr?(fr=o(pt,Ut.attr).get(),vr=fr&&Je(Ut.attr,it)):(fr=It.uirevision,vr=Mt.uirevision,vr===void 0&&(vr=it.uirevision)),vr&&vr===fr&&(Fr=wt[Nt],Fr===null&&(Fr=void 0),sa=o(Mt,Nt),$r=sa.get(),Ye($r,Fr))){sa.set(Se(o(It,Nt).get()));continue}}else n.warn("unrecognized GUI edit: "+Nt+" in trace uid "+lt);delete wt[Nt]}}}function _t(Oe,it,ft,pt){var Dt,Nt;function hr(){return e.addFrames(Oe,Dt)}Oe=n.getGraphDiv(Oe),_.clearPromiseQueue(Oe);var fr=Oe._fullData,vr=Oe._fullLayout;if(!n.isPlotDiv(Oe)||!fr||!vr)Nt=e.newPlot(Oe,it,ft,pt);else{if(n.isPlainObject(it)){var Ut=it;it=Ut.data,ft=Ut.layout,pt=Ut.config,Dt=Ut.frames}var Fr=!1;if(pt){var sa=n.extendDeep({},Oe._context);Oe._context=void 0,B(Oe,pt),Fr=qt(sa,Oe._context)}Oe.data=it||[],_.cleanData(Oe.data),Oe.layout=ft||{},_.cleanLayout(Oe.layout),yt(Oe.data,Oe.layout,fr,vr),f.supplyDefaults(Oe,{skipUpdateCalc:!0});var $r=Oe._fullData,Ca=Oe._fullLayout,on=Ca.datarevision===void 0,Fa=Ca.transition,jr=Tt(Oe,vr,Ca,on,Fa),Rn=jr.newDataRevision,xa=Pt(Oe,fr,$r,on,Fa,Rn);if(Re(Oe)&&(jr.layoutReplot=!0),xa.calc||jr.calc){Oe.calcdata=void 0;for(var ia=Object.getOwnPropertyNames(Ca),vn=0;vn<ia.length;vn++){var ka=ia[vn],Ge=ka.substring(0,5);if(Ge==="xaxis"||Ge==="yaxis"){var Pe=Ca[ka]._emptyCategories;Pe&&Pe()}}}else f.supplyDefaultsUpdateCalc(Oe.calcdata,$r);var Ne=[];if(Dt&&(Oe._transitionData={},f.createTransitionData(Oe),Ne.push(hr)),Ca.transition&&!Fr&&(xa.anim||jr.anim))jr.ticks&&Ne.push(S.doTicksRelayout),f.doCalcdata(Oe),S.doAutoRangeAndConstraints(Oe),Ne.push(function(){return f.transitionFromReact(Oe,xa,jr,vr)});else if(xa.fullReplot||jr.layoutReplot||Fr)Oe._fullLayout._skipDefaults=!0,Ne.push(e._doPlot);else{for(var We in jr.arrays){var lt=jr.arrays[We];if(lt.length){var wt=l.getComponentMethod(We,"drawOne");if(wt!==n.noop)for(var Mt=0;Mt<lt.length;Mt++)wt(Oe,lt[Mt]);else{var It=l.getComponentMethod(We,"draw");if(It===n.noop)throw new Error("cannot draw components: "+We);It(Oe)}}}Ne.push(f.previousPromises),xa.style&&Ne.push(S.doTraceStyle),(xa.colorbars||jr.colorbars)&&Ne.push(S.doColorBars),jr.legend&&Ne.push(S.doLegend),jr.layoutstyle&&Ne.push(S.layoutStyles),jr.axrange&&qe(Ne),jr.ticks&&Ne.push(S.doTicksRelayout),jr.modebar&&Ne.push(S.doModeBar),jr.camera&&Ne.push(S.doCamera),Ne.push(L)}Ne.push(f.rehover,f.redrag),Nt=n.syncOrAsync(Ne,Oe),(!Nt||!Nt.then)&&(Nt=Promise.resolve(Oe))}return Nt.then(function(){return Oe.emit("plotly_react",{data:it,layout:ft}),Oe})}function Pt(Oe,it,ft,pt,Dt,Nt){var hr=it.length===ft.length;if(!Dt&&!hr)return{fullReplot:!0,calc:!0};var fr=M.traceFlags();fr.arrays={},fr.nChanges=0,fr.nChangesAnim=0;var vr,Ut;function Fr(Ca){var on=u.getTraceValObject(Ut,Ca);return!Ut._module.animatable&&on.anim&&(on.anim=!1),on}var sa={getValObject:Fr,flags:fr,immutable:pt,transition:Dt,newDataRevision:Nt,gd:Oe},$r={};for(vr=0;vr<it.length;vr++)if(ft[vr]){if(Ut=ft[vr]._fullInput,f.hasMakesDataTransform(Ut)&&(Ut=ft[vr]),$r[Ut.uid])continue;$r[Ut.uid]=1,Ot(it[vr]._fullInput,Ut,[],sa)}return(fr.calc||fr.plot)&&(fr.fullReplot=!0),Dt&&fr.nChanges&&fr.nChangesAnim&&(fr.anim=fr.nChanges===fr.nChangesAnim&&hr?"all":"some"),fr}function Tt(Oe,it,ft,pt,Dt){var Nt=M.layoutFlags();Nt.arrays={},Nt.rangesAltered={},Nt.nChanges=0,Nt.nChangesAnim=0;function hr(vr){return u.getLayoutValObject(ft,vr)}var fr={getValObject:hr,flags:Nt,immutable:pt,transition:Dt,gd:Oe};return Ot(it,ft,[],fr),(Nt.plot||Nt.calc)&&(Nt.layoutReplot=!0),Dt&&Nt.nChanges&&Nt.nChangesAnim&&(Nt.anim=Nt.nChanges===Nt.nChangesAnim?"all":"some"),Nt}function Ot(Oe,it,ft,pt){var Dt,Nt,hr,fr=pt.getValObject,vr=pt.flags,Ut=pt.immutable,Fr=pt.inArray,sa=pt.arrayIndex;function $r(){var rr=Dt.editType;if(Fr&&rr.indexOf("arraydraw")!==-1){n.pushUnique(vr.arrays[Fr],sa);return}M.update(vr,Dt),rr!=="none"&&vr.nChanges++,pt.transition&&Dt.anim&&vr.nChangesAnim++,(be.test(hr)||oe.test(hr))&&(vr.rangesAltered[ft[0]]=1),ce.test(hr)&&o(it,"_inputDomain").set(null),Nt==="datarevision"&&(vr.newDataRevision=1)}function Ca(rr){return rr.valType==="data_array"||rr.arrayOk}for(Nt in Oe){if(vr.calc&&!pt.transition)return;var on=Oe[Nt],Fa=it[Nt],jr=ft.concat(Nt);if(hr=jr.join("."),!(Nt.charAt(0)==="_"||typeof on=="function"||on===Fa)){if((Nt==="tick0"||Nt==="dtick")&&ft[0]!=="geo"){var Rn=it.tickmode;if(Rn==="auto"||Rn==="array"||!Rn)continue}if(!(Nt==="range"&&it.autorange)&&!((Nt==="zmin"||Nt==="zmax")&&it.type==="contourcarpet")&&(Dt=fr(jr),!!Dt&&!(Dt._compareAsJSON&&JSON.stringify(on)===JSON.stringify(Fa)))){var xa=Dt.valType,ia,vn=Ca(Dt),ka=Array.isArray(on),Ge=Array.isArray(Fa);if(ka&&Ge){var Pe="_input_"+Nt,Ne=Oe[Pe],We=it[Pe];if(Array.isArray(Ne)&&Ne===We)continue}if(Fa===void 0)vn&&ka?vr.calc=!0:$r();else if(Dt._isLinkedToArray){var lt=[],wt=!1;Fr||(vr.arrays[Nt]=lt);var Mt=Math.min(on.length,Fa.length),It=Math.max(on.length,Fa.length);if(Mt!==It)if(Dt.editType==="arraydraw")wt=!0;else{$r();continue}for(ia=0;ia<Mt;ia++)Ot(on[ia],Fa[ia],jr.concat(ia),n.extendFlat({inArray:Nt,arrayIndex:ia},pt));if(wt)for(ia=Mt;ia<It;ia++)lt.push(ia)}else!xa&&n.isPlainObject(on)?Ot(on,Fa,jr,pt):vn?ka&&Ge?(Ut&&(vr.calc=!0),(Ut||pt.newDataRevision)&&$r()):ka!==Ge?vr.calc=!0:$r():ka&&Ge?(on.length!==Fa.length||String(on)!==String(Fa))&&$r():$r()}}}for(Nt in it)if(!(Nt in Oe||Nt.charAt(0)==="_"||typeof it[Nt]=="function"))if(Dt=fr(ft.concat(Nt)),Ca(Dt)&&Array.isArray(it[Nt])){vr.calc=!0;return}else $r()}function qt(Oe,it){var ft;for(ft in Oe)if(ft.charAt(0)!=="_"){var pt=Oe[ft],Dt=it[ft];if(pt!==Dt)if(n.isPlainObject(pt)&&n.isPlainObject(Dt)){if(qt(pt,Dt))return!0}else if(Array.isArray(pt)&&Array.isArray(Dt)){if(pt.length!==Dt.length)return!0;for(var Nt=0;Nt<pt.length;Nt++)if(pt[Nt]!==Dt[Nt])if(n.isPlainObject(pt[Nt])&&n.isPlainObject(Dt[Nt])){if(qt(pt[Nt],Dt[Nt]))return!0}else return!0}else return!0}}function Xt(Oe,it,ft){if(Oe=n.getGraphDiv(Oe),!n.isPlotDiv(Oe))throw new Error("This element is not a Plotly plot: "+Oe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var pt=Oe._transitionData;pt._frameQueue||(pt._frameQueue=[]),ft=f.supplyAnimationDefaults(ft);var Dt=ft.transition,Nt=ft.frame;pt._frameWaitingCnt===void 0&&(pt._frameWaitingCnt=0);function hr(Ut){return Array.isArray(Dt)?Ut>=Dt.length?Dt[0]:Dt[Ut]:Dt}function fr(Ut){return Array.isArray(Nt)?Ut>=Nt.length?Nt[0]:Nt[Ut]:Nt}function vr(Ut,Fr){var sa=0;return function(){if(Ut&&++sa===Fr)return Ut()}}return new Promise(function(Ut,Fr){function sa(){if(pt._frameQueue.length!==0){for(;pt._frameQueue.length;){var Mt=pt._frameQueue.pop();Mt.onInterrupt&&Mt.onInterrupt()}Oe.emit("plotly_animationinterrupted",[])}}function $r(Mt){if(Mt.length!==0){for(var It=0;It<Mt.length;It++){var rr;Mt[It].type==="byname"?rr=f.computeFrame(Oe,Mt[It].name):rr=Mt[It].data;var sr=fr(It),gr=hr(It);gr.duration=Math.min(gr.duration,sr.duration);var Ur={frame:rr,name:Mt[It].name,frameOpts:sr,transitionOpts:gr};It===Mt.length-1&&(Ur.onComplete=vr(Ut,2),Ur.onInterrupt=Fr),pt._frameQueue.push(Ur)}ft.mode==="immediate"&&(pt._lastFrameAt=-1/0),pt._animationRaf||Fa()}}function Ca(){Oe.emit("plotly_animated"),window.cancelAnimationFrame(pt._animationRaf),pt._animationRaf=null}function on(){pt._currentFrame&&pt._currentFrame.onComplete&&pt._currentFrame.onComplete();var Mt=pt._currentFrame=pt._frameQueue.shift();if(Mt){var It=Mt.name?Mt.name.toString():null;Oe._fullLayout._currentFrame=It,pt._lastFrameAt=Date.now(),pt._timeToNext=Mt.frameOpts.duration,f.transition(Oe,Mt.frame.data,Mt.frame.layout,_.coerceTraceIndices(Oe,Mt.frame.traces),Mt.frameOpts,Mt.transitionOpts).then(function(){Mt.onComplete&&Mt.onComplete()}),Oe.emit("plotly_animatingframe",{name:It,frame:Mt.frame,animation:{frame:Mt.frameOpts,transition:Mt.transitionOpts}})}else Ca()}function Fa(){Oe.emit("plotly_animating"),pt._lastFrameAt=-1/0,pt._timeToNext=0,pt._runningTransitions=0,pt._currentFrame=null;var Mt=function(){pt._animationRaf=window.requestAnimationFrame(Mt),Date.now()-pt._lastFrameAt>pt._timeToNext&&on()};Mt()}var jr=0;function Rn(Mt){return Array.isArray(Dt)?jr>=Dt.length?Mt.transitionOpts=Dt[jr]:Mt.transitionOpts=Dt[0]:Mt.transitionOpts=Dt,jr++,Mt}var xa,ia,vn=[],ka=it==null,Ge=Array.isArray(it),Pe=!ka&&!Ge&&n.isPlainObject(it);if(Pe)vn.push({type:"object",data:Rn(n.extendFlat({},it))});else if(ka||["string","number"].indexOf(typeof it)!==-1)for(xa=0;xa<pt._frames.length;xa++)ia=pt._frames[xa],!!ia&&(ka||String(ia.group)===String(it))&&vn.push({type:"byname",name:String(ia.name),data:Rn({name:ia.name})});else if(Ge)for(xa=0;xa<it.length;xa++){var Ne=it[xa];["number","string"].indexOf(typeof Ne)!==-1?(Ne=String(Ne),vn.push({type:"byname",name:Ne,data:Rn({name:Ne})})):n.isPlainObject(Ne)&&vn.push({type:"object",data:Rn(n.extendFlat({},Ne))})}for(xa=0;xa<vn.length;xa++)if(ia=vn[xa],ia.type==="byname"&&!pt._frameHash[ia.data.name]){n.warn('animate failure: frame not found: "'+ia.data.name+'"'),Fr();return}["next","immediate"].indexOf(ft.mode)!==-1&&sa(),ft.direction==="reverse"&&vn.reverse();var We=Oe._fullLayout._currentFrame;if(We&&ft.fromcurrent){var lt=-1;for(xa=0;xa<vn.length;xa++)if(ia=vn[xa],ia.type==="byname"&&ia.name===We){lt=xa;break}if(lt>0&&lt<vn.length-1){var wt=[];for(xa=0;xa<vn.length;xa++)ia=vn[xa],(vn[xa].type!=="byname"||xa>lt)&&wt.push(ia);vn=wt}}vn.length>0?$r(vn):(Oe.emit("plotly_animated"),Ut())})}function Or(Oe,it,ft){if(Oe=n.getGraphDiv(Oe),it==null)return Promise.resolve();if(!n.isPlotDiv(Oe))throw new Error("This element is not a Plotly plot: "+Oe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var pt,Dt,Nt,hr,fr=Oe._transitionData._frames,vr=Oe._transitionData._frameHash;if(!Array.isArray(it))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+it);var Ut=fr.length+it.length*2,Fr=[],sa={};for(pt=it.length-1;pt>=0;pt--)if(!!n.isPlainObject(it[pt])){var $r=it[pt].name,Ca=(vr[$r]||sa[$r]||{}).name,on=it[pt].name,Fa=vr[Ca]||sa[Ca];Ca&&on&&typeof on=="number"&&Fa&&A<k&&(A++,n.warn('addFrames: overwriting frame "'+(vr[Ca]||sa[Ca]).name+'" with a frame whose name of type "number" also equates to "'+Ca+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),A===k&&n.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),sa[$r]={name:$r},Fr.push({frame:f.supplyFrameDefaults(it[pt]),index:ft&&ft[pt]!==void 0&&ft[pt]!==null?ft[pt]:Ut+pt})}Fr.sort(function(Pe,Ne){return Pe.index>Ne.index?-1:Pe.index<Ne.index?1:0});var jr=[],Rn=[],xa=fr.length;for(pt=Fr.length-1;pt>=0;pt--){if(Dt=Fr[pt].frame,typeof Dt.name=="number"&&n.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Dt.name)for(;vr[Dt.name="frame "+Oe._transitionData._counter++];);if(vr[Dt.name]){for(Nt=0;Nt<fr.length&&(fr[Nt]||{}).name!==Dt.name;Nt++);jr.push({type:"replace",index:Nt,value:Dt}),Rn.unshift({type:"replace",index:Nt,value:fr[Nt]})}else hr=Math.max(0,Math.min(Fr[pt].index,xa)),jr.push({type:"insert",index:hr,value:Dt}),Rn.unshift({type:"delete",index:hr}),xa++}var ia=f.modifyFrames,vn=f.modifyFrames,ka=[Oe,Rn],Ge=[Oe,jr];return s&&s.add(Oe,ia,ka,vn,Ge),f.modifyFrames(Oe,jr)}function Br(Oe,it){if(Oe=n.getGraphDiv(Oe),!n.isPlotDiv(Oe))throw new Error("This element is not a Plotly plot: "+Oe);var ft,pt,Dt=Oe._transitionData._frames,Nt=[],hr=[];if(!it)for(it=[],ft=0;ft<Dt.length;ft++)it.push(ft);for(it=it.slice(),it.sort(),ft=it.length-1;ft>=0;ft--)pt=it[ft],Nt.push({type:"delete",index:pt}),hr.unshift({type:"insert",index:pt,value:Dt[pt]});var fr=f.modifyFrames,vr=f.modifyFrames,Ut=[Oe,hr],Fr=[Oe,Nt];return s&&s.add(Oe,fr,Ut,vr,Fr),f.modifyFrames(Oe,Nt)}function Qr(Oe){Oe=n.getGraphDiv(Oe);var it=Oe._fullLayout||{},ft=Oe._fullData||[];return f.cleanPlot([],{},ft,it),f.purge(Oe),i.purge(Oe),it._container&&it._container.remove(),delete Oe._context,Oe}function Sr(Oe){var it=Oe._fullLayout,ft=Oe.getBoundingClientRect();if(!n.equalDomRects(ft,it._lastBBox)){var pt=it._invTransform=n.inverseTransformMatrix(n.getFullTransformMatrix(Oe));it._invScaleX=Math.sqrt(pt[0][0]*pt[0][0]+pt[0][1]*pt[0][1]+pt[0][2]*pt[0][2]),it._invScaleY=Math.sqrt(pt[1][0]*pt[1][0]+pt[1][1]*pt[1][1]+pt[1][2]*pt[1][2]),it._lastBBox=ft}}function Zr(Oe){var it=t.select(Oe),ft=Oe._fullLayout;if(ft._calcInverseTransform=Sr,ft._calcInverseTransform(Oe),ft._container=it.selectAll(".plot-container").data([0]),ft._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ft._paperdiv=ft._container.selectAll(".svg-container").data([0]),ft._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ft._glcontainer=ft._paperdiv.selectAll(".gl-container").data([{}]),ft._glcontainer.enter().append("div").classed("gl-container",!0),ft._paperdiv.selectAll(".main-svg").remove(),ft._paperdiv.select(".modebar-container").remove(),ft._paper=ft._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ft._toppaper=ft._paperdiv.append("svg").classed("main-svg",!0),ft._modebardiv=ft._paperdiv.append("div"),delete ft._modeBar,ft._hoverpaper=ft._paperdiv.append("svg").classed("main-svg",!0),!ft._uid){var pt={};t.selectAll("defs").each(function(){this.id&&(pt[this.id.split("-")[1]]=1)}),ft._uid=n.randstr(pt)}ft._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),ft._defs=ft._paper.append("defs").attr("id","defs-"+ft._uid),ft._clips=ft._defs.append("g").classed("clips",!0),ft._topdefs=ft._toppaper.append("defs").attr("id","topdefs-"+ft._uid),ft._topclips=ft._topdefs.append("g").classed("clips",!0),ft._bgLayer=ft._paper.append("g").classed("bglayer",!0),ft._draggers=ft._paper.append("g").classed("draglayer",!0);var Dt=ft._paper.append("g").classed("layer-below",!0);ft._imageLowerLayer=Dt.append("g").classed("imagelayer",!0),ft._shapeLowerLayer=Dt.append("g").classed("shapelayer",!0),ft._cartesianlayer=ft._paper.append("g").classed("cartesianlayer",!0),ft._polarlayer=ft._paper.append("g").classed("polarlayer",!0),ft._smithlayer=ft._paper.append("g").classed("smithlayer",!0),ft._ternarylayer=ft._paper.append("g").classed("ternarylayer",!0),ft._geolayer=ft._paper.append("g").classed("geolayer",!0),ft._funnelarealayer=ft._paper.append("g").classed("funnelarealayer",!0),ft._pielayer=ft._paper.append("g").classed("pielayer",!0),ft._iciclelayer=ft._paper.append("g").classed("iciclelayer",!0),ft._treemaplayer=ft._paper.append("g").classed("treemaplayer",!0),ft._sunburstlayer=ft._paper.append("g").classed("sunburstlayer",!0),ft._indicatorlayer=ft._toppaper.append("g").classed("indicatorlayer",!0),ft._glimages=ft._paper.append("g").classed("glimages",!0);var Nt=ft._toppaper.append("g").classed("layer-above",!0);ft._imageUpperLayer=Nt.append("g").classed("imagelayer",!0),ft._shapeUpperLayer=Nt.append("g").classed("shapelayer",!0),ft._infolayer=ft._toppaper.append("g").classed("infolayer",!0),ft._menulayer=ft._toppaper.append("g").classed("menulayer",!0),ft._zoomlayer=ft._toppaper.append("g").classed("zoomlayer",!0),ft._hoverlayer=ft._hoverpaper.append("g").classed("hoverlayer",!0),ft._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Oe.emit("plotly_framework")}e.animate=Xt,e.addFrames=Or,e.deleteFrames=Br,e.addTraces=we,e.deleteTraces=Te,e.extendTraces=ae,e.moveTraces=he,e.prependTraces=ie,e.newPlot=D,e._doPlot=T,e.purge=Qr,e.react=_t,e.redraw=N,e.relayout=Ie,e.restyle=xe,e.setPlotConfig=C,e.update=Xe,e._guiRelayout=Ke(Ie),e._guiRestyle=Ke(xe),e._guiUpdate=Ke(Xe),e._storeDirectGUIEdit=se})(P5);var Ru={},_Re=Pa;Ru.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0};Ru.getRedrawFunc=function(e){return function(){_Re.getComponentMethod("colorbar","draw")(e)}};Ru.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};Ru.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var MQ=window.URL||window.webkitURL;Ru.createObjectURL=function(e){return MQ.createObjectURL(e)};Ru.revokeObjectURL=function(e){return MQ.revokeObjectURL(e)};Ru.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=wRe(window.atob(e));return new window.Blob([r],{type:"image/"+t})};Ru.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function wRe(e){for(var t=e.length,r=new ArrayBuffer(t),a=new Uint8Array(r),n=0;n<t;n++)a[n]=e.charCodeAt(n);return r}Ru.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;Ru.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.";var VF=Ra.exports,TRe=bt.exports,ARe=xn.exports,SRe=Oa.exports,UE=Xh,jF=/"/g,HT="TOBESTRIPPED",MRe=new RegExp('("'+HT+")|("+HT+'")',"g");function kRe(e){var t=VF.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(a){return a==="&lt;"?"&#60;":a==="&rt;"?"&#62;":a.indexOf("<")!==-1||a.indexOf(">")!==-1?"":t.html(a).text()});return t.remove(),r}function ERe(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}var qF=function(t,r,a){var n=t._fullLayout,o=n._paper,i=n._toppaper,s=n.width,l=n.height,u,f;o.insert("rect",":first-child").call(ARe.setRect,0,0,s,l).call(SRe.fill,n.paper_bgcolor);var c=n._basePlotModules||[];for(u=0;u<c.length;u++){var h=c[u];h.toSVG&&h.toSVG(t)}if(i){var v=i.node().childNodes,p=Array.prototype.slice.call(v);for(u=0;u<p.length;u++){var d=p[u];d.childNodes.length&&o.node().appendChild(d)}}n._draggers&&n._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var y=VF.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){y.remove();return}else y.style({visibility:null,display:null});var _=this.style.fontFamily;_&&_.indexOf('"')!==-1&&y.style("font-family",_.replace(jF,HT))});var g=[];if(n._gradientUrlQueryParts)for(f in n._gradientUrlQueryParts)g.push(f);if(n._patternUrlQueryParts)for(f in n._patternUrlQueryParts)g.push(f);g.length&&o.selectAll(g.join(",")).each(function(){var y=VF.select(this),_=this.style.fill;_&&_.indexOf("url(")!==-1&&y.style("fill",_.replace(jF,HT));var S=this.style.stroke;S&&S.indexOf("url(")!==-1&&y.style("stroke",S.replace(jF,HT))}),(r==="pdf"||r==="eps")&&o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(UE.xmlns,"xmlns",UE.svg),o.node().setAttributeNS(UE.xmlns,"xmlns:xlink",UE.xlink),r==="svg"&&a&&(o.attr("width",a*s),o.attr("height",a*l),o.attr("viewBox","0 0 "+s+" "+l));var m=new window.XMLSerializer().serializeToString(o.node());return m=kRe(m),m=ERe(m),m=m.replace(MRe,"'"),TRe.isIE()&&(m=m.replace(/"/gi,"'"),m=m.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),m=m.replace(/(\\')/gi,'"')),m},kQ=bt.exports,CRe=oT.exports.EventEmitter,e2=Ru;function LRe(e){var t=e.emitter||new CRe,r=new Promise(function(a,n){var o=window.Image,i=e.svg,s=e.format||"png";if(kQ.isIE()&&s!=="svg"){var l=new Error(e2.MSG_IE_BAD_FORMAT);return n(l),e.promise?r:t.emit("error",l)}var u=e.canvas,f=e.scale||1,c=e.width||300,h=e.height||150,v=f*c,p=f*h,d=u.getContext("2d"),g=new o,m,y;s==="svg"||kQ.isSafari()?y=e2.encodeSVG(i):(m=e2.createBlob(i,"svg"),y=e2.createObjectURL(m)),u.width=v,u.height=p,g.onload=function(){var _;switch(m=null,e2.revokeObjectURL(y),s!=="svg"&&d.drawImage(g,0,0,v,p),s){case"jpeg":_=u.toDataURL("image/jpeg");break;case"png":_=u.toDataURL("image/png");break;case"webp":_=u.toDataURL("image/webp");break;case"svg":_=y;break;default:var S="Image format is not jpeg, png, svg or webp.";if(n(new Error(S)),!e.promise)return t.emit("error",S)}a(_),e.promise||t.emit("success",_)},g.onerror=function(_){if(m=null,e2.revokeObjectURL(y),n(_),!e.promise)return t.emit("error",_)},g.src=y});return e.promise?r:t}var YF=LRe,EQ=gn,CQ=P5,PRe=Eo.exports,r0=bt.exports,GT=Ru,IRe=qF,DRe=YF,RRe=fR.version,WF={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};function zRe(e,t){t=t||{};var r,a,n,o;r0.isPlainObject(e)?(r=e.data||[],a=e.layout||{},n=e.config||{},o={}):(e=r0.getGraphDiv(e),r=r0.extendDeep([],e.data),a=r0.extendDeep({},e.layout),n=e._context,o=e._fullLayout||{});function i(w){return!(w in t)||r0.validate(t[w],WF[w])}if(!i("width")&&t.width!==null||!i("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!i("format"))throw new Error("Export format is not "+r0.join2(WF.format.values,", "," or ")+".");var s={};function l(w,A){return r0.coerce(t,s,WF,w,A)}var u=l("format"),f=l("width"),c=l("height"),h=l("scale"),v=l("setBackground"),p=l("imageDataOnly"),d=document.createElement("div");d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var g=r0.extendFlat({},a);f?g.width=f:t.width===null&&EQ(o.width)&&(g.width=o.width),c?g.height=c:t.height===null&&EQ(o.height)&&(g.height=o.height);var m=r0.extendFlat({},n,{_exportedPlot:!0,staticPlot:!0,setBackground:v}),y=GT.getRedrawFunc(d);function _(){return new Promise(function(w){setTimeout(w,GT.getDelay(d._fullLayout))})}function S(){return new Promise(function(w,A){var k=IRe(d,u,h),T=d._fullLayout.width,L=d._fullLayout.height;function C(){CQ.purge(d),document.body.removeChild(d)}if(u==="full-json"){var I=PRe.graphJson(d,!1,"keepdata","object",!0,!0);return I.version=RRe,I=JSON.stringify(I),C(),w(p?I:GT.encodeJSON(I))}if(C(),u==="svg")return w(p?k:GT.encodeSVG(k));var R=document.createElement("canvas");R.id=r0.randstr(),DRe({format:u,width:T,height:L,scale:h,canvas:R,svg:k,promise:!0}).then(w).catch(A)})}function M(w){return p?w.replace(GT.IMAGE_URL_PREFIX,""):w}return new Promise(function(w,A){CQ.newPlot(d,r,g,m).then(y).then(_).then(S).then(function(k){w(M(k))}).catch(function(k){A(k)})})}var LQ=zRe,Fv=bt.exports,FRe=Eo.exports,ORe=ly,NRe=k_.dfltConfig,Ov=Fv.isPlainObject,gy=Array.isArray,PQ=Fv.isArrayOrTypedArray,BRe=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var a=ORe.get(),n=[],o={_context:Fv.extendFlat({},NRe)},i,s;gy(t)?(o.data=Fv.extendDeep([],t),i=t):(o.data=[],i=[],n.push(ul("array","data"))),Ov(r)?(o.layout=Fv.extendDeep({},r),s=r):(o.layout={},s={},arguments.length>1&&n.push(ul("object","layout"))),FRe.supplyDefaults(o);for(var l=o._fullData,u=i.length,f=0;f<u;f++){var c=i[f],h=["data",f];if(!Ov(c)){n.push(ul("object",h));continue}var v=l[f],p=v.type,d=a.traces[p].attributes;d.type={valType:"enumerated",values:[p]},v.visible===!1&&c.visible!==!1&&n.push(ul("invisible",h)),VT(c,v,d,n,h);var g=c.transforms,m=v.transforms;if(g){gy(g)||n.push(ul("array",h,["transforms"])),h.push("transforms");for(var y=0;y<g.length;y++){var _=["transforms",y],S=g[y].type;if(!Ov(g[y])){n.push(ul("object",h,_));continue}var M=a.transforms[S]?a.transforms[S].attributes:{};M.type={valType:"enumerated",values:Object.keys(a.transforms)},VT(g[y],m[y],M,n,h,_)}}}var w=o._fullLayout,A=$Re(a,l);return VT(s,w,A,n,"layout"),n.length===0?void 0:n};function VT(e,t,r,a,n,o){o=o||[];for(var i=Object.keys(e),s=0;s<i.length;s++){var l=i[s];if(l!=="transforms"){var u=o.slice();u.push(l);var f=e[l],c=t[l],h=GRe(r,l),v=(h||{}).valType,p=v==="info_array",d=v==="colorscale",g=(h||{}).items;if(!HRe(r,l))a.push(ul("schema",n,u));else if(Ov(f)&&Ov(c)&&v!=="any")VT(f,c,h,a,n,u);else if(p&&gy(f)){f.length>c.length&&a.push(ul("unused",n,u.concat(c.length)));var m=c.length,y=Array.isArray(g);y&&(m=Math.min(m,g.length));var _,S,M,w,A;if(h.dimensions===2)for(S=0;S<m;S++)if(gy(f[S])){f[S].length>c[S].length&&a.push(ul("unused",n,u.concat(S,c[S].length)));var k=c[S].length;for(_=0;_<(y?Math.min(k,g[S].length):k);_++)M=y?g[S][_]:g,w=f[S][_],A=c[S][_],Fv.validate(w,M)?A!==w&&A!==+w&&a.push(ul("dynamic",n,u.concat(S,_),w,A)):a.push(ul("value",n,u.concat(S,_),w))}else a.push(ul("array",n,u.concat(S),f[S]));else for(S=0;S<m;S++)M=y?g[S]:g,w=f[S],A=c[S],Fv.validate(w,M)?A!==w&&A!==+w&&a.push(ul("dynamic",n,u.concat(S),w,A)):a.push(ul("value",n,u.concat(S),w))}else if(h.items&&!p&&gy(f)){var T=g[Object.keys(g)[0]],L=[],C,I;for(C=0;C<c.length;C++){var R=c[C]._index||C;if(I=u.slice(),I.push(R),Ov(f[R])&&Ov(c[C])){L.push(R);var B=f[R],N=c[C];Ov(B)&&B.visible!==!1&&N.visible===!1?a.push(ul("invisible",n,I)):VT(B,N,T,a,n,I)}}for(C=0;C<f.length;C++)I=u.slice(),I.push(C),Ov(f[C])?L.indexOf(C)===-1&&a.push(ul("unused",n,I)):a.push(ul("object",n,I,f[C]))}else!Ov(f)&&Ov(c)?a.push(ul("object",n,u,f)):!PQ(f)&&PQ(c)&&!p&&!d?a.push(ul("array",n,u,f)):l in t?Fv.validate(f,h)?h.valType==="enumerated"&&(h.coerceNumber&&f!==+c||f!==c)&&a.push(ul("dynamic",n,u,f,c)):a.push(ul("value",n,u,f)):a.push(ul("unused",n,u,f))}}return a}function $Re(e,t){for(var r=e.layout.layoutAttributes,a=0;a<t.length;a++){var n=t[a],o=e.traces[n.type],i=o.layoutAttributes;i&&(n.subplot?Fv.extendFlat(r[o.attributes.subplot.dflt],i):Fv.extendFlat(r,i))}return r}var URe={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Mx(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Mx(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Mx(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var a=Ov(r)?"container":"key";return Mx(e)+a+" "+t+" did not get coerced"},dynamic:function(e,t,r,a){return[Mx(e)+"key",t,"(set to '"+r+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Mx(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Mx(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Mx(e){return gy(e)?"In data trace "+e[1]+", ":"In "+e+", "}function ul(e,t,r,a,n){r=r||"";var o,i;gy(t)?(o=t[0],i=t[1]):(o=t,i=null);var s=jRe(r),l=URe[e](t,s,a,n);return Fv.log(l),{code:e,container:o,trace:i,path:r,astr:s,msg:l}}function HRe(e,t){var r=IQ(t),a=r.keyMinusId,n=r.id;return a in e&&e[a]._isSubplotObj&&n?!0:t in e}function GRe(e,t){if(t in e)return e[t];var r=IQ(t);return e[r.keyMinusId]}var VRe=Fv.counterRegex("([a-z]+)");function IQ(e){var t=e.match(VRe);return{keyMinusId:t&&t[1],id:t&&t[2]}}function jRe(e){if(!gy(e))return String(e);for(var t="",r=0;r<e.length;r++){var a=e[r];typeof a=="number"?t=t.substr(0,t.length-1)+"["+a+"]":t+=a,r<e.length-1&&(t+=".")}return t}var DQ=bt.exports,jT=Ru;function qRe(e,t,r){var a=document.createElement("a"),n="download"in a,o=new Promise(function(i,s){var l,u;if(DQ.isIE())return l=jT.createBlob(e,"svg"),window.navigator.msSaveBlob(l,t),l=null,i(t);if(n)return l=jT.createBlob(e,r),u=jT.createObjectURL(l),a.href=u,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),jT.revokeObjectURL(u),l=null,i(t);if(DQ.isSafari()){var f=r==="svg"?",":";base64,";return jT.octetStream(f+encodeURIComponent(e)),i(t)}s(new Error("download error"))});return o}var YRe=qRe,XF=bt.exports,WRe=LQ,XRe=YRe,ZRe=Ru;function KRe(e,t){var r;return XF.isPlainObject(e)||(r=XF.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(a,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),XF.isIE()&&t.format!=="svg"&&n(new Error(ZRe.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var o=WRe(e,t),i=t.filename||e.fn||"newplot";i+="."+t.format.replace("-","."),o.then(function(s){return r&&(r._snapshotInProgress=!1),XRe(s,i,t.format)}).then(function(s){a(s)}).catch(function(s){r&&(r._snapshotInProgress=!1),n(s)})})}var RQ=KRe,ZF={},lh=bt.exports,uh=lh.isPlainObject,zQ=ly,FQ=Eo.exports,JRe=ao,OQ=si,NQ=k_.dfltConfig;ZF.makeTemplate=function(e){e=lh.isPlainObject(e)?e:lh.getGraphDiv(e),e=lh.extendDeep({_context:NQ},{data:e.data,layout:e.layout}),FQ.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var a={data:{},layout:{}};t.forEach(function(v){var p={};qT(v,p,eze.bind(null,v));var d=lh.coerce(v,{},JRe,"type"),g=a.data[d];g||(g=a.data[d]=[]),g.push(p)}),qT(r,a.layout,QRe.bind(null,r)),delete a.layout.template;var n=r.template;if(uh(n)){var o=n.layout,i,s,l,u,f,c;uh(o)&&HE(o,a.layout);var h=n.data;if(uh(h)){for(s in a.data)if(l=h[s],Array.isArray(l)){for(f=a.data[s],c=f.length,u=l.length,i=0;i<c;i++)HE(l[i%u],f[i]);for(i=c;i<u;i++)f.push(lh.extendDeep({},l[i]))}for(s in h)s in a.data||(a.data[s]=lh.extendDeep([],h[s]))}}return a};function HE(e,t){e=lh.extendDeep({},e);var r=Object.keys(e).sort(),a,n;function o(f,c,h){if(uh(c)&&uh(f))HE(f,c);else if(Array.isArray(c)&&Array.isArray(f)){var v=OQ.arrayTemplater({_template:e},h);for(n=0;n<c.length;n++){var p=c[n],d=v.newItem(p)._template;d&&HE(d,p)}var g=v.defaultItems();for(n=0;n<g.length;n++)c.push(g[n]._template);for(n=0;n<c.length;n++)delete c[n].templateitemname}}for(a=0;a<r.length;a++){var i=r[a],s=e[i];if(i in t?o(s,t[i],i):t[i]=s,GE(i)===i)for(var l in t){var u=GE(l);l!==u&&u===i&&!(l in e)&&o(s,t[l],i)}}}function GE(e){return e.replace(/[0-9]+$/,"")}function qT(e,t,r,a,n){var o=n&&r(n);for(var i in e){var s=e[i],l=Nv(e,i,a),u=Nv(e,i,n),f=r(u);if(!f){var c=GE(i);c!==i&&(u=Nv(e,c,n),f=r(u))}if(!(o&&o===f)&&!(!f||f._noTemplating||f.valType==="data_array"||f.arrayOk&&Array.isArray(s)))if(!f.valType&&uh(s))qT(s,t,r,l,u);else if(f._isLinkedToArray&&Array.isArray(s))for(var h=!1,v=0,p={},d=0;d<s.length;d++){var g=s[d];if(uh(g)){var m=g.name;if(m)p[m]||(qT(g,t,r,Nv(s,v,l),Nv(s,v,u)),v++,p[m]=1);else if(!h){var y=OQ.arrayDefaultKey(i),_=Nv(e,y,a),S=Nv(s,v,l);qT(g,t,r,S,Nv(s,v,u));var M=lh.nestedProperty(t,S),w=lh.nestedProperty(t,_);w.set(M.get()),M.set(null),h=!0}}}else{var A=lh.nestedProperty(t,l);A.set(s)}}}function QRe(e,t){return zQ.getLayoutValObject(e,lh.nestedProperty({},t).parts)}function eze(e,t){return zQ.getTraceValObject(e,lh.nestedProperty({},t).parts)}function Nv(e,t,r){var a;return r?Array.isArray(e)?a=r+"["+t+"]":a=r+"."+t:a=t,a}ZF.validateTemplate=function(e,t){var r=lh.extendDeep({},{_context:NQ,data:e.data,layout:e.layout}),a=r.layout||{};uh(t)||(t=a.template||{});var n=t.layout,o=t.data,i=[];r.layout=a,r.layout.template=t,FQ.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,u={};function f(_,S){for(var M in _)if(M.charAt(0)!=="_"&&uh(_[M])){var w=GE(M),A=[],k;for(k=0;k<S.length;k++)A.push(Nv(_,M,S[k])),w!==M&&A.push(Nv(_,w,S[k]));for(k=0;k<A.length;k++)u[A[k]]=1;f(_[M],A)}}function c(_,S){for(var M in _)if(M.indexOf("defaults")===-1&&uh(_[M])){var w=Nv(_,M,S);u[w]?c(_[M],w):i.push({code:"unused",path:w})}}if(uh(n)?(f(s,["layout"]),c(n,"layout")):i.push({code:"layout"}),!uh(o))i.push({code:"data"});else{for(var h={},v,p=0;p<l.length;p++){var d=l[p];v=d.type,h[v]=(h[v]||0)+1,d._fullInput._template||i.push({code:"missing",index:d._fullInput.index,traceType:v})}for(v in o){var g=o[v].length,m=h[v]||0;g>m?i.push({code:"unused",traceType:v,templateCount:g,dataCount:m}):m>g&&i.push({code:"reused",traceType:v,templateCount:g,dataCount:m})}}function y(_,S){for(var M in _)if(M.charAt(0)!=="_"){var w=_[M],A=Nv(_,M,S);uh(w)?(Array.isArray(_)&&w._template===!1&&w.templateitemname&&i.push({code:"missing",path:A,templateitemname:w.templateitemname}),y(w,A)):Array.isArray(w)&&tze(w)&&y(w,A)}}if(y({data:l,layout:s},""),i.length)return i.map(rze)};function tze(e){for(var t=0;t<e.length;t++)if(uh(e[t]))return!0}function rze(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}var El=P5;fs._doPlot=El._doPlot;fs.newPlot=El.newPlot;fs.restyle=El.restyle;fs.relayout=El.relayout;fs.redraw=El.redraw;fs.update=El.update;fs._guiRestyle=El._guiRestyle;fs._guiRelayout=El._guiRelayout;fs._guiUpdate=El._guiUpdate;fs._storeDirectGUIEdit=El._storeDirectGUIEdit;fs.react=El.react;fs.extendTraces=El.extendTraces;fs.prependTraces=El.prependTraces;fs.addTraces=El.addTraces;fs.deleteTraces=El.deleteTraces;fs.moveTraces=El.moveTraces;fs.purge=El.purge;fs.addFrames=El.addFrames;fs.deleteFrames=El.deleteFrames;fs.animate=El.animate;fs.setPlotConfig=El.setPlotConfig;fs.toImage=LQ;fs.validate=BRe;fs.downloadImage=RQ;var BQ=ZF;fs.makeTemplate=BQ.makeTemplate;fs.validateTemplate=BQ.validateTemplate;var zn={},$Q=JX,aze=$Q.FORMAT_LINK,nze=$Q.DATE_FORMAT_LINK;function UQ(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,aze,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,nze,"for details on the date formatting syntax."].join(" ")}function HQ(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var a=[],n=0;n<r.length;n++)a[n]="`"+r[n]+"`";t=t+"Finally, the template string has access to ",r.length===1?t="variable "+a[0]:t="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return t}zn.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=HQ(t),a={valType:"string",dflt:"",editType:e.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",UQ({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return e.arrayOk!==!1&&(a.arrayOk=!0),a};zn.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=HQ(t),a={valType:"string",dflt:"",editType:e.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",UQ(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r].join(" ")};return e.arrayOk!==!1&&(a.arrayOk=!0),a};var Hg={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},GQ=Ss.axisHoverFormat,ize=zn.texttemplateAttrs,oze=zn.hovertemplateAttrs,VQ=bo,sze=Ts,lze=Bd.dash,uze=xn.exports,jQ=Hg,KF=cn.extendFlat;function qQ(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function YQ(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function WQ(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}var Cl={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:qQ("x"),yperiod:qQ("y"),xperiod0:YQ("x0"),yperiod0:YQ("y0"),xperiodalignment:WQ("x"),yperiodalignment:WQ("y"),xhoverformat:GQ("x"),yhoverformat:GQ("y"),stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:ize({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+jQ.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:oze({},{keys:jQ.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:KF({},lze,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},marker:KF({symbol:{valType:"enumerated",values:uze.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:KF({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},VQ("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},VQ("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:sze({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})},JF=bt.exports,fze=Pa,YT=function(t,r,a,n){var o=n("x"),i=n("y"),s,l=fze.getComponentMethod("calendars","handleTraceDefaults");if(l(t,r,["x","y"],a),o){var u=JF.minRowLength(o);i?s=Math.min(u,JF.minRowLength(i)):(s=u,n("y0"),n("dy"))}else{if(!i)return 0;s=JF.minRowLength(i),n("x0"),n("dx")}return r._length=s,s},XQ=bt.exports.dateTick0,cze=Un,hze=cze.ONEWEEK;function ZQ(e,t){return e%hze==0?XQ(t,1):XQ(t,0)}var a0=function(t,r,a,n,o){if(o||(o={x:!0,y:!0}),o.x){var i=n("xperiod");i&&(n("xperiod0",ZQ(i,r.xcalendar)),n("xperiodalignment"))}if(o.y){var s=n("yperiod");s&&(n("yperiod0",ZQ(s,r.ycalendar)),n("yperiodalignment"))}},KQ=["orientation","groupnorm","stackgaps"],vze=function(t,r,a,n){var o=a._scatterStackOpts,i=n("stackgroup");if(i){var s=r.xaxis+r.yaxis,l=o[s];l||(l=o[s]={});var u=l[i],f=!1;u?u.traces.push(r):(u=l[i]={traceIndices:[],traces:[r]},f=!0);for(var c={orientation:r.x&&!r.y?"h":"v"},h=0;h<KQ.length;h++){var v=KQ[h],p=v+"Found";if(!u[p]){var d=t[v]!==void 0,g=v==="orientation";if((d||f)&&(u[v]=n(v,c[v]),g&&(u.fillDflt=u[v]==="h"?"tonextx":"tonexty"),d&&(u[p]=!0,!f&&(delete u.traces[0][v],g))))for(var m=0;m<u.traces.length-1;m++){var y=u.traces[m];y._input.fill!==y.fill&&(y.fill=u.fillDflt)}}}return u}},JQ=Oa.exports,QQ=ac.hasColorscale,eee=su,dze=Ro,Wd=function(t,r,a,n,o,i){var s=dze.isBubble(t),l=(t.line||{}).color,u;if(i=i||{},l&&(a=l),o("marker.symbol"),o("marker.opacity",s?.7:1),o("marker.size"),o("marker.color",a),QQ(t,"marker")&&eee(t,r,n,o,{prefix:"marker.",cLetter:"c"}),i.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),i.noLine||(l&&!Array.isArray(l)&&r.marker.color!==l?u=l:s?u=JQ.background:u=JQ.defaultLine,o("marker.line.color",u),QQ(t,"marker.line")&&eee(t,r,n,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",s?1:0)),s&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),i.gradient){var f=o("marker.gradient.type");f!=="none"&&o("marker.gradient.color")}},pze=bt.exports.isArrayOrTypedArray,gze=ac.hasColorscale,mze=su,n0=function(t,r,a,n,o,i){var s=(t.marker||{}).color;if(o("line.color",a),gze(t,"line"))mze(t,r,n,o,{prefix:"line.",cLetter:"c"});else{var l=(pze(s)?!1:s)||a;o("line.color",l)}o("line.width"),(i||{}).noDash||o("line.dash")},WT=function(t,r,a){var n=a("line.shape");n==="spline"&&a("line.smoothing")},yze=bt.exports,i0=function(e,t,r,a,n){n=n||{},a("textposition"),yze.coerceFont(a,"textfont",r.font),n.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))},xze=Oa.exports,tee=bt.exports.isArrayOrTypedArray,Gg=function(t,r,a,n){var o=!1;if(r.marker){var i=r.marker.color,s=(r.marker.line||{}).color;i&&!tee(i)?o=i:s&&!tee(s)&&(o=s)}n("fillcolor",xze.addOpacity((r.line||{}).color||o||a,.5))},ree=bt.exports,bze=Pa,_ze=Cl,wze=Hg,t2=Ro,Tze=YT,Aze=a0,Sze=vze,Mze=Wd,kze=n0,aee=WT,Eze=i0,Cze=Gg,Lze=function(t,r,a,n){function o(v,p){return ree.coerce(t,r,_ze,v,p)}var i=Tze(t,r,n,o);if(i||(r.visible=!1),!!r.visible){Aze(t,r,n,o),o("xhoverformat"),o("yhoverformat");var s=Sze(t,r,n,o),l=!s&&i<wze.PTS_LINESONLY?"lines+markers":"lines";o("text"),o("hovertext"),o("mode",l),t2.hasLines(r)&&(kze(t,r,a,n,o),aee(t,r,o),o("connectgaps"),o("line.simplify")),t2.hasMarkers(r)&&Mze(t,r,a,n,o,{gradient:!0}),t2.hasText(r)&&(o("texttemplate"),Eze(t,r,n,o));var u=[];(t2.hasMarkers(r)||t2.hasText(r))&&(o("cliponaxis"),o("marker.maxdisplayed"),u.push("points")),o("fill",s?s.fillDflt:"none"),r.fill!=="none"&&(Cze(t,r,a,o),t2.hasLines(r)||aee(t,r,o));var f=(r.line||{}).color,c=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&u.push("fills"),o("hoveron",u.join("+")||"points"),r.hoveron!=="fills"&&o("hovertemplate");var h=bze.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||a,{axis:"y"}),h(t,r,f||c||a,{axis:"x",inherit:"y"}),ree.coerceSelectionMarkerOpacity(r,o)}},nee=function(t){for(var r=0;r<t.length;r++){var a=t[r];if(a.type==="scatter"){var n=a.fill;if(!(n==="none"||n==="toself")&&(a.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var o=r-1;o>=0;o--){var i=t[o];if(i.type==="scatter"&&i.xaxis===a.xaxis&&i.yaxis===a.yaxis){i.opacity=void 0;break}}}}},Pze=gn,iee=bt.exports,Ize=iee.dateTime2ms,VE=iee.incrementMonth,Dze=Un,Rze=Dze.ONEAVGMONTH,o0=function(t,r,a,n){if(r.type!=="date")return{vals:n};var o=t[a+"periodalignment"];if(!o)return{vals:n};var i=t[a+"period"],s;if(Pze(i)){if(i=+i,i<=0)return{vals:n}}else if(typeof i=="string"&&i.charAt(0)==="M"){var l=+i.substring(1);if(l>0&&Math.round(l)===l)s=l;else return{vals:n}}for(var u=r.calendar,f=o==="start",c=o==="end",h=t[a+"period0"],v=Ize(h,u)||0,p=[],d=[],g=[],m=n.length,y=0;y<m;y++){var _=n[y],S,M,w;if(s){for(S=Math.round((_-v)/(s*Rze)),w=VE(v,s*S,u);w>_;)w=VE(w,-s,u);for(;w<=_;)w=VE(w,s,u);M=VE(w,-s,u)}else{for(S=Math.round((_-v)/i),w=v+S*i;w>_;)w-=i;for(;w<=_;)w+=i;M=w-i}p[y]=f?M:c?w:(M+w)/2,d[y]=M,g[y]=w}return{vals:p,starts:d,ends:g}},QF=ac.hasColorscale,e8=ih,oee=Ro,Xd=function(t,r){oee.hasLines(r)&&QF(r,"line")&&e8(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),oee.hasMarkers(r)&&(QF(r,"marker")&&e8(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),QF(r,"marker.line")&&e8(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},Lf=bt.exports,Vg=function(t,r){for(var a=0;a<t.length;a++)t[a].i=a;Lf.mergeArray(r.text,t,"tx"),Lf.mergeArray(r.texttemplate,t,"txt"),Lf.mergeArray(r.hovertext,t,"htx"),Lf.mergeArray(r.customdata,t,"data"),Lf.mergeArray(r.textposition,t,"tp"),r.textfont&&(Lf.mergeArrayCastPositive(r.textfont.size,t,"ts"),Lf.mergeArray(r.textfont.color,t,"tc"),Lf.mergeArray(r.textfont.family,t,"tf"));var n=r.marker;if(n){Lf.mergeArrayCastPositive(n.size,t,"ms"),Lf.mergeArrayCastPositive(n.opacity,t,"mo"),Lf.mergeArray(n.symbol,t,"mx"),Lf.mergeArray(n.color,t,"mc");var o=n.line;n.line&&(Lf.mergeArray(o.color,t,"mlc"),Lf.mergeArrayCastPositive(o.width,t,"mlw"));var i=n.gradient;i&&i.type!=="none"&&(Lf.mergeArray(i.type,t,"mgt"),Lf.mergeArray(i.color,t,"mgc"))}},see=bt.exports,Zd=function(t,r){see.isArrayOrTypedArray(r.selectedpoints)&&see.tagSelected(t,r)},lee=gn,t8=bt.exports,XT=rn.exports,uee=o0,r8=Un.BADNUM,a8=Ro,zze=Xd,Fze=Vg,Oze=Zd;function Nze(e,t){var r=e._fullLayout,a=XT.getFromId(e,t.xaxis||"x"),n=XT.getFromId(e,t.yaxis||"y"),o=a.makeCalcdata(t,"x"),i=n.makeCalcdata(t,"y"),s=uee(t,a,"x",o),l=uee(t,n,"y",i),u=s.vals,f=l.vals,c=t._length,h=new Array(c),v=t.ids,p=n8(t,r,a,n),d=!1,g,m,y,_,S,M;hee(r,t);var w="x",A="y",k;if(p)t8.pushUnique(p.traceIndices,t._expandedIndex),g=p.orientation==="v",g?(A="s",k="x"):(w="s",k="y"),S=p.stackgaps==="interpolate";else{var T=cee(t,c);fee(e,t,a,n,u,f,T)}var L=!!t.xperiodalignment,C=!!t.yperiodalignment;for(m=0;m<c;m++){var I=h[m]={},R=lee(u[m]),B=lee(f[m]);R&&B?(I[w]=u[m],I[A]=f[m],L&&(I.orig_x=o[m],I.xEnd=s.ends[m],I.xStart=s.starts[m]),C&&(I.orig_y=i[m],I.yEnd=l.ends[m],I.yStart=l.starts[m])):p&&(g?R:B)?(I[k]=g?u[m]:f[m],I.gap=!0,S?(I.s=r8,d=!0):I.s=0):I[w]=I[A]=r8,v&&(I.id=String(v[m]))}if(Fze(h,t),zze(e,t),Oze(h,t),p){for(m=0;m<h.length;)h[m][k]===r8?h.splice(m,1):m++;if(t8.sort(h,function($,Y){return $[k]-Y[k]||$.i-Y.i}),d){for(m=0;m<h.length-1&&h[m].gap;)m++;for(M=h[m].s,M||(M=h[m].s=0),y=0;y<m;y++)h[y].s=M;for(_=h.length-1;_>m&&h[_].gap;)_--;for(M=h[_].s,y=h.length-1;y>_;y--)h[y].s=M;for(;m<_;)if(m++,h[m].gap){for(y=m+1;h[y].gap;)y++;for(var N=h[m-1][k],D=h[m-1].s,O=(h[y].s-D)/(h[y][k]-N);m<y;)h[m].s=D+(h[m][k]-N)*O,m++}}}return h}function fee(e,t,r,a,n,o,i){var s=t._length,l=e._fullLayout,u=r._id,f=a._id,c=l._firstScatter[vee(t)]===t.uid,h=(n8(t,l,r,a)||{}).orientation,v=t.fill;r._minDtick=0,a._minDtick=0;var p={padded:!0},d={padded:!0};i&&(p.ppad=d.ppad=i);var g=s<2||n[0]!==n[s-1]||o[0]!==o[s-1];g&&(v==="tozerox"||v==="tonextx"&&(c||h==="h"))?p.tozero=!0:!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!a8.hasMarkers(t)&&!a8.hasText(t))&&(p.padded=!1,p.ppad=0),g&&(v==="tozeroy"||v==="tonexty"&&(c||h==="v"))?d.tozero=!0:(v==="tonextx"||v==="tozerox")&&(d.padded=!1),u&&(t._extremes[u]=XT.findExtremes(r,n,p)),f&&(t._extremes[f]=XT.findExtremes(a,o,d))}function cee(e,t){if(!!a8.hasMarkers(e)){var r=e.marker,a=1.6*(e.marker.sizeref||1),n;if(e.marker.sizemode==="area"?n=function(u){return Math.max(Math.sqrt((u||0)/a),3)}:n=function(u){return Math.max((u||0)/a,3)},t8.isArrayOrTypedArray(r.size)){var o={type:"linear"};XT.setConvert(o);for(var i=o.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(i[l]);return s}else return n(r.size)}}function hee(e,t){var r=vee(t),a=e._firstScatter;a[r]||(a[r]=t.uid)}function vee(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function n8(e,t,r,a){var n=e.stackgroup;if(!!n){var o=t._scatterStackOpts[r._id+a._id][n],i=o.orientation==="v"?a:r;if(i.type==="linear"||i.type==="log")return o}}var Kd={calc:Nze,calcMarkerSize:cee,calcAxisExpansion:fee,setFirstScatter:hee,getStackOpts:n8},dee=Kd,Bze=function(t,r){var a=r.xaxis,n=r.yaxis,o=a._id+n._id,i=t._fullLayout._scatterStackOpts[o];if(!!i){var s=t.calcdata,l,u,f,c,h,v,p,d,g,m,y,_,S,M,w;for(var A in i){m=i[A];var k=m.traceIndices;if(!!k.length){for(y=m.stackgaps==="interpolate",_=m.groupnorm,m.orientation==="v"?(S="x",M="y"):(S="y",M="x"),w=new Array(k.length),l=0;l<w.length;l++)w[l]=!1;v=s[k[0]];var T=new Array(v.length);for(l=0;l<v.length;l++)T[l]=v[l][S];for(l=1;l<k.length;l++){for(h=s[k[l]],u=f=0;u<h.length;u++){for(p=h[u][S];p>T[f]&&f<T.length;f++)i8(h,u,T[f],l,w,y,S),u++;if(p!==T[f]){for(c=0;c<l;c++)i8(s[k[c]],f,p,c,w,y,S);T.splice(f,0,p)}f++}for(;f<T.length;f++)i8(h,u,T[f],l,w,y,S),u++}var L=T.length;for(u=0;u<v.length;u++){for(d=v[u][M]=v[u].s,l=1;l<k.length;l++)h=s[k[l]],h[0].trace._rawLength=h[0].trace._length,h[0].trace._length=L,d+=h[u].s,h[u][M]=d;if(_)for(g=(_==="fraction"?d:d/100)||1,l=0;l<k.length;l++){var C=s[k[l]][u];C[M]/=g,C.sNorm=C.s/g}}for(l=0;l<k.length;l++){h=s[k[l]];var I=h[0].trace,R=dee.calcMarkerSize(I,I._rawLength),B=Array.isArray(R);if(R&&w[l]||B){var N=R;for(R=new Array(L),u=0;u<L;u++)R[u]=h[u].gap?0:B?N[h[u].i]:N}var D=new Array(L),O=new Array(L);for(u=0;u<L;u++)D[u]=h[u].x,O[u]=h[u].y;dee.calcAxisExpansion(t,I,a,n,D,O,R),h[0].t.orientation=m.orientation}}}}};function i8(e,t,r,a,n,o,i){n[a]=!0;var s={i:null,gap:!0,s:0};if(s[i]=r,e.splice(t,0,s),t&&r===e[t-1][i]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else o&&(s.s=$ze(e,t,r,i));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function $ze(e,t,r,a){var n=e[t-1],o=e[t+1];return o?n?n.s+(o.s-n.s)*(r-n[a])/(o[a]-n[a]):o.s:n.s}var pee=Un,ZT=pee.BADNUM,gee=pee.LOG_CLIP,mee=gee+.5,yee=gee-.5,o8=bt.exports,Uze=o8.segmentsIntersect,xee=o8.constrain,s8=Hg,bee=function(t,r){var a=r.xaxis,n=r.yaxis,o=a.type==="log",i=n.type==="log",s=a._length,l=n._length,u=r.connectGaps,f=r.baseTolerance,c=r.shape,h=c==="linear",v=r.fill&&r.fill!=="none",p=[],d=s8.minTolerance,g=t.length,m=new Array(g),y=0,_,S,M,w,A,k,T,L,C,I,R,B,N,D,O,$;function Y(Ze){var Qe=t[Ze];if(!Qe)return!1;var Je=r.linearized?a.l2p(Qe.x):a.c2p(Qe.x),je=r.linearized?n.l2p(Qe.y):n.c2p(Qe.y);if(Je===ZT){if(o&&(Je=a.c2p(Qe.x,!0)),Je===ZT)return!1;i&&je===ZT&&(Je*=Math.abs(a._m*l*(a._m>0?mee:yee)/(n._m*s*(n._m>0?mee:yee)))),Je*=1e3}if(je===ZT){if(i&&(je=n.c2p(Qe.y,!0)),je===ZT)return!1;je*=1e3}return[Je,je]}function X(Ze,Qe,Je,je){var $e=Je-Ze,Ye=je-Qe,yt=.5-Ze,_t=.5-Qe,Pt=$e*$e+Ye*Ye,Tt=$e*yt+Ye*_t;if(Tt>0&&Tt<Pt){var Ot=yt*Ye-_t*$e;if(Ot*Ot<Pt)return!0}}var ee,Q;function Z(Ze,Qe){var Je=Ze[0]/s,je=Ze[1]/l,$e=Math.max(0,-Je,Je-1,-je,je-1);return $e&&ee!==void 0&&X(Je,je,ee,Q)&&($e=0),$e&&Qe&&X(Je,je,Qe[0]/s,Qe[1]/l)&&($e=0),(1+s8.toleranceGrowth*$e)*f}function q(Ze,Qe){var Je=Ze[0]-Qe[0],je=Ze[1]-Qe[1];return Math.sqrt(Je*Je+je*je)}var ae=s8.maxScreensAway,ie=-s*ae,we=s*(1+ae),Te=-l*ae,he=l*(1+ae),xe=[[ie,Te,we,Te],[we,Te,we,he],[we,he,ie,he],[ie,he,ie,Te]],Se,ye,re,se,de,Me;function Ie(Ze,Qe){for(var Je=[],je=0,$e=0;$e<4;$e++){var Ye=xe[$e],yt=Uze(Ze[0],Ze[1],Qe[0],Qe[1],Ye[0],Ye[1],Ye[2],Ye[3]);yt&&(!je||Math.abs(yt.x-Je[0][0])>1||Math.abs(yt.y-Je[0][1])>1)&&(yt=[yt.x,yt.y],je&&q(yt,Ze)<q(Je[0],Ze)?Je.unshift(yt):Je.push(yt),je++)}return Je}function Ee(Ze){if(Ze[0]<ie||Ze[0]>we||Ze[1]<Te||Ze[1]>he)return[xee(Ze[0],ie,we),xee(Ze[1],Te,he)]}function qe(Ze,Qe){if(Ze[0]===Qe[0]&&(Ze[0]===ie||Ze[0]===we)||Ze[1]===Qe[1]&&(Ze[1]===Te||Ze[1]===he))return!0}function be(Ze,Qe){var Je=[],je=Ee(Ze),$e=Ee(Qe);return je&&$e&&qe(je,$e)||(je&&Je.push(je),$e&&Je.push($e)),Je}function oe(Ze,Qe,Je){return function(je,$e){var Ye=Ee(je),yt=Ee($e),_t=[];if(Ye&&yt&&qe(Ye,yt))return _t;Ye&&_t.push(Ye),yt&&_t.push(yt);var Pt=2*o8.constrain((je[Ze]+$e[Ze])/2,Qe,Je)-((Ye||je)[Ze]+(yt||$e)[Ze]);if(Pt){var Tt;Ye&&yt?Tt=Pt>0==Ye[Ze]>yt[Ze]?Ye:yt:Tt=Ye||yt,Tt[Ze]+=Pt}return _t}}var ce;c==="linear"||c==="spline"?ce=Ie:c==="hv"||c==="vh"?ce=be:c==="hvh"?ce=oe(0,ie,we):c==="vhv"&&(ce=oe(1,Te,he));function ue(Ze,Qe){var Je=Qe[0]-Ze[0],je=(Qe[1]-Ze[1])/Je,$e=(Ze[1]*Qe[0]-Qe[1]*Ze[0])/Je;return $e>0?[je>0?ie:we,he]:[je>0?we:ie,Te]}function Re(Ze){var Qe=Ze[0],Je=Ze[1],je=Qe===m[y-1][0],$e=Je===m[y-1][1];if(!(je&&$e))if(y>1){var Ye=Qe===m[y-2][0],yt=Je===m[y-2][1];je&&(Qe===ie||Qe===we)&&Ye?yt?y--:m[y-1]=Ze:$e&&(Je===Te||Je===he)&&yt?Ye?y--:m[y-1]=Ze:m[y++]=Ze}else m[y++]=Ze}function Xe(Ze){m[y-1][0]!==Ze[0]&&m[y-1][1]!==Ze[1]&&Re([re,se]),Re(Ze),de=null,re=se=0}function Ke(Ze){if(ee=Ze[0]/s,Q=Ze[1]/l,Se=Ze[0]<ie?ie:Ze[0]>we?we:0,ye=Ze[1]<Te?Te:Ze[1]>he?he:0,Se||ye){if(!y)m[y++]=[Se||Ze[0],ye||Ze[1]];else if(de){var Qe=ce(de,Ze);Qe.length>1&&(Xe(Qe[0]),m[y++]=Qe[1])}else Me=ce(m[y-1],Ze)[0],m[y++]=Me;var Je=m[y-1];Se&&ye&&(Je[0]!==Se||Je[1]!==ye)?(de&&(re!==Se&&se!==ye?Re(re&&se?ue(de,Ze):[re||Se,se||ye]):re&&se&&Re([re,se])),Re([Se,ye])):re-Se&&se-ye&&Re([Se||re,ye||se]),de=Ze,re=Se,se=ye}else de&&Xe(ce(de,Ze)[0]),m[y++]=Ze}for(_=0;_<g;_++)if(S=Y(_),!!S){for(y=0,de=null,Ke(S),_++;_<g;_++){if(w=Y(_),!w){if(u)continue;break}if(!h||!r.simplify){Ke(w);continue}var vt=Y(_+1);if(I=q(w,S),!(!(v&&(y===0||y===g-1))&&I<Z(w,vt)*d)){for(L=[(w[0]-S[0])/I,(w[1]-S[1])/I],A=S,R=I,B=D=O=0,T=!1,M=w,_++;_<t.length;_++){if(k=vt,vt=Y(_+1),!k){if(u)continue;break}if(C=[k[0]-S[0],k[1]-S[1]],$=C[0]*L[1]-C[1]*L[0],D=Math.min(D,$),O=Math.max(O,$),O-D>Z(k,vt))break;M=k,N=C[0]*L[0]+C[1]*L[1],N>R?(R=N,w=k,T=!1):N<B&&(B=N,A=k,T=!0)}if(T?(Ke(w),M!==A&&Ke(A)):(A!==S&&Ke(A),M!==w&&Ke(w)),Ke(M),_>=t.length||!k)break;Ke(k),S=k}}de&&Re([re||de[0],se||de[1]]),p.push(m.slice(0,y))}return p},_ee={tonextx:1,tonexty:1,tonext:1},wee=function(t,r,a){var n,o,i,s,l,u={},f=!1,c=-1,h=0,v=-1;for(o=0;o<a.length;o++)n=a[o][0].trace,i=n.stackgroup||"",i?i in u?l=u[i]:(l=u[i]=h,h++):n.fill in _ee&&v>=0?l=v:(l=v=h,h++),l<c&&(f=!0),n._groupIndex=c=l;var p=a.slice();f&&p.sort(function(g,m){var y=g[0].trace,_=m[0].trace;return y._groupIndex-_._groupIndex||y.index-_.index});var d={};for(o=0;o<p.length;o++)n=p[o][0].trace,i=n.stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in _ee&&(s=d[i],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),d[i]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return p},Jd=Ra.exports,Hze=Pa,KT=bt.exports,r2=KT.ensureSingle,Tee=KT.identity,Fs=xn.exports,a2=Ro,Gze=bee,Vze=wee,jze=FT.exports.tester,JT=function(t,r,a,n,o,i){var s,l,u=!o,f=!!o&&o.duration>0,c=Vze(t,r,a);if(s=n.selectAll("g.trace").data(c,function(v){return v[0].trace.uid}),s.enter().append("g").attr("class",function(v){return"trace scatter trace"+v[0].trace.uid}).style("stroke-miterlimit",2),s.order(),qze(t,s,r),f){i&&(l=i());var h=Jd.transition().duration(o.duration).ease(o.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});h.each(function(){n.selectAll("g.trace").each(function(v,p){Aee(t,p,r,v,c,this,o)})})}else s.each(function(v,p){Aee(t,p,r,v,c,this,o)});u&&s.exit().remove(),n.selectAll("path:not([d])").remove()};function qze(e,t,r){t.each(function(a){var n=r2(Jd.select(this),"g","fills");Fs.setClipUrl(n,r.layerClipId,e);var o=a[0].trace,i=[];o._ownfill&&i.push("_ownFill"),o._nexttrace&&i.push("_nextFill");var s=n.selectAll("g").data(i,Tee);s.enter().append("g"),s.exit().each(function(l){o[l]=null}).remove(),s.order().each(function(l){o[l]=r2(Jd.select(this),"path","js-fill")})})}function Aee(e,t,r,a,n,o,i){var s;Yze(e,t,r,a,n);var l=!!i&&i.duration>0;function u(re){return l?re.transition():re}var f=r.xaxis,c=r.yaxis,h=a[0].trace,v=h.line,p=Jd.select(o),d=r2(p,"g","errorbars"),g=r2(p,"g","lines"),m=r2(p,"g","points"),y=r2(p,"g","text");if(Hze.getComponentMethod("errorbars","plot")(e,d,r,i),h.visible!==!0)return;u(p).style("opacity",h.opacity);var _,S,M=h.fill.charAt(h.fill.length-1);M!=="x"&&M!=="y"&&(M=""),a[0][r.isRangePlot?"nodeRangePlot3":"node3"]=p;var w="",A=[],k=h._prevtrace;k&&(w=k._prevRevpath||"",S=k._nextFill,A=k._polygons);var T,L,C="",I="",R,B,N,D,O,$,Y,X=[],ee=KT.noop;if(_=h._ownFill,a2.hasLines(h)||h.fill!=="none"){for(S&&S.datum(a),["hv","vh","hvh","vhv"].indexOf(v.shape)!==-1?(R=Fs.steps(v.shape),B=Fs.steps(v.shape.split("").reverse().join(""))):v.shape==="spline"?R=B=function(re){var se=re[re.length-1];return re.length>1&&re[0][0]===se[0]&&re[0][1]===se[1]?Fs.smoothclosed(re.slice(1),v.smoothing):Fs.smoothopen(re,v.smoothing)}:R=B=function(re){return"M"+re.join("L")},N=function(re){return B(re.reverse())},X=Gze(a,{xaxis:f,yaxis:c,connectGaps:h.connectgaps,baseTolerance:Math.max(v.width||1,3)/4,shape:v.shape,simplify:v.simplify,fill:h.fill}),Y=h._polygons=new Array(X.length),s=0;s<X.length;s++)h._polygons[s]=jze(X[s]);X.length&&(D=X[0][0],O=X[X.length-1],$=O[O.length-1]),ee=function(re){return function(se){if(T=R(se),L=N(se),C?M?(C+="L"+T.substr(1),I=L+("L"+I.substr(1))):(C+="Z"+T,I=L+"Z"+I):(C=T,I=L),a2.hasLines(h)&&se.length>1){var de=Jd.select(this);if(de.datum(a),re)u(de.style("opacity",0).attr("d",T).call(Fs.lineGroupStyle)).style("opacity",1);else{var Me=u(de);Me.attr("d",T),Fs.singleLineStyle(a,Me)}}}}}var Q=g.selectAll(".js-line").data(X);u(Q.exit()).style("opacity",0).remove(),Q.each(ee(!1)),Q.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(Fs.lineGroupStyle).each(ee(!0)),Fs.setClipUrl(Q,r.layerClipId,e);function Z(re){u(re).attr("d","M0,0Z")}X.length?(_?(_.datum(a),D&&$&&(M?(M==="y"?D[1]=$[1]=c.c2p(0,!0):M==="x"&&(D[0]=$[0]=f.c2p(0,!0)),u(_).attr("d","M"+$+"L"+D+"L"+C.substr(1)).call(Fs.singleFillStyle)):u(_).attr("d",C+"Z").call(Fs.singleFillStyle))):S&&(h.fill.substr(0,6)==="tonext"&&C&&w?(h.fill==="tonext"?u(S).attr("d",C+"Z"+w+"Z").call(Fs.singleFillStyle):u(S).attr("d",C+"L"+w.substr(1)+"Z").call(Fs.singleFillStyle),h._polygons=h._polygons.concat(A)):(Z(S),h._polygons=null)),h._prevRevpath=I,h._prevPolygons=Y):(_?Z(_):S&&Z(S),h._polygons=h._prevRevpath=h._prevPolygons=null);function q(re){return re.filter(function(se){return!se.gap&&se.vis})}function ae(re){return re.filter(function(se){return se.vis})}function ie(re){return re.filter(function(se){return!se.gap})}function we(re){return re.id}function Te(re){if(re.ids)return we}function he(){return!1}function xe(re,se,de){var Me,Ie,Ee,qe=de[0].trace,be=a2.hasMarkers(qe),oe=a2.hasText(qe),ce=Te(qe),ue=he,Re=he;if(be||oe){var Xe=Tee,Ke=qe.stackgroup,vt=Ke&&e._fullLayout._scatterStackOpts[f._id+c._id][Ke].stackgaps==="infer zero";qe.marker.maxdisplayed||qe._needsCull?Xe=vt?ae:q:Ke&&!vt&&(Xe=ie),be&&(ue=Xe),oe&&(Re=Xe)}Ie=re.selectAll("path.point"),Me=Ie.data(ue,ce);var Ze=Me.enter().append("path").classed("point",!0);l&&Ze.call(Fs.pointStyle,qe,e).call(Fs.translatePoints,f,c).style("opacity",0).transition().style("opacity",1),Me.order();var Qe;be&&(Qe=Fs.makePointStyleFns(qe)),Me.each(function(Je){var je=Jd.select(this),$e=u(je);Ee=Fs.translatePoint(Je,$e,f,c),Ee?(Fs.singlePointStyle(Je,$e,qe,Qe,e),r.layerClipId&&Fs.hideOutsideRangePoint(Je,$e,f,c,qe.xcalendar,qe.ycalendar),qe.customdata&&je.classed("plotly-customdata",Je.data!==null&&Je.data!==void 0)):$e.remove()}),l?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),Ie=se.selectAll("g"),Me=Ie.data(Re,ce),Me.enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(Je){var je=Jd.select(this),$e=u(je.select("text"));Ee=Fs.translatePoint(Je,$e,f,c),Ee?r.layerClipId&&Fs.hideOutsideRangePoint(Je,je,f,c,qe.xcalendar,qe.ycalendar):je.remove()}),Me.selectAll("text").call(Fs.textPointStyle,qe,e).each(function(Je){var je=f.c2p(Je.x),$e=c.c2p(Je.y);Jd.select(this).selectAll("tspan.line").each(function(){u(Jd.select(this)).attr({x:je,y:$e})})}),Me.exit().remove()}m.datum(a),y.datum(a),xe(m,y,a);var Se=h.cliponaxis===!1,ye=Se?null:r.layerClipId;Fs.setClipUrl(m,ye,e),Fs.setClipUrl(y,ye,e)}function Yze(e,t,r,a,n){var o=r.xaxis,i=r.yaxis,s=Jd.extent(KT.simpleMap(o.range,o.r2c)),l=Jd.extent(KT.simpleMap(i.range,i.r2c)),u=a[0].trace;if(!!a2.hasMarkers(u)){var f=u.marker.maxdisplayed;if(f!==0){var c=a.filter(function(d){return d.x>=s[0]&&d.x<=s[1]&&d.y>=l[0]&&d.y<=l[1]}),h=Math.ceil(c.length/f),v=0;n.forEach(function(d,g){var m=d[0].trace;a2.hasMarkers(m)&&m.marker.maxdisplayed>0&&g<t&&v++});var p=Math.round(v*h/3+Math.floor(v/3)*h/7.1);a.forEach(function(d){delete d.vis}),c.forEach(function(d,g){Math.round((g+p)%h)===0&&(d.vis=!0)})}}}var Pf={container:"marker",min:"cmin",max:"cmax"},jE=rn.exports,l8=function(t,r,a){var n={},o={_fullLayout:a},i=jE.getFromTrace(o,r,"x"),s=jE.getFromTrace(o,r,"y");return n.xLabel=jE.tickText(i,i.c2l(t.x),!0).text,n.yLabel=jE.tickText(s,s.c2l(t.y),!0).text,n},u8=Ra.exports,n2=xn.exports,Wze=Pa;function Xze(e){var t=u8.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var a=u8.select(this),n=r.trace||r[0].trace;f8(a,n,e)}),t.selectAll("g.text").each(function(r){var a=u8.select(this),n=r.trace||r[0].trace;c8(a,n,e)}),t.selectAll("g.trace path.js-line").call(n2.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(n2.fillGroupStyle),Wze.getComponentMethod("errorbars","style")(t)}function f8(e,t,r){n2.pointStyle(e.selectAll("path.point"),t,r)}function c8(e,t,r){n2.textPointStyle(e.selectAll("text"),t,r)}function Zze(e,t,r){var a=t[0].trace;a.selectedpoints?(n2.selectedPointStyle(r.selectAll("path.point"),a),n2.selectedTextStyle(r.selectAll("text"),a)):(f8(r,a,e),c8(r,a,e))}var fh={style:Xze,stylePoints:f8,styleText:c8,styleOnSelect:Zze},i2=Oa.exports,Kze=Ro,QT=function(t,r){var a,n;if(t.mode==="lines")return a=t.line.color,a&&i2.opacity(a)?a:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var o=r.mcc||(t.marker||{}).color,i=r.mlcc||((t.marker||{}).line||{}).color;return n=o&&i2.opacity(o)?o:i&&i2.opacity(i)&&(r.mlw||((t.marker||{}).line||{}).width)?i:"",n?i2.opacity(n)<.3?i2.addOpacity(n,.3):n:(a=(t.line||{}).color,a&&i2.opacity(a)&&Kze.hasLines(t)&&t.line.width?a:t.fillcolor)},h8=bt.exports,See=Rs,Jze=Pa,Qze=QT,v8=Oa.exports,eFe=h8.fillText,eA=function(t,r,a,n){var o=t.cd,i=o[0].trace,s=t.xa,l=t.ya,u=s.c2p(r),f=l.c2p(a),c=[u,f],h=i.hoveron||"",v=i.mode.indexOf("markers")!==-1?3:.5,p=!!i.xperiodalignment,d=!!i.yperiodalignment;if(h.indexOf("points")!==-1){var g=function(xe){if(p){var Se=s.c2p(xe.xStart),ye=s.c2p(xe.xEnd);return u>=Math.min(Se,ye)&&u<=Math.max(Se,ye)?0:1/0}var re=Math.max(3,xe.mrc||0),se=1-1/re,de=Math.abs(s.c2p(xe.x)-u);return de<re?se*de/re:de-re+se},m=function(xe){if(d){var Se=l.c2p(xe.yStart),ye=l.c2p(xe.yEnd);return f>=Math.min(Se,ye)&&f<=Math.max(Se,ye)?0:1/0}var re=Math.max(3,xe.mrc||0),se=1-1/re,de=Math.abs(l.c2p(xe.y)-f);return de<re?se*de/re:de-re+se},y=function(xe){var Se=Math.max(v,xe.mrc||0),ye=s.c2p(xe.x)-u,re=l.c2p(xe.y)-f;return Math.max(Math.sqrt(ye*ye+re*re)-Se,1-v/Se)},_=See.getDistanceFunction(n,g,m,y);if(See.getClosest(o,_,t),t.index!==!1){var S=o[t.index],M=s.c2p(S.x,!0),w=l.c2p(S.y,!0),A=S.mrc||1;t.index=S.i;var k=o[0].t.orientation,T=k&&(S.sNorm||S.s),L=k==="h"?T:S.orig_x!==void 0?S.orig_x:S.x,C=k==="v"?T:S.orig_y!==void 0?S.orig_y:S.y;return h8.extendFlat(t,{color:Qze(i,S),x0:M-A,x1:M+A,xLabelVal:L,y0:w-A,y1:w+A,yLabelVal:C,spikeDistance:y(S),hovertemplate:i.hovertemplate}),eFe(S,i,t),Jze.getComponentMethod("errorbars","hoverInfo")(S,i,t),[t]}}if(h.indexOf("fills")!==-1&&i._polygons){var I=i._polygons,R=[],B=!1,N=1/0,D=-1/0,O=1/0,$=-1/0,Y,X,ee,Q,Z,q,ae,ie,we;for(Y=0;Y<I.length;Y++)ee=I[Y],ee.contains(c)&&(B=!B,R.push(ee),O=Math.min(O,ee.ymin),$=Math.max($,ee.ymax));if(B){O=Math.max(O,0),$=Math.min($,l._length);var Te=(O+$)/2;for(Y=0;Y<R.length;Y++)for(Q=R[Y].pts,X=1;X<Q.length;X++)ie=Q[X-1][1],we=Q[X][1],ie>Te!=we>=Te&&(q=Q[X-1][0],ae=Q[X][0],we-ie&&(Z=q+(ae-q)*(Te-ie)/(we-ie),N=Math.min(N,Z),D=Math.max(D,Z)));N=Math.max(N,0),D=Math.min(D,s._length);var he=v8.defaultLine;return v8.opacity(i.fillcolor)?he=i.fillcolor:v8.opacity((i.line||{}).color)&&(he=i.line.color),h8.extendFlat(t,{distance:t.maxHoverDistance,x0:N,x1:D,y0:Te,y1:Te,color:he,hovertemplate:!1}),delete t.index,i.text&&!Array.isArray(i.text)?t.text=String(i.text):t.text=i.name,[t]}}},Mee=Ro,tA=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s=a[0].trace,l,u,f,c,h=!Mee.hasMarkers(s)&&!Mee.hasText(s);if(h)return[];if(r===!1)for(l=0;l<a.length;l++)a[l].selected=0;else for(l=0;l<a.length;l++)u=a[l],f=n.c2p(u.x),c=o.c2p(u.y),u.i!==null&&r.contains([f,c],!1,l,t)?(i.push({pointNumber:u.i,x:n.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0;return i},Ii={},kee={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}},rA=Pa.traceIs,d8=yT,Eee=function(t,r,a,n){a("autotypenumbers",n.autotypenumbersDflt);var o=a("type",(n.splomStash||{}).type);o==="-"&&(tFe(r,n.data),r.type==="-"?r.type="linear":t.type=r.type)};function tFe(e,t){if(e.type==="-"){var r=e._id,a=r.charAt(0),n;r.indexOf("scene")!==-1&&(r=a);var o=rFe(t,r,a);if(!!o){if(o.type==="histogram"&&a==={v:"y",h:"x"}[o.orientation||"v"]){e.type="linear";return}var i=a+"calendar",s=o[i],l={noMultiCategory:!rA(o,"cartesian")||rA(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&a==={h:"x",v:"y"}[o.orientation||"v"]&&(l.noMultiCategory=!0),l.autotypenumbers=e.autotypenumbers,Lee(o,a)){var u=Cee(o),f=[];for(n=0;n<t.length;n++){var c=t[n];!rA(c,"box-violin")||(c[a+"axis"]||a)!==r||(c[u]!==void 0?f.push(c[u][0]):c.name!==void 0?f.push(c.name):f.push("text"),c[i]!==s&&(s=void 0))}e.type=d8(f,s,l)}else if(o.type==="splom"){var h=o.dimensions,v=h[o._axesDim[r]];v.visible&&(e.type=d8(v.values,s,l))}else e.type=d8(o[a]||[o[a+"0"]],s,l)}}}function rFe(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t])return n;if((n[r+"axis"]||r)===t){if(Lee(n,r))return n;if((n[r]||[]).length||n[r+"0"])return n}}}function Cee(e){return{v:"x",h:"y"}[e.orientation||"v"]}function Lee(e,t){var r=Cee(e),a=rA(e,"box-violin"),n=rA(e._fullInput||{},"candlestick");return a&&!n&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}function aFe(e,t){var r=t.dataAttr||e._id.charAt(0),a={},n,o,i;if(t.axData)n=t.axData;else for(n=[],o=0;o<t.data.length;o++){var s=t.data[o];s[r+"axis"]===e._id&&n.push(s)}for(o=0;o<n.length;o++){var l=n[o][r];for(i=0;i<l.length;i++){var u=l[i];u!=null&&(a[u]=1)}}return Object.keys(a)}var p8=function(t,r,a,n){if(r.type==="category"){var o=t.categoryarray,i=Array.isArray(o)&&o.length>0,s;i&&(s="array");var l=a("categoryorder",s),u;l==="array"&&(u=a("categoryarray")),!i&&l==="array"&&(l=r.categoryorder="trace"),l==="trace"?r._initialCategories=[]:l==="array"?r._initialCategories=u.slice():(u=aFe(r,n).sort(),l==="category ascending"?r._initialCategories=u:l==="category descending"&&(r._initialCategories=u.reverse()))}},nFe=Hl.exports.mix,iFe=us.lightFraction,oFe=bt.exports,qE=function(t,r,a,n){n=n||{};var o=n.dfltColor;function i(m,y){return oFe.coerce2(t,r,n.attributes,m,y)}var s=i("linecolor",o),l=i("linewidth"),u=a("showline",n.showLine||!!s||!!l);u||(delete r.linecolor,delete r.linewidth);var f=nFe(o,n.bgColor,n.blend||iFe).toRgbString(),c=i("gridcolor",f),h=i("gridwidth"),v=a("showgrid",n.showGrid||!!c||!!h);if(v||(delete r.gridcolor,delete r.gridwidth),!n.noZeroLine){var p=i("zerolinecolor",o),d=i("zerolinewidth"),g=a("zeroline",n.showGrid||!!p||!!d);g||(delete r.zerolinecolor,delete r.zerolinewidth)}},Pee=gn,sFe=Pa,aA=bt.exports,lFe=nc,g8=Zu,uFe=N_,fFe=dT,cFe=hx,hFe=vx,vFe=p8,dFe=qE,Iee=Og,YE=Sl.WEEKDAY_PATTERN,pFe=Sl.HOUR_PATTERN,WE=function(t,r,a,n,o){var i=n.letter,s=n.font||{},l=n.splomStash||{},u=a("visible",!n.visibleDflt),f=r._template||{},c=r.type||f.type||"-",h;if(c==="date"){var v=sFe.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar),n.noTicklabelmode||(h=a("ticklabelmode"))}var p="";(!n.noTicklabelposition||c==="multicategory")&&(p=aA.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h==="period"?["outside","inside"]:i==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||a("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":c==="category"||c==="multicategory"?"allow":"hide past div"),Iee(r,o);var d=!r.isValidRange(t.range);d&&n.reverseDflt&&(d="reversed");var g=a("autorange",d);g&&(c==="linear"||c==="-")&&a("rangemode"),a("range"),r.cleanRange(),vFe(t,r,a,n),c!=="category"&&!n.noHover&&a("hoverformat");var m=a("color"),y=m!==g8.color.dflt?m:s.color,_=l.label||o._dfltTitle[i];if(hFe(t,r,a,c,n),!u)return r;a("title.text",_),aA.coerceFont(a,"title.font",{family:s.family,size:aA.bigFont(s.size),color:y}),uFe(t,r,a,c),cFe(t,r,a,c,n),fFe(t,r,a,n),dFe(t,r,a,{dfltColor:m,bgColor:n.bgColor,showGrid:n.showGrid,attributes:g8}),(r.showline||r.ticks)&&a("mirror"),n.automargin&&a("automargin");var S=c==="multicategory";if(!n.noTickson&&(c==="category"||S)&&(r.ticks||r.showgrid)){var M;S&&(M="boundaries");var w=a("tickson",M);w==="boundaries"&&delete r.ticklabelposition}if(S){var A=a("showdividers");A&&(a("dividercolor"),a("dividerwidth"))}if(c==="date")if(lFe(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:gFe}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var k=0;k<r.rangebreaks.length;k++)if(r.rangebreaks[k].pattern===YE){r._hasDayOfWeekBreaks=!0;break}if(Iee(r,o),o._has("scattergl")||o._has("splom"))for(var T=0;T<n.data.length;T++){var L=n.data[T];(L.type==="scattergl"||L.type==="splom")&&(L.visible=!1,aA.warn(L.type+" traces do not work on axes with rangebreaks. Setting trace "+L.index+" to `visible: false`."))}}return r};function gFe(e,t,r){function a(h,v){return aA.coerce(e,t,g8.rangebreaks,h,v)}var n=a("enabled");if(n){var o=a("bounds");if(o&&o.length>=2){var i="",s,l;if(o.length===2){for(s=0;s<2;s++)if(l=Dee(o[s]),l){i=YE;break}}var u=a("pattern",i);if(u===YE)for(s=0;s<2;s++)l=Dee(o[s]),l&&(t.bounds[s]=o[s]=l-1);if(u)for(s=0;s<2;s++)switch(l=o[s],u){case YE:if(!Pee(l)){t.enabled=!1;return}if(l=+l,l!==Math.floor(l)||l<0||l>=7){t.enabled=!1;return}t.bounds[s]=o[s]=l;break;case pFe:if(!Pee(l)){t.enabled=!1;return}if(l=+l,l<0||l>24){t.enabled=!1;return}t.bounds[s]=o[s]=l;break}if(r.autorange===!1){var f=r.range;if(f[0]<f[1]){if(o[0]<f[0]&&o[1]>f[1]){t.enabled=!1;return}}else if(o[0]>f[0]&&o[1]<f[1]){t.enabled=!1;return}}}else{var c=a("values");if(c&&c.length)a("dvalue");else{t.enabled=!1;return}}}}var mFe={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function Dee(e){if(typeof e=="string")return mFe[e.substr(0,3).toLowerCase()]}var yFe=gn,XE=bt.exports,m8=function(t,r,a,n){var o=n.counterAxes||[],i=n.overlayableAxes||[],s=n.letter,l=n.grid,u,f,c,h;l&&(f=l._domains[s][l._axisMap[r._id]],u=l._anchors[r._id],f&&(c=l[s+"side"].split(" ")[0],h=l.domain[s][c==="right"||c==="top"?1:0])),f=f||[0,1],u=u||(yFe(t.position)?"free":o[0]||"free"),c=c||(s==="x"?"bottom":"left"),h=h||0;var v=XE.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:u}},"anchor");v==="free"&&a("position",h),XE.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:c}},"side");var p=!1;if(i.length&&(p=XE.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!p){var d=a("domain",f);d[0]>d[1]-1/4096&&(r.domain=f),XE.noneOrAll(t.domain,r.domain,f)}return a("layer"),r},kx=bt.exports,Ree=Oa.exports,xFe=oh.isUnifiedHover,bFe=KK,zee=si,_Fe=C_,Fee=Zu,wFe=Eee,Oee=WE,TFe=qd,Nee=m8,y8=As,my=y8.id2name,Bee=y8.name2id,AFe=Sl.AX_ID_PATTERN,$ee=Pa,nA=$ee.traceIs,x8=$ee.getComponentMethod;function ZE(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}var SFe=function(t,r,a){var n=r.autotypenumbers,o={},i={},s={},l={},u={},f={},c={},h={},v={},p={},d,g;for(d=0;d<a.length;d++){var m=a[d];if(!(!nA(m,"cartesian")&&!nA(m,"gl2d"))){var y;if(m.xaxis)y=my(m.xaxis),ZE(o,y,m);else if(m.xaxes)for(g=0;g<m.xaxes.length;g++)ZE(o,my(m.xaxes[g]),m);var _;if(m.yaxis)_=my(m.yaxis),ZE(o,_,m);else if(m.yaxes)for(g=0;g<m.yaxes.length;g++)ZE(o,my(m.yaxes[g]),m);if(m.type==="funnel"?m.orientation==="h"?(y&&(i[y]=!0),_&&(c[_]=!0)):_&&(s[_]=!0):m.type==="image"?(_&&(h[_]=!0),y&&(h[y]=!0)):(_&&(u[_]=!0,f[_]=!0),(!nA(m,"carpet")||m.type==="carpet"&&!m._cheater)&&y&&(l[y]=!0)),m.type==="carpet"&&m._cheater&&y&&(i[y]=!0),nA(m,"2dMap")&&(v[y]=!0,v[_]=!0),nA(m,"oriented")){var S=m.orientation==="h"?_:y;p[S]=!0}}}var M=r._subplots,w=M.xaxis,A=M.yaxis,k=kx.simpleMap(w,my),T=kx.simpleMap(A,my),L=k.concat(T),C=Ree.background;w.length&&A.length&&(C=kx.coerce(t,r,_Fe,"plot_bgcolor"));var I=Ree.combine(C,r.paper_bgcolor),R,B,N,D,O;function $(){var Xe=o[R]||[];O._traceIndices=Xe.map(function(Ke){return Ke._expandedIndex}),O._annIndices=[],O._shapeIndices=[],O._imgIndices=[],O._subplotsWith=[],O._counterAxes=[],O._name=O._attr=R,O._id=B}function Y(Xe,Ke){return kx.coerce(D,O,Fee,Xe,Ke)}function X(Xe,Ke){return kx.coerce2(D,O,Fee,Xe,Ke)}function ee(Xe){return Xe==="x"?A:w}function Q(Xe,Ke){for(var vt=Xe==="x"?k:T,Ze=[],Qe=0;Qe<vt.length;Qe++){var Je=vt[Qe];Je!==Ke&&!(t[Je]||{}).overlaying&&Ze.push(Bee(Je))}return Ze}var Z={x:ee("x"),y:ee("y")},q=Z.x.concat(Z.y),ae={},ie=[];function we(){var Xe=D.matches;AFe.test(Xe)&&q.indexOf(Xe)===-1&&(ae[Xe]=D.type,ie=Object.keys(ae))}var Te=bFe(t,r),he=xFe(Te);for(d=0;d<L.length;d++){R=L[d],B=Bee(R),N=R.charAt(0),kx.isPlainObject(t[R])||(t[R]={}),D=t[R],O=zee.newContainer(r,R,N+"axis"),$();var xe=N==="x"&&!l[R]&&i[R]||N==="y"&&!u[R]&&s[R],Se=N==="y"&&(!f[R]&&c[R]||h[R]),ye={letter:N,font:r.font,outerTicks:v[R],showGrid:!p[R],data:o[R]||[],bgColor:I,calendar:r.calendar,automargin:!0,visibleDflt:xe,reverseDflt:Se,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[N]||{})[B]};Y("uirevision",r.uirevision),wFe(D,O,Y,ye),Oee(D,O,Y,ye,r);var re=he&&N===Te.charAt(0),se=X("spikecolor",he?O.color:void 0),de=X("spikethickness",he?1.5:void 0),Me=X("spikedash",he?"dot":void 0),Ie=X("spikemode",he?"across":void 0),Ee=X("spikesnap"),qe=Y("showspikes",!!re||!!se||!!de||!!Me||!!Ie||!!Ee);qe||(delete O.spikecolor,delete O.spikethickness,delete O.spikedash,delete O.spikemode,delete O.spikesnap),Nee(D,O,Y,{letter:N,counterAxes:Z[N],overlayableAxes:Q(N,R),grid:r.grid}),Y("title.standoff"),we(),O._input=D}for(d=0;d<ie.length;){B=ie[d++],R=my(B),N=R.charAt(0),kx.isPlainObject(t[R])||(t[R]={}),D=t[R],O=zee.newContainer(r,R,N+"axis"),$();var be={letter:N,font:r.font,outerTicks:v[R],showGrid:!p[R],data:[],bgColor:I,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[N]||{})[B]};Y("uirevision",r.uirevision),O.type=ae[B]||"linear",Oee(D,O,Y,be,r),Nee(D,O,Y,{letter:N,counterAxes:Z[N],overlayableAxes:Q(N,R),grid:r.grid}),Y("fixedrange"),we(),O._input=D}var oe=x8("rangeslider","handleDefaults"),ce=x8("rangeselector","handleDefaults");for(d=0;d<k.length;d++)R=k[d],D=t[R],O=r[R],oe(t,r,R),O.type==="date"&&ce(D,O,r,T,O.calendar),Y("fixedrange");for(d=0;d<T.length;d++){R=T[d],D=t[R],O=r[R];var ue=r[my(O.anchor)],Re=x8("rangeslider","isVisible")(ue);Y("fixedrange",Re)}TFe.handleDefaults(t,r,{axIds:q.concat(ie).sort(y8.idSort),axHasImage:h})},MFe=Ra.exports,Uee=Pa,KE=bt.exports,Kh=xn.exports,JE=rn.exports,kFe=function(t,r,a,n){var o=t._fullLayout;if(r.length===0){JE.redrawComponents(t);return}function i(g){var m=g.xaxis,y=g.yaxis;o._defs.select("#"+g.clipId+"> rect").call(Kh.setTranslate,0,0).call(Kh.setScale,1,1),g.plot.call(Kh.setTranslate,m._offset,y._offset).call(Kh.setScale,1,1);var _=g.plot.selectAll(".scatterlayer .trace");_.selectAll(".point").call(Kh.setPointGroupScale,1,1),_.selectAll(".textpoint").call(Kh.setTextPointsScale,1,1),_.call(Kh.hideOutsideRangePoints,g)}function s(g,m){var y=g.plotinfo,_=y.xaxis,S=y.yaxis,M=_._length,w=S._length,A=!!g.xr1,k=!!g.yr1,T=[];if(A){var L=KE.simpleMap(g.xr0,_.r2l),C=KE.simpleMap(g.xr1,_.r2l),I=L[1]-L[0],R=C[1]-C[0];T[0]=(L[0]*(1-m)+m*C[0]-L[0])/(L[1]-L[0])*M,T[2]=M*(1-m+m*R/I),_.range[0]=_.l2r(L[0]*(1-m)+m*C[0]),_.range[1]=_.l2r(L[1]*(1-m)+m*C[1])}else T[0]=0,T[2]=M;if(k){var B=KE.simpleMap(g.yr0,S.r2l),N=KE.simpleMap(g.yr1,S.r2l),D=B[1]-B[0],O=N[1]-N[0];T[1]=(B[1]*(1-m)+m*N[1]-B[1])/(B[0]-B[1])*w,T[3]=w*(1-m+m*O/D),S.range[0]=_.l2r(B[0]*(1-m)+m*N[0]),S.range[1]=S.l2r(B[1]*(1-m)+m*N[1])}else T[1]=0,T[3]=w;JE.drawOne(t,_,{skipTitle:!0}),JE.drawOne(t,S,{skipTitle:!0}),JE.redrawComponents(t,[_._id,S._id]);var $=A?M/T[2]:1,Y=k?w/T[3]:1,X=A?T[0]:0,ee=k?T[1]:0,Q=A?T[0]/T[2]*M:0,Z=k?T[1]/T[3]*w:0,q=_._offset-Q,ae=S._offset-Z;y.clipRect.call(Kh.setTranslate,X,ee).call(Kh.setScale,1/$,1/Y),y.plot.call(Kh.setTranslate,q,ae).call(Kh.setScale,$,Y),Kh.setPointGroupScale(y.zoomScalePts,1/$,1/Y),Kh.setTextPointsScale(y.zoomScaleTxt,1/$,1/Y)}var l;n&&(l=n());function u(){for(var g={},m=0;m<r.length;m++){var y=r[m],_=y.plotinfo.xaxis,S=y.plotinfo.yaxis;y.xr1&&(g[_._name+".range"]=y.xr1.slice()),y.yr1&&(g[S._name+".range"]=y.yr1.slice())}return l&&l(),Uee.call("relayout",t,g).then(function(){for(var M=0;M<r.length;M++)i(r[M].plotinfo)})}function f(){for(var g={},m=0;m<r.length;m++){var y=r[m],_=y.plotinfo.xaxis,S=y.plotinfo.yaxis;y.xr0&&(g[_._name+".range"]=y.xr0.slice()),y.yr0&&(g[S._name+".range"]=y.yr0.slice())}return Uee.call("relayout",t,g).then(function(){for(var M=0;M<r.length;M++)i(r[M].plotinfo)})}var c,h,v,p=MFe.ease(a.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,f()});function d(){h=Date.now();for(var g=Math.min(1,(h-c)/a.duration),m=p(g),y=0;y<r.length;y++)s(r[y],m);h-c>a.duration?(u(),v=window.cancelAnimationFrame(d)):v=window.requestAnimationFrame(d)}return c=Date.now(),v=window.requestAnimationFrame(d),Promise.resolve()},QE=Ra.exports,Hee=Pa,eC=bt.exports,EFe=Eo.exports,CFe=xn.exports,Gee=Ml.getModuleCalcData,Ex=As,s0=Sl,LFe=Xh,oo=eC.ensureSingle;function Vee(e,t,r){return eC.ensureSingle(e,t,r,function(a){a.datum(r)})}Ii.name="cartesian";Ii.attr=["xaxis","yaxis"];Ii.idRoot=["x","y"];Ii.idRegex=s0.idRegex;Ii.attrRegex=s0.attrRegex;Ii.attributes=kee;Ii.layoutAttributes=Zu;Ii.supplyLayoutDefaults=SFe;Ii.transitionAxes=kFe;Ii.finalizeSubplots=function(e,t){var r=t._subplots,a=r.xaxis,n=r.yaxis,o=r.cartesian,i=o.concat(r.gl2d||[]),s={},l={},u,f,c;for(u=0;u<i.length;u++){var h=i[u].split("y");s[h[0]]=1,l["y"+h[1]]=1}for(u=0;u<a.length;u++)f=a[u],s[f]||(c=(e[Ex.id2name(f)]||{}).anchor,s0.idRegex.y.test(c)||(c="y"),o.push(f+c),i.push(f+c),l[c]||(l[c]=1,eC.pushUnique(n,c)));for(u=0;u<n.length;u++)c=n[u],l[c]||(f=(e[Ex.id2name(c)]||{}).anchor,s0.idRegex.x.test(f)||(f="x"),o.push(f+c),i.push(f+c),s[f]||(s[f]=1,eC.pushUnique(a,f)));if(!i.length){f="",c="";for(var v in e)if(s0.attrRegex.test(v)){var p=v.charAt(0);p==="x"?(!f||+v.substr(5)<+f.substr(5))&&(f=v):(!c||+v.substr(5)<+c.substr(5))&&(c=v)}f=f?Ex.name2id(f):"x",c=c?Ex.name2id(c):"y",a.push(f),n.push(c),o.push(f+c)}};Ii.plot=function(e,t,r,a){var n=e._fullLayout,o=n._subplots.cartesian,i=e.calcdata,s;if(!Array.isArray(t))for(t=[],s=0;s<i.length;s++)t.push(s);for(s=0;s<o.length;s++){for(var l=o[s],u=n._plots[l],f=[],c,h=0;h<i.length;h++){var v=i[h],p=v[0].trace;p.xaxis+p.yaxis===l&&((t.indexOf(p.index)!==-1||p.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&f.indexOf(c)===-1&&f.push(c),f.push(v)),c=v)}jee(e,u,f,r,a)}};function jee(e,t,r,a,n){for(var o=s0.traceLayerClasses,i=e._fullLayout,s=i._modules,l,u,f,c=[],h=[],v=0;v<s.length;v++){l=s[v];var p=l.name,d=Hee.modules[p].categories;if(d.svg){var g=l.layerName||p+"layer",m=l.plot;u=Gee(r,m),f=u[0],r=u[1],f.length&&c.push({i:o.indexOf(g),className:g,plotMethod:m,cdModule:f}),d.zoomScale&&h.push("."+g)}}c.sort(function(S,M){return S.i-M.i});var y=t.plot.selectAll("g.mlayer").data(c,function(S){return S.className});if(y.enter().append("g").attr("class",function(S){return S.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),y.exit().remove(),y.order(),y.each(function(S){var M=QE.select(this),w=S.className;S.plotMethod(e,t,S.cdModule,M,a,n),s0.clipOnAxisFalseQuery.indexOf("."+w)===-1&&CFe.setClipUrl(M,t.layerClipId,e)}),i._has("scattergl")&&(l=Hee.getModule("scattergl"),f=Gee(r,l)[0],l.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(s0.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var _=t.plot.selectAll(h.join(",")).selectAll(".trace");t.zoomScalePts=_.selectAll("path.point"),t.zoomScaleTxt=_.selectAll(".textpoint")}}Ii.clean=function(e,t,r,a){var n=a._plots||{},o=t._plots||{},i=a._subplots||{},s,l,u;if(a._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(u in n)s=n[u],s.plotgroup&&s.plotgroup.remove();var f=a._has&&a._has("gl"),c=t._has&&t._has("gl");if(f&&!c)for(u in n)s=n[u],s._scene&&s._scene.destroy();if(i.xaxis&&i.yaxis){var h=Ex.listIds({_fullLayout:a});for(l=0;l<h.length;l++){var v=h[l];t[Ex.id2name(v)]||a._infolayer.selectAll(".g-"+v+"title").remove()}}var p=a._has&&a._has("cartesian"),d=t._has&&t._has("cartesian");if(p&&!d)Yee(a._cartesianlayer.selectAll(".subplot"),a),a._defs.selectAll(".axesclip").remove(),delete a._axisConstraintGroups,delete a._axisMatchGroups;else if(i.cartesian)for(l=0;l<i.cartesian.length;l++){var g=i.cartesian[l];if(!o[g]){var m="."+g+",."+g+"-x,."+g+"-y";a._cartesianlayer.selectAll(m).remove(),Wee(g,a)}}};Ii.drawFramework=function(e){var t=e._fullLayout,r=PFe(e),a=t._cartesianlayer.selectAll(".subplot").data(r,String);a.enter().append("g").attr("class",function(n){return"subplot "+n[0]}),a.order(),a.exit().call(Yee,t),a.each(function(n){var o=n[0],i=t._plots[o];i.plotgroup=QE.select(this),qee(e,i),i.draglayer=oo(t._draggers,"g",o)})};Ii.rangePlot=function(e,t,r){qee(e,t),jee(e,t,r),EFe.style(e)};function PFe(e){var t=e._fullLayout,r=t._subplots.cartesian,a=r.length,n,o,i,s,l,u,f=[],c=[];for(n=0;n<a;n++){i=r[n],s=t._plots[i],l=s.xaxis,u=s.yaxis;var h=l._mainAxis,v=u._mainAxis,p=h._id+v._id,d=t._plots[p];s.overlays=[],p!==i&&d?(s.mainplot=p,s.mainplotinfo=d,c.push(i)):(s.mainplot=void 0,s.mainplotinfo=void 0,f.push(i))}for(n=0;n<c.length;n++)i=c[n],s=t._plots[i],s.mainplotinfo.overlays.push(s);var g=f.concat(c),m=new Array(a);for(n=0;n<a;n++){i=g[n],s=t._plots[i],l=s.xaxis,u=s.yaxis;var y=[i,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(o=0;o<s.overlays.length;o++)y.push(s.overlays[o].id);m[n]=y}return m}function qee(e,t){var r=t.plotgroup,a=t.id,n=s0.layerValue2layerClass[t.xaxis.layer],o=s0.layerValue2layerClass[t.yaxis.layer],i=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var l=t.mainplotinfo,u=l.plotgroup,f=a+"-x",c=a+"-y";t.gridlayer=l.gridlayer,t.zerolinelayer=l.zerolinelayer,oo(l.overlinesBelow,"path",f),oo(l.overlinesBelow,"path",c),oo(l.overaxesBelow,"g",f),oo(l.overaxesBelow,"g",c),t.plot=oo(l.overplot,"g",a),oo(l.overlinesAbove,"path",f),oo(l.overlinesAbove,"path",c),oo(l.overaxesAbove,"g",f),oo(l.overaxesAbove,"g",c),t.xlines=u.select(".overlines-"+n).select("."+f),t.ylines=u.select(".overlines-"+o).select("."+c),t.xaxislayer=u.select(".overaxes-"+n).select("."+f),t.yaxislayer=u.select(".overaxes-"+o).select("."+c)}else if(i)t.xlines=oo(r,"path","xlines-above"),t.ylines=oo(r,"path","ylines-above"),t.xaxislayer=oo(r,"g","xaxislayer-above"),t.yaxislayer=oo(r,"g","yaxislayer-above");else{var s=oo(r,"g","layer-subplot");t.shapelayer=oo(s,"g","shapelayer"),t.imagelayer=oo(s,"g","imagelayer"),t.gridlayer=oo(r,"g","gridlayer"),t.zerolinelayer=oo(r,"g","zerolinelayer"),oo(r,"path","xlines-below"),oo(r,"path","ylines-below"),t.overlinesBelow=oo(r,"g","overlines-below"),oo(r,"g","xaxislayer-below"),oo(r,"g","yaxislayer-below"),t.overaxesBelow=oo(r,"g","overaxes-below"),t.plot=oo(r,"g","plot"),t.overplot=oo(r,"g","overplot"),t.xlines=oo(r,"path","xlines-above"),t.ylines=oo(r,"path","ylines-above"),t.overlinesAbove=oo(r,"g","overlines-above"),oo(r,"g","xaxislayer-above"),oo(r,"g","yaxislayer-above"),t.overaxesAbove=oo(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+n),t.ylines=r.select(".ylines-"+o),t.xaxislayer=r.select(".xaxislayer-"+n),t.yaxislayer=r.select(".yaxislayer-"+o)}i||(Vee(t.gridlayer,"g",t.xaxis._id),Vee(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(h){return h[0]}).sort(Ex.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function Yee(e,t){if(!!e){var r={};e.each(function(l){var u=l[0],f=QE.select(this);f.remove(),Wee(u,t),r[u]=!0});for(var a in t._plots)for(var n=t._plots[a],o=n.overlays||[],i=0;i<o.length;i++){var s=o[i];r[s.id]&&s.plot.selectAll(".trace").remove()}}}function Wee(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}Ii.toSVG=function(e){var t=e._fullLayout._glimages,r=QE.select(e).selectAll(".svg-container"),a=r.filter(function(o,i){return i===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var o=this,i=o.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:LFe.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:o.style.width,height:o.style.height})}a.each(n)};Ii.updateFx=Oz.updateFx;var tC=Ro,IFe={hasLines:tC.hasLines,hasMarkers:tC.hasMarkers,hasText:tC.hasText,isBubble:tC.isBubble,attributes:Cl,supplyDefaults:Lze,crossTraceDefaults:nee,calc:Kd.calc,crossTraceCalc:Bze,arraysToCalcdata:Vg,plot:JT,colorbar:Pf,formatLabels:l8,style:fh.style,styleOnSelect:fh.styleOnSelect,hoverPoints:eA,selectPoints:tA,animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Ii,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},DFe={moduleType:"component",name:"legend",layoutAttributes:yK,supplyLayoutDefaults:xK,draw:RK,style:MK},Xee=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],RFe=Ra.exports,zFe=Oa.exports,Zee=Xee,b8=bt.exports,FFe=b8.strScale,OFe=b8.strRotate,NFe=b8.strTranslate,BFe=function(t,r,a){var n=t.node(),o=Zee[a.arrowhead||0],i=Zee[a.startarrowhead||0],s=(a.arrowwidth||1)*(a.arrowsize||1),l=(a.arrowwidth||1)*(a.startarrowsize||1),u=r.indexOf("start")>=0,f=r.indexOf("end")>=0,c=o.backoff*s+a.standoff,h=i.backoff*l+a.startstandoff,v,p,d,g;if(n.nodeName==="line"){v={x:+t.attr("x1"),y:+t.attr("y1")},p={x:+t.attr("x2"),y:+t.attr("y2")};var m=v.x-p.x,y=v.y-p.y;if(d=Math.atan2(y,m),g=d+Math.PI,c&&h&&c+h>Math.sqrt(m*m+y*y)){B();return}if(c){if(c*c>m*m+y*y){B();return}var _=c*Math.cos(d),S=c*Math.sin(d);p.x+=_,p.y+=S,t.attr({x2:p.x,y2:p.y})}if(h){if(h*h>m*m+y*y){B();return}var M=h*Math.cos(d),w=h*Math.sin(d);v.x-=M,v.y-=w,t.attr({x1:v.x,y1:v.y})}}else if(n.nodeName==="path"){var A=n.getTotalLength(),k="";if(A<c+h){B();return}var T=n.getPointAtLength(0),L=n.getPointAtLength(.1);d=Math.atan2(T.y-L.y,T.x-L.x),v=n.getPointAtLength(Math.min(h,A)),k="0px,"+h+"px,";var C=n.getPointAtLength(A),I=n.getPointAtLength(A-.1);g=Math.atan2(C.y-I.y,C.x-I.x),p=n.getPointAtLength(Math.max(0,A-c));var R=k?h+c:c;k+=A-R+"px,"+A+"px",t.style("stroke-dasharray",k)}function B(){t.style("stroke-dasharray","0px,100px")}function N(D,O,$,Y){!D.path||(D.noRotate&&($=0),RFe.select(n.parentNode).append("path").attr({class:t.attr("class"),d:D.path,transform:NFe(O.x,O.y)+OFe($*180/Math.PI)+FFe(Y)}).style({fill:zFe.rgb(a.arrowcolor),"stroke-width":0}))}u&&N(i,v,d,l),f&&N(o,p,g,s)},Kee=Ra.exports,_8=Pa,$Fe=Eo.exports,yy=bt.exports,w8=yy.strTranslate,iA=rn.exports,Cx=Oa.exports,jg=xn.exports,Jee=Rs,T8=xo,A8=Zp,oA=kf.exports,UFe=si.arrayEditor,HFe=BFe,S8={draw:GFe,drawOne:Qee,drawRaw:ete};function GFe(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&Qee(e,r);return $Fe.previousPromises(e)}function Qee(e,t){var r=e._fullLayout,a=r.annotations[t]||{},n=iA.getFromId(e,a.xref),o=iA.getFromId(e,a.yref);n&&n.setScale(),o&&o.setScale(),ete(e,a,t,!1,n,o)}function xy(e,t,r,a,n){var o=n[r],i=n[r+"ref"],s=r.indexOf("y")!==-1,l=iA.getRefType(i)==="domain",u=s?a.h:a.w;return e?l?o+(s?-t:t)/e._length:e.p2r(e.r2p(o)+t):o+(s?-t:t)/u}function ete(e,t,r,a,n,o){var i=e._fullLayout,s=e._fullLayout._size,l=e._context.edits,u,f;a?(u="annotation-"+a,f=a+".annotations"):(u="annotation",f="annotations");var c=UFe(e.layout,f,t),h=c.modifyBase,v=c.modifyItem,p=c.getUpdateObj;i._infolayer.selectAll("."+u+'[data-index="'+r+'"]').remove();var d="clip"+i._uid+"_ann"+r;if(!t._input||t.visible===!1){Kee.selectAll("#"+d).remove();return}var g={x:{},y:{}},m=+t.textangle||0,y=i._infolayer.append("g").classed(u,!0).attr("data-index",String(r)).style("opacity",t.opacity),_=y.append("g").classed("annotation-text-g",!0),S=l[t.showarrow?"annotationTail":"annotationPosition"],M=t.captureevents||l.annotationText||S;function w(Y){var X={index:r,annotation:t._input,fullAnnotation:t,event:Y};return a&&(X.subplotId=a),X}var A=_.append("g").style("pointer-events",M?"all":null).call(A8,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",w(Kee.event))});t.hovertext&&A.on("mouseover",function(){var Y=t.hoverlabel,X=Y.font,ee=this.getBoundingClientRect(),Q=e.getBoundingClientRect();Jee.loneHover({x0:ee.left-Q.left,x1:ee.right-Q.left,y:(ee.top+ee.bottom)/2-Q.top,text:t.hovertext,color:Y.bgcolor,borderColor:Y.bordercolor,fontFamily:X.family,fontSize:X.size,fontColor:X.color},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:e})}).on("mouseout",function(){Jee.loneUnhover(i._hoverlayer.node())});var k=t.borderwidth,T=t.borderpad,L=k+T,C=A.append("rect").attr("class","bg").style("stroke-width",k+"px").call(Cx.stroke,t.bordercolor).call(Cx.fill,t.bgcolor),I=t.width||t.height,R=i._topclips.selectAll("#"+d).data(I?[0]:[]);R.enter().append("clipPath").classed("annclip",!0).attr("id",d).append("rect"),R.exit().remove();var B=t.font,N=i._meta?yy.templateString(t.text,i._meta):t.text,D=A.append("text").classed("annotation-text",!0).text(N);function O(Y){return Y.call(jg.font,B).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),T8.convertToTspans(Y,e,$),Y}function $(){var Y=D.selectAll("a");if(Y.size()===1&&Y.text()===D.text()){var X=A.insert("a",":first-child").attr({"xlink:xlink:href":Y.attr("xlink:href"),"xlink:xlink:show":Y.attr("xlink:show")}).style({cursor:"pointer"});X.node().appendChild(C.node())}var ee=A.select(".annotation-text-math-group"),Q=!ee.empty(),Z=jg.bBox((Q?ee:D).node()),q=Z.width,ae=Z.height,ie=t.width||q,we=t.height||ae,Te=Math.round(ie+2*L),he=Math.round(we+2*L);function xe(Sr,Zr){return Zr==="auto"&&(Sr<1/3?Zr="left":Sr>2/3?Zr="right":Zr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Zr]}for(var Se=!1,ye=["x","y"],re=0;re<ye.length;re++){var se=ye[re],de=t[se+"ref"]||se,Me=t["a"+se+"ref"],Ie={x:n,y:o}[se],Ee=(m+(se==="x"?0:-90))*Math.PI/180,qe=Te*Math.cos(Ee),be=he*Math.sin(Ee),oe=Math.abs(qe)+Math.abs(be),ce=t[se+"anchor"],ue=t[se+"shift"]*(se==="x"?1:-1),Re=g[se],Xe,Ke,vt,Ze,Qe,Je=iA.getRefType(de);if(Ie&&Je!=="domain"){var je=Ie.r2fraction(t[se]);(je<0||je>1)&&(Me===de?(je=Ie.r2fraction(t["a"+se]),(je<0||je>1)&&(Se=!0)):Se=!0),Xe=Ie._offset+Ie.r2p(t[se]),Ze=.5}else{var $e=Je==="domain";se==="x"?(vt=t[se],Xe=$e?Ie._offset+Ie._length*vt:Xe=s.l+s.w*vt):(vt=1-t[se],Xe=$e?Ie._offset+Ie._length*vt:Xe=s.t+s.h*vt),Ze=t.showarrow?.5:vt}if(t.showarrow){Re.head=Xe;var Ye=t["a"+se];if(Qe=qe*xe(.5,t.xanchor)-be*xe(.5,t.yanchor),Me===de){var yt=iA.getRefType(Me);yt==="domain"?(se==="y"&&(Ye=1-Ye),Re.tail=Ie._offset+Ie._length*Ye):yt==="paper"?se==="y"?(Ye=1-Ye,Re.tail=s.t+s.h*Ye):Re.tail=s.l+s.w*Ye:Re.tail=Ie._offset+Ie.r2p(Ye),Ke=Qe}else Re.tail=Xe+Ye,Ke=Qe+Ye;Re.text=Re.tail+Qe;var _t=i[se==="x"?"width":"height"];if(de==="paper"&&(Re.head=yy.constrain(Re.head,1,_t-1)),Me==="pixel"){var Pt=-Math.max(Re.tail-3,Re.text),Tt=Math.min(Re.tail+3,Re.text)-_t;Pt>0?(Re.tail+=Pt,Re.text+=Pt):Tt>0&&(Re.tail-=Tt,Re.text-=Tt)}Re.tail+=ue,Re.head+=ue}else Qe=oe*xe(Ze,ce),Ke=Qe,Re.text=Xe+Qe;Re.text+=ue,Qe+=ue,Ke+=ue,t["_"+se+"padplus"]=oe/2+Ke,t["_"+se+"padminus"]=oe/2-Ke,t["_"+se+"size"]=oe,t["_"+se+"shift"]=Qe}if(Se){A.remove();return}var Ot=0,qt=0;if(t.align!=="left"&&(Ot=(ie-q)*(t.align==="center"?.5:1)),t.valign!=="top"&&(qt=(we-ae)*(t.valign==="middle"?.5:1)),Q)ee.select("svg").attr({x:L+Ot-1,y:L+qt}).call(jg.setClipUrl,I?d:null,e);else{var Xt=L+qt-Z.top,Or=L+Ot-Z.left;D.call(T8.positionText,Or,Xt).call(jg.setClipUrl,I?d:null,e)}R.select("rect").call(jg.setRect,L,L,ie,we),C.call(jg.setRect,k/2,k/2,Te-k,he-k),A.call(jg.setTranslate,Math.round(g.x.text-Te/2),Math.round(g.y.text-he/2)),_.attr({transform:"rotate("+m+","+g.x.text+","+g.y.text+")"});var Br=function(Sr,Zr){y.selectAll(".annotation-arrow-g").remove();var Oe=g.x.head,it=g.y.head,ft=g.x.tail+Sr,pt=g.y.tail+Zr,Dt=g.x.text+Sr,Nt=g.y.text+Zr,hr=yy.rotationXYMatrix(m,Dt,Nt),fr=yy.apply2DTransform(hr),vr=yy.apply2DTransform2(hr),Ut=+C.attr("width"),Fr=+C.attr("height"),sa=Dt-.5*Ut,$r=sa+Ut,Ca=Nt-.5*Fr,on=Ca+Fr,Fa=[[sa,Ca,sa,on],[sa,on,$r,on],[$r,on,$r,Ca],[$r,Ca,sa,Ca]].map(vr);if(!Fa.reduce(function(wt,Mt){return wt^!!yy.segmentsIntersect(Oe,it,Oe+1e6,it+1e6,Mt[0],Mt[1],Mt[2],Mt[3])},!1)){Fa.forEach(function(wt){var Mt=yy.segmentsIntersect(ft,pt,Oe,it,wt[0],wt[1],wt[2],wt[3]);Mt&&(ft=Mt.x,pt=Mt.y)});var jr=t.arrowwidth,Rn=t.arrowcolor,xa=t.arrowside,ia=y.append("g").style({opacity:Cx.opacity(Rn)}).classed("annotation-arrow-g",!0),vn=ia.append("path").attr("d","M"+ft+","+pt+"L"+Oe+","+it).style("stroke-width",jr+"px").call(Cx.stroke,Cx.rgb(Rn));if(HFe(vn,xa,t),l.annotationPosition&&vn.node().parentNode&&!a){var ka=Oe,Ge=it;if(t.standoff){var Pe=Math.sqrt(Math.pow(Oe-ft,2)+Math.pow(it-pt,2));ka+=t.standoff*(ft-Oe)/Pe,Ge+=t.standoff*(pt-it)/Pe}var Ne=ia.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ft-ka)+","+(pt-Ge),transform:w8(ka,Ge)}).style("stroke-width",jr+6+"px").call(Cx.stroke,"rgba(0,0,0,0)").call(Cx.fill,"rgba(0,0,0,0)"),We,lt;oA.init({element:Ne.node(),gd:e,prepFn:function(){var wt=jg.getTranslate(A);We=wt.x,lt=wt.y,n&&n.autorange&&h(n._name+".autorange",!0),o&&o.autorange&&h(o._name+".autorange",!0)},moveFn:function(wt,Mt){var It=fr(We,lt),rr=It[0]+wt,sr=It[1]+Mt;A.call(jg.setTranslate,rr,sr),v("x",xy(n,wt,"x",s,t)),v("y",xy(o,Mt,"y",s,t)),t.axref===t.xref&&v("ax",xy(n,wt,"ax",s,t)),t.ayref===t.yref&&v("ay",xy(o,Mt,"ay",s,t)),ia.attr("transform",w8(wt,Mt)),_.attr({transform:"rotate("+m+","+rr+","+sr+")"})},doneFn:function(){_8.call("_guiRelayout",e,p());var wt=document.querySelector(".js-notes-box-panel");wt&&wt.redraw(wt.selectedObj)}})}}};if(t.showarrow&&Br(0,0),S){var Qr;oA.init({element:A.node(),gd:e,prepFn:function(){Qr=_.attr("transform")},moveFn:function(Sr,Zr){var Oe="pointer";if(t.showarrow)t.axref===t.xref?v("ax",xy(n,Sr,"ax",s,t)):v("ax",t.ax+Sr),t.ayref===t.yref?v("ay",xy(o,Zr,"ay",s.w,t)):v("ay",t.ay+Zr),Br(Sr,Zr);else{if(a)return;var it,ft;if(n)it=xy(n,Sr,"x",s,t);else{var pt=t._xsize/s.w,Dt=t.x+(t._xshift-t.xshift)/s.w-pt/2;it=oA.align(Dt+Sr/s.w,pt,0,1,t.xanchor)}if(o)ft=xy(o,Zr,"y",s,t);else{var Nt=t._ysize/s.h,hr=t.y-(t._yshift+t.yshift)/s.h-Nt/2;ft=oA.align(hr-Zr/s.h,Nt,0,1,t.yanchor)}v("x",it),v("y",ft),(!n||!o)&&(Oe=oA.getCursor(n?.5:it,o?.5:ft,t.xanchor,t.yanchor))}_.attr({transform:w8(Sr,Zr)+Qr}),A8(A,Oe)},clickFn:function(Sr,Zr){t.captureevents&&e.emit("plotly_clickannotation",w(Zr))},doneFn:function(){A8(A),_8.call("_guiRelayout",e,p());var Sr=document.querySelector(".js-notes-box-panel");Sr&&Sr.redraw(Sr.selectedObj)}})}}l.annotationText?D.call(T8.makeEditable,{delegate:A,gd:e}).call(O).on("edit",function(Y){t.text=Y,this.call(O),v("text",Y),n&&n.autorange&&h(n._name+".autorange",!0),o&&o.autorange&&h(o._name+".autorange",!0),_8.call("_guiRelayout",e,p())}):D.call(O)}var tte=bt.exports,VFe=Pa,rte=si.arrayEditor,jFe={hasClickToShow:qFe,onClick:YFe};function qFe(e,t){var r=ate(e,t);return r.on.length>0||r.explicitOff.length>0}function YFe(e,t){var r=ate(e,t),a=r.on,n=r.off.concat(r.explicitOff),o={},i=e._fullLayout.annotations,s,l;if(!!(a.length||n.length)){for(s=0;s<a.length;s++)l=rte(e.layout,"annotations",i[a[s]]),l.modifyItem("visible",!0),tte.extendFlat(o,l.getUpdateObj());for(s=0;s<n.length;s++)l=rte(e.layout,"annotations",i[n[s]]),l.modifyItem("visible",!1),tte.extendFlat(o,l.getUpdateObj());return VFe.call("update",e,{},o)}}function ate(e,t){var r=e._fullLayout.annotations,a=[],n=[],o=[],i=(t||[]).length,s,l,u,f,c,h,v,p;for(s=0;s<r.length;s++)if(u=r[s],f=u.clicktoshow,f){for(l=0;l<i;l++)if(c=t[l],h=c.xaxis,v=c.yaxis,h._id===u.xref&&v._id===u.yref&&h.d2r(c.x)===nte(u._xclick,h)&&v.d2r(c.y)===nte(u._yclick,v)){u.visible?f==="onout"?p=n:p=o:p=a,p.push(s);break}l===i&&u.visible&&f==="onout"&&n.push(s)}return{on:a,off:n,explicitOff:o}}function nte(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}var M8={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}},ite=Xee,ote=Ts,rC=Sl,WFe=si.templatedArray,aC=M8;function ste(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function lte(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}var sA=WFe("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:ote({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:ite.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:ite.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[lte("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[lte("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",rC.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",aC.axisRefDescription("ax","left","right"),ste("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",rC.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",aC.axisRefDescription("ay","bottom","top"),ste("y")].join(" ")},xref:{valType:"enumerated",values:["paper",rC.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",aC.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",rC.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",aC.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:ote({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),ute=bt.exports,o2=Oa.exports,fte=function(t,r,a,n){n("opacity");var o=n("bgcolor"),i=n("bordercolor"),s=o2.opacity(i);n("borderpad");var l=n("borderwidth"),u=n("showarrow");n("text",u?" ":a._dfltTitle.annotation),n("textangle"),ute.coerceFont(n,"font",a.font),n("width"),n("align");var f=n("height");if(f&&n("valign"),u){var c=n("arrowside"),h,v;c.indexOf("end")!==-1&&(h=n("arrowhead"),v=n("arrowsize")),c.indexOf("start")!==-1&&(n("startarrowhead",h),n("startarrowsize",v)),n("arrowcolor",s?r.bordercolor:o2.defaultLine),n("arrowwidth",(s&&l||1)*2),n("standoff"),n("startstandoff")}var p=n("hovertext"),d=a.hoverlabel||{};if(p){var g=n("hoverlabel.bgcolor",d.bgcolor||(o2.opacity(o)?o2.rgb(o):o2.defaultLine)),m=n("hoverlabel.bordercolor",d.bordercolor||o2.contrast(g));ute.coerceFont(n,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||m})}n("captureevents",!!p)},k8=bt.exports,Lx=rn.exports,XFe=nc,ZFe=fte,KFe=sA,JFe=function(t,r){XFe(t,r,{name:"annotations",handleItemDefaults:QFe})};function QFe(e,t,r){function a(_,S){return k8.coerce(e,t,KFe,_,S)}var n=a("visible"),o=a("clicktoshow");if(!!(n||o)){ZFe(e,t,r,a);for(var i=t.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:r},f=0;f<2;f++){var c=s[f],h=Lx.coerceRef(e,t,u,c,"","paper");if(h!=="paper"){var v=Lx.getFromId(u,h);v._annIndices.push(t._index)}if(Lx.coercePosition(t,u,a,h,c,.5),i){var p="a"+c,d=Lx.coerceRef(e,t,u,p,"pixel",["pixel","paper"]);d!=="pixel"&&d!==h&&(d=t[p]="pixel");var g=d==="pixel"?l[f]:.4;Lx.coercePosition(t,u,a,d,p,g)}a(c+"anchor"),a(c+"shift")}if(k8.noneOrAll(e,t,["x","y"]),i&&k8.noneOrAll(e,t,["ax","ay"]),o){var m=a("xclick"),y=a("yclick");t._xclick=m===void 0?t.x:Lx.cleanPosition(m,u,t.xref),t._yclick=y===void 0?t.y:Lx.cleanPosition(y,u,t.yref)}}}var e8e=Pa,cte=bt.exports,hte=As,E8=function(t){return function(a,n){var o=a[t];if(!!Array.isArray(o))for(var i=e8e.subplotsRegistry.cartesian,s=i.idRegex,l=n._subplots,u=l.xaxis,f=l.yaxis,c=l.cartesian,h=n._has("cartesian")||n._has("gl2d"),v=0;v<o.length;v++){var p=o[v];if(!!cte.isPlainObject(p)){var d=hte.cleanId(p.xref,"x",!1),g=hte.cleanId(p.yref,"y",!1),m=s.x.test(d),y=s.y.test(g);if(m||y){h||cte.pushUnique(n._basePlotModules,i);var _=!1;m&&u.indexOf(d)===-1&&(u.push(d),_=!0),y&&f.indexOf(g)===-1&&(f.push(g),_=!0),_&&m&&y&&c.push(d+g)}}}}},C8=bt.exports,Px=rn.exports,t8e=S8.draw,r8e=function(t){var r=t._fullLayout,a=C8.filterVisible(r.annotations);if(a.length&&t._fullData.length)return C8.syncOrAsync([t8e,a8e],t)};function a8e(e){var t=e._fullLayout;C8.filterVisible(t.annotations).forEach(function(r){var a=Px.getFromId(e,r.xref),n=Px.getFromId(e,r.yref),o=Px.getRefType(r.xref),i=Px.getRefType(r.yref);r._extremes={},o==="range"&&vte(r,a),i==="range"&&vte(r,n)})}function vte(e,t){var r=t._id,a=r.charAt(0),n=e[a],o=e["a"+a],i=e[a+"ref"],s=e["a"+a+"ref"],l=e["_"+a+"padplus"],u=e["_"+a+"padminus"],f={x:1,y:-1}[a]*e[a+"shift"],c=3*e.arrowsize*e.arrowwidth||0,h=c+f,v=c-f,p=3*e.startarrowsize*e.arrowwidth||0,d=p+f,g=p-f,m;if(s===i){var y=Px.findExtremes(t,[t.r2c(n)],{ppadplus:h,ppadminus:v}),_=Px.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(l,d),ppadminus:Math.max(u,g)});m={min:[y.min[0],_.min[0]],max:[y.max[0],_.max[0]]}}else d=o?d+o:d,g=o?g-o:g,m=Px.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,h,d),ppadminus:Math.max(u,v,g)});e._extremes[r]=m}var n8e=gn,i8e=AR,o8e=function(t,r,a,n){r=r||{};var o=a==="log"&&r.type==="linear",i=a==="linear"&&r.type==="log";if(!(o||i))return;var s=t._fullLayout.annotations,l=r._id.charAt(0),u,f;function c(v){var p=u[v],d=null;o?d=i8e(p,r.range):d=Math.pow(10,p),n8e(d)||(d=null),n(f+v,d)}for(var h=0;h<s.length;h++)u=s[h],f="annotations["+h+"].",u[l+"ref"]===r._id&&c(l),u["a"+l+"ref"]===r._id&&c("a"+l)},L8=S8,dte=jFe,s8e={moduleType:"component",name:"annotations",layoutAttributes:sA,supplyLayoutDefaults:JFe,includeBasePlot:E8("annotations"),calcAutorange:r8e,draw:L8.draw,drawOne:L8.drawOne,drawRaw:L8.drawRaw,hasClickToShow:dte.hasClickToShow,onClick:dte.onClick,convertCoords:o8e},zo=sA,l8e=Jo.overrideAll,u8e=si.templatedArray,P8=l8e(u8e("annotation",{visible:zo.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:zo.xanchor,xshift:zo.xshift,yanchor:zo.yanchor,yshift:zo.yshift,text:zo.text,textangle:zo.textangle,font:zo.font,width:zo.width,height:zo.height,opacity:zo.opacity,align:zo.align,valign:zo.valign,bgcolor:zo.bgcolor,bordercolor:zo.bordercolor,borderpad:zo.borderpad,borderwidth:zo.borderwidth,showarrow:zo.showarrow,arrowcolor:zo.arrowcolor,arrowhead:zo.arrowhead,startarrowhead:zo.startarrowhead,arrowside:zo.arrowside,arrowsize:zo.arrowsize,startarrowsize:zo.startarrowsize,arrowwidth:zo.arrowwidth,standoff:zo.standoff,startstandoff:zo.startstandoff,hovertext:zo.hovertext,hoverlabel:zo.hoverlabel,captureevents:zo.captureevents}),"calc","from-root"),I8=bt.exports,f8e=rn.exports,c8e=nc,h8e=fte,v8e=P8,d8e=function(t,r,a){c8e(t,r,{name:"annotations",handleItemDefaults:p8e,fullLayout:a.fullLayout})};function p8e(e,t,r,a){function n(s,l){return I8.coerce(e,t,v8e,s,l)}function o(s){var l=s+"axis",u={_fullLayout:{}};return u._fullLayout[l]=r[l],f8e.coercePosition(t,u,n,s,s,.5)}var i=n("visible");!i||(h8e(e,t,a.fullLayout,n),o("x"),o("y"),o("z"),I8.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),I8.noneOrAll(e,t,["ax","ay"])))}var pte=bt.exports,gte=rn.exports,g8e=function(t){for(var r=t.fullSceneLayout,a=r.annotations,n=0;n<a.length;n++)m8e(a[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function m8e(e,t){var r=t.fullSceneLayout,a=r.domain,n=t.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},pte.extendFlat(e._xa,o),gte.setConvert(e._xa),e._xa._offset=n.l+a.x[0]*n.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*n.w*(a.x[1]-a.x[0])},e._ya={},pte.extendFlat(e._ya,o),gte.setConvert(e._ya),e._ya._offset=n.t+(1-a.y[1])*n.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*n.h*(a.y[1]-a.y[0])}}function D8(e,t){var r=[0,0,0,0],a,n;for(a=0;a<4;++a)for(n=0;n<4;++n)r[n]+=e[4*a+n]*t[a];return r}function y8e(e,t){var r=D8(e.projection,D8(e.view,D8(e.model,[t[0],t[1],t[2],1])));return r}var mte=y8e,x8e=S8.drawRaw,b8e=mte,_8e=["x","y","z"],w8e=function(t){for(var r=t.fullSceneLayout,a=t.dataScale,n=r.annotations,o=0;o<n.length;o++){for(var i=n[o],s=!1,l=0;l<3;l++){var u=_8e[l],f=i[u],c=r[u+"axis"],h=c.r2fraction(f);if(h<0||h>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+o+'"]').remove():(i._pdata=b8e(t.glplot.cameraParams,[r.xaxis.r2l(i.x)*a[0],r.yaxis.r2l(i.y)*a[1],r.zaxis.r2l(i.z)*a[2]]),x8e(t.graphDiv,i,o,t.id,i._xa,i._ya))}},T8e=Pa,yte=bt.exports,A8e={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:P8}}},layoutAttributes:P8,handleDefaults:d8e,includeBasePlot:S8e,convert:g8e,draw:w8e};function S8e(e,t){var r=T8e.subplotsRegistry.gl3d;if(!!r)for(var a=r.attrRegex,n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];a.test(i)&&(e[i].annotations||[]).length&&(yte.pushUnique(t._basePlotModules,r),yte.pushUnique(t._subplots.gl3d,i))}}var xte=sA,bte=Cl.line,M8e=Bd.dash,lA=cn.extendFlat,k8e=si.templatedArray,_te=M8,wte=k8e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:lA({},xte.xref,{description:["Sets the shape's x coordinate axis.",_te.axisRefDescription("x","left","right"),"If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:lA({},xte.yref,{description:["Sets the annotation's y coordinate axis.",_te.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:lA({},bte.color,{editType:"arraydraw"}),width:lA({},bte.width,{editType:"calc+arraydraw"}),dash:lA({},M8e,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},editType:"arraydraw"}),R8=bt.exports,s2=rn.exports,E8e=nc,C8e=wte,Tte=kE,L8e=function(t,r){E8e(t,r,{name:"shapes",handleItemDefaults:P8e})};function P8e(e,t,r){function a(R,B){return R8.coerce(e,t,C8e,R,B)}var n=a("visible");if(!!n){var o=a("path"),i=o?"path":"rect",s=a("type",i);t.type!=="path"&&delete t.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule");var l=a("line.width");l&&(a("line.color"),a("line.dash"));for(var u=a("xsizemode"),f=a("ysizemode"),c=["x","y"],h=0;h<2;h++){var v=c[h],p=v+"anchor",d=v==="x"?u:f,g={_fullLayout:r},m,y,_,S=s2.coerceRef(e,t,g,v,void 0,"paper"),M=s2.getRefType(S);if(M==="range"?(m=s2.getFromId(g,S),m._shapeIndices.push(t._index),_=Tte.rangeToShapePosition(m),y=Tte.shapePositionToRange(m)):y=_=R8.identity,s!=="path"){var w=.25,A=.75,k=v+"0",T=v+"1",L=e[k],C=e[T];e[k]=y(e[k],!0),e[T]=y(e[T],!0),d==="pixel"?(a(k,0),a(T,10)):(s2.coercePosition(t,g,a,S,k,w),s2.coercePosition(t,g,a,S,T,A)),t[k]=_(t[k]),t[T]=_(t[T]),e[k]=L,e[T]=C}if(d==="pixel"){var I=e[p];e[p]=y(e[p],!0),s2.coercePosition(t,g,a,S,p,.25),t[p]=_(t[p]),e[p]=I}}s==="path"?a("path"):R8.noneOrAll(e,t,["x0","x1","y0","y1"])}}var I8e=Oa.exports,D8e=function(t,r,a){a("newshape.drawdirection"),a("newshape.layer"),a("newshape.fillcolor"),a("newshape.fillrule"),a("newshape.opacity");var n=a("newshape.line.width");if(n){var o=(t||{}).plot_bgcolor||"#FFF";a("newshape.line.color",I8e.contrast(o)),a("newshape.line.dash")}a("activeshape.fillcolor"),a("activeshape.opacity")},z8=bt.exports,l2=rn.exports,u2=pF,Ate=kE,R8e=function(t){var r=t._fullLayout,a=z8.filterVisible(r.shapes);if(!(!a.length||!t._fullData.length))for(var n=0;n<a.length;n++){var o=a[n];o._extremes={};var i,s,l=l2.getRefType(o.xref),u=l2.getRefType(o.yref);if(o.xref!=="paper"&&l!=="domain"){var f=o.xsizemode==="pixel"?o.xanchor:o.x0,c=o.xsizemode==="pixel"?o.xanchor:o.x1;i=l2.getFromId(t,o.xref),s=Mte(i,f,c,o.path,u2.paramIsX),s&&(o._extremes[i._id]=l2.findExtremes(i,s,z8e(o)))}if(o.yref!=="paper"&&u!=="domain"){var h=o.ysizemode==="pixel"?o.yanchor:o.y0,v=o.ysizemode==="pixel"?o.yanchor:o.y1;i=l2.getFromId(t,o.yref),s=Mte(i,h,v,o.path,u2.paramIsY),s&&(o._extremes[i._id]=l2.findExtremes(i,s,F8e(o)))}}};function z8e(e){return Ste(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function F8e(e){return Ste(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function Ste(e,t,r,a,n,o){var i=e/2,s=o;if(t==="pixel"){var l=n?Ate.extractPathCoords(n,o?u2.paramIsY:u2.paramIsX):[r,a],u=z8.aggNums(Math.max,null,l),f=z8.aggNums(Math.min,null,l),c=f<0?Math.abs(f)+i:i,h=u>0?u+i:i;return{ppad:i,ppadplus:s?c:h,ppadminus:s?h:c}}else return{ppad:i}}function Mte(e,t,r,a,n){var o=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==void 0)return[o(t),o(r)];if(!!a){var i=1/0,s=-1/0,l=a.match(u2.segmentRE),u,f,c,h,v;for(e.type==="date"&&(o=Ate.decodeDate(o)),u=0;u<l.length;u++)f=l[u],c=n[f.charAt(0)].drawn,c!==void 0&&(h=l[u].substr(1).match(u2.paramRE),!(!h||h.length<c)&&(v=o(h[c]),v<i&&(i=v),v>s&&(s=v)));if(s>=i)return[i,s]}}var kte=gJ,O8e={moduleType:"component",name:"shapes",layoutAttributes:wte,supplyLayoutDefaults:L8e,supplyDrawNewShapeDefaults:D8e,includeBasePlot:E8("shapes"),calcAutorange:R8e,draw:kte.draw,drawOne:kte.drawOne},Ete=Sl,N8e=si.templatedArray,Cte=M8,Lte=N8e("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",Ete.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",Cte.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",Ete.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",Cte.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),B8e=bt.exports,F8=rn.exports,$8e=nc,U8e=Lte,H8e="images",G8e=function(t,r){var a={name:H8e,handleItemDefaults:V8e};$8e(t,r,a)};function V8e(e,t,r){function a(h,v){return B8e.coerce(e,t,U8e,h,v)}var n=a("source"),o=a("visible",!!n);if(!o)return t;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var i={_fullLayout:r},s=["x","y"],l=0;l<2;l++){var u=s[l],f=F8.coerceRef(e,t,i,u,"paper",void 0);if(f!=="paper"){var c=F8.getFromId(i,f);c._imgIndices.push(t._index)}F8.coercePosition(t,i,a,f,u,0)}return t}var Pte=Ra.exports,j8e=xn.exports,f2=rn.exports,Ite=As,q8e=Xh,Y8e=function(t){var r=t._fullLayout,a=[],n={},o=[],i,s;for(s=0;s<r.images.length;s++){var l=r.images[s];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){i=Ite.ref2id(l.xref)+Ite.ref2id(l.yref);var u=r._plots[i];if(!u){o.push(l);continue}u.mainplot&&(i=u.mainplot.id),n[i]||(n[i]=[]),n[i].push(l)}else l.layer==="above"?a.push(l):o.push(l)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function c(y){var _=Pte.select(this);if(this._imgSrc!==y.source)if(_.attr("xmlns",q8e.svg),y.source&&y.source.slice(0,5)==="data:")_.attr("xlink:href",y.source),this._imgSrc=y.source;else{var S=new Promise(function(M){var w=new Image;this.img=w,w.setAttribute("crossOrigin","anonymous"),w.onerror=A,w.onload=function(){var k=document.createElement("canvas");k.width=this.width,k.height=this.height;var T=k.getContext("2d");T.drawImage(this,0,0);var L=k.toDataURL("image/png");_.attr("xlink:href",L),M()},_.on("error",A),w.src=y.source,this._imgSrc=y.source;function A(){_.remove(),M()}}.bind(this));t._promises.push(S)}}function h(y){var _=Pte.select(this),S=f2.getFromId(t,y.xref),M=f2.getFromId(t,y.yref),w=f2.getRefType(y.xref)==="domain",A=f2.getRefType(y.yref)==="domain",k=r._size,T,L;S!==void 0?T=typeof y.xref=="string"&&w?S._length*y.sizex:Math.abs(S.l2p(y.sizex)-S.l2p(0)):T=y.sizex*k.w,M!==void 0?L=typeof y.yref=="string"&&A?M._length*y.sizey:Math.abs(M.l2p(y.sizey)-M.l2p(0)):L=y.sizey*k.h;var C=T*f.x[y.xanchor].offset,I=L*f.y[y.yanchor].offset,R=f.x[y.xanchor].sizing+f.y[y.yanchor].sizing,B,N;switch(S!==void 0?B=typeof y.xref=="string"&&w?S._length*y.x+S._offset:S.r2p(y.x)+S._offset:B=y.x*k.w+k.l,B+=C,M!==void 0?N=typeof y.yref=="string"&&A?M._length*(1-y.y)+M._offset:M.r2p(y.y)+M._offset:N=k.h-y.y*k.h+k.t,N+=I,y.sizing){case"fill":R+=" slice";break;case"stretch":R="none";break}_.attr({x:B,y:N,width:T,height:L,preserveAspectRatio:R,opacity:y.opacity});var D=S&&f2.getRefType(y.xref)!=="domain"?S._id:"",O=M&&f2.getRefType(y.yref)!=="domain"?M._id:"",$=D+O;j8e.setClipUrl(_,$?"clip"+r._uid+$:null,t)}var v=r._imageLowerLayer.selectAll("image").data(o),p=r._imageUpperLayer.selectAll("image").data(a);v.enter().append("image"),p.enter().append("image"),v.exit().remove(),p.exit().remove(),v.each(function(y){c.bind(this)(y),h.bind(this)(y)}),p.each(function(y){c.bind(this)(y),h.bind(this)(y)});var d=Object.keys(r._plots);for(s=0;s<d.length;s++){i=d[s];var g=r._plots[i];if(!!g.imagelayer){var m=g.imagelayer.selectAll("image").data(n[i]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(y){c.bind(this)(y),h.bind(this)(y)})}}},Dte=gn,W8e=AR,X8e=function(t,r,a,n){r=r||{};var o=a==="log"&&r.type==="linear",i=a==="linear"&&r.type==="log";if(!!(o||i)){for(var s=t._fullLayout.images,l=r._id.charAt(0),u,f,c=0;c<s.length;c++)if(u=s[c],f="images["+c+"].",u[l+"ref"]===r._id){var h=u[l],v=u["size"+l],p=null,d=null;if(o){p=W8e(h,r.range);var g=v/Math.pow(10,p)/2;d=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else p=Math.pow(10,h),d=p*(Math.pow(10,v/2)-Math.pow(10,-v/2));Dte(p)?Dte(d)||(d=null):(p=null,d=null),n(f+l,p),n(f+"size"+l,d)}}},Z8e={moduleType:"component",name:"images",layoutAttributes:Lte,supplyLayoutDefaults:G8e,includeBasePlot:E8("images"),draw:Y8e,convertCoords:X8e},O8={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}},K8e=Ts,J8e=us,Q8e=cn.extendFlat,e7e=Jo.overrideAll,t7e=DR,Rte=si.templatedArray,r7e=Rte("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),zte=e7e(Rte("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:r7e,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:Q8e(t7e({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:K8e({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:J8e.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),nC=bt.exports,Fte=nc,Ote=zte,a7e=O8,n7e=a7e.name,i7e=Ote.buttons,o7e=function(t,r){var a={name:n7e,handleItemDefaults:s7e};Fte(t,r,a)};function s7e(e,t,r){function a(i,s){return nC.coerce(e,t,Ote,i,s)}var n=Fte(e,t,{name:"buttons",handleItemDefaults:l7e}),o=a("visible",n.length>0);!o||(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),nC.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),nC.coerceFont(a,"font",r.font),a("bgcolor",r.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function l7e(e,t){function r(n,o){return nC.coerce(e,t,i7e,n,o)}var a=r("visible",e.method==="skip"||Array.isArray(e.args));a&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}var u7e=ks,Qd=Ra.exports,Nte=Oa.exports,c2=xn.exports,iC=bt.exports;function ks(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}ks.barWidth=2;ks.barLength=20;ks.barRadius=2;ks.barPad=1;ks.barColor="#808BA4";ks.prototype.enable=function(t,r,a){var n=this.gd._fullLayout,o=n.width,i=n.height;this.position=t;var s=this.position.l,l=this.position.w,u=this.position.t,f=this.position.h,c=this.position.direction,h=c==="down",v=c==="left",p=c==="right",d=c==="up",g=l,m=f,y,_,S,M;!h&&!v&&!p&&!d&&(this.position.direction="down",h=!0);var w=h||d;w?(y=s,_=y+g,h?(S=u,M=Math.min(S+m,i),m=M-S):(M=u+m,S=Math.max(M-m,0),m=M-S)):(S=u,M=S+m,v?(_=s+g,y=Math.max(_-g,0),g=_-y):(y=s,_=Math.min(y+g,o),g=_-y)),this._box={l:y,t:S,w:g,h:m};var A=l>g,k=ks.barLength+2*ks.barPad,T=ks.barWidth+2*ks.barPad,L=s,C=u+f;C+T>i&&(C=i-T);var I=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-horizontal",!0).call(Nte.fill,ks.barColor),A?(this.hbar=I.attr({rx:ks.barRadius,ry:ks.barRadius,x:L,y:C,width:k,height:T}),this._hbarXMin=L+k/2,this._hbarTranslateMax=g-k):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var R=f>m,B=ks.barWidth+2*ks.barPad,N=ks.barLength+2*ks.barPad,D=s+l,O=u;D+B>o&&(D=o-B);var $=this.container.selectAll("rect.scrollbar-vertical").data(R?[0]:[]);$.exit().on(".drag",null).remove(),$.enter().append("rect").classed("scrollbar-vertical",!0).call(Nte.fill,ks.barColor),R?(this.vbar=$.attr({rx:ks.barRadius,ry:ks.barRadius,x:D,y:O,width:B,height:N}),this._vbarYMin=O+N/2,this._vbarTranslateMax=m-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Y=this.id,X=y-.5,ee=R?_+B+.5:_+.5,Q=S-.5,Z=A?M+T+.5:M+.5,q=n._topdefs.selectAll("#"+Y).data(A||R?[0]:[]);if(q.exit().remove(),q.enter().append("clipPath").attr("id",Y).append("rect"),A||R?(this._clipRect=q.select("rect").attr({x:Math.floor(X),y:Math.floor(Q),width:Math.ceil(ee)-Math.floor(X),height:Math.ceil(Z)-Math.floor(Q)}),this.container.call(c2.setClipUrl,Y,this.gd),this.bg.attr({x:s,y:u,width:l,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c2.setClipUrl,null),delete this._clipRect),A||R){var ae=Qd.behavior.drag().on("dragstart",function(){Qd.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ae);var ie=Qd.behavior.drag().on("dragstart",function(){Qd.event.sourceEvent.preventDefault(),Qd.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call(ie),R&&this.vbar.on(".drag",null).call(ie)}this.setTranslate(r,a)};ks.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c2.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};ks.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=Qd.event.dx),this.vbar&&(r-=Qd.event.dy),this.setTranslate(t,r)};ks.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=Qd.event.deltaY),this.vbar&&(r+=Qd.event.deltaY),this.setTranslate(t,r)};ks.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var a=t+this._hbarXMin,n=a+this._hbarTranslateMax,o=iC.constrain(Qd.event.x,a,n),i=(o-a)/(n-a),s=this.position.w-this._box.w;t=i*s}if(this.vbar){var l=r+this._vbarYMin,u=l+this._vbarTranslateMax,f=iC.constrain(Qd.event.y,l,u),c=(f-l)/(u-l),h=this.position.h-this._box.h;r=c*h}this.setTranslate(t,r)};ks.prototype.setTranslate=function(t,r){var a=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=iC.constrain(t||0,0,a),r=iC.constrain(r||0,0,n),this.translateX=t,this.translateY=r,this.container.call(c2.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var o=t/a;this.hbar.call(c2.setTranslate,t+o*this._hbarTranslateMax,r)}if(this.vbar){var i=r/n;this.vbar.call(c2.setTranslate,t,r+i*this._vbarTranslateMax)}};var h2=Ra.exports,uA=Eo.exports,fA=Oa.exports,v2=xn.exports,Jh=bt.exports,oC=xo,f7e=si.arrayEditor,Bte=ou.LINE_SPACING,Mn=O8,c7e=u7e,h7e=function(t){var r=t._fullLayout,a=Jh.filterVisible(r[Mn.name]);function n(h){uA.autoMargin(t,jte(h))}var o=r._menulayer.selectAll("g."+Mn.containerClassName).data(a.length>0?[0]:[]);if(o.enter().append("g").classed(Mn.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){h2.select(this).selectAll("g."+Mn.headerGroupClassName).each(n)}).remove(),a.length!==0){var i=o.selectAll("g."+Mn.headerGroupClassName).data(a,v7e);i.enter().append("g").classed(Mn.headerGroupClassName,!0);for(var s=Jh.ensureSingle(o,"g",Mn.dropdownButtonGroupClassName,function(h){h.style("pointer-events","all")}),l=0;l<a.length;l++){var u=a[l];x7e(t,u)}var f="updatemenus"+r._uid,c=new c7e(t,s,f);i.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call($8)),i.exit().each(function(h){s.call($8),n(h)}).remove(),i.each(function(h){var v=h2.select(this),p=h.type==="dropdown"?s:null;uA.manageCommandObserver(t,h,h.buttons,function(d){N8(t,h,h.buttons[d.index],v,p,c,d.index,!0)}),h.type==="dropdown"?(Ute(t,v,s,c,h),$te(s,h)&&cA(t,v,s,c,h)):cA(t,v,null,null,h)})}};function v7e(e){return e._index}function d7e(e){return+e.attr(Mn.menuIndexAttrName)==-1}function $te(e,t){return+e.attr(Mn.menuIndexAttrName)===t._index}function N8(e,t,r,a,n,o,i,s){t.active=i,f7e(e.layout,Mn.name,t).applyUpdate("active",i),t.type==="buttons"?cA(e,a,null,null,t):t.type==="dropdown"&&(n.attr(Mn.menuIndexAttrName,"-1"),Ute(e,a,n,o,t),s||cA(e,a,n,o,t))}function Ute(e,t,r,a,n){var o=Jh.ensureSingle(t,"g",Mn.headerClassName,function(h){h.style("pointer-events","all")}),i=n._dims,s=n.active,l=n.buttons[s]||Mn.blankHeaderOpts,u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0},f={width:i.headerWidth,height:i.headerHeight};o.call(B8,n,l,e).call(qte,n,u,f);var c=Jh.ensureSingle(t,"text",Mn.headerArrowClassName,function(h){h.attr("text-anchor","end").call(v2.font,n.font).text(Mn.arrowSymbol[n.direction])});c.attr({x:i.headerWidth-Mn.arrowOffsetX+n.pad.l,y:i.headerHeight/2+Mn.textOffsetY+n.pad.t}),o.on("click",function(){r.call($8,String($te(r,n)?-1:n._index)),cA(e,t,r,a,n)}),o.on("mouseover",function(){o.call(Gte)}),o.on("mouseout",function(){o.call(Vte,n)}),v2.setTranslate(t,i.lx,i.ly)}function cA(e,t,r,a,n){r||(r=t,r.attr("pointer-events","all"));var o=!d7e(r)||n.type==="buttons"?n.buttons:[],i=n.type==="dropdown"?Mn.dropdownButtonClassName:Mn.buttonClassName,s=r.selectAll("g."+i).data(Jh.filterVisible(o)),l=s.enter().append("g").classed(i,!0),u=s.exit();n.type==="dropdown"?(l.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();var f=0,c=0,h=n._dims,v=["up","down"].indexOf(n.direction)!==-1;n.type==="dropdown"&&(v?c=h.headerHeight+Mn.gapButtonHeader:f=h.headerWidth+Mn.gapButtonHeader),n.type==="dropdown"&&n.direction==="up"&&(c=-Mn.gapButtonHeader+Mn.gapButton-h.openHeight),n.type==="dropdown"&&n.direction==="left"&&(f=-Mn.gapButtonHeader+Mn.gapButton-h.openWidth);var p={x:h.lx+f+n.pad.l,y:h.ly+c+n.pad.t,yPad:Mn.gapButton,xPad:Mn.gapButton,index:0},d={l:p.x+n.borderwidth,t:p.y+n.borderwidth};s.each(function(g,m){var y=h2.select(this);y.call(B8,n,g,e).call(qte,n,p),y.on("click",function(){h2.event.defaultPrevented||(g.execute&&(g.args2&&n.active===m?(N8(e,n,g,t,r,a,-1),uA.executeAPICommand(e,g.method,g.args2)):(N8(e,n,g,t,r,a,m),uA.executeAPICommand(e,g.method,g.args))),e.emit("plotly_buttonclicked",{menu:n,button:g,active:n.active}))}),y.on("mouseover",function(){y.call(Gte)}),y.on("mouseout",function(){y.call(Vte,n),s.call(Hte,n)})}),s.call(Hte,n),v?(d.w=Math.max(h.openWidth,h.headerWidth),d.h=p.y-d.t):(d.w=p.x-d.l,d.h=Math.max(h.openHeight,h.headerHeight)),d.direction=n.direction,a&&(s.size()?p7e(e,t,r,a,n,d):g7e(a))}function p7e(e,t,r,a,n,o){var i=n.direction,s=i==="up"||i==="down",l=n._dims,u=n.active,f,c,h;if(s)for(c=0,h=0;h<u;h++)c+=l.heights[h]+Mn.gapButton;else for(f=0,h=0;h<u;h++)f+=l.widths[h]+Mn.gapButton;a.enable(o,f,c),a.hbar&&a.hbar.attr("opacity","0").transition().attr("opacity","1"),a.vbar&&a.vbar.attr("opacity","0").transition().attr("opacity","1")}function g7e(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function B8(e,t,r,a){e.call(m7e,t).call(y7e,t,r,a)}function m7e(e,t){var r=Jh.ensureSingle(e,"rect",Mn.itemRectClassName,function(a){a.attr({rx:Mn.rx,ry:Mn.ry,"shape-rendering":"crispEdges"})});r.call(fA.stroke,t.bordercolor).call(fA.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function y7e(e,t,r,a){var n=Jh.ensureSingle(e,"text",Mn.itemTextClassName,function(s){s.attr({"text-anchor":"start","data-notex":1})}),o=r.label,i=a._fullLayout._meta;i&&(o=Jh.templateString(o,i)),n.call(v2.font,t.font).text(o).call(oC.convertToTspans,a)}function Hte(e,t){var r=t.active;e.each(function(a,n){var o=h2.select(this);n===r&&t.showactive&&o.select("rect."+Mn.itemRectClassName).call(fA.fill,Mn.activeColor)})}function Gte(e){e.select("rect."+Mn.itemRectClassName).call(fA.fill,Mn.hoverColor)}function Vte(e,t){e.select("rect."+Mn.itemRectClassName).call(fA.fill,t.bgcolor)}function x7e(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=v2.tester.selectAll("g."+Mn.dropdownButtonClassName).data(Jh.filterVisible(t.buttons));a.enter().append("g").classed(Mn.dropdownButtonClassName,!0);var n=["up","down"].indexOf(t.direction)!==-1;a.each(function(f,c){var h=h2.select(this);h.call(B8,t,f,e);var v=h.select("."+Mn.itemTextClassName),p=v.node()&&v2.bBox(v.node()).width,d=Math.max(p+Mn.textPadX,Mn.minWidth),g=t.font.size*Bte,m=oC.lineCount(v),y=Math.max(g*m,Mn.minHeight)+Mn.textOffsetY;y=Math.ceil(y),d=Math.ceil(d),r.widths[c]=d,r.heights[c]=y,r.height1=Math.max(r.height1,y),r.width1=Math.max(r.width1,d),n?(r.totalWidth=Math.max(r.totalWidth,d),r.openWidth=r.totalWidth,r.totalHeight+=y+Mn.gapButton,r.openHeight+=y+Mn.gapButton):(r.totalWidth+=d+Mn.gapButton,r.openWidth+=d+Mn.gapButton,r.totalHeight=Math.max(r.totalHeight,y),r.openHeight=r.totalHeight)}),n?r.totalHeight-=Mn.gapButton:r.totalWidth-=Mn.gapButton,r.headerWidth=r.width1+Mn.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(n?(r.width1+=Mn.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=Mn.arrowPadX),a.remove();var o=r.totalWidth+t.pad.l+t.pad.r,i=r.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;r.lx=s.l+s.w*t.x,r.ly=s.t+s.h*(1-t.y);var l="left";Jh.isRightAnchor(t)&&(r.lx-=o,l="right"),Jh.isCenterAnchor(t)&&(r.lx-=o/2,l="center");var u="top";Jh.isBottomAnchor(t)&&(r.ly-=i,u="bottom"),Jh.isMiddleAnchor(t)&&(r.ly-=i/2,u="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),uA.autoMargin(e,jte(t),{x:t.x,y:t.y,l:o*({right:1,center:.5}[l]||0),r:o*({left:1,center:.5}[l]||0),b:i*({top:1,middle:.5}[u]||0),t:i*({bottom:1,middle:.5}[u]||0)})}function jte(e){return Mn.autoMarginIdRoot+e._index}function qte(e,t,r,a){a=a||{};var n=e.select("."+Mn.itemRectClassName),o=e.select("."+Mn.itemTextClassName),i=t.borderwidth,s=r.index,l=t._dims;v2.setTranslate(e,i+r.x,i+r.y);var u=["up","down"].indexOf(t.direction)!==-1,f=a.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:a.width||(u?l.width1:l.widths[s]),height:f});var c=t.font.size*Bte,h=oC.lineCount(o),v=(h-1)*c/2;oC.positionText(o,Mn.textOffsetX,f/2-v+Mn.textOffsetY),u?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function $8(e,t){e.attr(Mn.menuIndexAttrName,t||"-1").selectAll("g."+Mn.dropdownButtonClassName).remove()}var b7e=O8,_7e={moduleType:"component",name:b7e.name,layoutAttributes:zte,supplyLayoutDefaults:o7e,draw:h7e},sC={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},Yte=Ts,w7e=DR,T7e=cn.extendDeepAll,A7e=Jo.overrideAll,S7e=b5,Wte=si.templatedArray,Ix=sC,M7e=Wte("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),Xte=A7e(Wte("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:M7e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:T7e(w7e({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:S7e.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:Yte({description:"Sets the font of the current value label text."})},font:Yte({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:Ix.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:Ix.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:Ix.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:Ix.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:Ix.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:Ix.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:Ix.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),d2=bt.exports,Zte=nc,Kte=Xte,k7e=sC,E7e=k7e.name,C7e=Kte.steps,L7e=function(t,r){Zte(t,r,{name:E7e,handleItemDefaults:P7e})};function P7e(e,t,r){function a(c,h){return d2.coerce(e,t,Kte,c,h)}for(var n=Zte(e,t,{name:"steps",handleItemDefaults:I7e}),o=0,i=0;i<n.length;i++)n[i].visible&&o++;var s;if(o<2?s=t.visible=!1:s=a("visible"),!!s){t._stepCount=o;var l=t._visibleSteps=d2.filterVisible(n),u=a("active");(n[u]||{}).visible||(t.active=l[0]._index),a("x"),a("y"),d2.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),d2.coerceFont(a,"font",r.font);var f=a("currentvalue.visible");f&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),d2.coerceFont(a,"currentvalue.font",t.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function I7e(e,t){function r(o,i){return d2.coerce(e,t,C7e,o,i)}var a;if(e.method!=="skip"&&!Array.isArray(e.args)?a=t.visible=!1:a=r("visible"),a){r("method"),r("args");var n=r("label","step-"+t._index);r("value",n),r("execute")}}var ep=Ra.exports,lC=Eo.exports,by=Oa.exports,tp=xn.exports,Qh=bt.exports,D7e=Qh.strTranslate,hA=xo,R7e=si.arrayEditor,Yn=sC,U8=ou,Jte=U8.LINE_SPACING,H8=U8.FROM_TL,G8=U8.FROM_BR,z7e=function(t){var r=t._fullLayout,a=F7e(r,t),n=r._infolayer.selectAll("g."+Yn.containerClassName).data(a.length>0?[0]:[]);n.enter().append("g").classed(Yn.containerClassName,!0).style("cursor","ew-resize");function o(u){u._commandObserver&&(u._commandObserver.remove(),delete u._commandObserver),lC.autoMargin(t,Qte(u))}if(n.exit().each(function(){ep.select(this).selectAll("g."+Yn.groupClassName).each(o)}).remove(),a.length!==0){var i=n.selectAll("g."+Yn.groupClassName).data(a,O7e);i.enter().append("g").classed(Yn.groupClassName,!0),i.exit().each(o).remove();for(var s=0;s<a.length;s++){var l=a[s];N7e(t,l)}i.each(function(u){var f=ep.select(this);G7e(u),lC.manageCommandObserver(t,u,u._visibleSteps,function(c){var h=f.data()[0];h.active!==c.index&&(h._dragging||rre(t,f,h,c.index,!1,!0))}),B7e(t,ep.select(this),u)})}};function Qte(e){return Yn.autoMarginIdRoot+e._index}function F7e(e,t){for(var r=e[Yn.name],a=[],n=0;n<r.length;n++){var o=r[n];!o.visible||(o._gd=t,a.push(o))}return a}function O7e(e){return e._index}function N7e(e,t){var r=tp.tester.selectAll("g."+Yn.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(Yn.labelGroupClass,!0);var a=0,n=0;r.each(function(p){var d=ep.select(this),g=ere(d,{step:p},t),m=g.node();if(m){var y=tp.bBox(m);n=Math.max(n,y.height),a=Math.max(a,y.width)}}),r.remove();var o=t._dims={};o.inputAreaWidth=Math.max(Yn.railWidth,Yn.gripHeight);var i=e._fullLayout._size;o.lx=i.l+i.w*t.x,o.ly=i.t+i.h*(1-t.y),t.lenmode==="fraction"?o.outerLength=Math.round(i.w*t.len):o.outerLength=t.len,o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-t.pad.l-t.pad.r);var s=o.inputAreaLength-2*Yn.stepInset,l=s/(t._stepCount-1),u=a+Yn.labelPadding;if(o.labelStride=Math.max(1,Math.ceil(u/l)),o.labelHeight=n,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,t.currentvalue.visible){var f=tp.tester.append("g");r.each(function(p){var d=uC(f,t,p.label),g=d.node()&&tp.bBox(d.node())||{width:0,height:0},m=hA.lineCount(d);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(g.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(g.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,m)}),o.currentValueTotalHeight=o.currentValueHeight+t.currentvalue.offset,f.remove()}o.height=o.currentValueTotalHeight+Yn.tickOffset+t.ticklen+Yn.labelOffset+o.labelHeight+t.pad.t+t.pad.b;var c="left";Qh.isRightAnchor(t)&&(o.lx-=o.outerLength,c="right"),Qh.isCenterAnchor(t)&&(o.lx-=o.outerLength/2,c="center");var h="top";Qh.isBottomAnchor(t)&&(o.ly-=o.height,h="bottom"),Qh.isMiddleAnchor(t)&&(o.ly-=o.height/2,h="middle"),o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly);var v={y:t.y,b:o.height*G8[h],t:o.height*H8[h]};t.lenmode==="fraction"?(v.l=0,v.xl=t.x-t.len*H8[c],v.r=0,v.xr=t.x+t.len*G8[c]):(v.x=t.x,v.l=o.outerLength*H8[c],v.r=o.outerLength*G8[c]),lC.autoMargin(e,Qte(t),v)}function B7e(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(uC,r).call(j7e,r).call(U7e,r).call(H7e,r).call(V7e,e,r).call($7e,e,r);var a=r._dims;tp.setTranslate(t,a.lx+r.pad.l,a.ly+r.pad.t),t.call(nre,r,!1),t.call(uC,r)}function uC(e,t,r){if(!!t.currentvalue.visible){var a=t._dims,n,o;switch(t.currentvalue.xanchor){case"right":n=a.inputAreaLength-Yn.currentValueInset-a.currentValueMaxWidth,o="left";break;case"center":n=a.inputAreaLength*.5,o="middle";break;default:n=Yn.currentValueInset,o="left"}var i=Qh.ensureSingle(e,"text",Yn.labelClass,function(h){h.attr({"text-anchor":o,"data-notex":1})}),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")s+=r;else{var l=t.steps[t.active].label,u=t._gd._fullLayout._meta;u&&(l=Qh.templateString(l,u)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),i.call(tp.font,t.currentvalue.font).text(s).call(hA.convertToTspans,t._gd);var f=hA.lineCount(i),c=(a.currentValueMaxLines+1-f)*t.currentvalue.font.size*Jte;return hA.positionText(i,n,c),i}}function $7e(e,t,r){var a=Qh.ensureSingle(e,"rect",Yn.gripRectClass,function(n){n.call(are,t,e,r).style("pointer-events","all")});a.attr({width:Yn.gripWidth,height:Yn.gripHeight,rx:Yn.gripRadius,ry:Yn.gripRadius}).call(by.stroke,r.bordercolor).call(by.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function ere(e,t,r){var a=Qh.ensureSingle(e,"text",Yn.labelClass,function(i){i.attr({"text-anchor":"middle","data-notex":1})}),n=t.step.label,o=r._gd._fullLayout._meta;return o&&(n=Qh.templateString(n,o)),a.call(tp.font,r.font).text(n).call(hA.convertToTspans,r._gd),a}function U7e(e,t){var r=Qh.ensureSingle(e,"g",Yn.labelsClass),a=t._dims,n=r.selectAll("g."+Yn.labelGroupClass).data(a.labelSteps);n.enter().append("g").classed(Yn.labelGroupClass,!0),n.exit().remove(),n.each(function(o){var i=ep.select(this);i.call(ere,o,t),tp.setTranslate(i,V8(t,o.fraction),Yn.tickOffset+t.ticklen+t.font.size*Jte+Yn.labelOffset+a.currentValueTotalHeight)})}function tre(e,t,r,a,n){var o=Math.round(a*(r._stepCount-1)),i=r._visibleSteps[o]._index;i!==r.active&&rre(e,t,r,i,!0,n)}function rre(e,t,r,a,n,o){var i=r.active;r.active=a,R7e(e.layout,Yn.name,r).applyUpdate("active",a);var s=r.steps[r.active];t.call(nre,r,o),t.call(uC,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:n,previousActive:i}),s&&s.method&&n&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=n,t._nextMethod.doTransition=o):(t._nextMethod={step:s,doCallback:n,doTransition:o},t._nextMethodRaf=window.requestAnimationFrame(function(){var l=t._nextMethod.step;!l.method||(l.execute&&lC.executeAPICommand(e,l.method,l.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function are(e,t,r){var a=r.node(),n=ep.select(t);function o(){return r.data()[0]}function i(){var s=o();t.emit("plotly_sliderstart",{slider:s});var l=r.select("."+Yn.gripRectClass);ep.event.stopPropagation(),ep.event.preventDefault(),l.call(by.fill,s.activebgcolor);var u=ire(s,ep.mouse(a)[0]);tre(t,r,s,u,!0),s._dragging=!0;function f(){var h=o(),v=ire(h,ep.mouse(a)[0]);tre(t,r,h,v,!1)}n.on("mousemove",f),n.on("touchmove",f);function c(){var h=o();h._dragging=!1,l.call(by.fill,h.bgcolor),n.on("mouseup",null),n.on("mousemove",null),n.on("touchend",null),n.on("touchmove",null),t.emit("plotly_sliderend",{slider:h,step:h.steps[h.active]})}n.on("mouseup",c),n.on("touchend",c)}e.on("mousedown",i),e.on("touchstart",i)}function H7e(e,t){var r=e.selectAll("rect."+Yn.tickRectClass).data(t._visibleSteps),a=t._dims;r.enter().append("rect").classed(Yn.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(n,o){var i=o%a.labelStride==0,s=ep.select(this);s.attr({height:i?t.ticklen:t.minorticklen}).call(by.fill,t.tickcolor),tp.setTranslate(s,V8(t,o/(t._stepCount-1))-.5*t.tickwidth,(i?Yn.tickOffset:Yn.minorTickOffset)+a.currentValueTotalHeight)})}function G7e(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,a=0;a<r;a+=t.labelStride)t.labelSteps.push({fraction:a/(r-1),step:e._visibleSteps[a]})}function nre(e,t,r){for(var a=e.select("rect."+Yn.gripRectClass),n=0,o=0;o<t._stepCount;o++)if(t._visibleSteps[o]._index===t.active){n=o;break}var i=V8(t,n/(t._stepCount-1));if(!t._invokingCommand){var s=a;r&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",D7e(i-Yn.gripWidth*.5,t._dims.currentValueTotalHeight))}}function V8(e,t){var r=e._dims;return r.inputAreaStart+Yn.stepInset+(r.inputAreaLength-2*Yn.stepInset)*Math.min(1,Math.max(0,t))}function ire(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-Yn.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*Yn.stepInset-2*r.inputAreaStart)))}function V7e(e,t,r){var a=r._dims,n=Qh.ensureSingle(e,"rect",Yn.railTouchRectClass,function(o){o.call(are,t,e,r).style("pointer-events","all")});n.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,Yn.tickOffset+r.ticklen+a.labelHeight)}).call(by.fill,r.bgcolor).attr("opacity",0),tp.setTranslate(n,0,a.currentValueTotalHeight)}function j7e(e,t){var r=t._dims,a=r.inputAreaLength-Yn.railInset*2,n=Qh.ensureSingle(e,"rect",Yn.railRectClass);n.attr({width:a,height:Yn.railWidth,rx:Yn.railRadius,ry:Yn.railRadius,"shape-rendering":"crispEdges"}).call(by.stroke,t.bordercolor).call(by.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),tp.setTranslate(n,Yn.railInset,(r.inputAreaWidth-Yn.railWidth)*.5+r.currentValueTotalHeight)}var q7e=sC,Y7e={moduleType:"component",name:q7e.name,layoutAttributes:Xte,supplyLayoutDefaults:L7e,draw:z7e},ore=us,j8={bgcolor:{valType:"color",dflt:ore.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:ore.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},sre={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},fC={},q8={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},W7e=As,X7e=xo,lre=q8,Z7e=ou.LINE_SPACING,cC=lre.name;function ure(e){var t=e&&e[cC];return t&&t.visible}fC.isVisible=ure;fC.makeData=function(e){var t=W7e.list({_fullLayout:e},"x",!0),r=e.margin,a=[];if(!e._has("gl2d"))for(var n=0;n<t.length;n++){var o=t[n];if(ure(o)){a.push(o);var i=o[cC];i._id=cC+o._id,i._height=(e.height-r.b-r.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}e._rangeSliderData=a};fC.autoMarginOpts=function(e,t){var r=e._fullLayout,a=t[cC],n=t._id.charAt(0),o=0,i=0;if(t.side==="bottom"&&(o=t._depth,t.title.text!==r._dfltTitle[n])){i=1.5*t.title.font.size+10+a._offsetShift;var s=(t.title.text.match(X7e.BR_TAG_ALL)||[]).length;i+=s*t.title.font.size*Z7e}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:a._height+o+Math.max(r.margin.b,i),pad:lre.extraPad+a._offsetShift*2}};var hC=bt.exports,fre=si,cre=As,K7e=j8,J7e=sre,Q7e=function(t,r,a){var n=t[a],o=r[a];if(!(n.rangeslider||r._requestRangeslider[o._id]))return;hC.isPlainObject(n.rangeslider)||(n.rangeslider={});var i=n.rangeslider,s=fre.newContainer(o,"rangeslider");function l(M,w){return hC.coerce(i,s,K7e,M,w)}var u,f;function c(M,w){return hC.coerce(u,f,J7e,M,w)}var h=l("visible");if(!!h){l("bgcolor",r.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!o.isValidRange(i.range)),l("range");var v=r._subplots;if(v)for(var p=v.cartesian.filter(function(M){return M.substr(0,M.indexOf("y"))===cre.name2id(a)}).map(function(M){return M.substr(M.indexOf("y"),M.length)}),d=hC.simpleMap(p,cre.id2name),g=0;g<d.length;g++){var m=d[g];u=i[m]||{},f=fre.newContainer(s,m,"yaxis");var y=r[m],_;u.range&&y.isValidRange(u.range)&&(_="fixed");var S=c("rangemode",_);S!=="match"&&c("range",y.range.slice())}s._input=i}},eOe=As.list,tOe=Hd.getAutoRange,rOe=q8,aOe=function(t){for(var r=eOe(t,"x",!0),a=0;a<r.length;a++){var n=r[a],o=n[rOe.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=tOe(t,n))}},vC=Ra.exports,nOe=Pa,iOe=Eo.exports,Os=bt.exports,dC=Os.strTranslate,hre=xn.exports,p2=Oa.exports,oOe=H_,sOe=Ii,Y8=As,lOe=kf.exports,uOe=Zp,ii=q8,fOe=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,a=0;a<r.length;a++){var n=r[a][ii.name];n._clipId=n._id+"-"+t._uid}function o(s){return s._name}var i=t._infolayer.selectAll("g."+ii.containerClassName).data(r,o);i.exit().each(function(s){var l=s[ii.name];t._topdefs.select("#"+l._clipId).remove()}).remove(),r.length!==0&&(i.enter().append("g").classed(ii.containerClassName,!0).attr("pointer-events","all"),i.each(function(s){var l=vC.select(this),u=s[ii.name],f=t[Y8.id2name(s.anchor)],c=u[Y8.id2name(s.anchor)];if(u.range){var h=Os.simpleMap(u.range,s.r2l),v=Os.simpleMap(s.range,s.r2l),p;v[0]<v[1]?p=[Math.min(h[0],v[0]),Math.max(h[1],v[1])]:p=[Math.max(h[0],v[0]),Math.min(h[1],v[1])],u.range=u._input.range=Os.simpleMap(p,s.l2r)}s.cleanRange("rangeslider.range");var d=t._size,g=s.domain;u._width=d.w*(g[1]-g[0]);var m=Math.round(d.l+d.w*g[0]),y=Math.round(d.t+d.h*(1-s._counterDomainMin)+(s.side==="bottom"?s._depth:0)+u._offsetShift+ii.extraPad);l.attr("transform",dC(m,y)),u._rl=Os.simpleMap(u.range,s.r2l);var _=u._rl[0],S=u._rl[1],M=S-_;if(u.p2d=function(N){return N/u._width*M+_},u.d2p=function(N){return(N-_)/M*u._width},s.rangebreaks){var w=s.locateBreaks(_,S);if(w.length){var A,k,T=0;for(A=0;A<w.length;A++)k=w[A],T+=k.max-k.min;var L=u._width/(S-_-T),C=[-L*_];for(A=0;A<w.length;A++)k=w[A],C.push(C[C.length-1]-L*(k.max-k.min));for(u.d2p=function(N){for(var D=C[0],O=0;O<w.length;O++){var $=w[O];if(N>=$.max)D=C[O+1];else if(N<$.min)break}return D+L*N},A=0;A<w.length;A++)k=w[A],k.pmin=u.d2p(k.min),k.pmax=u.d2p(k.max);u.p2d=function(N){for(var D=C[0],O=0;O<w.length;O++){var $=w[O];if(N>=$.pmax)D=C[O+1];else if(N<$.pmin)break}return(N-D)/L}}}if(c.rangemode!=="match"){var I=f.r2l(c.range[0]),R=f.r2l(c.range[1]),B=R-I;u.d2pOppAxis=function(N){return(N-I)/B*u._height}}l.call(dOe,e,s,u).call(pOe,e,s,u).call(gOe,e,s,u).call(yOe,e,s,u,c).call(xOe,e,s,u).call(bOe,e,s,u),cOe(l,e,s,u),vOe(l,e,s,u,f,c),s.side==="bottom"&&oOe.draw(e,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:t._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:y+u._height+u._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))};function cOe(e,t,r,a){if(t._context.staticPlot)return;var n=e.select("rect."+ii.slideBoxClassName).node(),o=e.select("rect."+ii.grabAreaMinClassName).node(),i=e.select("rect."+ii.grabAreaMaxClassName).node();function s(){var l=vC.event,u=l.target,f=l.clientX||l.touches[0].clientX,c=f-e.node().getBoundingClientRect().left,h=a.d2p(r._rl[0]),v=a.d2p(r._rl[1]),p=lOe.coverSlip();this.addEventListener("touchmove",d),this.addEventListener("touchend",g),p.addEventListener("mousemove",d),p.addEventListener("mouseup",g);function d(m){var y=m.clientX||m.touches[0].clientX,_=+y-f,S,M,w;switch(u){case n:w="ew-resize",S=h+_,M=v+_;break;case o:w="col-resize",S=h+_,M=v;break;case i:w="col-resize",S=h,M=v+_;break;default:w="ew-resize",S=c,M=c+_;break}if(M<S){var A=M;M=S,S=A}a._pixelMin=S,a._pixelMax=M,uOe(vC.select(p),w),hOe(e,t,r,a)}function g(){p.removeEventListener("mousemove",d),p.removeEventListener("mouseup",g),this.removeEventListener("touchmove",d),this.removeEventListener("touchend",g),Os.removeElement(p)}}e.on("mousedown",s),e.on("touchstart",s)}function hOe(e,t,r,a){function n(s){return r.l2r(Os.constrain(s,a._rl[0],a._rl[1]))}var o=n(a.p2d(a._pixelMin)),i=n(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){nOe.call("_guiRelayout",t,r._name+".range",[o,i])})}function vOe(e,t,r,a,n,o){var i=ii.handleWidth/2;function s(m){return Os.constrain(m,0,a._width)}function l(m){return Os.constrain(m,0,a._height)}function u(m){return Os.constrain(m,-i,a._width+i)}var f=s(a.d2p(r._rl[0])),c=s(a.d2p(r._rl[1]));if(e.select("rect."+ii.slideBoxClassName).attr("x",f).attr("width",c-f),e.select("rect."+ii.maskMinClassName).attr("width",f),e.select("rect."+ii.maskMaxClassName).attr("x",c).attr("width",a._width-c),o.rangemode!=="match"){var h=a._height-l(a.d2pOppAxis(n._rl[1])),v=a._height-l(a.d2pOppAxis(n._rl[0]));e.select("rect."+ii.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",c-f),e.select("rect."+ii.maskMaxOppAxisClassName).attr("x",f).attr("y",v).attr("height",a._height-v).attr("width",c-f),e.select("rect."+ii.slideBoxClassName).attr("y",h).attr("height",v-h)}var p=.5,d=Math.round(u(f-i))-p,g=Math.round(u(c-i))+p;e.select("g."+ii.grabberMinClassName).attr("transform",dC(d,p)),e.select("g."+ii.grabberMaxClassName).attr("transform",dC(g,p))}function dOe(e,t,r,a){var n=Os.ensureSingle(e,"rect",ii.bgClassName,function(l){l.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),o=a.borderwidth%2==0?a.borderwidth:a.borderwidth-1,i=-a._offsetShift,s=hre.crispRound(t,a.borderwidth);n.attr({width:a._width+o,height:a._height+o,transform:dC(i,i),fill:a.bgcolor,stroke:a.bordercolor,"stroke-width":s})}function pOe(e,t,r,a){var n=t._fullLayout,o=Os.ensureSingleById(n._topdefs,"clipPath",a._clipId,function(i){i.append("rect").attr({x:0,y:0})});o.select("rect").attr({width:a._width,height:a._height})}function gOe(e,t,r,a){var n=t.calcdata,o=e.selectAll("g."+ii.rangePlotClassName).data(r._subplotsWith,Os.identity);o.enter().append("g").attr("class",function(s){return ii.rangePlotClassName+" "+s}).call(hre.setClipUrl,a._clipId,t),o.order(),o.exit().remove();var i;o.each(function(s,l){var u=vC.select(this),f=l===0,c=Y8.getFromId(t,s,"y"),h=c._name,v=a[h],p={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:a.range.slice(),calendar:r.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(p.layout.xaxis.rangebreaks=r.rangebreaks),p.layout[h]={type:c.type,domain:[0,1],range:v.rangemode!=="match"?v.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(p.layout[h].rangebreaks=c.rangebreaks),iOe.supplyDefaults(p);var d=p._fullLayout.xaxis,g=p._fullLayout[h];d.clearCalc(),d.setScale(),g.clearCalc(),g.setScale();var m={id:s,plotgroup:u,xaxis:d,yaxis:g,isRangePlot:!0};f?i=m:(m.mainplot="xy",m.mainplotinfo=i),sOe.rangePlot(t,m,mOe(n,s))})}function mOe(e,t){for(var r=[],a=0;a<e.length;a++){var n=e[a],o=n[0].trace;o.xaxis+o.yaxis===t&&r.push(n)}return r}function yOe(e,t,r,a,n){var o=Os.ensureSingle(e,"rect",ii.maskMinClassName,function(u){u.attr({x:0,y:0,"shape-rendering":"crispEdges"})});o.attr("height",a._height).call(p2.fill,ii.maskColor);var i=Os.ensureSingle(e,"rect",ii.maskMaxClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});if(i.attr("height",a._height).call(p2.fill,ii.maskColor),n.rangemode!=="match"){var s=Os.ensureSingle(e,"rect",ii.maskMinOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",a._width).call(p2.fill,ii.maskOppAxisColor);var l=Os.ensureSingle(e,"rect",ii.maskMaxOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",a._width).style("border-top",ii.maskOppBorder).call(p2.fill,ii.maskOppAxisColor)}}function xOe(e,t,r,a){if(!t._context.staticPlot){var n=Os.ensureSingle(e,"rect",ii.slideBoxClassName,function(o){o.attr({y:0,cursor:ii.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:a._height,fill:ii.slideBoxFill})}}function bOe(e,t,r,a){var n=Os.ensureSingle(e,"g",ii.grabberMinClassName),o=Os.ensureSingle(e,"g",ii.grabberMaxClassName),i={x:0,width:ii.handleWidth,rx:ii.handleRadius,fill:p2.background,stroke:p2.defaultLine,"stroke-width":ii.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(a._height/4),height:Math.round(a._height/2)},l=Os.ensureSingle(n,"rect",ii.handleMinClassName,function(v){v.attr(i)});l.attr(s);var u=Os.ensureSingle(o,"rect",ii.handleMaxClassName,function(v){v.attr(i)});u.attr(s);var f={width:ii.grabAreaWidth,x:0,y:0,fill:ii.grabAreaFill,cursor:t._context.staticPlot?void 0:ii.grabAreaCursor},c=Os.ensureSingle(n,"rect",ii.grabAreaMinClassName,function(v){v.attr(f)});c.attr("height",a._height);var h=Os.ensureSingle(o,"rect",ii.grabAreaMaxClassName,function(v){v.attr(f)});h.attr("height",a._height)}var _Oe=bt.exports,wOe=j8,TOe=sre,W8=fC,AOe={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_Oe.extendFlat({},wOe,{yaxis:TOe})}}},layoutAttributes:j8,handleDefaults:Q7e,calcAutorange:aOe,draw:fOe,isVisible:W8.isVisible,makeData:W8.makeData,autoMarginOpts:W8.autoMarginOpts},SOe=Ts,vre=us,MOe=si.templatedArray,kOe=MOe("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),X8={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:kOe,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:SOe({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:vre.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:vre.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},dre={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},pC=bt.exports,EOe=Oa.exports,COe=si,LOe=nc,pre=X8,Z8=dre,POe=function(t,r,a,n,o){var i=t.rangeselector||{},s=COe.newContainer(r,"rangeselector");function l(v,p){return pC.coerce(i,s,pre,v,p)}var u=LOe(i,s,{name:"buttons",handleItemDefaults:IOe,calendar:o}),f=l("visible",u.length>0);if(f){var c=DOe(r,a,n);l("x",c[0]),l("y",c[1]),pC.noneOrAll(t,r,["x","y"]),l("xanchor"),l("yanchor"),pC.coerceFont(l,"font",a.font);var h=l("bgcolor");l("activecolor",EOe.contrast(h,Z8.lightAmount,Z8.darkAmount)),l("bordercolor"),l("borderwidth")}};function IOe(e,t,r,a){var n=a.calendar;function o(l,u){return pC.coerce(e,t,pre.buttons,l,u)}var i=o("visible");if(i){var s=o("step");s!=="all"&&(n&&n!=="gregorian"&&(s==="month"||s==="year")?t.stepmode="backward":o("stepmode"),o("count")),o("label")}}function DOe(e,t,r){for(var a=r.filter(function(s){return t[s].anchor===e._id}),n=0,o=0;o<a.length;o++){var i=t[a[o]].domain;i&&(n=Math.max(i[1],n))}return[e.domain[0],n+Z8.yPad]}var ROe=qh(MMe),zOe=ROe,FOe=bt.exports.titleCase,OOe=function(t,r){var a=t._name,n={};if(r.step==="all")n[a+".autorange"]=!0;else{var o=NOe(t,r);n[a+".range[0]"]=o[0],n[a+".range[1]"]=o[1]}return n};function NOe(e,t){var r=e.range,a=new Date(e.r2l(r[1])),n=t.step,o=zOe["utc"+FOe(n)],i=t.count,s;switch(t.stepmode){case"backward":s=e.l2r(+o.offset(a,-i));break;case"todate":var l=o.offset(a,-i);s=e.l2r(+o.ceil(l));break}var u=r[1];return[s,u]}var gC=Ra.exports,BOe=Pa,$Oe=Eo.exports,gre=Oa.exports,mre=xn.exports,qg=bt.exports,yre=qg.strTranslate,mC=xo,UOe=As,K8=ou,xre=K8.LINE_SPACING,bre=K8.FROM_TL,_re=K8.FROM_BR,J8=dre,HOe=OOe,GOe=function(t){var r=t._fullLayout,a=r._infolayer.selectAll(".rangeselector").data(VOe(t),jOe);a.enter().append("g").classed("rangeselector",!0),a.exit().remove(),a.style({cursor:"pointer","pointer-events":"all"}),a.each(function(n){var o=gC.select(this),i=n,s=i.rangeselector,l=o.selectAll("g.button").data(qg.filterVisible(s.buttons));l.enter().append("g").classed("button",!0),l.exit().remove(),l.each(function(u){var f=gC.select(this),c=HOe(i,u);u._isActive=qOe(i,u,c),f.call(Q8,s,u),f.call(WOe,s,u,t),f.on("click",function(){t._dragged||BOe.call("_guiRelayout",t,c)}),f.on("mouseover",function(){u._isHovered=!0,f.call(Q8,s,u)}),f.on("mouseout",function(){u._isHovered=!1,f.call(Q8,s,u)})}),ZOe(t,l,s,i._name,o)})};function VOe(e){for(var t=UOe.list(e,"x",!0),r=[],a=0;a<t.length;a++){var n=t[a];n.rangeselector&&n.rangeselector.visible&&r.push(n)}return r}function jOe(e){return e._id}function qOe(e,t,r){if(t.step==="all")return e.autorange===!0;var a=Object.keys(r);return e.range[0]===r[a[0]]&&e.range[1]===r[a[1]]}function Q8(e,t,r){var a=qg.ensureSingle(e,"rect","selector-rect",function(n){n.attr("shape-rendering","crispEdges")});a.attr({rx:J8.rx,ry:J8.ry}),a.call(gre.stroke,t.bordercolor).call(gre.fill,YOe(t,r)).style("stroke-width",t.borderwidth+"px")}function YOe(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function WOe(e,t,r,a){function n(i){mC.convertToTspans(i,a)}var o=qg.ensureSingle(e,"text","selector-text",function(i){i.attr("text-anchor","middle")});o.call(mre.font,t.font).text(XOe(r,a._fullLayout._meta)).call(n)}function XOe(e,t){return e.label?t?qg.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function ZOe(e,t,r,a,n){var o=0,i=0,s=r.borderwidth;t.each(function(){var v=gC.select(this),p=v.select(".selector-text"),d=r.font.size*xre,g=Math.max(d*mC.lineCount(p),16)+3;i=Math.max(i,g)}),t.each(function(){var v=gC.select(this),p=v.select(".selector-rect"),d=v.select(".selector-text"),g=d.node()&&mre.bBox(d.node()).width,m=r.font.size*xre,y=mC.lineCount(d),_=Math.max(g+10,J8.minButtonWidth);v.attr("transform",yre(s+o,s)),p.attr({x:0,y:0,width:_,height:i}),mC.positionText(d,_/2,i/2-(y-1)*m/2+3),o+=_+5});var l=e._fullLayout._size,u=l.l+l.w*r.x,f=l.t+l.h*(1-r.y),c="left";qg.isRightAnchor(r)&&(u-=o,c="right"),qg.isCenterAnchor(r)&&(u-=o/2,c="center");var h="top";qg.isBottomAnchor(r)&&(f-=i,h="bottom"),qg.isMiddleAnchor(r)&&(f-=i/2,h="middle"),o=Math.ceil(o),i=Math.ceil(i),u=Math.round(u),f=Math.round(f),$Oe.autoMargin(e,a+"-range-selector",{x:r.x,y:r.y,l:o*bre[c],r:o*_re[c],b:i*_re[h],t:i*bre[h]}),n.attr("transform",yre(u,f))}var KOe={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:X8}}},layoutAttributes:X8,handleDefaults:POe,draw:GOe},Fo={},wre=cn.extendFlat;Fo.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},a=e.name?e.name+" ":"",n=e.trace?"trace ":"subplot ",o=t.description?" "+t.description:"",i={x:wre({},r,{description:["Sets the horizontal domain of this ",a,n,"(in plot fraction).",o].join("")}),y:wre({},r,{description:["Sets the vertical domain of this ",a,n,"(in plot fraction).",o].join("")}),editType:e.editType};return e.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",a,n,".",o].join("")},i.column={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",a,n,".",o].join("")}),i};Fo.defaults=function(e,t,r,a){var n=a&&a.x||[0,1],o=a&&a.y||[0,1],i=t.grid;if(i){var s=r("domain.column");s!==void 0&&(s<i.columns?n=i._domains.x[s]:delete e.domain.column);var l=r("domain.row");l!==void 0&&(l<i.rows?o=i._domains.y[l]:delete e.domain.row)}var u=r("domain.x",n),f=r("domain.y",o);u[0]<u[1]||(e.domain.x=n.slice()),f[0]<f[1]||(e.domain.y=o.slice())};var JOe=bt.exports,QOe=M_.counter,e9e=Fo.attributes,Tre=Sl.idRegex,t9e=si,e7={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[QOe("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Tre.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Tre.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:e9e({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function yC(e,t,r){var a=t[r+"axes"],n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(a))return a;if(n.length)return n}function r9e(e,t){var r=e.grid||{},a=yC(t,r,"x"),n=yC(t,r,"y");if(!e.grid&&!a&&!n)return;var o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),i=Array.isArray(a),s=Array.isArray(n),l=i&&a!==r.xaxes&&s&&n!==r.yaxes,u,f;o?(u=r.subplots.length,f=r.subplots[0].length):(s&&(u=n.length),i&&(f=a.length));var c=t9e.newContainer(t,"grid");function h(w,A){return JOe.coerce(r,c,e7,w,A)}var v=h("rows",u),p=h("columns",f);if(!(v*p>1)){delete t.grid;return}if(!o&&!i&&!s){var d=h("pattern")==="independent";d&&(o=!0)}c._hasSubplotGrid=o;var g=h("roworder"),m=g==="top to bottom",y=o?.2:.1,_=o?.3:.1,S,M;l&&t._splomGridDflt&&(S=t._splomGridDflt.xside,M=t._splomGridDflt.yside),c._domains={x:Are("x",h,y,S,p),y:Are("y",h,_,M,v,m)}}function Are(e,t,r,a,n,o){var i=t(e+"gap",r),s=t("domain."+e);t(e+"side",a);for(var l=new Array(n),u=s[0],f=(s[1]-u)/(n-i),c=f*(1-i),h=0;h<n;h++){var v=u+f*h;l[o?n-1-h:h]=[v,v+c]}return l}function a9e(e,t){var r=t.grid;if(!(!r||!r._domains)){var a=e.grid||{},n=t._subplots,o=r._hasSubplotGrid,i=r.rows,s=r.columns,l=r.pattern==="independent",u,f,c,h,v,p,d,g=r._axisMap={};if(o){var m=a.subplots||[];p=r.subplots=new Array(i);var y=1;for(u=0;u<i;u++){var _=p[u]=new Array(s),S=m[u]||[];for(f=0;f<s;f++)if(l?(v=y===1?"xy":"x"+y+"y"+y,y++):v=S[f],_[f]="",n.cartesian.indexOf(v)!==-1){if(d=v.indexOf("y"),c=v.slice(0,d),h=v.slice(d),g[c]!==void 0&&g[c]!==f||g[h]!==void 0&&g[h]!==u)continue;_[f]=v,g[c]=f,g[h]=u}}}else{var M=yC(t,a,"x"),w=yC(t,a,"y");r.xaxes=Sre(M,n.xaxis,s,g,"x"),r.yaxes=Sre(w,n.yaxis,i,g,"y")}var A=r._anchors={},k=r.roworder==="top to bottom";for(var T in g){var L=T.charAt(0),C=r[L+"side"],I,R,B;if(C.length<8)A[T]="free";else if(L==="x"){if(C.charAt(0)==="t"===k?(I=0,R=1,B=i):(I=i-1,R=-1,B=-1),o){var N=g[T];for(u=I;u!==B;u+=R)if(v=p[u][N],!!v&&(d=v.indexOf("y"),v.slice(0,d)===T)){A[T]=v.slice(d);break}}else for(u=I;u!==B;u+=R)if(h=r.yaxes[u],n.cartesian.indexOf(T+h)!==-1){A[T]=h;break}}else if(C.charAt(0)==="l"?(I=0,R=1,B=s):(I=s-1,R=-1,B=-1),o){var D=g[T];for(u=I;u!==B;u+=R)if(v=p[D][u],!!v&&(d=v.indexOf("y"),v.slice(d)===T)){A[T]=v.slice(0,d);break}}else for(u=I;u!==B;u+=R)if(c=r.xaxes[u],n.cartesian.indexOf(c+T)!==-1){A[T]=c;break}}}}function Sre(e,t,r,a,n){var o=new Array(r),i;function s(l,u){t.indexOf(u)!==-1&&a[u]===void 0?(o[l]=u,a[u]=l):o[l]=""}if(Array.isArray(e))for(i=0;i<r;i++)s(i,e[i]);else for(s(0,n),i=1;i<r;i++)s(i,n+(i+1));return o}var Mre={moduleType:"component",name:"grid",schema:{layout:{grid:e7}},layoutAttributes:e7,sizeDefaults:r9e,contentDefaults:a9e},kre={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}},Ere=gn,n9e=Pa,i9e=bt.exports,o9e=si,s9e=kre,l9e=function(e,t,r,a){var n="error_"+a.axis,o=o9e.newContainer(t,n),i=e[n]||{};function s(p,d){return i9e.coerce(i,o,s9e,p,d)}var l=i.array!==void 0||i.value!==void 0||i.type==="sqrt",u=s("visible",l);if(u!==!1){var f=s("type","array"in i?"data":"percent"),c=!0;f!=="sqrt"&&(c=s("symmetric",!((f==="data"?"arrayminus":"valueminus")in i))),f==="data"?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):(f==="percent"||f==="constant")&&(s("value"),c||s("valueminus"));var h="copy_"+a.inherit+"style";if(a.inherit){var v=t["error_"+a.inherit];(v||{}).visible&&s(h,!(i.color||Ere(i.thickness)||Ere(i.width)))}(!a.inherit||!o[h])&&(s("color",r),s("thickness"),s("width",n9e.traceIs(t,"gl3d")?0:4))}},Cre=function(t){var r=t.type,a=t.symmetric;if(r==="data"){var n=t.array||[];if(a)return function(u,f){var c=+n[f];return[c,c]};var o=t.arrayminus||[];return function(u,f){var c=+n[f],h=+o[f];return!isNaN(c)||!isNaN(h)?[h||0,c||0]:[NaN,NaN]}}else{var i=Lre(r,t.value),s=Lre(r,t.valueminus);return a||t.valueminus===void 0?function(u){var f=i(u);return[f,f]}:function(u){return[s(u),i(u)]}}};function Lre(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}var t7=gn,u9e=Pa,r7=rn.exports,f9e=bt.exports,c9e=Cre,h9e=function(t){for(var r=t.calcdata,a=0;a<r.length;a++){var n=r[a],o=n[0].trace;if(o.visible===!0&&u9e.traceIs(o,"errorBarsOK")){var i=r7.getFromId(t,o.xaxis),s=r7.getFromId(t,o.yaxis);Pre(n,o,i,"x"),Pre(n,o,s,"y")}}};function Pre(e,t,r,a){var n=t["error_"+a]||{},o=n.visible&&["linear","log"].indexOf(r.type)!==-1,i=[];if(!!o){for(var s=c9e(n),l=0;l<e.length;l++){var u=e[l],f=u.i;if(f===void 0)f=l;else if(f===null)continue;var c=u[a];if(!!t7(r.c2l(c))){var h=s(c,f);if(t7(h[0])&&t7(h[1])){var v=u[a+"s"]=c-h[0],p=u[a+"h"]=c+h[1];i.push(v,p)}}}var d=r._id,g=t._extremes[d],m=r7.findExtremes(r,i,f9e.extendFlat({tozero:g.opts.tozero},{padded:!0}));g.min=g.min.concat(m.min),g.max=g.max.concat(m.max)}}var Ire=Ra.exports,_y=gn,v9e=xn.exports,d9e=Ro,p9e=function(t,r,a,n){var o,i=a.xaxis,s=a.yaxis,l=n&&n.duration>0;r.each(function(u){var f=u[0].trace,c=f.error_x||{},h=f.error_y||{},v;f.ids&&(v=function(m){return m.id});var p=d9e.hasMarkers(f)&&f.marker.maxdisplayed>0;!h.visible&&!c.visible&&(u=[]);var d=Ire.select(this).selectAll("g.errorbar").data(u,v);if(d.exit().remove(),!!u.length){c.visible||d.selectAll("path.xerror").remove(),h.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var g=d.enter().append("g").classed("errorbar",!0);l&&g.style("opacity",0).transition().duration(n.duration).style("opacity",1),v9e.setClipUrl(d,a.layerClipId,t),d.each(function(m){var y=Ire.select(this),_=g9e(m,i,s);if(!(p&&!m.vis)){var S,M=y.select("path.yerror");if(h.visible&&_y(_.x)&&_y(_.yh)&&_y(_.ys)){var w=h.width;S="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(S+="m-"+w+",0h"+2*w),o=!M.size(),o?M=y.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):l&&(M=M.transition().duration(n.duration).ease(n.easing)),M.attr("d",S)}else M.remove();var A=y.select("path.xerror");if(c.visible&&_y(_.y)&&_y(_.xh)&&_y(_.xs)){var k=(c.copy_ystyle?h:c).width;S="M"+_.xh+","+(_.y-k)+"v"+2*k+"m0,-"+k+"H"+_.xs,_.noXS||(S+="m0,-"+k+"v"+2*k),o=!A.size(),o?A=y.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):l&&(A=A.transition().duration(n.duration).ease(n.easing)),A.attr("d",S)}else A.remove()}})}})};function g9e(e,t,r){var a={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(a.yh=r.c2p(e.yh),a.ys=r.c2p(e.ys),_y(a.ys)||(a.noYS=!0,a.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(a.xh=t.c2p(e.xh),a.xs=t.c2p(e.xs),_y(a.xs)||(a.noXS=!0,a.xs=t.c2p(e.xs,!0))),a}var m9e=Ra.exports,Dre=Oa.exports,y9e=function(t){t.each(function(r){var a=r[0].trace,n=a.error_y||{},o=a.error_x||{},i=m9e.select(this);i.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(Dre.stroke,n.color),o.copy_ystyle&&(o=n),i.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(Dre.stroke,o.color)})},vA=bt.exports,Rre=Jo.overrideAll,dA=kre,Dx={error_x:vA.extendFlat({},dA),error_y:vA.extendFlat({},dA)};delete Dx.error_x.copy_zstyle;delete Dx.error_y.copy_zstyle;delete Dx.error_y.copy_ystyle;var pA={error_x:vA.extendFlat({},dA),error_y:vA.extendFlat({},dA),error_z:vA.extendFlat({},dA)};delete pA.error_x.copy_ystyle;delete pA.error_y.copy_ystyle;delete pA.error_z.copy_ystyle;delete pA.error_z.copy_zstyle;var x9e={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Dx,bar:Dx,histogram:Dx,scatter3d:Rre(pA,"calc","nested"),scattergl:Rre(Dx,"calc","nested")}},supplyDefaults:l9e,calc:h9e,makeComputeError:Cre,plot:p9e,style:y9e,hoverInfo:b9e};function b9e(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}var _9e={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}},wy=Ra.exports,a7=Hl.exports,xC=Eo.exports,zre=Pa,Yg=rn.exports,bC=kf.exports,Bv=bt.exports,rp=Bv.strTranslate,Fre=cn.extendFlat,n7=Zp,ap=xn.exports,i7=Oa.exports,w9e=H_,T9e=xo,A9e=ac.flipScale,S9e=WE,M9e=m8,k9e=Zu,o7=ou,Ore=o7.LINE_SPACING,Nre=o7.FROM_TL,Bre=o7.FROM_BR,cs=_9e.cn;function E9e(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+cs.colorbar).data(C9e(e),function(a){return a._id});r.enter().append("g").attr("class",function(a){return a._id}).classed(cs.colorbar,!0),r.each(function(a){var n=wy.select(this);Bv.ensureSingle(n,"rect",cs.cbbg),Bv.ensureSingle(n,"g",cs.cbfills),Bv.ensureSingle(n,"g",cs.cblines),Bv.ensureSingle(n,"g",cs.cbaxis,function(i){i.classed(cs.crisp,!0)}),Bv.ensureSingle(n,"g",cs.cbtitleunshift,function(i){i.append("g").classed(cs.cbtitle,!0)}),Bv.ensureSingle(n,"rect",cs.cboutline);var o=L9e(n,a,e);o&&o.then&&(e._promises||[]).push(o),e._context.edits.colorbarPosition&&P9e(n,a,e)}),r.exit().each(function(a){xC.autoMargin(e,a._id)}).remove(),r.order()}function C9e(e){var t=e._fullLayout,r=e.calcdata,a=[],n,o,i,s;function l(_){return Fre(_,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){typeof s.calc=="function"?s.calc(e,i,n):(n._fillgradient=o.reversescale?A9e(o.colorscale):o.colorscale,n._zrange=[o[s.min],o[s.max]])}for(var f=0;f<r.length;f++){var c=r[f];i=c[0].trace;var h=i._module.colorbar;if(i.visible===!0&&h)for(var v=Array.isArray(h),p=v?h:[h],d=0;d<p.length;d++){s=p[d];var g=s.container;o=g?i[g]:i,o&&o.showscale&&(n=l(o.colorbar),n._id="cb"+i.uid+(v&&g?"-"+g:""),n._traceIndex=i.index,n._propPrefix=(g?g+".":"")+"colorbar.",n._meta=i._meta,u(),a.push(n))}}for(var m in t._colorAxes)if(o=t[m],o.showscale){var y=t._colorAxes[m];n=l(o.colorbar),n._id="cb"+m,n._propPrefix=m+".colorbar.",n._meta=t._meta,s={min:"cmin",max:"cmax"},y[0]!=="heatmap"&&(i=y[1],s.calc=i._module.colorbar.calc),u(),a.push(n)}return a}function L9e(e,t,r){var a=t.orientation==="v",n=t.len,o=t.lenmode,i=t.thickness,s=t.thicknessmode,l=t.outlinewidth,u=t.borderwidth,f=t.bgcolor,c=t.xanchor,h=t.yanchor,v=t.xpad,p=t.ypad,d=t.x,g=a?t.y:1-t.y,m=r._fullLayout,y=m._size,_=t._fillcolor,S=t._line,M=t.title,w=M.side,A=t._zrange||wy.extent((typeof _=="function"?_:S.color).domain()),k=typeof S.color=="function"?S.color:function(){return S.color},T=typeof _=="function"?_:function(){return _},L=t._levels,C=I9e(r,t,A),I=C.fill,R=C.line,B=Math.round(i*(s==="fraction"?a?y.w:y.h:1)),N=B/(a?y.w:y.h),D=Math.round(n*(o==="fraction"?a?y.h:y.w:1)),O=D/(a?y.h:y.w),$=Math.round(a?d*y.w+v:g*y.h+p),Y={center:.5,right:1}[c]||0,X={top:1,middle:.5}[h]||0,ee=a?d-Y*N:g-X*N,Q=a?g-X*O:d-Y*O,Z=Math.round(a?y.h*(1-Q):y.w*Q);t._lenFrac=O,t._thickFrac=N,t._uFrac=ee,t._vFrac=Q;var q=t._axis=D9e(r,t,A);q.position=N+(a?d+v/y.w:g+p/y.h);var ae=["top","bottom"].indexOf(w)!==-1;if(a&&ae&&(q.title.side=w,q.titlex=d+v/y.w,q.titley=Q+(M.side==="top"?O-p/y.h:p/y.h)),!a&&!ae&&(q.title.side=w,q.titley=g+p/y.h,q.titlex=Q+v/y.w),S.color&&t.tickmode==="auto"){q.tickmode="linear",q.tick0=L.start;var ie=L.size,we=Bv.constrain(D/50,4,15)+1,Te=(A[1]-A[0])/((t.nticks||we)*ie);if(Te>1){var he=Math.pow(10,Math.floor(Math.log(Te)/Math.LN10));ie*=he*Bv.roundUp(Te/he,[2,5,10]),(Math.abs(L.start)/L.size+1e-6)%1<2e-6&&(q.tick0=0)}q.dtick=ie}q.domain=a?[Q+p/y.h,Q+O-p/y.h]:[Q+v/y.w,Q+O-v/y.w],q.setScale(),e.attr("transform",rp(Math.round(y.l),Math.round(y.t)));var xe=e.select("."+cs.cbtitleunshift).attr("transform",rp(-Math.round(y.l),-Math.round(y.t))),Se=q.ticklabelposition,ye=q.title.font.size,re=e.select("."+cs.cbaxis),se,de=0,Me=0;function Ie(ce,ue){var Re={propContainer:q,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:m._dfltTitle.colorbar,containerGroup:e.select("."+cs.cbtitle)},Xe=ce.charAt(0)==="h"?ce.substr(1):"h"+ce;e.selectAll("."+Xe+",."+Xe+"-math-group").remove(),w9e.draw(r,ce,Fre(Re,ue||{}))}function Ee(){if(a&&ae||!a&&!ae){var ce,ue;w==="top"&&(ce=v+y.l+y.w*d,ue=p+y.t+y.h*(1-Q-O)+3+ye*.75),w==="bottom"&&(ce=v+y.l+y.w*d,ue=p+y.t+y.h*(1-Q)-3-ye*.25),w==="right"&&(ue=p+y.t+y.h*g+3+ye*.75,ce=v+y.l+y.w*Q),Ie(q._id+"title",{attributes:{x:ce,y:ue,"text-anchor":a?"start":"middle"}})}}function qe(){if(a&&!ae||!a&&ae){var ce=q.position||0,ue=q._offset+q._length/2,Re,Xe;if(w==="right")Xe=ue,Re=y.l+y.w*ce+10+ye*(q.showticklabels?1:.5);else if(Re=ue,w==="bottom"&&(Xe=y.t+y.h*ce+10+(Se.indexOf("inside")===-1?q.tickfont.size:0)+(q.ticks!=="intside"&&t.ticklen||0)),w==="top"){var Ke=M.text.split("<br>").length;Xe=y.t+y.h*ce+10-B-Ore*ye*Ke}Ie((a?"h":"v")+q._id+"title",{avoid:{selection:wy.select(r).selectAll("g."+q._id+"tick"),side:w,offsetTop:a?0:y.t,offsetLeft:a?y.l:0,maxShift:a?m.width:m.height},attributes:{x:Re,y:Xe,"text-anchor":"middle"},transform:{rotate:a?-90:0,offset:0}})}}function be(){if(!a&&!ae||a&&ae){var ce=e.select("."+cs.cbtitle),ue=ce.select("text"),Re=[-l/2,l/2],Xe=ce.select(".h"+q._id+"title-math-group").node(),Ke=15.6;ue.node()&&(Ke=parseInt(ue.node().style.fontSize,10)*Ore);var vt;if(Xe?(vt=ap.bBox(Xe),Me=vt.width,de=vt.height,de>Ke&&(Re[1]-=(de-Ke)/2)):ue.node()&&!ue.classed(cs.jsPlaceholder)&&(vt=ap.bBox(ue.node()),Me=vt.width,de=vt.height),a){if(de){if(de+=5,w==="top")q.domain[1]-=de/y.h,Re[1]*=-1;else{q.domain[0]+=de/y.h;var Ze=T9e.lineCount(ue);Re[1]+=(1-Ze)*Ke}ce.attr("transform",rp(Re[0],Re[1])),q.setScale()}}else Me&&(w==="right"&&(q.domain[0]+=(Me+ye/2)/y.w),ce.attr("transform",rp(Re[0],Re[1])),q.setScale())}e.selectAll("."+cs.cbfills+",."+cs.cblines).attr("transform",a?rp(0,Math.round(y.h*(1-q.domain[1]))):rp(Math.round(y.w*q.domain[0]),0)),re.attr("transform",a?rp(0,Math.round(-y.t)):rp(Math.round(-y.l),0));var Qe=e.select("."+cs.cbfills).selectAll("rect."+cs.cbfill).attr("style","").data(I);Qe.enter().append("rect").classed(cs.cbfill,!0).style("stroke","none"),Qe.exit().remove();var Je=A.map(q.c2p).map(Math.round).sort(function(_t,Pt){return _t-Pt});Qe.each(function(_t,Pt){var Tt=[Pt===0?A[0]:(I[Pt]+I[Pt-1])/2,Pt===I.length-1?A[1]:(I[Pt]+I[Pt+1])/2].map(q.c2p).map(Math.round);a&&(Tt[1]=Bv.constrain(Tt[1]+(Tt[1]>Tt[0])?1:-1,Je[0],Je[1]));var Ot=wy.select(this).attr(a?"x":"y",$).attr(a?"y":"x",wy.min(Tt)).attr(a?"width":"height",Math.max(B,2)).attr(a?"height":"width",Math.max(wy.max(Tt)-wy.min(Tt),2));if(t._fillgradient)ap.gradient(Ot,r,t._id,a?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var qt=T(_t).replace("e-","");Ot.attr("fill",a7(qt).toHexString())}});var je=e.select("."+cs.cblines).selectAll("path."+cs.cbline).data(S.color&&S.width?R:[]);je.enter().append("path").classed(cs.cbline,!0),je.exit().remove(),je.each(function(_t){var Pt=$,Tt=Math.round(q.c2p(_t))+S.width/2%1;wy.select(this).attr("d","M"+(a?Pt+","+Tt:Tt+","+Pt)+(a?"h":"v")+B).call(ap.lineGroupStyle,S.width,k(_t),S.dash)}),re.selectAll("g."+q._id+"tick,path").remove();var $e=$+B+(l||0)/2-(t.ticks==="outside"?1:0),Ye=Yg.calcTicks(q),yt=Yg.getTickSigns(q)[2];return Yg.drawTicks(r,q,{vals:q.ticks==="inside"?Yg.clipEnds(q,Ye):Ye,layer:re,path:Yg.makeTickPath(q,$e,yt),transFn:Yg.makeTransTickFn(q)}),Yg.drawLabels(r,q,{vals:Ye,layer:re,transFn:Yg.makeTransTickLabelFn(q),labelFns:Yg.makeLabelFns(q,$e)})}function oe(){var ce,ue=B+l/2;Se.indexOf("inside")===-1&&(ce=ap.bBox(re.node()),ue+=a?ce.width:ce.height),se=xe.select("text");var Re=0,Xe=a&&w==="top",Ke=!a&&w==="right",vt=0;if(se.node()&&!se.classed(cs.jsPlaceholder)){var Ze,Qe=xe.select(".h"+q._id+"title-math-group").node();Qe&&(a&&ae||!a&&!ae)?(ce=ap.bBox(Qe),Re=ce.width,Ze=ce.height):(ce=ap.bBox(xe.node()),Re=ce.right-y.l-(a?$:Z),Ze=ce.bottom-y.t-(a?Z:$),!a&&w==="top"&&(ue+=ce.height,vt=ce.height)),Ke&&(se.attr("transform",rp(Re/2+ye/2,0)),Re*=2),ue=Math.max(ue,a?Re:Ze)}var Je=(a?v:p)*2+ue+u+l/2,je=0;!a&&M.text&&h==="bottom"&&g<=0&&(je=Je/2,Je+=je,vt+=je),m._hColorbarMoveTitle=je,m._hColorbarMoveCBTitle=vt;var $e=u+l;e.select("."+cs.cbbg).attr("x",(a?$:Z)-$e/2-(a?v:0)).attr("y",(a?Z:$)-(a?D:p+vt-je)).attr(a?"width":"height",Math.max(Je-je,2)).attr(a?"height":"width",Math.max(D+$e,2)).call(i7.fill,f).call(i7.stroke,t.bordercolor).style("stroke-width",u);var Ye=Ke?Math.max(Re-10,0):0;if(e.selectAll("."+cs.cboutline).attr("x",(a?$:Z+v)+Ye).attr("y",(a?Z+p-D:$)+(Xe?de:0)).attr(a?"width":"height",Math.max(B,2)).attr(a?"height":"width",Math.max(D-(a?2*p+de:2*v+Ye),2)).call(i7.stroke,t.outlinecolor).style({fill:"none","stroke-width":l}),e.attr("transform",rp(y.l-(a?Y*Je:0),y.t-(a?0:(1-X)*Je-vt))),!a&&(u||a7(f).getAlpha()&&!a7.equals(m.paper_bgcolor,f))){var yt=re.selectAll("text"),_t=yt[0].length,Pt=e.select("."+cs.cbbg).node(),Tt=ap.bBox(Pt),Ot=ap.getTranslate(e),qt=2;yt.each(function(Oe,it){var ft=0,pt=_t-1;if(it===ft||it===pt){var Dt=ap.bBox(this),Nt=ap.getTranslate(this),hr;if(it===pt){var fr=Dt.right+Nt.x,vr=Tt.right+Ot.x+Z-u-qt+d;hr=vr-fr,hr>0&&(hr=0)}else if(it===ft){var Ut=Dt.left+Nt.x,Fr=Tt.left+Ot.x+Z+u+qt;hr=Fr-Ut,hr<0&&(hr=0)}hr&&(_t<3?this.setAttribute("transform","translate("+hr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Xt={},Or=Nre[c],Br=Bre[c],Qr=Nre[h],Sr=Bre[h],Zr=Je-B;a?(o==="pixels"?(Xt.y=g,Xt.t=D*Qr,Xt.b=D*Sr):(Xt.t=Xt.b=0,Xt.yt=g+n*Qr,Xt.yb=g-n*Sr),s==="pixels"?(Xt.x=d,Xt.l=Je*Or,Xt.r=Je*Br):(Xt.l=Zr*Or,Xt.r=Zr*Br,Xt.xl=d-i*Or,Xt.xr=d+i*Br)):(o==="pixels"?(Xt.x=d,Xt.l=D*Or,Xt.r=D*Br):(Xt.l=Xt.r=0,Xt.xl=d+n*Or,Xt.xr=d-n*Br),s==="pixels"?(Xt.y=1-g,Xt.t=Je*Qr,Xt.b=Je*Sr):(Xt.t=Zr*Qr,Xt.b=Zr*Sr,Xt.yt=g-i*Qr,Xt.yb=g+i*Sr)),xC.autoMargin(r,t._id,Xt)}return Bv.syncOrAsync([xC.previousPromises,Ee,be,qe,xC.previousPromises,oe],r)}function P9e(e,t,r){var a=t.orientation==="v",n=r._fullLayout,o=n._size,i,s,l;bC.init({element:e.node(),gd:r,prepFn:function(){i=e.attr("transform"),n7(e)},moveFn:function(u,f){e.attr("transform",i+rp(u,f)),s=bC.align((a?t._uFrac:t._vFrac)+u/o.w,a?t._thickFrac:t._lenFrac,0,1,t.xanchor),l=bC.align((a?t._vFrac:1-t._uFrac)-f/o.h,a?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=bC.getCursor(s,l,t.xanchor,t.yanchor);n7(e,c)},doneFn:function(){if(n7(e),s!==void 0&&l!==void 0){var u={};u[t._propPrefix+"x"]=s,u[t._propPrefix+"y"]=l,t._traceIndex!==void 0?zre.call("_guiRestyle",r,u,t._traceIndex):zre.call("_guiRelayout",r,u)}}})}function I9e(e,t,r){var a=t._levels,n=[],o=[],i,s,l=a.end+a.size/100,u=a.size,f=1.001*r[0]-.001*r[1],c=1.001*r[1]-.001*r[0];for(s=0;s<1e5&&(i=a.start+s*u,!(u>0?i>=l:i<=l));s++)i>f&&i<c&&n.push(i);if(t._fillgradient)o=[0];else if(typeof t._fillcolor=="function"){var h=t._filllevels;if(h)for(l=h.end+h.size/100,u=h.size,s=0;s<1e5&&(i=h.start+s*u,!(u>0?i>=l:i<=l));s++)i>r[0]&&i<r[1]&&o.push(i);else o=n.map(function(v){return v-a.size/2}),o.push(o[o.length-1]+a.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(o=[0]);return a.size<0&&(n.reverse(),o.reverse()),{line:n,fill:o}}function D9e(e,t,r){var a=e._fullLayout,n=t.orientation==="v",o={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:n?"right":"bottom",position:1},i=n?"y":"x",s={type:"linear",_id:i+t._id},l={letter:i,font:a.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:a.calendar};function u(f,c){return Bv.coerce(o,s,k9e,f,c)}return S9e(o,s,u,l,a),M9e(o,s,u,l),s}var R9e={draw:E9e},z9e={moduleType:"component",name:"colorbar",attributes:QR,supplyDefaults:vZ,draw:R9e.draw,hasColorbar:oZ},F9e={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},O9e={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},N9e=Pa,$re=bt.exports,s7=$re.extendFlat,Ure=$re.extendDeep;function Hre(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function B9e(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}var Gre=function(t,r){var a,n=t.data,o=t.layout,i=Ure([],n),s=Ure({},o,Hre(r.tileClass)),l=t._context||{};if(r.width&&(s.width=r.width),r.height&&(s.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(a=0;a<u.length;a++)B9e(u[a])&&(s[u[a]].title={text:""});for(a=0;a<i.length;a++){var f=i[a];f.showscale=!1,f.marker&&(f.marker.showscale=!1),N9e.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(r.annotations))for(a=0;a<r.annotations.length;a++)s.annotations.push(r.annotations[a]);var c=Object.keys(s).filter(function(g){return g.match(/^scene\d*$/)});if(c.length){var h={};for(r.tileClass==="thumbnail"&&(h={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<c.length;a++){var v=s[c[a]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),s7(v.xaxis,h),s7(v.yaxis,h),s7(v.zaxis,h),v._scene=null}}var p=document.createElement("div");r.tileClass&&(p.className=r.tileClass);var d={gd:p,td:p,layout:s,data:i,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return r.setBackground!=="transparent"&&(d.config.setBackground=r.setBackground||"opaque"),d.gd.defaultLayout=Hre(r.tileClass),d},$9e=oT.exports.EventEmitter,U9e=Pa,H9e=bt.exports,Vre=Ru,G9e=Gre,V9e=qF,j9e=YF;function q9e(e,t){var r=new $9e,a=G9e(e,{format:"png"}),n=a.gd;n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n);function o(){var s=Vre.getDelay(n._fullLayout);setTimeout(function(){var l=V9e(n),u=document.createElement("canvas");u.id=H9e.randstr(),r=j9e({format:t.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:u,emitter:r,svg:l}),r.clean=function(){n&&document.body.removeChild(n)}},s)}var i=Vre.getRedrawFunc(n);return U9e.call("_doPlot",n,a.data,a.layout,a.config).then(i).then(o).catch(function(s){r.emit("error",s)}),r}var Y9e=q9e,jre=Ru,W9e={getDelay:jre.getDelay,getRedrawFunc:jre.getRedrawFunc,clone:Gre,toSVG:qF,svgToImg:YF,toImage:Y9e,downloadImage:RQ},X9e=W9e;(function(e){e.version=fR.version;for(var t=Pa,r=e.register=t.register,a=fs,n=Object.keys(a),o=0;o<n.length;o++){var i=n[o];i.charAt(0)!=="_"&&(e[i]=a[i]),r({moduleType:"apiMethod",name:i,fn:a[i]})}r(IFe),r([DFe,Rs,s8e,A8e,O8e,Z8e,_7e,Y7e,AOe,KOe,Mre,x9e,Qo,z9e,zJ]),r([F9e,O9e]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(r(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=sF;var s=Rs,l=Eo.exports;e.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},e.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},e.Snapshot=X9e,e.PlotSchema=ly})(lY);var Z9e=lY,g2={TEXTPAD:3,eventDataKeys:["value","label"]},fl=Cl,qre=Ss.axisHoverFormat,K9e=zn.hovertemplateAttrs,J9e=zn.texttemplateAttrs,Yre=bo,Q9e=Ts,Wre=g2,eNe=Bd.pattern,Rx=cn.extendFlat,l7=Q9e({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),tNe=fl.marker,rNe=tNe.line,aNe=Rx({},rNe.width,{dflt:0}),nNe=Rx({width:aNe,editType:"calc"},Yre("marker.line")),iNe=Rx({line:nNe,editType:"calc"},Yre("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:eNe}),Wg={x:fl.x,x0:fl.x0,dx:fl.dx,y:fl.y,y0:fl.y0,dy:fl.dy,xperiod:fl.xperiod,yperiod:fl.yperiod,xperiod0:fl.xperiod0,yperiod0:fl.yperiod0,xperiodalignment:fl.xperiodalignment,yperiodalignment:fl.yperiodalignment,xhoverformat:qre("x"),yhoverformat:qre("y"),text:fl.text,texttemplate:J9e({editType:"plot"},{keys:Wre.eventDataKeys}),hovertext:fl.hovertext,hovertemplate:K9e({},{keys:Wre.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:Rx({},l7,{description:"Sets the font used for `text`."}),insidetextfont:Rx({},l7,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:Rx({},l7,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:Rx({},fl.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:iNe,offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:fl.selected.marker.opacity,color:fl.selected.marker.color,editType:"style"},textfont:fl.selected.textfont,editType:"style"},unselected:{marker:{opacity:fl.unselected.marker.opacity,color:fl.unselected.marker.color,editType:"style"},textfont:fl.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},u7={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},oNe=Oa.exports,Xre=ac.hasColorscale,Zre=su,sNe=bt.exports.coercePattern,f7=function(t,r,a,n,o){var i=a("marker.color",n),s=Xre(t,"marker");s&&Zre(t,r,o,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",oNe.defaultLine),Xre(t,"marker.line")&&Zre(t,r,o,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),sNe(a,"marker.pattern",i,s),a("selected.marker.color"),a("unselected.marker.color")},m2=bt.exports,Kre=Oa.exports,lNe=Pa,uNe=YT,fNe=a0,cNe=f7,hNe=qd.getAxisGroup,Jre=Wg,_C=m2.coerceFont;function vNe(e,t,r,a){function n(u,f){return m2.coerce(e,t,Jre,u,f)}var o=uNe(e,t,a,n);if(!o){t.visible=!1;return}fNe(e,t,a,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var i=n("textposition");eae(e,t,a,n,i,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),cNe(e,t,n,r,a);var s=(t.marker.line||{}).color,l=lNe.getComponentMethod("errorbars","supplyDefaults");l(e,t,s||Kre.defaultLine,{axis:"y"}),l(e,t,s||Kre.defaultLine,{axis:"x",inherit:"y"}),m2.coerceSelectionMarkerOpacity(t,n)}function Qre(e,t,r,a){var n=t.orientation,o=t[{v:"x",h:"y"}[n]+"axis"],i=hNe(r,o)+n,s=r._alignmentOpts||{},l=a("alignmentgroup"),u=s[i];u||(u=s[i]={});var f=u[l];f?f.traces.push(t):f=u[l]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var c=a("offsetgroup"),h=f.offsetGroups,v=h[c];c&&(v||(v=h[c]={offsetIndex:Object.keys(h).length}),t._offsetIndex=v.offsetIndex)}function dNe(e,t){var r,a;function n(i){return m2.coerce(a._input,a,Jre,i)}if(t.barmode==="group")for(var o=0;o<e.length;o++)a=e[o],a.type==="bar"&&(r=a._input,Qre(r,a,t,n))}function eae(e,t,r,a,n,o){o=o||{};var i=o.moduleHasSelected!==!1,s=o.moduleHasUnselected!==!1,l=o.moduleHasConstrain!==!1,u=o.moduleHasCliponaxis!==!1,f=o.moduleHasTextangle!==!1,c=o.moduleHasInsideanchor!==!1,h=!!o.hasPathbar,v=Array.isArray(n)||n==="auto",p=v||n==="inside",d=v||n==="outside";if(p||d){var g=_C(a,"textfont",r.font),m=m2.extendFlat({},g),y=e.textfont&&e.textfont.color,_=!y;if(_&&delete m.color,_C(a,"insidetextfont",m),h){var S=m2.extendFlat({},g);_&&delete S.color,_C(a,"pathbar.textfont",S)}d&&_C(a,"outsidetextfont",g),i&&a("selected.textfont.color"),s&&a("unselected.textfont.color"),l&&a("constraintext"),u&&a("cliponaxis"),f&&a("textangle"),a("texttemplate")}p&&c&&a("insidetextanchor")}var ch={supplyDefaults:vNe,crossTraceDefaults:dNe,handleGroupingDefaults:Qre,handleText:eae},pNe=Pa,gNe=rn.exports,mNe=bt.exports,yNe=u7,tae=function(e,t,r){function a(v,p){return mNe.coerce(e,t,yNe,v,p)}for(var n=!1,o=!1,i=!1,s={},l=a("barmode"),u=0;u<r.length;u++){var f=r[u];if(pNe.traceIs(f,"bar")&&f.visible)n=!0;else continue;if(l==="group"){var c=f.xaxis+f.yaxis;s[c]&&(i=!0),s[c]=!0}if(f.visible&&f.type==="histogram"){var h=gNe.getFromId({_fullLayout:t},f[f.orientation==="v"?"xaxis":"yaxis"]);h.type!=="category"&&(o=!0)}}if(!n){delete t.barmode;return}l!=="overlay"&&a("barnorm"),a("bargap",o&&!i?0:.2),a("bargroupgap")},y2=bt.exports,wC=function(t,r){for(var a=0;a<t.length;a++)t[a].i=a;y2.mergeArray(r.text,t,"tx"),y2.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){y2.mergeArray(n.opacity,t,"mo",!0),y2.mergeArray(n.color,t,"mc");var o=n.line;o&&(y2.mergeArray(o.color,t,"mlc"),y2.mergeArrayCastPositive(o.width,t,"mlw"))}},rae=rn.exports,aae=o0,nae=ac.hasColorscale,iae=ih,xNe=wC,bNe=Zd,_Ne=function(t,r){var a=rae.getFromId(t,r.xaxis||"x"),n=rae.getFromId(t,r.yaxis||"y"),o,i,s,l,u,f,c={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(o=a.makeCalcdata(r,"x",c),s=n.makeCalcdata(r,"y"),l=aae(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(o=n.makeCalcdata(r,"y",c),s=a.makeCalcdata(r,"x"),l=aae(r,a,"x",s),u=!!r.xperiodalignment,f="x"),i=l.vals;for(var h=Math.min(i.length,o.length),v=new Array(h),p=0;p<h;p++)v[p]={p:i[p],s:o[p]},u&&(v[p].orig_p=s[p],v[p][f+"End"]=l.ends[p],v[p][f+"Start"]=l.starts[p]),r.ids&&(v[p].id=String(r.ids[p]));return nae(r,"marker")&&iae(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),nae(r,"marker.line")&&iae(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),xNe(v,r),bNe(v,r),v},wNe=TC,TNe=bt.exports.distinctVals,ANe=Un.BADNUM;function TC(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,a=[],n=0;n<e.length;n++){for(var o=e[n],i=0;i<o.length;i++){var s=o[i];s.p!==ANe&&a.push(s.p)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=a;var l=TNe(a);this.distinctPositions=l.vals,l.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(l.minDiff,r);var u=(t.posAxis||{}).type;(u==="category"||u==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}TC.prototype.put=function(t,r){var a=this.getLabel(t,r),n=this.bins[a]||0;return this.bins[a]=n+r,n};TC.prototype.get=function(t,r){var a=this.getLabel(t,r);return this.bins[a]||0};TC.prototype.getLabel=function(t,r){var a=r<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+n};var Ty=gn,c7=bt.exports.isArrayOrTypedArray,x2=Un.BADNUM,SNe=Pa,gA=rn.exports,MNe=qd.getAxisGroup,AC=wNe;function kNe(e,t){for(var r=t.xaxis,a=t.yaxis,n=e._fullLayout,o=e._fullData,i=e.calcdata,s=[],l=[],u=0;u<o.length;u++){var f=o[u];if(f.visible===!0&&SNe.traceIs(f,"bar")&&f.xaxis===r._id&&f.yaxis===a._id&&(f.orientation==="h"?s.push(i[u]):l.push(i[u]),f._computePh))for(var c=e.calcdata[u],h=0;h<c.length;h++)typeof c[h].ph0=="function"&&(c[h].ph0=c[h].ph0()),typeof c[h].ph1=="function"&&(c[h].ph1=c[h].ph1())}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:a.type==="category"||a.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};h7(e,r,a,l,v),h7(e,a,r,s,v)}function h7(e,t,r,a,n){if(!!a.length){var o,i,s,l,u;switch(ENe(r,a),n.mode){case"overlay":v7(t,r,a,n);break;case"group":for(o=[],i=[],s=0;s<a.length;s++)l=a[s],u=l[0].trace,u.offset===void 0?i.push(l):o.push(l);i.length&&CNe(e,t,r,i,n),o.length&&v7(t,r,o,n);break;case"stack":case"relative":for(o=[],i=[],s=0;s<a.length;s++)l=a[s],u=l[0].trace,u.base===void 0?i.push(l):o.push(l);i.length&&LNe(e,t,r,i,n),o.length&&v7(t,r,o,n);break}RNe(a,t)}}function ENe(e,t){var r,a;for(r=0;r<t.length;r++){var n=t[r],o=n[0].trace,i=o.type==="funnel"?o._base:o.base,s,l=o.orientation==="h"?o.xcalendar:o.ycalendar,u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(c7(i)){for(a=0;a<Math.min(i.length,n.length);a++)s=u(i[a],0,l),Ty(s)?(n[a].b=+s,n[a].hasB=1):n[a].b=0;for(;a<n.length;a++)n[a].b=0}else{s=u(i,0,l);var f=Ty(s);for(s=f?s:0,a=0;a<n.length;a++)n[a].b=s,f&&(n[a].hasB=1)}}}function v7(e,t,r,a){for(var n=0;n<r.length;n++){var o=r[n],i=new AC([o],{posAxis:e,sepNegVal:!1,overlapNoMerge:!a.norm});oae(e,i,a),a.norm?(cae(i),d7(t,i,a)):fae(t,i)}}function CNe(e,t,r,a,n){var o=new AC(a,{posAxis:t,sepNegVal:!1,overlapNoMerge:!n.norm});PNe(e,t,o,n),DNe(o,t),n.norm?(cae(o),d7(r,o,n)):fae(r,o)}function LNe(e,t,r,a,n){var o=new AC(a,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});oae(t,o,n),INe(r,o,n);for(var i=0;i<a.length;i++)for(var s=a[i],l=0;l<s.length;l++){var u=s[l];if(u.s!==x2){var f=u.b+u.s===o.get(u.p,u.s);f&&(u._outmost=!0)}}n.norm&&d7(r,o,n)}function oae(e,t,r){for(var a=t.minDiff,n=t.traces,o=a*(1-r.gap),i=o,s=i*(1-(r.groupgap||0)),l=-s/2,u=0;u<n.length;u++){var f=n[u],c=f[0].t;c.barwidth=s,c.poffset=l,c.bargroupwidth=o,c.bardelta=a}t.binWidth=n[0][0].t.barwidth/100,sae(t),lae(e,t),uae(e,t)}function PNe(e,t,r,a){for(var n=e._fullLayout,o=r.positions,i=r.distinctPositions,s=r.minDiff,l=r.traces,u=l.length,f=o.length!==i.length,c=s*(1-a.gap),h=MNe(n,t._id)+l[0][0].trace.orientation,v=n._alignmentOpts[h]||{},p=0;p<u;p++){var d=l[p],g=d[0].trace,m=v[g.alignmentgroup]||{},y=Object.keys(m.offsetGroups||{}).length,_;y?_=c/y:_=f?c/u:c;var S=_*(1-(a.groupgap||0)),M;y?M=((2*g._offsetIndex+1-y)*_-S)/2:M=f?((2*p+1-u)*_-S)/2:-S/2;var w=d[0].t;w.barwidth=S,w.poffset=M,w.bargroupwidth=c,w.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,sae(r),lae(t,r),uae(t,r,f)}function sae(e){var t=e.traces,r,a;for(r=0;r<t.length;r++){var n=t[r],o=n[0],i=o.trace,s=o.t,l=i._offset||i.offset,u=s.poffset,f;if(c7(l)){for(f=Array.prototype.slice.call(l,0,n.length),a=0;a<f.length;a++)Ty(f[a])||(f[a]=u);for(a=f.length;a<n.length;a++)f.push(u);s.poffset=f}else l!==void 0&&(s.poffset=l);var c=i._width||i.width,h=s.barwidth;if(c7(c)){var v=Array.prototype.slice.call(c,0,n.length);for(a=0;a<v.length;a++)Ty(v[a])||(v[a]=h);for(a=v.length;a<n.length;a++)v.push(h);if(s.barwidth=v,l===void 0){for(f=[],a=0;a<n.length;a++)f.push(u+(h-v[a])/2);s.poffset=f}}else c!==void 0&&(s.barwidth=c,l===void 0&&(s.poffset=u+(h-c)/2))}}function lae(e,t){for(var r=t.traces,a=mA(e),n=0;n<r.length;n++)for(var o=r[n],i=o[0].t,s=i.poffset,l=Array.isArray(s),u=i.barwidth,f=Array.isArray(u),c=0;c<o.length;c++){var h=o[c],v=h.w=f?u[c]:u;h[a]=h.p+(l?s[c]:s)+v/2}}function uae(e,t,r){var a=t.traces,n=t.minDiff,o=n/2;gA.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var i=0;i<a.length;i++){var s=a[i],l=s[0],u=l.trace,f=[],c,h,v,p;for(p=0;p<s.length;p++)c=s[p],h=c.p-o,v=c.p+o,f.push(h,v);if(u.width||u.offset){var d=l.t,g=d.poffset,m=d.barwidth,y=Array.isArray(g),_=Array.isArray(m);for(p=0;p<s.length;p++){c=s[p];var S=y?g[p]:g,M=_?m[p]:m;h=c.p+S,v=h+M,f.push(h,v)}}u._extremes[e._id]=gA.findExtremes(e,f,{padded:!1})}}function fae(e,t){for(var r=t.traces,a=mA(e),n=0;n<r.length;n++){for(var o=r[n],i=o[0].trace,s=[],l=!1,u=0;u<o.length;u++){var f=o[u],c=f.b,h=c+f.s;f[a]=h,s.push(h),f.hasB&&s.push(c),(!f.hasB||!f.b)&&(l=!0)}i._extremes[e._id]=gA.findExtremes(e,s,{tozero:l,padded:!0})}}function INe(e,t,r){var a=mA(e),n=t.traces,o,i,s,l,u,f;for(l=0;l<n.length;l++)if(o=n[l],i=o[0].trace,i.type==="funnel")for(u=0;u<o.length;u++)f=o[u],f.s!==x2&&t.put(f.p,-.5*f.s);for(l=0;l<n.length;l++){o=n[l],i=o[0].trace,s=i.type==="funnel";var c=[];for(u=0;u<o.length;u++)if(f=o[u],f.s!==x2){var h;s?h=f.s:h=f.s+f.b;var v=t.put(f.p,h),p=v+h;f.b=v,f[a]=p,r.norm||(c.push(p),f.hasB&&c.push(v))}r.norm||(i._extremes[e._id]=gA.findExtremes(e,c,{tozero:!0,padded:!0}))}}function cae(e){for(var t=e.traces,r=0;r<t.length;r++)for(var a=t[r],n=0;n<a.length;n++){var o=a[n];o.s!==x2&&e.put(o.p,o.b+o.s)}}function DNe(e,t){for(var r=e.traces,a=0;a<r.length;a++){var n=r[a],o=n[0].trace;if(o.base===void 0)for(var i=new AC([n],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<n.length;s++){var l=n[s];if(l.p!==x2){var u=i.put(l.p,l.b+l.s);u&&(l.b=u)}}}}function d7(e,t,r){var a=t.traces,n=mA(e),o=r.norm==="fraction"?1:100,i=o/1e9,s=e.l2c(e.c2l(0)),l=r.mode==="stack"?o:s;function u(M){return Ty(e.c2l(M))&&(M<s-i||M>l+i||!Ty(s))}for(var f=0;f<a.length;f++){for(var c=a[f],h=c[0].trace,v=[],p=!1,d=!1,g=0;g<c.length;g++){var m=c[g];if(m.s!==x2){var y=Math.abs(o/t.get(m.p,m.s));m.b*=y,m.s*=y;var _=m.b,S=_+m.s;m[n]=S,v.push(S),d=d||u(S),m.hasB&&(v.push(_),d=d||u(_)),(!m.hasB||!m.b)&&(p=!0)}}h._extremes[e._id]=gA.findExtremes(e,v,{tozero:p,padded:d})}}function RNe(e,t){var r=mA(t),a={},n,o,i,s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(i=e[n],o=0;o<i.length;o++){var u=i[o].p;Ty(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var f=1e4/(l-s),c=a.round=function(y){return String(Math.round(f*(y-s)))};for(n=0;n<e.length;n++){i=e[n],i[0].t.extents=a;var h=i[0].t.poffset,v=Array.isArray(h);for(o=0;o<i.length;o++){var p=i[o],d=p[r]-p.w/2;if(Ty(d)){var g=p[r]+p.w/2,m=c(p.p);a[m]?a[m]=[Math.min(d,a[m][0]),Math.max(g,a[m][1])]:a[m]=[d,g]}p.p0=p.p+(v?h[o]:h),p.p1=p.p0+p.w,p.s0=p.b,p.s1=p.s0+p.s}}}function mA(e){return e._id.charAt(0)}var yA={crossTraceCalc:kNe,setGroupPositions:h7},zNe=Ra.exports,FNe=bt.exports;function ONe(e,t,r){var a=e._fullLayout,n=a["_"+r+"Text_minsize"];if(n){var o=a.uniformtext.mode==="hide",i;switch(r){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}t.selectAll(i).each(function(s){var l=s.transform;if(l){l.scale=o&&l.hide?0:n/l.fontSize;var u=zNe.select(this).select("text");u.attr("transform",FNe.getTextTransform(l))}})}}function NNe(e,t,r){if(r.uniformtext.mode){var a=hae(e),n=r.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<n,r[a]=r[a]||1/0,t.hide||(r[a]=Math.min(r[a],Math.max(o,n)))}}function BNe(e,t){var r=hae(e);t[r]=void 0}function hae(e){return"_"+e+"Text_minsize"}var If={recordMinTextSize:NNe,clearMinTextSize:BNe,resizeText:ONe},Xg={},$Ne=gn,UNe=Hl.exports,HNe=bt.exports.isArrayOrTypedArray;Xg.coerceString=function(e,t,r){if(typeof t=="string"){if(t||!e.noBlank)return t}else if((typeof t=="number"||t===!0)&&!e.strict)return String(t);return r!==void 0?r:e.dflt};Xg.coerceNumber=function(e,t,r){if($Ne(t)){t=+t;var a=e.min,n=e.max,o=a!==void 0&&t<a||n!==void 0&&t>n;if(!o)return t}return r!==void 0?r:e.dflt};Xg.coerceColor=function(e,t,r){return UNe(t).isValid()?t:r!==void 0?r:e.dflt};Xg.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),e.values.indexOf(t)!==-1?t:r!==void 0?r:e.dflt};Xg.getValue=function(e,t){var r;return Array.isArray(e)?t<e.length&&(r=e[t]):r=e,r};Xg.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:HNe(e.marker.line.width)?0:e.marker.line.width;return r};var xA=Ra.exports,GNe=Oa.exports,bA=xn.exports,vae=bt.exports,dae=Pa,pae=If.resizeText,p7=Wg,VNe=p7.textfont,jNe=p7.insidetextfont,qNe=p7.outsidetextfont,b2=Xg;function YNe(e){var t=xA.select(e).selectAll("g.barlayer").selectAll("g.trace");pae(e,t,"bar");var r=t.size(),a=e._fullLayout;t.style("opacity",function(n){return n[0].trace.opacity}).each(function(n){(a.barmode==="stack"&&r>1||a.bargap===0&&a.bargroupgap===0&&!n[0].trace.marker.line.width)&&xA.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(n){var o=xA.select(this),i=n[0].trace;gae(o,i,e)}),dae.getComponentMethod("errorbars","style")(t)}function gae(e,t,r){bA.pointStyle(e.selectAll("path"),t,r),mae(e,t,r)}function mae(e,t,r){e.selectAll("text").each(function(a){var n=xA.select(this),o=vae.ensureUniformFontSize(r,yae(n,a,t,r));bA.font(n,o)})}function WNe(e,t,r){var a=t[0].trace;a.selectedpoints?XNe(r,a,e):(gae(r,a,e),dae.getComponentMethod("errorbars","style")(r))}function XNe(e,t,r){bA.selectedPointStyle(e.selectAll("path"),t),ZNe(e.selectAll("text"),t,r)}function ZNe(e,t,r){e.each(function(a){var n=xA.select(this),o;if(a.selected){o=vae.ensureUniformFontSize(r,yae(n,a,t,r));var i=t.selected.textfont&&t.selected.textfont.color;i&&(o.color=i),bA.font(n,o)}else bA.selectedTextStyle(n,t)})}function yae(e,t,r,a){var n=a._fullLayout.font,o=r.textfont;if(e.classed("bartext-inside")){var i=wae(t,r);o=bae(r,t.i,n,i)}else e.classed("bartext-outside")&&(o=_ae(r,t.i,n));return o}function xae(e,t,r){return g7(VNe,e.textfont,t,r)}function bae(e,t,r,a){var n=xae(e,t,r),o=e._input.textfont===void 0||e._input.textfont.color===void 0||Array.isArray(e.textfont.color)&&e.textfont.color[t]===void 0;return o&&(n={color:GNe.contrast(a),family:n.family,size:n.size}),g7(jNe,e.insidetextfont,t,n)}function _ae(e,t,r){var a=xae(e,t,r);return g7(qNe,e.outsidetextfont,t,a)}function g7(e,t,r,a){t=t||{};var n=b2.getValue(t.family,r),o=b2.getValue(t.size,r),i=b2.getValue(t.color,r);return{family:b2.coerceString(e.family,n,a.family),size:b2.coerceNumber(e.size,o,a.size),color:b2.coerceColor(e.color,i,a.color)}}function wae(e,t){return t.type==="waterfall"?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}var np={style:YNe,styleTextPoints:mae,styleOnSelect:WNe,getInsideTextFont:bae,getOutsideTextFont:_ae,getBarColor:wae,resizeText:pae},SC=Ra.exports,MC=gn,uu=bt.exports,KNe=xo,JNe=Oa.exports,Ay=xn.exports,QNe=Pa,kC=rn.exports.tickText,Tae=If,eBe=Tae.recordMinTextSize,tBe=Tae.clearMinTextSize,m7=np,_2=Xg,rBe=g2,Aae=Wg,aBe=Aae.text,nBe=Aae.textposition,iBe=oh.appendArrayPointValue,ip=rBe.TEXTPAD;function oBe(e){return e.id}function sBe(e){if(e.ids)return oBe}function Sy(e,t){return e<t?1:-1}function lBe(e,t,r,a){var n=[],o=[],i=a?t:r,s=a?r:t;return n[0]=i.c2p(e.s0,!0),o[0]=s.c2p(e.p0,!0),n[1]=i.c2p(e.s1,!0),o[1]=s.c2p(e.p1,!0),a?[n,o]:[o,n]}function Sae(e,t,r,a){if(!t.uniformtext.mode&&Mae(r)){var n;return a&&(n=a()),e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else return e}function Mae(e){return e&&e.duration>0}function uBe(e,t,r,a,n,o){var i=t.xaxis,s=t.yaxis,l=e._fullLayout;n||(n={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},tBe("bar",l));var u=uu.makeTraceGroups(a,r,"trace bars").each(function(f){var c=SC.select(this),h=f[0].trace,v=h.type==="waterfall",p=h.type==="funnel",d=h.type==="bar",g=d||p,m=0;v&&h.connector.visible&&h.connector.mode==="between"&&(m=h.connector.line.width/2);var y=h.orientation==="h",_=Mae(n),S=uu.ensureSingle(c,"g","points"),M=sBe(h),w=S.selectAll("g.point").data(uu.identity,M);w.enter().append("g").classed("point",!0),w.exit().remove(),w.each(function(k,T){var L=SC.select(this),C=lBe(k,i,s,y),I=C[0][0],R=C[0][1],B=C[1][0],N=C[1][1],D=(y?R-I:N-B)==0;D&&g&&_2.getLineWidth(h,k)&&(D=!1),D||(D=!MC(I)||!MC(R)||!MC(B)||!MC(N)),k.isBlank=D,D&&(y?R=I:N=B),m&&!D&&(y?(I-=Sy(I,R)*m,R+=Sy(I,R)*m):(B-=Sy(B,N)*m,N+=Sy(B,N)*m));var O,$;if(h.type==="waterfall"){if(!D){var Y=h[k.dir].marker;O=Y.line.width,$=Y.color}}else O=_2.getLineWidth(h,k),$=k.mc||h.marker.color;function X(ie){var we=SC.round(O/2%1,2);return n.gap===0&&n.groupgap===0?SC.round(Math.round(ie)-we,2):ie}function ee(ie,we,Te){return Te&&ie===we?ie:Math.abs(ie-we)>=2?X(ie):ie>we?Math.ceil(ie):Math.floor(ie)}if(!e._context.staticPlot){var Q=JNe.opacity($),Z=Q<1||O>.01?X:ee;I=Z(I,R,y),R=Z(R,I,y),B=Z(B,N,!y),N=Z(N,B,!y)}var q=Sae(uu.ensureSingle(L,"path"),l,n,o);if(q.style("vector-effect","non-scaling-stroke").attr("d",isNaN((R-I)*(N-B))||D&&e._context.staticPlot?"M0,0Z":"M"+I+","+B+"V"+N+"H"+R+"V"+B+"Z").call(Ay.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&_){var ae=Ay.makePointStyleFns(h);Ay.singlePointStyle(k,q,h,ae,e)}fBe(e,t,L,f,T,I,R,B,N,n,o),t.layerClipId&&Ay.hideOutsideRangePoint(k,L.select("text"),i,s,h.xcalendar,h.ycalendar)});var A=h.cliponaxis===!1;Ay.setClipUrl(c,A?null:t.layerClipId,e)});QNe.getComponentMethod("errorbars","plot")(e,u,t,n)}function fBe(e,t,r,a,n,o,i,s,l,u,f){var c=t.xaxis,h=t.yaxis,v=e._fullLayout,p;function d(ie,we,Te){var he=uu.ensureSingle(ie,"text").text(we).attr({class:"bartext bartext-"+p,"text-anchor":"middle","data-notex":1}).call(Ay.font,Te).call(KNe.convertToTspans,e);return he}var g=a[0].trace,m=g.orientation==="h",y=hBe(v,a,n,c,h);p=vBe(g,n);var _=u.mode==="stack"||u.mode==="relative",S=a[n],M=!_||S._outmost;if(!y||p==="none"||(S.isBlank||o===i||s===l)&&(p==="auto"||p==="inside")){r.select("text").remove();return}var w=v.font,A=m7.getBarColor(a[n],g),k=m7.getInsideTextFont(g,n,w,A),T=m7.getOutsideTextFont(g,n,w),L=r.datum();m?c.type==="log"&&L.s0<=0&&(c.range[0]<c.range[1]?o=0:o=c._length):h.type==="log"&&L.s0<=0&&(h.range[0]<h.range[1]?s=h._length:s=0);var C=Math.abs(i-o)-2*ip,I=Math.abs(l-s)-2*ip,R,B,N,D,O;if(p==="outside"&&!M&&!S.hasB&&(p="inside"),p==="auto")if(M){p="inside",O=uu.ensureUniformFontSize(e,k),R=d(r,y,O),B=Ay.bBox(R.node()),N=B.width,D=B.height;var $=N>0&&D>0,Y=N<=C&&D<=I,X=N<=I&&D<=C,ee=m?C>=N*(I/D):I>=D*(C/N);$&&(Y||X||ee)?p="inside":(p="outside",R.remove(),R=null)}else p="inside";if(!R){O=uu.ensureUniformFontSize(e,p==="outside"?T:k),R=d(r,y,O);var Q=R.attr("transform");if(R.attr("transform",""),B=Ay.bBox(R.node()),N=B.width,D=B.height,R.attr("transform",Q),N<=0||D<=0){R.remove();return}}var Z=g.textangle,q,ae;p==="outside"?(ae=g.constraintext==="both"||g.constraintext==="outside",q=cBe(o,i,s,l,B,{isHorizontal:m,constrained:ae,angle:Z})):(ae=g.constraintext==="both"||g.constraintext==="inside",q=Cae(o,i,s,l,B,{isHorizontal:m,constrained:ae,angle:Z,anchor:g.insidetextanchor})),q.fontSize=O.size,eBe(g.type==="histogram"?"bar":g.type,q,v),S.transform=q,Sae(R,v,u,f).attr("transform",uu.getTextTransform(q))}function kae(e){return e==="auto"?0:e}function Eae(e,t){var r=Math.PI/180*t,a=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*a,y:e.width*a+e.height*n}}function Cae(e,t,r,a,n,o){var i=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,u=o.anchor||"end",f=u==="end",c=u==="start",h=o.leftToRight||0,v=(h+1)/2,p=1-v,d=n.width,g=n.height,m=Math.abs(t-e),y=Math.abs(a-r),_=m>2*ip&&y>2*ip?ip:0;m-=2*_,y-=2*_;var S=kae(l);l==="auto"&&!(d<=m&&g<=y)&&(d>m||g>y)&&(!(d>y||g>m)||d<g!=m<y)&&(S+=90);var M=Eae(n,S),w=1;s&&(w=Math.min(1,m/M.x,y/M.y));var A=n.left*p+n.right*v,k=(n.top+n.bottom)/2,T=(e+ip)*p+(t-ip)*v,L=(r+a)/2,C=0,I=0;if(c||f){var R=(i?M.x:M.y)/2,B=i?Sy(e,t):Sy(r,a);i?c?(T=e+B*_,C=-B*R):(T=t-B*_,C=B*R):c?(L=r+B*_,I=-B*R):(L=a-B*_,I=B*R)}return{textX:A,textY:k,targetX:T,targetY:L,anchorX:C,anchorY:I,scale:w,rotate:S}}function cBe(e,t,r,a,n,o){var i=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,u=n.width,f=n.height,c=Math.abs(t-e),h=Math.abs(a-r),v;i?v=h>2*ip?ip:0:v=c>2*ip?ip:0;var p=1;s&&(p=i?Math.min(1,h/f):Math.min(1,c/u));var d=kae(l),g=Eae(n,d),m=(i?g.x:g.y)/2,y=(n.left+n.right)/2,_=(n.top+n.bottom)/2,S=(e+t)/2,M=(r+a)/2,w=0,A=0,k=i?Sy(t,e):Sy(r,a);return i?(S=t-k*v,w=k*m):(M=a+k*v,A=-k*m),{textX:y,textY:_,targetX:S,targetY:M,anchorX:w,anchorY:A,scale:p,rotate:d}}function hBe(e,t,r,a,n){var o=t[0].trace,i=o.texttemplate,s;return i?s=dBe(e,t,r,a,n):o.textinfo?s=pBe(t,r,a,n):s=_2.getValue(o.text,r),_2.coerceString(aBe,s)}function vBe(e,t){var r=_2.getValue(e.textposition,t);return _2.coerceEnumerated(nBe,r)}function dBe(e,t,r,a,n){var o=t[0].trace,i=uu.castOption(o,r,"texttemplate");if(!i)return"";var s=o.type==="waterfall",l=o.type==="funnel",u,f,c,h;o.orientation==="h"?(u="y",f=n,c="x",h=a):(u="x",f=a,c="y",h=n);function v(S){return kC(f,f.c2l(S),!0).text}function p(S){return kC(h,h.c2l(S),!0).text}var d=t[r],g={};g.label=d.p,g.labelLabel=g[u+"Label"]=v(d.p);var m=uu.castOption(o,d.i,"text");(m===0||m)&&(g.text=m),g.value=d.s,g.valueLabel=g[c+"Label"]=p(d.s);var y={};iBe(y,o,d.i),s&&(g.delta=+d.rawS||d.s,g.deltaLabel=p(g.delta),g.final=d.v,g.finalLabel=p(g.final),g.initial=g.final-g.delta,g.initialLabel=p(g.initial)),l&&(g.value=d.s,g.valueLabel=p(g.value),g.percentInitial=d.begR,g.percentInitialLabel=uu.formatPercent(d.begR),g.percentPrevious=d.difR,g.percentPreviousLabel=uu.formatPercent(d.difR),g.percentTotal=d.sumR,g.percenTotalLabel=uu.formatPercent(d.sumR));var _=uu.castOption(o,d.i,"customdata");return _&&(g.customdata=_),uu.texttemplateString(i,g,e._d3locale,y,g,o._meta||{})}function pBe(e,t,r,a){var n=e[0].trace,o=n.orientation==="h",i=n.type==="waterfall",s=n.type==="funnel";function l(M){var w=o?a:r;return kC(w,M,!0).text}function u(M){var w=o?r:a;return kC(w,+M,!0).text}var f=n.textinfo,c=e[t],h=f.split("+"),v=[],p,d=function(M){return h.indexOf(M)!==-1};if(d("label")&&v.push(l(e[t].p)),d("text")&&(p=uu.castOption(n,c.i,"text"),(p===0||p)&&v.push(p)),i){var g=+c.rawS||c.s,m=c.v,y=m-g;d("initial")&&v.push(u(y)),d("delta")&&v.push(u(g)),d("final")&&v.push(u(m))}if(s){d("value")&&v.push(u(c.s));var _=0;d("percent initial")&&_++,d("percent previous")&&_++,d("percent total")&&_++;var S=_>1;d("percent initial")&&(p=uu.formatPercent(c.begR),S&&(p+=" of initial"),v.push(p)),d("percent previous")&&(p=uu.formatPercent(c.difR),S&&(p+=" of previous"),v.push(p)),d("percent total")&&(p=uu.formatPercent(c.sumR),S&&(p+=" of total"),v.push(p))}return v.join("<br>")}var w2={plot:uBe,toMoveInsideBar:Cae},_A=Rs,gBe=Pa,Lae=Oa.exports,mBe=bt.exports.fillText,yBe=Xg.getLineWidth,y7=rn.exports.hoverLabelText,xBe=Un.BADNUM;function bBe(e,t,r,a,n){var o=Pae(e,t,r,a,n);if(o){var i=o.cd,s=i[0].trace,l=i[o.index];return o.color=Iae(s,l),gBe.getComponentMethod("errorbars","hoverInfo")(l,s,o),[o]}}function Pae(e,t,r,a,n){var o=e.cd,i=o[0].trace,s=o[0].t,l=a==="closest",u=i.type==="waterfall",f=e.maxHoverDistance,c=e.maxSpikeDistance,h,v,p,d,g,m,y;i.orientation==="h"?(h=r,v=t,p="y",d="x",g=N,m=I):(h=t,v=r,p="x",d="y",m=N,g=I);var _=i[p+"period"],S=l||_;function M(ie){return A(ie,-1)}function w(ie){return A(ie,1)}function A(ie,we){var Te=ie.w;return ie[p]+we*Te/2}function k(ie){return ie[p+"End"]-ie[p+"Start"]}var T=l?M:_?function(ie){return ie.p-k(ie)/2}:function(ie){return Math.min(M(ie),ie.p-s.bardelta/2)},L=l?w:_?function(ie){return ie.p+k(ie)/2}:function(ie){return Math.max(w(ie),ie.p+s.bardelta/2)};function C(ie,we,Te){return n.finiteRange&&(Te=0),_A.inbox(ie-h,we-h,Te+Math.min(1,Math.abs(we-ie)/y)-1)}function I(ie){return C(T(ie),L(ie),f)}function R(ie){return C(M(ie),w(ie),c)}function B(ie){var we=ie[d];if(u){var Te=Math.abs(ie.rawS)||0;v>0?we+=Te:v<0&&(we-=Te)}return we}function N(ie){var we=v,Te=ie.b,he=B(ie);return _A.inbox(Te-we,he-we,f+(he-we)/(he-Te)-1)}function D(ie){var we=v,Te=ie.b,he=B(ie);return _A.inbox(Te-we,he-we,c+(he-we)/(he-Te)-1)}var O=e[p+"a"],$=e[d+"a"];y=Math.abs(O.r2c(O.range[1])-O.r2c(O.range[0]));function Y(ie){return(g(ie)+m(ie))/2}var X=_A.getDistanceFunction(a,g,m,Y);if(_A.getClosest(o,X,e),e.index!==!1&&o[e.index].p!==xBe){S||(T=function(ie){return Math.min(M(ie),ie.p-s.bargroupwidth/2)},L=function(ie){return Math.max(w(ie),ie.p+s.bargroupwidth/2)});var ee=e.index,Q=o[ee],Z=i.base?Q.b+Q.s:Q.s;e[d+"0"]=e[d+"1"]=$.c2p(Q[d],!0),e[d+"LabelVal"]=Z;var q=s.extents[s.extents.round(Q.p)];e[p+"0"]=O.c2p(l?T(Q):q[0],!0),e[p+"1"]=O.c2p(l?L(Q):q[1],!0);var ae=Q.orig_p!==void 0;return e[p+"LabelVal"]=ae?Q.orig_p:Q.p,e.labelLabel=y7(O,e[p+"LabelVal"],i[p+"hoverformat"]),e.valueLabel=y7($,e[d+"LabelVal"],i[d+"hoverformat"]),e.baseLabel=y7($,Q.b,i[d+"hoverformat"]),e.spikeDistance=(D(Q)+R(Q))/2,e[p+"Spike"]=O.c2p(Q.p,!0),mBe(Q,i,e),e.hovertemplate=i.hovertemplate,e}}function Iae(e,t){var r=t.mcc||e.marker.color,a=t.mlcc||e.marker.line.color,n=yBe(e,t);if(Lae.opacity(r))return r;if(Lae.opacity(a)&&n)return a}var wA={hoverPoints:bBe,hoverOnBars:Pae,getTraceColor:Iae},_Be=function(t,r,a){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),a.orientation==="h"?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t},TA=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=a[0].trace,s=i.type==="funnel",l=i.orientation==="h",u=[],f;if(r===!1)for(f=0;f<a.length;f++)a[f].selected=0;else for(f=0;f<a.length;f++){var c=a[f],h="ct"in c?c.ct:wBe(c,n,o,l,s);r.contains(h,!1,f,t)?(u.push({pointNumber:f,x:n.c2d(c.x),y:o.c2d(c.y)}),c.selected=1):c.selected=0}return u};function wBe(e,t,r,a,n){var o=t.c2p(a?e.s0:e.p0,!0),i=t.c2p(a?e.s1:e.p1,!0),s=r.c2p(a?e.p0:e.s0,!0),l=r.c2p(a?e.p1:e.s1,!0);return n?[(o+i)/2,(s+l)/2]:a?[i,(s+l)/2]:[(o+i)/2,l]}var TBe={attributes:Wg,layoutAttributes:u7,supplyDefaults:ch.supplyDefaults,crossTraceDefaults:ch.crossTraceDefaults,supplyLayoutDefaults:tae,calc:_Ne,crossTraceCalc:yA.crossTraceCalc,colorbar:Pf,arraysToCalcdata:wC,plot:w2.plot,style:np.style,styleOnSelect:np.styleOnSelect,hoverPoints:wA.hoverPoints,eventData:_Be,selectPoints:TA,moduleType:"trace",name:"bar",basePlotModule:Ii,categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}},ABe=TBe,$v=Cl,Dae=Wg,SBe=us,Rae=Ss.axisHoverFormat,MBe=zn.hovertemplateAttrs,My=cn.extendFlat,AA=$v.marker,zae=AA.line,EC={y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y sample data or coordinates.","See overview for more info."].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x sample data or coordinates.","See overview for more info."].join(" ")},x0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the x coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},y0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the y coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},dx:{valType:"number",editType:"calc",description:["Sets the x coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},dy:{valType:"number",editType:"calc",description:["Sets the y coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},xperiod:$v.xperiod,yperiod:$v.yperiod,xperiod0:$v.xperiod0,yperiod0:$v.yperiod0,xperiodalignment:$v.xperiodalignment,yperiodalignment:$v.yperiodalignment,xhoverformat:Rae("x"),yhoverformat:Rae("y"),name:{valType:"string",editType:"calc+clearAxisTypes",description:["Sets the trace name.","The trace name appear as the legend item and on hover.","For box traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical"].join(" ")},q1:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 1 values.","There should be as many items as the number of boxes desired."].join(" ")},median:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the median values.","There should be as many items as the number of boxes desired."].join(" ")},q3:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 3 values.","There should be as many items as the number of boxes desired."].join(" ")},lowerfence:{valType:"data_array",editType:"calc",description:["Sets the lower fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `lowerfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point below 1.5 times the IQR."].join(" ")},upperfence:{valType:"data_array",editType:"calc",description:["Sets the upper fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `upperfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point above 1.5 times the IQR."].join(" ")},notched:{valType:"boolean",editType:"calc",description:["Determines whether or not notches are drawn.","Notches displays a confidence interval around the median.","We compute the confidence interval as median +/- 1.57 * IQR / sqrt(N),","where IQR is the interquartile range and N is the sample size.","If two boxes' notches do not overlap there is 95% confidence their medians differ.","See https://sites.google.com/site/davidsstatistics/home/notched-box-plots for more info.","Defaults to *false* unless `notchwidth` or `notchspan` is set."].join(" ")},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc",description:["Sets the width of the notches relative to","the box' width.","For example, with 0, the notches are as wide as the box(es)."].join(" ")},notchspan:{valType:"data_array",editType:"calc",description:["Sets the notch span from the boxes' `median` values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `notchspan` is not provided but a sample (in `y` or `x`) is set,","we compute it as 1.57 * IQR / sqrt(N),","where N is the sample size."].join(" ")},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc",description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the box(es) are shown with no sample points","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set.","Defaults to *all* under the q1/median/q3 signature.","Otherwise defaults to *outliers*."].join(" ")},jitter:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the box(es)."].join(" ")},pointpos:{valType:"number",min:-2,max:2,editType:"calc",description:["Sets the position of the sample points in relation to the box(es).","If *0*, the sample points are places over the center of the box(es).","Positive (negative) values correspond to positions to the","right (left) for vertical boxes and above (below) for horizontal boxes"].join(" ")},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc",description:["If *true*, the mean of the box(es)' underlying distribution is","drawn as a dashed line inside the box(es).","If *sd* the standard deviation is also drawn.","Defaults to *true* when `mean` is set.","Defaults to *sd* when `sd` is set","Otherwise defaults to *false*."].join(" ")},mean:{valType:"data_array",editType:"calc",description:["Sets the mean values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `mean` is not provided but a sample (in `y` or `x`) is set,","we compute the mean for each box using the sample values."].join(" ")},sd:{valType:"data_array",editType:"calc",description:["Sets the standard deviation values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `sd` is not provided but a sample (in `y` or `x`) is set,","we compute the standard deviation for each box using the sample values."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the box(es).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc",description:["Sets the method used to compute the sample's Q1 and Q3 quartiles.","The *linear* method uses the 25th percentile for Q1 and 75th percentile for Q3","as computed using method #10 (listed on http://www.amstat.org/publications/jse/v14n3/langford.html).","The *exclusive* method uses the median to divide the ordered dataset into two halves","if the sample is odd, it does not include the median in either half -","Q1 is then the median of the lower half and","Q3 the median of the upper half.","The *inclusive* method also uses the median to divide the ordered dataset into two halves","but if the sample is odd, it includes the median in both halves -","Q1 is then the median of the lower half and","Q3 the median of the upper half."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"calc",description:["Sets the width of the box in data coordinate","If *0* (default value) the width is automatically selected based on the positions","of other box traces in the same subplot."].join(" ")},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style",description:"Sets the color of the outlier sample points."},symbol:My({},AA.symbol,{arrayOk:!1,editType:"plot"}),opacity:My({},AA.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:My({},AA.size,{arrayOk:!1,editType:"calc"}),color:My({},AA.color,{arrayOk:!1,editType:"style"}),line:{color:My({},zae.color,{arrayOk:!1,dflt:SBe.defaultLine,editType:"style"}),width:My({},zae.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style",description:["Sets the border line color of the outlier sample points.","Defaults to marker.color"].join(" ")},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style",description:["Sets the border line width (in px) of the outlier sample points."].join(" ")},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the box(es)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the box(es)."},editType:"plot"},fillcolor:$v.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc",description:["Sets the width of the whiskers relative to","the box' width.","For example, with 1, the whiskers are as wide as the box(es)."].join(" ")},offsetgroup:Dae.offsetgroup,alignmentgroup:Dae.alignmentgroup,selected:{marker:$v.selected.marker,editType:"style"},unselected:{marker:$v.unselected.marker,editType:"style"},text:My({},$v.text,{description:["Sets the text elements associated with each sample value.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertext:My({},$v.hovertext,{description:"Same as `text`."}),hovertemplate:MBe({description:["N.B. This only has an effect when hovering on points."].join(" ")}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style",description:["Do the hover effects highlight individual boxes ","or sample points or both?"].join(" ")}},CC={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how boxes at the same location coordinate","are displayed on the graph.","If *group*, the boxes are plotted next to one another","centered around the shared location.","If *overlay*, the boxes are plotted over one another,","you might need to set *opacity* to see them multiple boxes.","Has no effect on traces that have *width* set."].join(" ")},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")}},Uv=bt.exports,kBe=Pa,EBe=Oa.exports,CBe=a0,LBe=ch.handleGroupingDefaults,Fae=yT,SA=EC;function PBe(e,t,r,a){function n(h,v){return Uv.coerce(e,t,SA,h,v)}if(Oae(e,t,n,a),t.visible!==!1){CBe(e,t,a,n),n("xhoverformat"),n("yhoverformat");var o=t._hasPreCompStats;o&&(n("lowerfence"),n("upperfence")),n("line.color",(e.marker||{}).color||r),n("line.width"),n("fillcolor",EBe.addOpacity(t.line.color,.5));var i=!1;if(o){var s=n("mean"),l=n("sd");s&&s.length&&(i=!0,l&&l.length&&(i="sd"))}n("boxmean",i),n("whiskerwidth"),n("width"),n("quartilemethod");var u=!1;if(o){var f=n("notchspan");f&&f.length&&(u=!0)}else Uv.validate(e.notchwidth,SA.notchwidth)&&(u=!0);var c=n("notched",u);c&&n("notchwidth"),Nae(e,t,n,{prefix:"box"})}}function Oae(e,t,r,a){function n(L){var C=0;return L&&L.length&&(C+=1,Uv.isArrayOrTypedArray(L[0])&&L[0].length&&(C+=1)),C}function o(L){return Uv.validate(e[L],SA[L])}var i=r("y"),s=r("x"),l;if(t.type==="box"){var u=r("q1"),f=r("median"),c=r("q3");t._hasPreCompStats=u&&u.length&&f&&f.length&&c&&c.length,l=Math.min(Uv.minRowLength(u),Uv.minRowLength(f),Uv.minRowLength(c))}var h=n(i),v=n(s),p=h&&Uv.minRowLength(i),d=v&&Uv.minRowLength(s),g=a.calendar,m={autotypenumbers:a.autotypenumbers},y,_;if(t._hasPreCompStats)switch(String(v)+String(h)){case"00":var S=o("x0")||o("dx"),M=o("y0")||o("dy");M&&!S?y="h":y="v",_=l;break;case"10":y="v",_=Math.min(l,d);break;case"20":y="h",_=Math.min(l,s.length);break;case"01":y="h",_=Math.min(l,p);break;case"02":y="v",_=Math.min(l,i.length);break;case"12":y="v",_=Math.min(l,d,i.length);break;case"21":y="h",_=Math.min(l,s.length,p);break;case"11":_=0;break;case"22":var w=!1,A;for(A=0;A<s.length;A++)if(Fae(s[A],g,m)==="category"){w=!0;break}if(w)y="v",_=Math.min(l,d,i.length);else{for(A=0;A<i.length;A++)if(Fae(i[A],g,m)==="category"){w=!0;break}w?(y="h",_=Math.min(l,s.length,p)):(y="v",_=Math.min(l,d,i.length))}break}else h>0?(y="v",v>0?_=Math.min(d,p):_=Math.min(p)):v>0?(y="h",_=Math.min(d)):_=0;if(!_){t.visible=!1;return}t._length=_;var k=r("orientation",y);t._hasPreCompStats?k==="v"&&v===0?(r("x0",0),r("dx",1)):k==="h"&&h===0&&(r("y0",0),r("dy",1)):k==="v"&&v===0?r("x0"):k==="h"&&h===0&&r("y0");var T=kBe.getComponentMethod("calendars","handleTraceDefaults");T(e,t,["x","y"],a)}function Nae(e,t,r,a){var n=a.prefix,o=Uv.coerce2(e,t,SA,"marker.outliercolor"),i=r("marker.line.outliercolor"),s="outliers";t._hasPreCompStats?s="all":(o||i)&&(s="suspectedoutliers");var l=r(n+"points",s);l?(r("jitter",l==="all"?.3:0),r("pointpos",l==="all"?-1.5:0),r("marker.symbol"),r("marker.opacity"),r("marker.size"),r("marker.color",t.line.color),r("marker.line.color"),r("marker.line.width"),l==="suspectedoutliers"&&(r("marker.line.outliercolor",t.marker.color),r("marker.line.outlierwidth")),r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size"),r("text"),r("hovertext")):delete t.marker;var u=r("hoveron");(u==="all"||u.indexOf("points")!==-1)&&r("hovertemplate"),Uv.coerceSelectionMarkerOpacity(t,r)}function IBe(e,t){var r,a;function n(s){return Uv.coerce(a._input,a,SA,s)}for(var o=0;o<e.length;o++){a=e[o];var i=a.type;(i==="box"||i==="violin")&&(r=a._input,t[i+"mode"]==="group"&&LBe(r,a,t,n))}}var LC={supplyDefaults:PBe,crossTraceDefaults:IBe,handleSampleDefaults:Oae,handlePointsDefaults:Nae},DBe=Pa,RBe=bt.exports,zBe=CC;function Bae(e,t,r,a,n){for(var o=n+"Layout",i=!1,s=0;s<r.length;s++){var l=r[s];if(DBe.traceIs(l,o)){i=!0;break}}!i||(a(n+"mode"),a(n+"gap"),a(n+"groupgap"))}function FBe(e,t,r){function a(n,o){return RBe.coerce(e,t,zBe,n,o)}Bae(e,t,r,a,"box")}var x7={supplyLayoutDefaults:FBe,_supply:Bae},b7=gn,PC=rn.exports,OBe=o0,cl=bt.exports,ev=Un.BADNUM,Zg=cl._,$ae=function(t,r){var a=t._fullLayout,n=PC.getFromId(t,r.xaxis||"x"),o=PC.getFromId(t,r.yaxis||"y"),i=[],s=r.type==="violin"?"_numViolins":"_numBoxes",l,u,f,c,h,v,p;r.orientation==="h"?(f=n,c="x",h=o,v="y",p=!!r.yperiodalignment):(f=o,c="y",h=n,v="x",p=!!r.xperiodalignment);var d=NBe(r,v,h,a[s]),g=d[0],m=d[1],y=cl.distinctVals(g,h),_=y.vals,S=y.minDiff/2,M,w,A,k,T,L,C=(r.boxpoints||r.points)==="all"?cl.identity:function(Ee){return Ee.v<M.lf||Ee.v>M.uf};if(r._hasPreCompStats){var I=r[c],R=function(Ee){return f.d2c((r[Ee]||[])[l])},B=1/0,N=-1/0;for(l=0;l<r._length;l++){var D=g[l];if(!!b7(D)){if(M={},M.pos=M[v]=D,p&&m&&(M.orig_p=m[l]),M.q1=R("q1"),M.med=R("median"),M.q3=R("q3"),w=[],I&&cl.isArrayOrTypedArray(I[l]))for(u=0;u<I[l].length;u++)L=f.d2c(I[l][u]),L!==ev&&(T={v:L,i:[l,u]},Uae(T,r,[l,u]),w.push(T));if(M.pts=w.sort(Hae),A=M[c]=w.map(Gae),k=A.length,M.med!==ev&&M.q1!==ev&&M.q3!==ev&&M.med>=M.q1&&M.q3>=M.med){var O=R("lowerfence");M.lf=O!==ev&&O<=M.q1?O:Vae(M,A,k);var $=R("upperfence");M.uf=$!==ev&&$>=M.q3?$:jae(M,A,k);var Y=R("mean");M.mean=Y!==ev?Y:k?cl.mean(A,k):(M.q1+M.q3)/2;var X=R("sd");M.sd=Y!==ev&&X>=0?X:k?cl.stdev(A,k,M.mean):M.q3-M.q1,M.lo=qae(M),M.uo=Yae(M);var ee=R("notchspan");ee=ee!==ev&&ee>0?ee:Wae(M,k),M.ln=M.med-ee,M.un=M.med+ee;var Q=M.lf,Z=M.uf;r.boxpoints&&A.length&&(Q=Math.min(Q,A[0]),Z=Math.max(Z,A[k-1])),r.notched&&(Q=Math.min(Q,M.ln),Z=Math.max(Z,M.un)),M.min=Q,M.max=Z}else{cl.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+M.q1,"median = "+M.med,"q3 = "+M.q3].join(`
`));var q;M.med!==ev?q=M.med:M.q1!==ev?M.q3!==ev?q=(M.q1+M.q3)/2:q=M.q1:M.q3!==ev?q=M.q3:q=0,M.med=q,M.q1=M.q3=q,M.lf=M.uf=q,M.mean=M.sd=q,M.ln=M.un=q,M.min=M.max=q}B=Math.min(B,M.min),N=Math.max(N,M.max),M.pts2=w.filter(C),i.push(M)}}r._extremes[f._id]=PC.findExtremes(f,[B,N],{padded:!0})}else{var ae=f.makeCalcdata(r,c),ie=BBe(_,S),we=_.length,Te=$Be(we);for(l=0;l<r._length;l++)if(L=ae[l],!!b7(L)){var he=cl.findBin(g[l],ie);he>=0&&he<we&&(T={v:L,i:l},Uae(T,r,l),Te[he].push(T))}var xe=1/0,Se=-1/0,ye=r.quartilemethod,re=ye==="exclusive",se=ye==="inclusive";for(l=0;l<we;l++)if(Te[l].length>0){if(M={},M.pos=M[v]=_[l],w=M.pts=Te[l].sort(Hae),A=M[c]=w.map(Gae),k=A.length,M.min=A[0],M.max=A[k-1],M.mean=cl.mean(A,k),M.sd=cl.stdev(A,k,M.mean),M.med=cl.interp(A,.5),k%2&&(re||se)){var de,Me;re?(de=A.slice(0,k/2),Me=A.slice(k/2+1)):se&&(de=A.slice(0,k/2+1),Me=A.slice(k/2)),M.q1=cl.interp(de,.5),M.q3=cl.interp(Me,.5)}else M.q1=cl.interp(A,.25),M.q3=cl.interp(A,.75);M.lf=Vae(M,A,k),M.uf=jae(M,A,k),M.lo=qae(M),M.uo=Yae(M);var Ie=Wae(M,k);M.ln=M.med-Ie,M.un=M.med+Ie,xe=Math.min(xe,M.ln),Se=Math.max(Se,M.un),M.pts2=w.filter(C),i.push(M)}r._extremes[f._id]=PC.findExtremes(f,r.notched?ae.concat([xe,Se]):ae,{padded:!0})}return UBe(i,r),i.length>0?(i[0].t={num:a[s],dPos:S,posLetter:v,valLetter:c,labels:{med:Zg(t,"median:"),min:Zg(t,"min:"),q1:Zg(t,"q1:"),q3:Zg(t,"q3:"),max:Zg(t,"max:"),mean:r.boxmean==="sd"?Zg(t,"mean \xB1 \u03C3:"):Zg(t,"mean:"),lf:Zg(t,"lower fence:"),uf:Zg(t,"upper fence:")}},a[s]++,i):[{t:{empty:!0}}]};function NBe(e,t,r,a){var n=t in e,o=t+"0"in e,i="d"+t in e;if(n||o&&i){var s=r.makeCalcdata(e,t),l=OBe(e,r,t,s).vals;return[l,s]}var u;o?u=e[t+"0"]:"name"in e&&(r.type==="category"||b7(e.name)&&["linear","log"].indexOf(r.type)!==-1||cl.isDateTime(e.name)&&r.type==="date")?u=e.name:u=a;for(var f=r.type==="multicategory"?r.r2c_just_indices(u):r.d2c(u,0,e[t+"calendar"]),c=e._length,h=new Array(c),v=0;v<c;v++)h[v]=f;return[h]}function BBe(e,t){for(var r=e.length,a=new Array(r+1),n=0;n<r;n++)a[n]=e[n]-t;return a[r]=e[r-1]+t,a}function $Be(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[];return t}var _7={text:"tx",hovertext:"htx"};function Uae(e,t,r){for(var a in _7)cl.isArrayOrTypedArray(t[a])&&(Array.isArray(r)?cl.isArrayOrTypedArray(t[a][r[0]])&&(e[_7[a]]=t[a][r[0]][r[1]]):e[_7[a]]=t[a][r])}function UBe(e,t){if(cl.isArrayOrTypedArray(t.selectedpoints))for(var r=0;r<e.length;r++){for(var a=e[r].pts||[],n={},o=0;o<a.length;o++)n[a[o].i]=o;cl.tagSelected(a,t,n)}}function Hae(e,t){return e.v-t.v}function Gae(e){return e.v}function Vae(e,t,r){return r===0?e.q1:Math.min(e.q1,t[Math.min(cl.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,r-1)])}function jae(e,t,r){return r===0?e.q3:Math.max(e.q3,t[Math.max(cl.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function qae(e){return 4*e.q1-3*e.q3}function Yae(e){return 4*e.q3-3*e.q1}function Wae(e,t){return t===0?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}var Xae=rn.exports,HBe=bt.exports,GBe=qd.getAxisGroup,Zae=["v","h"];function VBe(e,t){for(var r=e.calcdata,a=t.xaxis,n=t.yaxis,o=0;o<Zae.length;o++){for(var i=Zae[o],s=i==="h"?n:a,l=[],u=0;u<r.length;u++){var f=r[u],c=f[0].t,h=f[0].trace;h.visible===!0&&(h.type==="box"||h.type==="candlestick")&&!c.empty&&(h.orientation||"v")===i&&h.xaxis===a._id&&h.yaxis===n._id&&l.push(u)}Kae("box",e,l,s)}}function Kae(e,t,r,a){var n=t.calcdata,o=t._fullLayout,i=a._id,s=i.charAt(0),l,u,f,c=[],h=0;for(l=0;l<r.length;l++)for(f=n[r[l]],u=0;u<f.length;u++)c.push(a.c2l(f[u].pos,!0)),h+=(f[u].pts2||[]).length;if(!!c.length){var v=HBe.distinctVals(c);(a.type==="category"||a.type==="multicategory")&&(v.minDiff=1);var p=v.minDiff/2;Xae.minDtick(a,v.minDiff,v.vals[0],!0);var d=e==="violin"?"_numViolins":"_numBoxes",g=o[d],m=o[e+"mode"]==="group"&&g>1,y=1-o[e+"gap"],_=1-o[e+"groupgap"];for(l=0;l<r.length;l++){f=n[r[l]];var S=f[0].trace,M=f[0].t,w=S.width,A=S.side,k,T,L,C;if(w)k=T=C=w/2,L=0;else if(k=p,m){var I=GBe(o,a._id)+S.orientation,R=o._alignmentOpts[I]||{},B=R[S.alignmentgroup]||{},N=Object.keys(B.offsetGroups||{}).length,D=N||g,O=N?S._offsetIndex:M.num;T=k*y*_/D,L=2*k*(-.5+(O+.5)/D)*y,C=k*y/D}else T=k*y*_,L=0,C=k;M.dPos=k,M.bPos=L,M.bdPos=T,M.wHover=C;var $,Y,X=L+T,ee,Q,Z,q,ae,ie,we=Boolean(w),Te=(S.boxpoints||S.points)&&h>0;if(A==="positive"?($=k*(w?1:.5),ee=X,Y=ee=L):A==="negative"?($=ee=L,Y=k*(w?1:.5),Q=X):($=Y=k,ee=Q=X),Te){var he=S.pointpos,xe=S.jitter,Se=S.marker.size/2,ye=0;he+xe>=0&&(ye=X*(he+xe),ye>$?(we=!0,ae=Se,Z=ye):ye>ee&&(ae=Se,Z=$)),ye<=$&&(Z=$);var re=0;he-xe<=0&&(re=-X*(he-xe),re>Y?(we=!0,ie=Se,q=re):re>Q&&(ie=Se,q=Y)),re<=Y&&(q=Y)}else Z=$,q=Y;var se=new Array(f.length);for(u=0;u<f.length;u++)se[u]=f[u].pos;S._extremes[i]=Xae.findExtremes(a,se,{padded:we,vpadminus:q,vpadplus:Z,vpadLinearized:!0,ppadminus:{x:ie,y:ae}[s],ppadplus:{x:ae,y:ie}[s]})}}}var w7={crossTraceCalc:VBe,setPositionOffset:Kae},MA=Ra.exports,zx=bt.exports,jBe=xn.exports,Jae=5,qBe=.01;function YBe(e,t,r,a){var n=t.xaxis,o=t.yaxis;zx.makeTraceGroups(a,r,"trace boxes").each(function(i){var s=MA.select(this),l=i[0],u=l.t,f=l.trace;if(u.wdPos=u.bdPos*f.whiskerwidth,f.visible!==!0||u.empty){s.remove();return}var c,h;f.orientation==="h"?(c=o,h=n):(c=n,h=o),Qae(s,{pos:c,val:h},f,u),ene(s,{x:n,y:o},f,u),tne(s,{pos:c,val:h},f,u)})}function Qae(e,t,r,a){var n=r.orientation==="h",o=t.val,i=t.pos,s=!!i.rangebreaks,l=a.bPos,u=a.wdPos||0,f=a.bPosPxOffset||0,c=r.whiskerwidth||0,h=r.notched||!1,v=h?1-2*r.notchwidth:1,p,d;Array.isArray(a.bdPos)?(p=a.bdPos[0],d=a.bdPos[1]):(p=a.bdPos,d=a.bdPos);var g=e.selectAll("path.box").data(r.type!=="violin"||r.box.visible?zx.identity:[]);g.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),g.exit().remove(),g.each(function(m){if(m.empty)return"M0,0Z";var y=i.c2l(m.pos+l,!0),_=i.l2p(y-p)+f,S=i.l2p(y+d)+f,M=s?(_+S)/2:i.l2p(y)+f,w=r.whiskerwidth,A=s?_*w+(1-w)*M:i.l2p(y-u)+f,k=s?S*w+(1-w)*M:i.l2p(y+u)+f,T=i.l2p(y-p*v)+f,L=i.l2p(y+d*v)+f,C=o.c2p(m.q1,!0),I=o.c2p(m.q3,!0),R=zx.constrain(o.c2p(m.med,!0),Math.min(C,I)+1,Math.max(C,I)-1),B=m.lf===void 0||r.boxpoints===!1,N=o.c2p(B?m.min:m.lf,!0),D=o.c2p(B?m.max:m.uf,!0),O=o.c2p(m.ln,!0),$=o.c2p(m.un,!0);n?MA.select(this).attr("d","M"+R+","+T+"V"+L+"M"+C+","+_+"V"+S+(h?"H"+O+"L"+R+","+L+"L"+$+","+S:"")+"H"+I+"V"+_+(h?"H"+$+"L"+R+","+T+"L"+O+","+_:"")+"ZM"+C+","+M+"H"+N+"M"+I+","+M+"H"+D+(c===0?"":"M"+N+","+A+"V"+k+"M"+D+","+A+"V"+k)):MA.select(this).attr("d","M"+T+","+R+"H"+L+"M"+_+","+C+"H"+S+(h?"V"+O+"L"+L+","+R+"L"+S+","+$:"")+"V"+I+"H"+_+(h?"V"+$+"L"+T+","+R+"L"+_+","+O:"")+"ZM"+M+","+C+"V"+N+"M"+M+","+I+"V"+D+(c===0?"":"M"+A+","+N+"H"+k+"M"+A+","+D+"H"+k))})}function ene(e,t,r,a){var n=t.x,o=t.y,i=a.bdPos,s=a.bPos,l=r.boxpoints||r.points;zx.seedPseudoRandom();var u=function(h){return h.forEach(function(v){v.t=a,v.trace=r}),h},f=e.selectAll("g.points").data(l?u:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var c=f.selectAll("path").data(function(h){var v,p=h.pts2,d=Math.max((h.max-h.min)/10,h.q3-h.q1),g=d*1e-9,m=d*qBe,y=[],_=0,S;if(r.jitter){if(d===0)for(_=1,y=new Array(p.length),v=0;v<p.length;v++)y[v]=1;else for(v=0;v<p.length;v++){var M=Math.max(0,v-Jae),w=p[M].v,A=Math.min(p.length-1,v+Jae),k=p[A].v;l!=="all"&&(p[v].v<h.lf?k=Math.min(k,h.lf):w=Math.max(w,h.uf));var T=Math.sqrt(m*(A-M)/(k-w+g))||0;T=zx.constrain(Math.abs(T),0,1),y.push(T),_=Math.max(T,_)}S=r.jitter*2/(_||1)}for(v=0;v<p.length;v++){var L=p[v],C=L.v,I=r.jitter?S*y[v]*(zx.pseudoRandom()-.5):0,R=h.pos+s+i*(r.pointpos+I);r.orientation==="h"?(L.y=R,L.x=C):(L.x=R,L.y=C),l==="suspectedoutliers"&&C<h.uo&&C>h.lo&&(L.so=!0)}return p});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(jBe.translatePoints,n,o)}function tne(e,t,r,a){var n=t.val,o=t.pos,i=!!o.rangebreaks,s=a.bPos,l=a.bPosPxOffset||0,u=r.boxmean||(r.meanline||{}).visible,f,c;Array.isArray(a.bdPos)?(f=a.bdPos[0],c=a.bdPos[1]):(f=a.bdPos,c=a.bdPos);var h=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box.visible&&r.meanline.visible?zx.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(v){var p=o.c2l(v.pos+s,!0),d=o.l2p(p-f)+l,g=o.l2p(p+c)+l,m=i?(d+g)/2:o.l2p(p)+l,y=n.c2p(v.mean,!0),_=n.c2p(v.mean-v.sd,!0),S=n.c2p(v.mean+v.sd,!0);r.orientation==="h"?MA.select(this).attr("d","M"+y+","+d+"V"+g+(u==="sd"?"m0,0L"+_+","+m+"L"+y+","+d+"L"+S+","+m+"Z":"")):MA.select(this).attr("d","M"+d+","+y+"H"+g+(u==="sd"?"m0,0L"+m+","+_+"L"+d+","+y+"L"+m+","+S+"Z":""))})}var T7={plot:YBe,plotBoxAndWhiskers:Qae,plotPoints:ene,plotBoxMean:tne},A7=Ra.exports,S7=Oa.exports,M7=xn.exports;function WBe(e,t,r){var a=r||A7.select(e).selectAll("g.trace.boxes");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var o=A7.select(this),i=n[0].trace,s=i.line.width;function l(c,h,v,p){c.style("stroke-width",h+"px").call(S7.stroke,v).call(S7.fill,p)}var u=o.selectAll("path.box");if(i.type==="candlestick")u.each(function(c){if(!c.empty){var h=A7.select(this),v=i[c.dir];l(h,v.line.width,v.line.color,v.fillcolor),h.style("opacity",i.selectedpoints&&!c.selected?.3:1)}});else{l(u,s,i.line.color,i.fillcolor),o.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(S7.stroke,i.line.color);var f=o.selectAll("path.point");M7.pointStyle(f,i,e)}})}function XBe(e,t,r){var a=t[0].trace,n=r.selectAll("path.point");a.selectedpoints?M7.selectedPointStyle(n,a):M7.pointStyle(n,a,e)}var k7={style:WBe,styleOnSelect:XBe},ZBe=rn.exports,E7=bt.exports,ky=Rs,rne=Oa.exports,KBe=E7.fillText;function JBe(e,t,r,a){var n=e.cd,o=n[0].trace,i=o.hoveron,s=[],l;return i.indexOf("boxes")!==-1&&(s=s.concat(ane(e,t,r,a))),i.indexOf("points")!==-1&&(l=nne(e,t,r)),a==="closest"?l?[l]:s:(l&&s.push(l),s)}function ane(e,t,r,a){var n=e.cd,o=e.xa,i=e.ya,s=n[0].trace,l=n[0].t,u=s.type==="violin",f=[],c,h,v,p,d,g,m,y,_,S,M,w=l.bdPos,A,k,T=l.wHover,L=function(ie){return v.c2l(ie.pos)+l.bPos-v.c2l(g)};u&&s.side!=="both"?(s.side==="positive"&&(_=function(ie){var we=L(ie);return ky.inbox(we,we+T,S)},A=w,k=0),s.side==="negative"&&(_=function(ie){var we=L(ie);return ky.inbox(we-T,we,S)},A=0,k=w)):(_=function(ie){var we=L(ie);return ky.inbox(we-T,we+T,S)},A=k=w);var C;u?C=function(ie){return ky.inbox(ie.span[0]-d,ie.span[1]-d,S)}:C=function(ie){return ky.inbox(ie.min-d,ie.max-d,S)},s.orientation==="h"?(d=t,g=r,m=C,y=_,c="y",v=i,h="x",p=o):(d=r,g=t,m=_,y=C,c="x",v=o,h="y",p=i);var I=Math.min(1,w/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));S=e.maxHoverDistance-I,M=e.maxSpikeDistance-I;function R(ie){return(m(ie)+y(ie))/2}var B=ky.getDistanceFunction(a,m,y,R);if(ky.getClosest(n,B,e),e.index===!1)return[];var N=n[e.index],D=s.line.color,O=(s.marker||{}).color;rne.opacity(D)&&s.line.width?e.color=D:rne.opacity(O)&&s.boxpoints?e.color=O:e.color=s.fillcolor,e[c+"0"]=v.c2p(N.pos+l.bPos-k,!0),e[c+"1"]=v.c2p(N.pos+l.bPos+A,!0),e[c+"LabelVal"]=N.orig_p!==void 0?N.orig_p:N.pos;var $=c+"Spike";e.spikeDistance=R(N)*M/S,e[$]=v.c2p(N.pos,!0);var Y={},X=["med","q1","q3","min","max"];(s.boxmean||(s.meanline||{}).visible)&&X.push("mean"),(s.boxpoints||s.points)&&X.push("lf","uf");for(var ee=0;ee<X.length;ee++){var Q=X[ee];if(!(!(Q in N)||N[Q]in Y)){Y[N[Q]]=!0;var Z=N[Q],q=p.c2p(Z,!0),ae=E7.extendFlat({},e);ae.attr=Q,ae[h+"0"]=ae[h+"1"]=q,ae[h+"LabelVal"]=Z,ae[h+"Label"]=(l.labels?l.labels[Q]+" ":"")+ZBe.hoverLabelText(p,Z,s[h+"hoverformat"]),ae.hoverOnBox=!0,Q==="mean"&&"sd"in N&&s.boxmean==="sd"&&(ae[h+"err"]=N.sd),e.name="",e.spikeDistance=void 0,e[$]=void 0,ae.hovertemplate=!1,f.push(ae)}}return f}function nne(e,t,r){for(var a=e.cd,n=e.xa,o=e.ya,i=a[0].trace,s=n.c2p(t),l=o.c2p(r),u,f=function(L){var C=Math.max(3,L.mrc||0);return Math.max(Math.abs(n.c2p(L.x)-s)-C,1-3/C)},c=function(L){var C=Math.max(3,L.mrc||0);return Math.max(Math.abs(o.c2p(L.y)-l)-C,1-3/C)},h=ky.quadrature(f,c),v=!1,p,d,g=0;g<a.length;g++){p=a[g];for(var m=0;m<(p.pts||[]).length;m++){d=p.pts[m];var y=h(d);y<=e.distance&&(e.distance=y,v=[g,m])}}if(!v)return!1;p=a[v[0]],d=p.pts[v[1]];var _=n.c2p(d.x,!0),S=o.c2p(d.y,!0),M=d.mrc||1;u=E7.extendFlat({},e,{index:d.i,color:(i.marker||{}).color,name:i.name,x0:_-M,x1:_+M,y0:S-M,y1:S+M,spikeDistance:e.distance,hovertemplate:i.hovertemplate});var w=p.orig_p,A=w!==void 0?w:p.pos,k;i.orientation==="h"?(k=o,u.xLabelVal=d.x,u.yLabelVal=A):(k=n,u.xLabelVal=A,u.yLabelVal=d.y);var T=k._id.charAt(0);return u[T+"Spike"]=k.c2p(p.pos,!0),KBe(d,i,u),u}var ine={hoverPoints:JBe,hoverOnBoxes:ane,hoverOnPoints:nne},QBe=function(t,r){return r.hoverOnBox&&(t.hoverOnBox=r.hoverOnBox),"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t},one=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s,l;if(r===!1)for(s=0;s<a.length;s++)for(l=0;l<(a[s].pts||[]).length;l++)a[s].pts[l].selected=0;else for(s=0;s<a.length;s++)for(l=0;l<(a[s].pts||[]).length;l++){var u=a[s].pts[l],f=n.c2p(u.x),c=o.c2p(u.y);r.contains([f,c],null,u.i,t)?(i.push({pointNumber:u.i,x:n.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0}return i},e$e={attributes:EC,layoutAttributes:CC,supplyDefaults:LC.supplyDefaults,crossTraceDefaults:LC.crossTraceDefaults,supplyLayoutDefaults:x7.supplyLayoutDefaults,calc:$ae,crossTraceCalc:w7.crossTraceCalc,plot:T7.plot,style:k7.style,styleOnSelect:k7.styleOnSelect,hoverPoints:ine.hoverPoints,eventData:QBe,selectPoints:one,moduleType:"trace",name:"box",basePlotModule:Ii,categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{description:["Each box spans from quartile 1 (Q1) to quartile 3 (Q3).","The second quartile (Q2, i.e. the median) is marked by a line inside the box.","The fences grow outward from the boxes' edges,","by default they span +/- 1.5 times the interquartile range (IQR: Q3-Q1),","The sample mean and standard deviation as well as notches and","the sample, outlier and suspected outliers points can be optionally","added to the box plot.","The values and positions corresponding to each boxes can be input","using two signatures.","The first signature expects users to supply the sample values in the `y`","data array for vertical boxes (`x` for horizontal boxes).","By supplying an `x` (`y`) array, one box per distinct `x` (`y`) value is drawn","If no `x` (`y`) {array} is provided, a single box is drawn.","In this case, the box is positioned with the trace `name` or with `x0` (`y0`) if provided.","The second signature expects users to supply the boxes corresponding Q1, median and Q3","statistics in the `q1`, `median` and `q3` data arrays respectively.","Other box features relying on statistics namely `lowerfence`, `upperfence`, `notchspan`","can be set directly by the users.","To have plotly compute them or to show sample points besides the boxes,","users can set the `y` data array for vertical boxes (`x` for horizontal boxes)","to a 2D array with the outer length corresponding","to the number of boxes in the traces and the inner length corresponding the sample size."].join(" ")}},t$e=e$e,Hv=Cl,r$e=ao,a$e=Ts,C7=Ss.axisHoverFormat,n$e=zn.hovertemplateAttrs,i$e=zn.texttemplateAttrs,o$e=bo,hh=cn.extendFlat,T2=hh({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:hh({},Hv.x,{impliedEdits:{xtype:"array"}}),x0:hh({},Hv.x0,{impliedEdits:{xtype:"scaled"}}),dx:hh({},Hv.dx,{impliedEdits:{xtype:"scaled"}}),y:hh({},Hv.y,{impliedEdits:{ytype:"array"}}),y0:hh({},Hv.y0,{impliedEdits:{ytype:"scaled"}}),dy:hh({},Hv.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:hh({},Hv.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:hh({},Hv.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:hh({},Hv.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:hh({},Hv.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:hh({},Hv.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:hh({},Hv.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},xhoverformat:C7("x"),yhoverformat:C7("y"),zhoverformat:C7("z",1),hovertemplate:n$e(),texttemplate:i$e({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:a$e({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style",description:"Sets the text font."}),showlegend:hh({},r$e.showlegend,{dflt:!1})},{transforms:void 0},o$e("",{cLetter:"z",autoColorDflt:!1})),s$e=gn,IC=bt.exports,l$e=Pa,DC=function(t,r,a,n,o,i){var s=a("z");o=o||"x",i=i||"y";var l,u;if(s===void 0||!s.length)return 0;if(IC.isArray1D(t.z)){l=a(o),u=a(i);var f=IC.minRowLength(l),c=IC.minRowLength(u);if(f===0||c===0)return 0;r._length=Math.min(f,c,s.length)}else{if(l=sne(o,a),u=sne(i,a),!u$e(s))return 0;a("transpose"),r._length=null}if(t.type==="heatmapgl")return!0;var h=l$e.getComponentMethod("calendars","handleTraceDefaults");return h(t,r,[o,i],n),!0};function sne(e,t){var r=t(e),a=r?t(e+"type","array"):"scaled";return a==="scaled"&&(t(e+"0"),t("d"+e)),r}function u$e(e){for(var t=!0,r=!1,a=!1,n,o=0;o<e.length;o++){if(n=e[o],!IC.isArrayOrTypedArray(n)){t=!1;break}n.length>0&&(r=!0);for(var i=0;i<n.length;i++)if(s$e(n[i])){a=!0;break}}return t&&r&&a}var lne=bt.exports,RC=function(t,r){t("texttemplate");var a=lne.extendFlat({},r.font,{color:"auto",size:"auto"});lne.coerceFont(t,"textfont",a)},une=function(t,r,a){var n=a("zsmooth");n===!1&&(a("xgap"),a("ygap")),a("zhoverformat")},fne=bt.exports,f$e=DC,c$e=RC,h$e=a0,v$e=une,d$e=su,p$e=T2,g$e=function(t,r,a,n){function o(s,l){return fne.coerce(t,r,p$e,s,l)}var i=f$e(t,r,o,n);if(!i){r.visible=!1;return}h$e(t,r,n,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hovertemplate"),c$e(o,n),v$e(t,r,o),o("hoverongaps"),o("connectgaps",fne.isArray1D(r.z)&&r.zsmooth!==!1),d$e(t,r,n,o,{prefix:"",cLetter:"z"})},A2=gn,cne={count:function(e,t,r){return r[e]++,1},sum:function(e,t,r,a){var n=a[t];return A2(n)?(n=Number(n),r[e]+=n,n):0},avg:function(e,t,r,a,n){var o=a[t];return A2(o)&&(o=Number(o),r[e]+=o,n[e]++),0},min:function(e,t,r,a){var n=a[t];if(A2(n))if(n=Number(n),A2(r[e])){if(r[e]>n){var o=n-r[e];return r[e]=n,o}}else return r[e]=n,n;return 0},max:function(e,t,r,a){var n=a[t];if(A2(n))if(n=Number(n),A2(r[e])){if(r[e]<n){var o=n-r[e];return r[e]=n,o}}else return r[e]=n,n;return 0}},hne={percent:function(e,t){for(var r=e.length,a=100/t,n=0;n<r;n++)e[n]*=a},probability:function(e,t){for(var r=e.length,a=0;a<r;a++)e[a]/=t},density:function(e,t,r,a){var n=e.length;a=a||1;for(var o=0;o<n;o++)e[o]*=r[o]*a},"probability density":function(e,t,r,a){var n=e.length;a&&(t/=a);for(var o=0;o<n;o++)e[o]*=r[o]/t}},vne=function(t,r){for(var a=t.length,n=0,o=0;o<a;o++)r[o]?(t[o]/=r[o],n+=t[o]):t[o]=null;return n},S2=Un,Fx=S2.ONEAVGYEAR,dne=S2.ONEAVGMONTH,zC=S2.ONEDAY,pne=S2.ONEHOUR,gne=S2.ONEMIN,mne=S2.ONESEC,yne=rn.exports.tickIncrement,xne=function(t,r,a,n,o){var i=-1.1*r,s=-.1*r,l=t-s,u=a[0],f=a[1],c=Math.min(FC(u+s,u+l,n,o),FC(f+s,f+l,n,o)),h=Math.min(FC(u+i,u+s,n,o),FC(f+i,f+s,n,o)),v,p;if(c>h&&h<Math.abs(f-u)/4e3?(v=c,p=!1):(v=Math.min(c,h),p=!0),n.type==="date"&&v>zC){var d=v===Fx?1:6,g=v===Fx?"M12":"M1";return function(m,y){var _=n.c2d(m,Fx,o),S=_.indexOf("-",d);S>0&&(_=_.substr(0,S));var M=n.d2c(_,0,o);if(M<m){var w=yne(M,g,!1,o);(M+w)/2<m+t&&(M=w)}return y&&p?yne(M,g,!0,o):M}}return function(m,y){var _=v*Math.round(m/v);return _+v/10<m&&_+v*.9<m+t&&(_+=v),y&&p&&(_-=v),_}};function FC(e,t,r,a){if(e*t<=0)return 1/0;for(var n=Math.abs(t-e),o=r.type==="date",i=bne(n,o),s=0;s<10;s++){var l=bne(i*80,o);if(i===l)break;if(m$e(l,e,t,o,r,a))i=l;else break}return i}function bne(e,t){return t&&e>mne?e>zC?e>Fx*1.1?Fx:e>dne*1.1?dne:zC:e>pne?pne:e>gne?gne:mne:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function m$e(e,t,r,a,n,o){if(a&&e>zC){var i=_ne(t,n,o),s=_ne(r,n,o),l=e===Fx?0:1;return i[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function _ne(e,t,r){var a=t.c2d(e,Fx,r).split("-");return a[0]===""&&(a.unshift(),a[0]="-"+a[0]),a}var L7=gn,Df=bt.exports,wne=Pa,Gv=rn.exports,y$e=wC,Tne=cne,x$e=hne,b$e=vne,_$e=xne;function w$e(e,t){var r=[],a=[],n=Gv.getFromId(e,t.orientation==="h"?t.yaxis:t.xaxis),o=t.orientation==="h"?"y":"x",i={x:"y",y:"x"}[o],s=t[o+"calendar"],l=t.cumulative,u,f=P7(e,t,n,o),c=f[0],h=f[1],v=typeof c.size=="string",p=[],d=v?p:c,g=[],m=[],y=[],_=0,S=t.histnorm,M=t.histfunc,w=S.indexOf("density")!==-1,A,k,T;l.enabled&&w&&(S=S.replace(/ ?density$/,""),w=!1);var L=M==="max"||M==="min",C=L?null:0,I=Tne.count,R=x$e[S],B=!1,N=function(Se){return n.r2c(Se,0,s)},D;for(Df.isArrayOrTypedArray(t[i])&&M!=="count"&&(D=t[i],B=M==="avg",I=Tne[M]),u=N(c.start),k=N(c.end)+(u-Gv.tickIncrement(u,c.size,!1,s))/1e6;u<k&&r.length<1e6&&(A=Gv.tickIncrement(u,c.size,!1,s),r.push((u+A)/2),a.push(C),y.push([]),p.push(u),w&&g.push(1/(A-u)),B&&m.push(0),!(A<=u));)u=A;p.push(u),!v&&n.type==="date"&&(d={start:N(d.start),end:N(d.end),size:d.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var O=t["_"+o+"bingroup"],$={leftGap:1/0,rightGap:1/0};O&&(e._fullLayout._roundFnOpts[O]||(e._fullLayout._roundFnOpts[O]=$),$=e._fullLayout._roundFnOpts[O]);var Y=a.length,X=!0,ee=$.leftGap,Q=$.rightGap,Z={};for(u=0;u<h.length;u++){var q=h[u];T=Df.findBin(q,d),T>=0&&T<Y&&(_+=I(T,u,a,D,m),X&&y[T].length&&q!==h[y[T][0]]&&(X=!1),y[T].push(u),Z[u]=T,ee=Math.min(ee,q-p[T]),Q=Math.min(Q,p[T+1]-q))}$.leftGap=ee,$.rightGap=Q;var ae;X||(ae=function(Se,ye){return function(){var re=e._fullLayout._roundFnOpts[O];return _$e(re.leftGap,re.rightGap,p,n,s)(Se,ye)}}),B&&(_=b$e(a,m)),R&&R(a,_,g),l.enabled&&S$e(a,l.direction,l.currentbin);var ie=Math.min(r.length,a.length),we=[],Te=0,he=ie-1;for(u=0;u<ie;u++)if(a[u]){Te=u;break}for(u=ie-1;u>=Te;u--)if(a[u]){he=u;break}for(u=Te;u<=he;u++)if(L7(r[u])&&L7(a[u])){var xe={p:r[u],s:a[u],b:0};l.enabled||(xe.pts=y[u],X?xe.ph0=xe.ph1=y[u].length?h[y[u][0]]:r[u]:(t._computePh=!0,xe.ph0=ae(p[u]),xe.ph1=ae(p[u+1],!0))),we.push(xe)}return we.length===1&&(we[0].width1=Gv.tickIncrement(we[0].p,c.size,!1,s)-we[0].p),y$e(we,t),Df.isArrayOrTypedArray(t.selectedpoints)&&Df.tagSelected(we,t,Z),we}function P7(e,t,r,a,n){var o=a+"bins",i=e._fullLayout,s=t["_"+a+"bingroup"],l=i._histogramBinOpts[s],u=i.barmode==="overlay",f,c,h,v,p,d,g,m=function(ae){return r.r2c(ae,0,v)},y=function(ae){return r.c2r(ae,0,v)},_=r.type==="date"?function(ae){return ae||ae===0?Df.cleanDate(ae,null,v):null}:function(ae){return L7(ae)?Number(ae):null};function S(ae,ie,we){ie[ae+"Found"]?(ie[ae]=_(ie[ae]),ie[ae]===null&&(ie[ae]=we[ae])):(d[ae]=ie[ae]=we[ae],Df.nestedProperty(c[0],o+"."+ae).set(we[ae]))}if(t["_"+a+"autoBinFinished"])delete t["_"+a+"autoBinFinished"];else{c=l.traces;var M=[],w=!0,A=!1,k=!1;for(f=0;f<c.length;f++)if(h=c[f],h.visible){var T=l.dirs[f];p=h["_"+T+"pos0"]=r.makeCalcdata(h,T),M=Df.concat(M,p),delete h["_"+a+"autoBinFinished"],t.visible===!0&&(w?w=!1:(delete h._autoBin,h["_"+a+"autoBinFinished"]=1),wne.traceIs(h,"2dMap")&&(A=!0),h.type==="histogram2dcontour"&&(k=!0))}v=c[0][a+"calendar"];var L=Gv.autoBin(M,r,l.nbins,A,v,l.sizeFound&&l.size),C=c[0]._autoBin={};if(d=C[l.dirs[0]]={},k&&(l.size||(L.start=y(Gv.tickIncrement(m(L.start),L.size,!0,v))),l.end===void 0&&(L.end=y(Gv.tickIncrement(m(L.end),L.size,!1,v)))),u&&!wne.traceIs(t,"2dMap")&&L._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"){if(n)return[L,p,!0];L=T$e(e,t,r,a,o)}g=h.cumulative||{},g.enabled&&g.currentbin!=="include"&&(g.direction==="decreasing"?L.start=y(Gv.tickIncrement(m(L.start),L.size,!0,v)):L.end=y(Gv.tickIncrement(m(L.end),L.size,!1,v))),l.size=L.size,l.sizeFound||(d.size=L.size,Df.nestedProperty(c[0],o+".size").set(L.size)),S("start",l,L),S("end",l,L)}p=t["_"+a+"pos0"],delete t["_"+a+"pos0"];var I=t._input[o]||{},R=Df.extendFlat({},l),B=l.start,N=r.r2l(I.start),D=N!==void 0;if((l.startFound||D)&&N!==r.r2l(B)){var O=D?N:Df.aggNums(Math.min,null,p),$={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:B,calendar:v,range:[O,Gv.tickIncrement(O,l.size,!1,v)].map(r.l2r)},Y=Gv.tickFirst($);Y>r.r2l(O)&&(Y=Gv.tickIncrement(Y,l.size,!0,v)),R.start=r.l2r(Y),D||Df.nestedProperty(t,o+".start").set(R.start)}var X=l.end,ee=r.r2l(I.end),Q=ee!==void 0;if((l.endFound||Q)&&ee!==r.r2l(X)){var Z=Q?ee:Df.aggNums(Math.max,null,p);R.end=r.l2r(Z),Q||Df.nestedProperty(t,o+".start").set(R.end)}var q="autobin"+a;return t._input[q]===!1&&(t._input[o]=Df.extendFlat({},t[o]||{}),delete t._input[q],delete t[q]),[R,p]}function T$e(e,t,r,a,n){var o=e._fullLayout,i=A$e(e,t),s=!1,l=1/0,u=[t],f,c,h;for(f=0;f<i.length;f++)if(c=i[f],c===t)s=!0;else if(!s)h=o._histogramBinOpts[c["_"+a+"bingroup"]],l=Math.min(l,h.size||c[n].size);else{var v=P7(e,c,r,a,!0),p=v[0],d=v[2];c["_"+a+"autoBinFinished"]=1,c["_"+a+"pos0"]=v[1],d?u.push(c):l=Math.min(l,p.size)}var g=new Array(u.length);for(f=0;f<u.length;f++)for(var m=u[f]["_"+a+"pos0"],y=0;y<m.length;y++)if(m[y]!==void 0){g[f]=m[y];break}for(isFinite(l)||(l=Df.distinctVals(g).minDiff),f=0;f<u.length;f++){c=u[f];var _=c[a+"calendar"],S={start:r.c2r(g[f]-l/2,0,_),end:r.c2r(g[f]+l/2,0,_),size:l};c._input[n]=c[n]=S,h=o._histogramBinOpts[c["_"+a+"bingroup"]],h&&Df.extendFlat(h,S)}return t[n]}function A$e(e,t){for(var r=t.xaxis,a=t.yaxis,n=t.orientation,o=[],i=e._fullData,s=0;s<i.length;s++){var l=i[s];l.type==="histogram"&&l.visible===!0&&l.orientation===n&&l.xaxis===r&&l.yaxis===a&&o.push(l)}return o}function S$e(e,t,r){var a,n,o;function i(l){o=e[l],e[l]/=2}function s(l){n=e[l],e[l]=o+n/2,o+=n}if(r==="half")if(t==="increasing")for(i(0),a=1;a<e.length;a++)s(a);else for(i(e.length-1),a=e.length-2;a>=0;a--)s(a);else if(t==="increasing"){for(a=1;a<e.length;a++)e[a]+=e[a-1];r==="exclude"&&(e.unshift(0),e.pop())}else{for(a=e.length-2;a>=0;a--)e[a]+=e[a+1];r==="exclude"&&(e.push(0),e.shift())}}var Ane={calc:w$e,calcAllAutoBins:P7},Sne=bt.exports,M2=rn.exports,Mne=cne,M$e=hne,k$e=vne,E$e=xne,kne=Ane.calcAllAutoBins,C$e=function(t,r){var a=M2.getFromId(t,r.xaxis),n=M2.getFromId(t,r.yaxis),o=r.xcalendar,i=r.ycalendar,s=function($e){return a.r2c($e,0,o)},l=function($e){return n.r2c($e,0,i)},u=function($e){return a.c2r($e,0,o)},f=function($e){return n.c2r($e,0,i)},c,h,v,p,d=kne(t,r,a,"x"),g=d[0],m=d[1],y=kne(t,r,n,"y"),_=y[0],S=y[1],M=r._length;m.length>M&&m.splice(M,m.length-M),S.length>M&&S.splice(M,S.length-M);var w=[],A=[],k=[],T=typeof g.size=="string",L=typeof _.size=="string",C=[],I=[],R=T?C:g,B=L?I:_,N=0,D=[],O=[],$=r.histnorm,Y=r.histfunc,X=$.indexOf("density")!==-1,ee=Y==="max"||Y==="min",Q=ee?null:0,Z=Mne.count,q=M$e[$],ae=!1,ie=[],we=[],Te="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";Te&&Y!=="count"&&(ae=Y==="avg",Z=Mne[Y]);var he=g.size,xe=s(g.start),Se=s(g.end)+(xe-M2.tickIncrement(xe,he,!1,o))/1e6;for(c=xe;c<Se;c=M2.tickIncrement(c,he,!1,o))A.push(Q),C.push(c),ae&&k.push(0);C.push(c);var ye=A.length,re=(c-xe)/ye,se=u(xe+re/2),de=_.size,Me=l(_.start),Ie=l(_.end)+(Me-M2.tickIncrement(Me,de,!1,i))/1e6;for(c=Me;c<Ie;c=M2.tickIncrement(c,de,!1,i)){w.push(A.slice()),I.push(c);var Ee=new Array(ye);for(h=0;h<ye;h++)Ee[h]=[];O.push(Ee),ae&&D.push(k.slice())}I.push(c);var qe=w.length,be=(c-Me)/qe,oe=f(Me+be/2);X&&(ie=Ene(A.length,R,re,T),we=Ene(w.length,B,be,L)),!T&&a.type==="date"&&(R=Cne(s,R)),!L&&n.type==="date"&&(B=Cne(l,B));var ce=!0,ue=!0,Re=new Array(ye),Xe=new Array(qe),Ke=1/0,vt=1/0,Ze=1/0,Qe=1/0;for(c=0;c<M;c++){var Je=m[c],je=S[c];v=Sne.findBin(Je,R),p=Sne.findBin(je,B),v>=0&&v<ye&&p>=0&&p<qe&&(N+=Z(v,c,w[p],Te,D[p]),O[p][v].push(c),ce&&(Re[v]===void 0?Re[v]=Je:Re[v]!==Je&&(ce=!1)),ue&&(Xe[p]===void 0?Xe[p]=je:Xe[p]!==je&&(ue=!1)),Ke=Math.min(Ke,Je-C[v]),vt=Math.min(vt,C[v+1]-Je),Ze=Math.min(Ze,je-I[p]),Qe=Math.min(Qe,I[p+1]-je))}if(ae)for(p=0;p<qe;p++)N+=k$e(w[p],D[p]);if(q)for(p=0;p<qe;p++)q(w[p],N,ie,we[p]);return{x:m,xRanges:Lne(C,ce&&Re,Ke,vt,a,o),x0:se,dx:re,y:S,yRanges:Lne(I,ue&&Xe,Ze,Qe,n,i),y0:oe,dy:be,z:w,pts:O}};function Ene(e,t,r,a){var n=new Array(e),o;if(a)for(o=0;o<e;o++)n[o]=1/(t[o+1]-t[o]);else{var i=1/r;for(o=0;o<e;o++)n[o]=i}return n}function Cne(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function Lne(e,t,r,a,n,o){var i,s=e.length-1,l=new Array(s),u=E$e(r,a,e,n,o);for(i=0;i<s;i++){var f=(t||[])[i];l[i]=f===void 0?[u(e[i]),u(e[i+1],!0)]:[f,f]}return l}var l0=bt.exports,Pne=Un.BADNUM,Ine=o0,I7=function(t,r,a,n,o,i){var s=t._length,l=r.makeCalcdata(t,n),u=a.makeCalcdata(t,o);l=Ine(t,r,n,l).vals,u=Ine(t,a,o,u).vals;var f=t.text,c=f!==void 0&&l0.isArray1D(f),h=t.hovertext,v=h!==void 0&&l0.isArray1D(h),p,d,g=l0.distinctVals(l),m=g.vals,y=l0.distinctVals(u),_=y.vals,S=[],M,w,A=_.length,k=m.length;for(p=0;p<i.length;p++)S[p]=l0.init2dArray(A,k);c&&(M=l0.init2dArray(A,k)),v&&(w=l0.init2dArray(A,k));var T=l0.init2dArray(A,k);for(p=0;p<s;p++)if(l[p]!==Pne&&u[p]!==Pne){var L=l0.findBin(l[p]+g.minDiff/2,m),C=l0.findBin(u[p]+y.minDiff/2,_);for(d=0;d<i.length;d++){var I=i[d],R=t[I],B=S[d];B[C][L]=R[p],T[C][L]=p}c&&(M[C][L]=f[p]),v&&(w[C][L]=h[p])}for(t["_"+n]=m,t["_"+o]=_,d=0;d<i.length;d++)t["_"+i[d]]=S[d];c&&(t._text=M),v&&(t._hovertext=w),r&&r.type==="category"&&(t["_"+n+"CategoryMap"]=m.map(function(N){return r._categories[N]})),a&&a.type==="category"&&(t["_"+o+"CategoryMap"]=_.map(function(N){return a._categories[N]})),t._after2before=T},L$e=gn,P$e=bt.exports,OC=Un.BADNUM,D7=function(t,r,a,n){var o,i,s,l,u,f;function c(m){if(!!L$e(m))return+m}if(r&&r.transpose){for(o=0,u=0;u<t.length;u++)o=Math.max(o,t[u].length);if(o===0)return!1;s=function(m){return m.length},l=function(m,y,_){return(m[_]||[])[y]}}else o=t.length,s=function(m,y){return m[y].length},l=function(m,y,_){return(m[y]||[])[_]};var h=function(m,y,_){return y===OC||_===OC?OC:l(m,y,_)};function v(m){if(r&&r.type!=="carpet"&&r.type!=="contourcarpet"&&m&&m.type==="category"&&r["_"+m._id.charAt(0)].length){var y=m._id.charAt(0),_={},S=r["_"+y+"CategoryMap"]||r[y];for(u=0;u<S.length;u++)_[S[u]]=u;return function(M){var w=_[m._categories[M]];return w+1?w:OC}}else return P$e.identity}var p=v(a),d=v(n);n&&n.type==="category"&&(o=n._categories.length);var g=new Array(o);for(u=0;u<o;u++)for(a&&a.type==="category"?i=a._categories.length:i=s(t,u),g[u]=new Array(i),f=0;f<i;f++)g[u][f]=c(h(t,d(u),p(f)));return g},I$e=bt.exports,Dne=.01,D$e=[[-1,0],[1,0],[0,-1],[0,1]];function R$e(e){return .5-.25*Math.min(1,e*.5)}var R7=function(t,r){var a=1,n;for(Rne(t,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&a>Dne;n++)a=Rne(t,r,R$e(a));return a>Dne&&I$e.log("interp2d didn't converge quickly",a),t};function Rne(e,t,r){var a=0,n,o,i,s,l,u,f,c,h,v,p,d,g;for(s=0;s<t.length;s++){for(n=t[s],o=n[0],i=n[1],p=e[o][i],v=0,h=0,l=0;l<4;l++)u=D$e[l],f=e[o+u[0]],!!f&&(c=f[i+u[1]],c!==void 0&&(v===0?d=g=c:(d=Math.min(d,c),g=Math.max(g,c)),h++,v+=c));if(h===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[o][i]=v/h,p===void 0?h<4&&(a=1):(e[o][i]=(1+r)*e[o][i]-r*p,g>d&&(a=Math.max(a,Math.abs(e[o][i]-p)/(g-d))))}return a}var z$e=bt.exports.maxRowLength,z7=function(t){var r=[],a={},n=[],o=t[0],i=[],s=[0,0,0],l=z$e(t),u,f,c,h,v,p,d,g;for(f=0;f<t.length;f++)for(u=i,i=o,o=t[f+1]||[],c=0;c<l;c++)i[c]===void 0&&(p=(i[c-1]!==void 0?1:0)+(i[c+1]!==void 0?1:0)+(u[c]!==void 0?1:0)+(o[c]!==void 0?1:0),p?(f===0&&p++,c===0&&p++,f===t.length-1&&p++,c===i.length-1&&p++,p<4&&(a[[f,c]]=[f,c,p]),r.push([f,c,p])):n.push([f,c]));for(;n.length;){for(d={},g=!1,v=n.length-1;v>=0;v--)h=n[v],f=h[0],c=h[1],p=((a[[f-1,c]]||s)[2]+(a[[f+1,c]]||s)[2]+(a[[f,c-1]]||s)[2]+(a[[f,c+1]]||s)[2])/20,p&&(d[h]=[f,c,p],n.splice(v,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(h in d)a[h]=d[h],r.push(d[h])}return r.sort(function(m,y){return y[2]-m[2]})},F7=Pa,zne=bt.exports.isArrayOrTypedArray,Fne=function(t,r,a,n,o,i){var s=[],l=F7.traceIs(t,"contour"),u=F7.traceIs(t,"histogram"),f=F7.traceIs(t,"gl2d"),c,h,v,p=zne(r)&&r.length>1;if(p&&!u&&i.type!=="category"){var d=r.length;if(d<=o){if(l||f)s=r.slice(0,o);else if(o===1)s=[r[0]-.5,r[0]+.5];else{for(s=[1.5*r[0]-.5*r[1]],v=1;v<d;v++)s.push((r[v-1]+r[v])*.5);s.push(1.5*r[d-1]-.5*r[d-2])}if(d<o){var g=s[s.length-1],m=g-s[s.length-2];for(v=d;v<o;v++)g+=m,s.push(g)}}else return l?r.slice(0,o):r.slice(0,o+1)}else{var y=t[i._id.charAt(0)+"calendar"];if(u)c=i.r2c(a,0,y);else if(zne(r)&&r.length===1)c=r[0];else if(a===void 0)c=0;else{var _=i.type==="log"?i.d2c:i.r2c;c=_(a,0,y)}for(h=n||1,v=l||f?0:-.5;v<o;v++)s.push(c+h*v)}return s},O7=Pa,N7=bt.exports,NC=rn.exports,One=o0,F$e=C$e,O$e=ih,N$e=I7,B$e=D7,$$e=R7,U$e=z7,BC=Fne,B7=Un.BADNUM,$C=function(t,r){var a=NC.getFromId(t,r.xaxis||"x"),n=NC.getFromId(t,r.yaxis||"y"),o=O7.traceIs(r,"contour"),i=O7.traceIs(r,"histogram"),s=O7.traceIs(r,"gl2d"),l=o?"best":r.zsmooth,u,f,c,h,v,p,d,g,m,y,_;if(a._minDtick=0,n._minDtick=0,i)_=F$e(t,r),h=_.orig_x,u=_.x,f=_.x0,c=_.dx,g=_.orig_y,v=_.y,p=_.y0,d=_.dy,m=_.z;else{var S=r.z;N7.isArray1D(S)?(N$e(r,a,n,"x","y",["z"]),u=r._x,v=r._y,S=r._z):(h=r.x?a.makeCalcdata(r,"x"):[],g=r.y?n.makeCalcdata(r,"y"):[],u=One(r,a,"x",h).vals,v=One(r,n,"y",g).vals,r._x=u,r._y=v),f=r.x0,c=r.dx,p=r.y0,d=r.dy,m=B$e(S,r,a,n)}(a.rangebreaks||n.rangebreaks)&&(m=H$e(u,v,m),i||(u=Nne(u),v=Nne(v),r._x=u,r._y=v)),!i&&(o||r.connectgaps)&&(r._emptypoints=U$e(m),$$e(m,r._emptypoints));function M(O){l=r._input.zsmooth=r.zsmooth=!1,N7.warn('cannot use zsmooth: "fast": '+O)}if(l==="fast"){if(a.type==="log"||n.type==="log")M("log axis found");else if(!i){if(u.length){var w=(u[u.length-1]-u[0])/(u.length-1),A=Math.abs(w/100);for(y=0;y<u.length-1;y++)if(Math.abs(u[y+1]-u[y]-w)>A){M("x scale is not linear");break}}if(v.length&&l==="fast"){var k=(v[v.length-1]-v[0])/(v.length-1),T=Math.abs(k/100);for(y=0;y<v.length-1;y++)if(Math.abs(v[y+1]-v[y]-k)>T){M("y scale is not linear");break}}}}var L=N7.maxRowLength(m),C=r.xtype==="scaled"?"":u,I=BC(r,C,f,c,L,a),R=r.ytype==="scaled"?"":v,B=BC(r,R,p,d,m.length,n);s||(r._extremes[a._id]=NC.findExtremes(a,I),r._extremes[n._id]=NC.findExtremes(n,B));var N={x:I,y:B,z:m,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&h&&(N.orig_x=h),r.yperiodalignment&&g&&(N.orig_y=g),C&&C.length===I.length-1&&(N.xCenter=C),R&&R.length===B.length-1&&(N.yCenter=R),i&&(N.xRanges=_.xRanges,N.yRanges=_.yRanges,N.pts=_.pts),o||O$e(t,r,{vals:m,cLetter:"z"}),o&&r.contours&&r.contours.coloring==="heatmap"){var D={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};N.xfill=BC(D,C,f,c,L,a),N.yfill=BC(D,R,p,d,m.length,n)}return[N]};function Nne(e){for(var t=[],r=e.length,a=0;a<r;a++){var n=e[a];n!==B7&&t.push(n)}return t}function H$e(e,t,r){for(var a=[],n=-1,o=0;o<r.length;o++)if(t[o]!==B7){n++,a[n]=[];for(var i=0;i<r[o].length;i++)e[i]!==B7&&a[n].push(r[o][i])}return a}var Bne=Ra.exports,G$e=Hl.exports,V$e=Pa,j$e=xn.exports,q$e=rn.exports,Vv=bt.exports,$ne=xo,Y$e=l8,W$e=Oa.exports,X$e=Qo.extractOpts,Z$e=Qo.makeColorScaleFuncFromTrace,K$e=Xh,J$e=ou,$7=J$e.LINE_SPACING,Une="heatmap-label";function Hne(e){return e.selectAll("g."+Une)}function Gne(e){Hne(e).remove()}var U7=function(e,t,r,a){var n=t.xaxis,o=t.yaxis;Vv.makeTraceGroups(a,r,"hm").each(function(i){var s=Bne.select(this),l=i[0],u=l.trace,f=u.xgap||0,c=u.ygap||0,h=l.z,v=l.x,p=l.y,d=l.xCenter,g=l.yCenter,m=V$e.traceIs(u,"contour"),y=m?"best":u.zsmooth,_=h.length,S=Vv.maxRowLength(h),M=!1,w=!1,A,k,T,L,C,I,R,B;for(I=0;A===void 0&&I<v.length-1;)A=n.c2p(v[I]),I++;for(I=v.length-1;k===void 0&&I>0;)k=n.c2p(v[I]),I--;for(k<A&&(T=k,k=A,A=T,M=!0),I=0;L===void 0&&I<p.length-1;)L=o.c2p(p[I]),I++;for(I=p.length-1;C===void 0&&I>0;)C=o.c2p(p[I]),I--;if(C<L&&(T=L,L=C,C=T,w=!0),m&&(d=v,g=p,v=l.xfill,p=l.yfill),y!=="fast"){var N=y==="best"?0:.5;A=Math.max(-N*n._length,A),k=Math.min((1+N)*n._length,k),L=Math.max(-N*o._length,L),C=Math.min((1+N)*o._length,C)}var D=Math.round(k-A),O=Math.round(C-L),$=D<=0||O<=0;if($){var Y=s.selectAll("image").data([]);Y.exit().remove(),Gne(s);return}var X,ee;y==="fast"?(X=S,ee=_):(X=D,ee=O);var Q=document.createElement("canvas");Q.width=X,Q.height=ee;var Z=Q.getContext("2d"),q=Z$e(u,{noNumericCheck:!0,returnArray:!0}),ae,ie;y==="fast"?(ae=M?function(sr){return S-1-sr}:Vv.identity,ie=w?function(sr){return _-1-sr}:Vv.identity):(ae=function(sr){return Vv.constrain(Math.round(n.c2p(v[sr])-A),0,D)},ie=function(sr){return Vv.constrain(Math.round(o.c2p(p[sr])-L),0,O)});var we=ie(0),Te=[we,we],he=M?0:1,xe=w?0:1,Se=0,ye=0,re=0,se=0,de,Me,Ie,Ee,qe;function be(sr,gr){if(sr!==void 0){var Ur=q(sr);return Ur[0]=Math.round(Ur[0]),Ur[1]=Math.round(Ur[1]),Ur[2]=Math.round(Ur[2]),Se+=gr,ye+=Ur[0]*gr,re+=Ur[1]*gr,se+=Ur[2]*gr,Ur}return[0,0,0,0]}function oe(sr,gr,Ur,Vr){var la=sr[Ur.bin0];if(la===void 0)return be(void 0,1);var Xa=sr[Ur.bin1],La=gr[Ur.bin0],en=gr[Ur.bin1],In=Xa-la||0,yn=La-la||0,On;return Xa===void 0?en===void 0?On=0:La===void 0?On=2*(en-la):On=(2*en-La-la)*2/3:en===void 0?La===void 0?On=0:On=(2*la-Xa-La)*2/3:La===void 0?On=(2*en-Xa-la)*2/3:On=en+la-Xa-La,be(la+Ur.frac*In+Vr.frac*(yn+Ur.frac*On))}if(y){var ce=0,ue;try{ue=new Uint8Array(D*O*4)}catch{ue=new Array(D*O*4)}if(y==="best"){var Re=d||v,Xe=g||p,Ke=new Array(Re.length),vt=new Array(Xe.length),Ze=new Array(D),Qe=d?jne:Vne,Je=g?jne:Vne,je,$e,Ye;for(I=0;I<Re.length;I++)Ke[I]=Math.round(n.c2p(Re[I])-A);for(I=0;I<Xe.length;I++)vt[I]=Math.round(o.c2p(Xe[I])-L);for(I=0;I<D;I++)Ze[I]=Qe(I,Ke);for(R=0;R<O;R++)for(je=Je(R,vt),$e=h[je.bin0],Ye=h[je.bin1],I=0;I<D;I++,ce+=4)qe=oe($e,Ye,Ze[I],je),qne(ue,ce,qe)}else for(R=0;R<_;R++)for(Ee=h[R],Te=ie(R),I=0;I<D;I++)qe=be(Ee[I],1),ce=(Te*D+ae(I))*4,qne(ue,ce,qe);var yt=Z.createImageData(D,O);try{yt.data.set(ue)}catch{var _t=yt.data,Pt=_t.length;for(R=0;R<Pt;R++)_t[R]=ue[R]}Z.putImageData(yt,0,0)}else{var Tt=Math.floor(f/2),Ot=Math.floor(c/2);for(R=0;R<_;R++)if(Ee=h[R],Te.reverse(),Te[xe]=ie(R+1),!(Te[0]===Te[1]||Te[0]===void 0||Te[1]===void 0))for(Me=ae(0),de=[Me,Me],I=0;I<S;I++)de.reverse(),de[he]=ae(I+1),!(de[0]===de[1]||de[0]===void 0||de[1]===void 0)&&(Ie=Ee[I],qe=be(Ie,(de[1]-de[0])*(Te[1]-Te[0])),Z.fillStyle="rgba("+qe.join(",")+")",Z.fillRect(de[0]+Tt,Te[0]+Ot,de[1]-de[0]-f,Te[1]-Te[0]-c))}ye=Math.round(ye/Se),re=Math.round(re/Se),se=Math.round(se/Se);var qt=G$e("rgb("+ye+","+re+","+se+")");e._hmpixcount=(e._hmpixcount||0)+Se,e._hmlumcount=(e._hmlumcount||0)+Se*qt.getLuminance();var Xt=s.selectAll("image").data(i);Xt.enter().append("svg:image").attr({xmlns:K$e.svg,preserveAspectRatio:"none"}),Xt.attr({height:O,width:D,x:A,y:L,"xlink:href":Q.toDataURL("image/png")}),Gne(s);var Or=u.texttemplate;if(Or){var Br=X$e(u),Qr={type:"linear",range:[Br.min,Br.max],_separators:n._separators,_numFormat:n._numFormat},Sr=u.type==="histogram2dcontour",Zr=u.type==="contour",Oe=Zr?1:0,it=Zr?_-1:_,ft=Zr?1:0,pt=Zr?S-1:S,Dt=[];for(I=Oe;I<it;I++){var Nt;if(Zr)Nt=l.y[I];else if(Sr){if(I===0||I===_-1)continue;Nt=l.y[I]}else if(l.yCenter)Nt=l.yCenter[I];else{if(I+1===_&&l.y[I+1]===void 0)continue;Nt=(l.y[I]+l.y[I+1])/2}var hr=Math.round(o.c2p(Nt));if(!(0>hr||hr>o._length))for(R=ft;R<pt;R++){var fr;if(Zr)fr=l.x[R];else if(Sr){if(R===0||R===S-1)continue;fr=l.x[R]}else if(l.xCenter)fr=l.xCenter[R];else{if(R+1===S&&l.x[R+1]===void 0)continue;fr=(l.x[R]+l.x[R+1])/2}var vr=Math.round(n.c2p(fr));if(!(0>vr||vr>n._length)){var Ut=Y$e({x:fr,y:Nt},u,e._fullLayout);Ut.x=fr,Ut.y=Nt;var Fr=l.z[I][R];Fr===void 0?(Ut.z="",Ut.zLabel=""):(Ut.z=Fr,Ut.zLabel=q$e.tickText(Qr,Fr,"hover").text);var sa=l.text&&l.text[I]&&l.text[I][R];(sa===void 0||sa===!1)&&(sa=""),Ut.text=sa;var $r=Vv.texttemplateString(Or,Ut,e._fullLayout._d3locale,Ut,u._meta||{});if(!!$r){var Ca=$r.split("<br>"),on=Ca.length,Fa=0;for(B=0;B<on;B++)Fa=Math.max(Fa,Ca[B].length);Dt.push({l:on,c:Fa,t:$r,x:vr,y:hr,z:Fr})}}}}var jr=u.textfont,Rn=jr.family,xa=jr.size,ia=e._fullLayout.font.size;if(!xa||xa==="auto"){var vn=1/0,ka=1/0,Ge=0,Pe=0;for(B=0;B<Dt.length;B++){var Ne=Dt[B];if(Ge=Math.max(Ge,Ne.l),Pe=Math.max(Pe,Ne.c),B<Dt.length-1){var We=Dt[B+1],lt=Math.abs(We.x-Ne.x),wt=Math.abs(We.y-Ne.y);lt&&(vn=Math.min(vn,lt)),wt&&(ka=Math.min(ka,wt))}}!isFinite(vn)||!isFinite(ka)?xa=ia:(vn-=f,ka-=c,vn/=Pe,ka/=Ge,vn/=$7/2,ka/=$7,xa=Math.min(Math.floor(vn),Math.floor(ka),ia))}if(xa<=0||!isFinite(xa))return;var Mt=function(sr){return sr.x},It=function(sr){return sr.y-xa*(sr.l*$7/2-1)},rr=Hne(s).data(Dt);rr.enter().append("g").classed(Une,1).append("text").attr("text-anchor","middle").each(function(sr){var gr=Bne.select(this),Ur=jr.color;(!Ur||Ur==="auto")&&(Ur=W$e.contrast("rgba("+q(sr.z).join()+")")),gr.attr("data-notex",1).call($ne.positionText,Mt(sr),It(sr)).call(j$e.font,Rn,xa,Ur).text(sr.t).call($ne.convertToTspans,e)})}})};function Vne(e,t){var r=t.length-2,a=Vv.constrain(Vv.findBin(e,t),0,r),n=t[a],o=t[a+1],i=Vv.constrain(a+(e-n)/(o-n)-.5,0,r),s=Math.round(i),l=Math.abs(i-s);return!i||i===r||!l?{bin0:s,bin1:s,frac:0}:{bin0:s,frac:l,bin1:Math.round(s+l/(i-s))}}function jne(e,t){var r=t.length-1,a=Vv.constrain(Vv.findBin(e,t),0,r),n=t[a],o=t[a+1],i=(e-n)/(o-n)||0;return i<=0?{bin0:a,bin1:a,frac:0}:i<.5?{bin0:a,bin1:a+1,frac:i}:{bin0:a+1,bin1:a,frac:1-i}}function qne(e,t,r){e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=Math.round(r[3]*255)}var k2={min:"zmin",max:"zmax"},Q$e=Ra.exports,H7=function(t){Q$e.select(t).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})},Yne=Rs,UC=bt.exports,eUe=rn.exports,tUe=Qo.extractOpts,G7=function(t,r,a,n,o){o||(o={});var i=o.isContour,s=t.cd[0],l=s.trace,u=t.xa,f=t.ya,c=s.x,h=s.y,v=s.z,p=s.xCenter,d=s.yCenter,g=s.zmask,m=l.zhoverformat,y=c,_=h,S,M,w,A;if(t.index!==!1){try{w=Math.round(t.index[1]),A=Math.round(t.index[0])}catch{UC.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index);return}if(w<0||w>=v[0].length||A<0||A>v.length)return}else{if(Yne.inbox(r-c[0],r-c[c.length-1],0)>0||Yne.inbox(a-h[0],a-h[h.length-1],0)>0)return;if(i){var k;for(y=[2*c[0]-c[1]],k=1;k<c.length;k++)y.push((c[k]+c[k-1])/2);for(y.push([2*c[c.length-1]-c[c.length-2]]),_=[2*h[0]-h[1]],k=1;k<h.length;k++)_.push((h[k]+h[k-1])/2);_.push([2*h[h.length-1]-h[h.length-2]])}w=Math.max(0,Math.min(y.length-2,UC.findBin(r,y))),A=Math.max(0,Math.min(_.length-2,UC.findBin(a,_)))}var T=u.c2p(c[w]),L=u.c2p(c[w+1]),C=f.c2p(h[A]),I=f.c2p(h[A+1]),R,B;i?(R=s.orig_x||c,B=s.orig_y||h,L=T,S=R[w],I=C,M=B[A]):(R=s.orig_x||p||c,B=s.orig_y||d||h,S=p?R[w]:(R[w]+R[w+1])/2,M=d?B[A]:(B[A]+B[A+1])/2,u&&u.type==="category"&&(S=c[w]),f&&f.type==="category"&&(M=h[A]),l.zsmooth&&(T=L=u.c2p(S),C=I=f.c2p(M)));var N=v[A][w];if(g&&!g[A][w]&&(N=void 0),!(N===void 0&&!l.hoverongaps)){var D;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[A])?D=s.hovertext[A][w]:Array.isArray(s.text)&&Array.isArray(s.text[A])&&(D=s.text[A][w]);var O=tUe(l),$={type:"linear",range:[O.min,O.max],hoverformat:m,_separators:u._separators,_numFormat:u._numFormat},Y=eUe.tickText($,N,"hover").text;return[UC.extendFlat(t,{index:l._after2before?l._after2before[A][w]:[A,w],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:T,x1:L,y0:C,y1:I,xLabelVal:S,yLabelVal:M,zLabelVal:N,zLabel:Y,text:D})]}},rUe={attributes:T2,supplyDefaults:g$e,calc:$C,plot:U7,colorbar:k2,style:H7,hoverPoints:G7,moduleType:"trace",name:"heatmap",basePlotModule:Ii,categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}},aUe=rUe,Wne=function(t,r){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",t,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",r?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",t,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",t,"axis bin.","Default behavior: If `nbins"+t+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+t+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",r?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},nUe={eventDataKeys:["binNumber"]},vh=Wg,Xne=Ss.axisHoverFormat,iUe=zn.hovertemplateAttrs,oUe=zn.texttemplateAttrs,V7=Ts,Zne=Wne,sUe=nUe,j7=cn.extendFlat,q7={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:Xne("x"),yhoverformat:Xne("y"),text:j7({},vh.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:j7({},vh.hovertext,{description:"Same as `text`."}),orientation:vh.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:Zne("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:Zne("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:iUe({},{keys:sUe.eventDataKeys}),texttemplate:oUe({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:j7({},vh.textposition,{arrayOk:!1}),textfont:V7({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:V7({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:V7({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:vh.insidetextanchor,textangle:vh.textangle,cliponaxis:vh.cliponaxis,constraintext:vh.constraintext,marker:vh.marker,offsetgroup:vh.offsetgroup,alignmentgroup:vh.alignmentgroup,selected:vh.selected,unselected:vh.unselected,_deprecated:{bardir:vh._deprecated.bardir}},Kne=Pa,kA=bt.exports,Jne=Oa.exports,lUe=ch.handleText,uUe=f7,fUe=q7,cUe=function(t,r,a,n){function o(y,_){return kA.coerce(t,r,fUe,y,_)}var i=o("x"),s=o("y"),l=o("cumulative.enabled");l&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var u=o("textposition");lUe(t,r,n,o,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var f=o("orientation",s&&!i?"h":"v"),c=f==="v"?"x":"y",h=f==="v"?"y":"x",v=i&&s?Math.min(kA.minRowLength(i)&&kA.minRowLength(s)):kA.minRowLength(r[c]||[]);if(!v){r.visible=!1;return}r._length=v;var p=Kne.getComponentMethod("calendars","handleTraceDefaults");p(t,r,["x","y"],n);var d=r[h];d&&o("histfunc"),o("histnorm"),o("autobin"+c),uUe(t,r,o,a,n),kA.coerceSelectionMarkerOpacity(r,o);var g=(r.marker.line||{}).color,m=Kne.getComponentMethod("errorbars","supplyDefaults");m(t,r,g||Jne.defaultLine,{axis:"y"}),m(t,r,g||Jne.defaultLine,{axis:"x",inherit:"y"})},EA=bt.exports,hUe=As,HC=Pa.traceIs,vUe=ch.handleGroupingDefaults,Qne=EA.nestedProperty,Y7=qd.getAxisGroup,eie=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],dUe=["x","y"],W7=function(t,r){var a=r._histogramBinOpts={},n=[],o={},i=[],s,l,u,f,c,h,v;function p(B,N){return EA.coerce(s._input,s,s._module.attributes,B,N)}function d(B){return B.orientation==="v"?"x":"y"}function g(B,N){var D=hUe.getFromTrace({_fullLayout:r},B,N);return D.type}function m(B,N,D){var O=B.uid+"__"+D;N||(N=O);var $=g(B,D),Y=B[D+"calendar"]||"",X=a[N],ee=!0;X&&($===X.axType&&Y===X.calendar?(ee=!1,X.traces.push(B),X.dirs.push(D)):(N=O,$!==X.axType&&EA.warn(["Attempted to group the bins of trace",B.index,"set on a","type:"+$,"axis","with bins on","type:"+X.axType,"axis."].join(" ")),Y!==X.calendar&&EA.warn(["Attempted to group the bins of trace",B.index,"set with a",Y,"calendar","with bins",X.calendar?"on a "+X.calendar+" calendar":"w/o a set calendar"].join(" ")))),ee&&(a[N]={traces:[B],dirs:[D],axType:$,calendar:B[D+"calendar"]||""}),B["_"+D+"bingroup"]=N}for(c=0;c<t.length;c++)s=t[c],HC(s,"histogram")&&(n.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,HC(s,"2dMap")||vUe(s._input,s,r,p));var y=r._alignmentOpts||{};for(c=0;c<n.length;c++){if(s=n[c],u="",!HC(s,"2dMap")){if(f=d(s),r.barmode==="group"&&s.alignmentgroup){var _=s[f+"axis"],S=Y7(r,_)+s.orientation;(y[S]||{})[s.alignmentgroup]&&(u=S)}!u&&r.barmode!=="overlay"&&(u=Y7(r,s.xaxis)+Y7(r,s.yaxis)+d(s))}u?(o[u]||(o[u]=[]),o[u].push(s)):i.push(s)}for(u in o){if(l=o[u],l.length===1){i.push(l[0]);continue}var M=!1;for(l.length&&(s=l[0],M=p("bingroup")),u=M||u,c=0;c<l.length;c++){s=l[c];var w=s._input.bingroup;w&&w!==u&&EA.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",w,"setting."].join(" ")),s.bingroup=u,m(s,u,d(s))}}for(c=0;c<i.length;c++){s=i[c];var A=p("bingroup");if(HC(s,"2dMap"))for(v=0;v<2;v++){f=dUe[v];var k=p(f+"bingroup",A?A+"__"+f:null);m(s,k,f)}else m(s,A,d(s))}for(u in a){var T=a[u];for(l=T.traces,h=0;h<eie.length;h++){var L=eie[h],C=L.name,I,R;if(!(C==="nbins"&&T.sizeFound)){for(c=0;c<l.length;c++){if(s=l[c],f=T.dirs[c],I=L.aStr[f],Qne(s._input,I).get()!==void 0){T[C]=p(I),T[C+"Found"]=!0;break}R=(s._autoBin||{})[f]||{},R[C]&&Qne(s,I).set(R[C])}if(C==="start"||C==="end")for(;c<l.length;c++)s=l[c],s["_"+f+"bingroup"]&&(R=(s._autoBin||{})[f]||{},p(I,R[C]));C==="nbins"&&!T.sizeFound&&!T.nbinsFound&&(s=l[0],T[C]=p(I))}}}},pUe=wA.hoverPoints,gUe=rn.exports.hoverLabelText,mUe=function(t,r,a,n,o){var i=pUe(t,r,a,n,o);if(!!i){t=i[0];var s=t.cd[t.index],l=t.cd[0].trace;if(!l.cumulative.enabled){var u=l.orientation==="h"?"y":"x";t[u+"Label"]=gUe(t[u+"a"],[s.ph0,s.ph1],l[u+"hoverformat"])}return i}},tie=function(t,r,a,n,o){if(t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"zLabelVal"in r&&(t.z=r.zLabelVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),!(a.cumulative||{}).enabled){var i=Array.isArray(o)?n[0].pts[o[0]][o[1]]:n[o].pts;t.pointNumbers=i,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex;var s;if(a._indexToPoints){s=[];for(var l=0;l<i.length;l++)s=s.concat(a._indexToPoints[i[l]])}else s=i;t.pointIndices=s}return t},yUe={attributes:q7,layoutAttributes:u7,supplyDefaults:cUe,crossTraceDefaults:W7,supplyLayoutDefaults:tae,calc:Ane.calc,crossTraceCalc:yA.crossTraceCalc,plot:w2.plot,layerName:"barlayer",style:np.style,styleOnSelect:np.styleOnSelect,colorbar:Pf,hoverPoints:mUe,selectPoints:TA,eventData:tie,moduleType:"trace",name:"histogram",basePlotModule:Ii,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}},xUe=yUe,op=q7,rie=Wne,GC=T2,bUe=ao,X7=Ss.axisHoverFormat,_Ue=zn.hovertemplateAttrs,wUe=zn.texttemplateAttrs,TUe=bo,CA=cn.extendFlat,Z7=CA({x:op.x,y:op.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:op.histnorm,histfunc:op.histfunc,nbinsx:op.nbinsx,xbins:rie("x"),nbinsy:op.nbinsy,ybins:rie("y"),autobinx:op.autobinx,autobiny:op.autobiny,bingroup:CA({},op.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:CA({},op.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:CA({},op.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:GC.xgap,ygap:GC.ygap,zsmooth:GC.zsmooth,xhoverformat:X7("x"),yhoverformat:X7("y"),zhoverformat:X7("z",1),hovertemplate:_Ue({},{keys:"z"}),texttemplate:wUe({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:GC.textfont,showlegend:CA({},bUe.showlegend,{dflt:!1})},TUe("",{cLetter:"z",autoColorDflt:!1})),AUe=Pa,aie=bt.exports,nie=function(t,r,a,n){var o=a("x"),i=a("y"),s=aie.minRowLength(o),l=aie.minRowLength(i);if(!s||!l){r.visible=!1;return}r._length=Math.min(s,l);var u=AUe.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);var f=a("z")||a("marker.color");f&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")},SUe=bt.exports,MUe=nie,kUe=une,EUe=su,CUe=RC,LUe=Z7,PUe=function(t,r,a,n){function o(i,s){return SUe.coerce(t,r,LUe,i,s)}MUe(t,r,o,n),r.visible!==!1&&(kUe(t,r,o),EUe(t,r,n,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),CUe(o,n),o("xhoverformat"),o("yhoverformat"))},IUe=G7,iie=rn.exports.hoverLabelText,DUe=function(t,r,a,n,o){var i=IUe(t,r,a,n,o);if(!!i){t=i[0];var s=t.index,l=s[0],u=s[1],f=t.cd[0],c=f.trace,h=f.xRanges[u],v=f.yRanges[l];return t.xLabel=iie(t.xa,[h[0],h[1]],c.xhoverformat),t.yLabel=iie(t.ya,[v[0],v[1]],c.yhoverformat),i}},RUe={attributes:Z7,supplyDefaults:PUe,crossTraceDefaults:W7,calc:$C,plot:U7,layerName:"heatmaplayer",colorbar:k2,style:H7,hoverPoints:DUe,eventData:tie,moduleType:"trace",name:"histogram2d",basePlotModule:Ii,categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{hrName:"histogram_2d",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a heatmap."].join(" ")}},zUe=RUe,VC={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}},Xs=T2,K7=Cl,oie=Ss,J7=oie.axisHoverFormat,FUe=oie.descriptionOnlyNumbers,OUe=bo,NUe=Bd.dash,BUe=Ts,E2=cn.extendFlat,sie=VC,lie=sie.COMPARISON_OPS2,uie=sie.INTERVAL_OPS,fie=K7.line,jC=E2({z:Xs.z,x:Xs.x,x0:Xs.x0,dx:Xs.dx,y:Xs.y,y0:Xs.y0,dy:Xs.dy,xperiod:Xs.xperiod,yperiod:Xs.yperiod,xperiod0:K7.xperiod0,yperiod0:K7.yperiod0,xperiodalignment:Xs.xperiodalignment,yperiodalignment:Xs.yperiodalignment,text:Xs.text,hovertext:Xs.hovertext,transpose:Xs.transpose,xtype:Xs.xtype,ytype:Xs.ytype,xhoverformat:J7("x"),yhoverformat:J7("y"),zhoverformat:J7("z",1),hovertemplate:Xs.hovertemplate,texttemplate:E2({},Xs.texttemplate,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",Xs.texttemplate.description].join(" ")}),textfont:E2({},Xs.textfont,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",Xs.textfont.description].join(" ")}),hoverongaps:Xs.hoverongaps,connectgaps:E2({},Xs.connectgaps,{description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array","otherwise it is defaulted to false."].join(" ")}),fillcolor:{valType:"color",editType:"calc",description:["Sets the fill color if `contours.type` is *constraint*.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0},description:["Determines whether or not the contour level attributes are","picked by an algorithm.","If *true*, the number of contour levels can be set in `ncontours`.","If *false*, set the contour level attributes in `contours`."].join(" ")},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc",description:["Sets the maximum number of contour levels. The actual number","of contours will be chosen automatically to be less than or","equal to the value of `ncontours`.","Has an effect only if `autocontour` is *true* or if","`contours.size` is missing."].join(" ")},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc",description:["If `levels`, the data is represented as a contour plot with multiple","levels displayed. If `constraint`, the data is represented as constraints","with the invalid region shaded as specified by the `operation` and","`value` parameters."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the step between each contour level.","Must be positive."].join(" ")},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *heatmap*, a heatmap gradient coloring is applied","between each contour level.","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not the contour lines are drawn.","Has an effect only if `contours.coloring` is set to *fill*."].join(" ")},showlabels:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether to label the contour lines with their values."].join(" ")},labelfont:BUe({editType:"plot",colorEditType:"style",description:["Sets the font used for labeling the contour levels.","The default color comes from the lines, if shown.","The default family and size come from `layout.font`."].join(" ")}),labelformat:{valType:"string",dflt:"",editType:"plot",description:FUe("contour label")},operation:{valType:"enumerated",values:[].concat(lie).concat(uie),dflt:"=",editType:"calc",description:["Sets the constraint operation.","*=* keeps regions equal to `value`","*<* and *<=* keep regions less than `value`","*>* and *>=* keep regions greater than `value`","*[]*, *()*, *[)*, and *(]* keep regions inside `value[0]` to `value[1]`","*][*, *)(*, *](*, *)[* keep regions outside `value[0]` to value[1]`","Open vs. closed intervals make no difference to constraint display, but","all versions are allowed for consistency with filter transforms."].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values of the constraint boundary.","When `operation` is set to one of the comparison values","("+lie+")","*value* is expected to be a number.","When `operation` is set to one of the interval values","("+uie+")","*value* is expected to be an array of two numbers where the first","is the lower bound and the second is the upper bound."].join(" ")},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:E2({},fie.color,{editType:"style+colorbars",description:["Sets the color of the contour level.","Has no effect if `contours.coloring` is set to *lines*."].join(" ")}),width:{valType:"number",min:0,editType:"style+colorbars",description:["Sets the contour line width in (in px)","Defaults to *0.5* when `contours.type` is *levels*.","Defaults to *2* when `contour.type` is *constraint*."].join(" ")},dash:NUe,smoothing:E2({},fie.smoothing,{description:["Sets the amount of smoothing for the contour lines,","where *0* corresponds to no smoothing."].join(" ")}),editType:"plot"}},OUe("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"})),Rf=Z7,Kg=jC,$Ue=bo,Q7=Ss.axisHoverFormat,cie=cn.extendFlat,hie=cie({x:Rf.x,y:Rf.y,z:Rf.z,marker:Rf.marker,histnorm:Rf.histnorm,histfunc:Rf.histfunc,nbinsx:Rf.nbinsx,xbins:Rf.xbins,nbinsy:Rf.nbinsy,ybins:Rf.ybins,autobinx:Rf.autobinx,autobiny:Rf.autobiny,bingroup:Rf.bingroup,xbingroup:Rf.xbingroup,ybingroup:Rf.ybingroup,autocontour:Kg.autocontour,ncontours:Kg.ncontours,contours:Kg.contours,line:{color:Kg.line.color,width:cie({},Kg.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:Kg.line.dash,smoothing:Kg.line.smoothing,editType:"plot"},xhoverformat:Q7("x"),yhoverformat:Q7("y"),zhoverformat:Q7("z",1),hovertemplate:Rf.hovertemplate,texttemplate:Kg.texttemplate,textfont:Kg.textfont},$Ue("",{cLetter:"z",editTypeOverride:"calc"})),eO=function(t,r,a,n){var o=n("contours.start"),i=n("contours.end"),s=o===!1||i===!1,l=a("contours.size"),u;s?u=r.autocontour=!0:u=a("autocontour",!1),(u||!l)&&a("ncontours")},UUe=bt.exports,vie=function(t,r,a,n){n||(n={});var o=t("contours.showlabels");if(o){var i=r.font;UUe.coerceFont(t,"contours.labelfont",{family:i.family,size:i.size,color:a}),t("contours.labelformat")}n.hasHover!==!1&&t("zhoverformat")},HUe=su,GUe=vie,tO=function(t,r,a,n,o){var i=a("contours.coloring"),s,l="";i==="fill"&&(s=a("contours.showlines")),s!==!1&&(i!=="lines"&&(l=a("line.color","#000")),a("line.width",.5),a("line.dash")),i!=="none"&&(t.showlegend!==!0&&(r.showlegend=!1),r._dfltShowLegend=!1,HUe(t,r,n,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),GUe(a,n,l,o)},die=bt.exports,VUe=nie,jUe=eO,qUe=tO,YUe=RC,pie=hie,WUe=function(t,r,a,n){function o(s,l){return die.coerce(t,r,pie,s,l)}function i(s){return die.coerce2(t,r,pie,s)}VUe(t,r,o,n),r.visible!==!1&&(jUe(t,r,o,i),qUe(t,r,o,n),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&YUe(o,n))},rO=rn.exports,aO=bt.exports,gie=function(t,r){var a=t.contours;if(t.autocontour){var n=t.zmin,o=t.zmax;(t.zauto||n===void 0)&&(n=aO.aggNums(Math.min,null,r)),(t.zauto||o===void 0)&&(o=aO.aggNums(Math.max,null,r));var i=mie(n,o,t.ncontours);a.size=i.dtick,a.start=rO.tickFirst(i),i.range.reverse(),a.end=rO.tickFirst(i),a.start===n&&(a.start+=a.size),a.end===o&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),t._input.contours||(t._input.contours={}),aO.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size}),t._input.autocontour=!0}else if(a.type!=="constraint"){var s=a.start,l=a.end,u=t._input.contours;if(s>l&&(a.start=u.start=l,l=a.end=u.end=s,s=a.start),!(a.size>0)){var f;s===l?f=1:f=mie(s,l,t.ncontours).dtick,u.size=a.size=f}}};function mie(e,t,r){var a={type:"linear",range:[e,t]};return rO.autoTicks(a,(t-e)/(r||15)),a}var qC=function(t){return t.end+t.size/1e6},yie=Qo,XUe=$C,ZUe=gie,KUe=qC,xie=function(t,r){var a=XUe(t,r),n=a[0].z;ZUe(r,n);var o=r.contours,i=yie.extractOpts(r),s;if(o.coloring==="heatmap"&&i.auto&&r.autocontour===!1){var l=o.start,u=KUe(o),f=o.size||1,c=Math.floor((u-l)/f)+1;isFinite(f)||(f=1,c=1);var h=l-f/2,v=h+c*f;s=[h,v]}else s=n;return yie.calc(t,r,{vals:s,cLetter:"z"}),a},YC={},WC={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}},XC=WC,bie=function(t){var r=t[0].z,a=r.length,n=r[0].length,o=a===2||n===2,i,s,l,u,f,c,h,v,p;for(s=0;s<a-1;s++)for(u=[],s===0&&(u=u.concat(XC.BOTTOMSTART)),s===a-2&&(u=u.concat(XC.TOPSTART)),i=0;i<n-1;i++)for(l=u.slice(),i===0&&(l=l.concat(XC.LEFTSTART)),i===n-2&&(l=l.concat(XC.RIGHTSTART)),f=i+","+s,c=[[r[s][i],r[s][i+1]],[r[s+1][i],r[s+1][i+1]]],p=0;p<t.length;p++)v=t[p],h=JUe(v.level,c),!!h&&(v.crossings[f]=h,l.indexOf(h)!==-1&&(v.starts.push([i,s]),o&&l.indexOf(h,l.indexOf(h)+1)!==-1&&v.starts.push([i,s])))};function JUe(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var a=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>a?r===5?713:1114:r===5?104:208}return r===15?0:r}var ZC=bt.exports,C2=WC,_ie=function(t,r,a){var n,o,i,s,l;for(r=r||.01,a=a||.01,i=0;i<t.length;i++){for(s=t[i],l=0;l<s.starts.length;l++)o=s.starts[l],wie(s,o,"edge",r,a);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,o=Object.keys(s.crossings)[0].split(",").map(Number),wie(s,o,void 0,r,a);n===1e4&&ZC.log("Infinite loop in contour?")}};function LA(e,t,r,a){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<a}function QUe(e,t){var r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+a*a)}function wie(e,t,r,a,n){var o=t.join(","),i=e.crossings[o],s=eHe(i,r,t),l=[Tie(e,t,[-s[0],-s[1]])],u=e.z.length,f=e.z[0].length,c=t.slice(),h=s.slice(),v;for(v=0;v<1e4;v++){if(i>20?(i=C2.CHOOSESADDLE[i][(s[0]||s[1])<0?0:1],e.crossings[o]=C2.SADDLEREMAINDER[i]):delete e.crossings[o],s=C2.NEWDELTA[i],!s){ZC.log("Found bad marching index:",i,t,e.level);break}l.push(Tie(e,t,s)),t[0]+=s[0],t[1]+=s[1],o=t.join(","),LA(l[l.length-1],l[l.length-2],a,n)&&l.pop();var p=s[0]&&(t[0]<0||t[0]>f-2)||s[1]&&(t[1]<0||t[1]>u-2),d=t[0]===c[0]&&t[1]===c[1]&&s[0]===h[0]&&s[1]===h[1];if(d||r&&p)break;i=e.crossings[o]}v===1e4&&ZC.log("Infinite loop in contour?");var g=LA(l[0],l[l.length-1],a,n),m=0,y=.2*e.smoothing,_=[],S=0,M,w,A,k,T,L,C,I,R,B,N;for(v=1;v<l.length;v++)C=QUe(l[v],l[v-1]),m+=C,_.push(C);var D=m/_.length*y;function O(X){return l[X%l.length]}for(v=l.length-2;v>=S;v--)if(M=_[v],M<D){for(A=0,w=v-1;w>=S&&M+_[w]<D;w--)M+=_[w];if(g&&v===l.length-2)for(A=0;A<w&&M+_[A]<D;A++)M+=_[A];T=v-w+A+1,L=Math.floor((v+w+A+2)/2),!g&&v===l.length-2?k=l[l.length-1]:!g&&w===-1?k=l[0]:T%2?k=O(L):k=[(O(L)[0]+O(L+1)[0])/2,(O(L)[1]+O(L+1)[1])/2],l.splice(w+1,v-w+1,k),v=w+1,A&&(S=A),g&&(v===l.length-2?l[A]=l[l.length-1]:v===0&&(l[l.length-1]=l[0]))}for(l.splice(0,S),v=0;v<l.length;v++)l[v].length=2;if(!(l.length<2))if(g)l.pop(),e.paths.push(l);else{r||ZC.log("Unclosed interior contour?",e.level,c.join(","),l.join("L"));var $=!1;for(I=0;I<e.edgepaths.length;I++)if(B=e.edgepaths[I],!$&&LA(B[0],l[l.length-1],a,n)){l.pop(),$=!0;var Y=!1;for(R=0;R<e.edgepaths.length;R++)if(N=e.edgepaths[R],LA(N[N.length-1],l[0],a,n)){Y=!0,l.shift(),e.edgepaths.splice(I,1),R===I?e.paths.push(l.concat(N)):(R>I&&R--,e.edgepaths[R]=N.concat(l,B));break}Y||(e.edgepaths[I]=l.concat(B))}for(I=0;I<e.edgepaths.length&&!$;I++)B=e.edgepaths[I],LA(B[B.length-1],l[0],a,n)&&(l.shift(),e.edgepaths[I]=B.concat(l),$=!0);$||e.edgepaths.push(l)}}function eHe(e,t,r){var a=0,n=0;return e>20&&t?e===208||e===1114?a=r[0]===0?1:-1:n=r[1]===0?1:-1:C2.BOTTOMSTART.indexOf(e)!==-1?n=1:C2.LEFTSTART.indexOf(e)!==-1?a=1:C2.TOPSTART.indexOf(e)!==-1?n=-1:a=-1,[a,n]}function Tie(e,t,r){var a=t[0]+Math.max(r[0],0),n=t[1]+Math.max(r[1],0),o=e.z[n][a],i=e.xaxis,s=e.yaxis;if(r[1]){var l=(e.level-o)/(e.z[n][a+1]-o),u=(l!==1?(1-l)*i.c2l(e.x[a]):0)+(l!==0?l*i.c2l(e.x[a+1]):0);return[i.c2p(i.l2c(u),!0),s.c2p(e.y[n],!0),a+l,n]}else{var f=(e.level-o)/(e.z[n+1][a]-o),c=(f!==1?(1-f)*s.c2l(e.y[n]):0)+(f!==0?f*s.c2l(e.y[n+1]):0);return[i.c2p(e.x[a],!0),s.c2p(s.l2c(c),!0),a,n+f]}}var nO=VC,tHe=gn,rHe={"[]":Sie("[]"),"][":Sie("]["),">":iO(">"),"<":iO("<"),"=":iO("=")};function Aie(e,t){var r=Array.isArray(t),a;function n(o){return tHe(o)?+o:null}return nO.COMPARISON_OPS2.indexOf(e)!==-1?a=n(r?t[0]:t):nO.INTERVAL_OPS.indexOf(e)!==-1?a=r?[n(t[0]),n(t[1])]:[n(t),n(t)]:nO.SET_OPS.indexOf(e)!==-1&&(a=r?t.map(n):[n(t)]),a}function Sie(e){return function(t){t=Aie(e,t);var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]);return{start:r,end:a,size:a-r}}}function iO(e){return function(t){return t=Aie(e,t),{start:t,end:1/0,size:1/0}}}var Mie=bt.exports,aHe=rHe,nHe=qC,kie=function(t,r,a){for(var n=t.type==="constraint"?aHe[t._operation](t.value):t,o=n.size,i=[],s=nHe(n),l=a.trace._carpetTrace,u=l?{xaxis:l.aaxis,yaxis:l.baxis,x:a.a,y:a.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:a.x,y:a.y},f=n.start;f<s;f+=o)if(i.push(Mie.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},u)),i.length>1e3){Mie.warn("Too many contours, clipping at 1000",t);break}return i},L2=bt.exports,Eie=function(e,t){var r,a,n,o=function(l){return l.reverse()},i=function(l){return l};switch(t){case"=":case"<":return e;case">":for(e.length!==1&&L2.warn("Contour data invalid for the specified inequality operation."),a=e[0],r=0;r<a.edgepaths.length;r++)a.edgepaths[r]=o(a.edgepaths[r]);for(r=0;r<a.paths.length;r++)a.paths[r]=o(a.paths[r]);for(r=0;r<a.starts.length;r++)a.starts[r]=o(a.starts[r]);return e;case"][":var s=o;o=i,i=s;case"[]":for(e.length!==2&&L2.warn("Contour data invalid for the specified inequality range operation."),a=Cie(e[0]),n=Cie(e[1]),r=0;r<a.edgepaths.length;r++)a.edgepaths[r]=o(a.edgepaths[r]);for(r=0;r<a.paths.length;r++)a.paths[r]=o(a.paths[r]);for(r=0;r<a.starts.length;r++)a.starts[r]=o(a.starts[r]);for(;n.edgepaths.length;)a.edgepaths.push(i(n.edgepaths.shift()));for(;n.paths.length;)a.paths.push(i(n.paths.shift()));for(;n.starts.length;)a.starts.push(i(n.starts.shift()));return[a]}};function Cie(e){return L2.extendFlat({},e,{edgepaths:L2.extendDeep([],e.edgepaths),paths:L2.extendDeep([],e.paths),starts:L2.extendDeep([],e.starts)})}var Lie=function(e,t){var r=e[0],a=r.z,n;switch(t.type){case"levels":var o=Math.min(a[0][0],a[0][1]);for(n=0;n<e.length;n++){var i=e[n];i.prefixBoundary=!i.edgepaths.length&&(o>i.level||i.starts.length&&o===i.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,u=-1/0,f=1/0;for(n=0;n<l;n++)f=Math.min(f,a[n][0]),f=Math.min(f,a[n][s-1]),u=Math.max(u,a[n][0]),u=Math.max(u,a[n][s-1]);for(n=1;n<s-1;n++)f=Math.min(f,a[0][n]),f=Math.min(f,a[l-1][n]),u=Math.max(u,a[0][n]),u=Math.max(u,a[l-1][n]);var c=t.value,h,v;switch(t._operation){case">":c>u&&(r.prefixBoundary=!0);break;case"<":(c<f||r.starts.length&&c===f)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),(v<f||h>u||r.starts.length&&v===f)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),h<f&&v>u&&(r.prefixBoundary=!0);break}break}};(function(e){var t=Ra.exports,r=bt.exports,a=xn.exports,n=Qo,o=xo,i=rn.exports,s=Og,l=U7,u=bie,f=_ie,c=kie,h=Eie,v=Lie,p=WC,d=p.LABELOPTIMIZER;e.plot=function(k,T,L,C){var I=T.xaxis,R=T.yaxis;r.makeTraceGroups(C,L,"contour").each(function(B){var N=t.select(this),D=B[0],O=D.trace,$=D.x,Y=D.y,X=O.contours,ee=c(X,T,D),Q=r.ensureSingle(N,"g","heatmapcoloring"),Z=[];X.coloring==="heatmap"&&(Z=[B]),l(k,T,Z,Q),u(ee),f(ee);var q=I.c2p($[0],!0),ae=I.c2p($[$.length-1],!0),ie=R.c2p(Y[0],!0),we=R.c2p(Y[Y.length-1],!0),Te=[[q,we],[ae,we],[ae,ie],[q,ie]],he=ee;X.type==="constraint"&&(he=h(ee,X._operation)),g(N,Te,X),m(N,he,Te,X),_(N,ee,k,D,X),M(N,T,k,D,Te)})};function g(A,k,T){var L=r.ensureSingle(A,"g","contourbg"),C=L.selectAll("path").data(T.coloring==="fill"?[0]:[]);C.enter().append("path"),C.exit().remove(),C.attr("d","M"+k.join("L")+"Z").style("stroke","none")}function m(A,k,T,L){var C=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",I="M"+T.join("L")+"Z";C&&v(k,L);var R=r.ensureSingle(A,"g","contourfill"),B=R.selectAll("path").data(C?k:[]);B.enter().append("path"),B.exit().remove(),B.each(function(N){var D=(N.prefixBoundary?I:"")+y(N,T);D?t.select(this).attr("d",D).style("stroke","none"):t.select(this).remove()})}function y(A,k){var T="",L=0,C=A.edgepaths.map(function(q,ae){return ae}),I=!0,R,B,N,D,O,$;function Y(q){return Math.abs(q[1]-k[0][1])<.01}function X(q){return Math.abs(q[1]-k[2][1])<.01}function ee(q){return Math.abs(q[0]-k[0][0])<.01}function Q(q){return Math.abs(q[0]-k[2][0])<.01}for(;C.length;){for($=a.smoothopen(A.edgepaths[L],A.smoothing),T+=I?$:$.replace(/^M/,"L"),C.splice(C.indexOf(L),1),R=A.edgepaths[L][A.edgepaths[L].length-1],D=-1,N=0;N<4;N++){if(!R){r.log("Missing end?",L,A);break}for(Y(R)&&!Q(R)?B=k[1]:ee(R)?B=k[0]:X(R)?B=k[3]:Q(R)&&(B=k[2]),O=0;O<A.edgepaths.length;O++){var Z=A.edgepaths[O][0];Math.abs(R[0]-B[0])<.01?Math.abs(R[0]-Z[0])<.01&&(Z[1]-R[1])*(B[1]-Z[1])>=0&&(B=Z,D=O):Math.abs(R[1]-B[1])<.01?Math.abs(R[1]-Z[1])<.01&&(Z[0]-R[0])*(B[0]-Z[0])>=0&&(B=Z,D=O):r.log("endpt to newendpt is not vert. or horz.",R,B,Z)}if(R=B,D>=0)break;T+="L"+B}if(D===A.edgepaths.length){r.log("unclosed perimeter path");break}L=D,I=C.indexOf(L)===-1,I&&(L=C[0],T+="Z")}for(L=0;L<A.paths.length;L++)T+=a.smoothclosed(A.paths[L],A.smoothing);return T}function _(A,k,T,L,C){var I=r.ensureSingle(A,"g","contourlines"),R=C.showlines!==!1,B=C.showlabels,N=R&&B,D=e.createLines(I,R||B,k),O=e.createLineClip(I,N,T,L.trace.uid),$=A.selectAll("g.contourlabels").data(B?[0]:[]);if($.exit().remove(),$.enter().append("g").classed("contourlabels",!0),B){var Y=[],X=[];r.clearLocationCache();var ee=e.labelFormatter(T,L),Q=a.tester.append("text").attr("data-notex",1).call(a.font,C.labelfont),Z=k[0].xaxis,q=k[0].yaxis,ae=Z._length,ie=q._length,we=Z.range,Te=q.range,he=r.aggNums(Math.min,null,L.x),xe=r.aggNums(Math.max,null,L.x),Se=r.aggNums(Math.min,null,L.y),ye=r.aggNums(Math.max,null,L.y),re=Math.max(Z.c2p(he,!0),0),se=Math.min(Z.c2p(xe,!0),ae),de=Math.max(q.c2p(ye,!0),0),Me=Math.min(q.c2p(Se,!0),ie),Ie={};we[0]<we[1]?(Ie.left=re,Ie.right=se):(Ie.left=se,Ie.right=re),Te[0]<Te[1]?(Ie.top=de,Ie.bottom=Me):(Ie.top=Me,Ie.bottom=de),Ie.middle=(Ie.top+Ie.bottom)/2,Ie.center=(Ie.left+Ie.right)/2,Y.push([[Ie.left,Ie.top],[Ie.right,Ie.top],[Ie.right,Ie.bottom],[Ie.left,Ie.bottom]]);var Ee=Math.sqrt(ae*ae+ie*ie),qe=p.LABELDISTANCE*Ee/Math.max(1,k.length/p.LABELINCREASE);D.each(function(be){var oe=e.calcTextOpts(be.level,ee,Q,T);t.select(this).selectAll("path").each(function(){var ce=this,ue=r.getVisibleSegment(ce,Ie,oe.height/2);if(!!ue&&!(ue.len<(oe.width+oe.height)*p.LABELMIN))for(var Re=Math.min(Math.ceil(ue.len/qe),p.LABELMAX),Xe=0;Xe<Re;Xe++){var Ke=e.findBestTextLocation(ce,ue,oe,X,Ie);if(!Ke)break;e.addLabelData(Ke,oe,X,Y)}})}),Q.remove(),e.drawLabels($,X,T,O,N?Y:null)}B&&!R&&D.remove()}e.createLines=function(A,k,T){var L=T[0].smoothing,C=A.selectAll("g.contourlevel").data(k?T:[]);if(C.exit().remove(),C.enter().append("g").classed("contourlevel",!0),k){var I=C.selectAll("path.openline").data(function(B){return B.pedgepaths||B.edgepaths});I.exit().remove(),I.enter().append("path").classed("openline",!0),I.attr("d",function(B){return a.smoothopen(B,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var R=C.selectAll("path.closedline").data(function(B){return B.ppaths||B.paths});R.exit().remove(),R.enter().append("path").classed("closedline",!0),R.attr("d",function(B){return a.smoothclosed(B,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return C},e.createLineClip=function(A,k,T,L){var C=T._fullLayout._clips,I=k?"clipline"+L:null,R=C.selectAll("#"+I).data(k?[0]:[]);return R.exit().remove(),R.enter().append("clipPath").classed("contourlineclip",!0).attr("id",I),a.setClipUrl(A,I,T),R},e.labelFormatter=function(A,k){var T=A._fullLayout,L=k.trace,C=L.contours,I={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(C.labelformat)I.tickformat=C.labelformat,s(I,T);else{var R=n.extractOpts(L);if(R&&R.colorbar&&R.colorbar._axis)I=R.colorbar._axis;else{if(C.type==="constraint"){var B=C.value;Array.isArray(B)?I.range=[B[0],B[B.length-1]]:I.range=[B,B]}else I.range=[C.start,C.end],I.nticks=(C.end-C.start)/C.size;I.range[0]===I.range[1]&&(I.range[1]+=I.range[0]||1),I.nticks||(I.nticks=1e3),s(I,T),i.prepTicks(I),I._tmin=null,I._tmax=null}}return function(N){return i.tickText(I,N).text}},e.calcTextOpts=function(A,k,T,L){var C=k(A);T.text(C).call(o.convertToTspans,L);var I=T.node(),R=a.bBox(I,!0);return{text:C,width:R.width,height:R.height,fontSize:+I.style["font-size"].replace("px",""),level:A,dy:(R.top+R.bottom)/2}},e.findBestTextLocation=function(A,k,T,L,C){var I=T.width,R,B,N,D,O;k.isClosed?(B=k.len/d.INITIALSEARCHPOINTS,R=k.min+B/2,N=k.max):(B=(k.len-I)/(d.INITIALSEARCHPOINTS+1),R=k.min+B+I/2,N=k.max-(B+I)/2);for(var $=1/0,Y=0;Y<d.ITERATIONS;Y++){for(var X=R;X<N;X+=B){var ee=r.getTextLocation(A,k.total,X,I),Q=S(ee,T,L,C);Q<$&&($=Q,O=ee,D=X)}if($>d.MAXCOST*2)break;Y&&(B/=2),R=D-B/2,N=R+B*1.5}if($<=d.MAXCOST)return O};function S(A,k,T,L){var C=k.width/2,I=k.height/2,R=A.x,B=A.y,N=A.theta,D=Math.cos(N)*C,O=Math.sin(N)*C,$=(R>L.center?L.right-R:R-L.left)/(D+Math.abs(Math.sin(N)*I)),Y=(B>L.middle?L.bottom-B:B-L.top)/(Math.abs(O)+Math.cos(N)*I);if($<1||Y<1)return 1/0;var X=d.EDGECOST*(1/($-1)+1/(Y-1));X+=d.ANGLECOST*N*N;for(var ee=R-D,Q=B-O,Z=R+D,q=B+O,ae=0;ae<T.length;ae++){var ie=T[ae],we=Math.cos(ie.theta)*ie.width/2,Te=Math.sin(ie.theta)*ie.width/2,he=r.segmentDistance(ee,Q,Z,q,ie.x-we,ie.y-Te,ie.x+we,ie.y+Te)*2/(k.height+ie.height),xe=ie.level===k.level,Se=xe?d.SAMELEVELDISTANCE:1;if(he<=Se)return 1/0;var ye=d.NEIGHBORCOST*(xe?d.SAMELEVELFACTOR:1);X+=ye/(he-Se)}return X}e.addLabelData=function(A,k,T,L){var C=k.fontSize,I=k.width+C/3,R=Math.max(0,k.height-C/3),B=A.x,N=A.y,D=A.theta,O=Math.sin(D),$=Math.cos(D),Y=function(ee,Q){return[B+ee*$-Q*O,N+ee*O+Q*$]},X=[Y(-I/2,-R/2),Y(-I/2,R/2),Y(I/2,R/2),Y(I/2,-R/2)];T.push({text:k.text,x:B,y:N,dy:k.dy,theta:D,level:k.level,width:I,height:R}),L.push(X)},e.drawLabels=function(A,k,T,L,C){var I=A.selectAll("text").data(k,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(I.exit().remove(),I.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var O=D.x+Math.sin(D.theta)*D.dy,$=D.y-Math.cos(D.theta)*D.dy;t.select(this).text(D.text).attr({x:O,y:$,transform:"rotate("+180*D.theta/Math.PI+" "+O+" "+$+")"}).call(o.convertToTspans,T)}),C){for(var R="",B=0;B<C.length;B++)R+="M"+C[B].join("L")+"Z";var N=r.ensureSingle(L,"path","");N.attr("d",R)}};function M(A,k,T,L,C){var I=L.trace,R=T._fullLayout._clips,B="clip"+I.uid,N=R.selectAll("#"+B).data(I.connectgaps?[]:[0]);if(N.enter().append("clipPath").classed("contourclip",!0).attr("id",B),N.exit().remove(),I.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:k.xaxis,yaxis:k.yaxis,x:L.x,y:L.y,z:w(L),smoothing:0};u([D]),f([D]),v([D],{type:"levels"});var O=r.ensureSingle(N,"path","");O.attr("d",(D.prefixBoundary?"M"+C.join("L")+"Z":"")+y(D,C))}else B=null;a.setClipUrl(A,B,T)}function w(A){var k=A.trace._emptypoints,T=[],L=A.z.length,C=A.z[0].length,I,R=[],B;for(I=0;I<C;I++)R.push(1);for(I=0;I<L;I++)T.push(R.slice());for(I=0;I<k.length;I++)B=k[I],T[B[0]][B[1]]=0;return A.zmask=T,T}})(YC);var iHe=Ra.exports,oO=Qo,oHe=qC,Pie=function(t){var r=t.contours,a=r.start,n=oHe(r),o=r.size||1,i=Math.floor((n-a)/o)+1,s=r.coloring==="lines"?0:1,l=oO.extractOpts(t);isFinite(o)||(o=1,i=1);var u=l.reversescale?oO.flipScale(l.colorscale):l.colorscale,f=u.length,c=new Array(f),h=new Array(f),v,p;if(r.coloring==="heatmap"){var d=l.min,g=l.max;for(p=0;p<f;p++)v=u[p],c[p]=v[0]*(g-d)+d,h[p]=v[1];var m=iHe.extent([d,g,r.start,r.start+o*(i-1)]),y=m[d<g?0:1],_=m[d<g?1:0];y!==d&&(c.splice(0,0,y),h.splice(0,0,h[0])),_!==g&&(c.push(_),h.push(h[h.length-1]))}else for(p=0;p<f;p++)v=u[p],c[p]=(v[0]*(i+s-1)-s/2)*o+a,h[p]=v[1];return oO.makeColorScaleFunc({domain:c,range:h},{noNumericCheck:!0})},KC=Ra.exports,Iie=xn.exports,sHe=H7,lHe=Pie,sO=function(t){var r=KC.select(t).selectAll("g.contour");r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var n=KC.select(this),o=a[0].trace,i=o.contours,s=o.line,l=i.size||1,u=i.start,f=i.type==="constraint",c=!f&&i.coloring==="lines",h=!f&&i.coloring==="fill",v=c||h?lHe(o):null;n.selectAll("g.contourlevel").each(function(g){KC.select(this).selectAll("path").call(Iie.lineGroupStyle,s.width,c?v(g.level):s.color,s.dash)});var p=i.labelfont;if(n.selectAll("g.contourlabels text").each(function(g){Iie.font(KC.select(this),{family:p.family,size:p.size,color:p.color||(c?v(g.level):s.color)})}),f)n.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(h){var d;n.selectAll("g.contourfill path").style("fill",function(g){return d===void 0&&(d=g.level),v(g.level+.5*l)}),d===void 0&&(d=u),n.selectAll("g.contourbg path").style("fill",v(d-.5*l))}}),sHe(t)},Die=Qo,uHe=Pie,fHe=qC;function cHe(e,t,r){var a=t.contours,n=t.line,o=a.size||1,i=a.coloring,s=uHe(t);if(i==="heatmap"){var l=Die.extractOpts(t);r._fillgradient=l.reversescale?Die.flipScale(l.colorscale):l.colorscale,r._zrange=[l.min,l.max]}else i==="fill"&&(r._fillcolor=s);r._line={color:i==="lines"?s:n.color,width:a.showlines!==!1?n.width:0,dash:n.dash},r._levels={start:a.start,end:fHe(a),size:o}}var lO={min:"zmin",max:"zmax",calc:cHe},JC=Oa.exports,hHe=G7,Rie=function(t,r,a,n,o){o||(o={}),o.isContour=!0;var i=hHe(t,r,a,n,o);return i&&i.forEach(function(s){var l=s.trace;l.contours.type==="constraint"&&(l.fillcolor&&JC.opacity(l.fillcolor)?s.color=JC.addOpacity(l.fillcolor,1):l.contours.showlines&&JC.opacity(l.line.color)&&(s.color=JC.addOpacity(l.line.color,1)))}),i},vHe={attributes:hie,supplyDefaults:WUe,crossTraceDefaults:W7,calc:xie,plot:YC.plot,layerName:"contourlayer",style:sO,colorbar:lO,hoverPoints:Rie,moduleType:"trace",name:"histogram2dcontour",basePlotModule:Ii,categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}},dHe=vHe,zie=gn,pHe=vie,Fie=Oa.exports,Oie=Fie.addOpacity,gHe=Fie.opacity,Nie=VC,mHe=Nie.CONSTRAINT_REDUCTION,yHe=Nie.COMPARISON_OPS2,Bie=function(t,r,a,n,o,i){var s=r.contours,l,u,f,c=a("contours.operation");if(s._operation=mHe[c],xHe(a,s),c==="="?l=s.showlines=!0:(l=a("contours.showlines"),f=a("fillcolor",Oie((t.line||{}).color||o,.5))),l){var h=f&&gHe(f)?Oie(r.fillcolor,1):o;u=a("line.color",h),a("line.width",2),a("line.dash")}a("line.smoothing"),pHe(a,n,u,i)};function xHe(e,t){var r;yHe.indexOf(t.operation)===-1?(e("contours.value",[0,1]),Array.isArray(t.value)?t.value.length>2?t.value=t.value.slice(2):t.length===0?t.value=[0,1]:t.length<2?(r=parseFloat(t.value[0]),t.value=[r,r+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:zie(t.value)&&(r=parseFloat(t.value),t.value=[r,r+1])):(e("contours.value",0),zie(t.value)||(Array.isArray(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}var uO=bt.exports,bHe=DC,_He=a0,wHe=Bie,THe=eO,AHe=tO,SHe=RC,$ie=jC,MHe=function(t,r,a,n){function o(u,f){return uO.coerce(t,r,$ie,u,f)}function i(u){return uO.coerce2(t,r,$ie,u)}var s=bHe(t,r,o,n);if(!s){r.visible=!1;return}_He(t,r,n,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hoverongaps"),o("hovertemplate");var l=o("contours.type")==="constraint";o("connectgaps",uO.isArray1D(r.z)),l?wHe(t,r,o,n,a):(THe(t,r,o,i),AHe(t,r,o,n)),r.contours&&r.contours.coloring==="heatmap"&&SHe(o,n)},kHe={attributes:jC,supplyDefaults:MHe,calc:xie,plot:YC.plot,style:sO,colorbar:lO,hoverPoints:Rie,moduleType:"trace",name:"contour",basePlotModule:Ii,categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{description:["The data from which contour lines are computed is set in `z`.","Data in `z` must be a {2D array} of numbers.","Say that `z` has N rows and M columns, then by default,","these N rows correspond to N y coordinates","(set in `y` or auto-generated) and the M columns","correspond to M x coordinates (set in `x` or auto-generated).","By setting `transpose` to *true*, the above behavior is flipped."].join(" ")}},EHe=kHe,CHe=zn.hovertemplateAttrs,LHe=zn.texttemplateAttrs,dh=Cl,PHe=ao,Uie=bo,IHe=Bd.dash,Ey=cn.extendFlat,Jg=dh.marker,QC=dh.line,DHe=Jg.line,Hie={a:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},b:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},c:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},sum:{valType:"number",dflt:0,min:0,editType:"calc",description:["The number each triplet should sum to,","if only two of `a`, `b`, and `c` are provided.","This overrides `ternary<i>.sum` to normalize this specific","trace, but does not affect the values displayed on the axes.","0 (or missing) means to use ternary<i>.sum"].join(" ")},mode:Ey({},dh.mode,{dflt:"markers"}),text:Ey({},dh.text,{description:["Sets text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:LHe({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:Ey({},dh.hovertext,{description:["Sets hover text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:QC.color,width:QC.width,dash:IHe,shape:Ey({},QC.shape,{values:["linear","spline"]}),smoothing:QC.smoothing,editType:"calc"},connectgaps:dh.connectgaps,cliponaxis:dh.cliponaxis,fill:Ey({},dh.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:dh.fillcolor,marker:Ey({symbol:Jg.symbol,opacity:Jg.opacity,maxdisplayed:Jg.maxdisplayed,size:Jg.size,sizeref:Jg.sizeref,sizemin:Jg.sizemin,sizemode:Jg.sizemode,line:Ey({width:DHe.width,editType:"calc"},Uie("marker.line")),gradient:Jg.gradient,editType:"calc"},Uie("marker")),textfont:dh.textfont,textposition:dh.textposition,selected:dh.selected,unselected:dh.unselected,hoverinfo:Ey({},PHe.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:dh.hoveron,hovertemplate:CHe()},Gie=bt.exports,RHe=Hg,P2=Ro,zHe=Wd,FHe=n0,Vie=WT,OHe=i0,NHe=Gg,BHe=Hie,$He=function(t,r,a,n){function o(h,v){return Gie.coerce(t,r,BHe,h,v)}var i=o("a"),s=o("b"),l=o("c"),u;if(i?(u=i.length,s?(u=Math.min(u,s.length),l&&(u=Math.min(u,l.length))):l?u=Math.min(u,l.length):u=0):s&&l&&(u=Math.min(s.length,l.length)),!u){r.visible=!1;return}r._length=u,o("sum"),o("text"),o("hovertext"),r.hoveron!=="fills"&&o("hovertemplate");var f=u<RHe.PTS_LINESONLY?"lines+markers":"lines";o("mode",f),P2.hasLines(r)&&(FHe(t,r,a,n,o),Vie(t,r,o),o("connectgaps")),P2.hasMarkers(r)&&zHe(t,r,a,n,o,{gradient:!0}),P2.hasText(r)&&(o("texttemplate"),OHe(t,r,n,o));var c=[];(P2.hasMarkers(r)||P2.hasText(r))&&(o("cliponaxis"),o("marker.maxdisplayed"),c.push("points")),o("fill"),r.fill!=="none"&&(NHe(t,r,a,o),P2.hasLines(r)||Vie(t,r,o)),(r.fill==="tonext"||r.fill==="toself")&&c.push("fills"),o("hoveron",c.join("+")||"points"),Gie.coerceSelectionMarkerOpacity(r,o)},fO=rn.exports,UHe=function(t,r,a){var n={},o=a[r.subplot]._subplot;return n.aLabel=fO.tickText(o.aaxis,t.a,!0).text,n.bLabel=fO.tickText(o.baxis,t.b,!0).text,n.cLabel=fO.tickText(o.caxis,t.c,!0).text,n},cO=gn,HHe=Xd,GHe=Vg,VHe=Zd,jHe=Kd.calcMarkerSize,jie=["a","b","c"],qie={a:["b","c"],b:["a","c"],c:["a","b"]},qHe=function(t,r){var a=t._fullLayout[r.subplot],n=a.sum,o=r.sum||n,i={a:r.a,b:r.b,c:r.c},s,l,u,f,c,h;for(s=0;s<jie.length;s++)if(u=jie[s],!i[u]){for(c=i[qie[u][0]],h=i[qie[u][1]],f=new Array(c.length),l=0;l<c.length;l++)f[l]=o-c[l]-h[l];i[u]=f}var v=r._length,p=new Array(v),d,g,m,y,_,S;for(s=0;s<v;s++)d=i.a[s],g=i.b[s],m=i.c[s],cO(d)&&cO(g)&&cO(m)?(d=+d,g=+g,m=+m,y=n/(d+g+m),y!==1&&(d*=y,g*=y,m*=y),S=d,_=m-g,p[s]={x:_,y:S,a:d,b:g,c:m}):p[s]={x:!1,y:!1};return jHe(r,v),HHe(t,r),GHe(p,r),VHe(p,r),p},YHe=JT,WHe=function(t,r,a){var n=r.plotContainer;n.select(".scatterlayer").selectAll("*").remove();var o={xaxis:r.xaxis,yaxis:r.yaxis,plot:n,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},i=r.layers.frontplot.select("g.scatterlayer");YHe(t,o,a,i)},XHe=eA,ZHe=function(t,r,a,n){var o=XHe(t,r,a,n);if(!o||o[0].index===!1)return;var i=o[0];if(i.index===void 0){var s=1-i.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return i.x0=Math.max(Math.min(i.x0,f),u),i.x1=Math.max(Math.min(i.x1,f),u),o}var c=i.cd[i.index],h=i.trace,v=i.subplot;i.a=c.a,i.b=c.b,i.c=c.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var p={};p[h.subplot]={_subplot:v};var d=h._module.formatLabels(c,h,p);i.aLabel=d.aLabel,i.bLabel=d.bLabel,i.cLabel=d.cLabel;var g=c.hi||h.hoverinfo,m=[];function y(S,M){m.push(S._hovertitle+": "+M)}if(!h.hovertemplate){var _=g.split("+");_.indexOf("all")!==-1&&(_=["a","b","c"]),_.indexOf("a")!==-1&&y(v.aaxis,i.aLabel),_.indexOf("b")!==-1&&y(v.baxis,i.bLabel),_.indexOf("c")!==-1&&y(v.caxis,i.cLabel)}return i.extraText=m.join("<br>"),i.hovertemplate=h.hovertemplate,o},KHe=function(t,r,a,n,o){if(r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),n[o]){var i=n[o];t.a=i.a,t.b=i.b,t.c=i.c}else t.a=r.a,t.b=r.b,t.c=r.c;return t},sp={},Yie=Ra.exports,JHe=Hl.exports,hO=Pa,Qg=bt.exports,u0=Qg.strTranslate,eL=Qg._,I2=Oa.exports,tL=xn.exports,PA=Og,vO=cn.extendFlat,QHe=Eo.exports,Cy=rn.exports,Wie=kf.exports,Xie=Rs,Zie=Jp,Kie=Zie.freeMode,eGe=Zie.rectMode,dO=H_,tGe=lu.prepSelect,rGe=lu.selectOnClick,aGe=lu.clearSelect,nGe=lu.clearSelectionsCache,Jie=Sl;function Qie(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}var iGe=Qie,em=Qie.prototype;em.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}};em.plot=function(e,t){var r=this,a=t[r.id],n=t._size;r._hasClipOnAxisFalse=!1;for(var o=0;o<e.length;o++){var i=e[o][0].trace;if(i.cliponaxis===!1){r._hasClipOnAxisFalse=!0;break}}r.updateLayers(a),r.adjustLayout(a,n),QHe.generalUpdatePerTraceModule(r.graphDiv,r,e,a),r.layers.plotbg.select("path").call(I2.fill,a.bgcolor)};em.makeFramework=function(e){var t=this,r=t.graphDiv,a=e[t.id],n=t.clipId="clip"+t.layoutId+t.id,o=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=Qg.ensureSingleById(e._clips,"clipPath",n,function(i){i.append("path").attr("d","M0,0Z")}),t.clipDefRelative=Qg.ensureSingleById(e._clips,"clipPath",o,function(i){i.append("path").attr("d","M0,0Z")}),t.plotContainer=Qg.ensureSingle(t.container,"g",t.id),t.updateLayers(a),tL.setClipUrl(t.layers.backplot,n,r),tL.setClipUrl(t.layers.grids,n,r)};em.updateLayers=function(e){var t=this,r=t.layers,a=["draglayer","plotbg","backplot","grids"];e.aaxis.layer==="below traces"&&a.push("aaxis","aline"),e.baxis.layer==="below traces"&&a.push("baxis","bline"),e.caxis.layer==="below traces"&&a.push("caxis","cline"),a.push("frontplot"),e.aaxis.layer==="above traces"&&a.push("aaxis","aline"),e.baxis.layer==="above traces"&&a.push("baxis","bline"),e.caxis.layer==="above traces"&&a.push("caxis","cline");var n=t.plotContainer.selectAll("g.toplevel").data(a,String),o=["agrid","bgrid","cgrid"];n.enter().append("g").attr("class",function(i){return"toplevel "+i}).each(function(i){var s=Yie.select(this);r[i]=s,i==="frontplot"?s.append("g").classed("scatterlayer",!0):i==="backplot"?s.append("g").classed("maplayer",!0):i==="plotbg"?s.append("path").attr("d","M0,0Z"):i==="aline"||i==="bline"||i==="cline"?s.append("path"):i==="grids"&&o.forEach(function(l){r[l]=s.append("g").classed("grid "+l,!0)})}),n.order()};var D2=Math.sqrt(4/3);em.adjustLayout=function(e,t){var r=this,a=e.domain,n=(a.x[0]+a.x[1])/2,o=(a.y[0]+a.y[1])/2,i=a.x[1]-a.x[0],s=a.y[1]-a.y[0],l=i*t.w,u=s*t.h,f=e.sum,c=e.aaxis.min,h=e.baxis.min,v=e.caxis.min,p,d,g,m,y,_;l>D2*u?(m=u,g=m*D2):(g=l,m=g/D2),y=i*g/l,_=s*m/u,p=t.l+t.w*n-g/2,d=t.t+t.h*(1-o)-m/2,r.x0=p,r.y0=d,r.w=g,r.h=m,r.sum=f,r.xaxis={type:"linear",range:[c+2*v-f,f-c-2*h],domain:[n-y/2,n+y/2],_id:"x"},PA(r.xaxis,r.graphDiv._fullLayout),r.xaxis.setScale(),r.xaxis.isPtWithinRange=function(B){return B.a>=r.aaxis.range[0]&&B.a<=r.aaxis.range[1]&&B.b>=r.baxis.range[1]&&B.b<=r.baxis.range[0]&&B.c>=r.caxis.range[1]&&B.c<=r.caxis.range[0]},r.yaxis={type:"linear",range:[c,f-h-v],domain:[o-_/2,o+_/2],_id:"y"},PA(r.yaxis,r.graphDiv._fullLayout),r.yaxis.setScale(),r.yaxis.isPtWithinRange=function(){return!0};var S=r.yaxis.domain[0],M=r.aaxis=vO({},e.aaxis,{range:[c,f-h-v],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[S,S+_*D2],anchor:"free",position:0,_id:"y",_length:g});PA(M,r.graphDiv._fullLayout),M.setScale();var w=r.baxis=vO({},e.baxis,{range:[f-c-v,h],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:g});PA(w,r.graphDiv._fullLayout),w.setScale();var A=r.caxis=vO({},e.caxis,{range:[f-c-h,v],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[S,S+_*D2],anchor:"free",position:0,_id:"y",_length:g});PA(A,r.graphDiv._fullLayout),A.setScale();var k="M"+p+","+(d+m)+"h"+g+"l-"+g/2+",-"+m+"Z";r.clipDef.select("path").attr("d",k),r.layers.plotbg.select("path").attr("d",k);var T="M0,"+m+"h"+g+"l-"+g/2+",-"+m+"Z";r.clipDefRelative.select("path").attr("d",T);var L=u0(p,d);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",L),r.clipDefRelative.select("path").attr("transform",null);var C=u0(p-w._offset,d+m);r.layers.baxis.attr("transform",C),r.layers.bgrid.attr("transform",C);var I=u0(p+g/2,d)+"rotate(30)"+u0(0,-M._offset);r.layers.aaxis.attr("transform",I),r.layers.agrid.attr("transform",I);var R=u0(p+g/2,d)+"rotate(-30)"+u0(0,-A._offset);r.layers.caxis.attr("transform",R),r.layers.cgrid.attr("transform",R),r.drawAxes(!0),r.layers.aline.select("path").attr("d",M.showline?"M"+p+","+(d+m)+"l"+g/2+",-"+m:"M0,0").call(I2.stroke,M.linecolor||"#000").style("stroke-width",(M.linewidth||0)+"px"),r.layers.bline.select("path").attr("d",w.showline?"M"+p+","+(d+m)+"h"+g:"M0,0").call(I2.stroke,w.linecolor||"#000").style("stroke-width",(w.linewidth||0)+"px"),r.layers.cline.select("path").attr("d",A.showline?"M"+(p+g/2)+","+d+"l"+g/2+","+m:"M0,0").call(I2.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px"),r.graphDiv._context.staticPlot||r.initInteractions(),tL.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};em.drawAxes=function(e){var t=this,r=t.graphDiv,a=t.id.substr(7)+"title",n=t.layers,o=t.aaxis,i=t.baxis,s=t.caxis;if(t.drawAx(o),t.drawAx(i),t.drawAx(s),e){var l=Math.max(o.showticklabels?o.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0)),u=(i.showticklabels?i.tickfont.size:0)+(i.ticks==="outside"?i.ticklen:0)+3;n["a-title"]=dO.draw(r,"a"+a,{propContainer:o,propName:t.id+".aaxis.title",placeholder:eL(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-o.title.font.size/3-l,"text-anchor":"middle"}}),n["b-title"]=dO.draw(r,"b"+a,{propContainer:i,propName:t.id+".baxis.title",placeholder:eL(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+i.title.font.size*.83+u,"text-anchor":"middle"}}),n["c-title"]=dO.draw(r,"c"+a,{propContainer:s,propName:t.id+".caxis.title",placeholder:eL(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+s.title.font.size*.83+u,"text-anchor":"middle"}})}};em.drawAx=function(e){var t=this,r=t.graphDiv,a=e._name,n=a.charAt(0),o=e._id,i=t.layers[a],s=30,l=n+"tickLayout",u=oGe(e);t[l]!==u&&(i.selectAll("."+o+"tick").remove(),t[l]=u),e.setScale();var f=Cy.calcTicks(e),c=Cy.clipEnds(e,f),h=Cy.makeTransTickFn(e),v=Cy.getTickSigns(e)[2],p=Qg.deg2rad(s),d=v*(e.linewidth||1)/2,g=v*e.ticklen,m=t.w,y=t.h,_=n==="b"?"M0,"+d+"l"+Math.sin(p)*g+","+Math.cos(p)*g:"M"+d+",0l"+Math.cos(p)*g+","+-Math.sin(p)*g,S={a:"M0,0l"+y+",-"+m/2,b:"M0,0l-"+m/2+",-"+y,c:"M0,0l-"+y+","+m/2}[n];Cy.drawTicks(r,e,{vals:e.ticks==="inside"?c:f,layer:i,path:_,transFn:h,crisp:!1}),Cy.drawGrid(r,e,{vals:c,layer:t.layers[n+"grid"],path:S,transFn:h,crisp:!1}),Cy.drawLabels(r,e,{vals:f,layer:i,transFn:h,labelFns:Cy.makeLabelFns(e,0,s)})};function oGe(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var jl=Jie.MINZOOM/2+.87,sGe="m-0.87,.5h"+jl+"v3h-"+(jl+5.2)+"l"+(jl/2+2.6)+",-"+(jl*.87+4.5)+"l2.6,1.5l-"+jl/2+","+jl*.87+"Z",lGe="m0.87,.5h-"+jl+"v3h"+(jl+5.2)+"l-"+(jl/2+2.6)+",-"+(jl*.87+4.5)+"l-2.6,1.5l"+jl/2+","+jl*.87+"Z",uGe="m0,1l"+jl/2+","+jl*.87+"l2.6,-1.5l-"+(jl/2+2.6)+",-"+(jl*.87+4.5)+"l-"+(jl/2+2.6)+","+(jl*.87+4.5)+"l2.6,1.5l"+jl/2+",-"+jl*.87+"Z",fGe="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",eoe=!0;em.clearSelect=function(){nGe(this.dragOptions),aGe(this.dragOptions.gd)};em.initInteractions=function(){var e=this,t=e.layers.plotbg.select("path").node(),r=e.graphDiv,a=r._fullLayout._zoomlayer,n,o;this.dragOptions={element:t,gd:r,plotinfo:{id:e.id,domain:r._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(C,I,R){e.dragOptions.xaxes=[e.xaxis],e.dragOptions.yaxes=[e.yaxis],n=r._fullLayout._invScaleX,o=r._fullLayout._invScaleY;var B=e.dragOptions.dragmode=r._fullLayout.dragmode;Kie(B)?e.dragOptions.minDrag=1:e.dragOptions.minDrag=void 0,B==="zoom"?(e.dragOptions.moveFn=w,e.dragOptions.clickFn=m,e.dragOptions.doneFn=A,y(C,I,R)):B==="pan"?(e.dragOptions.moveFn=T,e.dragOptions.clickFn=m,e.dragOptions.doneFn=L,k(),e.clearSelect(r)):(eGe(B)||Kie(B))&&tGe(C,I,R,e.dragOptions,B)}};var i,s,l,u,f,c,h,v,p,d;function g(C){var I={};return I[e.id+".aaxis.min"]=C.a,I[e.id+".baxis.min"]=C.b,I[e.id+".caxis.min"]=C.c,I}function m(C,I){var R=r._fullLayout.clickmode;toe(r),C===2&&(r.emit("plotly_doubleclick",null),hO.call("_guiRelayout",r,g({a:0,b:0,c:0}))),R.indexOf("select")>-1&&C===1&&rGe(I,r,[e.xaxis],[e.yaxis],e.id,e.dragOptions),R.indexOf("event")>-1&&Xie.click(r,I,e.id)}function y(C,I,R){var B=t.getBoundingClientRect();i=I-B.left,s=R-B.top,r._fullLayout._calcInverseTransform(r);var N=r._fullLayout._invTransform,D=Qg.apply3DTransform(N)(i,s);i=D[0],s=D[1],l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l,u=e.aaxis.range[1]-l.a,c=JHe(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),h="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",v=!1,p=a.append("path").attr("class","zoombox").attr("transform",u0(e.x0,e.y0)).style({fill:c>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",h),d=a.append("path").attr("class","zoombox-corners").attr("transform",u0(e.x0,e.y0)).style({fill:I2.background,stroke:I2.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),e.clearSelect(r)}function _(C,I){return 1-I/e.h}function S(C,I){return 1-(C+(e.h-I)/Math.sqrt(3))/e.w}function M(C,I){return(C-(e.h-I)/Math.sqrt(3))/e.w}function w(C,I){var R=i+C*n,B=s+I*o,N=Math.max(0,Math.min(1,_(i,s),_(R,B))),D=Math.max(0,Math.min(1,S(i,s),S(R,B))),O=Math.max(0,Math.min(1,M(i,s),M(R,B))),$=(N/2+O)*e.w,Y=(1-N/2-D)*e.w,X=($+Y)/2,ee=Y-$,Q=(1-N)*e.h,Z=Q-ee/D2;ee<Jie.MINZOOM?(f=l,p.attr("d",h),d.attr("d","M0,0Z")):(f={a:l.a+N*u,b:l.b+D*u,c:l.c+O*u},p.attr("d",h+"M"+$+","+Q+"H"+Y+"L"+X+","+Z+"L"+$+","+Q+"Z"),d.attr("d","M"+i+","+s+fGe+"M"+$+","+Q+sGe+"M"+Y+","+Q+lGe+"M"+X+","+Z+uGe)),v||(p.transition().style("fill",c>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),d.transition().style("opacity",1).duration(200),v=!0),r.emit("plotly_relayouting",g(f))}function A(){toe(r),f!==l&&(hO.call("_guiRelayout",r,g(f)),eoe&&r.data&&r._context.showTips&&(Qg.notifier(eL(r,"Double-click to zoom back out"),"long"),eoe=!1))}function k(){l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l}function T(C,I){var R=C/e.xaxis._m,B=I/e.yaxis._m;f={a:l.a-B,b:l.b+(R+B)/2,c:l.c-(R-B)/2};var N=[f.a,f.b,f.c].sort(Qg.sorterAsc),D={a:N.indexOf(f.a),b:N.indexOf(f.b),c:N.indexOf(f.c)};N[0]<0&&(N[1]+N[0]/2<0?(N[2]+=N[0]+N[1],N[0]=N[1]=0):(N[2]+=N[0]/2,N[1]+=N[0]/2,N[0]=0),f={a:N[D.a],b:N[D.b],c:N[D.c]},I=(l.a-f.a)*e.yaxis._m,C=(l.c-f.c-l.b+f.b)*e.xaxis._m);var O=u0(e.x0+C,e.y0+I);e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",O);var $=u0(-C,-I);e.clipDefRelative.select("path").attr("transform",$),e.aaxis.range=[f.a,e.sum-f.b-f.c],e.baxis.range=[e.sum-f.a-f.c,f.b],e.caxis.range=[e.sum-f.a-f.b,f.c],e.drawAxes(!1),e._hasClipOnAxisFalse&&e.plotContainer.select(".scatterlayer").selectAll(".trace").call(tL.hideOutsideRangePoints,e),r.emit("plotly_relayouting",g(f))}function L(){hO.call("_guiRelayout",r,g(f))}t.onmousemove=function(C){Xie.hover(r,C,e.id),r._fullLayout._lasthover=t,r._fullLayout._hoversubplot=e.id},t.onmouseout=function(C){r._dragging||Wie.unhover(r,C)},Wie.init(this.dragOptions)};function toe(e){Yie.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var pO={exports:{}},cGe=us,hGe=Fo.attributes,Yi=Zu,vGe=Jo.overrideAll,gO=cn.extendFlat,mO={title:{text:Yi.title.text,font:Yi.title.font},color:Yi.color,tickmode:Yi.tickmode,nticks:gO({},Yi.nticks,{dflt:6,min:1}),tick0:Yi.tick0,dtick:Yi.dtick,tickvals:Yi.tickvals,ticktext:Yi.ticktext,ticks:Yi.ticks,ticklen:Yi.ticklen,tickwidth:Yi.tickwidth,tickcolor:Yi.tickcolor,showticklabels:Yi.showticklabels,showtickprefix:Yi.showtickprefix,tickprefix:Yi.tickprefix,showticksuffix:Yi.showticksuffix,ticksuffix:Yi.ticksuffix,showexponent:Yi.showexponent,exponentformat:Yi.exponentformat,minexponent:Yi.minexponent,separatethousands:Yi.separatethousands,tickfont:Yi.tickfont,tickangle:Yi.tickangle,tickformat:Yi.tickformat,tickformatstops:Yi.tickformatstops,hoverformat:Yi.hoverformat,showline:gO({},Yi.showline,{dflt:!0}),linecolor:Yi.linecolor,linewidth:Yi.linewidth,showgrid:gO({},Yi.showgrid,{dflt:!0}),gridcolor:Yi.gridcolor,gridwidth:Yi.gridwidth,layer:Yi.layer,min:{valType:"number",dflt:0,min:0,description:["The minimum value visible on this axis.","The maximum is determined by the sum minus the minimum","values of the other two axes. The full view corresponds to","all the minima set to zero."].join(" ")},_deprecated:{title:Yi._deprecated.title,titlefont:Yi._deprecated.titlefont}},rL=pO.exports=vGe({domain:hGe({name:"ternary"}),bgcolor:{valType:"color",dflt:cGe.background,description:"Set the background color of the subplot"},sum:{valType:"number",dflt:1,min:0,description:["The number each triplet should sum to,","and the maximum range of each axis"].join(" ")},aaxis:mO,baxis:mO,caxis:mO},"plot","from-root");rL.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min` and `title`,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")};rL.aaxis.uirevision=rL.baxis.uirevision=rL.caxis.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min`,","and `title` if in `editable: true` configuration.","Defaults to `ternary<N>.uirevision`."].join(" ")};var dGe=bt.exports,pGe=si,gGe=Fo.defaults,R2=function(t,r,a,n){var o=n.type,i=n.attributes,s=n.handleDefaults,l=n.partition||"x",u=r._subplots[o],f=u.length,c=f&&u[0].replace(/\d+$/,""),h,v;function p(y,_){return dGe.coerce(h,v,i,y,_)}for(var d=0;d<f;d++){var g=u[d];t[g]?h=t[g]:h=t[g]={},v=pGe.newContainer(r,g,c),n.noUirevision||p("uirevision",r.uirevision);var m={};m[l]=[d/f,(d+1)/f],gGe(v,r,p,m),n.id=g,s(h,v,p,n)}},mGe=Oa.exports,yGe=si,aL=bt.exports,xGe=R2,bGe=hx,_Ge=vx,wGe=dT,TGe=N_,AGe=qE,roe=pO.exports,aoe=["aaxis","baxis","caxis"],SGe=function(t,r,a){xGe(t,r,a,{type:"ternary",attributes:roe,handleDefaults:MGe,font:r.font,paper_bgcolor:r.paper_bgcolor})};function MGe(e,t,r,a){var n=r("bgcolor"),o=r("sum");a.bgColor=mGe.combine(n,a.paper_bgcolor);for(var i,s,l,u=0;u<aoe.length;u++)i=aoe[u],s=e[i]||{},l=yGe.newContainer(t,i),l._name=i,kGe(s,l,a,t);var f=t.aaxis,c=t.baxis,h=t.caxis;f.min+c.min+h.min>=o&&(f.min=0,c.min=0,h.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function kGe(e,t,r,a){var n=roe[t._name];function o(v,p){return aL.coerce(e,t,n,v,p)}o("uirevision",a.uirevision),t.type="linear";var i=o("color"),s=i!==n.color.dflt?i:r.font.color,l=t._name,u=l.charAt(0).toUpperCase(),f="Component "+u,c=o("title.text",f);t._hovertitle=c===f?c:u,aL.coerceFont(o,"title.font",{family:r.font.family,size:aL.bigFont(r.font.size),color:s}),o("min"),TGe(e,t,o,"linear"),_Ge(e,t,o),bGe(e,t,o,"linear"),wGe(e,t,o,{outerTicks:!0});var h=o("showticklabels");h&&(aL.coerceFont(o,"tickfont",{family:r.font.family,size:r.font.size,color:s}),o("tickangle"),o("tickformat")),AGe(e,t,o,{dfltColor:i,bgColor:r.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:n}),o("hoverformat"),o("layer")}var EGe=iGe,CGe=Ml.getSubplotCalcData,LGe=bt.exports.counterRegex,z2="ternary";sp.name=z2;var PGe=sp.attr="subplot";sp.idRoot=z2;sp.idRegex=sp.attrRegex=LGe(z2);var IGe=sp.attributes={};IGe[PGe]={valType:"subplotid",dflt:"ternary",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a ternary subplot.","If *ternary* (the default value), the data refer to `layout.ternary`.","If *ternary2*, the data refer to `layout.ternary2`, and so on."].join(" ")};sp.layoutAttributes=pO.exports;sp.supplyLayoutDefaults=SGe;sp.plot=function(t){for(var r=t._fullLayout,a=t.calcdata,n=r._subplots[z2],o=0;o<n.length;o++){var i=n[o],s=CGe(a,z2,i),l=r[i]._subplot;l||(l=new EGe({id:i,graphDiv:t,container:r._ternarylayer.node()},r),r[i]._subplot=l),l.plot(s,r,t._promises)}};sp.clean=function(e,t,r,a){for(var n=a._subplots[z2]||[],o=0;o<n.length;o++){var i=n[o],s=a[i]._subplot;!t[i]&&!!s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}};var DGe={attributes:Hie,supplyDefaults:$He,colorbar:Pf,formatLabels:UHe,calc:qHe,plot:WHe,style:fh.style,styleOnSelect:fh.styleOnSelect,hoverPoints:ZHe,selectPoints:tA,eventData:KHe,moduleType:"trace",name:"scatterternary",basePlotModule:sp,categories:["ternary","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_ternary",description:["Provides similar functionality to the *scatter* type but on a ternary phase diagram.","The data is provided by at least two arrays out of `a`, `b`, `c` triplets."].join(" ")}},RGe=DGe,fu=EC,F2=cn.extendFlat,noe=Ss.axisHoverFormat,ioe={y:fu.y,x:fu.x,x0:fu.x0,y0:fu.y0,xhoverformat:noe("x"),yhoverformat:noe("y"),name:F2({},fu.name,{description:["Sets the trace name.","The trace name appear as the legend item and on hover.","For violin traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical.","Note that the trace name is also used as a default value","for attribute `scalegroup` (please see its description for details)."].join(" ")}),orientation:F2({},fu.orientation,{description:["Sets the orientation of the violin(s).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")}),bandwidth:{valType:"number",min:0,editType:"calc",description:["Sets the bandwidth used to compute the kernel density estimate.","By default, the bandwidth is determined by Silverman's rule of thumb."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple violins that should be sized according to","to some metric (see `scalemode`), link them by providing a non-empty group id here","shared by every trace in the same group.","If a violin's `width` is undefined, `scalegroup` will default to the trace's name.","In this case, violins with the same names will be linked together"].join(" ")},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc",description:["Sets the metric by which the width of each violin is determined.","*width* means each violin has the same (max) width","*count* means the violins are scaled by the number of sample points making","up each violin."].join("")},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc",description:["Sets the method by which the span in data space where the density function will be computed.","*soft* means the span goes from the sample's minimum value minus two bandwidths","to the sample's maximum value plus two bandwidths.","*hard* means the span goes from the sample's minimum to its maximum value.","For custom span settings, use mode *manual* and fill in the `span` attribute."].join(" ")},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the span in data space for which the density function will be computed.","Has an effect only when `spanmode` is set to *manual*."].join(" ")},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the violin(s)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the violin(s)."},editType:"plot"},fillcolor:fu.fillcolor,points:F2({},fu.boxpoints,{description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the violins are shown with no sample points.","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set,","otherwise defaults to *outliers*."].join(" ")}),jitter:F2({},fu.jitter,{description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the violins."].join(" ")}),pointpos:F2({},fu.pointpos,{description:["Sets the position of the sample points in relation to the violins.","If *0*, the sample points are places over the center of the violins.","Positive (negative) values correspond to positions to the","right (left) for vertical violins and above (below) for horizontal violins."].join(" ")}),width:F2({},fu.width,{description:["Sets the width of the violin in data coordinates.","If *0* (default value) the width is automatically selected based on the positions","of other violin traces in the same subplot."].join(" ")}),marker:fu.marker,text:fu.text,hovertext:fu.hovertext,hovertemplate:fu.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if an miniature box plot is drawn inside the violins. "].join(" ")},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot",description:["Sets the width of the inner box plots relative to","the violins' width.","For example, with 1, the inner box plots are as wide as the violins."].join(" ")},fillcolor:{valType:"color",editType:"style",description:"Sets the inner box plot fill color."},line:{color:{valType:"color",editType:"style",description:"Sets the inner box plot bounding line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the inner box plot bounding line width."},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if a line corresponding to the sample's mean is shown","inside the violins.","If `box.visible` is turned on, the mean line is drawn inside the inner box.","Otherwise, the mean line is drawn from one side of the violin to other."].join(" ")},color:{valType:"color",editType:"style",description:"Sets the mean line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the mean line width."},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc",description:["Determines on which side of the position value the density function making up","one half of a violin is plotted.","Useful when comparing two violin traces under *overlay* mode, where one trace","has `side` set to *positive* and the other to *negative*."].join(" ")},offsetgroup:fu.offsetgroup,alignmentgroup:fu.alignmentgroup,selected:fu.selected,unselected:fu.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style",description:["Do the hover effects highlight individual violins","or sample points or the kernel density estimate or any combination of them?"].join(" ")}},yO=CC,xO=bt.exports.extendFlat,ooe={violinmode:xO({},yO.boxmode,{description:["Determines how violins at the same location coordinate","are displayed on the graph.","If *group*, the violins are plotted next to one another","centered around the shared location.","If *overlay*, the violins are plotted over one another,","you might need to set *opacity* to see them multiple violins.","Has no effect on traces that have *width* set."].join(" ")}),violingap:xO({},yO.boxgap,{description:["Sets the gap (in plot fraction) between violins of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")}),violingroupgap:xO({},yO.boxgroupgap,{description:["Sets the gap (in plot fraction) between violins of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")})},soe=bt.exports,zGe=Oa.exports,loe=LC,uoe=ioe,FGe=function(t,r,a,n){function o(M,w){return soe.coerce(t,r,uoe,M,w)}function i(M,w){return soe.coerce2(t,r,uoe,M,w)}if(loe.handleSampleDefaults(t,r,o,n),r.visible!==!1){o("bandwidth"),o("side");var s=o("width");s||(o("scalegroup",r.name),o("scalemode"));var l=o("span"),u;Array.isArray(l)&&(u="manual"),o("spanmode",u);var f=o("line.color",(t.marker||{}).color||a),c=o("line.width"),h=o("fillcolor",zGe.addOpacity(r.line.color,.5));loe.handlePointsDefaults(t,r,o,{prefix:""});var v=i("box.width"),p=i("box.fillcolor",h),d=i("box.line.color",f),g=i("box.line.width",c),m=o("box.visible",Boolean(v||p||d||g));m||(r.box={visible:!1});var y=i("meanline.color",f),_=i("meanline.width",c),S=o("meanline.visible",Boolean(y||_));S||(r.meanline={visible:!1})}},OGe=bt.exports,NGe=ooe,BGe=x7,$Ge=function(t,r,a){function n(o,i){return OGe.coerce(t,r,NGe,o,i)}BGe._supply(t,r,a,n,"violin")},nL={};(function(e){var t=bt.exports,r={gaussian:function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*a*a)}};e.makeKDE=function(a,n,o){var i=o.length,s=r.gaussian,l=a.bandwidth,u=1/(i*l);return function(f){for(var c=0,h=0;h<i;h++)c+=s((f-o[h])/l);return u*c}},e.getPositionOnKdePath=function(a,n,o){var i,s;n.orientation==="h"?(i="y",s="x"):(i="x",s="y");var l=t.findPointOnPath(a.path,o,s,{pathLength:a.pathLength}),u=a.posCenterPx,f=l[i],c=n.side==="both"?2*u-f:u;return[f,c]},e.getKdeValue=function(a,n,o){var i=a.pts.map(e.extractVal),s=e.makeKDE(a,n,i);return s(o)/a.posDensityScale},e.extractVal=function(a){return a.v}})(nL);var bO=bt.exports,_O=rn.exports,UGe=$ae,foe=nL,HGe=Un.BADNUM,GGe=function(t,r){var a=UGe(t,r);if(a[0].t.empty)return a;for(var n=t._fullLayout,o=_O.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]),i=1/0,s=-1/0,l=0,u=0,f=0;f<a.length;f++){var c=a[f],h=c.pts.map(foe.extractVal),v=c.bandwidth=jGe(r,c,h),p=c.span=qGe(r,c,o,v);if(c.min===c.max&&v===0)p=c.span=[c.min,c.max],c.density=[{v:1,t:p[0]}],c.bandwidth=v,l=Math.max(l,1);else{var d=p[1]-p[0],g=Math.ceil(d/(v/3)),m=d/g;if(!isFinite(m)||!isFinite(g))return bO.error("Something went wrong with computing the violin span"),a[0].t.empty=!0,a;var y=foe.makeKDE(c,r,h);c.density=new Array(g);for(var _=0,S=p[0];S<p[1]+m/2;_++,S+=m){var M=y(S);c.density[_]={v:M,t:S},l=Math.max(l,M)}}u=Math.max(u,h.length),i=Math.min(i,p[0]),s=Math.max(s,p[1])}var w=_O.findExtremes(o,[i,s],{padded:!0});if(r._extremes[o._id]=w,r.width)a[0].t.maxKDE=l;else{var A=n._violinScaleGroupStats,k=r.scalegroup,T=A[k];T?(T.maxKDE=Math.max(T.maxKDE,l),T.maxCount=Math.max(T.maxCount,u)):A[k]={maxKDE:l,maxCount:u}}return a[0].t.labels.kde=bO._(t,"kde:"),a};function VGe(e,t,r){var a=Math.min(t,r/1.349);return 1.059*a*Math.pow(e,-.2)}function jGe(e,t,r){var a=t.max-t.min;if(!a)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,a/1e4);var n=r.length,o=bO.stdev(r,n-1,t.mean);return Math.max(VGe(n,o,t.q3-t.q1),a/100)}function qGe(e,t,r,a){var n=e.spanmode,o=e.span||[],i=[t.min,t.max],s=[t.min-2*a,t.max+2*a],l;function u(c){var h=o[c],v=r.type==="multicategory"?r.r2c(h):r.d2c(h,0,e[t.valLetter+"calendar"]);return v===HGe?s[c]:v}n==="soft"?l=s:n==="hard"?l=i:l=[u(0),u(1)];var f={type:"linear",range:l};return _O.setConvert(f),f.cleanRange(),l}var YGe=w7.setPositionOffset,coe=["v","h"],WGe=function(t,r){for(var a=t.calcdata,n=r.xaxis,o=r.yaxis,i=0;i<coe.length;i++){for(var s=coe[i],l=s==="h"?o:n,u=[],f=0;f<a.length;f++){var c=a[f],h=c[0].t,v=c[0].trace;v.visible===!0&&v.type==="violin"&&!h.empty&&v.orientation===s&&v.xaxis===n._id&&v.yaxis===o._id&&u.push(f)}YGe("violin",t,u,l)}},wO=Ra.exports,TO=bt.exports,XGe=xn.exports,AO=T7,ZGe=bee,KGe=nL,JGe=function(t,r,a,n){var o=t._fullLayout,i=r.xaxis,s=r.yaxis;function l(u){var f=ZGe(u,{xaxis:i,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return XGe.smoothopen(f[0],1)}TO.makeTraceGroups(n,a,"trace violins").each(function(u){var f=wO.select(this),c=u[0],h=c.t,v=c.trace;if(v.visible!==!0||h.empty){f.remove();return}var p=h.bPos,d=h.bdPos,g=r[h.valLetter+"axis"],m=r[h.posLetter+"axis"],y=v.side==="both",_=y||v.side==="positive",S=y||v.side==="negative",M=f.selectAll("path.violin").data(TO.identity);M.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),M.exit().remove(),M.each(function(R){var B=wO.select(this),N=R.density,D=N.length,O=m.c2l(R.pos+p,!0),$=m.l2p(O),Y;if(v.width)Y=h.maxKDE/d;else{var X=o._violinScaleGroupStats[v.scalegroup];Y=v.scalemode==="count"?X.maxKDE/d*(X.maxCount/R.pts.length):X.maxKDE/d}var ee,Q,Z,q,ae,ie,we;if(_){for(ie=new Array(D),q=0;q<D;q++)we=ie[q]={},we[h.posLetter]=O+N[q].v/Y,we[h.valLetter]=g.c2l(N[q].t,!0);ee=l(ie)}if(S){for(ie=new Array(D),ae=0,q=D-1;ae<D;ae++,q--)we=ie[ae]={},we[h.posLetter]=O-N[q].v/Y,we[h.valLetter]=g.c2l(N[q].t,!0);Q=l(ie)}if(y)Z=ee+"L"+Q.substr(1)+"Z";else{var Te=[$,g.c2p(N[0].t)],he=[$,g.c2p(N[D-1].t)];v.orientation==="h"&&(Te.reverse(),he.reverse()),_?Z="M"+Te+"L"+ee.substr(1)+"L"+he:Z="M"+he+"L"+Q.substr(1)+"L"+Te}B.attr("d",Z),R.posCenterPx=$,R.posDensityScale=Y*d,R.path=B.node(),R.pathLength=R.path.getTotalLength()/(y?2:1)});var w=v.box,A=w.width,k=(w.line||{}).width,T,L;y?(T=d*A,L=0):_?(T=[0,d*A/2],L=k*{x:1,y:-1}[h.posLetter]):(T=[d*A/2,0],L=k*{x:-1,y:1}[h.posLetter]),AO.plotBoxAndWhiskers(f,{pos:m,val:g},v,{bPos:p,bdPos:T,bPosPxOffset:L}),AO.plotBoxMean(f,{pos:m,val:g},v,{bPos:p,bdPos:T,bPosPxOffset:L});var C;!v.box.visible&&v.meanline.visible&&(C=TO.identity);var I=f.selectAll("path.meanline").data(C||[]);I.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),I.exit().remove(),I.each(function(R){var B=g.c2p(R.mean,!0),N=KGe.getPositionOnKdePath(R,v,B);wO.select(this).attr("d",v.orientation==="h"?"M"+B+","+N[0]+"V"+N[1]:"M"+N[0]+","+B+"H"+N[1])}),AO.plotPoints(f,{x:i,y:s},v,h)})},hoe=Ra.exports,O2=Oa.exports,QGe=fh.stylePoints,eVe=function(t){var r=hoe.select(t).selectAll("g.trace.violins");r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var n=a[0].trace,o=hoe.select(this),i=n.box||{},s=i.line||{},l=n.meanline||{},u=l.width;o.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(O2.stroke,n.line.color).call(O2.fill,n.fillcolor),o.selectAll("path.box").style("stroke-width",s.width+"px").call(O2.stroke,s.color).call(O2.fill,i.fillcolor);var f={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};o.selectAll("path.mean").style(f).call(O2.stroke,l.color),o.selectAll("path.meanline").style(f).call(O2.stroke,l.color),QGe(o,n,t)})},SO=bt.exports,tVe=rn.exports,voe=ine,doe=nL,rVe=function(t,r,a,n,o){o||(o={});var i=o.hoverLayer,s=t.cd,l=s[0].trace,u=l.hoveron,f=u.indexOf("violins")!==-1,c=u.indexOf("kde")!==-1,h=[],v,p;if(f||c){var d=voe.hoverOnBoxes(t,r,a,n);if(c&&d.length>0){var g=t.xa,m=t.ya,y,_,S,M,w;l.orientation==="h"?(w=r,y="y",S=m,_="x",M=g):(w=a,y="x",S=g,_="y",M=m);var A=s[t.index];if(w>=A.span[0]&&w<=A.span[1]){var k=SO.extendFlat({},t),T=M.c2p(w,!0),L=doe.getKdeValue(A,l,w),C=doe.getPositionOnKdePath(A,l,T),I=S._offset,R=S._length;k[y+"0"]=C[0],k[y+"1"]=C[1],k[_+"0"]=k[_+"1"]=T,k[_+"Label"]=_+": "+tVe.hoverLabelText(M,w,l[_+"hoverformat"])+", "+s[0].t.labels.kde+" "+L.toFixed(3),k.spikeDistance=d[0].spikeDistance;var B=y+"Spike";k[B]=d[0][B],d[0].spikeDistance=void 0,d[0][B]=void 0,k.hovertemplate=!1,h.push(k),p={stroke:t.color},p[y+"1"]=SO.constrain(I+C[0],I,I+R),p[y+"2"]=SO.constrain(I+C[1],I,I+R),p[_+"1"]=p[_+"2"]=M._offset+T}}f&&(h=h.concat(d))}u.indexOf("points")!==-1&&(v=voe.hoverOnPoints(t,r,a));var N=i.selectAll(".violinline-"+l.uid).data(p?[0]:[]);return N.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),N.exit().remove(),N.attr(p),n==="closest"?v?[v]:h:(v&&h.push(v),h)},aVe={attributes:ioe,layoutAttributes:ooe,supplyDefaults:FGe,crossTraceDefaults:LC.crossTraceDefaults,supplyLayoutDefaults:$Ge,calc:GGe,crossTraceCalc:WGe,plot:JGe,style:eVe,styleOnSelect:fh.styleOnSelect,hoverPoints:rVe,selectPoints:one,moduleType:"trace",name:"violin",basePlotModule:Ii,categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{description:["In vertical (horizontal) violin plots,","statistics are computed using `y` (`x`) values.","By supplying an `x` (`y`) array, one violin per distinct x (y) value","is drawn","If no `x` (`y`) {array} is provided, a single violin is drawn.","That violin position is then positioned with","with `name` or with `x0` (`y0`) if provided."].join(" ")}},nVe=aVe,iVe={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]},as=Wg,MO=Cl.line,oVe=ao,poe=Ss.axisHoverFormat,sVe=zn.hovertemplateAttrs,lVe=zn.texttemplateAttrs,goe=iVe,tm=cn.extendFlat,uVe=Oa.exports,moe={x:as.x,x0:as.x0,dx:as.dx,y:as.y,y0:as.y0,dy:as.dy,xperiod:as.xperiod,yperiod:as.yperiod,xperiod0:as.xperiod0,yperiod0:as.yperiod0,xperiodalignment:as.xperiodalignment,yperiodalignment:as.yperiodalignment,xhoverformat:poe("x"),yhoverformat:poe("y"),hovertext:as.hovertext,hovertemplate:sVe({},{keys:goe.eventDataKeys}),hoverinfo:tm({},oVe.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:lVe({editType:"plot"},{keys:goe.eventDataKeys.concat(["label","value"])}),text:as.text,textposition:as.textposition,insidetextanchor:tm({},as.insidetextanchor,{dflt:"middle"}),textangle:tm({},as.textangle,{dflt:0}),textfont:as.textfont,insidetextfont:as.insidetextfont,outsidetextfont:as.outsidetextfont,constraintext:as.constraintext,cliponaxis:as.cliponaxis,orientation:tm({},as.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:tm({},as.offset,{arrayOk:!1}),width:tm({},as.width,{arrayOk:!1}),marker:fVe(),connector:{fillcolor:{valType:"color",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:tm({},MO.color,{dflt:uVe.defaultLine}),width:tm({},MO.width,{dflt:0,editType:"plot"}),dash:MO.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:as.offsetgroup,alignmentgroup:as.alignmentgroup};function fVe(){var e=tm({},as.marker);return delete e.pattern,e}var yoe={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},kO=bt.exports,cVe=ch.handleGroupingDefaults,hVe=ch.handleText,vVe=YT,dVe=a0,xoe=moe,EO=Oa.exports;function pVe(e,t,r,a){function n(c,h){return kO.coerce(e,t,xoe,c,h)}var o=vVe(e,t,a,n);if(!o){t.visible=!1;return}dVe(e,t,a,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.y&&!t.x?"v":"h"),n("offset"),n("width");var i=n("text");n("hovertext"),n("hovertemplate");var s=n("textposition");hVe(e,t,a,n,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&!t.texttemplate&&n("textinfo",Array.isArray(i)?"text+value":"value");var l=n("marker.color",r);n("marker.line.color",EO.defaultLine),n("marker.line.width");var u=n("connector.visible");if(u){n("connector.fillcolor",gVe(l));var f=n("connector.line.width");f&&(n("connector.line.color"),n("connector.line.dash"))}}function gVe(e){var t=kO.isArrayOrTypedArray(e)?"#000":e;return EO.addOpacity(t,.5*EO.opacity(t))}function mVe(e,t){var r,a;function n(i){return kO.coerce(a._input,a,xoe,i)}if(t.funnelmode==="group")for(var o=0;o<e.length;o++)a=e[o],r=a._input,cVe(r,a,t,n)}var boe={supplyDefaults:pVe,crossTraceDefaults:mVe},yVe=bt.exports,xVe=yoe,bVe=function(e,t,r){var a=!1;function n(s,l){return yVe.coerce(e,t,xVe,s,l)}for(var o=0;o<r.length;o++){var i=r[o];if(i.visible&&i.type==="funnel"){a=!0;break}}a&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))},N2=bt.exports,_Ve=function(t,r){for(var a=0;a<t.length;a++)t[a].i=a;N2.mergeArray(r.text,t,"tx"),N2.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){N2.mergeArray(n.opacity,t,"mo"),N2.mergeArray(n.color,t,"mc");var o=n.line;o&&(N2.mergeArray(o.color,t,"mlc"),N2.mergeArrayCastPositive(o.width,t,"mlw"))}},_oe=rn.exports,woe=o0,wVe=_Ve,TVe=Zd,IA=Un.BADNUM,AVe=function(t,r){var a=_oe.getFromId(t,r.xaxis||"x"),n=_oe.getFromId(t,r.yaxis||"y"),o,i,s,l,u,f,c,h;r.orientation==="h"?(o=a.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=woe(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(o=n.makeCalcdata(r,"y"),s=a.makeCalcdata(r,"x"),l=woe(r,a,"x",s),u=!!r.xperiodalignment,f="x"),i=l.vals;var v=Math.min(i.length,o.length),p=new Array(v);for(r._base=[],c=0;c<v;c++){o[c]<0&&(o[c]=IA);var d=!1;o[c]!==IA&&c+1<v&&o[c+1]!==IA&&(d=!0),h=p[c]={p:i[c],s:o[c],cNext:d},r._base[c]=-.5*h.s,u&&(p[c].orig_p=s[c],p[c][f+"End"]=l.ends[c],p[c][f+"Start"]=l.starts[c]),r.ids&&(h.id=String(r.ids[c])),c===0&&(p[0].vTotal=0),p[0].vTotal+=CO(h.s),h.begR=CO(h.s)/CO(p[0].s)}var g;for(c=0;c<v;c++)h=p[c],h.s!==IA&&(h.sumR=h.s/p[0].vTotal,h.difR=g!==void 0?h.s/g:1,g=h.s);return wVe(p,r),TVe(p,r),p};function CO(e){return e===IA?0:e}var Toe=yA.setGroupPositions,SVe=function(t,r){var a=t._fullLayout,n=t._fullData,o=t.calcdata,i=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h],p=v.orientation==="h";v.visible===!0&&v.xaxis===i._id&&v.yaxis===s._id&&v.type==="funnel"&&(c=o[h],p?f.push(c):u.push(c),l.push(c))}var d={mode:a.funnelmode,norm:a.funnelnorm,gap:a.funnelgap,groupgap:a.funnelgroupgap};for(Toe(t,i,s,u,d),Toe(t,s,i,f,d),h=0;h<l.length;h++){c=l[h];for(var g=0;g<c.length;g++)g+1<c.length&&(c[g].nextP0=c[g+1].p0,c[g].nextS0=c[g+1].s0,c[g].nextP1=c[g+1].p1,c[g].nextS1=c[g+1].s1)}},iL=Ra.exports,Ly=bt.exports,Aoe=xn.exports,Py=Un.BADNUM,MVe=w2,kVe=If.clearMinTextSize,EVe=function(t,r,a,n){var o=t._fullLayout;kVe("funnel",o),CVe(t,r,a,n),LVe(t,r,a,n),MVe.plot(t,r,a,n,{mode:o.funnelmode,norm:o.funnelmode,gap:o.funnelgap,groupgap:o.funnelgroupgap})};function CVe(e,t,r,a){var n=t.xaxis,o=t.yaxis;Ly.makeTraceGroups(a,r,"trace bars").each(function(i){var s=iL.select(this),l=i[0].trace,u=Ly.ensureSingle(s,"g","regions");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.region").data(Ly.identity);c.enter().append("g").classed("region",!0),c.exit().remove();var h=c.size();c.each(function(v,p){if(!(p!==h-1&&!v.cNext)){var d=Soe(v,n,o,f),g=d[0],m=d[1],y="";g[0]!==Py&&m[0]!==Py&&g[1]!==Py&&m[1]!==Py&&g[2]!==Py&&m[2]!==Py&&g[3]!==Py&&m[3]!==Py&&(f?y+="M"+g[0]+","+m[1]+"L"+g[2]+","+m[2]+"H"+g[3]+"L"+g[1]+","+m[1]+"Z":y+="M"+g[1]+","+m[1]+"L"+g[2]+","+m[3]+"V"+m[2]+"L"+g[1]+","+m[0]+"Z"),y===""&&(y="M0,0Z"),Ly.ensureSingle(iL.select(this),"path").attr("d",y).call(Aoe.setClipUrl,t.layerClipId,e)}})})}function LVe(e,t,r,a){var n=t.xaxis,o=t.yaxis;Ly.makeTraceGroups(a,r,"trace bars").each(function(i){var s=iL.select(this),l=i[0].trace,u=Ly.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.line").data(Ly.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var h=c.size();c.each(function(v,p){if(!(p!==h-1&&!v.cNext)){var d=Soe(v,n,o,f),g=d[0],m=d[1],y="";g[3]!==void 0&&m[3]!==void 0&&(f?(y+="M"+g[0]+","+m[1]+"L"+g[2]+","+m[2],y+="M"+g[1]+","+m[1]+"L"+g[3]+","+m[2]):(y+="M"+g[1]+","+m[1]+"L"+g[2]+","+m[3],y+="M"+g[1]+","+m[0]+"L"+g[2]+","+m[2])),y===""&&(y="M0,0Z"),Ly.ensureSingle(iL.select(this),"path").attr("d",y).call(Aoe.setClipUrl,t.layerClipId,e)}})})}function Soe(e,t,r,a){var n=[],o=[],i=a?t:r,s=a?r:t;return n[0]=i.c2p(e.s0,!0),o[0]=s.c2p(e.p0,!0),n[1]=i.c2p(e.s1,!0),o[1]=s.c2p(e.p1,!0),n[2]=i.c2p(e.nextS0,!0),o[2]=s.c2p(e.nextP0,!0),n[3]=i.c2p(e.nextS1,!0),o[3]=s.c2p(e.nextP1,!0),a?[n,o]:[o,n]}var DA=Ra.exports,Moe=xn.exports,LO=Oa.exports,PVe=sx.DESELECTDIM,IVe=np,DVe=If.resizeText,RVe=IVe.styleTextPoints;function zVe(e,t,r){var a=r||DA.select(e).selectAll("g.funnellayer").selectAll("g.trace");DVe(e,a,"funnel"),a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var o=DA.select(this),i=n[0].trace;o.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=i.marker;DA.select(this).call(LO.fill,s.mc||l.color).call(LO.stroke,s.mlc||l.line.color).call(Moe.dashLine,l.line.dash,s.mlw||l.line.width).style("opacity",i.selectedpoints&&!s.selected?PVe:1)}}),RVe(o,i,e),o.selectAll(".regions").each(function(){DA.select(this).selectAll("path").style("stroke-width",0).call(LO.fill,i.connector.fillcolor)}),o.selectAll(".lines").each(function(){var s=i.connector.line;Moe.lineGroupStyle(DA.select(this).selectAll("path"),s.width,s.color,s.dash)})})}var FVe={style:zVe},koe=Oa.exports.opacity,OVe=wA.hoverOnBars,PO=bt.exports.formatPercent,NVe=function(t,r,a,n,o){var i=OVe(t,r,a,n,o);if(!!i){var s=i.cd,l=s[0].trace,u=l.orientation==="h",f=i.index,c=s[f],h=u?"x":"y";i[h+"LabelVal"]=c.s,i.percentInitial=c.begR,i.percentInitialLabel=PO(c.begR,1),i.percentPrevious=c.difR,i.percentPreviousLabel=PO(c.difR,1),i.percentTotal=c.sumR,i.percentTotalLabel=PO(c.sumR,1);var v=c.hi||l.hoverinfo,p=[];if(v&&v!=="none"&&v!=="skip"){var d=v==="all",g=v.split("+"),m=function(y){return d||g.indexOf(y)!==-1};m("percent initial")&&p.push(i.percentInitialLabel+" of initial"),m("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),m("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=BVe(l,c),[i]}};function BVe(e,t){var r=e.marker,a=t.mc||r.color,n=t.mlc||r.line.color,o=t.mlw||r.line.width;if(koe(a))return a;if(koe(n)&&o)return n}var $Ve=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"percentInitial"in r&&(t.percentInitial=r.percentInitial),"percentPrevious"in r&&(t.percentPrevious=r.percentPrevious),"percentTotal"in r&&(t.percentTotal=r.percentTotal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t},UVe={attributes:moe,layoutAttributes:yoe,supplyDefaults:boe.supplyDefaults,crossTraceDefaults:boe.crossTraceDefaults,supplyLayoutDefaults:bVe,calc:AVe,crossTraceCalc:SVe,plot:EVe,style:FVe.style,hoverPoints:NVe,eventData:$Ve,selectPoints:TA,moduleType:"trace",name:"funnel",basePlotModule:Ii,categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}},HVe=UVe,GVe={eventDataKeys:["initial","delta","final"]},Oo=Wg,IO=Cl.line,VVe=ao,Eoe=Ss.axisHoverFormat,jVe=zn.hovertemplateAttrs,qVe=zn.texttemplateAttrs,Coe=GVe,B2=cn.extendFlat,YVe=Oa.exports;function DO(e){return{marker:{color:B2({},Oo.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:B2({},Oo.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:B2({},Oo.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}var Loe={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:Oo.x,x0:Oo.x0,dx:Oo.dx,y:Oo.y,y0:Oo.y0,dy:Oo.dy,xperiod:Oo.xperiod,yperiod:Oo.yperiod,xperiod0:Oo.xperiod0,yperiod0:Oo.yperiod0,xperiodalignment:Oo.xperiodalignment,yperiodalignment:Oo.yperiodalignment,xhoverformat:Eoe("x"),yhoverformat:Eoe("y"),hovertext:Oo.hovertext,hovertemplate:jVe({},{keys:Coe.eventDataKeys}),hoverinfo:B2({},VVe.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:qVe({editType:"plot"},{keys:Coe.eventDataKeys.concat(["label"])}),text:Oo.text,textposition:Oo.textposition,insidetextanchor:Oo.insidetextanchor,textangle:Oo.textangle,textfont:Oo.textfont,insidetextfont:Oo.insidetextfont,outsidetextfont:Oo.outsidetextfont,constraintext:Oo.constraintext,cliponaxis:Oo.cliponaxis,orientation:Oo.orientation,offset:Oo.offset,width:Oo.width,increasing:DO("increasing"),decreasing:DO("decreasing"),totals:DO("intermediate sums and total"),connector:{line:{color:B2({},IO.color,{dflt:YVe.defaultLine}),width:B2({},IO.width,{editType:"plot"}),dash:IO.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:Oo.offsetgroup,alignmentgroup:Oo.alignmentgroup},Poe={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},RA={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}},Ioe=bt.exports,WVe=ch.handleGroupingDefaults,XVe=ch.handleText,ZVe=YT,KVe=a0,Doe=Loe,JVe=Oa.exports,Roe=RA,QVe=Roe.INCREASING.COLOR,eje=Roe.DECREASING.COLOR,tje="#4499FF";function RO(e,t,r){e(t+".marker.color",r),e(t+".marker.line.color",JVe.defaultLine),e(t+".marker.line.width")}function rje(e,t,r,a){function n(u,f){return Ioe.coerce(e,t,Doe,u,f)}var o=ZVe(e,t,a,n);if(!o){t.visible=!1;return}KVe(e,t,a,n),n("xhoverformat"),n("yhoverformat"),n("measure"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var i=n("textposition");XVe(e,t,a,n,i,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&(n("texttemplate"),t.texttemplate||n("textinfo")),RO(n,"increasing",QVe),RO(n,"decreasing",eje),RO(n,"totals",tje);var s=n("connector.visible");if(s){n("connector.mode");var l=n("connector.line.width");l&&(n("connector.line.color"),n("connector.line.dash"))}}function aje(e,t){var r,a;function n(i){return Ioe.coerce(a._input,a,Doe,i)}if(t.waterfallmode==="group")for(var o=0;o<e.length;o++)a=e[o],r=a._input,WVe(r,a,t,n)}var zoe={supplyDefaults:rje,crossTraceDefaults:aje},nje=bt.exports,ije=Poe,oje=function(e,t,r){var a=!1;function n(s,l){return nje.coerce(e,t,ije,s,l)}for(var o=0;o<r.length;o++){var i=r[o];if(i.visible&&i.type==="waterfall"){a=!0;break}}a&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))},Foe=rn.exports,Ooe=o0,Noe=bt.exports.mergeArray,sje=Zd,Boe=Un.BADNUM;function zO(e){return e==="a"||e==="absolute"}function FO(e){return e==="t"||e==="total"}var lje=function(t,r){var a=Foe.getFromId(t,r.xaxis||"x"),n=Foe.getFromId(t,r.yaxis||"y"),o,i,s,l,u,f;r.orientation==="h"?(o=a.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=Ooe(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(o=n.makeCalcdata(r,"y"),s=a.makeCalcdata(r,"x"),l=Ooe(r,a,"x",s),u=!!r.xperiodalignment,f="x"),i=l.vals;for(var c=Math.min(i.length,o.length),h=new Array(c),v=0,p,d=!1,g=0;g<c;g++){var m=o[g]||0,y=!1;(o[g]!==Boe||FO(r.measure[g])||zO(r.measure[g]))&&g+1<c&&(o[g+1]!==Boe||FO(r.measure[g+1])||zO(r.measure[g+1]))&&(y=!0);var _=h[g]={i:g,p:i[g],s:m,rawS:m,cNext:y};zO(r.measure[g])?(v=_.s,_.isSum=!0,_.dir="totals",_.s=v):FO(r.measure[g])?(_.isSum=!0,_.dir="totals",_.s=v):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",p=_.s,_.s=v+p,v+=p),_.dir==="totals"&&(d=!0),u&&(h[g].orig_p=s[g],h[g][f+"End"]=l.ends[g],h[g][f+"Start"]=l.starts[g]),r.ids&&(_.id=String(r.ids[g])),_.v=(r.base||0)+v}return h.length&&(h[0].hasTotals=d),Noe(r.text,h,"tx"),Noe(r.hovertext,h,"htx"),sje(h,r),h},$oe=yA.setGroupPositions,uje=function(t,r){var a=t._fullLayout,n=t._fullData,o=t.calcdata,i=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h];v.visible===!0&&v.xaxis===i._id&&v.yaxis===s._id&&v.type==="waterfall"&&(c=o[h],v.orientation==="h"?f.push(c):u.push(c),l.push(c))}var p={mode:a.waterfallmode,norm:a.waterfallnorm,gap:a.waterfallgap,groupgap:a.waterfallgroupgap};for($oe(t,i,s,u,p),$oe(t,s,i,f,p),h=0;h<l.length;h++){c=l[h];for(var d=0;d<c.length;d++){var g=c[d];g.isSum===!1&&(g.s0+=d===0?0:c[d-1].s),d+1<c.length&&(c[d].nextP0=c[d+1].p0,c[d].nextS0=c[d+1].s0)}}},Uoe=Ra.exports,oL=bt.exports,fje=xn.exports,$2=Un.BADNUM,cje=w2,hje=If.clearMinTextSize,vje=function(t,r,a,n){var o=t._fullLayout;hje("waterfall",o),cje.plot(t,r,a,n,{mode:o.waterfallmode,norm:o.waterfallmode,gap:o.waterfallgap,groupgap:o.waterfallgroupgap}),dje(t,r,a,n)};function dje(e,t,r,a){var n=t.xaxis,o=t.yaxis;oL.makeTraceGroups(a,r,"trace bars").each(function(i){var s=Uoe.select(this),l=i[0].trace,u=oL.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=l.connector.mode,h=u.selectAll("g.line").data(oL.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var v=h.size();h.each(function(p,d){if(!(d!==v-1&&!p.cNext)){var g=pje(p,n,o,f),m=g[0],y=g[1],_="";m[0]!==$2&&y[0]!==$2&&m[1]!==$2&&y[1]!==$2&&(c==="spanning"&&!p.isSum&&d>0&&(f?_+="M"+m[0]+","+y[1]+"V"+y[0]:_+="M"+m[1]+","+y[0]+"H"+m[0]),c!=="between"&&(p.isSum||d<v-1)&&(f?_+="M"+m[1]+","+y[0]+"V"+y[1]:_+="M"+m[0]+","+y[1]+"H"+m[1]),m[2]!==$2&&y[2]!==$2&&(f?_+="M"+m[1]+","+y[1]+"V"+y[2]:_+="M"+m[1]+","+y[1]+"H"+m[2])),_===""&&(_="M0,0Z"),oL.ensureSingle(Uoe.select(this),"path").attr("d",_).call(fje.setClipUrl,t.layerClipId,e)}})})}function pje(e,t,r,a){var n=[],o=[],i=a?t:r,s=a?r:t;return n[0]=i.c2p(e.s0,!0),o[0]=s.c2p(e.p0,!0),n[1]=i.c2p(e.s1,!0),o[1]=s.c2p(e.p1,!0),n[2]=i.c2p(e.nextS0,!0),o[2]=s.c2p(e.nextP0,!0),a?[n,o]:[o,n]}var sL=Ra.exports,Hoe=xn.exports,Goe=Oa.exports,gje=sx.DESELECTDIM,mje=np,yje=If.resizeText,xje=mje.styleTextPoints;function bje(e,t,r){var a=r||sL.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");yje(e,a,"waterfall"),a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var o=sL.select(this),i=n[0].trace;o.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=i[s.dir].marker;sL.select(this).call(Goe.fill,l.color).call(Goe.stroke,l.line.color).call(Hoe.dashLine,l.line.dash,l.line.width).style("opacity",i.selectedpoints&&!s.selected?gje:1)}}),xje(o,i,e),o.selectAll(".lines").each(function(){var s=i.connector.line;Hoe.lineGroupStyle(sL.select(this).selectAll("path"),s.width,s.color,s.dash)})})}var _je={style:bje},wje=rn.exports.hoverLabelText,Voe=Oa.exports.opacity,Tje=wA.hoverOnBars,joe=RA,qoe={increasing:joe.INCREASING.SYMBOL,decreasing:joe.DECREASING.SYMBOL},Aje=function(t,r,a,n,o){var i=Tje(t,r,a,n,o);if(!i)return;var s=i.cd,l=s[0].trace,u=l.orientation==="h",f=u?"x":"y",c=u?t.xa:t.ya;function h(w){return wje(c,w,l[f+"hoverformat"])}var v=i.index,p=s[v],d=p.isSum?p.b+p.s:p.rawS;if(!p.isSum){i.initial=p.b+p.s-d,i.delta=d,i.final=i.initial+i.delta;var g=h(Math.abs(i.delta));i.deltaLabel=d<0?"("+g+")":g,i.finalLabel=h(i.final),i.initialLabel=h(i.initial)}var m=p.hi||l.hoverinfo,y=[];if(m&&m!=="none"&&m!=="skip"){var _=m==="all",S=m.split("+"),M=function(w){return _||S.indexOf(w)!==-1};p.isSum||(M("final")&&(u?!M("x"):!M("y"))&&y.push(i.finalLabel),M("delta")&&(d<0?y.push(i.deltaLabel+" "+qoe.decreasing):y.push(i.deltaLabel+" "+qoe.increasing)),M("initial")&&y.push("Initial: "+i.initialLabel))}return y.length&&(i.extraText=y.join("<br>")),i.color=Sje(l,p),[i]};function Sje(e,t){var r=e[t.dir].marker,a=r.color,n=r.line.color,o=r.line.width;if(Voe(a))return a;if(Voe(n)&&o)return n}var Mje=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"initial"in r&&(t.initial=r.initial),"delta"in r&&(t.delta=r.delta),"final"in r&&(t.final=r.final),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t},kje={attributes:Loe,layoutAttributes:Poe,supplyDefaults:zoe.supplyDefaults,crossTraceDefaults:zoe.crossTraceDefaults,supplyLayoutDefaults:oje,calc:lje,crossTraceCalc:uje,plot:vje,style:_je.style,hoverPoints:Aje,eventData:Mje,selectPoints:TA,moduleType:"trace",name:"waterfall",basePlotModule:Ii,categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set th *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}},Eje=kje,zA={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")},Cje=ao,Lje=zn.hovertemplateAttrs,Yoe=cn.extendFlat,Pje=zA.colormodel,FA=["rgb","rgba","rgba256","hsl","hsla"],Woe=[],Xoe=[];for(var OA=0;OA<FA.length;OA++){var lL=Pje[FA[OA]];Woe.push("For the `"+FA[OA]+"` colormodel, it is ["+(lL.zminDflt||lL.min).join(", ")+"]."),Xoe.push("For the `"+FA[OA]+"` colormodel, it is ["+(lL.zmaxDflt||lL.max).join(", ")+"].")}var Zoe=Yoe({source:{valType:"string",editType:"calc",description:["Specifies the data URI of the image to be visualized.",'The URI consists of "data:image/[<media subtype>][;base64],<data>"'].join(" ")},z:{valType:"data_array",editType:"calc",description:["A 2-dimensional array in which each element is an array of 3 or 4 numbers representing a color."].join(" ")},colormodel:{valType:"enumerated",values:FA,editType:"calc",description:["Color model used to map the numerical color components described in `z` into colors.","If `source` is specified, this attribute will be set to `rgba256`","otherwise it defaults to `rgb`."].join(" ")},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot",description:["Picks a smoothing algorithm used to smooth `z` data.","This only applies for image traces that use the `source` attribute."].join(" ")},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the lower bound for each color component.","Note that the default value will depend on the colormodel.",Woe.join(" ")].join(" ")},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the higher bound for each color component.","Note that the default value will depend on the colormodel.",Xoe.join(" ")].join(" ")},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's x position."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's y position."},dx:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's horizontal size."},dy:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's vertical size"},text:{valType:"data_array",editType:"plot",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"plot",description:"Same as `text`."},hoverinfo:Yoe({},Cje.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:Lje({},{keys:["z","color","colormodel"]}),transforms:void 0}),Ije=bt.exports,Dje=Zoe,Koe=zA,Rje=Ru.IMAGE_URL_PREFIX,zje=function(t,r){function a(i,s){return Ije.coerce(t,r,Dje,i,s)}a("source"),r.source&&!r.source.match(Rje)&&delete r.source,r._hasSource=!!r.source;var n=a("z");if(r._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!r._hasZ&&!r._hasSource){r.visible=!1;return}a("x0"),a("y0"),a("dx"),a("dy");var o;r._hasZ?(a("colormodel","rgb"),o=Koe.colormodel[r.colormodel],a("zmin",o.zminDflt||o.min),a("zmax",o.zmaxDflt||o.max)):r._hasSource&&(r.colormodel="rgba256",o=Koe.colormodel[r.colormodel],r.zmin=o.zminDflt,r.zmax=o.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),r._length=null},Joe={},OO={exports:{}},Di={},Fje={},Oje=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fje}),NO=qh(Oje),BO={exports:{}},$O={exports:{}},NA=1e3,BA=NA*60,$A=BA*60,UA=$A*24,Nje=UA*365.25,Bje=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return $je(e);if(r==="number"&&isNaN(e)===!1)return t.long?Hje(e):Uje(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function $je(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return r*Nje;case"days":case"day":case"d":return r*UA;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$A;case"minutes":case"minute":case"mins":case"min":case"m":return r*BA;case"seconds":case"second":case"secs":case"sec":case"s":return r*NA;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Uje(e){return e>=UA?Math.round(e/UA)+"d":e>=$A?Math.round(e/$A)+"h":e>=BA?Math.round(e/BA)+"m":e>=NA?Math.round(e/NA)+"s":e+"ms"}function Hje(e){return uL(e,UA,"day")||uL(e,$A,"hour")||uL(e,BA,"minute")||uL(e,NA,"second")||e+" ms"}function uL(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=l,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Bje,t.names=[],t.skips=[],t.formatters={};var r;function a(u){var f=0,c;for(c in u)f=(f<<5)-f+u.charCodeAt(c),f|=0;return t.colors[Math.abs(f)%t.colors.length]}function n(u){function f(){if(!!f.enabled){var c=f,h=+new Date,v=h-(r||h);c.diff=v,c.prev=r,c.curr=h,r=h;for(var p=new Array(arguments.length),d=0;d<p.length;d++)p[d]=arguments[d];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,_){if(y==="%%")return y;g++;var S=t.formatters[_];if(typeof S=="function"){var M=p[g];y=S.call(c,M),p.splice(g,1),g--}return y}),t.formatArgs.call(c,p);var m=f.log||t.log||console.log.bind(console);m.apply(c,p)}}return f.namespace=u,f.enabled=t.enabled(u),f.useColors=t.useColors(),f.color=a(u),typeof t.init=="function"&&t.init(f),f}function o(u){t.save(u),t.names=[],t.skips=[];for(var f=(typeof u=="string"?u:"").split(/[\s,]+/),c=f.length,h=0;h<c;h++)!f[h]||(u=f[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){t.enable("")}function s(u){var f,c;for(f=0,c=t.skips.length;f<c;f++)if(t.skips[f].test(u))return!1;for(f=0,c=t.names.length;f<c;f++)if(t.names[f].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})($O,$O.exports);(function(e,t){t=e.exports=$O.exports,t.log=n,t.formatArgs=a,t.save=o,t.load=i,t.useColors=r,t.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function a(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var f="color: "+this.color;l.splice(1,0,f,"color: inherit");var c=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(c++,v==="%c"&&(h=c))}),l.splice(h,0,f)}}function n(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function i(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process!="undefined"&&"env"in process&&(l={}.DEBUG),l}t.enable(i());function s(){try{return window.localStorage}catch{}}})(BO,BO.exports);var U2=NO,Iy=BO.exports("stream-parser"),Gje=jje,Qoe=-1,fL=0,Vje=1,ese=2;function jje(e){var t=e&&typeof e._transform=="function",r=e&&typeof e._write=="function";if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");Iy("extending Parser into stream"),e._bytes=qje,e._skipBytes=Yje,t&&(e._passthrough=Wje),t?e._transform=Zje:e._write=Xje}function HA(e){Iy("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=Qoe,e._parserCallback=null,typeof e.push=="function"&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function qje(e,t){U2(!this._parserCallback,'there is already a "callback" set!'),U2(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||HA(this),Iy("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=fL}function Yje(e,t){U2(!this._parserCallback,'there is already a "callback" set!'),U2(e>0,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||HA(this),Iy("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=Vje}function Wje(e,t){U2(!this._parserCallback,'There is already a "callback" set!'),U2(e>0,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||HA(this),Iy("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=ese}function Xje(e,t,r){this._parserInit||HA(this),Iy("write(%o bytes)",e.length),typeof t=="function"&&(r=t),ase(this,e,null,r)}function Zje(e,t,r){this._parserInit||HA(this),Iy("transform(%o bytes)",e.length),typeof t!="function"&&(t=this._parserOutput),ase(this,e,t,r)}function tse(e,t,r,a){return e._parserBytesLeft<=0?a(new Error("got data but not currently parsing anything")):t.length<=e._parserBytesLeft?function(){return rse(e,t,r,a)}:function(){var n=t.slice(0,e._parserBytesLeft);return rse(e,n,r,function(o){if(o)return a(o);if(t.length>n.length)return function(){return tse(e,t.slice(n.length),r,a)}})}}function rse(e,t,r,a){if(e._parserBytesLeft-=t.length,Iy("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===fL?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===ese&&r(t),e._parserBytesLeft===0){var n=e._parserCallback;if(n&&e._parserState===fL&&e._parserBuffers.length>1&&(t=Buffer.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==fL&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=Qoe,e._parserBuffers.splice(0),n){var o=[];t&&o.push(t),r&&o.push(r);var i=n.length>o.length;i&&o.push(nse(a));var s=n.apply(e,o);if(!i||a===s)return a}}else return a}var ase=nse(tse);function nse(e){return function(){for(var t=e.apply(this,arguments);typeof t=="function";)t=t();return t}}var ise=NO.Transform,Kje=Gje;function GA(){ise.call(this,{readableObjectMode:!0})}GA.prototype=Object.create(ise.prototype);GA.prototype.constructor=GA;Kje(GA.prototype);Di.ParserStream=GA;Di.sliceEq=function(e,t,r){for(var a=t,n=0;n<r.length;)if(e[a++]!==r[n++])return!1;return!0};Di.str2arr=function(e,t){var r=[],a=0;if(t&&t==="hex")for(;a<e.length;)r.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)r.push(e.charCodeAt(a)&255);return r};Di.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};Di.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};Di.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};Di.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function cL(e,t,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,t&&(this.code=t),r&&(this.statusCode=r)}cL.prototype=Object.create(Error.prototype);cL.prototype.constructor=cL;Di.ProbeError=cL;var hL={},H2=Di.readUInt16BE,UO=Di.readUInt32BE;function VA(e,t){if(e.length<4+t)return null;var r=UO(e,t);return e.length<r+t||r<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}hL.unbox=VA;function Jje(e,t){for(var r=0;;){var a=VA(e,r);if(!a)break;switch(a.boxtype){case"ispe":t.sizes.push({width:UO(a.data,4),height:UO(a.data,8)});break;case"irot":t.transforms.push({type:"irot",value:a.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:a.data[0]&1});break}r=a.end}}function HO(e,t,r){for(var a=0,n=0;n<r;n++)a=a*256+(e[t+n]||0);return a}function Qje(e,t){for(var r=e[4]>>4&15,a=e[4]&15,n=e[5]>>4&15,o=H2(e,6),i=8,s=0;s<o;s++){var l=H2(e,i);i+=2;var u=H2(e,i);i+=2;var f=HO(e,i,n);i+=n;var c=H2(e,i);if(i+=2,u===0&&c===1){var h=HO(e,i,r),v=HO(e,i+r,a);t.item_loc[l]={length:v,offset:h+f}}i+=c*(r+a)}}function eqe(e,t){for(var r=H2(e,4),a=6,n=0;n<r;n++){var o=VA(e,a);if(!o)break;if(o.boxtype==="infe"){for(var i=H2(o.data,4),s="",l=8;l<o.data.length&&o.data[l];l++)s+=String.fromCharCode(o.data[l]);t.item_inf[s]=i}a=o.end}}function tqe(e,t){for(var r=0;;){var a=VA(e,r);if(!a)break;a.boxtype==="ipco"&&Jje(a.data,t),r=a.end}}function rqe(e,t){for(var r=4;;){var a=VA(e,r);if(!a)break;a.boxtype==="iprp"&&tqe(a.data,t),a.boxtype==="iloc"&&Qje(a.data,t),a.boxtype==="iinf"&&eqe(a.data,t),r=a.end}}function aqe(e){var t=e.reduce(function(n,o){return n.width>o.width||n.width===o.width&&n.height>o.height?n:o}),r=e.reduce(function(n,o){return n.height>o.height||n.height===o.height&&n.width>o.width?n:o}),a;return t.width>r.height||t.width===r.height&&t.height>r.width?a=t:a=r,a}hL.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(rqe(e,t),!!t.sizes.length){var r=aqe(t.sizes),a=1;t.transforms.forEach(function(o){var i={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(o.type==="imir"&&(o.value===0?a=s[a]:(a=s[a],a=i[a],a=i[a])),o.type==="irot")for(var l=0;l<o.value;l++)a=i[a]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:r.width,height:r.height,orientation:t.transforms.length?a:null,variants:t.sizes,exif_location:n}}};hL.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),r={};r[t]=!0;for(var a=8;a<e.length;a+=4)r[String.fromCharCode.apply(null,e.slice(a,a+4))]=!0;if(!(!r.mif1&&!r.msf1&&!r.miaf))return t==="avif"||t==="avis"||t==="avio"?{type:"avif",mime:"image/avif"}:t==="heic"||t==="heix"?{type:"heic",mime:"image/heic"}:t==="hevc"||t==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}};var jA={};function vL(e,t){var r=new Error(e);return r.code=t,r}function nqe(e){try{return decodeURIComponent(escape(e))}catch{return e}}function rm(e,t,r){this.input=e.subarray(t,r),this.start=t;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw vL("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}rm.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();!r.offset||this.scan_ifd(r.id,r.offset,e)}};rm.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw vL("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};rm.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw vL("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};rm.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};rm.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};rm.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:return r=this.input[t],r;case 6:return r=this.input[t],r|(r&128)*33554430;case 3:return r=this.read_uint16(t),r;case 8:return r=this.read_uint16(t),r|(r&32768)*131070;case 4:return r=this.read_uint32(t),r;case 9:return r=this.read_uint32(t),r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};rm.prototype.scan_ifd=function(e,t,r){var a=this.read_uint16(t);t+=2;for(var n=0;n<a;n++){var o=this.read_uint16(t),i=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(i),u=s*l,f=u<=4?t+8:this.read_uint32(t+8),c=!1;if(f+u>this.input.length)throw vL("unexpected EOF","EBADDATA");for(var h=[],v=f,p=0;p<s;p++,v+=l){var d=this.exif_format_read(i,v);if(d===null){h=null;break}h.push(d)}Array.isArray(h)&&i===2&&(h=nqe(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(e,o)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:o,offset:h[0]}),c=!0);var g={is_big_endian:this.big_endian,ifd:e,tag:o,format:i,count:s,entry_offset:t+this.start,data_length:u,data_offset:f+this.start,value:h,is_subifd_link:c};if(r(g)===!1){this.aborted=!0;return}t+=12}e===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})};jA.ExifParser=rm;jA.get_orientation=function(e){var t=0;try{return new rm(e,0,e.length).each(function(r){if(r.ifd===0&&r.tag===274&&Array.isArray(r.value))return t=r.value[0],!1}),t}catch{return-1}};var iqe=Di.str2arr,oqe=Di.sliceEq,sqe=Di.readUInt32BE,dL=hL,lqe=jA,uqe=iqe("ftyp"),fqe=function(e){if(!!oqe(e,4,uqe)){var t=dL.unbox(e,0);if(!!t){var r=dL.getMimeType(t.data);if(!!r){for(var a,n=t.end;;){var o=dL.unbox(e,n);if(!o)break;if(n=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){a=o.data;break}}if(!!a){var i=dL.readSizeFromMeta(a);if(!!i){var s={width:i.width,height:i.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(s.variants=i.variants),i.orientation&&(s.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=e.length){var l=sqe(e,i.exif_location.offset),u=e.slice(i.exif_location.offset+l+4,i.exif_location.offset+i.exif_location.length),f=lqe.get_orientation(u);f>0&&(s.orientation=f)}return s}}}}}},cqe=Di.str2arr,hqe=Di.sliceEq,ose=Di.readUInt16LE,vqe=cqe("BM"),dqe=function(e){if(!(e.length<26)&&!!hqe(e,0,vqe))return{width:ose(e,18),height:ose(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}},sse=Di.str2arr,lse=Di.sliceEq,use=Di.readUInt16LE,pqe=sse("GIF87a"),gqe=sse("GIF89a"),mqe=function(e){if(!(e.length<10)&&!(!lse(e,0,pqe)&&!lse(e,0,gqe)))return{width:use(e,6),height:use(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}},GO=Di.readUInt16LE,yqe=0,xqe=1,fse=16,bqe=function(e){var t=GO(e,0),r=GO(e,2),a=GO(e,4);if(!(t!==yqe||r!==xqe||!a)){for(var n=[],o={width:0,height:0},i=0;i<a;i++){var s=e[6+fse*i]||256,l=e[6+fse*i+1]||256,u={width:s,height:l};n.push(u),(s>o.width||l>o.height)&&(o=u)}return{width:o.width,height:o.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}},VO=Di.readUInt16BE,_qe=Di.str2arr,wqe=Di.sliceEq,Tqe=jA,Aqe=_qe("Exif\0\0"),Sqe=function(e){if(!(e.length<2)&&!(e[0]!==255||e[1]!==216||e[2]!==255))for(var t=2;;){for(;;){if(e.length-t<2)return;if(e[t++]===255)break}for(var r=e[t++],a;r===255;)r=e[t++];if(208<=r&&r<=217||r===1)a=0;else if(192<=r&&r<=254){if(e.length-t<2)return;a=VO(e,t)-2,t+=2}else return;if(r===217||r===218)return;var n;if(r===225&&a>=10&&wqe(e,t,Aqe)&&(n=Tqe.get_orientation(e.slice(t+6,t+a))),a>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(e.length-t<a)return;var o={width:VO(e,t+3),height:VO(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(o.orientation=n),o}t+=a}},cse=Di.str2arr,hse=Di.sliceEq,vse=Di.readUInt32BE,Mqe=cse(`\x89PNG\r

`),kqe=cse("IHDR"),Eqe=function(e){if(!(e.length<24)&&!!hse(e,0,Mqe)&&!!hse(e,12,kqe))return{width:vse(e,16),height:vse(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}},Cqe=Di.str2arr,Lqe=Di.sliceEq,dse=Di.readUInt32BE,Pqe=Cqe("8BPS\0"),Iqe=function(e){if(!(e.length<6+16)&&!!Lqe(e,0,Pqe))return{width:dse(e,6+12),height:dse(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}};function Dqe(e){return e===32||e===9||e===13||e===10}function G2(e){return typeof e=="number"&&isFinite(e)&&e>0}function Rqe(e){var t=0,r=e.length;for(e[0]===239&&e[1]===187&&e[2]===191&&(t=3);t<r&&Dqe(e[t]);)t++;return t===r?!1:e[t]===60}var zqe=/<[-_.:a-zA-Z0-9][^>]*>/,Fqe=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,Oqe=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,Nqe=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,Bqe=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,pse=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function $qe(e){var t=e.match(Oqe),r=e.match(Nqe),a=e.match(Bqe);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:a&&(a[1]||a[2])}}function f0(e){return pse.test(e)?e.match(pse)[0]:"px"}var Uqe=function(e){if(!!Rqe(e)){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);var a=(t.match(zqe)||[""])[0];if(!!Fqe.test(a)){var n=$qe(a),o=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return!G2(o)||!G2(i)?void 0:{width:o,height:i,type:"svg",mime:"image/svg+xml",wUnits:f0(n.width),hUnits:f0(n.height)};var s=(n.viewbox||"").split(" "),l={width:s[2],height:s[3]},u=parseFloat(l.width),f=parseFloat(l.height);if(!(!G2(u)||!G2(f))&&f0(l.width)===f0(l.height)){var c=u/f;return n.width?G2(o)?{width:o,height:o/c,type:"svg",mime:"image/svg+xml",wUnits:f0(n.width),hUnits:f0(n.width)}:void 0:n.height?G2(i)?{width:i*c,height:i,type:"svg",mime:"image/svg+xml",wUnits:f0(n.height),hUnits:f0(n.height)}:void 0:{width:u,height:f,type:"svg",mime:"image/svg+xml",wUnits:f0(l.width),hUnits:f0(l.height)}}}}},gse=Di.str2arr,mse=Di.sliceEq,Hqe=Di.readUInt16LE,Gqe=Di.readUInt16BE,Vqe=Di.readUInt32LE,jqe=Di.readUInt32BE,qqe=gse("II*\0"),Yqe=gse("MM\0*");function pL(e,t,r){return r?Gqe(e,t):Hqe(e,t)}function jO(e,t,r){return r?jqe(e,t):Vqe(e,t)}function yse(e,t,r){var a=pL(e,t+2,r),n=jO(e,t+4,r);return n!==1||a!==3&&a!==4?null:a===3?pL(e,t+8,r):jO(e,t+8,r)}var Wqe=function(e){if(!(e.length<8)&&!(!mse(e,0,qqe)&&!mse(e,0,Yqe))){var t=e[0]===77,r=jO(e,4,t)-8;if(!(r<0)){var a=r+8;if(!(e.length-a<2)){var n=pL(e,a+0,t)*12;if(!(n<=0)&&(a+=2,!(e.length-a<n))){var o,i,s,l;for(o=0;o<n;o+=12)l=pL(e,a+o,t),l===256?i=yse(e,a+o,t):l===257&&(s=yse(e,a+o,t));if(i&&s)return{width:i,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}},xse=Di.str2arr,bse=Di.sliceEq,_se=Di.readUInt16LE,qO=Di.readUInt32LE,Xqe=jA,Zqe=xse("RIFF"),Kqe=xse("WEBP");function Jqe(e,t){if(!(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42))return{width:_se(e,t+6)&16383,height:_se(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function Qqe(e,t){if(e[t]===47){var r=qO(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function eYe(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}var tYe=function(e){if(!(e.length<16)&&!(!bse(e,0,Zqe)&&!bse(e,8,Kqe))){var t=12,r=null,a=0,n=qO(e,4)+8;if(!(n>e.length)){for(;t+8<n;){if(e[t]===0){t++;continue}var o=String.fromCharCode.apply(null,e.slice(t,t+4)),i=qO(e,t+4);o==="VP8 "&&i>=10?r=r||Jqe(e,t+8):o==="VP8L"&&i>=9?r=r||Qqe(e,t+8):o==="VP8X"&&i>=10?r=r||eYe(e,t+8):o==="EXIF"&&(a=Xqe.get_orientation(e.slice(t+8,t+8+i)),t=1/0),t+=8+i}if(!!r)return a>0&&(r.orientation=a),r}}},rYe={avif:fqe,bmp:dqe,gif:mqe,ico:bqe,jpeg:Sqe,png:Eqe,psd:Iqe,svg:Uqe,tiff:Wqe,webp:tYe},YO=rYe;function aYe(e){for(var t=Object.keys(YO),r=0;r<t.length;r++){var a=YO[t[r]](e);if(a)return a}return null}OO.exports=function(t){return aYe(t)};OO.exports.parsers=YO;var nYe=OO.exports,iYe=Ru.IMAGE_URL_PREFIX,oYe=wTe.Buffer;Joe.getImageSize=function(e){var t=e.replace(iYe,""),r=new oYe(t,"base64");return nYe(r)};var wse=bt.exports,sYe=zA,lYe=gn,gL=rn.exports,uYe=bt.exports.maxRowLength,fYe=Joe.getImageSize,cYe=function(t,r){var a,n;if(r._hasZ)a=r.z.length,n=uYe(r.z);else if(r._hasSource){var o=fYe(r.source);a=o.height,n=o.width}var i=gL.getFromId(t,r.xaxis||"x"),s=gL.getFromId(t,r.yaxis||"y"),l=i.d2c(r.x0)-r.dx/2,u=s.d2c(r.y0)-r.dy/2,f,c=[l,l+n*r.dx],h=[u,u+a*r.dy];if(i&&i.type==="log")for(f=0;f<n;f++)c.push(l+f*r.dx);if(s&&s.type==="log")for(f=0;f<a;f++)h.push(u+f*r.dy);r._extremes[i._id]=gL.findExtremes(i,c),r._extremes[s._id]=gL.findExtremes(s,h),r._scaler=dYe(r);var v={x0:l,y0:u,z:r.z,w:n,h:a};return[v]};function hYe(e,t,r,a){return function(n){return wse.constrain((n-e)*t,r,a)}}function vYe(e,t){return function(r){return wse.constrain(r,e,t)}}function dYe(e){var t=sYe.colormodel[e.colormodel],r=t.colormodel||e.colormodel,a=r.length;e._sArray=[];for(var n=0;n<a;n++)t.min[n]!==e.zmin[n]||t.max[n]!==e.zmax[n]?e._sArray.push(hYe(e.zmin[n],(t.max[n]-t.min[n])/(e.zmax[n]-e.zmin[n]),t.min[n],t.max[n])):e._sArray.push(vYe(t.min[n],t.max[n]));return function(o){for(var i=o.slice(0,a),s=0;s<a;s++){var l=i[s];if(!lYe(l))return!1;i[s]=e._sArray[s](l)}return i}}var pYe=Ra.exports,am=bt.exports,Tse=am.strTranslate,gYe=Xh,Ase=zA,mYe=am.isIOS()||am.isSafari()||am.isIE(),yYe=function(t,r,a,n){var o=r.xaxis,i=r.yaxis,s=!(mYe||t._context._exportedPlot);am.makeTraceGroups(n,a,"im").each(function(l){var u=pYe.select(this),f=l[0],c=f.trace,h=(c.zsmooth==="fast"||c.zsmooth===!1&&s)&&!c._hasZ&&c._hasSource&&o.type==="linear"&&i.type==="linear";c._realImage=h;var v=f.z,p=f.x0,d=f.y0,g=f.w,m=f.h,y=c.dx,_=c.dy,S,M,w,A,k,T;for(T=0;S===void 0&&T<g;)S=o.c2p(p+T*y),T++;for(T=g;M===void 0&&T>0;)M=o.c2p(p+T*y),T--;for(T=0;A===void 0&&T<m;)A=i.c2p(d+T*_),T++;for(T=m;k===void 0&&T>0;)k=i.c2p(d+T*_),T--;if(M<S&&(w=M,M=S,S=w),k<A&&(w=A,A=k,k=w),!h){var L=.5;S=Math.max(-L*o._length,S),M=Math.min((1+L)*o._length,M),A=Math.max(-L*i._length,A),k=Math.min((1+L)*i._length,k)}var C=Math.round(M-S),I=Math.round(k-A),R=C<=0||I<=0;if(R){var B=u.selectAll("image").data([]);B.exit().remove();return}function N(ae){var ie=document.createElement("canvas");ie.width=C,ie.height=I;var we=ie.getContext("2d"),Te=function(qe){return am.constrain(Math.round(o.c2p(p+qe*y)-S),0,C)},he=function(qe){return am.constrain(Math.round(i.c2p(d+qe*_)-A),0,I)},xe=Ase.colormodel[c.colormodel],Se=xe.colormodel||c.colormodel,ye=xe.fmt,re;for(T=0;T<f.w;T++){var se=Te(T),de=Te(T+1);if(!(de===se||isNaN(de)||isNaN(se)))for(var Me=0;Me<f.h;Me++){var Ie=he(Me),Ee=he(Me+1);Ee===Ie||isNaN(Ee)||isNaN(Ie)||!ae(T,Me)||(re=c._scaler(ae(T,Me)),re?we.fillStyle=Se+"("+ye(re).join(",")+")":we.fillStyle="rgba(0,0,0,0)",we.fillRect(se,Ie,de-se,Ee-Ie))}}return ie}var D=u.selectAll("image").data([l]);D.enter().append("svg:image").attr({xmlns:gYe.svg,preserveAspectRatio:"none"}),D.exit().remove();var O=c.zsmooth===!1?Ase.pixelatedStyle:"";if(h){var $=am.simpleMap(o.range,o.r2l),Y=am.simpleMap(i.range,i.r2l),X=$[1]<$[0],ee=Y[1]>Y[0];if(X||ee){var Q=S+C/2,Z=A+I/2;O+="transform:"+Tse(Q+"px",Z+"px")+"scale("+(X?-1:1)+","+(ee?-1:1)+")"+Tse(-Q+"px",-Z+"px")+";"}}D.attr("style",O);var q=new Promise(function(ae){if(c._hasZ)ae();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===g&&c._canvas.el.height===m&&c._canvas.source===c.source)ae();else{var ie=document.createElement("canvas");ie.width=g,ie.height=m;var we=ie.getContext("2d");c._image=c._image||new Image;var Te=c._image;Te.onload=function(){we.drawImage(Te,0,0),c._canvas={el:ie,source:c.source},ae()},Te.setAttribute("src",c.source)}}).then(function(){var ae,ie;if(c._hasZ)ie=N(function(he,xe){return v[xe][he]}),ae=ie.toDataURL("image/png");else if(c._hasSource)if(h)ae=c.source;else{var we=c._canvas.el.getContext("2d"),Te=we.getImageData(0,0,g,m).data;ie=N(function(he,xe){var Se=4*(xe*g+he);return[Te[Se],Te[Se+1],Te[Se+2],Te[Se+3]]}),ae=ie.toDataURL("image/png")}D.attr({"xlink:href":ae,height:I,width:C,x:S,y:A})});t._promises.push(q)})},xYe=Ra.exports,bYe=function(t){xYe.select(t).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})},Sse=Rs,_Ye=bt.exports,wYe=zA,TYe=function(t,r,a){var n=t.cd[0],o=n.trace,i=t.xa,s=t.ya;if(!(Sse.inbox(r-n.x0,r-(n.x0+n.w*o.dx),0)>0||Sse.inbox(a-n.y0,a-(n.y0+n.h*o.dy),0)>0)){var l=Math.floor((r-n.x0)/o.dx),u=Math.floor(Math.abs(a-n.y0)/o.dy),f;if(o._hasZ?f=n.z[u][l]:o._hasSource&&(f=o._canvas.el.getContext("2d").getImageData(l,u,1,1).data),!!f){var c=n.hi||o.hoverinfo,h;if(c){var v=c.split("+");v.indexOf("all")!==-1&&(v=["color"]),v.indexOf("color")!==-1&&(h=!0)}var p=wYe.colormodel[o.colormodel],d=p.colormodel||o.colormodel,g=d.length,m=o._scaler(f),y=p.suffix,_=[];(o.hovertemplate||h)&&(_.push("["+[m[0]+y[0],m[1]+y[1],m[2]+y[2]].join(", ")),g===4&&_.push(", "+m[3]+y[3]),_.push("]"),_=_.join(""),t.extraText=d.toUpperCase()+": "+_);var S;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[u])?S=o.hovertext[u][l]:Array.isArray(o.text)&&Array.isArray(o.text[u])&&(S=o.text[u][l]);var M=s.c2p(n.y0+(u+.5)*o.dy),w=n.x0+(l+.5)*o.dx,A=n.y0+(u+.5)*o.dy,k="["+f.slice(0,o.colormodel.length).join(", ")+"]";return[_Ye.extendFlat(t,{index:[u,l],x0:i.c2p(n.x0+l*o.dx),x1:i.c2p(n.x0+(l+1)*o.dx),y0:M,y1:M,color:m,xVal:w,xLabelVal:w,yVal:A,yLabelVal:A,zLabelVal:k,text:S,hovertemplateLabels:{zLabel:k,colorLabel:_,"color[0]Label":m[0]+y[0],"color[1]Label":m[1]+y[1],"color[2]Label":m[2]+y[2],"color[3]Label":m[3]+y[3]}})]}}},AYe=function(t,r){return"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t.color=r.color,t.colormodel=r.trace.colormodel,t.z||(t.z=r.color),t},SYe={attributes:Zoe,supplyDefaults:zje,calc:cYe,plot:yYe,style:bYe,hoverPoints:TYe,eventData:AYe,moduleType:"trace",name:"image",basePlotModule:Ii,categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{description:["Display an image, i.e. data on a 2D regular raster.","By default, when an image is displayed in a subplot,","its y axis will be reversed (ie. `autorange: 'reversed'`),","constrained to the domain (ie. `constrain: 'domain'`)","and it will have the same scale as its x axis (ie. `scaleanchor: 'x,`)","in order for pixels to be rendered as squares."].join(" ")}},MYe=SYe,kYe=ao,EYe=Fo.attributes,CYe=Ts,LYe=us,PYe=zn.hovertemplateAttrs,IYe=zn.texttemplateAttrs,V2=cn.extendFlat,qA=CYe({editType:"plot",arrayOk:!0,colorEditType:"plot",description:"Sets the font used for `textinfo`."}),j2={labels:{valType:"data_array",editType:"calc",description:["Sets the sector labels.","If `labels` entries are duplicated, we sum associated `values`","or simply count occurrences if `values` is not provided.","For other array attributes (including color) we use the first","non-empty entry among all occurrences of the label."].join(" ")},label0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `labels`.","Builds a numeric set of labels.","Use with `dlabel`","where `label0` is the starting label and `dlabel` the step."].join(" ")},dlabel:{valType:"number",dflt:1,editType:"calc",description:"Sets the label step. See `label0` for more info."},values:{valType:"data_array",editType:"calc",description:["Sets the values of the sectors.","If omitted, we count occurrences of each label."].join(" ")},marker:{colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:{valType:"color",dflt:LYe.defaultLine,arrayOk:!0,editType:"style",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot",description:["Sets text elements associated with each sector.","If trace `textinfo` contains a *text* flag, these elements will be seen","on the chart.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each sector.","If a single string, the same string appears for","all data points.","If an array of string, the items are mapped in order of","this trace's sectors.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple pie charts that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc",description:["Determines which trace information appear on the graph."].join(" ")},hoverinfo:V2({},kYe.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:PYe({},{keys:["label","color","value","percent","text"]}),texttemplate:IYe({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot",description:["Specifies the location of the `textinfo`."].join(" ")},textfont:V2({},qA,{description:"Sets the font used for `textinfo`."}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot",description:["Controls the orientation of the text inside chart sectors.","When set to *auto*, text may be oriented in any direction in order","to be as big as possible in the middle of a sector.","The *horizontal* option orients text to be parallel with the bottom","of the chart, and may make text smaller in order to achieve that goal.","The *radial* option orients text along the radius of the sector.","The *tangential* option orients text perpendicular to the radius of the sector."].join(" ")},insidetextfont:V2({},qA,{description:"Sets the font used for `textinfo` lying inside the sector."}),outsidetextfont:V2({},qA,{description:"Sets the font used for `textinfo` lying outside the sector."}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether outside text labels can push the margins."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"plot",description:["Sets the title of the chart.","If it is empty, no title is displayed.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:V2({},qA,{description:["Sets the font used for `title`.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot",description:["Specifies the location of the `title`.","Note that the title's position used to be set","by the now deprecated `titleposition` attribute."].join(" ")},editType:"plot"},domain:EYe({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the fraction of the radius to cut out of the pie.","Use this to make a donut chart."].join(" ")},sort:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the sectors are reordered","from largest to smallest."].join(" ")},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc",description:["Specifies the direction at which succeeding sectors follow","one another."].join(" ")},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc",description:["Instead of the first slice starting at 12 o'clock,","rotate to some other angle."].join(" ")},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc",description:["Sets the fraction of larger radius to pull the sectors","out from the center. This can be a constant","to pull all slices apart from each other equally","or an array to highlight one or more slices."].join(" ")},_deprecated:{title:{valType:"string",dflt:"",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:V2({},qA,{description:"Deprecated in favor of `title.font`."}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc",description:"Deprecated in favor of `title.position`."}}},DYe=gn,WO=bt.exports,RYe=j2,zYe=Fo.defaults,FYe=ch.handleText;function Mse(e,t){var r=Array.isArray(e),a=WO.isArrayOrTypedArray(t),n=Math.min(r?e.length:1/0,a?t.length:1/0);if(isFinite(n)||(n=0),n&&a){for(var o,i=0;i<n;i++){var s=t[i];if(DYe(s)&&s>0){o=!0;break}}o||(n=0)}return{hasLabels:r,hasValues:a,len:n}}function OYe(e,t,r,a){function n(_,S){return WO.coerce(e,t,RYe,_,S)}var o=n("labels"),i=n("values"),s=Mse(o,i),l=s.len;if(t._hasLabels=s.hasLabels,t._hasValues=s.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),!l){t.visible=!1;return}t._length=l;var u=n("marker.line.width");u&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var f=n("text"),c=n("texttemplate"),h;if(c||(h=n("textinfo",Array.isArray(f)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),c||h&&h!=="none"){var v=n("textposition");FYe(e,t,a,n,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var p=Array.isArray(v)||v==="auto",d=p||v==="outside";d&&n("automargin"),(v==="inside"||v==="auto"||Array.isArray(v))&&n("insidetextorientation")}zYe(t,a,n);var g=n("hole"),m=n("title.text");if(m){var y=n("title.position",g?"middle center":"top center");!g&&y==="middle center"&&(t.title.position="top center"),WO.coerceFont(n,"title.font",a.font)}n("sort"),n("direction"),n("rotation"),n("pull")}var kse={handleLabelsAndValues:Mse,supplyDefaults:OYe},XO={hiddenlabels:{valType:"data_array",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},NYe=bt.exports,BYe=XO,$Ye=function(t,r){function a(n,o){return NYe.coerce(t,r,BYe,n,o)}a("hiddenlabels"),a("piecolorway",r.colorway),a("extendpiecolors")},UYe=gn,ZO=Hl.exports,HYe=Oa.exports,GYe={};function VYe(e,t){var r=[],a=e._fullLayout,n=a.hiddenlabels||[],o=t.labels,i=t.marker.colors||[],s=t.values,l=t._length,u=t._hasValues&&l,f,c;if(t.dlabel)for(o=new Array(l),f=0;f<l;f++)o[f]=String(t.label0+f*t.dlabel);var h={},v=Ese(a["_"+t.type+"colormap"]),p=0,d=!1;for(f=0;f<l;f++){var g,m,y;if(u){if(g=s[f],!UYe(g))continue;g=+g}else g=1;m=o[f],(m===void 0||m==="")&&(m=f),m=String(m);var _=h[m];_===void 0?(h[m]=r.length,y=n.indexOf(m)!==-1,y||(p+=g),r.push({v:g,label:m,color:v(i[f],m),i:f,pts:[f],hidden:y})):(d=!0,c=r[_],c.v+=g,c.pts.push(f),c.hidden||(p+=g),c.color===!1&&i[f]&&(c.color=v(i[f],m)))}r=r.filter(function(M){return M.v>=0});var S=t.type==="funnelarea"?d:t.sort;return S&&r.sort(function(M,w){return w.v-M.v}),r[0]&&(r[0].vTotal=p),r}function Ese(e){return function(r,a){return!r||(r=ZO(r),!r.isValid())?!1:(r=HYe.addOpacity(r,r.getAlpha()),e[a]||(e[a]=r),r)}}function jYe(e,t){var r=(t||{}).type;r||(r="pie");var a=e._fullLayout,n=e.calcdata,o=a[r+"colorway"],i=a["_"+r+"colormap"];a["extend"+r+"colors"]&&(o=Cse(o,GYe));for(var s=0,l=0;l<n.length;l++){var u=n[l],f=u[0].trace.type;if(f===r)for(var c=0;c<u.length;c++){var h=u[c];h.color===!1&&(i[h.label]?h.color=i[h.label]:(i[h.label]=h.color=o[s%o.length],s++))}}}function Cse(e,t){var r,a=JSON.stringify(e),n=t[a];if(!n){for(n=e.slice(),r=0;r<e.length;r++)n.push(ZO(e[r]).lighten(20).toHexString());for(r=0;r<e.length;r++)n.push(ZO(e[r]).darken(20).toHexString());t[a]=n}return n}var YA={calc:VYe,crossTraceCalc:jYe,makePullColorFn:Ese,generateExtendedColors:Cse},qYe=oh.appendArrayMultiPointValues,YYe=function(t,r){var a={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};return t.pts.length===1&&(a.pointNumber=a.i=t.pts[0]),qYe(a,r,t.pts),r.type==="funnelarea"&&(delete a.v,delete a.i),a},ph=Ra.exports,WYe=Eo.exports,mL=Rs,Lse=Oa.exports,nm=xn.exports,zf=bt.exports,XYe=zf.strScale,Pse=zf.strTranslate,KO=xo,Ise=If,ZYe=Ise.recordMinTextSize,KYe=Ise.clearMinTextSize,Dse=g2.TEXTPAD,Ki=hy,yL=YYe,Rse=bt.exports.isValidTextValue;function JYe(e,t){var r=e._fullLayout,a=r._size;KYe("pie",r),Ose(t,e),Yse(t,a);var n=zf.makeTraceGroups(r._pielayer,t,"trace").each(function(o){var i=ph.select(this),s=o[0],l=s.trace;sWe(o),i.attr("stroke-linejoin","round"),i.each(function(){var u=ph.select(this).selectAll("g.slice").data(o);u.enter().append("g").classed("slice",!0),u.exit().remove();var f=[[[],[]],[[],[]]],c=!1;u.each(function(_,S){if(_.hidden){ph.select(this).selectAll("path,g").remove();return}_.pointNumber=_.i,_.curveNumber=l.index,f[_.pxmid[1]<0?0:1][_.pxmid[0]<0?0:1].push(_);var M=s.cx,w=s.cy,A=ph.select(this),k=A.selectAll("path.surface").data([_]);if(k.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),A.call(zse,e,o),l.pull){var T=+Ki.castOption(l.pull,_.pts)||0;T>0&&(M+=T*_.pxmid[0],w+=T*_.pxmid[1])}_.cxFinal=M,_.cyFinal=w;function L(O,$,Y,X){var ee=X*($[0]-O[0]),Q=X*($[1]-O[1]);return"a"+X*s.r+","+X*s.r+" 0 "+_.largeArc+(Y?" 1 ":" 0 ")+ee+","+Q}var C=l.hole;if(_.v===s.vTotal){var I="M"+(M+_.px0[0])+","+(w+_.px0[1])+L(_.px0,_.pxmid,!0,1)+L(_.pxmid,_.px0,!0,1)+"Z";C?k.attr("d","M"+(M+C*_.px0[0])+","+(w+C*_.px0[1])+L(_.px0,_.pxmid,!1,C)+L(_.pxmid,_.px0,!1,C)+"Z"+I):k.attr("d",I)}else{var R=L(_.px0,_.px1,!0,1);if(C){var B=1-C;k.attr("d","M"+(M+C*_.px1[0])+","+(w+C*_.px1[1])+L(_.px1,_.px0,!1,C)+"l"+B*_.px0[0]+","+B*_.px0[1]+R+"Z")}else k.attr("d","M"+M+","+w+"l"+_.px0[0]+","+_.px0[1]+R+"Z")}Wse(e,_,s);var N=Ki.castOption(l.textposition,_.pts),D=A.selectAll("g.slicetext").data(_.text&&N!=="none"?[0]:[]);D.enter().append("g").classed("slicetext",!0),D.exit().remove(),D.each(function(){var O=zf.ensureSingle(ph.select(this),"text","",function(ae){ae.attr("data-notex",1)}),$=zf.ensureUniformFontSize(e,N==="outside"?eWe(l,_,r.font):Fse(l,_,r.font));O.text(_.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(nm.font,$).call(KO.convertToTspans,e);var Y=nm.bBox(O.node()),X;if(N==="outside")X=Vse(Y,_);else if(X=Nse(Y,_,s),N==="auto"&&X.scale<1){var ee=zf.ensureUniformFontSize(e,l.outsidetextfont);O.call(nm.font,ee),Y=nm.bBox(O.node()),X=Vse(Y,_)}var Q=X.textPosAngle,Z=Q===void 0?_.pxmid:xL(s.r,Q);if(X.targetX=M+Z[0]*X.rCenter+(X.x||0),X.targetY=w+Z[1]*X.rCenter+(X.y||0),Xse(X,Y),X.outside){var q=X.targetY;_.yLabelMin=q-Y.height/2,_.yLabelMid=q,_.yLabelMax=q+Y.height/2,_.labelExtraX=0,_.labelExtraY=0,c=!0}X.fontSize=$.size,ZYe(l.type,X,r),o[S].transform=X,O.attr("transform",zf.getTextTransform(X))})});var h=ph.select(this).selectAll("g.titletext").data(l.title.text?[0]:[]);if(h.enter().append("g").classed("titletext",!0),h.exit().remove(),h.each(function(){var _=zf.ensureSingle(ph.select(this),"text","",function(w){w.attr("data-notex",1)}),S=l.title.text;l._meta&&(S=zf.templateString(S,l._meta)),_.text(S).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(nm.font,l.title.font).call(KO.convertToTspans,e);var M;l.title.position==="middle center"?M=aWe(s):M=jse(s,a),_.attr("transform",Pse(M.x,M.y)+XYe(Math.min(1,M.scale))+Pse(M.tx,M.ty))}),c&&iWe(f,l),QYe(u,l),c&&l.automargin){var v=nm.bBox(i.node()),p=l.domain,d=a.w*(p.x[1]-p.x[0]),g=a.h*(p.y[1]-p.y[0]),m=(.5*d-s.r)/a.w,y=(.5*g-s.r)/a.h;WYe.autoMargin(e,"pie."+l.uid+".automargin",{xl:p.x[0]-m,xr:p.x[1]+m,yb:p.y[0]-y,yt:p.y[1]+y,l:Math.max(s.cx-s.r-v.left,0),r:Math.max(v.right-(s.cx+s.r),0),b:Math.max(v.bottom-(s.cy+s.r),0),t:Math.max(s.cy-s.r-v.top,0),pad:5})}})});setTimeout(function(){n.selectAll("tspan").each(function(){var o=ph.select(this);o.attr("dy")&&o.attr("dy",o.attr("dy"))})},0)}function QYe(e,t){e.each(function(r){var a=ph.select(this);if(!r.labelExtraX&&!r.labelExtraY){a.select("path.textline").remove();return}var n=a.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,n.attr("transform",zf.getTextTransform(r.transform));var o=r.cxFinal+r.pxmid[0],i=r.cyFinal+r.pxmid[1],s="M"+o+","+i,l=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var u=r.labelExtraX*r.pxmid[1]/r.pxmid[0],f=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(u)>Math.abs(f)?s+="l"+f*r.pxmid[0]/r.pxmid[1]+","+f+"H"+(o+r.labelExtraX+l):s+="l"+r.labelExtraX+","+u+"v"+(f-u)+"h"+l}else s+="V"+(r.yLabelMid+r.labelExtraY)+"h"+l;zf.ensureSingle(a,"path","textline").call(Lse.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})})}function zse(e,t,r){var a=r[0],n=a.cx,o=a.cy,i=a.trace,s=i.type==="funnelarea";"_hasHoverLabel"in i||(i._hasHoverLabel=!1),"_hasHoverEvent"in i||(i._hasHoverEvent=!1),e.on("mouseover",function(l){var u=t._fullLayout,f=t._fullData[i.index];if(!(t._dragging||u.hovermode===!1)){var c=f.hoverinfo;if(Array.isArray(c)&&(c=mL.castHoverinfo({hoverinfo:[Ki.castOption(c,l.pts)],_module:i._module},u,0)),c==="all"&&(c="label+text+value+percent+name"),f.hovertemplate||c!=="none"&&c!=="skip"&&c){var h=l.rInscribed||0,v=n+l.pxmid[0]*(1-h),p=o+l.pxmid[1]*(1-h),d=u.separators,g=[];if(c&&c.indexOf("label")!==-1&&g.push(l.label),l.text=Ki.castOption(f.hovertext||f.text,l.pts),c&&c.indexOf("text")!==-1){var m=l.text;zf.isValidTextValue(m)&&g.push(m)}l.value=l.v,l.valueLabel=Ki.formatPieValue(l.v,d),c&&c.indexOf("value")!==-1&&g.push(l.valueLabel),l.percent=l.v/a.vTotal,l.percentLabel=Ki.formatPiePercent(l.percent,d),c&&c.indexOf("percent")!==-1&&g.push(l.percentLabel);var y=f.hoverlabel,_=y.font,S=[];mL.loneHover({trace:i,x0:v-h*a.r,x1:v+h*a.r,y:p,_x0:s?n+l.TL[0]:v-h*a.r,_x1:s?n+l.TR[0]:v+h*a.r,_y0:s?o+l.TL[1]:p-h*a.r,_y1:s?o+l.BL[1]:p+h*a.r,text:g.join("<br>"),name:f.hovertemplate||c.indexOf("name")!==-1?f.name:void 0,idealAlign:l.pxmid[0]<0?"left":"right",color:Ki.castOption(y.bgcolor,l.pts)||l.color,borderColor:Ki.castOption(y.bordercolor,l.pts),fontFamily:Ki.castOption(_.family,l.pts),fontSize:Ki.castOption(_.size,l.pts),fontColor:Ki.castOption(_.color,l.pts),nameLength:Ki.castOption(y.namelength,l.pts),textAlign:Ki.castOption(y.align,l.pts),hovertemplate:Ki.castOption(f.hovertemplate,l.pts),hovertemplateLabels:l,eventData:[yL(l,f)]},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:t,inOut_bbox:S}),l.bbox=S[0],i._hasHoverLabel=!0}i._hasHoverEvent=!0,t.emit("plotly_hover",{points:[yL(l,f)],event:ph.event})}}),e.on("mouseout",function(l){var u=t._fullLayout,f=t._fullData[i.index],c=ph.select(this).datum();i._hasHoverEvent&&(l.originalEvent=ph.event,t.emit("plotly_unhover",{points:[yL(c,f)],event:ph.event}),i._hasHoverEvent=!1),i._hasHoverLabel&&(mL.loneUnhover(u._hoverlayer.node()),i._hasHoverLabel=!1)}),e.on("click",function(l){var u=t._fullLayout,f=t._fullData[i.index];t._dragging||u.hovermode===!1||(t._hoverdata=[yL(l,f)],mL.click(t,ph.event))})}function eWe(e,t,r){var a=Ki.castOption(e.outsidetextfont.color,t.pts)||Ki.castOption(e.textfont.color,t.pts)||r.color,n=Ki.castOption(e.outsidetextfont.family,t.pts)||Ki.castOption(e.textfont.family,t.pts)||r.family,o=Ki.castOption(e.outsidetextfont.size,t.pts)||Ki.castOption(e.textfont.size,t.pts)||r.size;return{color:a,family:n,size:o}}function Fse(e,t,r){var a=Ki.castOption(e.insidetextfont.color,t.pts);!a&&e._input.textfont&&(a=Ki.castOption(e._input.textfont.color,t.pts));var n=Ki.castOption(e.insidetextfont.family,t.pts)||Ki.castOption(e.textfont.family,t.pts)||r.family,o=Ki.castOption(e.insidetextfont.size,t.pts)||Ki.castOption(e.textfont.size,t.pts)||r.size;return{color:a||Lse.contrast(t.color),family:n,size:o}}function Ose(e,t){for(var r,a,n=0;n<e.length;n++)if(r=e[n][0],a=r.trace,a.title.text){var o=a.title.text;a._meta&&(o=zf.templateString(o,a._meta));var i=nm.tester.append("text").attr("data-notex",1).text(o).call(nm.font,a.title.font).call(KO.convertToTspans,t),s=nm.bBox(i.node(),!0);r.titleBox={width:s.width,height:s.height},i.remove()}}function Nse(e,t,r){var a=r.r||t.rpx1,n=t.rInscribed,o=t.startangle===t.stopangle;if(o)return{rCenter:1-n,scale:0,rotate:0,textPosAngle:0};var i=t.ring,s=i===1&&Math.abs(t.startangle-t.stopangle)===Math.PI*2,l=t.halfangle,u=t.midangle,f=r.trace.insidetextorientation,c=f==="horizontal",h=f==="tangential",v=f==="radial",p=f==="auto",d=[],g;if(!p){var m=function(k,T){if(tWe(t,k)){var L=Math.abs(k-t.startangle),C=Math.abs(k-t.stopangle),I=L<C?L:C;T==="tan"?g=$se(e,a,i,I,0):g=Bse(e,a,i,I,Math.PI/2),g.textPosAngle=k,d.push(g)}},y;if(c||h){for(y=4;y>=-4;y-=2)m(Math.PI*y,"tan");for(y=4;y>=-4;y-=2)m(Math.PI*(y+1),"tan")}if(c||v){for(y=4;y>=-4;y-=2)m(Math.PI*(y+1.5),"rad");for(y=4;y>=-4;y-=2)m(Math.PI*(y+.5),"rad")}}if(s||p||c){var _=Math.sqrt(e.width*e.width+e.height*e.height);if(g={scale:n*a*2/_,rCenter:1-n,rotate:0},g.textPosAngle=(t.startangle+t.stopangle)/2,g.scale>=1)return g;d.push(g)}(p||v)&&(g=Bse(e,a,i,l,u),g.textPosAngle=(t.startangle+t.stopangle)/2,d.push(g)),(p||h)&&(g=$se(e,a,i,l,u),g.textPosAngle=(t.startangle+t.stopangle)/2,d.push(g));for(var S=0,M=0,w=0;w<d.length;w++){var A=d[w].scale;if(M<A&&(M=A,S=w),!p&&M>=1)break}return d[S]}function tWe(e,t){var r=e.startangle,a=e.stopangle;return r>t&&t>a||r<t&&t<a}function Bse(e,t,r,a,n){t=Math.max(0,t-2*Dse);var o=e.width/e.height,i=Gse(o,a,t,r);return{scale:i*2/e.height,rCenter:Use(o,i/t),rotate:Hse(n)}}function $se(e,t,r,a,n){t=Math.max(0,t-2*Dse);var o=e.height/e.width,i=Gse(o,a,t,r);return{scale:i*2/e.width,rCenter:Use(o,i/t),rotate:Hse(n+Math.PI/2)}}function Use(e,t){return Math.cos(t)-e*t}function Hse(e){return(180/Math.PI*e+720)%180-90}function Gse(e,t,r,a){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),a/(Math.sqrt(e*e+a/2)+e))}function rWe(e,t){return e.v===t.vTotal&&!t.trace.hole?1:Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function Vse(e,t){var r=t.pxmid[0],a=t.pxmid[1],n=e.width/2,o=e.height/2;return r<0&&(n*=-1),a<0&&(o*=-1),{scale:1,rCenter:1,rotate:0,x:n+Math.abs(o)*(n>0?1:-1)/2,y:o/(1+r*r/(a*a)),outside:!0}}function aWe(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function jse(e,t){var r=1,a=1,n,o=e.trace,i={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=o.title.font.size,n=qse(o),o.title.position.indexOf("top")!==-1?(i.y-=(1+n)*e.r,s.ty-=e.titleBox.height):o.title.position.indexOf("bottom")!==-1&&(i.y+=(1+n)*e.r);var l=nWe(e.r,e.trace.aspectratio),u=t.w*(o.domain.x[1]-o.domain.x[0])/2;return o.title.position.indexOf("left")!==-1?(u=u+l,i.x-=(1+n)*l,s.tx+=e.titleBox.width/2):o.title.position.indexOf("center")!==-1?u*=2:o.title.position.indexOf("right")!==-1&&(u=u+l,i.x+=(1+n)*l,s.tx-=e.titleBox.width/2),r=u/e.titleBox.width,a=JO(e,t)/e.titleBox.height,{x:i.x,y:i.y,scale:Math.min(r,a),tx:s.tx,ty:s.ty}}function nWe(e,t){return e/(t===void 0?1:t)}function JO(e,t){var r=e.trace,a=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,a/2)}function qse(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t))for(t=0,r=0;r<e.pull.length;r++)e.pull[r]>t&&(t=e.pull[r]);return t}function iWe(e,t){var r,a,n,o,i,s,l,u,f,c,h,v,p;function d(_,S){return _.pxmid[1]-S.pxmid[1]}function g(_,S){return S.pxmid[1]-_.pxmid[1]}function m(_,S){S||(S={});var M=S.labelExtraY+(a?S.yLabelMax:S.yLabelMin),w=a?_.yLabelMin:_.yLabelMax,A=a?_.yLabelMax:_.yLabelMin,k=_.cyFinal+i(_.px0[1],_.px1[1]),T=M-w,L,C,I,R,B,N;if(T*l>0&&(_.labelExtraY=T),!!Array.isArray(t.pull))for(C=0;C<c.length;C++)I=c[C],!(I===_||(Ki.castOption(t.pull,_.pts)||0)>=(Ki.castOption(t.pull,I.pts)||0))&&((_.pxmid[1]-I.pxmid[1])*l>0?(R=I.cyFinal+i(I.px0[1],I.px1[1]),T=R-w-_.labelExtraY,T*l>0&&(_.labelExtraY+=T)):(A+_.labelExtraY-k)*l>0&&(L=3*s*Math.abs(C-c.indexOf(_)),B=I.cxFinal+o(I.px0[0],I.px1[0]),N=B+L-(_.cxFinal+_.pxmid[0])-_.labelExtraX,N*s>0&&(_.labelExtraX+=N)))}for(a=0;a<2;a++)for(n=a?d:g,i=a?Math.max:Math.min,l=a?1:-1,r=0;r<2;r++){for(o=r?Math.max:Math.min,s=r?1:-1,u=e[a][r],u.sort(n),f=e[1-a][r],c=f.concat(u),v=[],h=0;h<u.length;h++)u[h].yLabelMid!==void 0&&v.push(u[h]);for(p=!1,h=0;a&&h<f.length;h++)if(f[h].yLabelMid!==void 0){p=f[h];break}for(h=0;h<v.length;h++){var y=h&&v[h-1];p&&!h&&(y=p),m(v[h],y)}}}function Yse(e,t){for(var r=[],a=0;a<e.length;a++){var n=e[a][0],o=n.trace,i=o.domain,s=t.w*(i.x[1]-i.x[0]),l=t.h*(i.y[1]-i.y[0]);o.title.text&&o.title.position!=="middle center"&&(l-=JO(n,t));var u=s/2,f=l/2;o.type==="funnelarea"&&!o.scalegroup&&(f/=o.aspectratio),n.r=Math.min(u,f)/(1+qse(o)),n.cx=t.l+t.w*(o.domain.x[1]+o.domain.x[0])/2,n.cy=t.t+t.h*(1-o.domain.y[0])-l/2,o.title.text&&o.title.position.indexOf("bottom")!==-1&&(n.cy-=JO(n,t)),o.scalegroup&&r.indexOf(o.scalegroup)===-1&&r.push(o.scalegroup)}oWe(e,r)}function oWe(e,t){for(var r,a,n,o=0;o<t.length;o++){var i=1/0,s=t[o];for(a=0;a<e.length;a++)if(r=e[a][0],n=r.trace,n.scalegroup===s){var l;if(n.type==="pie")l=r.r*r.r;else if(n.type==="funnelarea"){var u,f;n.aspectratio>1?(u=r.r,f=u/n.aspectratio):(f=r.r,u=f*n.aspectratio),u*=(1+n.baseratio)/2,l=u*f}i=Math.min(i,l/r.vTotal)}for(a=0;a<e.length;a++)if(r=e[a][0],n=r.trace,n.scalegroup===s){var c=i*r.vTotal;n.type==="funnelarea"&&(c/=(1+n.baseratio)/2,c/=n.aspectratio),r.r=Math.sqrt(c)}}}function sWe(e){var t=e[0],r=t.r,a=t.trace,n=Ki.getRotationAngle(a.rotation),o=2*Math.PI/t.vTotal,i="px0",s="px1",l,u,f;if(a.direction==="counterclockwise"){for(l=0;l<e.length&&e[l].hidden;l++);if(l===e.length)return;n+=o*e[l].v,o*=-1,i="px1",s="px0"}for(f=xL(r,n),l=0;l<e.length;l++)u=e[l],!u.hidden&&(u[i]=f,u.startangle=n,n+=o*u.v/2,u.pxmid=xL(r,n),u.midangle=n,n+=o*u.v/2,f=xL(r,n),u.stopangle=n,u[s]=f,u.largeArc=u.v>t.vTotal/2?1:0,u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5),u.ring=1-a.hole,u.rInscribed=rWe(u,t))}function xL(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function Wse(e,t,r){var a=e._fullLayout,n=r.trace,o=n.texttemplate,i=n.textinfo;if(!o&&i&&i!=="none"){var s=i.split("+"),l=function(S){return s.indexOf(S)!==-1},u=l("label"),f=l("text"),c=l("value"),h=l("percent"),v=a.separators,p;if(p=u?[t.label]:[],f){var d=Ki.getFirstFilled(n.text,t.pts);Rse(d)&&p.push(d)}c&&p.push(Ki.formatPieValue(t.v,v)),h&&p.push(Ki.formatPiePercent(t.v/r.vTotal,v)),t.text=p.join("<br>")}function g(S){return{label:S.label,value:S.v,valueLabel:Ki.formatPieValue(S.v,a.separators),percent:S.v/r.vTotal,percentLabel:Ki.formatPiePercent(S.v/r.vTotal,a.separators),color:S.color,text:S.text,customdata:zf.castOption(n,S.i,"customdata")}}if(o){var m=zf.castOption(n,t.i,"texttemplate");if(!m)t.text="";else{var y=g(t),_=Ki.getFirstFilled(n.text,t.pts);(Rse(_)||_==="")&&(y.text=_),t.text=zf.texttemplateString(m,y,e._fullLayout._d3locale,y,n._meta||{})}}}function Xse(e,t){var r=e.rotate*Math.PI/180,a=Math.cos(r),n=Math.sin(r),o=(t.left+t.right)/2,i=(t.top+t.bottom)/2;e.textX=o*a-i*n,e.textY=o*n+i*a,e.noCenter=!0}var QO={plot:JYe,formatSliceLabel:Wse,transformInsideText:Nse,determineInsideTextFont:Fse,positionTitleOutside:jse,prerenderTitles:Ose,layoutAreas:Yse,attachFxHandlers:zse,computeTransform:Xse},Zse=Ra.exports,lWe=MT,uWe=If.resizeText,fWe=function(t){var r=t._fullLayout._pielayer.selectAll(".trace");uWe(t,r,"pie"),r.each(function(a){var n=a[0],o=n.trace,i=Zse.select(this);i.style({opacity:o.opacity}),i.selectAll("path.surface").each(function(s){Zse.select(this).call(lWe,s,o)})})},Kse={};(function(e){var t=Eo.exports;e.name="pie",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(Kse);var cWe={attributes:j2,supplyDefaults:kse.supplyDefaults,supplyLayoutDefaults:$Ye,layoutAttributes:XO,calc:YA.calc,crossTraceCalc:YA.crossTraceCalc,plot:QO.plot,style:fWe,styleOne:MT,moduleType:"trace",name:"pie",basePlotModule:Kse,categories:["pie-like","pie","showLegend"],meta:{description:["A data visualized by the sectors of the pie is set in `values`.","The sector labels are set in `labels`.","The sector colors are set in `marker.colors`"].join(" ")}},hWe=cWe,Jse={};(function(e){var t=Eo.exports;e.name="sunburst",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(Jse);var Qse={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]},vWe=ao,dWe=zn.hovertemplateAttrs,pWe=zn.texttemplateAttrs,gWe=bo,mWe=Fo.attributes,im=j2,ele=Qse,WA=cn.extendFlat,bL={labels:{valType:"data_array",editType:"calc",description:["Sets the labels of each of the sectors."].join(" ")},parents:{valType:"data_array",editType:"calc",description:["Sets the parent sectors for each of the sectors.","Empty string items '' are understood to reference","the root node in the hierarchy.",'If `ids` is filled, `parents` items are understood to be "ids" themselves.',"When `ids` is not set, plotly attempts to find matching items in `labels`,","but beware they must be unique."].join(" ")},values:{valType:"data_array",editType:"calc",description:["Sets the values associated with each of the sectors.","Use with `branchvalues` to determine how the values are summed."].join(" ")},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc",description:["Determines how the items in `values` are summed.","When set to *total*, items in `values` are taken to be value of all its descendants.","When set to *remainder*, items in `values` corresponding to the root and the branches sectors","are taken to be the extra part not part of the sum of the values at their leaves."].join(" ")},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc",description:["Determines default for `values` when it is not provided,","by inferring a 1 for each of the *leaves* and/or *branches*, otherwise 0."].join(" ")},level:{valType:"any",editType:"plot",anim:!0,description:["Sets the level from which this trace hierarchy is rendered.","Set `level` to `''` to start from the root node in the hierarchy.",'Must be an "id" if `ids` is filled in, otherwise plotly attempts to find a matching',"item in `labels`."].join(" ")},maxdepth:{valType:"integer",editType:"plot",dflt:-1,description:["Sets the number of rendered sectors from any given `level`.","Set `maxdepth` to *-1* to render all the levels in the hierarchy."].join(" ")},marker:WA({colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this trace.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:WA({},im.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:WA({},im.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},gWe("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the leaves. With colorscale","it is defaulted to 1; otherwise it is defaulted to 0.7"].join(" ")},editType:"plot"},text:im.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot",description:["Determines which trace information appear on the graph."].join(" ")},texttemplate:pWe({editType:"plot"},{keys:ele.eventDataKeys.concat(["label","value"])}),hovertext:im.hovertext,hoverinfo:WA({},vWe.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:dWe({},{keys:ele.eventDataKeys}),textfont:im.textfont,insidetextorientation:im.insidetextorientation,insidetextfont:im.insidetextfont,outsidetextfont:WA({},im.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented at the center of a sunburst graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),rotation:{valType:"angle",dflt:0,editType:"plot",description:["Rotates the whole diagram counterclockwise by some angle.","By default the first slice starts at 3 o'clock."].join(" ")},sort:im.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)",description:["sets the color of the root node for a sunburst/treemap/icicle trace.","this has no effect when a colorscale is used to set the markers."].join(" ")},editType:"calc"},domain:mWe({name:"sunburst",trace:!0,editType:"calc"})},tle={sunburstcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default sunburst slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendsunburstcolors`."].join(" ")},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the sunburst slice colors (whether given by `sunburstcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},yWe=bt.exports,xWe=bL,bWe=Fo.defaults,_We=ch.handleText,rle=Qo,wWe=rle.hasColorscale,TWe=rle.handleDefaults,AWe=function(t,r,a,n){function o(v,p){return yWe.coerce(t,r,xWe,v,p)}var i=o("labels"),s=o("parents");if(!i||!i.length||!s||!s.length){r.visible=!1;return}var l=o("values");l&&l.length?o("branchvalues"):o("count"),o("level"),o("maxdepth");var u=o("marker.line.width");u&&o("marker.line.color",n.paper_bgcolor),o("marker.colors");var f=r._hasColorscale=wWe(t,"marker","colors")||(t.marker||{}).coloraxis;f&&TWe(t,r,n,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",f?1:.7);var c=o("text");o("texttemplate"),r.texttemplate||o("textinfo",Array.isArray(c)?"text+label":"label"),o("hovertext"),o("hovertemplate");var h="auto";_We(t,r,n,o,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("insidetextorientation"),o("sort"),o("rotation"),o("root.color"),bWe(r,n,o),r._length=null},SWe=bt.exports,MWe=tle,kWe=function(t,r){function a(n,o){return SWe.coerce(t,r,MWe,n,o)}a("sunburstcolorway",r.colorway),a("extendsunburstcolors")},XA={};function EWe(e,t){return e.parent===t.parent?1:2}function CWe(e){return e.reduce(LWe,0)/e.length}function LWe(e,t){return e+t.x}function PWe(e){return 1+e.reduce(IWe,0)}function IWe(e,t){return Math.max(e,t.y)}function DWe(e){for(var t;t=e.children;)e=t[0];return e}function RWe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zWe(){var e=EWe,t=1,r=1,a=!1;function n(o){var i,s=0;o.eachAfter(function(h){var v=h.children;v?(h.x=CWe(v),h.y=PWe(v)):(h.x=i?s+=e(h,i):0,h.y=0,i=h)});var l=DWe(o),u=RWe(o),f=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return o.eachAfter(a?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*r}:function(h){h.x=(h.x-f)/(c-f)*t,h.y=(1-(o.y?h.y/o.y:1))*r})}return n.separation=function(o){return arguments.length?(e=o,n):e},n.size=function(o){return arguments.length?(a=!1,t=+o[0],r=+o[1],n):a?null:[t,r]},n.nodeSize=function(o){return arguments.length?(a=!0,t=+o[0],r=+o[1],n):a?[t,r]:null},n}function FWe(e){var t=0,r=e.children,a=r&&r.length;if(!a)t=1;else for(;--a>=0;)t+=r[a].value;e.value=t}function OWe(){return this.eachAfter(FWe)}function NWe(e){var t=this,r,a=[t],n,o,i;do for(r=a.reverse(),a=[];t=r.pop();)if(e(t),n=t.children,n)for(o=0,i=n.length;o<i;++o)a.push(n[o]);while(a.length);return this}function BWe(e){for(var t=this,r=[t],a,n;t=r.pop();)if(e(t),a=t.children,a)for(n=a.length-1;n>=0;--n)r.push(a[n]);return this}function $We(e){for(var t=this,r=[t],a=[],n,o,i;t=r.pop();)if(a.push(t),n=t.children,n)for(o=0,i=n.length;o<i;++o)r.push(n[o]);for(;t=a.pop();)e(t);return this}function UWe(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,a=t.children,n=a&&a.length;--n>=0;)r+=a[n].value;t.value=r})}function HWe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function GWe(e){for(var t=this,r=VWe(t,e),a=[t];t!==r;)t=t.parent,a.push(t);for(var n=a.length;e!==r;)a.splice(n,0,e),e=e.parent;return a}function VWe(e,t){if(e===t)return e;var r=e.ancestors(),a=t.ancestors(),n=null;for(e=r.pop(),t=a.pop();e===t;)n=e,e=r.pop(),t=a.pop();return n}function jWe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function qWe(){var e=[];return this.each(function(t){e.push(t)}),e}function YWe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function WWe(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function e9(e,t){var r=new q2(e),a=+e.value&&(r.value=e.value),n,o=[r],i,s,l,u;for(t==null&&(t=ZWe);n=o.pop();)if(a&&(n.value=+n.data.value),(s=t(n.data))&&(u=s.length))for(n.children=new Array(u),l=u-1;l>=0;--l)o.push(i=n.children[l]=new q2(s[l])),i.parent=n,i.depth=n.depth+1;return r.eachBefore(ale)}function XWe(){return e9(this).eachBefore(KWe)}function ZWe(e){return e.children}function KWe(e){e.data=e.data.data}function ale(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function q2(e){this.data=e,this.depth=this.height=0,this.parent=null}q2.prototype=e9.prototype={constructor:q2,count:OWe,each:NWe,eachAfter:$We,eachBefore:BWe,sum:UWe,sort:HWe,path:GWe,ancestors:jWe,descendants:qWe,leaves:YWe,links:WWe,copy:XWe};var JWe=Array.prototype.slice;function QWe(e){for(var t=e.length,r,a;t;)a=Math.random()*t--|0,r=e[t],e[t]=e[a],e[a]=r;return e}function nle(e){for(var t=0,r=(e=QWe(JWe.call(e))).length,a=[],n,o;t<r;)n=e[t],o&&ile(o,n)?++t:(o=tXe(a=eXe(a,n)),t=0);return o}function eXe(e,t){var r,a;if(t9(t,e))return[t];for(r=0;r<e.length;++r)if(_L(t,e[r])&&t9(ZA(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(a=r+1;a<e.length;++a)if(_L(ZA(e[r],e[a]),t)&&_L(ZA(e[r],t),e[a])&&_L(ZA(e[a],t),e[r])&&t9(ole(e[r],e[a],t),e))return[e[r],e[a],t];throw new Error}function _L(e,t){var r=e.r-t.r,a=t.x-e.x,n=t.y-e.y;return r<0||r*r<a*a+n*n}function ile(e,t){var r=e.r-t.r+1e-6,a=t.x-e.x,n=t.y-e.y;return r>0&&r*r>a*a+n*n}function t9(e,t){for(var r=0;r<t.length;++r)if(!ile(e,t[r]))return!1;return!0}function tXe(e){switch(e.length){case 1:return rXe(e[0]);case 2:return ZA(e[0],e[1]);case 3:return ole(e[0],e[1],e[2])}}function rXe(e){return{x:e.x,y:e.y,r:e.r}}function ZA(e,t){var r=e.x,a=e.y,n=e.r,o=t.x,i=t.y,s=t.r,l=o-r,u=i-a,f=s-n,c=Math.sqrt(l*l+u*u);return{x:(r+o+l/c*f)/2,y:(a+i+u/c*f)/2,r:(c+n+s)/2}}function ole(e,t,r){var a=e.x,n=e.y,o=e.r,i=t.x,s=t.y,l=t.r,u=r.x,f=r.y,c=r.r,h=a-i,v=a-u,p=n-s,d=n-f,g=l-o,m=c-o,y=a*a+n*n-o*o,_=y-i*i-s*s+l*l,S=y-u*u-f*f+c*c,M=v*p-h*d,w=(p*S-d*_)/(M*2)-a,A=(d*g-p*m)/M,k=(v*_-h*S)/(M*2)-n,T=(h*m-v*g)/M,L=A*A+T*T-1,C=2*(o+w*A+k*T),I=w*w+k*k-o*o,R=-(L?(C+Math.sqrt(C*C-4*L*I))/(2*L):I/C);return{x:a+w+A*R,y:n+k+T*R,r:R}}function sle(e,t,r){var a=e.x-t.x,n,o,i=e.y-t.y,s,l,u=a*a+i*i;u?(o=t.r+r.r,o*=o,l=e.r+r.r,l*=l,o>l?(n=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-n*n)),r.x=e.x-n*a-s*i,r.y=e.y-n*i+s*a):(n=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-n*n)),r.x=t.x+n*a-s*i,r.y=t.y+n*i+s*a)):(r.x=t.x+r.r,r.y=t.y)}function lle(e,t){var r=e.r+t.r-1e-6,a=t.x-e.x,n=t.y-e.y;return r>0&&r*r>a*a+n*n}function ule(e){var t=e._,r=e.next._,a=t.r+r.r,n=(t.x*r.r+r.x*t.r)/a,o=(t.y*r.r+r.y*t.r)/a;return n*n+o*o}function wL(e){this._=e,this.next=null,this.previous=null}function fle(e){if(!(n=e.length))return 0;var t,r,a,n,o,i,s,l,u,f,c;if(t=e[0],t.x=0,t.y=0,!(n>1))return t.r;if(r=e[1],t.x=-r.r,r.x=t.r,r.y=0,!(n>2))return t.r+r.r;sle(r,t,a=e[2]),t=new wL(t),r=new wL(r),a=new wL(a),t.next=a.previous=r,r.next=t.previous=a,a.next=r.previous=t;e:for(s=3;s<n;++s){sle(t._,r._,a=e[s]),a=new wL(a),l=r.next,u=t.previous,f=r._.r,c=t._.r;do if(f<=c){if(lle(l._,a._)){r=l,t.next=r,r.previous=t,--s;continue e}f+=l._.r,l=l.next}else{if(lle(u._,a._)){t=u,t.next=r,r.previous=t,--s;continue e}c+=u._.r,u=u.previous}while(l!==u.next);for(a.previous=t,a.next=r,t.next=r.previous=r=a,o=ule(t);(a=a.next)!==r;)(i=ule(a))<o&&(t=a,o=i);r=t.next}for(t=[r._],a=r;(a=a.next)!==r;)t.push(a._);for(a=nle(t),s=0;s<n;++s)t=e[s],t.x-=a.x,t.y-=a.y;return a.r}function aXe(e){return fle(e),e}function nXe(e){return e==null?null:TL(e)}function TL(e){if(typeof e!="function")throw new Error;return e}function Ox(){return 0}function Y2(e){return function(){return e}}function iXe(e){return Math.sqrt(e.value)}function oXe(){var e=null,t=1,r=1,a=Ox;function n(o){return o.x=t/2,o.y=r/2,e?o.eachBefore(cle(e)).eachAfter(r9(a,.5)).eachBefore(hle(1)):o.eachBefore(cle(iXe)).eachAfter(r9(Ox,1)).eachAfter(r9(a,o.r/Math.min(t,r))).eachBefore(hle(Math.min(t,r)/(2*o.r))),o}return n.radius=function(o){return arguments.length?(e=nXe(o),n):e},n.size=function(o){return arguments.length?(t=+o[0],r=+o[1],n):[t,r]},n.padding=function(o){return arguments.length?(a=typeof o=="function"?o:Y2(+o),n):a},n}function cle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function r9(e,t){return function(r){if(a=r.children){var a,n,o=a.length,i=e(r)*t||0,s;if(i)for(n=0;n<o;++n)a[n].r+=i;if(s=fle(a),i)for(n=0;n<o;++n)a[n].r-=i;r.r=s+i}}}function hle(e){return function(t){var r=t.parent;t.r*=e,r&&(t.x=r.x+e*t.x,t.y=r.y+e*t.y)}}function vle(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function KA(e,t,r,a,n){for(var o=e.children,i,s=-1,l=o.length,u=e.value&&(a-t)/e.value;++s<l;)i=o[s],i.y0=r,i.y1=n,i.x0=t,i.x1=t+=i.value*u}function sXe(){var e=1,t=1,r=0,a=!1;function n(i){var s=i.height+1;return i.x0=i.y0=r,i.x1=e,i.y1=t/s,i.eachBefore(o(t,s)),a&&i.eachBefore(vle),i}function o(i,s){return function(l){l.children&&KA(l,l.x0,i*(l.depth+1)/s,l.x1,i*(l.depth+2)/s);var u=l.x0,f=l.y0,c=l.x1-r,h=l.y1-r;c<u&&(u=c=(u+c)/2),h<f&&(f=h=(f+h)/2),l.x0=u,l.y0=f,l.x1=c,l.y1=h}}return n.round=function(i){return arguments.length?(a=!!i,n):a},n.size=function(i){return arguments.length?(e=+i[0],t=+i[1],n):[e,t]},n.padding=function(i){return arguments.length?(r=+i,n):r},n}var dle="$",lXe={depth:-1},ple={};function uXe(e){return e.id}function fXe(e){return e.parentId}function cXe(){var e=uXe,t=fXe;function r(a){var n,o,i=a.length,s,l,u,f=new Array(i),c,h,v={};for(o=0;o<i;++o)n=a[o],u=f[o]=new q2(n),(c=e(n,o,a))!=null&&(c+="")&&(h=dle+(u.id=c),v[h]=h in v?ple:u);for(o=0;o<i;++o)if(u=f[o],c=t(a[o],o,a),c==null||!(c+="")){if(s)throw new Error("multiple roots");s=u}else{if(l=v[dle+c],!l)throw new Error("missing: "+c);if(l===ple)throw new Error("ambiguous: "+c);l.children?l.children.push(u):l.children=[u],u.parent=l}if(!s)throw new Error("no root");if(s.parent=lXe,s.eachBefore(function(p){p.depth=p.parent.depth+1,--i}).eachBefore(ale),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(a){return arguments.length?(e=TL(a),r):e},r.parentId=function(a){return arguments.length?(t=TL(a),r):t},r}function hXe(e,t){return e.parent===t.parent?1:2}function a9(e){var t=e.children;return t?t[0]:e.t}function n9(e){var t=e.children;return t?t[t.length-1]:e.t}function vXe(e,t,r){var a=r/(t.i-e.i);t.c-=a,t.s+=r,e.c+=a,t.z+=r,t.m+=r}function dXe(e){for(var t=0,r=0,a=e.children,n=a.length,o;--n>=0;)o=a[n],o.z+=t,o.m+=t,t+=o.s+(r+=o.c)}function pXe(e,t,r){return e.a.parent===t.parent?e.a:r}function AL(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}AL.prototype=Object.create(q2.prototype);function gXe(e){for(var t=new AL(e,0),r,a=[t],n,o,i,s;r=a.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)a.push(n=r.children[i]=new AL(o[i],i)),n.parent=r;return(t.parent=new AL(null,0)).children=[t],t}function mXe(){var e=hXe,t=1,r=1,a=null;function n(u){var f=gXe(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),a)u.eachBefore(l);else{var c=u,h=u,v=u;u.eachBefore(function(y){y.x<c.x&&(c=y),y.x>h.x&&(h=y),y.depth>v.depth&&(v=y)});var p=c===h?1:e(c,h)/2,d=p-c.x,g=t/(h.x+p+d),m=r/(v.depth||1);u.eachBefore(function(y){y.x=(y.x+d)*g,y.y=y.depth*m})}return u}function o(u){var f=u.children,c=u.parent.children,h=u.i?c[u.i-1]:null;if(f){dXe(u);var v=(f[0].z+f[f.length-1].z)/2;h?(u.z=h.z+e(u._,h._),u.m=u.z-v):u.z=v}else h&&(u.z=h.z+e(u._,h._));u.parent.A=s(u,h,u.parent.A||c[0])}function i(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,f,c){if(f){for(var h=u,v=u,p=f,d=h.parent.children[0],g=h.m,m=v.m,y=p.m,_=d.m,S;p=n9(p),h=a9(h),p&&h;)d=a9(d),v=n9(v),v.a=u,S=p.z+y-h.z-g+e(p._,h._),S>0&&(vXe(pXe(p,u,c),u,S),g+=S,m+=S),y+=p.m,g+=h.m,_+=d.m,m+=v.m;p&&!n9(v)&&(v.t=p,v.m+=y-m),h&&!a9(d)&&(d.t=h,d.m+=g-_,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*r}return n.separation=function(u){return arguments.length?(e=u,n):e},n.size=function(u){return arguments.length?(a=!1,t=+u[0],r=+u[1],n):a?null:[t,r]},n.nodeSize=function(u){return arguments.length?(a=!0,t=+u[0],r=+u[1],n):a?[t,r]:null},n}function SL(e,t,r,a,n){for(var o=e.children,i,s=-1,l=o.length,u=e.value&&(n-r)/e.value;++s<l;)i=o[s],i.x0=t,i.x1=a,i.y0=r,i.y1=r+=i.value*u}var gle=(1+Math.sqrt(5))/2;function mle(e,t,r,a,n,o){for(var i=[],s=t.children,l,u,f=0,c=0,h=s.length,v,p,d=t.value,g,m,y,_,S,M,w;f<h;){v=n-r,p=o-a;do g=s[c++].value;while(!g&&c<h);for(m=y=g,M=Math.max(p/v,v/p)/(d*e),w=g*g*M,S=Math.max(y/w,w/m);c<h;++c){if(g+=u=s[c].value,u<m&&(m=u),u>y&&(y=u),w=g*g*M,_=Math.max(y/w,w/m),_>S){g-=u;break}S=_}i.push(l={value:g,dice:v<p,children:s.slice(f,c)}),l.dice?KA(l,r,a,n,d?a+=p*g/d:o):SL(l,r,a,d?r+=v*g/d:n,o),d-=g,f=c}return i}var yle=function e(t){function r(a,n,o,i,s){mle(t,a,n,o,i,s)}return r.ratio=function(a){return e((a=+a)>1?a:1)},r}(gle);function yXe(){var e=yle,t=!1,r=1,a=1,n=[0],o=Ox,i=Ox,s=Ox,l=Ox,u=Ox;function f(h){return h.x0=h.y0=0,h.x1=r,h.y1=a,h.eachBefore(c),n=[0],t&&h.eachBefore(vle),h}function c(h){var v=n[h.depth],p=h.x0+v,d=h.y0+v,g=h.x1-v,m=h.y1-v;g<p&&(p=g=(p+g)/2),m<d&&(d=m=(d+m)/2),h.x0=p,h.y0=d,h.x1=g,h.y1=m,h.children&&(v=n[h.depth+1]=o(h)/2,p+=u(h)-v,d+=i(h)-v,g-=s(h)-v,m-=l(h)-v,g<p&&(p=g=(p+g)/2),m<d&&(d=m=(d+m)/2),e(h,p,d,g,m))}return f.round=function(h){return arguments.length?(t=!!h,f):t},f.size=function(h){return arguments.length?(r=+h[0],a=+h[1],f):[r,a]},f.tile=function(h){return arguments.length?(e=TL(h),f):e},f.padding=function(h){return arguments.length?f.paddingInner(h).paddingOuter(h):f.paddingInner()},f.paddingInner=function(h){return arguments.length?(o=typeof h=="function"?h:Y2(+h),f):o},f.paddingOuter=function(h){return arguments.length?f.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):f.paddingTop()},f.paddingTop=function(h){return arguments.length?(i=typeof h=="function"?h:Y2(+h),f):i},f.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Y2(+h),f):s},f.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Y2(+h),f):l},f.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Y2(+h),f):u},f}function xXe(e,t,r,a,n){var o=e.children,i,s=o.length,l,u=new Array(s+1);for(u[0]=l=i=0;i<s;++i)u[i+1]=l+=o[i].value;f(0,s,e.value,t,r,a,n);function f(c,h,v,p,d,g,m){if(c>=h-1){var y=o[c];y.x0=p,y.y0=d,y.x1=g,y.y1=m;return}for(var _=u[c],S=v/2+_,M=c+1,w=h-1;M<w;){var A=M+w>>>1;u[A]<S?M=A+1:w=A}S-u[M-1]<u[M]-S&&c+1<M&&--M;var k=u[M]-_,T=v-k;if(g-p>m-d){var L=(p*T+g*k)/v;f(c,M,k,p,d,L,m),f(M,h,T,L,d,g,m)}else{var C=(d*T+m*k)/v;f(c,M,k,p,d,g,C),f(M,h,T,p,C,g,m)}}}function bXe(e,t,r,a,n){(e.depth&1?SL:KA)(e,t,r,a,n)}var _Xe=function e(t){function r(a,n,o,i,s){if((l=a._squarify)&&l.ratio===t)for(var l,u,f,c,h=-1,v,p=l.length,d=a.value;++h<p;){for(u=l[h],f=u.children,c=u.value=0,v=f.length;c<v;++c)u.value+=f[c].value;u.dice?KA(u,n,o,i,o+=(s-o)*u.value/d):SL(u,n,o,n+=(i-n)*u.value/d,s),d-=u.value}else a._squarify=l=mle(t,a,n,o,i,s),l.ratio=t}return r.ratio=function(a){return e((a=+a)>1?a:1)},r}(gle),wXe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:zWe,hierarchy:e9,pack:oXe,packSiblings:aXe,packEnclose:nle,partition:sXe,stratify:cXe,tree:mXe,treemap:yXe,treemapBinary:xXe,treemapDice:KA,treemapSlice:SL,treemapSliceDice:bXe,treemapSquarify:yle,treemapResquarify:_Xe}),ML=qh(wXe);(function(e){var t=ML,r=gn,a=bt.exports,n=Qo.makeColorScaleFuncFromTrace,o=YA.makePullColorFn,i=YA.generateExtendedColors,s=Qo.calc,l=Un.ALMOST_EQUAL,u={},f={},c={};e.calc=function(v,p){var d=v._fullLayout,g=p.ids,m=a.isArrayOrTypedArray(g),y=p.labels,_=p.parents,S=p.values,M=a.isArrayOrTypedArray(S),w=[],A={},k={},T=function(xe,Se){A[xe]?A[xe].push(Se):A[xe]=[Se],k[Se]=1},L=function(xe){return xe||typeof xe=="number"},C=function(xe){return!M||r(S[xe])&&S[xe]>=0},I,R,B;m?(I=Math.min(g.length,_.length),R=function(xe){return L(g[xe])&&C(xe)},B=function(xe){return String(g[xe])}):(I=Math.min(y.length,_.length),R=function(xe){return L(y[xe])&&C(xe)},B=function(xe){return String(y[xe])}),M&&(I=Math.min(I,S.length));for(var N=0;N<I;N++)if(R(N)){var D=B(N),O=L(_[N])?String(_[N]):"",$={i:N,id:D,pid:O,label:L(y[N])?String(y[N]):""};M&&($.v=+S[N]),w.push($),T(O,D)}if(A[""]){if(A[""].length>1){for(var ee=a.randstr(),Q=0;Q<w.length;Q++)w[Q].pid===""&&(w[Q].pid=ee);w.unshift({hasMultipleRoots:!0,id:ee,pid:"",label:""})}}else{var Y=[],X;for(X in A)k[X]||Y.push(X);if(Y.length===1)X=Y[0],w.unshift({hasImpliedRoot:!0,id:X,pid:"",label:X});else return a.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",Y.join(", ")].join(" "))}var Z;try{Z=t.stratify().id(function(xe){return xe.id}).parentId(function(xe){return xe.pid})(w)}catch(xe){return a.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",xe.message].join(" "))}var q=t.hierarchy(Z),ae=!1;if(M)switch(p.branchvalues){case"remainder":q.sum(function(xe){return xe.data.v});break;case"total":q.each(function(xe){var Se=xe.data.data,ye=Se.v;if(xe.children){var re=xe.children.reduce(function(se,de){return se+de.data.data.v},0);if((Se.hasImpliedRoot||Se.hasMultipleRoots)&&(ye=re),ye<re*l)return ae=!0,a.warn(["Total value for node",xe.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,ye,`
children sum =`,re].join(" "))}xe.value=ye});break}else h(q,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!ae){p.sort&&q.sort(function(xe,Se){return Se.value-xe.value});var ie,we,Te=p.marker.colors||[],he=!!Te.length;return p._hasColorscale?(he||(Te=M?p.values:p._values),s(v,p,{vals:Te,containerStr:"marker",cLetter:"c"}),we=n(p.marker)):ie=o(d["_"+p.type+"colormap"]),q.each(function(xe){var Se=xe.data.data;Se.color=p._hasColorscale?we(Te[Se.i]):ie(Te[Se.i],Se.id)}),w[0].hierarchy=q,w}},e._runCrossTraceCalc=function(v,p){var d=p._fullLayout,g=p.calcdata,m=d[v+"colorway"],y=d["_"+v+"colormap"];d["extend"+v+"colors"]&&(m=i(m,v==="icicle"?c:v==="treemap"?f:u));var _=0,S;function M(T){var L=T.data.data,C=L.id;L.color===!1&&(y[C]?L.color=y[C]:T.parent?T.parent.parent?L.color=T.parent.data.data.color:(y[C]=L.color=m[_%m.length],_++):L.color=S)}for(var w=0;w<g.length;w++){var A=g[w],k=A[0];k.trace.type===v&&k.hierarchy&&(S=k.trace.root.color,k.hierarchy.each(M))}},e.crossTraceCalc=function(v){return e._runCrossTraceCalc("sunburst",v)};function h(v,p,d){var g=0,m=v.children;if(m){for(var y=m.length,_=0;_<y;_++)g+=h(m[_],p,d);d.branches&&g++}else d.leaves&&g++;return v.value=v.data.data.value=g,p._values||(p._values=[]),p._values[v.data.data.i]=g,g}})(XA);var kL={};function W2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function JA(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Dy(){}var Nx=.7,X2=1/Nx,Z2="\\s*([+-]?\\d+)\\s*",QA="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c0="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TXe=/^#([0-9a-f]{3,8})$/,AXe=new RegExp("^rgb\\("+[Z2,Z2,Z2]+"\\)$"),SXe=new RegExp("^rgb\\("+[c0,c0,c0]+"\\)$"),MXe=new RegExp("^rgba\\("+[Z2,Z2,Z2,QA]+"\\)$"),kXe=new RegExp("^rgba\\("+[c0,c0,c0,QA]+"\\)$"),EXe=new RegExp("^hsl\\("+[QA,c0,c0]+"\\)$"),CXe=new RegExp("^hsla\\("+[QA,c0,c0,QA]+"\\)$"),xle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};W2(Dy,eS,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ble,formatHex:ble,formatHsl:LXe,formatRgb:_le,toString:_le});function ble(){return this.rgb().formatHex()}function LXe(){return Mle(this).formatHsl()}function _le(){return this.rgb().formatRgb()}function eS(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=TXe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?wle(t):r===3?new Qu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?EL(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?EL(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AXe.exec(e))?new Qu(t[1],t[2],t[3],1):(t=SXe.exec(e))?new Qu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MXe.exec(e))?EL(t[1],t[2],t[3],t[4]):(t=kXe.exec(e))?EL(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EXe.exec(e))?Sle(t[1],t[2]/100,t[3]/100,1):(t=CXe.exec(e))?Sle(t[1],t[2]/100,t[3]/100,t[4]):xle.hasOwnProperty(e)?wle(xle[e]):e==="transparent"?new Qu(NaN,NaN,NaN,0):null}function wle(e){return new Qu(e>>16&255,e>>8&255,e&255,1)}function EL(e,t,r,a){return a<=0&&(e=t=r=NaN),new Qu(e,t,r,a)}function i9(e){return e instanceof Dy||(e=eS(e)),e?(e=e.rgb(),new Qu(e.r,e.g,e.b,e.opacity)):new Qu}function CL(e,t,r,a){return arguments.length===1?i9(e):new Qu(e,t,r,a==null?1:a)}function Qu(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}W2(Qu,CL,JA(Dy,{brighter:function(e){return e=e==null?X2:Math.pow(X2,e),new Qu(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Nx:Math.pow(Nx,e),new Qu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tle,formatHex:Tle,formatRgb:Ale,toString:Ale}));function Tle(){return"#"+o9(this.r)+o9(this.g)+o9(this.b)}function Ale(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function o9(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Sle(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new h0(e,t,r,a)}function Mle(e){if(e instanceof h0)return new h0(e.h,e.s,e.l,e.opacity);if(e instanceof Dy||(e=eS(e)),!e)return new h0;if(e instanceof h0)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),o=Math.max(t,r,a),i=NaN,s=o-n,l=(o+n)/2;return s?(t===o?i=(r-a)/s+(r<a)*6:r===o?i=(a-t)/s+2:i=(t-r)/s+4,s/=l<.5?o+n:2-o-n,i*=60):s=l>0&&l<1?0:i,new h0(i,s,l,e.opacity)}function s9(e,t,r,a){return arguments.length===1?Mle(e):new h0(e,t,r,a==null?1:a)}function h0(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}W2(h0,s9,JA(Dy,{brighter:function(e){return e=e==null?X2:Math.pow(X2,e),new h0(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Nx:Math.pow(Nx,e),new h0(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new Qu(l9(e>=240?e-240:e+120,n,a),l9(e,n,a),l9(e<120?e+240:e-120,n,a),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function l9(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var kle=Math.PI/180,Ele=180/Math.PI,LL=18,Cle=.96422,Lle=1,Ple=.82521,Ile=4/29,K2=6/29,Dle=3*K2*K2,PXe=K2*K2*K2;function Rle(e){if(e instanceof v0)return new v0(e.l,e.a,e.b,e.opacity);if(e instanceof om)return zle(e);e instanceof Qu||(e=i9(e));var t=v9(e.r),r=v9(e.g),a=v9(e.b),n=f9((.2225045*t+.7168786*r+.0606169*a)/Lle),o,i;return t===r&&r===a?o=i=n:(o=f9((.4360747*t+.3850649*r+.1430804*a)/Cle),i=f9((.0139322*t+.0971045*r+.7141733*a)/Ple)),new v0(116*n-16,500*(o-n),200*(n-i),e.opacity)}function u9(e,t,r,a){return arguments.length===1?Rle(e):new v0(e,t,r,a==null?1:a)}function v0(e,t,r,a){this.l=+e,this.a=+t,this.b=+r,this.opacity=+a}W2(v0,u9,JA(Dy,{brighter:function(e){return new v0(this.l+LL*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new v0(this.l-LL*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=Cle*c9(t),e=Lle*c9(e),r=Ple*c9(r),new Qu(h9(3.1338561*t-1.6168667*e-.4906146*r),h9(-.9787684*t+1.9161415*e+.033454*r),h9(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function f9(e){return e>PXe?Math.pow(e,1/3):e/Dle+Ile}function c9(e){return e>K2?e*e*e:Dle*(e-Ile)}function h9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function v9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function IXe(e){if(e instanceof om)return new om(e.h,e.c,e.l,e.opacity);if(e instanceof v0||(e=Rle(e)),e.a===0&&e.b===0)return new om(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Ele;return new om(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function d9(e,t,r,a){return arguments.length===1?IXe(e):new om(e,t,r,a==null?1:a)}function om(e,t,r,a){this.h=+e,this.c=+t,this.l=+r,this.opacity=+a}function zle(e){if(isNaN(e.h))return new v0(e.l,0,0,e.opacity);var t=e.h*kle;return new v0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}W2(om,d9,JA(Dy,{brighter:function(e){return new om(this.h,this.c,this.l+LL*(e==null?1:e),this.opacity)},darker:function(e){return new om(this.h,this.c,this.l-LL*(e==null?1:e),this.opacity)},rgb:function(){return zle(this).rgb()}}));var Fle=-.14861,p9=1.78277,g9=-.29227,PL=-.90649,tS=1.97294,Ole=tS*PL,Nle=tS*p9,Ble=p9*g9-PL*Fle;function DXe(e){if(e instanceof Bx)return new Bx(e.h,e.s,e.l,e.opacity);e instanceof Qu||(e=i9(e));var t=e.r/255,r=e.g/255,a=e.b/255,n=(Ble*a+Ole*t-Nle*r)/(Ble+Ole-Nle),o=a-n,i=(tS*(r-n)-g9*o)/PL,s=Math.sqrt(i*i+o*o)/(tS*n*(1-n)),l=s?Math.atan2(i,o)*Ele-120:NaN;return new Bx(l<0?l+360:l,s,n,e.opacity)}function m9(e,t,r,a){return arguments.length===1?DXe(e):new Bx(e,t,r,a==null?1:a)}function Bx(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}W2(Bx,m9,JA(Dy,{brighter:function(e){return e=e==null?X2:Math.pow(X2,e),new Bx(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Nx:Math.pow(Nx,e),new Bx(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*kle,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),a=Math.cos(e),n=Math.sin(e);return new Qu(255*(t+r*(Fle*a+p9*n)),255*(t+r*(g9*a+PL*n)),255*(t+r*(tS*a)),this.opacity)}}));function $le(e,t,r,a,n){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*r+(1+3*e+3*o-3*i)*a+i*n)/6}function Ule(e){var t=e.length-1;return function(r){var a=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[a],o=e[a+1],i=a>0?e[a-1]:2*n-o,s=a<t-1?e[a+2]:2*o-n;return $le((r-a/t)*t,i,n,o,s)}}function Hle(e){var t=e.length;return function(r){var a=Math.floor(((r%=1)<0?++r:r)*t),n=e[(a+t-1)%t],o=e[a%t],i=e[(a+1)%t],s=e[(a+2)%t];return $le((r-a/t)*t,n,o,i,s)}}function IL(e){return function(){return e}}function Gle(e,t){return function(r){return e+r*t}}function RXe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function DL(e,t){var r=t-e;return r?Gle(e,r>180||r<-180?r-360*Math.round(r/360):r):IL(isNaN(e)?t:e)}function zXe(e){return(e=+e)==1?zu:function(t,r){return r-t?RXe(t,r,e):IL(isNaN(t)?r:t)}}function zu(e,t){var r=t-e;return r?Gle(e,r):IL(isNaN(e)?t:e)}var y9=function e(t){var r=zXe(t);function a(n,o){var i=r((n=CL(n)).r,(o=CL(o)).r),s=r(n.g,o.g),l=r(n.b,o.b),u=zu(n.opacity,o.opacity);return function(f){return n.r=i(f),n.g=s(f),n.b=l(f),n.opacity=u(f),n+""}}return a.gamma=e,a}(1);function Vle(e){return function(t){var r=t.length,a=new Array(r),n=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=CL(t[i]),a[i]=s.r||0,n[i]=s.g||0,o[i]=s.b||0;return a=e(a),n=e(n),o=e(o),s.opacity=1,function(l){return s.r=a(l),s.g=n(l),s.b=o(l),s+""}}}var FXe=Vle(Ule),OXe=Vle(Hle);function x9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function jle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NXe(e,t){return(jle(t)?x9:qle)(e,t)}function qle(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,n=new Array(a),o=new Array(r),i;for(i=0;i<a;++i)n[i]=w9(e[i],t[i]);for(;i<r;++i)o[i]=t[i];return function(s){for(i=0;i<a;++i)o[i]=n[i](s);return o}}function Yle(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function d0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Wle(e,t){var r={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=w9(e[n],t[n]):a[n]=t[n];return function(o){for(n in r)a[n]=r[n](o);return a}}var b9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_9=new RegExp(b9.source,"g");function BXe(e){return function(){return e}}function $Xe(e){return function(t){return e(t)+""}}function Xle(e,t){var r=b9.lastIndex=_9.lastIndex=0,a,n,o,i=-1,s=[],l=[];for(e=e+"",t=t+"";(a=b9.exec(e))&&(n=_9.exec(t));)(o=n.index)>r&&(o=t.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(a=a[0])===(n=n[0])?s[i]?s[i]+=n:s[++i]=n:(s[++i]=null,l.push({i,x:d0(a,n)})),r=_9.lastIndex;return r<t.length&&(o=t.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?$Xe(l[0].x):BXe(t):(t=l.length,function(u){for(var f=0,c;f<t;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}function w9(e,t){var r=typeof t,a;return t==null||r==="boolean"?IL(t):(r==="number"?d0:r==="string"?(a=eS(t))?(t=a,y9):Xle:t instanceof eS?y9:t instanceof Date?Yle:jle(t)?x9:Array.isArray(t)?qle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wle:d0)(e,t)}function UXe(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}function HXe(e,t){var r=DL(+e,+t);return function(a){var n=r(a);return n-360*Math.floor(n/360)}}function GXe(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var Zle=180/Math.PI,T9={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kle(e,t,r,a,n,o){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*r+t*a)&&(r-=e*l,a-=t*l),(s=Math.sqrt(r*r+a*a))&&(r/=s,a/=s,l/=s),e*a<t*r&&(e=-e,t=-t,l=-l,i=-i),{translateX:n,translateY:o,rotate:Math.atan2(t,e)*Zle,skewX:Math.atan(l)*Zle,scaleX:i,scaleY:s}}var rS,A9,Jle,RL;function VXe(e){return e==="none"?T9:(rS||(rS=document.createElement("DIV"),A9=document.documentElement,Jle=document.defaultView),rS.style.transform=e,e=Jle.getComputedStyle(A9.appendChild(rS),null).getPropertyValue("transform"),A9.removeChild(rS),e=e.slice(7,-1).split(","),Kle(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function jXe(e){return e==null||(RL||(RL=document.createElementNS("http://www.w3.org/2000/svg","g")),RL.setAttribute("transform",e),!(e=RL.transform.baseVal.consolidate()))?T9:(e=e.matrix,Kle(e.a,e.b,e.c,e.d,e.e,e.f))}function Qle(e,t,r,a){function n(u){return u.length?u.pop()+" ":""}function o(u,f,c,h,v,p){if(u!==c||f!==h){var d=v.push("translate(",null,t,null,r);p.push({i:d-4,x:d0(u,c)},{i:d-2,x:d0(f,h)})}else(c||h)&&v.push("translate("+c+t+h+r)}function i(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(n(c)+"rotate(",null,a)-2,x:d0(u,f)})):f&&c.push(n(c)+"rotate("+f+a)}function s(u,f,c,h){u!==f?h.push({i:c.push(n(c)+"skewX(",null,a)-2,x:d0(u,f)}):f&&c.push(n(c)+"skewX("+f+a)}function l(u,f,c,h,v,p){if(u!==c||f!==h){var d=v.push(n(v)+"scale(",null,",",null,")");p.push({i:d-4,x:d0(u,c)},{i:d-2,x:d0(f,h)})}else(c!==1||h!==1)&&v.push(n(v)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,h),i(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(v){for(var p=-1,d=h.length,g;++p<d;)c[(g=h[p]).i]=g.x(v);return c.join("")}}}var qXe=Qle(VXe,"px, ","px)","deg)"),YXe=Qle(jXe,", ",")",")"),aS=Math.SQRT2,S9=2,eue=4,WXe=1e-12;function tue(e){return((e=Math.exp(e))+1/e)/2}function XXe(e){return((e=Math.exp(e))-1/e)/2}function ZXe(e){return((e=Math.exp(2*e))-1)/(e+1)}function KXe(e,t){var r=e[0],a=e[1],n=e[2],o=t[0],i=t[1],s=t[2],l=o-r,u=i-a,f=l*l+u*u,c,h;if(f<WXe)h=Math.log(s/n)/aS,c=function(y){return[r+y*l,a+y*u,n*Math.exp(aS*y*h)]};else{var v=Math.sqrt(f),p=(s*s-n*n+eue*f)/(2*n*S9*v),d=(s*s-n*n-eue*f)/(2*s*S9*v),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d);h=(m-g)/aS,c=function(y){var _=y*h,S=tue(g),M=n/(S9*v)*(S*ZXe(aS*_+g)-XXe(g));return[r+M*l,a+M*u,n*S/tue(aS*_+g)]}}return c.duration=h*1e3,c}function rue(e){return function(t,r){var a=e((t=s9(t)).h,(r=s9(r)).h),n=zu(t.s,r.s),o=zu(t.l,r.l),i=zu(t.opacity,r.opacity);return function(s){return t.h=a(s),t.s=n(s),t.l=o(s),t.opacity=i(s),t+""}}}var JXe=rue(DL),QXe=rue(zu);function eZe(e,t){var r=zu((e=u9(e)).l,(t=u9(t)).l),a=zu(e.a,t.a),n=zu(e.b,t.b),o=zu(e.opacity,t.opacity);return function(i){return e.l=r(i),e.a=a(i),e.b=n(i),e.opacity=o(i),e+""}}function aue(e){return function(t,r){var a=e((t=d9(t)).h,(r=d9(r)).h),n=zu(t.c,r.c),o=zu(t.l,r.l),i=zu(t.opacity,r.opacity);return function(s){return t.h=a(s),t.c=n(s),t.l=o(s),t.opacity=i(s),t+""}}}var tZe=aue(DL),rZe=aue(zu);function nue(e){return function t(r){r=+r;function a(n,o){var i=e((n=m9(n)).h,(o=m9(o)).h),s=zu(n.s,o.s),l=zu(n.l,o.l),u=zu(n.opacity,o.opacity);return function(f){return n.h=i(f),n.s=s(f),n.l=l(Math.pow(f,r)),n.opacity=u(f),n+""}}return a.gamma=t,a}(1)}var aZe=nue(DL),nZe=nue(zu);function iZe(e,t){for(var r=0,a=t.length-1,n=t[0],o=new Array(a<0?0:a);r<a;)o[r]=e(n,n=t[++r]);return function(i){var s=Math.max(0,Math.min(a-1,Math.floor(i*=a)));return o[s](i-s)}}function oZe(e,t){for(var r=new Array(t),a=0;a<t;++a)r[a]=e(a/(t-1));return r}var sZe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",interpolate:w9,interpolateArray:NXe,interpolateBasis:Ule,interpolateBasisClosed:Hle,interpolateDate:Yle,interpolateDiscrete:UXe,interpolateHue:HXe,interpolateNumber:d0,interpolateNumberArray:x9,interpolateObject:Wle,interpolateRound:GXe,interpolateString:Xle,interpolateTransformCss:qXe,interpolateTransformSvg:YXe,interpolateZoom:KXe,interpolateRgb:y9,interpolateRgbBasis:FXe,interpolateRgbBasisClosed:OXe,interpolateHsl:JXe,interpolateHslLong:QXe,interpolateLab:eZe,interpolateHcl:tZe,interpolateHclLong:rZe,interpolateCubehelix:aZe,interpolateCubehelixLong:nZe,piecewise:iZe,quantize:oZe}),J2=qh(sZe),iue=Ra.exports,M9=Oa.exports,oue=bt.exports,lZe=If.resizeText;function uZe(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");lZe(e,t,"sunburst"),t.each(function(r){var a=iue.select(this),n=r[0],o=n.trace;a.style("opacity",o.opacity),a.selectAll("path.surface").each(function(i){iue.select(this).call(sue,i,o)})})}function sue(e,t,r){var a=t.data.data,n=!t.children,o=a.i,i=oue.castOption(r,o,"marker.line.color")||M9.defaultLine,s=oue.castOption(r,o,"marker.line.width")||0;e.style("stroke-width",s).call(M9.fill,a.color).call(M9.stroke,i).style("opacity",n?r.leaf.opacity:null)}var lue={style:uZe,styleOne:sue},sm={};(function(e){var t=bt.exports,r=Oa.exports,a=Zp,n=hy;e.findEntryWithLevel=function(l,u){var f;return u&&l.eachAfter(function(c){if(e.getPtId(c)===u)return f=c.copy()}),f||l},e.findEntryWithChild=function(l,u){var f;return l.eachAfter(function(c){for(var h=c.children||[],v=0;v<h.length;v++){var p=h[v];if(e.getPtId(p)===u)return f=c.copy()}}),f||l},e.isEntry=function(l){return!l.parent},e.isLeaf=function(l){return!l.children},e.getPtId=function(l){return l.data.data.id},e.getPtLabel=function(l){return l.data.data.label},e.getValue=function(l){return l.value},e.isHierarchyRoot=function(l){return s(l)===""},e.setSliceCursor=function(l,u,f){var c=f.isTransitioning;if(!c){var h=l.datum();c=f.hideOnRoot&&e.isHierarchyRoot(h)||f.hideOnLeaves&&e.isLeaf(h)}a(l,c?null:"pointer")};function o(l,u,f){return{color:e.getOutsideTextFontKey("color",l,u,f),family:e.getOutsideTextFontKey("family",l,u,f),size:e.getOutsideTextFontKey("size",l,u,f)}}function i(l,u,f,c){var h=(c||{}).onPathbar,v=u.data.data,p=v.i,d=t.castOption(l,p,(h?"pathbar.textfont":"insidetextfont")+".color");return!d&&l._input.textfont&&(d=t.castOption(l._input,p,"textfont.color")),{color:d||r.contrast(v.color),family:e.getInsideTextFontKey("family",l,u,f,c),size:e.getInsideTextFontKey("size",l,u,f,c)}}e.getInsideTextFontKey=function(l,u,f,c,h){var v=(h||{}).onPathbar,p=v?"pathbar.textfont":"insidetextfont",d=f.data.data.i;return t.castOption(u,d,p+"."+l)||t.castOption(u,d,"textfont."+l)||c.size},e.getOutsideTextFontKey=function(l,u,f,c){var h=f.data.data.i;return t.castOption(u,h,"outsidetextfont."+l)||t.castOption(u,h,"textfont."+l)||c.size},e.isOutsideText=function(l,u){return!l._hasColorscale&&e.isHierarchyRoot(u)},e.determineTextFont=function(l,u,f,c){return e.isOutsideText(l,u)?o(l,u,f):i(l,u,f,c)},e.hasTransition=function(l){return!!(l&&l.duration>0)},e.getMaxDepth=function(l){return l.maxdepth>=0?l.maxdepth:1/0},e.isHeader=function(l,u){return!(e.isLeaf(l)||l.depth===u._maxDepth-1)};function s(l){return l.data.data.pid}e.getParent=function(l,u){return e.findEntryWithLevel(l,s(u))},e.listPath=function(l,u){var f=l.parent;if(!f)return[];var c=u?[f.data[u]]:[f];return e.listPath(f,u).concat(c)},e.getPath=function(l){return e.listPath(l,"label").join("/")+"/"},e.formatValue=n.formatPieValue,e.formatPercent=function(l,u){var f=t.formatPercent(l,0);return f==="0%"&&(f=n.formatPiePercent(l,u)),f}})(sm);var Q2=Ra.exports,uue=Pa,fZe=oh.appendArrayPointValue,nS=Rs,fue=bt.exports,cZe=sT,Ll=sm,hZe=hy,vZe=hZe.formatPieValue,zL=function(t,r,a,n,o){var i=n[0],s=i.trace,l=i.hierarchy,u=s.type==="sunburst",f=s.type==="treemap"||s.type==="icicle";"_hasHoverLabel"in s||(s._hasHoverLabel=!1),"_hasHoverEvent"in s||(s._hasHoverEvent=!1);var c=function(p){var d=a._fullLayout;if(!(a._dragging||d.hovermode===!1)){var g=a._fullData[s.index],m=p.data.data,y=m.i,_=Ll.isHierarchyRoot(p),S=Ll.getParent(l,p),M=Ll.getValue(p),w=function(Z){return fue.castOption(g,y,Z)},A=w("hovertemplate"),k=nS.castHoverinfo(g,d,y),T=d.separators,L;if(A||k&&k!=="none"&&k!=="skip"){var C,I;u&&(C=i.cx+p.pxmid[0]*(1-p.rInscribed),I=i.cy+p.pxmid[1]*(1-p.rInscribed)),f&&(C=p._hoverX,I=p._hoverY);var R={},B=[],N=[],D=function(Z){return B.indexOf(Z)!==-1};k&&(B=k==="all"?g._module.attributes.hoverinfo.flags:k.split("+")),R.label=m.label,D("label")&&R.label&&N.push(R.label),m.hasOwnProperty("v")&&(R.value=m.v,R.valueLabel=vZe(R.value,T),D("value")&&N.push(R.valueLabel)),R.currentPath=p.currentPath=Ll.getPath(p.data),D("current path")&&!_&&N.push(R.currentPath);var O,$=[],Y=function(){$.indexOf(O)===-1&&(N.push(O),$.push(O))};R.percentParent=p.percentParent=M/Ll.getValue(S),R.parent=p.parentString=Ll.getPtLabel(S),D("percent parent")&&(O=Ll.formatPercent(R.percentParent,T)+" of "+R.parent,Y()),R.percentEntry=p.percentEntry=M/Ll.getValue(r),R.entry=p.entry=Ll.getPtLabel(r),D("percent entry")&&!_&&!p.onPathbar&&(O=Ll.formatPercent(R.percentEntry,T)+" of "+R.entry,Y()),R.percentRoot=p.percentRoot=M/Ll.getValue(l),R.root=p.root=Ll.getPtLabel(l),D("percent root")&&!_&&(O=Ll.formatPercent(R.percentRoot,T)+" of "+R.root,Y()),R.text=w("hovertext")||w("text"),D("text")&&(O=R.text,fue.isValidTextValue(O)&&N.push(O)),L=[iS(p,g,o.eventDataKeys)];var X={trace:g,y:I,_x0:p._x0,_x1:p._x1,_y0:p._y0,_y1:p._y1,text:N.join("<br>"),name:A||D("name")?g.name:void 0,color:w("hoverlabel.bgcolor")||m.color,borderColor:w("hoverlabel.bordercolor"),fontFamily:w("hoverlabel.font.family"),fontSize:w("hoverlabel.font.size"),fontColor:w("hoverlabel.font.color"),nameLength:w("hoverlabel.namelength"),textAlign:w("hoverlabel.align"),hovertemplate:A,hovertemplateLabels:R,eventData:L};u&&(X.x0=C-p.rInscribed*p.rpx1,X.x1=C+p.rInscribed*p.rpx1,X.idealAlign=p.pxmid[0]<0?"left":"right"),f&&(X.x=C,X.idealAlign=C<0?"left":"right");var ee=[];nS.loneHover(X,{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:a,inOut_bbox:ee}),L[0].bbox=ee[0],s._hasHoverLabel=!0}if(f){var Q=t.select("path.surface");o.styleOne(Q,p,g,{hovered:!0})}s._hasHoverEvent=!0,a.emit("plotly_hover",{points:L||[iS(p,g,o.eventDataKeys)],event:Q2.event})}},h=function(p){var d=a._fullLayout,g=a._fullData[s.index],m=Q2.select(this).datum();if(s._hasHoverEvent&&(p.originalEvent=Q2.event,a.emit("plotly_unhover",{points:[iS(m,g,o.eventDataKeys)],event:Q2.event}),s._hasHoverEvent=!1),s._hasHoverLabel&&(nS.loneUnhover(d._hoverlayer.node()),s._hasHoverLabel=!1),f){var y=t.select("path.surface");o.styleOne(y,m,g,{hovered:!1})}},v=function(p){var d=a._fullLayout,g=a._fullData[s.index],m=u&&(Ll.isHierarchyRoot(p)||Ll.isLeaf(p)),y=Ll.getPtId(p),_=Ll.isEntry(p)?Ll.findEntryWithChild(l,y):Ll.findEntryWithLevel(l,y),S=Ll.getPtId(_),M={points:[iS(p,g,o.eventDataKeys)],event:Q2.event};m||(M.nextLevel=S);var w=cZe.triggerHandler(a,"plotly_"+s.type+"click",M);if(w!==!1&&d.hovermode&&(a._hoverdata=[iS(p,g,o.eventDataKeys)],nS.click(a,Q2.event)),!m&&w!==!1&&!a._dragging&&!a._transitioning){uue.call("_storeDirectGUIEdit",g,d._tracePreGUI[g.uid],{level:g.level});var A={data:[{level:S}],traces:[s.index]},k={frame:{redraw:!1,duration:o.transitionTime},transition:{duration:o.transitionTime,easing:o.transitionEasing},mode:"immediate",fromcurrent:!0};nS.loneUnhover(d._hoverlayer.node()),uue.call("animate",a,A,k)}};t.on("mouseover",c),t.on("mouseout",h),t.on("click",v)};function iS(e,t,r){for(var a=e.data.data,n={curveNumber:t.index,pointNumber:a.i,data:t._input,fullData:t},o=0;o<r.length;o++){var i=r[o];i in e&&(n[i]=e[i])}return"parentString"in e&&!Ll.isHierarchyRoot(e)&&(n.parent=e.parentString),fZe(n,t,a.i),n}(function(e){var t=Ra.exports,r=ML,a=J2.interpolate,n=xn.exports,o=bt.exports,i=xo,s=If,l=s.recordMinTextSize,u=s.clearMinTextSize,f=QO,c=hy.getRotationAngle,h=f.computeTransform,v=f.transformInsideText,p=lue.styleOne,d=np.resizeText,g=zL,m=Qse,y=sm;e.plot=function(k,T,L,C){var I=k._fullLayout,R=I._sunburstlayer,B,N,D=!L,O=!I.uniformtext.mode&&y.hasTransition(L);if(u("sunburst",I),B=R.selectAll("g.trace.sunburst").data(T,function(Y){return Y[0].trace.uid}),B.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),B.order(),O){C&&(N=C());var $=t.transition().duration(L.duration).ease(L.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()});$.each(function(){R.selectAll("g.trace").each(function(Y){_(k,Y,this,L)})})}else B.each(function(Y){_(k,Y,this,L)}),I.uniformtext.mode&&d(k,I._sunburstlayer.selectAll(".trace"),"sunburst");D&&B.exit().remove()};function _(k,T,L,C){var I=k._fullLayout,R=!I.uniformtext.mode&&y.hasTransition(C),B=t.select(L),N=B.selectAll("g.slice"),D=T[0],O=D.trace,$=D.hierarchy,Y=y.findEntryWithLevel($,O.level),X=y.getMaxDepth(O),ee=I._size,Q=O.domain,Z=ee.w*(Q.x[1]-Q.x[0]),q=ee.h*(Q.y[1]-Q.y[0]),ae=.5*Math.min(Z,q),ie=D.cx=ee.l+ee.w*(Q.x[1]+Q.x[0])/2,we=D.cy=ee.t+ee.h*(1-Q.y[0])-q/2;if(!Y)return N.remove();var Te=null,he={};R&&N.each(function(Ze){he[y.getPtId(Ze)]={rpx0:Ze.rpx0,rpx1:Ze.rpx1,x0:Ze.x0,x1:Ze.x1,transform:Ze.transform},!Te&&y.isEntry(Ze)&&(Te=Ze)});var xe=S(Y).descendants(),Se=Y.height+1,ye=0,re=X;D.hasMultipleRoots&&y.isHierarchyRoot(Y)&&(xe=xe.slice(1),Se-=1,ye=1,re+=1),xe=xe.filter(function(Ze){return Ze.y1<=re});var se=c(O.rotation);se&&xe.forEach(function(Ze){Ze.x0+=se,Ze.x1+=se});var de=Math.min(Se,X),Me=function(Ze){return(Ze-ye)/de*ae},Ie=function(Ze,Qe){return[Ze*Math.cos(Qe),-Ze*Math.sin(Qe)]},Ee=function(Ze){return o.pathAnnulus(Ze.rpx0,Ze.rpx1,Ze.x0,Ze.x1,ie,we)},qe=function(Ze){return ie+w(Ze)[0]*(Ze.transform.rCenter||0)+(Ze.transform.x||0)},be=function(Ze){return we+w(Ze)[1]*(Ze.transform.rCenter||0)+(Ze.transform.y||0)};N=N.data(xe,y.getPtId),N.enter().append("g").classed("slice",!0),R?N.exit().transition().each(function(){var Ze=t.select(this),Qe=Ze.select("path.surface");Qe.transition().attrTween("d",function(je){var $e=Re(je);return function(Ye){return Ee($e(Ye))}});var Je=Ze.select("g.slicetext");Je.attr("opacity",0)}).remove():N.exit().remove(),N.order();var oe=null;if(R&&Te){var ce=y.getPtId(Te);N.each(function(Ze){oe===null&&y.getPtId(Ze)===ce&&(oe=Ze.x1)})}var ue=N;R&&(ue=ue.transition().each("end",function(){var Ze=t.select(this);y.setSliceCursor(Ze,k,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ue.each(function(Ze){var Qe=t.select(this),Je=o.ensureSingle(Qe,"path","surface",function(Pt){Pt.style("pointer-events","all")});Ze.rpx0=Me(Ze.y0),Ze.rpx1=Me(Ze.y1),Ze.xmid=(Ze.x0+Ze.x1)/2,Ze.pxmid=Ie(Ze.rpx1,Ze.xmid),Ze.midangle=-(Ze.xmid-Math.PI/2),Ze.startangle=-(Ze.x0-Math.PI/2),Ze.stopangle=-(Ze.x1-Math.PI/2),Ze.halfangle=.5*Math.min(o.angleDelta(Ze.x0,Ze.x1)||Math.PI,Math.PI),Ze.ring=1-Ze.rpx0/Ze.rpx1,Ze.rInscribed=M(Ze),R?Je.transition().attrTween("d",function(Pt){var Tt=Xe(Pt);return function(Ot){return Ee(Tt(Ot))}}):Je.attr("d",Ee),Qe.call(g,Y,k,T,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(y.setSliceCursor,k,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:k._transitioning}),Je.call(p,Ze,O);var je=o.ensureSingle(Qe,"g","slicetext"),$e=o.ensureSingle(je,"text","",function(Pt){Pt.attr("data-notex",1)}),Ye=o.ensureUniformFontSize(k,y.determineTextFont(O,Ze,I.font));$e.text(e.formatSliceLabel(Ze,Y,O,T,I)).classed("slicetext",!0).attr("text-anchor","middle").call(n.font,Ye).call(i.convertToTspans,k);var yt=n.bBox($e.node());Ze.transform=v(yt,Ze,D),Ze.transform.targetX=qe(Ze),Ze.transform.targetY=be(Ze);var _t=function(Pt,Tt){var Ot=Pt.transform;return h(Ot,Tt),Ot.fontSize=Ye.size,l(O.type,Ot,I),o.getTextTransform(Ot)};R?$e.transition().attrTween("transform",function(Pt){var Tt=Ke(Pt);return function(Ot){return _t(Tt(Ot),yt)}}):$e.attr("transform",_t(Ze,yt))});function Re(Ze){var Qe=y.getPtId(Ze),Je=he[Qe],je=he[y.getPtId(Y)],$e;if(je){var Ye=(Ze.x1>je.x1?2*Math.PI:0)+se;$e=Ze.rpx1<je.rpx1?{x0:Ze.x0,x1:Ze.x1,rpx0:0,rpx1:0}:{x0:Ye,x1:Ye,rpx0:Ze.rpx0,rpx1:Ze.rpx1}}else{var yt,_t=y.getPtId(Ze.parent);N.each(function(Xt){if(y.getPtId(Xt)===_t)return yt=Xt});var Pt=yt.children,Tt;Pt.forEach(function(Xt,Or){if(y.getPtId(Xt)===Qe)return Tt=Or});var Ot=Pt.length,qt=a(yt.x0,yt.x1);$e={rpx0:ae,rpx1:ae,x0:qt(Tt/Ot),x1:qt((Tt+1)/Ot)}}return a(Je,$e)}function Xe(Ze){var Qe=he[y.getPtId(Ze)],Je,je={x0:Ze.x0,x1:Ze.x1,rpx0:Ze.rpx0,rpx1:Ze.rpx1};if(Qe)Je=Qe;else if(Te)if(Ze.parent)if(oe){var $e=(Ze.x1>oe?2*Math.PI:0)+se;Je={x0:$e,x1:$e}}else Je={rpx0:ae,rpx1:ae},o.extendFlat(Je,vt(Ze));else Je={rpx0:0,rpx1:0};else Je={x0:se,x1:se};return a(Je,je)}function Ke(Ze){var Qe=he[y.getPtId(Ze)],Je,je=Ze.transform;if(Qe)Je=Qe;else if(Je={rpx1:Ze.rpx1,transform:{textPosAngle:je.textPosAngle,scale:0,rotate:je.rotate,rCenter:je.rCenter,x:je.x,y:je.y}},Te)if(Ze.parent)if(oe){var $e=Ze.x1>oe?2*Math.PI:0;Je.x0=Je.x1=$e}else o.extendFlat(Je,vt(Ze));else Je.x0=Je.x1=se;else Je.x0=Je.x1=se;var Ye=a(Je.transform.textPosAngle,Ze.transform.textPosAngle),yt=a(Je.rpx1,Ze.rpx1),_t=a(Je.x0,Ze.x0),Pt=a(Je.x1,Ze.x1),Tt=a(Je.transform.scale,je.scale),Ot=a(Je.transform.rotate,je.rotate),qt=je.rCenter===0?3:Je.transform.rCenter===0?1/3:1,Xt=a(Je.transform.rCenter,je.rCenter),Or=function(Br){return Xt(Math.pow(Br,qt))};return function(Br){var Qr=yt(Br),Sr=_t(Br),Zr=Pt(Br),Oe=Or(Br),it=Ie(Qr,(Sr+Zr)/2),ft=Ye(Br),pt={pxmid:it,rpx1:Qr,transform:{textPosAngle:ft,rCenter:Oe,x:je.x,y:je.y}};return l(O.type,je,I),{transform:{targetX:qe(pt),targetY:be(pt),scale:Tt(Br),rotate:Ot(Br),rCenter:Oe}}}}function vt(Ze){var Qe=Ze.parent,Je=he[y.getPtId(Qe)],je={};if(Je){var $e=Qe.children,Ye=$e.indexOf(Ze),yt=$e.length,_t=a(Je.x0,Je.x1);je.x0=_t(Ye/yt),je.x1=_t(Ye/yt)}else je.x0=je.x1=0;return je}}function S(k){return r.partition().size([2*Math.PI,k.height+1])(k)}e.formatSliceLabel=function(k,T,L,C,I){var R=L.texttemplate,B=L.textinfo;if(!R&&(!B||B==="none"))return"";var N=I.separators,D=C[0],O=k.data.data,$=D.hierarchy,Y=y.isHierarchyRoot(k),X=y.getParent($,k),ee=y.getValue(k);if(!R){var Q=B.split("+"),Z=function(re){return Q.indexOf(re)!==-1},q=[],ae;if(Z("label")&&O.label&&q.push(O.label),O.hasOwnProperty("v")&&Z("value")&&q.push(y.formatValue(O.v,N)),!Y){Z("current path")&&q.push(y.getPath(k.data));var ie=0;Z("percent parent")&&ie++,Z("percent entry")&&ie++,Z("percent root")&&ie++;var we=ie>1;if(ie){var Te,he=function(re){ae=y.formatPercent(Te,N),we&&(ae+=" of "+re),q.push(ae)};Z("percent parent")&&!Y&&(Te=ee/y.getValue(X),he("parent")),Z("percent entry")&&(Te=ee/y.getValue(T),he("entry")),Z("percent root")&&(Te=ee/y.getValue($),he("root"))}}return Z("text")&&(ae=o.castOption(L,O.i,"text"),o.isValidTextValue(ae)&&q.push(ae)),q.join("<br>")}var xe=o.castOption(L,O.i,"texttemplate");if(!xe)return"";var Se={};O.label&&(Se.label=O.label),O.hasOwnProperty("v")&&(Se.value=O.v,Se.valueLabel=y.formatValue(O.v,N)),Se.currentPath=y.getPath(k.data),Y||(Se.percentParent=ee/y.getValue(X),Se.percentParentLabel=y.formatPercent(Se.percentParent,N),Se.parent=y.getPtLabel(X)),Se.percentEntry=ee/y.getValue(T),Se.percentEntryLabel=y.formatPercent(Se.percentEntry,N),Se.entry=y.getPtLabel(T),Se.percentRoot=ee/y.getValue($),Se.percentRootLabel=y.formatPercent(Se.percentRoot,N),Se.root=y.getPtLabel($),O.hasOwnProperty("color")&&(Se.color=O.color);var ye=o.castOption(L,O.i,"text");return(o.isValidTextValue(ye)||ye==="")&&(Se.text=ye),Se.customdata=o.castOption(L,O.i,"customdata"),o.texttemplateString(xe,Se,I._d3locale,Se,L._meta||{})};function M(k){return k.rpx0===0&&o.isFullCircle([k.x0,k.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(k.halfangle)),k.ring/2))}function w(k){return A(k.rpx1,k.transform.textPosAngle)}function A(k,T){return[k*Math.sin(T),-k*Math.cos(T)]}})(kL);var dZe={moduleType:"trace",name:"sunburst",basePlotModule:Jse,categories:[],animatable:!0,attributes:bL,layoutAttributes:tle,supplyDefaults:AWe,supplyLayoutDefaults:kWe,calc:XA.calc,crossTraceCalc:XA.crossTraceCalc,plot:kL.plot,style:lue.style,colorbar:Pf,meta:{description:["Visualize hierarchal data spanning outward radially from root to leaves.","The sunburst sectors are determined by the entries in *labels* or *ids*","and in *parents*."].join(" ")}},pZe=dZe,cue={};(function(e){var t=Eo.exports;e.name="treemap",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(cue);var ew={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1},gZe=zn.hovertemplateAttrs,mZe=zn.texttemplateAttrs,yZe=bo,xZe=Fo.attributes,$x=j2,jv=bL,hue=ew,k9=cn.extendFlat,E9={labels:jv.labels,parents:jv.parents,values:jv.values,branchvalues:jv.branchvalues,count:jv.count,level:jv.level,maxdepth:jv.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/master/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:k9({pad:{t:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:jv.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:jv.marker.line,editType:"calc"},yZe("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:k9({},$x.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:$x.text,textinfo:jv.textinfo,texttemplate:mZe({editType:"plot"},{keys:hue.eventDataKeys.concat(["label","value"])}),hovertext:$x.hovertext,hoverinfo:jv.hoverinfo,hovertemplate:gZe({},{keys:hue.eventDataKeys}),textfont:$x.textfont,insidetextfont:$x.insidetextfont,outsidetextfont:k9({},$x.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:$x.sort,root:jv.root,domain:xZe({name:"treemap",trace:!0,editType:"calc"})},vue={treemapcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},bZe=bt.exports,_Ze=E9,wZe=Oa.exports,TZe=Fo.defaults,AZe=ch.handleText,SZe=g2.TEXTPAD,due=Qo,MZe=due.hasColorscale,kZe=due.handleDefaults,EZe=function(t,r,a,n){function o(y,_){return bZe.coerce(t,r,_Ze,y,_)}var i=o("labels"),s=o("parents");if(!i||!i.length||!s||!s.length){r.visible=!1;return}var l=o("values");l&&l.length?o("branchvalues"):o("count"),o("level"),o("maxdepth");var u=o("tiling.packing");u==="squarify"&&o("tiling.squarifyratio"),o("tiling.flip"),o("tiling.pad");var f=o("text");o("texttemplate"),r.texttemplate||o("textinfo",Array.isArray(f)?"text+label":"label"),o("hovertext"),o("hovertemplate");var c=o("pathbar.visible"),h="auto";AZe(t,r,n,o,h,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("textposition");var v=r.textposition.indexOf("bottom")!==-1,p=o("marker.line.width");p&&o("marker.line.color",n.paper_bgcolor);var d=o("marker.colors"),g=r._hasColorscale=MZe(t,"marker","colors")||(t.marker||{}).coloraxis;g?kZe(t,r,n,o,{prefix:"marker.",cLetter:"c"}):o("marker.depthfade",!(d||[]).length);var m=r.textfont.size*2;o("marker.pad.t",v?m/4:m),o("marker.pad.l",m/4),o("marker.pad.r",m/4),o("marker.pad.b",v?m:m/4),r._hovered={marker:{line:{width:2,color:wZe.contrast(n.paper_bgcolor)}}},c&&(o("pathbar.thickness",r.pathbar.textfont.size+2*SZe),o("pathbar.side"),o("pathbar.edgeshape")),o("sort"),o("root.color"),TZe(r,n,o),r._length=null},CZe=bt.exports,LZe=vue,PZe=function(t,r){function a(n,o){return CZe.coerce(t,r,LZe,n,o)}a("treemapcolorway",r.colorway),a("extendtreemapcolors")},FL={},pue=XA;FL.calc=function(e,t){return pue.calc(e,t)};FL.crossTraceCalc=function(e){return pue._runCrossTraceCalc("treemap",e)};var gue=function e(t,r,a){var n;a.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n),a.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n),a.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var o=t.children;if(o)for(var i=0;i<o.length;i++)e(o[i],r,a)},tw=ML,IZe=gue,mue=function(t,r,a){var n=a.flipX,o=a.flipY,i=a.packing==="dice-slice",s=a.pad[o?"bottom":"top"],l=a.pad[n?"right":"left"],u=a.pad[n?"left":"right"],f=a.pad[o?"top":"bottom"],c;i&&(c=l,l=s,s=c,c=u,u=f,f=c);var h=tw.treemap().tile(DZe(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(l).paddingRight(u).paddingTop(s).paddingBottom(f).size(i?[r[1],r[0]]:r)(t);return(i||n||o)&&IZe(h,r,{swapXY:i,flipX:n,flipY:o}),h};function DZe(e,t){switch(e){case"squarify":return tw.treemapSquarify.ratio(t);case"binary":return tw.treemapBinary;case"dice":return tw.treemapDice;case"slice":return tw.treemapSlice;default:return tw.treemapSliceDice}}var yue=Ra.exports,Ux=Oa.exports,xue=bt.exports,C9=sm,RZe=If.resizeText;function zZe(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");RZe(e,t,"treemap"),t.each(function(r){var a=yue.select(this),n=r[0],o=n.trace;a.style("opacity",o.opacity),a.selectAll("path.surface").each(function(i){yue.select(this).call(bue,i,o,{hovered:!1})})})}function bue(e,t,r,a){var n=(a||{}).hovered,o=t.data.data,i=o.i,s,l,u=o.color,f=C9.isHierarchyRoot(t),c=1;if(n)s=r._hovered.marker.line.color,l=r._hovered.marker.line.width;else if(f&&u===r.root.color)c=100,s="rgba(0,0,0,0)",l=0;else if(s=xue.castOption(r,i,"marker.line.color")||Ux.defaultLine,l=xue.castOption(r,i,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var h=r.marker.depthfade;if(h){var v=Ux.combine(Ux.addOpacity(r._backgroundColor,.75),u),p;if(h===!0){var d=C9.getMaxDepth(r);isFinite(d)?C9.isLeaf(t)?p=0:p=r._maxVisibleLayers-(t.data.depth-r._entryDepth):p=t.data.height+1}else p=t.data.depth-r._entryDepth,r._atRootLevel||p++;if(p>0)for(var g=0;g<p;g++){var m=.5*g/p;u=Ux.combine(Ux.addOpacity(v,m),u)}}}e.style("stroke-width",l).call(Ux.fill,u).call(Ux.stroke,s).style("opacity",c)}var L9={style:zZe,styleOne:bue},_ue=Ra.exports,OL=bt.exports,wue=xn.exports,FZe=xo,OZe=mue,Tue=L9.styleOne,P9=ew,rw=sm,NZe=zL,I9=!0,BZe=function(t,r,a,n,o){var i=o.barDifY,s=o.width,l=o.height,u=o.viewX,f=o.viewY,c=o.pathSlice,h=o.toMoveInsideSlice,v=o.strTransform,p=o.hasTransition,d=o.handleSlicesExit,g=o.makeUpdateSliceInterpolator,m=o.makeUpdateTextInterpolator,y={},_=t._fullLayout,S=r[0],M=S.trace,w=S.hierarchy,A=s/M._entryDepth,k=rw.listPath(a.data,"id"),T=OZe(w.copy(),[s,l],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();T=T.filter(function(C){var I=k.indexOf(C.data.id);return I===-1?!1:(C.x0=A*I,C.x1=A*(I+1),C.y0=i,C.y1=i+l,C.onPathbar=!0,!0)}),T.reverse(),n=n.data(T,rw.getPtId),n.enter().append("g").classed("pathbar",!0),d(n,I9,y,[s,l],c),n.order();var L=n;p&&(L=L.transition().each("end",function(){var C=_ue.select(this);rw.setSliceCursor(C,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),L.each(function(C){C._x0=u(C.x0),C._x1=u(C.x1),C._y0=f(C.y0),C._y1=f(C.y1),C._hoverX=u(C.x1-Math.min(s,l)/2),C._hoverY=f(C.y1-l/2);var I=_ue.select(this),R=OL.ensureSingle(I,"path","surface",function(O){O.style("pointer-events","all")});p?R.transition().attrTween("d",function(O){var $=g(O,I9,y,[s,l]);return function(Y){return c($(Y))}}):R.attr("d",c),I.call(NZe,a,t,r,{styleOne:Tue,eventDataKeys:P9.eventDataKeys,transitionTime:P9.CLICK_TRANSITION_TIME,transitionEasing:P9.CLICK_TRANSITION_EASING}).call(rw.setSliceCursor,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:t._transitioning}),R.call(Tue,C,M,{hovered:!1}),C._text=(rw.getPtLabel(C)||"").split("<br>").join(" ")||"";var B=OL.ensureSingle(I,"g","slicetext"),N=OL.ensureSingle(B,"text","",function(O){O.attr("data-notex",1)}),D=OL.ensureUniformFontSize(t,rw.determineTextFont(M,C,_.font,{onPathbar:!0}));N.text(C._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(wue.font,D).call(FZe.convertToTspans,t),C.textBB=wue.bBox(N.node()),C.transform=h(C,{fontSize:D.size,onPathbar:!0}),C.transform.fontSize=D.size,p?N.transition().attrTween("transform",function(O){var $=m(O,I9,y,[s,l]);return function(Y){return v($(Y))}}):N.attr("transform",v(C))})},Aue=Ra.exports,D9=J2.interpolate,Ry=sm,oS=bt.exports,Sue=g2.TEXTPAD,$Ze=w2,UZe=$Ze.toMoveInsideBar,HZe=If,R9=HZe.recordMinTextSize,GZe=ew,VZe=BZe;function Hx(e){return Ry.isHierarchyRoot(e)?"":Ry.getPtId(e)}var jZe=function(t,r,a,n,o){var i=t._fullLayout,s=r[0],l=s.trace,u=l.type,f=u==="icicle",c=s.hierarchy,h=Ry.findEntryWithLevel(c,l.level),v=Aue.select(a),p=v.selectAll("g.pathbar"),d=v.selectAll("g.slice");if(!h){p.remove(),d.remove();return}var g=Ry.isHierarchyRoot(h),m=!i.uniformtext.mode&&Ry.hasTransition(n),y=Ry.getMaxDepth(l),_=function(oe){return oe.data.depth-h.data.depth<y},S=i._size,M=l.domain,w=S.w*(M.x[1]-M.x[0]),A=S.h*(M.y[1]-M.y[0]),k=w,T=l.pathbar.thickness,L=l.marker.line.width+GZe.gapWithPathbar,C=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?A+L:-(T+L):0,I={x0:k,x1:k,y0:C,y1:C+T},R=function(oe,ce,ue){var Re=l.tiling.pad,Xe=function(Qe){return Qe-Re<=ce.x0},Ke=function(Qe){return Qe+Re>=ce.x1},vt=function(Qe){return Qe-Re<=ce.y0},Ze=function(Qe){return Qe+Re>=ce.y1};return oe.x0===ce.x0&&oe.x1===ce.x1&&oe.y0===ce.y0&&oe.y1===ce.y1?{x0:oe.x0,x1:oe.x1,y0:oe.y0,y1:oe.y1}:{x0:Xe(oe.x0-Re)?0:Ke(oe.x0-Re)?ue[0]:oe.x0,x1:Xe(oe.x1+Re)?0:Ke(oe.x1+Re)?ue[0]:oe.x1,y0:vt(oe.y0-Re)?0:Ze(oe.y0-Re)?ue[1]:oe.y0,y1:vt(oe.y1+Re)?0:Ze(oe.y1+Re)?ue[1]:oe.y1}},B=null,N={},D={},O=null,$=function(oe,ce){return ce?N[Hx(oe)]:D[Hx(oe)]},Y=function(oe,ce,ue,Re){if(ce)return N[Hx(c)]||I;var Xe=D[l.level]||ue;return _(oe)?R(oe,Xe,Re):{}};s.hasMultipleRoots&&g&&y++,l._maxDepth=y,l._backgroundColor=i.paper_bgcolor,l._entryDepth=h.data.depth,l._atRootLevel=g;var X=-w/2+S.l+S.w*(M.x[1]+M.x[0])/2,ee=-A/2+S.t+S.h*(1-(M.y[1]+M.y[0])/2),Q=function(oe){return X+oe},Z=function(oe){return ee+oe},q=Z(0),ae=Q(0),ie=function(oe){return ae+oe},we=function(oe){return q+oe};function Te(oe,ce){return oe+","+ce}var he=ie(0),xe=function(oe){oe.x=Math.max(he,oe.x)},Se=l.pathbar.edgeshape,ye=function(oe){var ce=ie(Math.max(Math.min(oe.x0,oe.x0),0)),ue=ie(Math.min(Math.max(oe.x1,oe.x1),k)),Re=we(oe.y0),Xe=we(oe.y1),Ke=T/2,vt={},Ze={};vt.x=ce,Ze.x=ue,vt.y=Ze.y=(Re+Xe)/2;var Qe={x:ce,y:Re},Je={x:ue,y:Re},je={x:ue,y:Xe},$e={x:ce,y:Xe};return Se===">"?(Qe.x-=Ke,Je.x-=Ke,je.x-=Ke,$e.x-=Ke):Se==="/"?(je.x-=Ke,$e.x-=Ke,vt.x-=Ke/2,Ze.x-=Ke/2):Se==="\\"?(Qe.x-=Ke,Je.x-=Ke,vt.x-=Ke/2,Ze.x-=Ke/2):Se==="<"&&(vt.x-=Ke,Ze.x-=Ke),xe(Qe),xe($e),xe(vt),xe(Je),xe(je),xe(Ze),"M"+Te(Qe.x,Qe.y)+"L"+Te(Je.x,Je.y)+"L"+Te(Ze.x,Ze.y)+"L"+Te(je.x,je.y)+"L"+Te($e.x,$e.y)+"L"+Te(vt.x,vt.y)+"Z"},re=function(oe){var ce=Q(oe.x0),ue=Q(oe.x1),Re=Z(oe.y0),Xe=Z(oe.y1),Ke=ue-ce,vt=Xe-Re;if(!Ke||!vt)return"";var Ze=0,Qe=Ke>2*Ze&&vt>2*Ze?Ze:0,Je=function(je,$e){return Qe?"a"+Te(Qe,Qe)+" 0 0 1 "+Te(je,$e):""};return"M"+Te(ce,Re+Qe)+Je(Qe,-Qe)+"L"+Te(ue-Qe,Re)+Je(Qe,Qe)+"L"+Te(ue,Xe-Qe)+Je(-Qe,Qe)+"L"+Te(ce+Qe,Xe)+Je(-Qe,-Qe)+"Z"},se=function(oe,ce){var ue=oe.x0,Re=oe.x1,Xe=oe.y0,Ke=oe.y1,vt=oe.textBB,Ze=function(qt){return l.textposition.indexOf(qt)!==-1},Qe=Ze("bottom"),Je=Ze("top")||ce.isHeader&&!Qe,je=Je?"start":Qe?"end":"middle",$e=Ze("right"),Ye=Ze("left")||ce.onPathbar,yt=Ye?-1:$e?1:0,_t=l[f?"tiling":"marker"].pad;if(ce.isHeader){if(ue+=(f?_t:_t.l)-Sue,Re-=(f?_t:_t.r)-Sue,ue>=Re){var Pt=(ue+Re)/2;ue=Pt,Re=Pt}var Tt;Qe?(Tt=Ke-(f?_t:_t.b),Xe<Tt&&Tt<Ke&&(Xe=Tt)):(Tt=Xe+(f?_t:_t.t),Xe<Tt&&Tt<Ke&&(Ke=Tt))}var Ot=UZe(ue,Re,Xe,Ke,vt,{isHorizontal:!1,constrained:!0,angle:0,anchor:je,leftToRight:yt});return Ot.fontSize=ce.fontSize,Ot.targetX=Q(Ot.targetX),Ot.targetY=Z(Ot.targetY),isNaN(Ot.targetX)||isNaN(Ot.targetY)?{}:(ue!==Re&&Xe!==Ke&&R9(l.type,Ot,i),{scale:Ot.scale,rotate:Ot.rotate,textX:Ot.textX,textY:Ot.textY,anchorX:Ot.anchorX,anchorY:Ot.anchorY,targetX:Ot.targetX,targetY:Ot.targetY})},de=function(oe,ce){for(var ue,Re=0,Xe=oe;!ue&&Re<y;)Re++,Xe=Xe.parent,Xe?ue=$(Xe,ce):Re=y;return ue||{}},Me=function(oe,ce,ue,Re){var Xe=$(oe,ce),Ke;if(ce)Ke=I;else{var vt=$(h,ce);vt?Ke=R(oe,vt,Re):Ke={}}return D9(Xe,Ke)},Ie=function(oe,ce,ue,Re,Xe){var Ke=$(oe,ce),vt;if(Ke)vt=Ke;else if(ce)vt=I;else if(B)if(oe.parent){var Ze=O||ue;Ze&&!ce?vt=R(oe,Ze,Re):(vt={},oS.extendFlat(vt,de(oe,ce)))}else vt=oS.extendFlat({},oe),f&&(Xe.orientation==="h"?Xe.flipX?vt.x0=oe.x1:vt.x1=0:Xe.flipY?vt.y0=oe.y1:vt.y1=0);else vt={};return D9(vt,{x0:oe.x0,x1:oe.x1,y0:oe.y0,y1:oe.y1})},Ee=function(oe,ce,ue,Re){var Xe=$(oe,ce),Ke={},vt=Y(oe,ce,ue,Re);oS.extendFlat(Ke,{transform:se({x0:vt.x0,x1:vt.x1,y0:vt.y0,y1:vt.y1,textBB:oe.textBB,_text:oe._text},{isHeader:Ry.isHeader(oe,l)})}),Xe?Ke=Xe:oe.parent&&oS.extendFlat(Ke,de(oe,ce));var Ze=oe.transform;return oe.x0!==oe.x1&&oe.y0!==oe.y1&&R9(l.type,Ze,i),D9(Ke,{transform:{scale:Ze.scale,rotate:Ze.rotate,textX:Ze.textX,textY:Ze.textY,anchorX:Ze.anchorX,anchorY:Ze.anchorY,targetX:Ze.targetX,targetY:Ze.targetY}})},qe=function(oe,ce,ue,Re,Xe){var Ke=Re[0],vt=Re[1];m?oe.exit().transition().each(function(){var Ze=Aue.select(this),Qe=Ze.select("path.surface");Qe.transition().attrTween("d",function(je){var $e=Me(je,ce,ue,[Ke,vt]);return function(Ye){return Xe($e(Ye))}});var Je=Ze.select("g.slicetext");Je.attr("opacity",0)}).remove():oe.exit().remove()},be=function(oe){var ce=oe.transform;return oe.x0!==oe.x1&&oe.y0!==oe.y1&&R9(l.type,ce,i),oS.getTextTransform({textX:ce.textX,textY:ce.textY,anchorX:ce.anchorX,anchorY:ce.anchorY,targetX:ce.targetX,targetY:ce.targetY,scale:ce.scale,rotate:ce.rotate})};m&&(p.each(function(oe){N[Hx(oe)]={x0:oe.x0,x1:oe.x1,y0:oe.y0,y1:oe.y1},oe.transform&&(N[Hx(oe)].transform={textX:oe.transform.textX,textY:oe.transform.textY,anchorX:oe.transform.anchorX,anchorY:oe.transform.anchorY,targetX:oe.transform.targetX,targetY:oe.transform.targetY,scale:oe.transform.scale,rotate:oe.transform.rotate})}),d.each(function(oe){D[Hx(oe)]={x0:oe.x0,x1:oe.x1,y0:oe.y0,y1:oe.y1},oe.transform&&(D[Hx(oe)].transform={textX:oe.transform.textX,textY:oe.transform.textY,anchorX:oe.transform.anchorX,anchorY:oe.transform.anchorY,targetX:oe.transform.targetX,targetY:oe.transform.targetY,scale:oe.transform.scale,rotate:oe.transform.rotate}),!B&&Ry.isEntry(oe)&&(B=oe)})),O=o(t,r,h,d,{width:w,height:A,viewX:Q,viewY:Z,pathSlice:re,toMoveInsideSlice:se,prevEntry:B,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Ee,handleSlicesExit:qe,hasTransition:m,strTransform:be}),l.pathbar.visible?VZe(t,r,h,p,{barDifY:C,width:k,height:T,viewX:ie,viewY:we,pathSlice:ye,toMoveInsideSlice:se,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Ee,handleSlicesExit:qe,hasTransition:m,strTransform:be}):p.remove()},qZe=Ra.exports,YZe=sm,WZe=If,XZe=WZe.clearMinTextSize,ZZe=np.resizeText,Mue=jZe,kue=function(t,r,a,n,o){var i=o.type,s=o.drawDescendants,l=t._fullLayout,u=l["_"+i+"layer"],f,c,h=!a;if(XZe(i,l),f=u.selectAll("g.trace."+i).data(r,function(p){return p[0].trace.uid}),f.enter().append("g").classed("trace",!0).classed(i,!0),f.order(),!l.uniformtext.mode&&YZe.hasTransition(a)){n&&(c=n());var v=qZe.transition().duration(a.duration).ease(a.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});v.each(function(){u.selectAll("g.trace").each(function(p){Mue(t,p,this,a,s)})})}else f.each(function(p){Mue(t,p,this,a,s)}),l.uniformtext.mode&&ZZe(t,u.selectAll(".trace"),i);h&&f.exit().remove()},Eue=Ra.exports,NL=bt.exports,Cue=xn.exports,KZe=xo,JZe=mue,Lue=L9.styleOne,z9=ew,zy=sm,QZe=zL,eKe=kL.formatSliceLabel,F9=!1,tKe=function(t,r,a,n,o){var i=o.width,s=o.height,l=o.viewX,u=o.viewY,f=o.pathSlice,c=o.toMoveInsideSlice,h=o.strTransform,v=o.hasTransition,p=o.handleSlicesExit,d=o.makeUpdateSliceInterpolator,g=o.makeUpdateTextInterpolator,m=o.prevEntry,y={},_=t._fullLayout,S=r[0],M=S.trace,w=M.textposition.indexOf("left")!==-1,A=M.textposition.indexOf("right")!==-1,k=M.textposition.indexOf("bottom")!==-1,T=!k&&!M.marker.pad.t||k&&!M.marker.pad.b,L=JZe(a,[i,s],{packing:M.tiling.packing,squarifyratio:M.tiling.squarifyratio,flipX:M.tiling.flip.indexOf("x")>-1,flipY:M.tiling.flip.indexOf("y")>-1,pad:{inner:M.tiling.pad,top:M.marker.pad.t,left:M.marker.pad.l,right:M.marker.pad.r,bottom:M.marker.pad.b}}),C=L.descendants(),I=1/0,R=-1/0;C.forEach(function($){var Y=$.depth;Y>=M._maxDepth?($.x0=$.x1=($.x0+$.x1)/2,$.y0=$.y1=($.y0+$.y1)/2):(I=Math.min(I,Y),R=Math.max(R,Y))}),n=n.data(C,zy.getPtId),M._maxVisibleLayers=isFinite(R)?R-I+1:0,n.enter().append("g").classed("slice",!0),p(n,F9,y,[i,s],f),n.order();var B=null;if(v&&m){var N=zy.getPtId(m);n.each(function($){B===null&&zy.getPtId($)===N&&(B={x0:$.x0,x1:$.x1,y0:$.y0,y1:$.y1})})}var D=function(){return B||{x0:0,x1:i,y0:0,y1:s}},O=n;return v&&(O=O.transition().each("end",function(){var $=Eue.select(this);zy.setSliceCursor($,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),O.each(function($){var Y=zy.isHeader($,M);$._x0=l($.x0),$._x1=l($.x1),$._y0=u($.y0),$._y1=u($.y1),$._hoverX=l($.x1-M.marker.pad.r),$._hoverY=u(k?$.y1-M.marker.pad.b/2:$.y0+M.marker.pad.t/2);var X=Eue.select(this),ee=NL.ensureSingle(X,"path","surface",function(ae){ae.style("pointer-events","all")});v?ee.transition().attrTween("d",function(ae){var ie=d(ae,F9,D(),[i,s]);return function(we){return f(ie(we))}}):ee.attr("d",f),X.call(QZe,a,t,r,{styleOne:Lue,eventDataKeys:z9.eventDataKeys,transitionTime:z9.CLICK_TRANSITION_TIME,transitionEasing:z9.CLICK_TRANSITION_EASING}).call(zy.setSliceCursor,t,{isTransitioning:t._transitioning}),ee.call(Lue,$,M,{hovered:!1}),$.x0===$.x1||$.y0===$.y1?$._text="":Y?$._text=T?"":zy.getPtLabel($)||"":$._text=eKe($,a,M,r,_)||"";var Q=NL.ensureSingle(X,"g","slicetext"),Z=NL.ensureSingle(Q,"text","",function(ae){ae.attr("data-notex",1)}),q=NL.ensureUniformFontSize(t,zy.determineTextFont(M,$,_.font));Z.text($._text||" ").classed("slicetext",!0).attr("text-anchor",A?"end":w||Y?"start":"middle").call(Cue.font,q).call(KZe.convertToTspans,t),$.textBB=Cue.bBox(Z.node()),$.transform=c($,{fontSize:q.size,isHeader:Y}),$.transform.fontSize=q.size,v?Z.transition().attrTween("transform",function(ae){var ie=g(ae,F9,D(),[i,s]);return function(we){return h(ie(we))}}):Z.attr("transform",h($))}),B},rKe=kue,aKe=tKe,nKe=function(t,r,a,n){return rKe(t,r,a,n,{type:"treemap",drawDescendants:aKe})},iKe={moduleType:"trace",name:"treemap",basePlotModule:cue,categories:[],animatable:!0,attributes:E9,layoutAttributes:vue,supplyDefaults:EZe,supplyLayoutDefaults:PZe,calc:FL.calc,crossTraceCalc:FL.crossTraceCalc,plot:nKe,style:L9.style,colorbar:Pf,meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}},oKe=iKe,Pue={};(function(e){var t=Eo.exports;e.name="icicle",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(Pue);var sKe=zn.hovertemplateAttrs,lKe=zn.texttemplateAttrs,uKe=bo,fKe=Fo.attributes,sS=j2,tv=bL,BL=E9,Iue=ew,cKe=cn.extendFlat,Due={labels:tv.labels,parents:tv.parents,values:tv.values,branchvalues:tv.branchvalues,count:tv.count,level:tv.level,maxdepth:tv.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot",description:["When set in conjunction with `tiling.flip`, determines on","which side the root nodes are drawn in the chart. If","`tiling.orientation` is *v* and `tiling.flip` is **, the root","nodes appear at the top. If `tiling.orientation` is *v* and","`tiling.flip` is *y*, the root nodes appear at the bottom. If","`tiling.orientation` is *h* and `tiling.flip` is **, the","root nodes appear at the left. If `tiling.orientation` is *h*","and `tiling.flip` is *x*, the root nodes appear at the right."].join(" ")},flip:BL.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:cKe({colors:tv.marker.colors,line:tv.marker.line,editType:"calc"},uKe("marker",{colorAttr:"colors",anim:!1})),leaf:tv.leaf,pathbar:BL.pathbar,text:sS.text,textinfo:tv.textinfo,texttemplate:lKe({editType:"plot"},{keys:Iue.eventDataKeys.concat(["label","value"])}),hovertext:sS.hovertext,hoverinfo:tv.hoverinfo,hovertemplate:sKe({},{keys:Iue.eventDataKeys}),textfont:sS.textfont,insidetextfont:sS.insidetextfont,outsidetextfont:BL.outsidetextfont,textposition:BL.textposition,sort:sS.sort,root:tv.root,domain:fKe({name:"icicle",trace:!0,editType:"calc"})},Rue={iciclecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default icicle slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendiciclecolors`."].join(" ")},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the icicle slice colors (whether given by `iciclecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},hKe=bt.exports,vKe=Due,dKe=Oa.exports,pKe=Fo.defaults,gKe=ch.handleText,mKe=g2.TEXTPAD,zue=Qo,yKe=zue.hasColorscale,xKe=zue.handleDefaults,bKe=function(t,r,a,n){function o(p,d){return hKe.coerce(t,r,vKe,p,d)}var i=o("labels"),s=o("parents");if(!i||!i.length||!s||!s.length){r.visible=!1;return}var l=o("values");l&&l.length?o("branchvalues"):o("count"),o("level"),o("maxdepth"),o("tiling.orientation"),o("tiling.flip"),o("tiling.pad");var u=o("text");o("texttemplate"),r.texttemplate||o("textinfo",Array.isArray(u)?"text+label":"label"),o("hovertext"),o("hovertemplate");var f=o("pathbar.visible"),c="auto";gKe(t,r,n,o,c,{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("textposition");var h=o("marker.line.width");h&&o("marker.line.color",n.paper_bgcolor),o("marker.colors");var v=r._hasColorscale=yKe(t,"marker","colors")||(t.marker||{}).coloraxis;v&&xKe(t,r,n,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",v?1:.7),r._hovered={marker:{line:{width:2,color:dKe.contrast(n.paper_bgcolor)}}},f&&(o("pathbar.thickness",r.pathbar.textfont.size+2*mKe),o("pathbar.side"),o("pathbar.edgeshape")),o("sort"),o("root.color"),pKe(r,n,o),r._length=null},_Ke=bt.exports,wKe=Rue,TKe=function(t,r){function a(n,o){return _Ke.coerce(t,r,wKe,n,o)}a("iciclecolorway",r.colorway),a("extendiciclecolors")},$L={},Fue=XA;$L.calc=function(e,t){return Fue.calc(e,t)};$L.crossTraceCalc=function(e){return Fue._runCrossTraceCalc("icicle",e)};var AKe=ML,SKe=gue,MKe=function(t,r,a){var n=a.flipX,o=a.flipY,i=a.orientation==="h",s=a.maxDepth,l=r[0],u=r[1];s&&(l=(t.height+1)*r[0]/Math.min(t.height+1,s),u=(t.height+1)*r[1]/Math.min(t.height+1,s));var f=AKe.partition().padding(a.pad.inner).size(i?[r[1],l]:[r[0],u])(t);return(i||n||o)&&SKe(f,r,{swapXY:i,flipX:n,flipY:o}),f},Oue=Ra.exports,O9=Oa.exports,Nue=bt.exports,kKe=If.resizeText;function EKe(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");kKe(e,t,"icicle"),t.each(function(r){var a=Oue.select(this),n=r[0],o=n.trace;a.style("opacity",o.opacity),a.selectAll("path.surface").each(function(i){Oue.select(this).call(Bue,i,o)})})}function Bue(e,t,r){var a=t.data.data,n=!t.children,o=a.i,i=Nue.castOption(r,o,"marker.line.color")||O9.defaultLine,s=Nue.castOption(r,o,"marker.line.width")||0;e.style("stroke-width",s).call(O9.fill,a.color).call(O9.stroke,i).style("opacity",n?r.leaf.opacity:null)}var $ue={style:EKe,styleOne:Bue},Uue=Ra.exports,UL=bt.exports,Hue=xn.exports,CKe=xo,LKe=MKe,Gue=$ue.styleOne,N9=ew,aw=sm,PKe=zL,IKe=kL.formatSliceLabel,B9=!1,DKe=function(t,r,a,n,o){var i=o.width,s=o.height,l=o.viewX,u=o.viewY,f=o.pathSlice,c=o.toMoveInsideSlice,h=o.strTransform,v=o.hasTransition,p=o.handleSlicesExit,d=o.makeUpdateSliceInterpolator,g=o.makeUpdateTextInterpolator,m=o.prevEntry,y={},_=t._fullLayout,S=r[0],M=S.trace,w=M.textposition.indexOf("left")!==-1,A=M.textposition.indexOf("right")!==-1,k=M.textposition.indexOf("bottom")!==-1,T=LKe(a,[i,s],{flipX:M.tiling.flip.indexOf("x")>-1,flipY:M.tiling.flip.indexOf("y")>-1,orientation:M.tiling.orientation,pad:{inner:M.tiling.pad},maxDepth:M._maxDepth}),L=T.descendants(),C=1/0,I=-1/0;L.forEach(function(O){var $=O.depth;$>=M._maxDepth?(O.x0=O.x1=(O.x0+O.x1)/2,O.y0=O.y1=(O.y0+O.y1)/2):(C=Math.min(C,$),I=Math.max(I,$))}),n=n.data(L,aw.getPtId),M._maxVisibleLayers=isFinite(I)?I-C+1:0,n.enter().append("g").classed("slice",!0),p(n,B9,y,[i,s],f),n.order();var R=null;if(v&&m){var B=aw.getPtId(m);n.each(function(O){R===null&&aw.getPtId(O)===B&&(R={x0:O.x0,x1:O.x1,y0:O.y0,y1:O.y1})})}var N=function(){return R||{x0:0,x1:i,y0:0,y1:s}},D=n;return v&&(D=D.transition().each("end",function(){var O=Uue.select(this);aw.setSliceCursor(O,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),D.each(function(O){O._x0=l(O.x0),O._x1=l(O.x1),O._y0=u(O.y0),O._y1=u(O.y1),O._hoverX=l(O.x1-M.tiling.pad),O._hoverY=u(k?O.y1-M.tiling.pad/2:O.y0+M.tiling.pad/2);var $=Uue.select(this),Y=UL.ensureSingle($,"path","surface",function(Z){Z.style("pointer-events","all")});v?Y.transition().attrTween("d",function(Z){var q=d(Z,B9,N(),[i,s],{orientation:M.tiling.orientation,flipX:M.tiling.flip.indexOf("x")>-1,flipY:M.tiling.flip.indexOf("y")>-1});return function(ae){return f(q(ae))}}):Y.attr("d",f),$.call(PKe,a,t,r,{styleOne:Gue,eventDataKeys:N9.eventDataKeys,transitionTime:N9.CLICK_TRANSITION_TIME,transitionEasing:N9.CLICK_TRANSITION_EASING}).call(aw.setSliceCursor,t,{isTransitioning:t._transitioning}),Y.call(Gue,O,M,{hovered:!1}),O.x0===O.x1||O.y0===O.y1?O._text="":O._text=IKe(O,a,M,r,_)||"";var X=UL.ensureSingle($,"g","slicetext"),ee=UL.ensureSingle(X,"text","",function(Z){Z.attr("data-notex",1)}),Q=UL.ensureUniformFontSize(t,aw.determineTextFont(M,O,_.font));ee.text(O._text||" ").classed("slicetext",!0).attr("text-anchor",A?"end":w?"start":"middle").call(Hue.font,Q).call(CKe.convertToTspans,t),O.textBB=Hue.bBox(ee.node()),O.transform=c(O,{fontSize:Q.size}),O.transform.fontSize=Q.size,v?ee.transition().attrTween("transform",function(Z){var q=g(Z,B9,N(),[i,s]);return function(ae){return h(q(ae))}}):ee.attr("transform",h(O))}),R},RKe=kue,zKe=DKe,FKe=function(t,r,a,n){return RKe(t,r,a,n,{type:"icicle",drawDescendants:zKe})},OKe={moduleType:"trace",name:"icicle",basePlotModule:Pue,categories:[],animatable:!0,attributes:Due,layoutAttributes:Rue,supplyDefaults:bKe,supplyLayoutDefaults:TKe,calc:$L.calc,crossTraceCalc:$L.crossTraceCalc,plot:FKe,style:$ue.style,colorbar:Pf,meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The icicle sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}},NKe=OKe,Vue={};(function(e){var t=Eo.exports;e.name="funnelarea",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(Vue);var ef=j2,BKe=ao,$Ke=Fo.attributes,UKe=zn.hovertemplateAttrs,HKe=zn.texttemplateAttrs,Gx=cn.extendFlat,jue={labels:ef.labels,label0:ef.label0,dlabel:ef.dlabel,values:ef.values,marker:{colors:ef.marker.colors,line:{color:Gx({},ef.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:Gx({},ef.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:ef.text,hovertext:ef.hovertext,scalegroup:Gx({},ef.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:Gx({},ef.textinfo,{flags:["label","text","value","percent"]}),texttemplate:HKe({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:Gx({},BKe.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:UKe({},{keys:["label","color","value","text","percent"]}),textposition:Gx({},ef.textposition,{values:["inside","none"],dflt:"inside"}),textfont:ef.textfont,insidetextfont:ef.insidetextfont,title:{text:ef.title.text,font:ef.title.font,position:Gx({},ef.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:$Ke({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}},GKe=XO.hiddenlabels,que={hiddenlabels:GKe,funnelareacolorway:{valType:"colorlist",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},Yue=bt.exports,VKe=jue,jKe=Fo.defaults,qKe=ch.handleText,YKe=kse.handleLabelsAndValues,WKe=function(t,r,a,n){function o(g,m){return Yue.coerce(t,r,VKe,g,m)}var i=o("labels"),s=o("values"),l=YKe(i,s),u=l.len;if(r._hasLabels=l.hasLabels,r._hasValues=l.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!u){r.visible=!1;return}r._length=u;var f=o("marker.line.width");f&&o("marker.line.color",n.paper_bgcolor),o("marker.colors"),o("scalegroup");var c=o("text"),h=o("texttemplate"),v;if(h||(v=o("textinfo",Array.isArray(c)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),h||v&&v!=="none"){var p=o("textposition");qKe(t,r,n,o,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}jKe(r,n,o);var d=o("title.text");d&&(o("title.position"),Yue.coerceFont(o,"title.font",n.font)),o("aspectratio"),o("baseratio")},XKe=bt.exports,ZKe=que,KKe=function(t,r){function a(n,o){return XKe.coerce(t,r,ZKe,n,o)}a("hiddenlabels"),a("funnelareacolorway",r.colorway),a("extendfunnelareacolors")},Wue=YA;function JKe(e,t){return Wue.calc(e,t)}function QKe(e){Wue.crossTraceCalc(e,{type:"funnelarea"})}var Xue={calc:JKe,crossTraceCalc:QKe},Vx=Ra.exports,$9=xn.exports,Fy=bt.exports,eJe=Fy.strScale,Zue=Fy.strTranslate,Kue=xo,tJe=w2,rJe=tJe.toMoveInsideBar,Jue=If,aJe=Jue.recordMinTextSize,nJe=Jue.clearMinTextSize,iJe=hy,nw=QO,oJe=nw.attachFxHandlers,sJe=nw.determineInsideTextFont,lJe=nw.layoutAreas,uJe=nw.prerenderTitles,fJe=nw.positionTitleOutside,cJe=nw.formatSliceLabel,hJe=function(t,r){var a=t._fullLayout;nJe("funnelarea",a),uJe(r,t),lJe(r,a._size),Fy.makeTraceGroups(a._funnelarealayer,r,"trace").each(function(n){var o=Vx.select(this),i=n[0],s=i.trace;dJe(n),o.each(function(){var l=Vx.select(this).selectAll("g.slice").data(n);l.enter().append("g").classed("slice",!0),l.exit().remove(),l.each(function(f,c){if(f.hidden){Vx.select(this).selectAll("path,g").remove();return}f.pointNumber=f.i,f.curveNumber=s.index;var h=i.cx,v=i.cy,p=Vx.select(this),d=p.selectAll("path.surface").data([f]);d.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),p.call(oJe,t,n);var g="M"+(h+f.TR[0])+","+(v+f.TR[1])+U9(f.TR,f.BR)+U9(f.BR,f.BL)+U9(f.BL,f.TL)+"Z";d.attr("d",g),cJe(t,f,i);var m=iJe.castOption(s.textposition,f.pts),y=p.selectAll("g.slicetext").data(f.text&&m!=="none"?[0]:[]);y.enter().append("g").classed("slicetext",!0),y.exit().remove(),y.each(function(){var _=Fy.ensureSingle(Vx.select(this),"text","",function(C){C.attr("data-notex",1)}),S=Fy.ensureUniformFontSize(t,sJe(s,f,a.font));_.text(f.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call($9.font,S).call(Kue.convertToTspans,t);var M=$9.bBox(_.node()),w,A,k,T=Math.min(f.BL[1],f.BR[1])+v,L=Math.max(f.TL[1],f.TR[1])+v;A=Math.max(f.TL[0],f.BL[0])+h,k=Math.min(f.TR[0],f.BR[0])+h,w=rJe(A,k,T,L,M,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),w.fontSize=S.size,aJe(s.type,w,a),n[c].transform=w,_.attr("transform",Fy.getTextTransform(w))})});var u=Vx.select(this).selectAll("g.titletext").data(s.title.text?[0]:[]);u.enter().append("g").classed("titletext",!0),u.exit().remove(),u.each(function(){var f=Fy.ensureSingle(Vx.select(this),"text","",function(v){v.attr("data-notex",1)}),c=s.title.text;s._meta&&(c=Fy.templateString(c,s._meta)),f.text(c).attr({class:"titletext",transform:"","text-anchor":"middle"}).call($9.font,s.title.font).call(Kue.convertToTspans,t);var h=fJe(i,a._size);f.attr("transform",Zue(h.x,h.y)+eJe(Math.min(1,h.scale))+Zue(h.tx,h.ty))})})})};function U9(e,t){var r=t[0]-e[0],a=t[1]-e[1];return"l"+r+","+a}function vJe(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}function dJe(e){if(!e.length)return;var t=e[0],r=t.trace,a=r.aspectratio,n=r.baseratio;n>.999&&(n=.999);var o=Math.pow(n,2),i=t.vTotal,s=i*o/(1-o),l=i,u=s/i;function f(){var R=Math.sqrt(u);return{x:R,y:-R}}function c(){var R=f();return[R.x,R.y]}var h,v=[];v.push(c());var p,d;for(p=e.length-1;p>-1;p--)if(d=e[p],!d.hidden){var g=d.v/l;u+=g,v.push(c())}var m=1/0,y=-1/0;for(p=0;p<v.length;p++)h=v[p],m=Math.min(m,h[1]),y=Math.max(y,h[1]);for(p=0;p<v.length;p++)v[p][1]-=(y+m)/2;var _=v[v.length-1][0],S=t.r,M=(y-m)/2,w=S/_,A=S/M*a;for(t.r=A*M,p=0;p<v.length;p++)v[p][0]*=w,v[p][1]*=A;h=v[0];var k=[-h[0],h[1]],T=[h[0],h[1]],L=0;for(p=e.length-1;p>-1;p--)if(d=e[p],!d.hidden){L+=1;var C=v[L][0],I=v[L][1];d.TL=[-C,I],d.TR=[C,I],d.BL=k,d.BR=T,d.pxmid=vJe(d.TR,d.BR),k=d.TL,T=d.TR}}var Que=Ra.exports,pJe=MT,gJe=If.resizeText,mJe=function(t){var r=t._fullLayout._funnelarealayer.selectAll(".trace");gJe(t,r,"funnelarea"),r.each(function(a){var n=a[0],o=n.trace,i=Que.select(this);i.style({opacity:o.opacity}),i.selectAll("path.surface").each(function(s){Que.select(this).call(pJe,s,o)})})},yJe={moduleType:"trace",name:"funnelarea",basePlotModule:Vue,categories:["pie-like","funnelarea","showLegend"],attributes:jue,layoutAttributes:que,supplyDefaults:WKe,supplyLayoutDefaults:KKe,calc:Xue.calc,crossTraceCalc:Xue.crossTraceCalc,plot:hJe,style:mJe,styleOne:MT,meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}},xJe=yJe,Ns={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(a,n,o){function i(u,f){if(!n[u]){if(!a[u]){var c=typeof t5=="function"&&t5;if(!f&&c)return c(u,!0);if(s)return s(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var v=n[u]={exports:{}};a[u][0].call(v.exports,function(p){var d=a[u][1][p];return i(d||p)},v,v.exports,r,a,n,o)}return n[u].exports}for(var s=typeof t5=="function"&&t5,l=0;l<o.length;l++)i(o[l]);return i}return r}()({1:[function(r,a,n){n.byteLength=h,n.toByteArray=p,n.fromByteArray=m;for(var o=[],i=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,f=l.length;u<f;++u)o[u]=l[u],i[l.charCodeAt(u)]=u;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;function c(y){var _=y.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=y.indexOf("=");S===-1&&(S=_);var M=S===_?0:4-S%4;return[S,M]}function h(y){var _=c(y),S=_[0],M=_[1];return(S+M)*3/4-M}function v(y,_,S){return(_+S)*3/4-S}function p(y){var _,S=c(y),M=S[0],w=S[1],A=new s(v(y,M,w)),k=0,T=w>0?M-4:M,L;for(L=0;L<T;L+=4)_=i[y.charCodeAt(L)]<<18|i[y.charCodeAt(L+1)]<<12|i[y.charCodeAt(L+2)]<<6|i[y.charCodeAt(L+3)],A[k++]=_>>16&255,A[k++]=_>>8&255,A[k++]=_&255;return w===2&&(_=i[y.charCodeAt(L)]<<2|i[y.charCodeAt(L+1)]>>4,A[k++]=_&255),w===1&&(_=i[y.charCodeAt(L)]<<10|i[y.charCodeAt(L+1)]<<4|i[y.charCodeAt(L+2)]>>2,A[k++]=_>>8&255,A[k++]=_&255),A}function d(y){return o[y>>18&63]+o[y>>12&63]+o[y>>6&63]+o[y&63]}function g(y,_,S){for(var M,w=[],A=_;A<S;A+=3)M=(y[A]<<16&16711680)+(y[A+1]<<8&65280)+(y[A+2]&255),w.push(d(M));return w.join("")}function m(y){for(var _,S=y.length,M=S%3,w=[],A=16383,k=0,T=S-M;k<T;k+=A)w.push(g(y,k,k+A>T?T:k+A));return M===1?(_=y[S-1],w.push(o[_>>2]+o[_<<4&63]+"==")):M===2&&(_=(y[S-2]<<8)+y[S-1],w.push(o[_>>10]+o[_>>4&63]+o[_<<2&63]+"=")),w.join("")}},{}],2:[function(r,a,n){},{}],3:[function(r,a,n){(function(o){(function(){var i=r("base64-js"),s=r("ieee754");n.Buffer=c,n.SlowBuffer=M,n.INSPECT_MAX_BYTES=50;var l=2147483647;n.kMaxLength=l,c.TYPED_ARRAY_SUPPORT=u(),!c.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var be=new Uint8Array(1);return be.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},be.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.byteOffset}});function f(be){if(be>l)throw new RangeError('The value "'+be+'" is invalid for option "size"');var oe=new Uint8Array(be);return oe.__proto__=c.prototype,oe}function c(be,oe,ce){if(typeof be=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(be)}return h(be,oe,ce)}typeof Symbol!="undefined"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192;function h(be,oe,ce){if(typeof be=="string")return g(be,oe);if(ArrayBuffer.isView(be))return m(be);if(be==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(Ee(be,ArrayBuffer)||be&&Ee(be.buffer,ArrayBuffer))return y(be,oe,ce);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=be.valueOf&&be.valueOf();if(ue!=null&&ue!==be)return c.from(ue,oe,ce);var Re=_(be);if(Re)return Re;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return c.from(be[Symbol.toPrimitive]("string"),oe,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}c.from=function(be,oe,ce){return h(be,oe,ce)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array;function v(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function p(be,oe,ce){return v(be),be<=0?f(be):oe!==void 0?typeof ce=="string"?f(be).fill(oe,ce):f(be).fill(oe):f(be)}c.alloc=function(be,oe,ce){return p(be,oe,ce)};function d(be){return v(be),f(be<0?0:S(be)|0)}c.allocUnsafe=function(be){return d(be)},c.allocUnsafeSlow=function(be){return d(be)};function g(be,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!c.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var ce=w(be,oe)|0,ue=f(ce),Re=ue.write(be,oe);return Re!==ce&&(ue=ue.slice(0,Re)),ue}function m(be){for(var oe=be.length<0?0:S(be.length)|0,ce=f(oe),ue=0;ue<oe;ue+=1)ce[ue]=be[ue]&255;return ce}function y(be,oe,ce){if(oe<0||be.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<oe+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return oe===void 0&&ce===void 0?ue=new Uint8Array(be):ce===void 0?ue=new Uint8Array(be,oe):ue=new Uint8Array(be,oe,ce),ue.__proto__=c.prototype,ue}function _(be){if(c.isBuffer(be)){var oe=S(be.length)|0,ce=f(oe);return ce.length===0||be.copy(ce,0,0,oe),ce}if(be.length!==void 0)return typeof be.length!="number"||qe(be.length)?f(0):m(be);if(be.type==="Buffer"&&Array.isArray(be.data))return m(be.data)}function S(be){if(be>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return be|0}function M(be){return+be!=be&&(be=0),c.alloc(+be)}c.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==c.prototype},c.compare=function(oe,ce){if(Ee(oe,Uint8Array)&&(oe=c.from(oe,oe.offset,oe.byteLength)),Ee(ce,Uint8Array)&&(ce=c.from(ce,ce.offset,ce.byteLength)),!c.isBuffer(oe)||!c.isBuffer(ce))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ce)return 0;for(var ue=oe.length,Re=ce.length,Xe=0,Ke=Math.min(ue,Re);Xe<Ke;++Xe)if(oe[Xe]!==ce[Xe]){ue=oe[Xe],Re=ce[Xe];break}return ue<Re?-1:Re<ue?1:0},c.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(oe,ce){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return c.alloc(0);var ue;if(ce===void 0)for(ce=0,ue=0;ue<oe.length;++ue)ce+=oe[ue].length;var Re=c.allocUnsafe(ce),Xe=0;for(ue=0;ue<oe.length;++ue){var Ke=oe[ue];if(Ee(Ke,Uint8Array)&&(Ke=c.from(Ke)),!c.isBuffer(Ke))throw new TypeError('"list" argument must be an Array of Buffers');Ke.copy(Re,Xe),Xe+=Ke.length}return Re};function w(be,oe){if(c.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||Ee(be,ArrayBuffer))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);var ce=be.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&ce===0)return 0;for(var Re=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return re(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce*2;case"hex":return ce>>>1;case"base64":return Me(be).length;default:if(Re)return ue?-1:re(be).length;oe=(""+oe).toLowerCase(),Re=!0}}c.byteLength=w;function A(be,oe,ce){var ue=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ce===void 0||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0,oe>>>=0,ce<=oe))return"";for(be||(be="utf8");;)switch(be){case"hex":return Z(this,oe,ce);case"utf8":case"utf-8":return $(this,oe,ce);case"ascii":return ee(this,oe,ce);case"latin1":case"binary":return Q(this,oe,ce);case"base64":return O(this,oe,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,oe,ce);default:if(ue)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),ue=!0}}c.prototype._isBuffer=!0;function k(be,oe,ce){var ue=be[oe];be[oe]=be[ce],be[ce]=ue}c.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ce=0;ce<oe;ce+=2)k(this,ce,ce+1);return this},c.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ce=0;ce<oe;ce+=4)k(this,ce,ce+3),k(this,ce+1,ce+2);return this},c.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ce=0;ce<oe;ce+=8)k(this,ce,ce+7),k(this,ce+1,ce+6),k(this,ce+2,ce+5),k(this,ce+3,ce+4);return this},c.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?$(this,0,oe):A.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(oe){if(!c.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:c.compare(this,oe)===0},c.prototype.inspect=function(){var oe="",ce=n.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ce).replace(/(.{2})/g,"$1 ").trim(),this.length>ce&&(oe+=" ... "),"<Buffer "+oe+">"},c.prototype.compare=function(oe,ce,ue,Re,Xe){if(Ee(oe,Uint8Array)&&(oe=c.from(oe,oe.offset,oe.byteLength)),!c.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(ce===void 0&&(ce=0),ue===void 0&&(ue=oe?oe.length:0),Re===void 0&&(Re=0),Xe===void 0&&(Xe=this.length),ce<0||ue>oe.length||Re<0||Xe>this.length)throw new RangeError("out of range index");if(Re>=Xe&&ce>=ue)return 0;if(Re>=Xe)return-1;if(ce>=ue)return 1;if(ce>>>=0,ue>>>=0,Re>>>=0,Xe>>>=0,this===oe)return 0;for(var Ke=Xe-Re,vt=ue-ce,Ze=Math.min(Ke,vt),Qe=this.slice(Re,Xe),Je=oe.slice(ce,ue),je=0;je<Ze;++je)if(Qe[je]!==Je[je]){Ke=Qe[je],vt=Je[je];break}return Ke<vt?-1:vt<Ke?1:0};function T(be,oe,ce,ue,Re){if(be.length===0)return-1;if(typeof ce=="string"?(ue=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),ce=+ce,qe(ce)&&(ce=Re?0:be.length-1),ce<0&&(ce=be.length+ce),ce>=be.length){if(Re)return-1;ce=be.length-1}else if(ce<0)if(Re)ce=0;else return-1;if(typeof oe=="string"&&(oe=c.from(oe,ue)),c.isBuffer(oe))return oe.length===0?-1:L(be,oe,ce,ue,Re);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(be,oe,ce):Uint8Array.prototype.lastIndexOf.call(be,oe,ce):L(be,[oe],ce,ue,Re);throw new TypeError("val must be string, number or Buffer")}function L(be,oe,ce,ue,Re){var Xe=1,Ke=be.length,vt=oe.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(be.length<2||oe.length<2)return-1;Xe=2,Ke/=2,vt/=2,ce/=2}function Ze(Ye,yt){return Xe===1?Ye[yt]:Ye.readUInt16BE(yt*Xe)}var Qe;if(Re){var Je=-1;for(Qe=ce;Qe<Ke;Qe++)if(Ze(be,Qe)===Ze(oe,Je===-1?0:Qe-Je)){if(Je===-1&&(Je=Qe),Qe-Je+1===vt)return Je*Xe}else Je!==-1&&(Qe-=Qe-Je),Je=-1}else for(ce+vt>Ke&&(ce=Ke-vt),Qe=ce;Qe>=0;Qe--){for(var je=!0,$e=0;$e<vt;$e++)if(Ze(be,Qe+$e)!==Ze(oe,$e)){je=!1;break}if(je)return Qe}return-1}c.prototype.includes=function(oe,ce,ue){return this.indexOf(oe,ce,ue)!==-1},c.prototype.indexOf=function(oe,ce,ue){return T(this,oe,ce,ue,!0)},c.prototype.lastIndexOf=function(oe,ce,ue){return T(this,oe,ce,ue,!1)};function C(be,oe,ce,ue){ce=Number(ce)||0;var Re=be.length-ce;ue?(ue=Number(ue),ue>Re&&(ue=Re)):ue=Re;var Xe=oe.length;ue>Xe/2&&(ue=Xe/2);for(var Ke=0;Ke<ue;++Ke){var vt=parseInt(oe.substr(Ke*2,2),16);if(qe(vt))return Ke;be[ce+Ke]=vt}return Ke}function I(be,oe,ce,ue){return Ie(re(oe,be.length-ce),be,ce,ue)}function R(be,oe,ce,ue){return Ie(se(oe),be,ce,ue)}function B(be,oe,ce,ue){return R(be,oe,ce,ue)}function N(be,oe,ce,ue){return Ie(Me(oe),be,ce,ue)}function D(be,oe,ce,ue){return Ie(de(oe,be.length-ce),be,ce,ue)}c.prototype.write=function(oe,ce,ue,Re){if(ce===void 0)Re="utf8",ue=this.length,ce=0;else if(ue===void 0&&typeof ce=="string")Re=ce,ue=this.length,ce=0;else if(isFinite(ce))ce=ce>>>0,isFinite(ue)?(ue=ue>>>0,Re===void 0&&(Re="utf8")):(Re=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Xe=this.length-ce;if((ue===void 0||ue>Xe)&&(ue=Xe),oe.length>0&&(ue<0||ce<0)||ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");for(var Ke=!1;;)switch(Re){case"hex":return C(this,oe,ce,ue);case"utf8":case"utf-8":return I(this,oe,ce,ue);case"ascii":return R(this,oe,ce,ue);case"latin1":case"binary":return B(this,oe,ce,ue);case"base64":return N(this,oe,ce,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,oe,ce,ue);default:if(Ke)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Ke=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(be,oe,ce){return oe===0&&ce===be.length?i.fromByteArray(be):i.fromByteArray(be.slice(oe,ce))}function $(be,oe,ce){ce=Math.min(be.length,ce);for(var ue=[],Re=oe;Re<ce;){var Xe=be[Re],Ke=null,vt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(Re+vt<=ce){var Ze,Qe,Je,je;switch(vt){case 1:Xe<128&&(Ke=Xe);break;case 2:Ze=be[Re+1],(Ze&192)==128&&(je=(Xe&31)<<6|Ze&63,je>127&&(Ke=je));break;case 3:Ze=be[Re+1],Qe=be[Re+2],(Ze&192)==128&&(Qe&192)==128&&(je=(Xe&15)<<12|(Ze&63)<<6|Qe&63,je>2047&&(je<55296||je>57343)&&(Ke=je));break;case 4:Ze=be[Re+1],Qe=be[Re+2],Je=be[Re+3],(Ze&192)==128&&(Qe&192)==128&&(Je&192)==128&&(je=(Xe&15)<<18|(Ze&63)<<12|(Qe&63)<<6|Je&63,je>65535&&je<1114112&&(Ke=je))}}Ke===null?(Ke=65533,vt=1):Ke>65535&&(Ke-=65536,ue.push(Ke>>>10&1023|55296),Ke=56320|Ke&1023),ue.push(Ke),Re+=vt}return X(ue)}var Y=4096;function X(be){var oe=be.length;if(oe<=Y)return String.fromCharCode.apply(String,be);for(var ce="",ue=0;ue<oe;)ce+=String.fromCharCode.apply(String,be.slice(ue,ue+=Y));return ce}function ee(be,oe,ce){var ue="";ce=Math.min(be.length,ce);for(var Re=oe;Re<ce;++Re)ue+=String.fromCharCode(be[Re]&127);return ue}function Q(be,oe,ce){var ue="";ce=Math.min(be.length,ce);for(var Re=oe;Re<ce;++Re)ue+=String.fromCharCode(be[Re]);return ue}function Z(be,oe,ce){var ue=be.length;(!oe||oe<0)&&(oe=0),(!ce||ce<0||ce>ue)&&(ce=ue);for(var Re="",Xe=oe;Xe<ce;++Xe)Re+=ye(be[Xe]);return Re}function q(be,oe,ce){for(var ue=be.slice(oe,ce),Re="",Xe=0;Xe<ue.length;Xe+=2)Re+=String.fromCharCode(ue[Xe]+ue[Xe+1]*256);return Re}c.prototype.slice=function(oe,ce){var ue=this.length;oe=~~oe,ce=ce===void 0?ue:~~ce,oe<0?(oe+=ue,oe<0&&(oe=0)):oe>ue&&(oe=ue),ce<0?(ce+=ue,ce<0&&(ce=0)):ce>ue&&(ce=ue),ce<oe&&(ce=oe);var Re=this.subarray(oe,ce);return Re.__proto__=c.prototype,Re};function ae(be,oe,ce){if(be%1!=0||be<0)throw new RangeError("offset is not uint");if(be+oe>ce)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(oe,ce,ue){oe=oe>>>0,ce=ce>>>0,ue||ae(oe,ce,this.length);for(var Re=this[oe],Xe=1,Ke=0;++Ke<ce&&(Xe*=256);)Re+=this[oe+Ke]*Xe;return Re},c.prototype.readUIntBE=function(oe,ce,ue){oe=oe>>>0,ce=ce>>>0,ue||ae(oe,ce,this.length);for(var Re=this[oe+--ce],Xe=1;ce>0&&(Xe*=256);)Re+=this[oe+--ce]*Xe;return Re},c.prototype.readUInt8=function(oe,ce){return oe=oe>>>0,ce||ae(oe,1,this.length),this[oe]},c.prototype.readUInt16LE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,2,this.length),this[oe]|this[oe+1]<<8},c.prototype.readUInt16BE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,2,this.length),this[oe]<<8|this[oe+1]},c.prototype.readUInt32LE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},c.prototype.readUInt32BE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},c.prototype.readIntLE=function(oe,ce,ue){oe=oe>>>0,ce=ce>>>0,ue||ae(oe,ce,this.length);for(var Re=this[oe],Xe=1,Ke=0;++Ke<ce&&(Xe*=256);)Re+=this[oe+Ke]*Xe;return Xe*=128,Re>=Xe&&(Re-=Math.pow(2,8*ce)),Re},c.prototype.readIntBE=function(oe,ce,ue){oe=oe>>>0,ce=ce>>>0,ue||ae(oe,ce,this.length);for(var Re=ce,Xe=1,Ke=this[oe+--Re];Re>0&&(Xe*=256);)Ke+=this[oe+--Re]*Xe;return Xe*=128,Ke>=Xe&&(Ke-=Math.pow(2,8*ce)),Ke},c.prototype.readInt8=function(oe,ce){return oe=oe>>>0,ce||ae(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},c.prototype.readInt16LE=function(oe,ce){oe=oe>>>0,ce||ae(oe,2,this.length);var ue=this[oe]|this[oe+1]<<8;return ue&32768?ue|4294901760:ue},c.prototype.readInt16BE=function(oe,ce){oe=oe>>>0,ce||ae(oe,2,this.length);var ue=this[oe+1]|this[oe]<<8;return ue&32768?ue|4294901760:ue},c.prototype.readInt32LE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},c.prototype.readInt32BE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},c.prototype.readFloatLE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),s.read(this,oe,!0,23,4)},c.prototype.readFloatBE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,4,this.length),s.read(this,oe,!1,23,4)},c.prototype.readDoubleLE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,8,this.length),s.read(this,oe,!0,52,8)},c.prototype.readDoubleBE=function(oe,ce){return oe=oe>>>0,ce||ae(oe,8,this.length),s.read(this,oe,!1,52,8)};function ie(be,oe,ce,ue,Re,Xe){if(!c.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Re||oe<Xe)throw new RangeError('"value" argument is out of bounds');if(ce+ue>be.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(oe,ce,ue,Re){if(oe=+oe,ce=ce>>>0,ue=ue>>>0,!Re){var Xe=Math.pow(2,8*ue)-1;ie(this,oe,ce,ue,Xe,0)}var Ke=1,vt=0;for(this[ce]=oe&255;++vt<ue&&(Ke*=256);)this[ce+vt]=oe/Ke&255;return ce+ue},c.prototype.writeUIntBE=function(oe,ce,ue,Re){if(oe=+oe,ce=ce>>>0,ue=ue>>>0,!Re){var Xe=Math.pow(2,8*ue)-1;ie(this,oe,ce,ue,Xe,0)}var Ke=ue-1,vt=1;for(this[ce+Ke]=oe&255;--Ke>=0&&(vt*=256);)this[ce+Ke]=oe/vt&255;return ce+ue},c.prototype.writeUInt8=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,1,255,0),this[ce]=oe&255,ce+1},c.prototype.writeUInt16LE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,2,65535,0),this[ce]=oe&255,this[ce+1]=oe>>>8,ce+2},c.prototype.writeUInt16BE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,2,65535,0),this[ce]=oe>>>8,this[ce+1]=oe&255,ce+2},c.prototype.writeUInt32LE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,4,4294967295,0),this[ce+3]=oe>>>24,this[ce+2]=oe>>>16,this[ce+1]=oe>>>8,this[ce]=oe&255,ce+4},c.prototype.writeUInt32BE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,4,4294967295,0),this[ce]=oe>>>24,this[ce+1]=oe>>>16,this[ce+2]=oe>>>8,this[ce+3]=oe&255,ce+4},c.prototype.writeIntLE=function(oe,ce,ue,Re){if(oe=+oe,ce=ce>>>0,!Re){var Xe=Math.pow(2,8*ue-1);ie(this,oe,ce,ue,Xe-1,-Xe)}var Ke=0,vt=1,Ze=0;for(this[ce]=oe&255;++Ke<ue&&(vt*=256);)oe<0&&Ze===0&&this[ce+Ke-1]!==0&&(Ze=1),this[ce+Ke]=(oe/vt>>0)-Ze&255;return ce+ue},c.prototype.writeIntBE=function(oe,ce,ue,Re){if(oe=+oe,ce=ce>>>0,!Re){var Xe=Math.pow(2,8*ue-1);ie(this,oe,ce,ue,Xe-1,-Xe)}var Ke=ue-1,vt=1,Ze=0;for(this[ce+Ke]=oe&255;--Ke>=0&&(vt*=256);)oe<0&&Ze===0&&this[ce+Ke+1]!==0&&(Ze=1),this[ce+Ke]=(oe/vt>>0)-Ze&255;return ce+ue},c.prototype.writeInt8=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,1,127,-128),oe<0&&(oe=255+oe+1),this[ce]=oe&255,ce+1},c.prototype.writeInt16LE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,2,32767,-32768),this[ce]=oe&255,this[ce+1]=oe>>>8,ce+2},c.prototype.writeInt16BE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,2,32767,-32768),this[ce]=oe>>>8,this[ce+1]=oe&255,ce+2},c.prototype.writeInt32LE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,4,2147483647,-2147483648),this[ce]=oe&255,this[ce+1]=oe>>>8,this[ce+2]=oe>>>16,this[ce+3]=oe>>>24,ce+4},c.prototype.writeInt32BE=function(oe,ce,ue){return oe=+oe,ce=ce>>>0,ue||ie(this,oe,ce,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ce]=oe>>>24,this[ce+1]=oe>>>16,this[ce+2]=oe>>>8,this[ce+3]=oe&255,ce+4};function we(be,oe,ce,ue,Re,Xe){if(ce+ue>be.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function Te(be,oe,ce,ue,Re){return oe=+oe,ce=ce>>>0,Re||we(be,oe,ce,4),s.write(be,oe,ce,ue,23,4),ce+4}c.prototype.writeFloatLE=function(oe,ce,ue){return Te(this,oe,ce,!0,ue)},c.prototype.writeFloatBE=function(oe,ce,ue){return Te(this,oe,ce,!1,ue)};function he(be,oe,ce,ue,Re){return oe=+oe,ce=ce>>>0,Re||we(be,oe,ce,8),s.write(be,oe,ce,ue,52,8),ce+8}c.prototype.writeDoubleLE=function(oe,ce,ue){return he(this,oe,ce,!0,ue)},c.prototype.writeDoubleBE=function(oe,ce,ue){return he(this,oe,ce,!1,ue)},c.prototype.copy=function(oe,ce,ue,Re){if(!c.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Re&&Re!==0&&(Re=this.length),ce>=oe.length&&(ce=oe.length),ce||(ce=0),Re>0&&Re<ue&&(Re=ue),Re===ue||oe.length===0||this.length===0)return 0;if(ce<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),oe.length-ce<Re-ue&&(Re=oe.length-ce+ue);var Xe=Re-ue;if(this===oe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ce,ue,Re);else if(this===oe&&ue<ce&&ce<Re)for(var Ke=Xe-1;Ke>=0;--Ke)oe[Ke+ce]=this[Ke+ue];else Uint8Array.prototype.set.call(oe,this.subarray(ue,Re),ce);return Xe},c.prototype.fill=function(oe,ce,ue,Re){if(typeof oe=="string"){if(typeof ce=="string"?(Re=ce,ce=0,ue=this.length):typeof ue=="string"&&(Re=ue,ue=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!c.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(oe.length===1){var Xe=oe.charCodeAt(0);(Re==="utf8"&&Xe<128||Re==="latin1")&&(oe=Xe)}}else typeof oe=="number"&&(oe=oe&255);if(ce<0||this.length<ce||this.length<ue)throw new RangeError("Out of range index");if(ue<=ce)return this;ce=ce>>>0,ue=ue===void 0?this.length:ue>>>0,oe||(oe=0);var Ke;if(typeof oe=="number")for(Ke=ce;Ke<ue;++Ke)this[Ke]=oe;else{var vt=c.isBuffer(oe)?oe:c.from(oe,Re),Ze=vt.length;if(Ze===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(Ke=0;Ke<ue-ce;++Ke)this[Ke+ce]=vt[Ke%Ze]}return this};var xe=/[^+/0-9A-Za-z-_]/g;function Se(be){if(be=be.split("=")[0],be=be.trim().replace(xe,""),be.length<2)return"";for(;be.length%4!=0;)be=be+"=";return be}function ye(be){return be<16?"0"+be.toString(16):be.toString(16)}function re(be,oe){oe=oe||1/0;for(var ce,ue=be.length,Re=null,Xe=[],Ke=0;Ke<ue;++Ke){if(ce=be.charCodeAt(Ke),ce>55295&&ce<57344){if(!Re){if(ce>56319){(oe-=3)>-1&&Xe.push(239,191,189);continue}else if(Ke+1===ue){(oe-=3)>-1&&Xe.push(239,191,189);continue}Re=ce;continue}if(ce<56320){(oe-=3)>-1&&Xe.push(239,191,189),Re=ce;continue}ce=(Re-55296<<10|ce-56320)+65536}else Re&&(oe-=3)>-1&&Xe.push(239,191,189);if(Re=null,ce<128){if((oe-=1)<0)break;Xe.push(ce)}else if(ce<2048){if((oe-=2)<0)break;Xe.push(ce>>6|192,ce&63|128)}else if(ce<65536){if((oe-=3)<0)break;Xe.push(ce>>12|224,ce>>6&63|128,ce&63|128)}else if(ce<1114112){if((oe-=4)<0)break;Xe.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,ce&63|128)}else throw new Error("Invalid code point")}return Xe}function se(be){for(var oe=[],ce=0;ce<be.length;++ce)oe.push(be.charCodeAt(ce)&255);return oe}function de(be,oe){for(var ce,ue,Re,Xe=[],Ke=0;Ke<be.length&&!((oe-=2)<0);++Ke)ce=be.charCodeAt(Ke),ue=ce>>8,Re=ce%256,Xe.push(Re),Xe.push(ue);return Xe}function Me(be){return i.toByteArray(Se(be))}function Ie(be,oe,ce,ue){for(var Re=0;Re<ue&&!(Re+ce>=oe.length||Re>=be.length);++Re)oe[Re+ce]=be[Re];return Re}function Ee(be,oe){return be instanceof oe||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===oe.name}function qe(be){return be!==be}}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(r,a,n){n.read=function(o,i,s,l,u){var f,c,h=u*8-l-1,v=(1<<h)-1,p=v>>1,d=-7,g=s?u-1:0,m=s?-1:1,y=o[i+g];for(g+=m,f=y&(1<<-d)-1,y>>=-d,d+=h;d>0;f=f*256+o[i+g],g+=m,d-=8);for(c=f&(1<<-d)-1,f>>=-d,d+=l;d>0;c=c*256+o[i+g],g+=m,d-=8);if(f===0)f=1-p;else{if(f===v)return c?NaN:(y?-1:1)*(1/0);c=c+Math.pow(2,l),f=f-p}return(y?-1:1)*c*Math.pow(2,f-l)},n.write=function(o,i,s,l,u,f){var c,h,v,p=f*8-u-1,d=(1<<p)-1,g=d>>1,m=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=l?0:f-1,_=l?1:-1,S=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,c=d):(c=Math.floor(Math.log(i)/Math.LN2),i*(v=Math.pow(2,-c))<1&&(c--,v*=2),c+g>=1?i+=m/v:i+=m*Math.pow(2,1-g),i*v>=2&&(c++,v/=2),c+g>=d?(h=0,c=d):c+g>=1?(h=(i*v-1)*Math.pow(2,u),c=c+g):(h=i*Math.pow(2,g-1)*Math.pow(2,u),c=0));u>=8;o[s+y]=h&255,y+=_,h/=256,u-=8);for(c=c<<u|h,p+=u;p>0;o[s+y]=c&255,y+=_,c/=256,p-=8);o[s+y-_]|=S*128}},{}],5:[function(r,a,n){var o=a.exports={},i,s;function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=l}catch{i=l}try{typeof clearTimeout=="function"?s=clearTimeout:s=u}catch{s=u}})();function f(S){if(i===setTimeout)return setTimeout(S,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(S,0);try{return i(S,0)}catch{try{return i.call(null,S,0)}catch{return i.call(this,S,0)}}}function c(S){if(s===clearTimeout)return clearTimeout(S);if((s===u||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(S);try{return s(S)}catch{try{return s.call(null,S)}catch{return s.call(this,S)}}}var h=[],v=!1,p,d=-1;function g(){!v||!p||(v=!1,p.length?h=p.concat(h):d=-1,h.length&&m())}function m(){if(!v){var S=f(g);v=!0;for(var M=h.length;M;){for(p=h,h=[];++d<M;)p&&p[d].run();d=-1,M=h.length}p=null,v=!1,c(S)}}o.nextTick=function(S){var M=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)M[w-1]=arguments[w];h.push(new y(S,M)),h.length===1&&!v&&f(m)};function y(S,M){this.fun=S,this.array=M}y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function _(){}o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(S){return[]},o.binding=function(S){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(S){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],6:[function(r,a,n){a.exports={alpha_shape:r("alpha-shape"),convex_hull:r("convex-hull"),delaunay_triangulate:r("delaunay-triangulate"),gl_cone3d:r("gl-cone3d"),gl_error3d:r("gl-error3d"),gl_heatmap2d:r("gl-heatmap2d"),gl_line3d:r("gl-line3d"),gl_mesh3d:r("gl-mesh3d"),gl_plot2d:r("gl-plot2d"),gl_plot3d:r("gl-plot3d"),gl_pointcloud2d:r("gl-pointcloud2d"),gl_scatter3d:r("gl-scatter3d"),gl_select_box:r("gl-select-box"),gl_spikes2d:r("gl-spikes2d"),gl_streamtube3d:r("gl-streamtube3d"),gl_surface3d:r("gl-surface3d"),ndarray:r("ndarray"),ndarray_linear_interpolate:r("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(r,a,n){a.exports=f;var o=r("turntable-camera-controller"),i=r("orbit-camera-controller"),s=r("matrix-camera-controller");function l(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(v){return c[v]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=l.prototype;u.flush=function(c){for(var h=this._controllerList,v=0;v<h.length;++v)h[v].flush(c)},u.idle=function(c){for(var h=this._controllerList,v=0;v<h.length;++v)h[v].idle(c)},u.lookAt=function(c,h,v,p){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].lookAt(c,h,v,p)},u.rotate=function(c,h,v,p){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].rotate(c,h,v,p)},u.pan=function(c,h,v,p){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].pan(c,h,v,p)},u.translate=function(c,h,v,p){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].translate(c,h,v,p)},u.setMatrix=function(c,h){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].setMatrix(c,h)},u.setDistanceLimits=function(c,h){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].setDistanceLimits(c,h)},u.setDistance=function(c,h){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].setDistance(c,h)},u.recalcMatrix=function(c){this._active.recalcMatrix(c)},u.getDistance=function(c){return this._active.getDistance(c)},u.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},u.lastT=function(){return this._active.lastT()},u.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var v=this._active,p=this._controllerList[h],d=Math.max(v.lastT(),p.lastT());v.recalcMatrix(d),p.setMatrix(d,v.computedMatrix),this._active=p,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode};function f(c){c=c||{};var h=c.eye||[0,0,1],v=c.center||[0,0,0],p=c.up||[0,1,0],d=c.distanceLimits||[0,1/0],g=c.mode||"turntable",m=o(),y=i(),_=s();return m.setDistanceLimits(d[0],d[1]),m.lookAt(0,h,v,p),y.setDistanceLimits(d[0],d[1]),y.lookAt(0,h,v,p),_.setDistanceLimits(d[0],d[1]),_.lookAt(0,h,v,p),new l({turntable:m,orbit:y,matrix:_},g)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(r,a,n){var o=typeof WeakMap=="undefined"?r("weak-map"):WeakMap,i=r("gl-buffer"),s=r("gl-vao"),l=new o;function u(f){var c=l.get(f),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!f.isBuffer(h)){var v=i(f,new Float32Array([-1,-1,-1,4,4,-1]));c=s(f,[{buffer:v,type:f.FLOAT,size:2}]),c._triangleBuffer=v,l.set(f,c)}c.bind(),f.drawArrays(f.TRIANGLES,0,3),c.unbind()}a.exports=u},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(r,a,n){var o=r("pad-left");a.exports=i;function i(s,l,u){l=typeof l=="number"?l:1,u=u||": ";var f=s.split(/\r?\n/),c=String(f.length+l-1).length;return f.map(function(h,v){var p=v+l,d=String(p).length,g=o(p,c-d);return g+u+h}).join(`
`)}},{"pad-left":264}],10:[function(r,a,n){a.exports=s;var o=r("robust-orientation");function i(l,u){for(var f=new Array(u+1),c=0;c<l.length;++c)f[c]=l[c];for(var c=0;c<=l.length;++c){for(var h=l.length;h<=u;++h){for(var v=new Array(u),p=0;p<u;++p)v[p]=Math.pow(h+1-c,p);f[h]=v}var d=o.apply(void 0,f);if(d)return!0}return!1}function s(l){var u=l.length;if(u===0)return[];if(u===1)return[0];for(var f=l[0].length,c=[l[0]],h=[0],v=1;v<u;++v){if(c.push(l[v]),!i(c,f)){c.pop();continue}if(h.push(v),h.length===f+1)return h}return h}},{"robust-orientation":284}],11:[function(r,a,n){a.exports=s;var o=r("delaunay-triangulate"),i=r("circumradius");function s(l,u){return o(u).filter(function(f){for(var c=new Array(f.length),h=0;h<f.length;++h)c[h]=u[f[h]];return i(c)*l<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(r,a,n){a.exports=s;var o=r("alpha-complex"),i=r("simplicial-complex-boundary");function s(l,u){return i(o(l,u))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(r,a,n){a.exports=function(i){return atob(i)}},{}],14:[function(r,a,n){a.exports=s;var o=r("robust-linear-solve");function i(l){for(var u=0,f=0;f<l.length;++f)u+=l[f];return u}function s(l,u){for(var f=u.length,c=new Array(f+1),h=0;h<f;++h){for(var v=new Array(f+1),p=0;p<=f;++p)v[p]=l[p][h];c[h]=v}c[f]=new Array(f+1);for(var h=0;h<=f;++h)c[f][h]=1;for(var d=new Array(f+1),h=0;h<f;++h)d[h]=u[h];d[f]=1;var g=o(c,d),m=i(g[f+1]);m===0&&(m=1);for(var y=new Array(f+1),h=0;h<=f;++h)y[h]=i(g[h])/m;return y}},{"robust-linear-solve":283}],15:[function(r,a,n){var o=r("./lib/rationalize");a.exports=i;function i(s,l){return o(s[0].mul(l[1]).add(l[0].mul(s[1])),s[1].mul(l[1]))}},{"./lib/rationalize":25}],16:[function(r,a,n){a.exports=o;function o(i,s){return i[0].mul(s[1]).cmp(s[0].mul(i[1]))}},{}],17:[function(r,a,n){var o=r("./lib/rationalize");a.exports=i;function i(s,l){return o(s[0].mul(l[1]),s[1].mul(l[0]))}},{"./lib/rationalize":25}],18:[function(r,a,n){var o=r("./is-rat"),i=r("./lib/is-bn"),s=r("./lib/num-to-bn"),l=r("./lib/str-to-bn"),u=r("./lib/rationalize"),f=r("./div");a.exports=c;function c(h,v){if(o(h))return v?f(h,c(v)):[h[0].clone(),h[1].clone()];var p=0,d,g;if(i(h))d=h.clone();else if(typeof h=="string")d=l(h);else{if(h===0)return[s(0),s(1)];if(h===Math.floor(h))d=s(h);else{for(;h!==Math.floor(h);)h=h*Math.pow(2,256),p-=256;d=s(h)}}if(o(v))d.mul(v[1]),g=v[0].clone();else if(i(v))g=v.clone();else if(typeof v=="string")g=l(v);else if(!v)g=s(1);else if(v===Math.floor(v))g=s(v);else{for(;v!==Math.floor(v);)v=v*Math.pow(2,256),p+=256;g=s(v)}return p>0?d=d.ushln(p):p<0&&(g=g.ushln(-p)),u(d,g)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(r,a,n){var o=r("./lib/is-bn");a.exports=i;function i(s){return Array.isArray(s)&&s.length===2&&o(s[0])&&o(s[1])}},{"./lib/is-bn":23}],20:[function(r,a,n){var o=r("bn.js");a.exports=i;function i(s){return s.cmp(new o(0))}},{"bn.js":33}],21:[function(r,a,n){var o=r("./bn-sign");a.exports=i;function i(s){var l=s.length,u=s.words,f=0;if(l===1)f=u[0];else if(l===2)f=u[0]+u[1]*67108864;else for(var c=0;c<l;c++){var h=u[c];f+=h*Math.pow(67108864,c)}return o(s)*f}},{"./bn-sign":20}],22:[function(r,a,n){var o=r("double-bits"),i=r("bit-twiddle").countTrailingZeros;a.exports=s;function s(l){var u=i(o.lo(l));if(u<32)return u;var f=i(o.hi(l));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(r,a,n){r("bn.js"),a.exports=o;function o(i){return i&&typeof i=="object"&&Boolean(i.words)}},{"bn.js":33}],24:[function(r,a,n){var o=r("bn.js"),i=r("double-bits");a.exports=s;function s(l){var u=i.exponent(l);return u<52?new o(l):new o(l*Math.pow(2,52-u)).ushln(u-52)}},{"bn.js":33,"double-bits":64}],25:[function(r,a,n){var o=r("./num-to-bn"),i=r("./bn-sign");a.exports=s;function s(l,u){var f=i(l),c=i(u);if(f===0)return[o(0),o(1)];if(c===0)return[o(0),o(0)];c<0&&(l=l.neg(),u=u.neg());var h=l.gcd(u);return h.cmpn(1)?[l.div(h),u.div(h)]:[l,u]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(r,a,n){var o=r("bn.js");a.exports=i;function i(s){return new o(s)}},{"bn.js":33}],27:[function(r,a,n){var o=r("./lib/rationalize");a.exports=i;function i(s,l){return o(s[0].mul(l[0]),s[1].mul(l[1]))}},{"./lib/rationalize":25}],28:[function(r,a,n){var o=r("./lib/bn-sign");a.exports=i;function i(s){return o(s[0])*o(s[1])}},{"./lib/bn-sign":20}],29:[function(r,a,n){var o=r("./lib/rationalize");a.exports=i;function i(s,l){return o(s[0].mul(l[1]).sub(s[1].mul(l[0])),s[1].mul(l[1]))}},{"./lib/rationalize":25}],30:[function(r,a,n){var o=r("./lib/bn-to-num"),i=r("./lib/ctz");a.exports=s;function s(l){var u=l[0],f=l[1];if(u.cmpn(0)===0)return 0;var c=u.abs().divmod(f.abs()),h=c.div,v=o(h),p=c.mod,d=u.negative!==f.negative?-1:1;if(p.cmpn(0)===0)return d*v;if(v){var g=i(v)+4,m=o(p.ushln(g).divRound(f));return d*(v+m*Math.pow(2,-g))}else{var y=f.bitLength()-p.bitLength()+53,m=o(p.ushln(y).divRound(f));return y<1023?d*m*Math.pow(2,-y):(m*=Math.pow(2,-1023),d*m*Math.pow(2,1023-y))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(r,a,n){function o(c,h,v,p,d){for(var g=d+1;p<=d;){var m=p+d>>>1,y=c[m],_=v!==void 0?v(y,h):y-h;_>=0?(g=m,d=m-1):p=m+1}return g}function i(c,h,v,p,d){for(var g=d+1;p<=d;){var m=p+d>>>1,y=c[m],_=v!==void 0?v(y,h):y-h;_>0?(g=m,d=m-1):p=m+1}return g}function s(c,h,v,p,d){for(var g=p-1;p<=d;){var m=p+d>>>1,y=c[m],_=v!==void 0?v(y,h):y-h;_<0?(g=m,p=m+1):d=m-1}return g}function l(c,h,v,p,d){for(var g=p-1;p<=d;){var m=p+d>>>1,y=c[m],_=v!==void 0?v(y,h):y-h;_<=0?(g=m,p=m+1):d=m-1}return g}function u(c,h,v,p,d){for(;p<=d;){var g=p+d>>>1,m=c[g],y=v!==void 0?v(m,h):m-h;if(y===0)return g;y<=0?p=g+1:d=g-1}return-1}function f(c,h,v,p,d,g){return typeof v=="function"?g(c,h,v,p===void 0?0:p|0,d===void 0?c.length-1:d|0):g(c,h,void 0,v===void 0?0:v|0,p===void 0?c.length-1:p|0)}a.exports={ge:function(c,h,v,p,d){return f(c,h,v,p,d,o)},gt:function(c,h,v,p,d){return f(c,h,v,p,d,i)},lt:function(c,h,v,p,d){return f(c,h,v,p,d,s)},le:function(c,h,v,p,d){return f(c,h,v,p,d,l)},eq:function(c,h,v,p,d){return f(c,h,v,p,d,u)}}},{}],32:[function(r,a,n){var o=32;n.INT_BITS=o,n.INT_MAX=2147483647,n.INT_MIN=-1<<o-1,n.sign=function(l){return(l>0)-(l<0)},n.abs=function(l){var u=l>>o-1;return(l^u)-u},n.min=function(l,u){return u^(l^u)&-(l<u)},n.max=function(l,u){return l^(l^u)&-(l<u)},n.isPow2=function(l){return!(l&l-1)&&!!l},n.log2=function(l){var u,f;return u=(l>65535)<<4,l>>>=u,f=(l>255)<<3,l>>>=f,u|=f,f=(l>15)<<2,l>>>=f,u|=f,f=(l>3)<<1,l>>>=f,u|=f,u|l>>1},n.log10=function(l){return l>=1e9?9:l>=1e8?8:l>=1e7?7:l>=1e6?6:l>=1e5?5:l>=1e4?4:l>=1e3?3:l>=100?2:l>=10?1:0},n.popCount=function(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),(l+(l>>>4)&252645135)*16843009>>>24};function i(l){var u=32;return l&=-l,l&&u--,l&65535&&(u-=16),l&16711935&&(u-=8),l&252645135&&(u-=4),l&858993459&&(u-=2),l&1431655765&&(u-=1),u}n.countTrailingZeros=i,n.nextPow2=function(l){return l+=l===0,--l,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l+1},n.prevPow2=function(l){return l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l-(l>>>1)},n.parity=function(l){return l^=l>>>16,l^=l>>>8,l^=l>>>4,l&=15,27030>>>l&1};var s=new Array(256);(function(l){for(var u=0;u<256;++u){var f=u,c=u,h=7;for(f>>>=1;f;f>>>=1)c<<=1,c|=f&1,--h;l[u]=c<<h&255}})(s),n.reverse=function(l){return s[l&255]<<24|s[l>>>8&255]<<16|s[l>>>16&255]<<8|s[l>>>24&255]},n.interleave2=function(l,u){return l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,l|u<<1},n.deinterleave2=function(l,u){return l=l>>>u&1431655765,l=(l|l>>>1)&858993459,l=(l|l>>>2)&252645135,l=(l|l>>>4)&16711935,l=(l|l>>>16)&65535,l<<16>>16},n.interleave3=function(l,u,f){return l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,l|=u<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,l|f<<2},n.deinterleave3=function(l,u){return l=l>>>u&1227133513,l=(l|l>>>2)&3272356035,l=(l|l>>>4)&251719695,l=(l|l>>>8)&4278190335,l=(l|l>>>16)&1023,l<<22>>22},n.nextCombination=function(l){var u=l|l-1;return u+1|(~u&-~u)-1>>>i(l)+1}},{}],33:[function(r,a,n){(function(o,i){function s(N,D){if(!N)throw new Error(D||"Assertion failed")}function l(N,D){N.super_=D;var O=function(){};O.prototype=D.prototype,N.prototype=new O,N.prototype.constructor=N}function u(N,D,O){if(u.isBN(N))return N;this.negative=0,this.words=null,this.length=0,this.red=null,N!==null&&((D==="le"||D==="be")&&(O=D,D=10),this._init(N||0,D||10,O||"be"))}typeof o=="object"?o.exports=u:i.BN=u,u.BN=u,u.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=r("buffer").Buffer}catch{}u.isBN=function(D){return D instanceof u?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===u.wordSize&&Array.isArray(D.words)},u.max=function(D,O){return D.cmp(O)>0?D:O},u.min=function(D,O){return D.cmp(O)<0?D:O},u.prototype._init=function(D,O,$){if(typeof D=="number")return this._initNumber(D,O,$);if(typeof D=="object")return this._initArray(D,O,$);O==="hex"&&(O=16),s(O===(O|0)&&O>=2&&O<=36),D=D.toString().replace(/\s+/g,"");var Y=0;D[0]==="-"&&(Y++,this.negative=1),Y<D.length&&(O===16?this._parseHex(D,Y,$):(this._parseBase(D,O,Y),$==="le"&&this._initArray(this.toArray(),O,$)))},u.prototype._initNumber=function(D,O,$){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(s(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),O,$)},u.prototype._initArray=function(D,O,$){if(s(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var X,ee,Q=0;if($==="be")for(Y=D.length-1,X=0;Y>=0;Y-=3)ee=D[Y]|D[Y-1]<<8|D[Y-2]<<16,this.words[X]|=ee<<Q&67108863,this.words[X+1]=ee>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,X++);else if($==="le")for(Y=0,X=0;Y<D.length;Y+=3)ee=D[Y]|D[Y+1]<<8|D[Y+2]<<16,this.words[X]|=ee<<Q&67108863,this.words[X+1]=ee>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,X++);return this.strip()};function c(N,D){var O=N.charCodeAt(D);return O>=65&&O<=70?O-55:O>=97&&O<=102?O-87:O-48&15}function h(N,D,O){var $=c(N,O);return O-1>=D&&($|=c(N,O-1)<<4),$}u.prototype._parseHex=function(D,O,$){this.length=Math.ceil((D.length-O)/6),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var X=0,ee=0,Q;if($==="be")for(Y=D.length-1;Y>=O;Y-=2)Q=h(D,O,Y)<<X,this.words[ee]|=Q&67108863,X>=18?(X-=18,ee+=1,this.words[ee]|=Q>>>26):X+=8;else{var Z=D.length-O;for(Y=Z%2==0?O+1:O;Y<D.length;Y+=2)Q=h(D,O,Y)<<X,this.words[ee]|=Q&67108863,X>=18?(X-=18,ee+=1,this.words[ee]|=Q>>>26):X+=8}this.strip()};function v(N,D,O,$){for(var Y=0,X=Math.min(N.length,O),ee=D;ee<X;ee++){var Q=N.charCodeAt(ee)-48;Y*=$,Q>=49?Y+=Q-49+10:Q>=17?Y+=Q-17+10:Y+=Q}return Y}u.prototype._parseBase=function(D,O,$){this.words=[0],this.length=1;for(var Y=0,X=1;X<=67108863;X*=O)Y++;Y--,X=X/O|0;for(var ee=D.length-$,Q=ee%Y,Z=Math.min(ee,ee-Q)+$,q=0,ae=$;ae<Z;ae+=Y)q=v(D,ae,ae+Y,O),this.imuln(X),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(Q!==0){var ie=1;for(q=v(D,ae,D.length,O),ae=0;ae<Q;ae++)ie*=O;this.imuln(ie),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this.strip()},u.prototype.copy=function(D){D.words=new Array(this.length);for(var O=0;O<this.length;O++)D.words[O]=this.words[O];D.length=this.length,D.negative=this.negative,D.red=this.red},u.prototype.clone=function(){var D=new u(null);return this.copy(D),D},u.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},u.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];u.prototype.toString=function(D,O){D=D||10,O=O|0||1;var $;if(D===16||D==="hex"){$="";for(var Y=0,X=0,ee=0;ee<this.length;ee++){var Q=this.words[ee],Z=((Q<<Y|X)&16777215).toString(16);X=Q>>>24-Y&16777215,X!==0||ee!==this.length-1?$=p[6-Z.length]+Z+$:$=Z+$,Y+=2,Y>=26&&(Y-=26,ee--)}for(X!==0&&($=X.toString(16)+$);$.length%O!=0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(D===(D|0)&&D>=2&&D<=36){var q=d[D],ae=g[D];$="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var we=ie.modn(ae).toString(D);ie=ie.idivn(ae),ie.isZero()?$=we+$:$=p[q-we.length]+we+$}for(this.isZero()&&($="0"+$);$.length%O!=0;)$="0"+$;return this.negative!==0&&($="-"+$),$}s(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(D,O){return s(typeof f!="undefined"),this.toArrayLike(f,D,O)},u.prototype.toArray=function(D,O){return this.toArrayLike(Array,D,O)},u.prototype.toArrayLike=function(D,O,$){var Y=this.byteLength(),X=$||Math.max(1,Y);s(Y<=X,"byte array longer than desired length"),s(X>0,"Requested array length <= 0"),this.strip();var ee=O==="le",Q=new D(X),Z,q,ae=this.clone();if(ee){for(q=0;!ae.isZero();q++)Z=ae.andln(255),ae.iushrn(8),Q[q]=Z;for(;q<X;q++)Q[q]=0}else{for(q=0;q<X-Y;q++)Q[q]=0;for(q=0;!ae.isZero();q++)Z=ae.andln(255),ae.iushrn(8),Q[X-q-1]=Z}return Q},Math.clz32?u.prototype._countBits=function(D){return 32-Math.clz32(D)}:u.prototype._countBits=function(D){var O=D,$=0;return O>=4096&&($+=13,O>>>=13),O>=64&&($+=7,O>>>=7),O>=8&&($+=4,O>>>=4),O>=2&&($+=2,O>>>=2),$+O},u.prototype._zeroBits=function(D){if(D===0)return 26;var O=D,$=0;return(O&8191)==0&&($+=13,O>>>=13),(O&127)==0&&($+=7,O>>>=7),(O&15)==0&&($+=4,O>>>=4),(O&3)==0&&($+=2,O>>>=2),(O&1)==0&&$++,$},u.prototype.bitLength=function(){var D=this.words[this.length-1],O=this._countBits(D);return(this.length-1)*26+O};function m(N){for(var D=new Array(N.bitLength()),O=0;O<D.length;O++){var $=O/26|0,Y=O%26;D[O]=(N.words[$]&1<<Y)>>>Y}return D}u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,O=0;O<this.length;O++){var $=this._zeroBits(this.words[O]);if(D+=$,$!==26)break}return D},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},u.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return this.negative!==0},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var O=0;O<D.length;O++)this.words[O]=this.words[O]|D.words[O];return this.strip()},u.prototype.ior=function(D){return s((this.negative|D.negative)==0),this.iuor(D)},u.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},u.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},u.prototype.iuand=function(D){var O;this.length>D.length?O=D:O=this;for(var $=0;$<O.length;$++)this.words[$]=this.words[$]&D.words[$];return this.length=O.length,this.strip()},u.prototype.iand=function(D){return s((this.negative|D.negative)==0),this.iuand(D)},u.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},u.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},u.prototype.iuxor=function(D){var O,$;this.length>D.length?(O=this,$=D):(O=D,$=this);for(var Y=0;Y<$.length;Y++)this.words[Y]=O.words[Y]^$.words[Y];if(this!==O)for(;Y<O.length;Y++)this.words[Y]=O.words[Y];return this.length=O.length,this.strip()},u.prototype.ixor=function(D){return s((this.negative|D.negative)==0),this.iuxor(D)},u.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},u.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},u.prototype.inotn=function(D){s(typeof D=="number"&&D>=0);var O=Math.ceil(D/26)|0,$=D%26;this._expand(O),$>0&&O--;for(var Y=0;Y<O;Y++)this.words[Y]=~this.words[Y]&67108863;return $>0&&(this.words[Y]=~this.words[Y]&67108863>>26-$),this.strip()},u.prototype.notn=function(D){return this.clone().inotn(D)},u.prototype.setn=function(D,O){s(typeof D=="number"&&D>=0);var $=D/26|0,Y=D%26;return this._expand($+1),O?this.words[$]=this.words[$]|1<<Y:this.words[$]=this.words[$]&~(1<<Y),this.strip()},u.prototype.iadd=function(D){var O;if(this.negative!==0&&D.negative===0)return this.negative=0,O=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,O=this.isub(D),D.negative=1,O._normSign();var $,Y;this.length>D.length?($=this,Y=D):($=D,Y=this);for(var X=0,ee=0;ee<Y.length;ee++)O=($.words[ee]|0)+(Y.words[ee]|0)+X,this.words[ee]=O&67108863,X=O>>>26;for(;X!==0&&ee<$.length;ee++)O=($.words[ee]|0)+X,this.words[ee]=O&67108863,X=O>>>26;if(this.length=$.length,X!==0)this.words[this.length]=X,this.length++;else if($!==this)for(;ee<$.length;ee++)this.words[ee]=$.words[ee];return this},u.prototype.add=function(D){var O;return D.negative!==0&&this.negative===0?(D.negative=0,O=this.sub(D),D.negative^=1,O):D.negative===0&&this.negative!==0?(this.negative=0,O=D.sub(this),this.negative=1,O):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},u.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var O=this.iadd(D);return D.negative=1,O._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var $=this.cmp(D);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Y,X;$>0?(Y=this,X=D):(Y=D,X=this);for(var ee=0,Q=0;Q<X.length;Q++)O=(Y.words[Q]|0)-(X.words[Q]|0)+ee,ee=O>>26,this.words[Q]=O&67108863;for(;ee!==0&&Q<Y.length;Q++)O=(Y.words[Q]|0)+ee,ee=O>>26,this.words[Q]=O&67108863;if(ee===0&&Q<Y.length&&Y!==this)for(;Q<Y.length;Q++)this.words[Q]=Y.words[Q];return this.length=Math.max(this.length,Q),Y!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(D){return this.clone().isub(D)};function y(N,D,O){O.negative=D.negative^N.negative;var $=N.length+D.length|0;O.length=$,$=$-1|0;var Y=N.words[0]|0,X=D.words[0]|0,ee=Y*X,Q=ee&67108863,Z=ee/67108864|0;O.words[0]=Q;for(var q=1;q<$;q++){for(var ae=Z>>>26,ie=Z&67108863,we=Math.min(q,D.length-1),Te=Math.max(0,q-N.length+1);Te<=we;Te++){var he=q-Te|0;Y=N.words[he]|0,X=D.words[Te]|0,ee=Y*X+ie,ae+=ee/67108864|0,ie=ee&67108863}O.words[q]=ie|0,Z=ae|0}return Z!==0?O.words[q]=Z|0:O.length--,O.strip()}var _=function(D,O,$){var Y=D.words,X=O.words,ee=$.words,Q=0,Z,q,ae,ie=Y[0]|0,we=ie&8191,Te=ie>>>13,he=Y[1]|0,xe=he&8191,Se=he>>>13,ye=Y[2]|0,re=ye&8191,se=ye>>>13,de=Y[3]|0,Me=de&8191,Ie=de>>>13,Ee=Y[4]|0,qe=Ee&8191,be=Ee>>>13,oe=Y[5]|0,ce=oe&8191,ue=oe>>>13,Re=Y[6]|0,Xe=Re&8191,Ke=Re>>>13,vt=Y[7]|0,Ze=vt&8191,Qe=vt>>>13,Je=Y[8]|0,je=Je&8191,$e=Je>>>13,Ye=Y[9]|0,yt=Ye&8191,_t=Ye>>>13,Pt=X[0]|0,Tt=Pt&8191,Ot=Pt>>>13,qt=X[1]|0,Xt=qt&8191,Or=qt>>>13,Br=X[2]|0,Qr=Br&8191,Sr=Br>>>13,Zr=X[3]|0,Oe=Zr&8191,it=Zr>>>13,ft=X[4]|0,pt=ft&8191,Dt=ft>>>13,Nt=X[5]|0,hr=Nt&8191,fr=Nt>>>13,vr=X[6]|0,Ut=vr&8191,Fr=vr>>>13,sa=X[7]|0,$r=sa&8191,Ca=sa>>>13,on=X[8]|0,Fa=on&8191,jr=on>>>13,Rn=X[9]|0,xa=Rn&8191,ia=Rn>>>13;$.negative=D.negative^O.negative,$.length=19,Z=Math.imul(we,Tt),q=Math.imul(we,Ot),q=q+Math.imul(Te,Tt)|0,ae=Math.imul(Te,Ot);var vn=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(vn>>>26)|0,vn&=67108863,Z=Math.imul(xe,Tt),q=Math.imul(xe,Ot),q=q+Math.imul(Se,Tt)|0,ae=Math.imul(Se,Ot),Z=Z+Math.imul(we,Xt)|0,q=q+Math.imul(we,Or)|0,q=q+Math.imul(Te,Xt)|0,ae=ae+Math.imul(Te,Or)|0;var ka=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(ka>>>26)|0,ka&=67108863,Z=Math.imul(re,Tt),q=Math.imul(re,Ot),q=q+Math.imul(se,Tt)|0,ae=Math.imul(se,Ot),Z=Z+Math.imul(xe,Xt)|0,q=q+Math.imul(xe,Or)|0,q=q+Math.imul(Se,Xt)|0,ae=ae+Math.imul(Se,Or)|0,Z=Z+Math.imul(we,Qr)|0,q=q+Math.imul(we,Sr)|0,q=q+Math.imul(Te,Qr)|0,ae=ae+Math.imul(Te,Sr)|0;var Ge=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,Z=Math.imul(Me,Tt),q=Math.imul(Me,Ot),q=q+Math.imul(Ie,Tt)|0,ae=Math.imul(Ie,Ot),Z=Z+Math.imul(re,Xt)|0,q=q+Math.imul(re,Or)|0,q=q+Math.imul(se,Xt)|0,ae=ae+Math.imul(se,Or)|0,Z=Z+Math.imul(xe,Qr)|0,q=q+Math.imul(xe,Sr)|0,q=q+Math.imul(Se,Qr)|0,ae=ae+Math.imul(Se,Sr)|0,Z=Z+Math.imul(we,Oe)|0,q=q+Math.imul(we,it)|0,q=q+Math.imul(Te,Oe)|0,ae=ae+Math.imul(Te,it)|0;var Pe=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,Z=Math.imul(qe,Tt),q=Math.imul(qe,Ot),q=q+Math.imul(be,Tt)|0,ae=Math.imul(be,Ot),Z=Z+Math.imul(Me,Xt)|0,q=q+Math.imul(Me,Or)|0,q=q+Math.imul(Ie,Xt)|0,ae=ae+Math.imul(Ie,Or)|0,Z=Z+Math.imul(re,Qr)|0,q=q+Math.imul(re,Sr)|0,q=q+Math.imul(se,Qr)|0,ae=ae+Math.imul(se,Sr)|0,Z=Z+Math.imul(xe,Oe)|0,q=q+Math.imul(xe,it)|0,q=q+Math.imul(Se,Oe)|0,ae=ae+Math.imul(Se,it)|0,Z=Z+Math.imul(we,pt)|0,q=q+Math.imul(we,Dt)|0,q=q+Math.imul(Te,pt)|0,ae=ae+Math.imul(Te,Dt)|0;var Ne=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,Z=Math.imul(ce,Tt),q=Math.imul(ce,Ot),q=q+Math.imul(ue,Tt)|0,ae=Math.imul(ue,Ot),Z=Z+Math.imul(qe,Xt)|0,q=q+Math.imul(qe,Or)|0,q=q+Math.imul(be,Xt)|0,ae=ae+Math.imul(be,Or)|0,Z=Z+Math.imul(Me,Qr)|0,q=q+Math.imul(Me,Sr)|0,q=q+Math.imul(Ie,Qr)|0,ae=ae+Math.imul(Ie,Sr)|0,Z=Z+Math.imul(re,Oe)|0,q=q+Math.imul(re,it)|0,q=q+Math.imul(se,Oe)|0,ae=ae+Math.imul(se,it)|0,Z=Z+Math.imul(xe,pt)|0,q=q+Math.imul(xe,Dt)|0,q=q+Math.imul(Se,pt)|0,ae=ae+Math.imul(Se,Dt)|0,Z=Z+Math.imul(we,hr)|0,q=q+Math.imul(we,fr)|0,q=q+Math.imul(Te,hr)|0,ae=ae+Math.imul(Te,fr)|0;var We=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(We>>>26)|0,We&=67108863,Z=Math.imul(Xe,Tt),q=Math.imul(Xe,Ot),q=q+Math.imul(Ke,Tt)|0,ae=Math.imul(Ke,Ot),Z=Z+Math.imul(ce,Xt)|0,q=q+Math.imul(ce,Or)|0,q=q+Math.imul(ue,Xt)|0,ae=ae+Math.imul(ue,Or)|0,Z=Z+Math.imul(qe,Qr)|0,q=q+Math.imul(qe,Sr)|0,q=q+Math.imul(be,Qr)|0,ae=ae+Math.imul(be,Sr)|0,Z=Z+Math.imul(Me,Oe)|0,q=q+Math.imul(Me,it)|0,q=q+Math.imul(Ie,Oe)|0,ae=ae+Math.imul(Ie,it)|0,Z=Z+Math.imul(re,pt)|0,q=q+Math.imul(re,Dt)|0,q=q+Math.imul(se,pt)|0,ae=ae+Math.imul(se,Dt)|0,Z=Z+Math.imul(xe,hr)|0,q=q+Math.imul(xe,fr)|0,q=q+Math.imul(Se,hr)|0,ae=ae+Math.imul(Se,fr)|0,Z=Z+Math.imul(we,Ut)|0,q=q+Math.imul(we,Fr)|0,q=q+Math.imul(Te,Ut)|0,ae=ae+Math.imul(Te,Fr)|0;var lt=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(lt>>>26)|0,lt&=67108863,Z=Math.imul(Ze,Tt),q=Math.imul(Ze,Ot),q=q+Math.imul(Qe,Tt)|0,ae=Math.imul(Qe,Ot),Z=Z+Math.imul(Xe,Xt)|0,q=q+Math.imul(Xe,Or)|0,q=q+Math.imul(Ke,Xt)|0,ae=ae+Math.imul(Ke,Or)|0,Z=Z+Math.imul(ce,Qr)|0,q=q+Math.imul(ce,Sr)|0,q=q+Math.imul(ue,Qr)|0,ae=ae+Math.imul(ue,Sr)|0,Z=Z+Math.imul(qe,Oe)|0,q=q+Math.imul(qe,it)|0,q=q+Math.imul(be,Oe)|0,ae=ae+Math.imul(be,it)|0,Z=Z+Math.imul(Me,pt)|0,q=q+Math.imul(Me,Dt)|0,q=q+Math.imul(Ie,pt)|0,ae=ae+Math.imul(Ie,Dt)|0,Z=Z+Math.imul(re,hr)|0,q=q+Math.imul(re,fr)|0,q=q+Math.imul(se,hr)|0,ae=ae+Math.imul(se,fr)|0,Z=Z+Math.imul(xe,Ut)|0,q=q+Math.imul(xe,Fr)|0,q=q+Math.imul(Se,Ut)|0,ae=ae+Math.imul(Se,Fr)|0,Z=Z+Math.imul(we,$r)|0,q=q+Math.imul(we,Ca)|0,q=q+Math.imul(Te,$r)|0,ae=ae+Math.imul(Te,Ca)|0;var wt=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(wt>>>26)|0,wt&=67108863,Z=Math.imul(je,Tt),q=Math.imul(je,Ot),q=q+Math.imul($e,Tt)|0,ae=Math.imul($e,Ot),Z=Z+Math.imul(Ze,Xt)|0,q=q+Math.imul(Ze,Or)|0,q=q+Math.imul(Qe,Xt)|0,ae=ae+Math.imul(Qe,Or)|0,Z=Z+Math.imul(Xe,Qr)|0,q=q+Math.imul(Xe,Sr)|0,q=q+Math.imul(Ke,Qr)|0,ae=ae+Math.imul(Ke,Sr)|0,Z=Z+Math.imul(ce,Oe)|0,q=q+Math.imul(ce,it)|0,q=q+Math.imul(ue,Oe)|0,ae=ae+Math.imul(ue,it)|0,Z=Z+Math.imul(qe,pt)|0,q=q+Math.imul(qe,Dt)|0,q=q+Math.imul(be,pt)|0,ae=ae+Math.imul(be,Dt)|0,Z=Z+Math.imul(Me,hr)|0,q=q+Math.imul(Me,fr)|0,q=q+Math.imul(Ie,hr)|0,ae=ae+Math.imul(Ie,fr)|0,Z=Z+Math.imul(re,Ut)|0,q=q+Math.imul(re,Fr)|0,q=q+Math.imul(se,Ut)|0,ae=ae+Math.imul(se,Fr)|0,Z=Z+Math.imul(xe,$r)|0,q=q+Math.imul(xe,Ca)|0,q=q+Math.imul(Se,$r)|0,ae=ae+Math.imul(Se,Ca)|0,Z=Z+Math.imul(we,Fa)|0,q=q+Math.imul(we,jr)|0,q=q+Math.imul(Te,Fa)|0,ae=ae+Math.imul(Te,jr)|0;var Mt=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,Z=Math.imul(yt,Tt),q=Math.imul(yt,Ot),q=q+Math.imul(_t,Tt)|0,ae=Math.imul(_t,Ot),Z=Z+Math.imul(je,Xt)|0,q=q+Math.imul(je,Or)|0,q=q+Math.imul($e,Xt)|0,ae=ae+Math.imul($e,Or)|0,Z=Z+Math.imul(Ze,Qr)|0,q=q+Math.imul(Ze,Sr)|0,q=q+Math.imul(Qe,Qr)|0,ae=ae+Math.imul(Qe,Sr)|0,Z=Z+Math.imul(Xe,Oe)|0,q=q+Math.imul(Xe,it)|0,q=q+Math.imul(Ke,Oe)|0,ae=ae+Math.imul(Ke,it)|0,Z=Z+Math.imul(ce,pt)|0,q=q+Math.imul(ce,Dt)|0,q=q+Math.imul(ue,pt)|0,ae=ae+Math.imul(ue,Dt)|0,Z=Z+Math.imul(qe,hr)|0,q=q+Math.imul(qe,fr)|0,q=q+Math.imul(be,hr)|0,ae=ae+Math.imul(be,fr)|0,Z=Z+Math.imul(Me,Ut)|0,q=q+Math.imul(Me,Fr)|0,q=q+Math.imul(Ie,Ut)|0,ae=ae+Math.imul(Ie,Fr)|0,Z=Z+Math.imul(re,$r)|0,q=q+Math.imul(re,Ca)|0,q=q+Math.imul(se,$r)|0,ae=ae+Math.imul(se,Ca)|0,Z=Z+Math.imul(xe,Fa)|0,q=q+Math.imul(xe,jr)|0,q=q+Math.imul(Se,Fa)|0,ae=ae+Math.imul(Se,jr)|0,Z=Z+Math.imul(we,xa)|0,q=q+Math.imul(we,ia)|0,q=q+Math.imul(Te,xa)|0,ae=ae+Math.imul(Te,ia)|0;var It=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(It>>>26)|0,It&=67108863,Z=Math.imul(yt,Xt),q=Math.imul(yt,Or),q=q+Math.imul(_t,Xt)|0,ae=Math.imul(_t,Or),Z=Z+Math.imul(je,Qr)|0,q=q+Math.imul(je,Sr)|0,q=q+Math.imul($e,Qr)|0,ae=ae+Math.imul($e,Sr)|0,Z=Z+Math.imul(Ze,Oe)|0,q=q+Math.imul(Ze,it)|0,q=q+Math.imul(Qe,Oe)|0,ae=ae+Math.imul(Qe,it)|0,Z=Z+Math.imul(Xe,pt)|0,q=q+Math.imul(Xe,Dt)|0,q=q+Math.imul(Ke,pt)|0,ae=ae+Math.imul(Ke,Dt)|0,Z=Z+Math.imul(ce,hr)|0,q=q+Math.imul(ce,fr)|0,q=q+Math.imul(ue,hr)|0,ae=ae+Math.imul(ue,fr)|0,Z=Z+Math.imul(qe,Ut)|0,q=q+Math.imul(qe,Fr)|0,q=q+Math.imul(be,Ut)|0,ae=ae+Math.imul(be,Fr)|0,Z=Z+Math.imul(Me,$r)|0,q=q+Math.imul(Me,Ca)|0,q=q+Math.imul(Ie,$r)|0,ae=ae+Math.imul(Ie,Ca)|0,Z=Z+Math.imul(re,Fa)|0,q=q+Math.imul(re,jr)|0,q=q+Math.imul(se,Fa)|0,ae=ae+Math.imul(se,jr)|0,Z=Z+Math.imul(xe,xa)|0,q=q+Math.imul(xe,ia)|0,q=q+Math.imul(Se,xa)|0,ae=ae+Math.imul(Se,ia)|0;var rr=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(rr>>>26)|0,rr&=67108863,Z=Math.imul(yt,Qr),q=Math.imul(yt,Sr),q=q+Math.imul(_t,Qr)|0,ae=Math.imul(_t,Sr),Z=Z+Math.imul(je,Oe)|0,q=q+Math.imul(je,it)|0,q=q+Math.imul($e,Oe)|0,ae=ae+Math.imul($e,it)|0,Z=Z+Math.imul(Ze,pt)|0,q=q+Math.imul(Ze,Dt)|0,q=q+Math.imul(Qe,pt)|0,ae=ae+Math.imul(Qe,Dt)|0,Z=Z+Math.imul(Xe,hr)|0,q=q+Math.imul(Xe,fr)|0,q=q+Math.imul(Ke,hr)|0,ae=ae+Math.imul(Ke,fr)|0,Z=Z+Math.imul(ce,Ut)|0,q=q+Math.imul(ce,Fr)|0,q=q+Math.imul(ue,Ut)|0,ae=ae+Math.imul(ue,Fr)|0,Z=Z+Math.imul(qe,$r)|0,q=q+Math.imul(qe,Ca)|0,q=q+Math.imul(be,$r)|0,ae=ae+Math.imul(be,Ca)|0,Z=Z+Math.imul(Me,Fa)|0,q=q+Math.imul(Me,jr)|0,q=q+Math.imul(Ie,Fa)|0,ae=ae+Math.imul(Ie,jr)|0,Z=Z+Math.imul(re,xa)|0,q=q+Math.imul(re,ia)|0,q=q+Math.imul(se,xa)|0,ae=ae+Math.imul(se,ia)|0;var sr=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(sr>>>26)|0,sr&=67108863,Z=Math.imul(yt,Oe),q=Math.imul(yt,it),q=q+Math.imul(_t,Oe)|0,ae=Math.imul(_t,it),Z=Z+Math.imul(je,pt)|0,q=q+Math.imul(je,Dt)|0,q=q+Math.imul($e,pt)|0,ae=ae+Math.imul($e,Dt)|0,Z=Z+Math.imul(Ze,hr)|0,q=q+Math.imul(Ze,fr)|0,q=q+Math.imul(Qe,hr)|0,ae=ae+Math.imul(Qe,fr)|0,Z=Z+Math.imul(Xe,Ut)|0,q=q+Math.imul(Xe,Fr)|0,q=q+Math.imul(Ke,Ut)|0,ae=ae+Math.imul(Ke,Fr)|0,Z=Z+Math.imul(ce,$r)|0,q=q+Math.imul(ce,Ca)|0,q=q+Math.imul(ue,$r)|0,ae=ae+Math.imul(ue,Ca)|0,Z=Z+Math.imul(qe,Fa)|0,q=q+Math.imul(qe,jr)|0,q=q+Math.imul(be,Fa)|0,ae=ae+Math.imul(be,jr)|0,Z=Z+Math.imul(Me,xa)|0,q=q+Math.imul(Me,ia)|0,q=q+Math.imul(Ie,xa)|0,ae=ae+Math.imul(Ie,ia)|0;var gr=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(gr>>>26)|0,gr&=67108863,Z=Math.imul(yt,pt),q=Math.imul(yt,Dt),q=q+Math.imul(_t,pt)|0,ae=Math.imul(_t,Dt),Z=Z+Math.imul(je,hr)|0,q=q+Math.imul(je,fr)|0,q=q+Math.imul($e,hr)|0,ae=ae+Math.imul($e,fr)|0,Z=Z+Math.imul(Ze,Ut)|0,q=q+Math.imul(Ze,Fr)|0,q=q+Math.imul(Qe,Ut)|0,ae=ae+Math.imul(Qe,Fr)|0,Z=Z+Math.imul(Xe,$r)|0,q=q+Math.imul(Xe,Ca)|0,q=q+Math.imul(Ke,$r)|0,ae=ae+Math.imul(Ke,Ca)|0,Z=Z+Math.imul(ce,Fa)|0,q=q+Math.imul(ce,jr)|0,q=q+Math.imul(ue,Fa)|0,ae=ae+Math.imul(ue,jr)|0,Z=Z+Math.imul(qe,xa)|0,q=q+Math.imul(qe,ia)|0,q=q+Math.imul(be,xa)|0,ae=ae+Math.imul(be,ia)|0;var Ur=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,Z=Math.imul(yt,hr),q=Math.imul(yt,fr),q=q+Math.imul(_t,hr)|0,ae=Math.imul(_t,fr),Z=Z+Math.imul(je,Ut)|0,q=q+Math.imul(je,Fr)|0,q=q+Math.imul($e,Ut)|0,ae=ae+Math.imul($e,Fr)|0,Z=Z+Math.imul(Ze,$r)|0,q=q+Math.imul(Ze,Ca)|0,q=q+Math.imul(Qe,$r)|0,ae=ae+Math.imul(Qe,Ca)|0,Z=Z+Math.imul(Xe,Fa)|0,q=q+Math.imul(Xe,jr)|0,q=q+Math.imul(Ke,Fa)|0,ae=ae+Math.imul(Ke,jr)|0,Z=Z+Math.imul(ce,xa)|0,q=q+Math.imul(ce,ia)|0,q=q+Math.imul(ue,xa)|0,ae=ae+Math.imul(ue,ia)|0;var Vr=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,Z=Math.imul(yt,Ut),q=Math.imul(yt,Fr),q=q+Math.imul(_t,Ut)|0,ae=Math.imul(_t,Fr),Z=Z+Math.imul(je,$r)|0,q=q+Math.imul(je,Ca)|0,q=q+Math.imul($e,$r)|0,ae=ae+Math.imul($e,Ca)|0,Z=Z+Math.imul(Ze,Fa)|0,q=q+Math.imul(Ze,jr)|0,q=q+Math.imul(Qe,Fa)|0,ae=ae+Math.imul(Qe,jr)|0,Z=Z+Math.imul(Xe,xa)|0,q=q+Math.imul(Xe,ia)|0,q=q+Math.imul(Ke,xa)|0,ae=ae+Math.imul(Ke,ia)|0;var la=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(la>>>26)|0,la&=67108863,Z=Math.imul(yt,$r),q=Math.imul(yt,Ca),q=q+Math.imul(_t,$r)|0,ae=Math.imul(_t,Ca),Z=Z+Math.imul(je,Fa)|0,q=q+Math.imul(je,jr)|0,q=q+Math.imul($e,Fa)|0,ae=ae+Math.imul($e,jr)|0,Z=Z+Math.imul(Ze,xa)|0,q=q+Math.imul(Ze,ia)|0,q=q+Math.imul(Qe,xa)|0,ae=ae+Math.imul(Qe,ia)|0;var Xa=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,Z=Math.imul(yt,Fa),q=Math.imul(yt,jr),q=q+Math.imul(_t,Fa)|0,ae=Math.imul(_t,jr),Z=Z+Math.imul(je,xa)|0,q=q+Math.imul(je,ia)|0,q=q+Math.imul($e,xa)|0,ae=ae+Math.imul($e,ia)|0;var La=(Q+Z|0)+((q&8191)<<13)|0;Q=(ae+(q>>>13)|0)+(La>>>26)|0,La&=67108863,Z=Math.imul(yt,xa),q=Math.imul(yt,ia),q=q+Math.imul(_t,xa)|0,ae=Math.imul(_t,ia);var en=(Q+Z|0)+((q&8191)<<13)|0;return Q=(ae+(q>>>13)|0)+(en>>>26)|0,en&=67108863,ee[0]=vn,ee[1]=ka,ee[2]=Ge,ee[3]=Pe,ee[4]=Ne,ee[5]=We,ee[6]=lt,ee[7]=wt,ee[8]=Mt,ee[9]=It,ee[10]=rr,ee[11]=sr,ee[12]=gr,ee[13]=Ur,ee[14]=Vr,ee[15]=la,ee[16]=Xa,ee[17]=La,ee[18]=en,Q!==0&&(ee[19]=Q,$.length++),$};Math.imul||(_=y);function S(N,D,O){O.negative=D.negative^N.negative,O.length=N.length+D.length;for(var $=0,Y=0,X=0;X<O.length-1;X++){var ee=Y;Y=0;for(var Q=$&67108863,Z=Math.min(X,D.length-1),q=Math.max(0,X-N.length+1);q<=Z;q++){var ae=X-q,ie=N.words[ae]|0,we=D.words[q]|0,Te=ie*we,he=Te&67108863;ee=ee+(Te/67108864|0)|0,he=he+Q|0,Q=he&67108863,ee=ee+(he>>>26)|0,Y+=ee>>>26,ee&=67108863}O.words[X]=Q,$=ee,ee=Y}return $!==0?O.words[X]=$:O.length--,O.strip()}function M(N,D,O){var $=new w;return $.mulp(N,D,O)}u.prototype.mulTo=function(D,O){var $,Y=this.length+D.length;return this.length===10&&D.length===10?$=_(this,D,O):Y<63?$=y(this,D,O):Y<1024?$=S(this,D,O):$=M(this,D,O),$};function w(N,D){this.x=N,this.y=D}w.prototype.makeRBT=function(D){for(var O=new Array(D),$=u.prototype._countBits(D)-1,Y=0;Y<D;Y++)O[Y]=this.revBin(Y,$,D);return O},w.prototype.revBin=function(D,O,$){if(D===0||D===$-1)return D;for(var Y=0,X=0;X<O;X++)Y|=(D&1)<<O-X-1,D>>=1;return Y},w.prototype.permute=function(D,O,$,Y,X,ee){for(var Q=0;Q<ee;Q++)Y[Q]=O[D[Q]],X[Q]=$[D[Q]]},w.prototype.transform=function(D,O,$,Y,X,ee){this.permute(ee,D,O,$,Y,X);for(var Q=1;Q<X;Q<<=1)for(var Z=Q<<1,q=Math.cos(2*Math.PI/Z),ae=Math.sin(2*Math.PI/Z),ie=0;ie<X;ie+=Z)for(var we=q,Te=ae,he=0;he<Q;he++){var xe=$[ie+he],Se=Y[ie+he],ye=$[ie+he+Q],re=Y[ie+he+Q],se=we*ye-Te*re;re=we*re+Te*ye,ye=se,$[ie+he]=xe+ye,Y[ie+he]=Se+re,$[ie+he+Q]=xe-ye,Y[ie+he+Q]=Se-re,he!==Z&&(se=q*we-ae*Te,Te=q*Te+ae*we,we=se)}},w.prototype.guessLen13b=function(D,O){var $=Math.max(O,D)|1,Y=$&1,X=0;for($=$/2|0;$;$=$>>>1)X++;return 1<<X+1+Y},w.prototype.conjugate=function(D,O,$){if(!($<=1))for(var Y=0;Y<$/2;Y++){var X=D[Y];D[Y]=D[$-Y-1],D[$-Y-1]=X,X=O[Y],O[Y]=-O[$-Y-1],O[$-Y-1]=-X}},w.prototype.normalize13b=function(D,O){for(var $=0,Y=0;Y<O/2;Y++){var X=Math.round(D[2*Y+1]/O)*8192+Math.round(D[2*Y]/O)+$;D[Y]=X&67108863,X<67108864?$=0:$=X/67108864|0}return D},w.prototype.convert13b=function(D,O,$,Y){for(var X=0,ee=0;ee<O;ee++)X=X+(D[ee]|0),$[2*ee]=X&8191,X=X>>>13,$[2*ee+1]=X&8191,X=X>>>13;for(ee=2*O;ee<Y;++ee)$[ee]=0;s(X===0),s((X&~8191)==0)},w.prototype.stub=function(D){for(var O=new Array(D),$=0;$<D;$++)O[$]=0;return O},w.prototype.mulp=function(D,O,$){var Y=2*this.guessLen13b(D.length,O.length),X=this.makeRBT(Y),ee=this.stub(Y),Q=new Array(Y),Z=new Array(Y),q=new Array(Y),ae=new Array(Y),ie=new Array(Y),we=new Array(Y),Te=$.words;Te.length=Y,this.convert13b(D.words,D.length,Q,Y),this.convert13b(O.words,O.length,ae,Y),this.transform(Q,ee,Z,q,Y,X),this.transform(ae,ee,ie,we,Y,X);for(var he=0;he<Y;he++){var xe=Z[he]*ie[he]-q[he]*we[he];q[he]=Z[he]*we[he]+q[he]*ie[he],Z[he]=xe}return this.conjugate(Z,q,Y),this.transform(Z,q,Te,ee,Y,X),this.conjugate(Te,ee,Y),this.normalize13b(Te,Y),$.negative=D.negative^O.negative,$.length=D.length+O.length,$.strip()},u.prototype.mul=function(D){var O=new u(null);return O.words=new Array(this.length+D.length),this.mulTo(D,O)},u.prototype.mulf=function(D){var O=new u(null);return O.words=new Array(this.length+D.length),M(this,D,O)},u.prototype.imul=function(D){return this.clone().mulTo(D,this)},u.prototype.imuln=function(D){s(typeof D=="number"),s(D<67108864);for(var O=0,$=0;$<this.length;$++){var Y=(this.words[$]|0)*D,X=(Y&67108863)+(O&67108863);O>>=26,O+=Y/67108864|0,O+=X>>>26,this.words[$]=X&67108863}return O!==0&&(this.words[$]=O,this.length++),this},u.prototype.muln=function(D){return this.clone().imuln(D)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(D){var O=m(D);if(O.length===0)return new u(1);for(var $=this,Y=0;Y<O.length&&O[Y]===0;Y++,$=$.sqr());if(++Y<O.length)for(var X=$.sqr();Y<O.length;Y++,X=X.sqr())O[Y]!==0&&($=$.mul(X));return $},u.prototype.iushln=function(D){s(typeof D=="number"&&D>=0);var O=D%26,$=(D-O)/26,Y=67108863>>>26-O<<26-O,X;if(O!==0){var ee=0;for(X=0;X<this.length;X++){var Q=this.words[X]&Y,Z=(this.words[X]|0)-Q<<O;this.words[X]=Z|ee,ee=Q>>>26-O}ee&&(this.words[X]=ee,this.length++)}if($!==0){for(X=this.length-1;X>=0;X--)this.words[X+$]=this.words[X];for(X=0;X<$;X++)this.words[X]=0;this.length+=$}return this.strip()},u.prototype.ishln=function(D){return s(this.negative===0),this.iushln(D)},u.prototype.iushrn=function(D,O,$){s(typeof D=="number"&&D>=0);var Y;O?Y=(O-O%26)/26:Y=0;var X=D%26,ee=Math.min((D-X)/26,this.length),Q=67108863^67108863>>>X<<X,Z=$;if(Y-=ee,Y=Math.max(0,Y),Z){for(var q=0;q<ee;q++)Z.words[q]=this.words[q];Z.length=ee}if(ee!==0)if(this.length>ee)for(this.length-=ee,q=0;q<this.length;q++)this.words[q]=this.words[q+ee];else this.words[0]=0,this.length=1;var ae=0;for(q=this.length-1;q>=0&&(ae!==0||q>=Y);q--){var ie=this.words[q]|0;this.words[q]=ae<<26-X|ie>>>X,ae=ie&Q}return Z&&ae!==0&&(Z.words[Z.length++]=ae),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(D,O,$){return s(this.negative===0),this.iushrn(D,O,$)},u.prototype.shln=function(D){return this.clone().ishln(D)},u.prototype.ushln=function(D){return this.clone().iushln(D)},u.prototype.shrn=function(D){return this.clone().ishrn(D)},u.prototype.ushrn=function(D){return this.clone().iushrn(D)},u.prototype.testn=function(D){s(typeof D=="number"&&D>=0);var O=D%26,$=(D-O)/26,Y=1<<O;if(this.length<=$)return!1;var X=this.words[$];return!!(X&Y)},u.prototype.imaskn=function(D){s(typeof D=="number"&&D>=0);var O=D%26,$=(D-O)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(O!==0&&$++,this.length=Math.min($,this.length),O!==0){var Y=67108863^67108863>>>O<<O;this.words[this.length-1]&=Y}return this.strip()},u.prototype.maskn=function(D){return this.clone().imaskn(D)},u.prototype.iaddn=function(D){return s(typeof D=="number"),s(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},u.prototype._iaddn=function(D){this.words[0]+=D;for(var O=0;O<this.length&&this.words[O]>=67108864;O++)this.words[O]-=67108864,O===this.length-1?this.words[O+1]=1:this.words[O+1]++;return this.length=Math.max(this.length,O+1),this},u.prototype.isubn=function(D){if(s(typeof D=="number"),s(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var O=0;O<this.length&&this.words[O]<0;O++)this.words[O]+=67108864,this.words[O+1]-=1;return this.strip()},u.prototype.addn=function(D){return this.clone().iaddn(D)},u.prototype.subn=function(D){return this.clone().isubn(D)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(D,O,$){var Y=D.length+$,X;this._expand(Y);var ee,Q=0;for(X=0;X<D.length;X++){ee=(this.words[X+$]|0)+Q;var Z=(D.words[X]|0)*O;ee-=Z&67108863,Q=(ee>>26)-(Z/67108864|0),this.words[X+$]=ee&67108863}for(;X<this.length-$;X++)ee=(this.words[X+$]|0)+Q,Q=ee>>26,this.words[X+$]=ee&67108863;if(Q===0)return this.strip();for(s(Q===-1),Q=0,X=0;X<this.length;X++)ee=-(this.words[X]|0)+Q,Q=ee>>26,this.words[X]=ee&67108863;return this.negative=1,this.strip()},u.prototype._wordDiv=function(D,O){var $=this.length-D.length,Y=this.clone(),X=D,ee=X.words[X.length-1]|0,Q=this._countBits(ee);$=26-Q,$!==0&&(X=X.ushln($),Y.iushln($),ee=X.words[X.length-1]|0);var Z=Y.length-X.length,q;if(O!=="mod"){q=new u(null),q.length=Z+1,q.words=new Array(q.length);for(var ae=0;ae<q.length;ae++)q.words[ae]=0}var ie=Y.clone()._ishlnsubmul(X,1,Z);ie.negative===0&&(Y=ie,q&&(q.words[Z]=1));for(var we=Z-1;we>=0;we--){var Te=(Y.words[X.length+we]|0)*67108864+(Y.words[X.length+we-1]|0);for(Te=Math.min(Te/ee|0,67108863),Y._ishlnsubmul(X,Te,we);Y.negative!==0;)Te--,Y.negative=0,Y._ishlnsubmul(X,1,we),Y.isZero()||(Y.negative^=1);q&&(q.words[we]=Te)}return q&&q.strip(),Y.strip(),O!=="div"&&$!==0&&Y.iushrn($),{div:q||null,mod:Y}},u.prototype.divmod=function(D,O,$){if(s(!D.isZero()),this.isZero())return{div:new u(0),mod:new u(0)};var Y,X,ee;return this.negative!==0&&D.negative===0?(ee=this.neg().divmod(D,O),O!=="mod"&&(Y=ee.div.neg()),O!=="div"&&(X=ee.mod.neg(),$&&X.negative!==0&&X.iadd(D)),{div:Y,mod:X}):this.negative===0&&D.negative!==0?(ee=this.divmod(D.neg(),O),O!=="mod"&&(Y=ee.div.neg()),{div:Y,mod:ee.mod}):(this.negative&D.negative)!=0?(ee=this.neg().divmod(D.neg(),O),O!=="div"&&(X=ee.mod.neg(),$&&X.negative!==0&&X.isub(D)),{div:ee.div,mod:X}):D.length>this.length||this.cmp(D)<0?{div:new u(0),mod:this}:D.length===1?O==="div"?{div:this.divn(D.words[0]),mod:null}:O==="mod"?{div:null,mod:new u(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new u(this.modn(D.words[0]))}:this._wordDiv(D,O)},u.prototype.div=function(D){return this.divmod(D,"div",!1).div},u.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},u.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},u.prototype.divRound=function(D){var O=this.divmod(D);if(O.mod.isZero())return O.div;var $=O.div.negative!==0?O.mod.isub(D):O.mod,Y=D.ushrn(1),X=D.andln(1),ee=$.cmp(Y);return ee<0||X===1&&ee===0?O.div:O.div.negative!==0?O.div.isubn(1):O.div.iaddn(1)},u.prototype.modn=function(D){s(D<=67108863);for(var O=(1<<26)%D,$=0,Y=this.length-1;Y>=0;Y--)$=(O*$+(this.words[Y]|0))%D;return $},u.prototype.idivn=function(D){s(D<=67108863);for(var O=0,$=this.length-1;$>=0;$--){var Y=(this.words[$]|0)+O*67108864;this.words[$]=Y/D|0,O=Y%D}return this.strip()},u.prototype.divn=function(D){return this.clone().idivn(D)},u.prototype.egcd=function(D){s(D.negative===0),s(!D.isZero());var O=this,$=D.clone();O.negative!==0?O=O.umod(D):O=O.clone();for(var Y=new u(1),X=new u(0),ee=new u(0),Q=new u(1),Z=0;O.isEven()&&$.isEven();)O.iushrn(1),$.iushrn(1),++Z;for(var q=$.clone(),ae=O.clone();!O.isZero();){for(var ie=0,we=1;(O.words[0]&we)==0&&ie<26;++ie,we<<=1);if(ie>0)for(O.iushrn(ie);ie-- >0;)(Y.isOdd()||X.isOdd())&&(Y.iadd(q),X.isub(ae)),Y.iushrn(1),X.iushrn(1);for(var Te=0,he=1;($.words[0]&he)==0&&Te<26;++Te,he<<=1);if(Te>0)for($.iushrn(Te);Te-- >0;)(ee.isOdd()||Q.isOdd())&&(ee.iadd(q),Q.isub(ae)),ee.iushrn(1),Q.iushrn(1);O.cmp($)>=0?(O.isub($),Y.isub(ee),X.isub(Q)):($.isub(O),ee.isub(Y),Q.isub(X))}return{a:ee,b:Q,gcd:$.iushln(Z)}},u.prototype._invmp=function(D){s(D.negative===0),s(!D.isZero());var O=this,$=D.clone();O.negative!==0?O=O.umod(D):O=O.clone();for(var Y=new u(1),X=new u(0),ee=$.clone();O.cmpn(1)>0&&$.cmpn(1)>0;){for(var Q=0,Z=1;(O.words[0]&Z)==0&&Q<26;++Q,Z<<=1);if(Q>0)for(O.iushrn(Q);Q-- >0;)Y.isOdd()&&Y.iadd(ee),Y.iushrn(1);for(var q=0,ae=1;($.words[0]&ae)==0&&q<26;++q,ae<<=1);if(q>0)for($.iushrn(q);q-- >0;)X.isOdd()&&X.iadd(ee),X.iushrn(1);O.cmp($)>=0?(O.isub($),Y.isub(X)):($.isub(O),X.isub(Y))}var ie;return O.cmpn(1)===0?ie=Y:ie=X,ie.cmpn(0)<0&&ie.iadd(D),ie},u.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var O=this.clone(),$=D.clone();O.negative=0,$.negative=0;for(var Y=0;O.isEven()&&$.isEven();Y++)O.iushrn(1),$.iushrn(1);do{for(;O.isEven();)O.iushrn(1);for(;$.isEven();)$.iushrn(1);var X=O.cmp($);if(X<0){var ee=O;O=$,$=ee}else if(X===0||$.cmpn(1)===0)break;O.isub($)}while(!0);return $.iushln(Y)},u.prototype.invm=function(D){return this.egcd(D).a.umod(D)},u.prototype.isEven=function(){return(this.words[0]&1)==0},u.prototype.isOdd=function(){return(this.words[0]&1)==1},u.prototype.andln=function(D){return this.words[0]&D},u.prototype.bincn=function(D){s(typeof D=="number");var O=D%26,$=(D-O)/26,Y=1<<O;if(this.length<=$)return this._expand($+1),this.words[$]|=Y,this;for(var X=Y,ee=$;X!==0&&ee<this.length;ee++){var Q=this.words[ee]|0;Q+=X,X=Q>>>26,Q&=67108863,this.words[ee]=Q}return X!==0&&(this.words[ee]=X,this.length++),this},u.prototype.isZero=function(){return this.length===1&&this.words[0]===0},u.prototype.cmpn=function(D){var O=D<0;if(this.negative!==0&&!O)return-1;if(this.negative===0&&O)return 1;this.strip();var $;if(this.length>1)$=1;else{O&&(D=-D),s(D<=67108863,"Number is too big");var Y=this.words[0]|0;$=Y===D?0:Y<D?-1:1}return this.negative!==0?-$|0:$},u.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var O=this.ucmp(D);return this.negative!==0?-O|0:O},u.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var O=0,$=this.length-1;$>=0;$--){var Y=this.words[$]|0,X=D.words[$]|0;if(Y!==X){Y<X?O=-1:Y>X&&(O=1);break}}return O},u.prototype.gtn=function(D){return this.cmpn(D)===1},u.prototype.gt=function(D){return this.cmp(D)===1},u.prototype.gten=function(D){return this.cmpn(D)>=0},u.prototype.gte=function(D){return this.cmp(D)>=0},u.prototype.ltn=function(D){return this.cmpn(D)===-1},u.prototype.lt=function(D){return this.cmp(D)===-1},u.prototype.lten=function(D){return this.cmpn(D)<=0},u.prototype.lte=function(D){return this.cmp(D)<=0},u.prototype.eqn=function(D){return this.cmpn(D)===0},u.prototype.eq=function(D){return this.cmp(D)===0},u.red=function(D){return new R(D)},u.prototype.toRed=function(D){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},u.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(D){return this.red=D,this},u.prototype.forceRed=function(D){return s(!this.red,"Already a number in reduction context"),this._forceRed(D)},u.prototype.redAdd=function(D){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},u.prototype.redIAdd=function(D){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},u.prototype.redSub=function(D){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},u.prototype.redISub=function(D){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},u.prototype.redShl=function(D){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},u.prototype.redMul=function(D){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},u.prototype.redIMul=function(D){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},u.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(D){return s(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var A={k256:null,p224:null,p192:null,p25519:null};function k(N,D){this.name=N,this.p=new u(D,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var D=new u(null);return D.words=new Array(Math.ceil(this.n/13)),D},k.prototype.ireduce=function(D){var O=D,$;do this.split(O,this.tmp),O=this.imulK(O),O=O.iadd(this.tmp),$=O.bitLength();while($>this.n);var Y=$<this.n?-1:O.ucmp(this.p);return Y===0?(O.words[0]=0,O.length=1):Y>0?O.isub(this.p):O.strip!==void 0?O.strip():O._strip(),O},k.prototype.split=function(D,O){D.iushrn(this.n,0,O)},k.prototype.imulK=function(D){return D.imul(this.k)};function T(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(T,k),T.prototype.split=function(D,O){for(var $=4194303,Y=Math.min(D.length,9),X=0;X<Y;X++)O.words[X]=D.words[X];if(O.length=Y,D.length<=9){D.words[0]=0,D.length=1;return}var ee=D.words[9];for(O.words[O.length++]=ee&$,X=10;X<D.length;X++){var Q=D.words[X]|0;D.words[X-10]=(Q&$)<<4|ee>>>22,ee=Q}ee>>>=22,D.words[X-10]=ee,ee===0&&D.length>10?D.length-=10:D.length-=9},T.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var O=0,$=0;$<D.length;$++){var Y=D.words[$]|0;O+=Y*977,D.words[$]=O&67108863,O=Y*64+(O/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(L,k);function C(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(C,k);function I(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(I,k),I.prototype.imulK=function(D){for(var O=0,$=0;$<D.length;$++){var Y=(D.words[$]|0)*19+O,X=Y&67108863;Y>>>=26,D.words[$]=X,O=Y}return O!==0&&(D.words[D.length++]=O),D},u._prime=function(D){if(A[D])return A[D];var O;if(D==="k256")O=new T;else if(D==="p224")O=new L;else if(D==="p192")O=new C;else if(D==="p25519")O=new I;else throw new Error("Unknown prime "+D);return A[D]=O,O};function R(N){if(typeof N=="string"){var D=u._prime(N);this.m=D.p,this.prime=D}else s(N.gtn(1),"modulus must be greater than 1"),this.m=N,this.prime=null}R.prototype._verify1=function(D){s(D.negative===0,"red works only with positives"),s(D.red,"red works only with red numbers")},R.prototype._verify2=function(D,O){s((D.negative|O.negative)==0,"red works only with positives"),s(D.red&&D.red===O.red,"red works only with red numbers")},R.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},R.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},R.prototype.add=function(D,O){this._verify2(D,O);var $=D.add(O);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},R.prototype.iadd=function(D,O){this._verify2(D,O);var $=D.iadd(O);return $.cmp(this.m)>=0&&$.isub(this.m),$},R.prototype.sub=function(D,O){this._verify2(D,O);var $=D.sub(O);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},R.prototype.isub=function(D,O){this._verify2(D,O);var $=D.isub(O);return $.cmpn(0)<0&&$.iadd(this.m),$},R.prototype.shl=function(D,O){return this._verify1(D),this.imod(D.ushln(O))},R.prototype.imul=function(D,O){return this._verify2(D,O),this.imod(D.imul(O))},R.prototype.mul=function(D,O){return this._verify2(D,O),this.imod(D.mul(O))},R.prototype.isqr=function(D){return this.imul(D,D.clone())},R.prototype.sqr=function(D){return this.mul(D,D)},R.prototype.sqrt=function(D){if(D.isZero())return D.clone();var O=this.m.andln(3);if(s(O%2==1),O===3){var $=this.m.add(new u(1)).iushrn(2);return this.pow(D,$)}for(var Y=this.m.subn(1),X=0;!Y.isZero()&&Y.andln(1)===0;)X++,Y.iushrn(1);s(!Y.isZero());var ee=new u(1).toRed(this),Q=ee.redNeg(),Z=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new u(2*q*q).toRed(this);this.pow(q,Z).cmp(Q)!==0;)q.redIAdd(Q);for(var ae=this.pow(q,Y),ie=this.pow(D,Y.addn(1).iushrn(1)),we=this.pow(D,Y),Te=X;we.cmp(ee)!==0;){for(var he=we,xe=0;he.cmp(ee)!==0;xe++)he=he.redSqr();s(xe<Te);var Se=this.pow(ae,new u(1).iushln(Te-xe-1));ie=ie.redMul(Se),ae=Se.redSqr(),we=we.redMul(ae),Te=xe}return ie},R.prototype.invm=function(D){var O=D._invmp(this.m);return O.negative!==0?(O.negative=0,this.imod(O).redNeg()):this.imod(O)},R.prototype.pow=function(D,O){if(O.isZero())return new u(1).toRed(this);if(O.cmpn(1)===0)return D.clone();var $=4,Y=new Array(1<<$);Y[0]=new u(1).toRed(this),Y[1]=D;for(var X=2;X<Y.length;X++)Y[X]=this.mul(Y[X-1],D);var ee=Y[0],Q=0,Z=0,q=O.bitLength()%26;for(q===0&&(q=26),X=O.length-1;X>=0;X--){for(var ae=O.words[X],ie=q-1;ie>=0;ie--){var we=ae>>ie&1;if(ee!==Y[0]&&(ee=this.sqr(ee)),we===0&&Q===0){Z=0;continue}Q<<=1,Q|=we,Z++,!(Z!==$&&(X!==0||ie!==0))&&(ee=this.mul(ee,Y[Q]),Z=0,Q=0)}q=26}return ee},R.prototype.convertTo=function(D){var O=D.umod(this.m);return O===D?O.clone():O},R.prototype.convertFrom=function(D){var O=D.clone();return O.red=null,O},u.mont=function(D){return new B(D)};function B(N){R.call(this,N),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(B,R),B.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},B.prototype.convertFrom=function(D){var O=this.imod(D.mul(this.rinv));return O.red=null,O},B.prototype.imul=function(D,O){if(D.isZero()||O.isZero())return D.words[0]=0,D.length=1,D;var $=D.imul(O),Y=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=$.isub(Y).iushrn(this.shift),ee=X;return X.cmp(this.m)>=0?ee=X.isub(this.m):X.cmpn(0)<0&&(ee=X.iadd(this.m)),ee._forceRed(this)},B.prototype.mul=function(D,O){if(D.isZero()||O.isZero())return new u(0)._forceRed(this);var $=D.mul(O),Y=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=$.isub(Y).iushrn(this.shift),ee=X;return X.cmp(this.m)>=0?ee=X.isub(this.m):X.cmpn(0)<0&&(ee=X.iadd(this.m)),ee._forceRed(this)},B.prototype.invm=function(D){var O=this.imod(D._invmp(this.m).mul(this.r2));return O._forceRed(this)}})(typeof a=="undefined"||a,this)},{buffer:2}],34:[function(r,a,n){a.exports=o;function o(i){var s,l,u,f=i.length,c=0;for(s=0;s<f;++s)c+=i[s].length;var h=new Array(c),v=0;for(s=0;s<f;++s){var p=i[s],d=p.length;for(l=0;l<d;++l){var g=h[v++]=new Array(d-1),m=0;for(u=0;u<d;++u)u!==l&&(g[m++]=p[u]);if(l&1){var y=g[1];g[1]=g[0],g[0]=y}}}return h}},{}],35:[function(r,a,n){a.exports=d;var o=r("typedarray-pool"),i=r("./lib/sweep"),s=r("./lib/intersect");function l(g,m){for(var y=0;y<g;++y)if(!(m[y]<=m[y+g]))return!0;return!1}function u(g,m,y,_){for(var S=0,M=0,w=0,A=g.length;w<A;++w){var k=g[w];if(!l(m,k)){for(var T=0;T<2*m;++T)y[S++]=k[T];_[M++]=w}}return M}function f(g,m,y,_){var S=g.length,M=m.length;if(!(S<=0||M<=0)){var w=g[0].length>>>1;if(!(w<=0)){var A,k=o.mallocDouble(2*w*S),T=o.mallocInt32(S);if(S=u(g,w,k,T),S>0){if(w===1&&_)i.init(S),A=i.sweepComplete(w,y,0,S,k,T,0,S,k,T);else{var L=o.mallocDouble(2*w*M),C=o.mallocInt32(M);M=u(m,w,L,C),M>0&&(i.init(S+M),w===1?A=i.sweepBipartite(w,y,0,S,k,T,0,M,L,C):A=s(w,y,_,S,k,T,M,L,C),o.free(L),o.free(C))}o.free(k),o.free(T)}return A}}}var c;function h(g,m){c.push([g,m])}function v(g){return c=[],f(g,g,h,!0),c}function p(g,m){return c=[],f(g,m,h,!1),c}function d(g,m,y){switch(arguments.length){case 1:return v(g);case 2:return typeof m=="function"?f(g,g,m,!0):p(g,m);case 3:return f(g,m,y,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(r,a,n){function o(){function l(c,h,v,p,d,g,m,y,_,S,M){for(var w=2*c,A=p,k=w*p;A<d;++A,k+=w){var T=g[h+k],L=g[h+k+c],C=m[A];e:for(var I=y,R=w*y;I<_;++I,R+=w){var B=S[h+R],N=S[h+R+c],D=M[I];if(!(N<T||L<B)){for(var O=h+1;O<c;++O){var $=g[O+k],Y=g[O+c+k],X=S[O+R],ee=S[O+c+R];if(Y<X||ee<$)continue e}var Q=v(C,D);if(Q!==void 0)return Q}}}}function u(c,h,v,p,d,g,m,y,_,S,M){for(var w=2*c,A=y,k=w*y;A<_;++A,k+=w){var T=S[h+k],L=S[h+k+c],C=M[A];e:for(var I=p,R=w*p;I<d;++I,R+=w){var B=g[h+R],N=g[h+R+c],D=m[I];if(!(L<B||N<T)){for(var O=h+1;O<c;++O){var $=g[O+R],Y=g[O+c+R],X=S[O+k],ee=S[O+c+k];if(Y<X||ee<$)continue e}var Q=v(D,C);if(Q!==void 0)return Q}}}}function f(c,h,v,p,d,g,m,y,_,S,M){return d-p>_-y?l(c,h,v,p,d,g,m,y,_,S,M):u(c,h,v,p,d,g,m,y,_,S,M)}return f}function i(){function l(v,p,d,g,m,y,_,S,M,w,A){for(var k=2*v,T=g,L=k*g;T<m;++T,L+=k){var C=y[p+L],I=y[p+L+v],R=_[T];e:for(var B=S,N=k*S;B<M;++B,N+=k){var D=w[p+N],O=A[B];if(!(D<=C||I<D)){for(var $=p+1;$<v;++$){var Y=y[$+L],X=y[$+v+L],ee=w[$+N],Q=w[$+v+N];if(X<ee||Q<Y)continue e}var Z=d(O,R);if(Z!==void 0)return Z}}}}function u(v,p,d,g,m,y,_,S,M,w,A){for(var k=2*v,T=g,L=k*g;T<m;++T,L+=k){var C=y[p+L],I=y[p+L+v],R=_[T];e:for(var B=S,N=k*S;B<M;++B,N+=k){var D=w[p+N],O=A[B];if(!(D<C||I<D)){for(var $=p+1;$<v;++$){var Y=y[$+L],X=y[$+v+L],ee=w[$+N],Q=w[$+v+N];if(X<ee||Q<Y)continue e}var Z=d(R,O);if(Z!==void 0)return Z}}}}function f(v,p,d,g,m,y,_,S,M,w,A){for(var k=2*v,T=S,L=k*S;T<M;++T,L+=k){var C=w[p+L],I=A[T];e:for(var R=g,B=k*g;R<m;++R,B+=k){var N=y[p+B],D=y[p+B+v],O=_[R];if(!(C<=N||D<C)){for(var $=p+1;$<v;++$){var Y=y[$+B],X=y[$+v+B],ee=w[$+L],Q=w[$+v+L];if(X<ee||Q<Y)continue e}var Z=d(I,O);if(Z!==void 0)return Z}}}}function c(v,p,d,g,m,y,_,S,M,w,A){for(var k=2*v,T=S,L=k*S;T<M;++T,L+=k){var C=w[p+L],I=A[T];e:for(var R=g,B=k*g;R<m;++R,B+=k){var N=y[p+B],D=y[p+B+v],O=_[R];if(!(C<N||D<C)){for(var $=p+1;$<v;++$){var Y=y[$+B],X=y[$+v+B],ee=w[$+L],Q=w[$+v+L];if(X<ee||Q<Y)continue e}var Z=d(O,I);if(Z!==void 0)return Z}}}}function h(v,p,d,g,m,y,_,S,M,w,A,k){return y-m>w-M?g?l(v,p,d,m,y,_,S,M,w,A,k):u(v,p,d,m,y,_,S,M,w,A,k):g?f(v,p,d,m,y,_,S,M,w,A,k):c(v,p,d,m,y,_,S,M,w,A,k)}return h}function s(l){return l?o():i()}n.partial=s(!1),n.full=s(!0)},{}],37:[function(r,a,n){a.exports=N;var o=r("typedarray-pool"),i=r("bit-twiddle"),s=r("./brute"),l=s.partial,u=s.full,f=r("./sweep"),c=r("./median"),h=r("./partition"),v=128,p=1<<22,d=1<<22,g=h("!(lo>=p0)&&!(p1>=hi)"),m=h("lo===p0"),y=h("lo<p0"),_=h("hi<=p0"),S=h("lo<=p0&&p0<=hi"),M=h("lo<p0&&p0<=hi"),w=6,A=2,k=1024,T=o.mallocInt32(k),L=o.mallocDouble(k);function C(D,O){var $=8*i.log2(O+1)*(D+1)|0,Y=i.nextPow2(w*$);T.length<Y&&(o.free(T),T=o.mallocInt32(Y));var X=i.nextPow2(A*$);L.length<X&&(o.free(L),L=o.mallocDouble(X))}function I(D,O,$,Y,X,ee,Q,Z,q){var ae=w*D;T[ae]=O,T[ae+1]=$,T[ae+2]=Y,T[ae+3]=X,T[ae+4]=ee,T[ae+5]=Q;var ie=A*D;L[ie]=Z,L[ie+1]=q}function R(D,O,$,Y,X,ee,Q,Z,q,ae,ie){var we=2*D,Te=q*we,he=ae[Te+O];e:for(var xe=X,Se=X*we;xe<ee;++xe,Se+=we){var ye=Q[Se+O],re=Q[Se+O+D];if(!(he<ye||re<he)&&!(Y&&he===ye)){for(var se=Z[xe],de=O+1;de<D;++de){var ye=Q[Se+de],re=Q[Se+de+D],Me=ae[Te+de],Ie=ae[Te+de+D];if(re<Me||Ie<ye)continue e}var Ee;if(Y?Ee=$(ie,se):Ee=$(se,ie),Ee!==void 0)return Ee}}}function B(D,O,$,Y,X,ee,Q,Z,q,ae){var ie=2*D,we=Z*ie,Te=q[we+O];e:for(var he=Y,xe=Y*ie;he<X;++he,xe+=ie){var Se=Q[he];if(Se!==ae){var ye=ee[xe+O],re=ee[xe+O+D];if(!(Te<ye||re<Te)){for(var se=O+1;se<D;++se){var ye=ee[xe+se],re=ee[xe+se+D],de=q[we+se],Me=q[we+se+D];if(re<de||Me<ye)continue e}var Ie=$(Se,ae);if(Ie!==void 0)return Ie}}}}function N(D,O,$,Y,X,ee,Q,Z,q){C(D,Y+Q);var ae=0,ie=2*D,we;for(I(ae++,0,0,Y,0,Q,$?16:0,-1/0,1/0),$||I(ae++,0,0,Q,0,Y,1,-1/0,1/0);ae>0;){ae-=1;var Te=ae*w,he=T[Te],xe=T[Te+1],Se=T[Te+2],ye=T[Te+3],re=T[Te+4],se=T[Te+5],de=ae*A,Me=L[de],Ie=L[de+1],Ee=se&1,qe=!!(se&16),be=X,oe=ee,ce=Z,ue=q;if(Ee&&(be=Z,oe=q,ce=X,ue=ee),!(se&2&&(Se=y(D,he,xe,Se,be,oe,Ie),xe>=Se))&&!(se&4&&(xe=_(D,he,xe,Se,be,oe,Me),xe>=Se))){var Re=Se-xe,Xe=re-ye;if(qe){if(D*Re*(Re+Xe)<d){if(we=f.scanComplete(D,he,O,xe,Se,be,oe,ye,re,ce,ue),we!==void 0)return we;continue}}else if(D*Math.min(Re,Xe)<v){if(we=l(D,he,O,Ee,xe,Se,be,oe,ye,re,ce,ue),we!==void 0)return we;continue}else if(D*Re*Xe<p){if(we=f.scanBipartite(D,he,O,Ee,xe,Se,be,oe,ye,re,ce,ue),we!==void 0)return we;continue}var Ke=g(D,he,xe,Se,be,oe,Me,Ie);if(xe<Ke)if(D*(Ke-xe)<v){if(we=u(D,he+1,O,xe,Ke,be,oe,ye,re,ce,ue),we!==void 0)return we}else if(he===D-2){if(Ee?we=f.sweepBipartite(D,O,ye,re,ce,ue,xe,Ke,be,oe):we=f.sweepBipartite(D,O,xe,Ke,be,oe,ye,re,ce,ue),we!==void 0)return we}else I(ae++,he+1,xe,Ke,ye,re,Ee,-1/0,1/0),I(ae++,he+1,ye,re,xe,Ke,Ee^1,-1/0,1/0);if(Ke<Se){var vt=c(D,he,ye,re,ce,ue),Ze=ce[ie*vt+he],Qe=m(D,he,vt,re,ce,ue,Ze);if(Qe<re&&I(ae++,he,Ke,Se,Qe,re,(Ee|4)+(qe?16:0),Ze,Ie),ye<vt&&I(ae++,he,Ke,Se,ye,vt,(Ee|2)+(qe?16:0),Me,Ze),vt+1===Qe){if(qe?we=B(D,he,O,Ke,Se,be,oe,vt,ce,ue[vt]):we=R(D,he,O,Ee,Ke,Se,be,oe,vt,ce,ue[vt]),we!==void 0)return we}else if(vt<Qe){var Je;if(qe){if(Je=S(D,he,Ke,Se,be,oe,Ze),Ke<Je){var je=m(D,he,Ke,Je,be,oe,Ze);if(he===D-2){if(Ke<je&&(we=f.sweepComplete(D,O,Ke,je,be,oe,vt,Qe,ce,ue),we!==void 0)||je<Je&&(we=f.sweepBipartite(D,O,je,Je,be,oe,vt,Qe,ce,ue),we!==void 0))return we}else Ke<je&&I(ae++,he+1,Ke,je,vt,Qe,16,-1/0,1/0),je<Je&&(I(ae++,he+1,je,Je,vt,Qe,0,-1/0,1/0),I(ae++,he+1,vt,Qe,je,Je,1,-1/0,1/0))}}else Ee?Je=M(D,he,Ke,Se,be,oe,Ze):Je=S(D,he,Ke,Se,be,oe,Ze),Ke<Je&&(he===D-2?Ee?we=f.sweepBipartite(D,O,vt,Qe,ce,ue,Ke,Je,be,oe):we=f.sweepBipartite(D,O,Ke,Je,be,oe,vt,Qe,ce,ue):(I(ae++,he+1,Ke,Je,vt,Qe,Ee,-1/0,1/0),I(ae++,he+1,vt,Qe,Ke,Je,Ee^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(r,a,n){a.exports=u;var o=r("./partition"),i=o("lo<p0"),s=8;function l(f,c,h,v,p,d){for(var g=2*f,m=g*(h+1)+c,y=h+1;y<v;++y,m+=g)for(var _=p[m],S=y,M=g*(y-1);S>h&&p[M+c]>_;--S,M-=g){for(var w=M,A=M+g,k=0;k<g;++k,++w,++A){var T=p[w];p[w]=p[A],p[A]=T}var L=d[S];d[S]=d[S-1],d[S-1]=L}}function u(f,c,h,v,p,d){if(v<=h+1)return h;for(var g=h,m=v,y=v+h>>>1,_=2*f,S=y,M=p[_*y+c];g<m;){if(m-g<s){l(f,c,g,m,p,d),M=p[_*y+c];break}var w=m-g,A=Math.random()*w+g|0,k=p[_*A+c],T=Math.random()*w+g|0,L=p[_*T+c],C=Math.random()*w+g|0,I=p[_*C+c];k<=L?I>=L?(S=T,M=L):k>=I?(S=A,M=k):(S=C,M=I):L>=I?(S=T,M=L):I>=k?(S=A,M=k):(S=C,M=I);for(var R=_*(m-1),B=_*S,N=0;N<_;++N,++R,++B){var D=p[R];p[R]=p[B],p[B]=D}var O=d[m-1];d[m-1]=d[S],d[S]=O,S=i(f,c,g,m-1,p,d,M);for(var R=_*(m-1),B=_*S,N=0;N<_;++N,++R,++B){var D=p[R];p[R]=p[B],p[B]=D}var O=d[m-1];if(d[m-1]=d[S],d[S]=O,y<S){for(m=S-1;g<m&&p[_*(m-1)+c]===M;)m-=1;m+=1}else if(S<y)for(g=S+1;g<m&&p[_*g+c]===M;)g+=1;else break}return i(f,c,h,y,p,d,p[_*y+c])}},{"./partition":39}],39:[function(r,a,n){a.exports=i;var o={"lo===p0":s,"lo<p0":l,"lo<=p0":u,"hi<=p0":f,"lo<p0&&p0<=hi":h,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":v};function i(p){return o[p]}function s(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=d,L=g;m>L;++L,w+=M){var C=y[w+T];if(C===S)if(k===L)k+=1,A+=M;else{for(var I=0;M>I;++I){var R=y[w+I];y[w+I]=y[A],y[A++]=R}var B=_[L];_[L]=_[k],_[k++]=B}}return k}function l(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=d,L=g;m>L;++L,w+=M){var C=y[w+T];if(C<S)if(k===L)k+=1,A+=M;else{for(var I=0;M>I;++I){var R=y[w+I];y[w+I]=y[A],y[A++]=R}var B=_[L];_[L]=_[k],_[k++]=B}}return k}function u(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=p+d,L=g;m>L;++L,w+=M){var C=y[w+T];if(C<=S)if(k===L)k+=1,A+=M;else{for(var I=0;M>I;++I){var R=y[w+I];y[w+I]=y[A],y[A++]=R}var B=_[L];_[L]=_[k],_[k++]=B}}return k}function f(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=p+d,L=g;m>L;++L,w+=M){var C=y[w+T];if(C<=S)if(k===L)k+=1,A+=M;else{for(var I=0;M>I;++I){var R=y[w+I];y[w+I]=y[A],y[A++]=R}var B=_[L];_[L]=_[k],_[k++]=B}}return k}function c(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=d,L=p+d,C=g;m>C;++C,w+=M){var I=y[w+T],R=y[w+L];if(I<=S&&S<=R)if(k===C)k+=1,A+=M;else{for(var B=0;M>B;++B){var N=y[w+B];y[w+B]=y[A],y[A++]=N}var D=_[C];_[C]=_[k],_[k++]=D}}return k}function h(p,d,g,m,y,_,S){for(var M=2*p,w=M*g,A=w,k=g,T=d,L=p+d,C=g;m>C;++C,w+=M){var I=y[w+T],R=y[w+L];if(I<S&&S<=R)if(k===C)k+=1,A+=M;else{for(var B=0;M>B;++B){var N=y[w+B];y[w+B]=y[A],y[A++]=N}var D=_[C];_[C]=_[k],_[k++]=D}}return k}function v(p,d,g,m,y,_,S,M){for(var w=2*p,A=w*g,k=A,T=g,L=d,C=p+d,I=g;m>I;++I,A+=w){var R=y[A+L],B=y[A+C];if(!(R>=S)&&!(M>=B))if(T===I)T+=1,k+=w;else{for(var N=0;w>N;++N){var D=y[A+N];y[A+N]=y[k],y[k++]=D}var O=_[I];_[I]=_[T],_[T++]=O}}return T}},{}],40:[function(r,a,n){a.exports=i;var o=32;function i(d,g){g<=4*o?s(0,g-1,d):p(0,g-1,d)}function s(d,g,m){for(var y=2*(d+1),_=d+1;_<=g;++_){for(var S=m[y++],M=m[y++],w=_,A=y-2;w-- >d;){var k=m[A-2],T=m[A-1];if(k<S)break;if(k===S&&T<M)break;m[A]=k,m[A+1]=T,A-=2}m[A]=S,m[A+1]=M}}function l(d,g,m){d*=2,g*=2;var y=m[d],_=m[d+1];m[d]=m[g],m[d+1]=m[g+1],m[g]=y,m[g+1]=_}function u(d,g,m){d*=2,g*=2,m[d]=m[g],m[d+1]=m[g+1]}function f(d,g,m,y){d*=2,g*=2,m*=2;var _=y[d],S=y[d+1];y[d]=y[g],y[d+1]=y[g+1],y[g]=y[m],y[g+1]=y[m+1],y[m]=_,y[m+1]=S}function c(d,g,m,y,_){d*=2,g*=2,_[d]=_[g],_[g]=m,_[d+1]=_[g+1],_[g+1]=y}function h(d,g,m){d*=2,g*=2;var y=m[d],_=m[g];return y<_?!1:y===_?m[d+1]>m[g+1]:!0}function v(d,g,m,y){d*=2;var _=y[d];return _<g?!0:_===g?y[d+1]<m:!1}function p(d,g,m){var y=(g-d+1)/6|0,_=d+y,S=g-y,M=d+g>>1,w=M-y,A=M+y,k=_,T=w,L=M,C=A,I=S,R=d+1,B=g-1,N=0;h(k,T,m)&&(N=k,k=T,T=N),h(C,I,m)&&(N=C,C=I,I=N),h(k,L,m)&&(N=k,k=L,L=N),h(T,L,m)&&(N=T,T=L,L=N),h(k,C,m)&&(N=k,k=C,C=N),h(L,C,m)&&(N=L,L=C,C=N),h(T,I,m)&&(N=T,T=I,I=N),h(T,L,m)&&(N=T,T=L,L=N),h(C,I,m)&&(N=C,C=I,I=N);for(var D=m[2*T],O=m[2*T+1],$=m[2*C],Y=m[2*C+1],X=2*k,ee=2*L,Q=2*I,Z=2*_,q=2*M,ae=2*S,ie=0;ie<2;++ie){var we=m[X+ie],Te=m[ee+ie],he=m[Q+ie];m[Z+ie]=we,m[q+ie]=Te,m[ae+ie]=he}u(w,d,m),u(A,g,m);for(var xe=R;xe<=B;++xe)if(v(xe,D,O,m))xe!==R&&l(xe,R,m),++R;else if(!v(xe,$,Y,m))for(;;)if(v(B,$,Y,m)){v(B,D,O,m)?(f(xe,R,B,m),++R,--B):(l(xe,B,m),--B);break}else{if(--B<xe)break;continue}c(d,R-1,D,O,m),c(g,B+1,$,Y,m),R-2-d<=o?s(d,R-2,m):p(d,R-2,m),g-(B+2)<=o?s(B+2,g,m):p(B+2,g,m),B-R<=o?s(R,B,m):p(R,B,m)}},{}],41:[function(r,a,n){a.exports={init:m,sweepBipartite:S,sweepComplete:M,scanBipartite:w,scanComplete:A};var o=r("typedarray-pool"),i=r("bit-twiddle"),s=r("./sort"),l=1<<28,u=1024,f=o.mallocInt32(u),c=o.mallocInt32(u),h=o.mallocInt32(u),v=o.mallocInt32(u),p=o.mallocInt32(u),d=o.mallocInt32(u),g=o.mallocDouble(u*8);function m(k){var T=i.nextPow2(k);f.length<T&&(o.free(f),f=o.mallocInt32(T)),c.length<T&&(o.free(c),c=o.mallocInt32(T)),h.length<T&&(o.free(h),h=o.mallocInt32(T)),v.length<T&&(o.free(v),v=o.mallocInt32(T)),p.length<T&&(o.free(p),p=o.mallocInt32(T)),d.length<T&&(o.free(d),d=o.mallocInt32(T));var L=8*T;g.length<L&&(o.free(g),g=o.mallocDouble(L))}function y(k,T,L,C){var I=T[C],R=k[L-1];k[I]=R,T[R]=I}function _(k,T,L,C){k[L]=C,T[C]=L}function S(k,T,L,C,I,R,B,N,D,O){for(var $=0,Y=2*k,X=k-1,ee=Y-1,Q=L;Q<C;++Q){var Z=R[Q],q=Y*Q;g[$++]=I[q+X],g[$++]=-(Z+1),g[$++]=I[q+ee],g[$++]=Z}for(var Q=B;Q<N;++Q){var Z=O[Q]+l,ae=Y*Q;g[$++]=D[ae+X],g[$++]=-Z,g[$++]=D[ae+ee],g[$++]=Z}var ie=$>>>1;s(g,ie);for(var we=0,Te=0,Q=0;Q<ie;++Q){var he=g[2*Q+1]|0;if(he>=l)he=he-l|0,y(h,v,Te--,he);else if(he>=0)y(f,c,we--,he);else if(he<=-l){he=-he-l|0;for(var xe=0;xe<we;++xe){var Se=T(f[xe],he);if(Se!==void 0)return Se}_(h,v,Te++,he)}else{he=-he-1|0;for(var xe=0;xe<Te;++xe){var Se=T(he,h[xe]);if(Se!==void 0)return Se}_(f,c,we++,he)}}}function M(k,T,L,C,I,R,B,N,D,O){for(var $=0,Y=2*k,X=k-1,ee=Y-1,Q=L;Q<C;++Q){var Z=R[Q]+1<<1,q=Y*Q;g[$++]=I[q+X],g[$++]=-Z,g[$++]=I[q+ee],g[$++]=Z}for(var Q=B;Q<N;++Q){var Z=O[Q]+1<<1,ae=Y*Q;g[$++]=D[ae+X],g[$++]=-Z|1,g[$++]=D[ae+ee],g[$++]=Z|1}var ie=$>>>1;s(g,ie);for(var we=0,Te=0,he=0,Q=0;Q<ie;++Q){var xe=g[2*Q+1]|0,Se=xe&1;if(Q<ie-1&&xe>>1==g[2*Q+3]>>1&&(Se=2,Q+=1),xe<0){for(var ye=-(xe>>1)-1,re=0;re<he;++re){var se=T(p[re],ye);if(se!==void 0)return se}if(Se!==0)for(var re=0;re<we;++re){var se=T(f[re],ye);if(se!==void 0)return se}if(Se!==1)for(var re=0;re<Te;++re){var se=T(h[re],ye);if(se!==void 0)return se}Se===0?_(f,c,we++,ye):Se===1?_(h,v,Te++,ye):Se===2&&_(p,d,he++,ye)}else{var ye=(xe>>1)-1;Se===0?y(f,c,we--,ye):Se===1?y(h,v,Te--,ye):Se===2&&y(p,d,he--,ye)}}}function w(k,T,L,C,I,R,B,N,D,O,$,Y){var X=0,ee=2*k,Q=T,Z=T+k,q=1,ae=1;C?ae=l:q=l;for(var ie=I;ie<R;++ie){var we=ie+q,Te=ee*ie;g[X++]=B[Te+Q],g[X++]=-we,g[X++]=B[Te+Z],g[X++]=we}for(var ie=D;ie<O;++ie){var we=ie+ae,he=ee*ie;g[X++]=$[he+Q],g[X++]=-we}var xe=X>>>1;s(g,xe);for(var Se=0,ie=0;ie<xe;++ie){var ye=g[2*ie+1]|0;if(ye<0){var we=-ye,re=!1;if(we>=l?(re=!C,we-=l):(re=!!C,we-=1),re)_(f,c,Se++,we);else{var se=Y[we],de=ee*we,Me=$[de+T+1],Ie=$[de+T+1+k];e:for(var Ee=0;Ee<Se;++Ee){var qe=f[Ee],be=ee*qe;if(!(Ie<B[be+T+1]||B[be+T+1+k]<Me)){for(var oe=T+2;oe<k;++oe)if($[de+oe+k]<B[be+oe]||B[be+oe+k]<$[de+oe])continue e;var ce=N[qe],ue;if(C?ue=L(se,ce):ue=L(ce,se),ue!==void 0)return ue}}}}else y(f,c,Se--,ye-q)}}function A(k,T,L,C,I,R,B,N,D,O,$){for(var Y=0,X=2*k,ee=T,Q=T+k,Z=C;Z<I;++Z){var q=Z+l,ae=X*Z;g[Y++]=R[ae+ee],g[Y++]=-q,g[Y++]=R[ae+Q],g[Y++]=q}for(var Z=N;Z<D;++Z){var q=Z+1,ie=X*Z;g[Y++]=O[ie+ee],g[Y++]=-q}var we=Y>>>1;s(g,we);for(var Te=0,Z=0;Z<we;++Z){var he=g[2*Z+1]|0;if(he<0){var q=-he;if(q>=l)f[Te++]=q-l;else{q-=1;var xe=$[q],Se=X*q,ye=O[Se+T+1],re=O[Se+T+1+k];e:for(var se=0;se<Te;++se){var de=f[se],Me=B[de];if(Me===xe)break;var Ie=X*de;if(!(re<R[Ie+T+1]||R[Ie+T+1+k]<ye)){for(var Ee=T+2;Ee<k;++Ee)if(O[Se+Ee+k]<R[Ie+Ee]||R[Ie+Ee+k]<O[Se+Ee])continue e;var qe=L(Me,xe);if(qe!==void 0)return qe}}}}else{for(var q=he-l,se=Te-1;se>=0;--se)if(f[se]===q){for(var Ee=se+1;Ee<Te;++Ee)f[Ee-1]=f[Ee];break}--Te}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(r,a,n){var o=r("./lib/monotone"),i=r("./lib/triangulation"),s=r("./lib/delaunay"),l=r("./lib/filter");a.exports=v;function u(p){return[Math.min(p[0],p[1]),Math.max(p[0],p[1])]}function f(p,d){return p[0]-d[0]||p[1]-d[1]}function c(p){return p.map(u).sort(f)}function h(p,d,g){return d in p?p[d]:g}function v(p,d,g){Array.isArray(d)?(g=g||{},d=d||[]):(g=d||{},d=[]);var m=!!h(g,"delaunay",!0),y=!!h(g,"interior",!0),_=!!h(g,"exterior",!0),S=!!h(g,"infinity",!1);if(!y&&!_||p.length===0)return[];var M=o(p,d);if(m||y!==_||S){for(var w=i(p.length,c(d)),A=0;A<M.length;++A){var k=M[A];w.addTriangle(k[0],k[1],k[2])}return m&&s(p,w),_?y?S?l(w,0,S):w.cells():l(w,1,S):l(w,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(r,a,n){var o=r("robust-in-sphere")[4];r("binary-search-bounds"),a.exports=s;function i(l,u,f,c,h,v){var p=u.opposite(c,h);if(!(p<0)){if(h<c){var d=c;c=h,h=d,d=v,v=p,p=d}u.isConstraint(c,h)||o(l[c],l[h],l[v],l[p])<0&&f.push(c,h)}}function s(l,u){for(var f=[],c=l.length,h=u.stars,v=0;v<c;++v)for(var p=h[v],d=1;d<p.length;d+=2){var g=p[d];if(!(g<v)&&!u.isConstraint(v,g)){for(var m=p[d-1],y=-1,_=1;_<p.length;_+=2)if(p[_-1]===g){y=p[_];break}y<0||o(l[v],l[g],l[m],l[y])<0&&f.push(v,g)}}for(;f.length>0;){for(var g=f.pop(),v=f.pop(),m=-1,y=-1,p=h[v],S=1;S<p.length;S+=2){var M=p[S-1],w=p[S];M===g?y=w:w===g&&(m=M)}m<0||y<0||o(l[v],l[g],l[m],l[y])>=0||(u.flip(v,g),i(l,u,f,m,v,y),i(l,u,f,v,y,m),i(l,u,f,y,g,m),i(l,u,f,g,m,y))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(r,a,n){var o=r("binary-search-bounds");a.exports=c;function i(h,v,p,d,g,m,y){this.cells=h,this.neighbor=v,this.flags=d,this.constraint=p,this.active=g,this.next=m,this.boundary=y}var s=i.prototype;function l(h,v){return h[0]-v[0]||h[1]-v[1]||h[2]-v[2]}s.locate=function(){var h=[0,0,0];return function(v,p,d){var g=v,m=p,y=d;return p<d?p<v&&(g=p,m=d,y=v):d<v&&(g=d,m=v,y=p),g<0?-1:(h[0]=g,h[1]=m,h[2]=y,o.eq(this.cells,h,l))}}();function u(h,v){for(var p=h.cells(),d=p.length,g=0;g<d;++g){var m=p[g],y=m[0],_=m[1],S=m[2];_<S?_<y&&(m[0]=_,m[1]=S,m[2]=y):S<y&&(m[0]=S,m[1]=y,m[2]=_)}p.sort(l);for(var M=new Array(d),g=0;g<M.length;++g)M[g]=0;var w=[],A=[],k=new Array(3*d),T=new Array(3*d),L=null;v&&(L=[]);for(var C=new i(p,k,T,M,w,A,L),g=0;g<d;++g)for(var m=p[g],I=0;I<3;++I){var y=m[I],_=m[(I+1)%3],R=k[3*g+I]=C.locate(_,y,h.opposite(_,y)),B=T[3*g+I]=h.isConstraint(y,_);R<0&&(B?A.push(g):(w.push(g),M[g]=1),v&&L.push([_,y,-1]))}return C}function f(h,v,p){for(var d=0,g=0;g<h.length;++g)v[g]===p&&(h[d++]=h[g]);return h.length=d,h}function c(h,v,p){var d=u(h,p);if(v===0)return p?d.cells.concat(d.boundary):d.cells;for(var g=1,m=d.active,y=d.next,_=d.flags,S=d.cells,M=d.constraint,w=d.neighbor;m.length>0||y.length>0;){for(;m.length>0;){var A=m.pop();if(_[A]!==-g){_[A]=g,S[A];for(var k=0;k<3;++k){var T=w[3*A+k];T>=0&&_[T]===0&&(M[3*A+k]?y.push(T):(m.push(T),_[T]=g))}}}var L=y;y=m,m=L,y.length=0,g=-g}var C=f(S,_,v);return p?C.concat(d.boundary):C}},{"binary-search-bounds":31}],45:[function(r,a,n){var o=r("binary-search-bounds"),i=r("robust-orientation")[3],s=0,l=1,u=2;a.exports=y;function f(_,S,M,w,A){this.a=_,this.b=S,this.idx=M,this.lowerIds=w,this.upperIds=A}function c(_,S,M,w){this.a=_,this.b=S,this.type=M,this.idx=w}function h(_,S){var M=_.a[0]-S.a[0]||_.a[1]-S.a[1]||_.type-S.type;return M||_.type!==s&&(M=i(_.a,_.b,S.b),M)?M:_.idx-S.idx}function v(_,S){return i(_.a,_.b,S)}function p(_,S,M,w,A){for(var k=o.lt(S,w,v),T=o.gt(S,w,v),L=k;L<T;++L){for(var C=S[L],I=C.lowerIds,R=I.length;R>1&&i(M[I[R-2]],M[I[R-1]],w)>0;)_.push([I[R-1],I[R-2],A]),R-=1;I.length=R,I.push(A);for(var B=C.upperIds,R=B.length;R>1&&i(M[B[R-2]],M[B[R-1]],w)<0;)_.push([B[R-2],B[R-1],A]),R-=1;B.length=R,B.push(A)}}function d(_,S){var M;return _.a[0]<S.a[0]?M=i(_.a,_.b,S.a):M=i(S.b,S.a,_.a),M||(S.b[0]<_.b[0]?M=i(_.a,_.b,S.b):M=i(S.b,S.a,_.b),M||_.idx-S.idx)}function g(_,S,M){var w=o.le(_,M,d),A=_[w],k=A.upperIds,T=k[k.length-1];A.upperIds=[T],_.splice(w+1,0,new f(M.a,M.b,M.idx,[T],k))}function m(_,S,M){var w=M.a;M.a=M.b,M.b=w;var A=o.eq(_,M,d),k=_[A],T=_[A-1];T.upperIds=k.upperIds,_.splice(A,1)}function y(_,S){for(var M=_.length,w=S.length,A=[],k=0;k<M;++k)A.push(new c(_[k],null,s,k));for(var k=0;k<w;++k){var T=S[k],L=_[T[0]],C=_[T[1]];L[0]<C[0]?A.push(new c(L,C,u,k),new c(C,L,l,k)):L[0]>C[0]&&A.push(new c(C,L,u,k),new c(L,C,l,k))}A.sort(h);for(var I=A[0].a[0]-(1+Math.abs(A[0].a[0]))*Math.pow(2,-52),R=[new f([I,1],[I,0],-1,[],[],[],[])],B=[],k=0,N=A.length;k<N;++k){var D=A[k],O=D.type;O===s?p(B,R,_,D.a,D.idx):O===u?g(R,_,D):m(R,_,D)}return B}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(r,a,n){var o=r("binary-search-bounds");a.exports=u;function i(f,c){this.stars=f,this.edges=c}var s=i.prototype;function l(f,c,h){for(var v=1,p=f.length;v<p;v+=2)if(f[v-1]===c&&f[v]===h){f[v-1]=f[p-2],f[v]=f[p-1],f.length=p-2;return}}s.isConstraint=function(){var f=[0,0];function c(h,v){return h[0]-v[0]||h[1]-v[1]}return function(h,v){return f[0]=Math.min(h,v),f[1]=Math.max(h,v),o.eq(this.edges,f,c)>=0}}(),s.removeTriangle=function(f,c,h){var v=this.stars;l(v[f],c,h),l(v[c],h,f),l(v[h],f,c)},s.addTriangle=function(f,c,h){var v=this.stars;v[f].push(c,h),v[c].push(h,f),v[h].push(f,c)},s.opposite=function(f,c){for(var h=this.stars[c],v=1,p=h.length;v<p;v+=2)if(h[v]===f)return h[v-1];return-1},s.flip=function(f,c){var h=this.opposite(f,c),v=this.opposite(c,f);this.removeTriangle(f,c,h),this.removeTriangle(c,f,v),this.addTriangle(f,v,h),this.addTriangle(c,h,v)},s.edges=function(){for(var f=this.stars,c=[],h=0,v=f.length;h<v;++h)for(var p=f[h],d=0,g=p.length;d<g;d+=2)c.push([p[d],p[d+1]]);return c},s.cells=function(){for(var f=this.stars,c=[],h=0,v=f.length;h<v;++h)for(var p=f[h],d=0,g=p.length;d<g;d+=2){var m=p[d],y=p[d+1];h<Math.min(m,y)&&c.push([h,m,y])}return c};function u(f,c){for(var h=new Array(f),v=0;v<f;++v)h[v]=[];return new i(h,c)}},{"binary-search-bounds":31}],47:[function(r,a,n){a.exports=o;function o(i){for(var s=1,l=1;l<i.length;++l)for(var u=0;u<l;++u)if(i[l]<i[u])s=-s;else if(i[u]===i[l])return 0;return s}},{}],48:[function(r,a,n){var o=r("dup"),i=r("robust-linear-solve");function s(f,c){for(var h=0,v=f.length,p=0;p<v;++p)h+=f[p]*c[p];return h}function l(f){var c=f.length;if(c===0)return[];f[0].length;var h=o([f.length+1,f.length+1],1),v=o([f.length+1],1);h[c][c]=0;for(var p=0;p<c;++p){for(var d=0;d<=p;++d)h[d][p]=h[p][d]=2*s(f[p],f[d]);v[p]=s(f[p],f[p])}for(var g=i(h,v),m=0,y=g[c+1],p=0;p<y.length;++p)m+=y[p];for(var _=new Array(c),p=0;p<c;++p){for(var y=g[p],S=0,d=0;d<y.length;++d)S+=y[d];_[p]=S/m}return _}function u(f){if(f.length===0)return[];for(var c=f[0].length,h=o([c]),v=l(f),p=0;p<f.length;++p)for(var d=0;d<c;++d)h[d]+=f[p][d]*v[p];return h}u.barycenetric=l,a.exports=u},{dup:65,"robust-linear-solve":283}],49:[function(r,a,n){a.exports=i;var o=r("circumcenter");function i(s){for(var l=o(s),u=0,f=0;f<s.length;++f)for(var c=s[f],h=0;h<l.length;++h)u+=Math.pow(c[h]-l[h],2);return Math.sqrt(u/s.length)}},{circumcenter:48}],50:[function(r,a,n){a.exports=L;var o=r("union-find"),i=r("box-intersect"),s=r("robust-segment-intersect"),l=r("big-rat"),u=r("big-rat/cmp"),f=r("big-rat/to-float"),c=r("rat-vec"),h=r("nextafter"),v=r("./lib/rat-seg-intersect");function p(C){var I=f(C);return[h(I,-1/0),h(I,1/0)]}function d(C,I){for(var R=new Array(I.length),B=0;B<I.length;++B){var N=I[B],D=C[N[0]],O=C[N[1]];R[B]=[h(Math.min(D[0],O[0]),-1/0),h(Math.min(D[1],O[1]),-1/0),h(Math.max(D[0],O[0]),1/0),h(Math.max(D[1],O[1]),1/0)]}return R}function g(C){for(var I=new Array(C.length),R=0;R<C.length;++R){var B=C[R];I[R]=[h(B[0],-1/0),h(B[1],-1/0),h(B[0],1/0),h(B[1],1/0)]}return I}function m(C,I,R){var B=[];return i(R,function(N,D){var O=I[N],$=I[D];if(!(O[0]===$[0]||O[0]===$[1]||O[1]===$[0]||O[1]===$[1])){var Y=C[O[0]],X=C[O[1]],ee=C[$[0]],Q=C[$[1]];s(Y,X,ee,Q)&&B.push([N,D])}}),B}function y(C,I,R,B){var N=[];return i(R,B,function(D,O){var $=I[D];if(!($[0]===O||$[1]===O)){var Y=C[O],X=C[$[0]],ee=C[$[1]];s(X,ee,Y,Y)&&N.push([D,O])}}),N}function _(C,I,R,B,N){var D,O,$=C.map(function(de){return[l(de[0]),l(de[1])]});for(D=0;D<R.length;++D){var Y=R[D];O=Y[0];var X=Y[1],ee=I[O],Q=I[X],Z=v(c(C[ee[0]]),c(C[ee[1]]),c(C[Q[0]]),c(C[Q[1]]));if(!!Z){var q=C.length;C.push([f(Z[0]),f(Z[1])]),$.push(Z),B.push([O,q],[X,q])}}for(B.sort(function(de,Me){if(de[0]!==Me[0])return de[0]-Me[0];var Ie=$[de[1]],Ee=$[Me[1]];return u(Ie[0],Ee[0])||u(Ie[1],Ee[1])}),D=B.length-1;D>=0;--D){var ae=B[D];O=ae[0];var ie=I[O],we=ie[0],Te=ie[1],he=C[we],xe=C[Te];if((he[0]-xe[0]||he[1]-xe[1])<0){var Se=we;we=Te,Te=Se}ie[0]=we;var ye=ie[1]=ae[1],re;for(N&&(re=ie[2]);D>0&&B[D-1][0]===O;){var ae=B[--D],se=ae[1];N?I.push([ye,se,re]):I.push([ye,se]),ye=se}N?I.push([ye,Te,re]):I.push([ye,Te])}return $}function S(C,I,R){for(var B=I.length,N=new o(B),D=[],O=0;O<I.length;++O){var $=I[O],Y=p($[0]),X=p($[1]);D.push([h(Y[0],-1/0),h(X[0],-1/0),h(Y[1],1/0),h(X[1],1/0)])}i(D,function(ae,ie){N.link(ae,ie)});for(var ee=!0,Q=new Array(B),O=0;O<B;++O){var Z=N.find(O);Z!==O&&(ee=!1,C[Z]=[Math.min(C[O][0],C[Z][0]),Math.min(C[O][1],C[Z][1])])}if(ee)return null;for(var q=0,O=0;O<B;++O){var Z=N.find(O);Z===O?(Q[O]=q,C[q++]=C[O]):Q[O]=-1}C.length=q;for(var O=0;O<B;++O)Q[O]<0&&(Q[O]=Q[N.find(O)]);return Q}function M(C,I){return C[0]-I[0]||C[1]-I[1]}function w(C,I){var R=C[0]-I[0]||C[1]-I[1];return R||(C[2]<I[2]?-1:C[2]>I[2]?1:0)}function A(C,I,R){if(C.length!==0){if(I)for(var B=0;B<C.length;++B){var N=C[B],D=I[N[0]],O=I[N[1]];N[0]=Math.min(D,O),N[1]=Math.max(D,O)}else for(var B=0;B<C.length;++B){var N=C[B],D=N[0],O=N[1];N[0]=Math.min(D,O),N[1]=Math.max(D,O)}R?C.sort(w):C.sort(M);for(var $=1,B=1;B<C.length;++B){var Y=C[B-1],X=C[B];X[0]===Y[0]&&X[1]===Y[1]&&(!R||X[2]===Y[2])||(C[$++]=X)}C.length=$}}function k(C,I,R){var B=S(C,[],g(C));return A(I,B,R),!!B}function T(C,I,R){var B=d(C,I),N=m(C,I,B),D=g(C),O=y(C,I,B,D),$=_(C,I,N,O,R),Y=S(C,$);return A(I,Y,R),Y?!0:N.length>0||O.length>0}function L(C,I,R){var B;if(R){B=I;for(var N=new Array(I.length),D=0;D<I.length;++D){var O=I[D];N[D]=[O[0],O[1],R[D]]}I=N}for(var $=k(C,I,!!R);T(C,I,!!R);)$=!0;if(!!R&&$){B.length=0,R.length=0;for(var D=0;D<I.length;++D){var O=I[D];B.push([O[0],O[1]]),R.push(O[2])}}return $}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(r,a,n){a.exports=v;var o=r("big-rat/mul"),i=r("big-rat/div"),s=r("big-rat/sub"),l=r("big-rat/sign"),u=r("rat-vec/sub"),f=r("rat-vec/add"),c=r("rat-vec/muls");function h(p,d){return s(o(p[0],d[1]),o(p[1],d[0]))}function v(p,d,g,m){var y=u(d,p),_=u(m,g),S=h(y,_);if(l(S)===0)return null;var M=u(p,g),w=h(_,M),A=i(w,S),k=c(y,A),T=f(p,k);return T}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(r,a,n){a.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(r,a,n){var o=r("./colorScale"),i=r("lerp");a.exports=s;function s(c){var h,v,p,d,g,m,y,_,S,M,w;if(c||(c={}),_=(c.nshades||72)-1,y=c.format||"hex",m=c.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!o[m])throw Error(m+" not a supported colorscale");g=o[m]}else if(Array.isArray(m))g=m.slice();else throw Error("unsupported colormap option",m);if(g.length>_+1)throw new Error(m+" map requires nshades to be at least size "+g.length);Array.isArray(c.alpha)?c.alpha.length!==2?M=[1,1]:M=c.alpha.slice():typeof c.alpha=="number"?M=[c.alpha,c.alpha]:M=[1,1],h=g.map(function(L){return Math.round(L.index*_)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var A=g.map(function(L,C){var I=g[C].index,R=g[C].rgb.slice();return R.length===4&&R[3]>=0&&R[3]<=1||(R[3]=M[0]+(M[1]-M[0])*I),R}),S=[];for(w=0;w<h.length-1;++w){d=h[w+1]-h[w],v=A[w],p=A[w+1];for(var k=0;k<d;k++){var T=k/d;S.push([Math.round(i(v[0],p[0],T)),Math.round(i(v[1],p[1],T)),Math.round(i(v[2],p[2],T)),i(v[3],p[3],T)])}}return S.push(g[g.length-1].rgb.concat(M[1])),y==="hex"?S=S.map(u):y==="rgbaString"?S=S.map(f):y==="float"&&(S=S.map(l)),S}function l(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function u(c){for(var h,v="#",p=0;p<3;++p)h=c[p],h=h.toString(16),v+=("00"+h).substr(h.length);return v}function f(c){return"rgba("+c.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(r,a,n){a.exports=c;var o=r("robust-orientation"),i=r("signum"),s=r("two-sum"),l=r("robust-product"),u=r("robust-sum");function f(h,v,p){var d=s(h[0],-v[0]),g=s(h[1],-v[1]),m=s(p[0],-v[0]),y=s(p[1],-v[1]),_=u(l(d,m),l(g,y));return _[_.length-1]>=0}function c(h,v,p,d){var g=o(v,p,d);if(g===0){var m=i(o(h,v,p)),y=i(o(h,v,d));if(m===y){if(m===0){var _=f(h,v,p),S=f(h,v,d);return _===S?0:_?1:-1}return 0}else{if(y===0)return m>0||f(h,v,d)?-1:1;if(m===0)return y>0||f(h,v,p)?1:-1}return i(y-m)}var M=o(h,v,p);if(M>0)return g>0&&o(h,v,d)>0?1:-1;if(M<0)return g>0||o(h,v,d)>0?1:-1;var w=o(h,v,d);return w>0||f(h,v,p)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(r,a,n){a.exports=function(i){return i<0?-1:i>0?1:0}},{}],56:[function(r,a,n){a.exports=s;var o=Math.min;function i(l,u){return l-u}function s(l,u){var f=l.length,c=l.length-u.length;if(c)return c;switch(f){case 0:return 0;case 1:return l[0]-u[0];case 2:return l[0]+l[1]-u[0]-u[1]||o(l[0],l[1])-o(u[0],u[1]);case 3:var h=l[0]+l[1],v=u[0]+u[1];if(c=h+l[2]-(v+u[2]),c)return c;var p=o(l[0],l[1]),d=o(u[0],u[1]);return o(p,l[2])-o(d,u[2])||o(p+l[2],h)-o(d+u[2],v);case 4:var g=l[0],m=l[1],y=l[2],_=l[3],S=u[0],M=u[1],w=u[2],A=u[3];return g+m+y+_-(S+M+w+A)||o(g,m,y,_)-o(S,M,w,A,S)||o(g+m,g+y,g+_,m+y,m+_,y+_)-o(S+M,S+w,S+A,M+w,M+A,w+A)||o(g+m+y,g+m+_,g+y+_,m+y+_)-o(S+M+w,S+M+A,S+w+A,M+w+A);default:for(var k=l.slice().sort(i),T=u.slice().sort(i),L=0;L<f;++L)if(c=k[L]-T[L],c)return c;return 0}}},{}],57:[function(r,a,n){var o=r("compare-cell"),i=r("cell-orientation");a.exports=s;function s(l,u){return o(l,u)||i(l)-i(u)}},{"cell-orientation":47,"compare-cell":56}],58:[function(r,a,n){var o=r("./lib/ch1d"),i=r("./lib/ch2d"),s=r("./lib/chnd");a.exports=l;function l(u){var f=u.length;if(f===0)return[];if(f===1)return[[0]];var c=u[0].length;return c===0?[]:c===1?o(u):c===2?i(u):s(u,c)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(r,a,n){a.exports=o;function o(i){for(var s=0,l=0,u=1;u<i.length;++u)i[u][0]<i[s][0]&&(s=u),i[u][0]>i[l][0]&&(l=u);return s<l?[[s],[l]]:s>l?[[l],[s]]:[[s]]}},{}],60:[function(r,a,n){a.exports=i;var o=r("monotone-convex-hull-2d");function i(s){var l=o(s),u=l.length;if(u<=2)return[];for(var f=new Array(u),c=l[u-1],h=0;h<u;++h){var v=l[h];f[h]=[c,v],c=v}return f}},{"monotone-convex-hull-2d":246}],61:[function(r,a,n){a.exports=u;var o=r("incremental-convex-hull"),i=r("affine-hull");function s(f,c){for(var h=f.length,v=new Array(h),p=0;p<c.length;++p)v[p]=f[c[p]];for(var d=c.length,p=0;p<h;++p)c.indexOf(p)<0&&(v[d++]=f[p]);return v}function l(f,c){for(var h=f.length,v=c.length,p=0;p<h;++p)for(var d=f[p],g=0;g<d.length;++g){var m=d[g];if(m<v)d[g]=c[m];else{m=m-v;for(var y=0;y<v;++y)m>=c[y]&&(m+=1);d[g]=m}}return f}function u(f,c){try{return o(f,!0)}catch{var h=i(f);if(h.length<=c)return[];var v=s(f,h),p=o(v,!0);return l(p,h)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(r,a,n){function o(s,l,u,f,c,h){var v=6*c*c-6*c,p=3*c*c-4*c+1,d=-6*c*c+6*c,g=3*c*c-2*c;if(s.length){h||(h=new Array(s.length));for(var m=s.length-1;m>=0;--m)h[m]=v*s[m]+p*l[m]+d*u[m]+g*f[m];return h}return v*s+p*l+d*u[m]+g*f}function i(s,l,u,f,c,h){var v=c-1,p=c*c,d=v*v,g=(1+2*c)*d,m=c*d,y=p*(3-2*c),_=p*v;if(s.length){h||(h=new Array(s.length));for(var S=s.length-1;S>=0;--S)h[S]=g*s[S]+m*l[S]+y*u[S]+_*f[S];return h}return g*s+m*l+y*u+_*f}a.exports=i,a.exports.derivative=o},{}],63:[function(r,a,n){var o=r("incremental-convex-hull"),i=r("uniq");a.exports=f;function s(c,h){this.point=c,this.index=h}function l(c,h){for(var v=c.point,p=h.point,d=v.length,g=0;g<d;++g){var m=p[g]-v[g];if(m)return m}return 0}function u(c,h,v){if(c===1)return v?[[-1,0]]:[];var p=h.map(function(_,S){return[_[0],S]});p.sort(function(_,S){return _[0]-S[0]});for(var d=new Array(c-1),g=1;g<c;++g){var m=p[g-1],y=p[g];d[g-1]=[m[1],y[1]]}return v&&d.push([-1,d[0][1]],[d[c-1][1],-1]),d}function f(c,h){var v=c.length;if(v===0)return[];var p=c[0].length;if(p<1)return[];if(p===1)return u(v,c,h);for(var d=new Array(v),g=1,m=0;m<v;++m){for(var y=c[m],_=new Array(p+1),S=0,M=0;M<p;++M){var w=y[M];_[M]=w,S+=w*w}_[p]=S,d[m]=new s(_,m),g=Math.max(S,g)}i(d,l),v=d.length;for(var A=new Array(v+p+1),k=new Array(v+p+1),T=(p+1)*(p+1)*g,L=new Array(p+1),m=0;m<=p;++m)L[m]=0;L[p]=T,A[0]=L.slice(),k[0]=-1;for(var m=0;m<=p;++m){var _=L.slice();_[m]=1,A[m+1]=_,k[m+1]=-1}for(var m=0;m<v;++m){var C=d[m];A[m+p+1]=C.point,k[m+p+1]=C.index}var I=o(A,!1);if(h?I=I.filter(function(R){for(var B=0,N=0;N<=p;++N){var D=k[R[N]];if(D<0&&++B>=2)return!1;R[N]=D}return!0}):I=I.filter(function(R){for(var B=0;B<=p;++B){var N=k[R[B]];if(N<0)return!1;R[B]=N}return!0}),p&1)for(var m=0;m<I.length;++m){var C=I[m],_=C[0];C[0]=C[1],C[1]=_}return I}},{"incremental-convex-hull":233,uniq:310}],64:[function(r,a,n){(function(o){(function(){var i=!1;if(typeof Float64Array!="undefined"){var s=new Float64Array(1),l=new Uint32Array(s.buffer);if(s[0]=1,i=!0,l[1]===1072693248){let f=function(v,p){return l[0]=v,l[1]=p,s[0]},c=function(v){return s[0]=v,l[0]},h=function(v){return s[0]=v,l[1]};a.exports=function(p){return s[0]=p,[l[0],l[1]]},a.exports.pack=f,a.exports.lo=c,a.exports.hi=h}else if(l[0]===1072693248){let f=function(v,p){return l[1]=v,l[0]=p,s[0]},c=function(v){return s[0]=v,l[1]},h=function(v){return s[0]=v,l[0]};a.exports=function(p){return s[0]=p,[l[1],l[0]]},a.exports.pack=f,a.exports.lo=c,a.exports.hi=h}else i=!1}if(!i){let f=function(v,p){return u.writeUInt32LE(v,0,!0),u.writeUInt32LE(p,4,!0),u.readDoubleLE(0,!0)},c=function(v){return u.writeDoubleLE(v,0,!0),u.readUInt32LE(0,!0)},h=function(v){return u.writeDoubleLE(v,0,!0),u.readUInt32LE(4,!0)};var u=new o(8);a.exports=function(p){return u.writeDoubleLE(p,0,!0),[u.readUInt32LE(0,!0),u.readUInt32LE(4,!0)]},a.exports.pack=f,a.exports.lo=c,a.exports.hi=h}a.exports.sign=function(f){return a.exports.hi(f)>>>31},a.exports.exponent=function(f){var c=a.exports.hi(f);return(c<<1>>>21)-1023},a.exports.fraction=function(f){var c=a.exports.lo(f),h=a.exports.hi(f),v=h&(1<<20)-1;return h&2146435072&&(v+=1<<20),[c,v]},a.exports.denormalized=function(f){var c=a.exports.hi(f);return!(c&2146435072)}}).call(this)}).call(this,r("buffer").Buffer)},{buffer:3}],65:[function(r,a,n){function o(l,u,f){var c=l[f]|0;if(c<=0)return[];var h=new Array(c),v;if(f===l.length-1)for(v=0;v<c;++v)h[v]=u;else for(v=0;v<c;++v)h[v]=o(l,u,f+1);return h}function i(l,u){var f,c;for(f=new Array(l),c=0;c<l;++c)f[c]=u;return f}function s(l,u){switch(typeof u=="undefined"&&(u=0),typeof l){case"number":if(l>0)return i(l|0,u);break;case"object":if(typeof l.length=="number")return o(l,u,0);break}return[]}a.exports=s},{}],66:[function(r,a,n){a.exports=i;var o=r("uniq");function i(s,l){var u=s.length;if(typeof l!="number"){l=0;for(var f=0;f<u;++f){var c=s[f];l=Math.max(l,c[0],c[1])}l=(l|0)+1}l=l|0;for(var h=new Array(l),f=0;f<l;++f)h[f]=[];for(var f=0;f<u;++f){var c=s[f];h[c[0]].push(c[1]),h[c[1]].push(c[0])}for(var v=0;v<l;++v)o(h[v],function(p,d){return p-d});return h}},{uniq:310}],67:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s||0,f=l||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[u*i[12]+i[8],u*i[13]+i[9],u*i[14]+i[10],u*i[15]+i[11]],[f*i[12]-i[8],f*i[13]-i[9],f*i[14]-i[10],f*i[15]-i[11]]]}},{}],68:[function(r,a,n){a.exports=c;var o=r("cubic-hermite"),i=r("binary-search-bounds");function s(h,v,p){return Math.min(v,Math.max(h,p))}function l(h,v,p){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=h.slice().reverse(),this._velocity=v.slice().reverse(),this._time=[p],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var u=l.prototype;u.flush=function(h){var v=i.gt(this._time,h)-1;v<=0||(this._time.splice(0,v),this._state.splice(0,v*this.dimension),this._velocity.splice(0,v*this.dimension))},u.curve=function(h){var v=this._time,p=v.length,d=i.le(v,h),g=this._scratch[0],m=this._state,y=this._velocity,_=this.dimension,S=this.bounds;if(d<0)for(var M=_-1,w=0;w<_;++w,--M)g[w]=m[M];else if(d>=p-1)for(var M=m.length-1,A=h-v[p-1],w=0;w<_;++w,--M)g[w]=m[M]+A*y[M];else{for(var M=_*(d+1)-1,k=v[d],T=v[d+1],L=T-k||1,C=this._scratch[1],I=this._scratch[2],R=this._scratch[3],B=this._scratch[4],N=!0,w=0;w<_;++w,--M)C[w]=m[M],R[w]=y[M]*L,I[w]=m[M+_],B[w]=y[M+_]*L,N=N&&C[w]===I[w]&&R[w]===B[w]&&R[w]===0;if(N)for(var w=0;w<_;++w)g[w]=C[w];else o(C,R,I,B,(h-k)/L,g)}for(var D=S[0],O=S[1],w=0;w<_;++w)g[w]=s(D[w],O[w],g[w]);return g},u.dcurve=function(h){var v=this._time,p=v.length,d=i.le(v,h),g=this._scratch[0],m=this._state,y=this._velocity,_=this.dimension;if(d>=p-1){var S=m.length-1;h-v[p-1];for(var M=0;M<_;++M,--S)g[M]=y[S]}else{for(var S=_*(d+1)-1,w=v[d],A=v[d+1],k=A-w||1,T=this._scratch[1],L=this._scratch[2],C=this._scratch[3],I=this._scratch[4],R=!0,M=0;M<_;++M,--S)T[M]=m[S],C[M]=y[S]*k,L[M]=m[S+_],I[M]=y[S+_]*k,R=R&&T[M]===L[M]&&C[M]===I[M]&&C[M]===0;if(R)for(var M=0;M<_;++M)g[M]=0;else{o.derivative(T,C,L,I,(h-w)/k,g);for(var M=0;M<_;++M)g[M]/=k}}return g},u.lastT=function(){var h=this._time;return h[h.length-1]},u.stable=function(){for(var h=this._velocity,v=h.length,p=this.dimension-1;p>=0;--p)if(h[--v])return!1;return!0},u.jump=function(h){var v=this.lastT(),p=this.dimension;if(!(h<v||arguments.length!==p+1)){var d=this._state,g=this._velocity,m=d.length-this.dimension,y=this.bounds,_=y[0],S=y[1];this._time.push(v,h);for(var M=0;M<2;++M)for(var w=0;w<p;++w)d.push(d[m++]),g.push(0);this._time.push(h);for(var w=p;w>0;--w)d.push(s(_[w-1],S[w-1],arguments[w])),g.push(0)}},u.push=function(h){var v=this.lastT(),p=this.dimension;if(!(h<v||arguments.length!==p+1)){var d=this._state,g=this._velocity,m=d.length-this.dimension,y=h-v,_=this.bounds,S=_[0],M=_[1],w=y>1e-6?1/y:0;this._time.push(h);for(var A=p;A>0;--A){var k=s(S[A-1],M[A-1],arguments[A]);d.push(k),g.push((k-d[m++])*w)}}},u.set=function(h){var v=this.dimension;if(!(h<this.lastT()||arguments.length!==v+1)){var p=this._state,d=this._velocity,g=this.bounds,m=g[0],y=g[1];this._time.push(h);for(var _=v;_>0;--_)p.push(s(m[_-1],y[_-1],arguments[_])),d.push(0)}},u.move=function(h){var v=this.lastT(),p=this.dimension;if(!(h<=v||arguments.length!==p+1)){var d=this._state,g=this._velocity,m=d.length-this.dimension,y=this.bounds,_=y[0],S=y[1],M=h-v,w=M>1e-6?1/M:0;this._time.push(h);for(var A=p;A>0;--A){var k=arguments[A];d.push(s(_[A-1],S[A-1],d[m++]+k)),g.push(k*w)}}},u.idle=function(h){var v=this.lastT();if(!(h<v)){var p=this.dimension,d=this._state,g=this._velocity,m=d.length-p,y=this.bounds,_=y[0],S=y[1],M=h-v;this._time.push(h);for(var w=p-1;w>=0;--w)d.push(s(_[w],S[w],d[m]+M*g[m])),g.push(0),m+=1}};function f(h){for(var v=new Array(h),p=0;p<h;++p)v[p]=0;return v}function c(h,v,p){switch(arguments.length){case 0:return new l([0],[0],0);case 1:if(typeof h=="number"){var d=f(h);return new l(d,d,0)}else return new l(h,f(h.length),0);case 2:if(typeof v=="number"){var d=f(h.length);return new l(h,d,+v)}else p=0;case 3:if(h.length!==v.length)throw new Error("state and velocity lengths must match");return new l(h,v,p)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(r,a,n){a.exports=M;var o=0,i=1;function s(w,A,k,T,L,C){this._color=w,this.key=A,this.value=k,this.left=T,this.right=L,this._count=C}function l(w){return new s(w._color,w.key,w.value,w.left,w.right,w._count)}function u(w,A){return new s(w,A.key,A.value,A.left,A.right,A._count)}function f(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}function c(w,A){this._compare=w,this.root=A}var h=c.prototype;Object.defineProperty(h,"keys",{get:function(){var w=[];return this.forEach(function(A,k){w.push(A)}),w}}),Object.defineProperty(h,"values",{get:function(){var w=[];return this.forEach(function(A,k){w.push(k)}),w}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(w,A){for(var k=this._compare,T=this.root,L=[],C=[];T;){var I=k(w,T.key);L.push(T),C.push(I),I<=0?T=T.left:T=T.right}L.push(new s(o,w,A,null,null,1));for(var R=L.length-2;R>=0;--R){var T=L[R];C[R]<=0?L[R]=new s(T._color,T.key,T.value,L[R+1],T.right,T._count+1):L[R]=new s(T._color,T.key,T.value,T.left,L[R+1],T._count+1)}for(var R=L.length-1;R>1;--R){var B=L[R-1],T=L[R];if(B._color===i||T._color===i)break;var N=L[R-2];if(N.left===B)if(B.left===T){var D=N.right;if(D&&D._color===o)B._color=i,N.right=u(i,D),N._color=o,R-=1;else{if(N._color=o,N.left=B.right,B._color=i,B.right=N,L[R-2]=B,L[R-1]=T,f(N),f(B),R>=3){var O=L[R-3];O.left===N?O.left=B:O.right=B}break}}else{var D=N.right;if(D&&D._color===o)B._color=i,N.right=u(i,D),N._color=o,R-=1;else{if(B.right=T.left,N._color=o,N.left=T.right,T._color=i,T.left=B,T.right=N,L[R-2]=T,L[R-1]=B,f(N),f(B),f(T),R>=3){var O=L[R-3];O.left===N?O.left=T:O.right=T}break}}else if(B.right===T){var D=N.left;if(D&&D._color===o)B._color=i,N.left=u(i,D),N._color=o,R-=1;else{if(N._color=o,N.right=B.left,B._color=i,B.left=N,L[R-2]=B,L[R-1]=T,f(N),f(B),R>=3){var O=L[R-3];O.right===N?O.right=B:O.left=B}break}}else{var D=N.left;if(D&&D._color===o)B._color=i,N.left=u(i,D),N._color=o,R-=1;else{if(B.left=T.right,N._color=o,N.right=T.left,T._color=i,T.right=B,T.left=N,L[R-2]=T,L[R-1]=B,f(N),f(B),f(T),R>=3){var O=L[R-3];O.right===N?O.right=T:O.left=T}break}}}return L[0]._color=i,new c(k,L[0])};function v(w,A){if(A.left){var k=v(w,A.left);if(k)return k}var k=w(A.key,A.value);if(k)return k;if(A.right)return v(w,A.right)}function p(w,A,k,T){var L=A(w,T.key);if(L<=0){if(T.left){var C=p(w,A,k,T.left);if(C)return C}var C=k(T.key,T.value);if(C)return C}if(T.right)return p(w,A,k,T.right)}function d(w,A,k,T,L){var C=k(w,L.key),I=k(A,L.key),R;if(C<=0&&(L.left&&(R=d(w,A,k,T,L.left),R)||I>0&&(R=T(L.key,L.value),R)))return R;if(I>0&&L.right)return d(w,A,k,T,L.right)}h.forEach=function(A,k,T){if(!!this.root)switch(arguments.length){case 1:return v(A,this.root);case 2:return p(k,this._compare,A,this.root);case 3:return this._compare(k,T)>=0?void 0:d(k,T,this._compare,A,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var w=[],A=this.root;A;)w.push(A),A=A.left;return new g(this,w)}}),Object.defineProperty(h,"end",{get:function(){for(var w=[],A=this.root;A;)w.push(A),A=A.right;return new g(this,w)}}),h.at=function(w){if(w<0)return new g(this,[]);for(var A=this.root,k=[];;){if(k.push(A),A.left){if(w<A.left._count){A=A.left;continue}w-=A.left._count}if(!w)return new g(this,k);if(w-=1,A.right){if(w>=A.right._count)break;A=A.right}else break}return new g(this,[])},h.ge=function(w){for(var A=this._compare,k=this.root,T=[],L=0;k;){var C=A(w,k.key);T.push(k),C<=0&&(L=T.length),C<=0?k=k.left:k=k.right}return T.length=L,new g(this,T)},h.gt=function(w){for(var A=this._compare,k=this.root,T=[],L=0;k;){var C=A(w,k.key);T.push(k),C<0&&(L=T.length),C<0?k=k.left:k=k.right}return T.length=L,new g(this,T)},h.lt=function(w){for(var A=this._compare,k=this.root,T=[],L=0;k;){var C=A(w,k.key);T.push(k),C>0&&(L=T.length),C<=0?k=k.left:k=k.right}return T.length=L,new g(this,T)},h.le=function(w){for(var A=this._compare,k=this.root,T=[],L=0;k;){var C=A(w,k.key);T.push(k),C>=0&&(L=T.length),C<0?k=k.left:k=k.right}return T.length=L,new g(this,T)},h.find=function(w){for(var A=this._compare,k=this.root,T=[];k;){var L=A(w,k.key);if(T.push(k),L===0)return new g(this,T);L<=0?k=k.left:k=k.right}return new g(this,[])},h.remove=function(w){var A=this.find(w);return A?A.remove():this},h.get=function(w){for(var A=this._compare,k=this.root;k;){var T=A(w,k.key);if(T===0)return k.value;T<=0?k=k.left:k=k.right}};function g(w,A){this.tree=w,this._stack=A}var m=g.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new g(this.tree,this._stack.slice())};function y(w,A){w.key=A.key,w.value=A.value,w.left=A.left,w.right=A.right,w._color=A._color,w._count=A._count}function _(w){for(var A,k,T,L,C=w.length-1;C>=0;--C){if(A=w[C],C===0){A._color=i;return}if(k=w[C-1],k.left===A){if(T=k.right,T.right&&T.right._color===o){if(T=k.right=l(T),L=T.right=l(T.right),k.right=T.left,T.left=k,T.right=L,T._color=k._color,A._color=i,k._color=i,L._color=i,f(k),f(T),C>1){var I=w[C-2];I.left===k?I.left=T:I.right=T}w[C-1]=T;return}else if(T.left&&T.left._color===o){if(T=k.right=l(T),L=T.left=l(T.left),k.right=L.left,T.left=L.right,L.left=k,L.right=T,L._color=k._color,k._color=i,T._color=i,A._color=i,f(k),f(T),f(L),C>1){var I=w[C-2];I.left===k?I.left=L:I.right=L}w[C-1]=L;return}if(T._color===i)if(k._color===o){k._color=i,k.right=u(o,T);return}else{k.right=u(o,T);continue}else{if(T=l(T),k.right=T.left,T.left=k,T._color=k._color,k._color=o,f(k),f(T),C>1){var I=w[C-2];I.left===k?I.left=T:I.right=T}w[C-1]=T,w[C]=k,C+1<w.length?w[C+1]=A:w.push(A),C=C+2}}else{if(T=k.left,T.left&&T.left._color===o){if(T=k.left=l(T),L=T.left=l(T.left),k.left=T.right,T.right=k,T.left=L,T._color=k._color,A._color=i,k._color=i,L._color=i,f(k),f(T),C>1){var I=w[C-2];I.right===k?I.right=T:I.left=T}w[C-1]=T;return}else if(T.right&&T.right._color===o){if(T=k.left=l(T),L=T.right=l(T.right),k.left=L.right,T.right=L.left,L.right=k,L.left=T,L._color=k._color,k._color=i,T._color=i,A._color=i,f(k),f(T),f(L),C>1){var I=w[C-2];I.right===k?I.right=L:I.left=L}w[C-1]=L;return}if(T._color===i)if(k._color===o){k._color=i,k.left=u(o,T);return}else{k.left=u(o,T);continue}else{if(T=l(T),k.left=T.right,T.right=k,T._color=k._color,k._color=o,f(k),f(T),C>1){var I=w[C-2];I.right===k?I.right=T:I.left=T}w[C-1]=T,w[C]=k,C+1<w.length?w[C+1]=A:w.push(A),C=C+2}}}}m.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var A=new Array(w.length),k=w[w.length-1];A[A.length-1]=new s(k._color,k.key,k.value,k.left,k.right,k._count);for(var T=w.length-2;T>=0;--T){var k=w[T];k.left===w[T+1]?A[T]=new s(k._color,k.key,k.value,A[T+1],k.right,k._count):A[T]=new s(k._color,k.key,k.value,k.left,A[T+1],k._count)}if(k=A[A.length-1],k.left&&k.right){var L=A.length;for(k=k.left;k.right;)A.push(k),k=k.right;var C=A[L-1];A.push(new s(k._color,C.key,C.value,k.left,k.right,k._count)),A[L-1].key=k.key,A[L-1].value=k.value;for(var T=A.length-2;T>=L;--T)k=A[T],A[T]=new s(k._color,k.key,k.value,k.left,A[T+1],k._count);A[L-1].left=A[L]}if(k=A[A.length-1],k._color===o){var I=A[A.length-2];I.left===k?I.left=null:I.right===k&&(I.right=null),A.pop();for(var T=0;T<A.length;++T)A[T]._count--;return new c(this.tree._compare,A[0])}else if(k.left||k.right){k.left?y(k,k.left):k.right&&y(k,k.right),k._color=i;for(var T=0;T<A.length-1;++T)A[T]._count--;return new c(this.tree._compare,A[0])}else{if(A.length===1)return new c(this.tree._compare,null);for(var T=0;T<A.length;++T)A[T]._count--;var R=A[A.length-2];_(A),R.left===k?R.left=null:R.right=null}return new c(this.tree._compare,A[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var w=0,A=this._stack;if(A.length===0){var k=this.tree.root;return k?k._count:0}else A[A.length-1].left&&(w=A[A.length-1].left._count);for(var T=A.length-2;T>=0;--T)A[T+1]===A[T].right&&(++w,A[T].left&&(w+=A[T].left._count));return w},enumerable:!0}),m.next=function(){var w=this._stack;if(w.length!==0){var A=w[w.length-1];if(A.right)for(A=A.right;A;)w.push(A),A=A.left;else for(w.pop();w.length>0&&w[w.length-1].right===A;)A=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var A=w.length-1;A>0;--A)if(w[A-1].left===w[A])return!0;return!1}}),m.update=function(w){var A=this._stack;if(A.length===0)throw new Error("Can't update empty node!");var k=new Array(A.length),T=A[A.length-1];k[k.length-1]=new s(T._color,T.key,w,T.left,T.right,T._count);for(var L=A.length-2;L>=0;--L)T=A[L],T.left===A[L+1]?k[L]=new s(T._color,T.key,T.value,k[L+1],T.right,T._count):k[L]=new s(T._color,T.key,T.value,T.left,k[L+1],T._count);return new c(this.tree._compare,k[0])},m.prev=function(){var w=this._stack;if(w.length!==0){var A=w[w.length-1];if(A.left)for(A=A.left;A;)w.push(A),A=A.right;else for(w.pop();w.length>0&&w[w.length-1].left===A;)A=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var A=w.length-1;A>0;--A)if(w[A-1].right===w[A])return!0;return!1}});function S(w,A){return w<A?-1:w>A?1:0}function M(w){return new c(w||S,null)}},{}],70:[function(r,a,n){a.exports=A;var o=r("./lib/text.js"),i=r("./lib/lines.js"),s=r("./lib/background.js"),l=r("./lib/cube.js"),u=r("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(k,T){return k[0]=T[0],k[1]=T[1],k[2]=T[2],k}function h(k){this.gl=k,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=s(k)}var v=h.prototype;v.update=function(k){k=k||{};function T(ee,Q,Z){if(Z in k){var q=k[Z],ae=this[Z],ie;(ee?Array.isArray(q)&&Array.isArray(q[0]):Array.isArray(q))?this[Z]=ie=[Q(q[0]),Q(q[1]),Q(q[2])]:this[Z]=ie=[Q(q),Q(q),Q(q)];for(var we=0;we<3;++we)if(ie[we]!==ae[we])return!0}return!1}var L=T.bind(this,!1,Number),C=T.bind(this,!1,Boolean),I=T.bind(this,!1,String),R=T.bind(this,!0,function(ee){if(Array.isArray(ee)){if(ee.length===3)return[+ee[0],+ee[1],+ee[2],1];if(ee.length===4)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),B,N=!1,D=!1;if("bounds"in k)for(var O=k.bounds,$=0;$<2;++$)for(var Y=0;Y<3;++Y)O[$][Y]!==this.bounds[$][Y]&&(D=!0),this.bounds[$][Y]=O[$][Y];if("ticks"in k){B=k.ticks,N=!0,this.autoTicks=!1;for(var $=0;$<3;++$)this.tickSpacing[$]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in k||"tickSpacing"in k||(this.autoTicks=!0),D=!0,N=!0,this._firstInit=!1),D&&this.autoTicks&&(B=u.create(this.bounds,this.tickSpacing),N=!0),N){for(var $=0;$<3;++$)B[$].sort(function(Q,Z){return Q.x-Z.x});u.equal(B,this.ticks)?N=!1:this.ticks=B}C("tickEnable"),I("tickFont")&&(N=!0),L("tickSize"),L("tickAngle"),L("tickPad"),R("tickColor");var X=I("labels");I("labelFont")&&(X=!0),C("labelEnable"),L("labelSize"),L("labelPad"),R("labelColor"),C("lineEnable"),C("lineMirror"),L("lineWidth"),R("lineColor"),C("lineTickEnable"),C("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),R("lineTickColor"),C("gridEnable"),L("gridWidth"),R("gridColor"),C("zeroEnable"),R("zeroLineColor"),L("zeroLineWidth"),C("backgroundEnable"),R("backgroundColor"),this._text?this._text&&(X||N)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&N&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new p,new p,new p];function g(k,T,L,C,I){for(var R=k.primalOffset,B=k.primalMinor,N=k.mirrorOffset,D=k.mirrorMinor,O=C[T],$=0;$<3;++$)if(T!==$){var Y=R,X=N,ee=B,Q=D;O&1<<$&&(Y=N,X=R,ee=D,Q=B),Y[$]=L[0][$],X[$]=L[1][$],I[$]>0?(ee[$]=-1,Q[$]=0):(ee[$]=0,Q[$]=1)}}var m=[0,0,0],y={model:f,view:f,projection:f,_ortho:!1};v.isOpaque=function(){return!0},v.isTransparent=function(){return!1},v.drawTransparent=function(k){};var _=0,S=[0,0,0],M=[0,0,0],w=[0,0,0];v.draw=function(k){k=k||y;for(var T=this.gl,L=k.model||f,C=k.view||f,I=k.projection||f,R=this.bounds,B=k._ortho||!1,N=l(L,C,I,R,B),D=N.cubeEdges,O=N.axis,$=C[12],Y=C[13],X=C[14],ee=C[15],Q=B?2:1,Z=Q*this.pixelRatio*(I[3]*$+I[7]*Y+I[11]*X+I[15]*ee)/T.drawingBufferHeight,q=0;q<3;++q)this.lastCubeProps.cubeEdges[q]=D[q],this.lastCubeProps.axis[q]=O[q];for(var ae=d,q=0;q<3;++q)g(d[q],q,this.bounds,D,O);for(var T=this.gl,ie=m,q=0;q<3;++q)this.backgroundEnable[q]?ie[q]=O[q]:ie[q]=0;this._background.draw(L,C,I,R,ie,this.backgroundColor),this._lines.bind(L,C,I,this);for(var q=0;q<3;++q){var we=[0,0,0];O[q]>0?we[q]=R[1][q]:we[q]=R[0][q];for(var Te=0;Te<2;++Te){var he=(q+1+Te)%3,xe=(q+1+(Te^1))%3;this.gridEnable[he]&&this._lines.drawGrid(he,xe,this.bounds,we,this.gridColor[he],this.gridWidth[he]*this.pixelRatio)}for(var Te=0;Te<2;++Te){var he=(q+1+Te)%3,xe=(q+1+(Te^1))%3;this.zeroEnable[xe]&&Math.min(R[0][xe],R[1][xe])<=0&&Math.max(R[0][xe],R[1][xe])>=0&&this._lines.drawZero(he,xe,this.bounds,we,this.zeroLineColor[xe],this.zeroLineWidth[xe]*this.pixelRatio)}}for(var q=0;q<3;++q){this.lineEnable[q]&&this._lines.drawAxisLine(q,this.bounds,ae[q].primalOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio),this.lineMirror[q]&&this._lines.drawAxisLine(q,this.bounds,ae[q].mirrorOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio);for(var Se=c(S,ae[q].primalMinor),ye=c(M,ae[q].mirrorMinor),re=this.lineTickLength,Te=0;Te<3;++Te){var se=Z/L[5*Te];Se[Te]*=re[Te]*se,ye[Te]*=re[Te]*se}this.lineTickEnable[q]&&this._lines.drawAxisTicks(q,ae[q].primalOffset,Se,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio),this.lineTickMirror[q]&&this._lines.drawAxisTicks(q,ae[q].mirrorOffset,ye,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio)}this._lines.unbind(),this._text.bind(L,C,I,this.pixelRatio);var de,Me=.5,Ie,Ee;function qe(Xe){Ee=[0,0,0],Ee[Xe]=1}function be(Xe,Ke,vt){var Ze=(Xe+1)%3,Qe=(Xe+2)%3,Je=Ke[Ze],je=Ke[Qe],$e=vt[Ze],Ye=vt[Qe];if(Je>0&&Ye>0){qe(Ze);return}else if(Je>0&&Ye<0){qe(Ze);return}else if(Je<0&&Ye>0){qe(Ze);return}else if(Je<0&&Ye<0){qe(Ze);return}else if(je>0&&$e>0){qe(Qe);return}else if(je>0&&$e<0){qe(Qe);return}else if(je<0&&$e>0){qe(Qe);return}else if(je<0&&$e<0){qe(Qe);return}}for(var q=0;q<3;++q){for(var oe=ae[q].primalMinor,ce=ae[q].mirrorMinor,ue=c(w,ae[q].primalOffset),Te=0;Te<3;++Te)this.lineTickEnable[q]&&(ue[Te]+=Z*oe[Te]*Math.max(this.lineTickLength[Te],0)/L[5*Te]);var Re=[0,0,0];if(Re[q]=1,this.tickEnable[q]){this.tickAngle[q]===-3600?(this.tickAngle[q]=0,this.tickAlign[q]="auto"):this.tickAlign[q]=-1,Ie=1,de=[this.tickAlign[q],Me,Ie],de[0]==="auto"?de[0]=_:de[0]=parseInt(""+de[0]),Ee=[0,0,0],be(q,oe,ce);for(var Te=0;Te<3;++Te)ue[Te]+=Z*oe[Te]*this.tickPad[Te]/L[5*Te];this._text.drawTicks(q,this.tickSize[q],this.tickAngle[q],ue,this.tickColor[q],Re,Ee,de)}if(this.labelEnable[q]){Ie=0,Ee=[0,0,0],this.labels[q].length>4&&(qe(q),Ie=1),de=[this.labelAlign[q],Me,Ie],de[0]==="auto"?de[0]=_:de[0]=parseInt(""+de[0]);for(var Te=0;Te<3;++Te)ue[Te]+=Z*oe[Te]*this.labelPad[Te]/L[5*Te];ue[q]+=.5*(R[0][q]+R[1][q]),this._text.drawLabel(q,this.labelSize[q],this.labelAngle[q],ue,this.labelColor[q],[0,0,0],Ee,de)}}this._text.unbind()},v.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function A(k,T){var L=new h(k);return L.update(T),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(r,a,n){a.exports=f;var o=r("gl-buffer"),i=r("gl-vao"),s=r("./shaders").bg;function l(c,h,v,p){this.gl=c,this.buffer=h,this.vao=v,this.shader=p}var u=l.prototype;u.draw=function(c,h,v,p,d,g){for(var m=!1,y=0;y<3;++y)m=m||d[y];if(!!m){var _=this.gl;_.enable(_.POLYGON_OFFSET_FILL),_.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:v,bounds:p,enable:d,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),_.disable(_.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(c){for(var h=[],v=[],p=0,d=0;d<3;++d)for(var g=(d+1)%3,m=(d+2)%3,y=[0,0,0],_=[0,0,0],S=-1;S<=1;S+=2){v.push(p,p+2,p+1,p+1,p+2,p+3),y[d]=S,_[d]=S;for(var M=-1;M<=1;M+=2){y[g]=M;for(var w=-1;w<=1;w+=2)y[m]=w,h.push(y[0],y[1],y[2],_[0],_[1],_[2]),p+=1}var A=g;g=m,m=A}var k=o(c,new Float32Array(h)),T=o(c,new Uint16Array(v),c.ELEMENT_ARRAY_BUFFER),L=i(c,[{buffer:k,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:c.FLOAT,size:3,offset:12,stride:24}],T),C=s(c);return C.attributes.position.location=0,C.attributes.normal.location=1,new l(c,k,L,C)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(r,a,n){a.exports=S;var o=r("bit-twiddle"),i=r("gl-mat4/multiply"),s=r("split-polygon"),l=r("robust-orientation"),u=new Array(16),f=new Array(8),c=new Array(8),h=new Array(3),v=[0,0,0];(function(){for(var M=0;M<8;++M)f[M]=[1,1,1,1],c[M]=[1,1,1]})();function p(M,w,A){for(var k=0;k<4;++k){M[k]=A[12+k];for(var T=0;T<3;++T)M[k]+=w[T]*A[4*T+k]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(M){for(var w=0;w<d.length;++w)if(M=s.positive(M,d[w]),M.length<3)return 0;for(var A=M[0],k=A[0]/A[3],T=A[1]/A[3],L=0,w=1;w+1<M.length;++w){var C=M[w],I=M[w+1],R=C[0]/C[3],B=C[1]/C[3],N=I[0]/I[3],D=I[1]/I[3],O=R-k,$=B-T,Y=N-k,X=D-T;L+=Math.abs(O*X-$*Y)}return L}var m=[1,1,1],y=[0,0,0],_={cubeEdges:m,axis:y};function S(M,w,A,k,T){i(u,w,M),i(u,A,u);for(var L=0,C=0;C<2;++C){h[2]=k[C][2];for(var I=0;I<2;++I){h[1]=k[I][1];for(var R=0;R<2;++R)h[0]=k[R][0],p(f[L],h,u),L+=1}}for(var B=-1,C=0;C<8;++C){for(var N=f[C][3],D=0;D<3;++D)c[C][D]=f[C][D]/N;T&&(c[C][2]*=-1),N<0&&(B<0||c[C][2]<c[B][2])&&(B=C)}if(B<0){B=0;for(var O=0;O<3;++O){for(var $=(O+2)%3,Y=(O+1)%3,X=-1,ee=-1,Q=0;Q<2;++Q){var Z=Q<<O,q=Z+(Q<<$)+(1-Q<<Y),ae=Z+(1-Q<<$)+(Q<<Y);l(c[Z],c[q],c[ae],v)<0||(Q?X=1:ee=1)}if(X<0||ee<0){ee>X&&(B|=1<<O);continue}for(var Q=0;Q<2;++Q){var Z=Q<<O,q=Z+(Q<<$)+(1-Q<<Y),ae=Z+(1-Q<<$)+(Q<<Y),ie=g([f[Z],f[q],f[ae],f[Z+(1<<$)+(1<<Y)]]);Q?X=ie:ee=ie}if(ee>X){B|=1<<O;continue}}}for(var we=7^B,Te=-1,C=0;C<8;++C)C===B||C===we||(Te<0||c[Te][1]>c[C][1])&&(Te=C);for(var he=-1,C=0;C<3;++C){var xe=Te^1<<C;if(!(xe===B||xe===we)){he<0&&(he=xe);var Y=c[xe];Y[0]<c[he][0]&&(he=xe)}}for(var Se=-1,C=0;C<3;++C){var xe=Te^1<<C;if(!(xe===B||xe===we||xe===he)){Se<0&&(Se=xe);var Y=c[xe];Y[0]>c[Se][0]&&(Se=xe)}}var ye=m;ye[0]=ye[1]=ye[2]=0,ye[o.log2(he^Te)]=Te&he,ye[o.log2(Te^Se)]=Te&Se;var re=Se^7;re===B||re===we?(re=he^7,ye[o.log2(Se^re)]=re&Se):ye[o.log2(he^re)]=re&he;for(var se=y,de=B,O=0;O<3;++O)de&1<<O?se[O]=-1:se[O]=1;return _}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(r,a,n){a.exports=m;var o=r("gl-buffer"),i=r("gl-vao"),s=r("./shaders").line,l=[0,0,0],u=[0,0,0],f=[0,0,0],c=[0,0,0],h=[1,1];function v(y){return y[0]=y[1]=y[2]=0,y}function p(y,_){return y[0]=_[0],y[1]=_[1],y[2]=_[2],y}function d(y,_,S,M,w,A,k,T){this.gl=y,this.vertBuffer=_,this.vao=S,this.shader=M,this.tickCount=w,this.tickOffset=A,this.gridCount=k,this.gridOffset=T}var g=d.prototype;g.bind=function(y,_,S){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=_,this.shader.uniforms.projection=S,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(y,_,S,M,w){var A=v(u);this.shader.uniforms.majorAxis=u,A[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=A;var k=p(c,S);k[y]+=_[0][y],this.shader.uniforms.offset=k,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=M;var T=v(f);T[(y+2)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6);var T=v(f);T[(y+1)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(y,_,S,M,w){if(!!this.tickCount[y]){var A=v(l);A[y]=1,this.shader.uniforms.majorAxis=A,this.shader.uniforms.offset=_,this.shader.uniforms.minorAxis=S,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=w;var k=v(f);k[y]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},g.drawGrid=function(y,_,S,M,w,A){if(!!this.gridCount[y]){var k=v(u);k[_]=S[1][_]-S[0][_],this.shader.uniforms.minorAxis=k;var T=p(c,M);T[_]+=S[0][_],this.shader.uniforms.offset=T;var L=v(l);L[y]=1,this.shader.uniforms.majorAxis=L;var C=v(f);C[y]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},g.drawZero=function(y,_,S,M,w,A){var k=v(u);this.shader.uniforms.majorAxis=k,k[y]=S[1][y]-S[0][y],this.shader.uniforms.minorAxis=k;var T=p(c,M);T[y]+=S[0][y],this.shader.uniforms.offset=T;var L=v(f);L[_]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(y,_,S){var M=[],w=[0,0,0],A=[0,0,0],k=[0,0,0],T=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var C=M.length/3|0,I=0;I<S[L].length;++I){var R=+S[L][I].x;M.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var B=M.length/3|0;w[L]=C,A[L]=B-C;for(var C=M.length/3|0,N=0;N<S[L].length;++N){var R=+S[L][N].x;M.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var B=M.length/3|0;k[L]=C,T[L]=B-C}var D=o(y,new Float32Array(M)),O=i(y,[{buffer:D,type:y.FLOAT,size:3,stride:0,offset:0}]),$=s(y);return $.attributes.position.location=0,new d(y,D,O,$,A,w,T,k)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(r,a,n){var o=r("glslify"),i=r("gl-shader"),s=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),l=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);n.line=function(v){return i(v,s,l,null,[{name:"position",type:"vec3"}])};var u=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);n.text=function(v){return i(v,u,f,null,[{name:"position",type:"vec3"}])};var c=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),h=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);n.bg=function(v){return i(v,c,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(r,a,n){(function(o){(function(){a.exports=m;var i=r("gl-buffer"),s=r("gl-vao"),l=r("vectorize-text"),u=r("./shaders").text,f=window||o.global||{},c=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var h=3;function v(y,_,S,M){this.gl=y,this.shader=_,this.buffer=S,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var p=v.prototype,d=[0,0];p.bind=function(y,_,S,M){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=y,w.view=_,w.projection=S,w.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},p.unbind=function(){this.vao.unbind()},p.update=function(y,_,S,M,w){var A=[];function k(O,$,Y,X,ee,Q){var Z=c[Y];Z||(Z=c[Y]={});var q=Z[$];q||(q=Z[$]=g($,{triangles:!0,font:Y,textAlign:"center",textBaseline:"middle",lineSpacing:ee,styletags:Q}));for(var ae=(X||12)/12,ie=q.positions,we=q.cells,Te=0,he=we.length;Te<he;++Te)for(var xe=we[Te],Se=2;Se>=0;--Se){var ye=ie[xe[Se]];A.push(ae*ye[0],-ae*ye[1],O)}}for(var T=[0,0,0],L=[0,0,0],C=[0,0,0],I=[0,0,0],R=1.25,B={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},N=0;N<3;++N){C[N]=A.length/h|0,k(.5*(y[0][N]+y[1][N]),_[N],S[N],12,R,B),I[N]=(A.length/h|0)-C[N],T[N]=A.length/h|0;for(var D=0;D<M[N].length;++D)!M[N][D].text||k(M[N][D].x,M[N][D].text,M[N][D].font||w,M[N][D].fontSize||12,R,B);L[N]=(A.length/h|0)-T[N]}this.buffer.update(A),this.tickOffset=T,this.tickCount=L,this.labelOffset=C,this.labelCount=I},p.drawTicks=function(y,_,S,M,w,A,k,T){!this.tickCount[y]||(this.shader.uniforms.axis=A,this.shader.uniforms.color=w,this.shader.uniforms.angle=S,this.shader.uniforms.scale=_,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y]))},p.drawLabel=function(y,_,S,M,w,A,k,T){!this.labelCount[y]||(this.shader.uniforms.axis=A,this.shader.uniforms.color=w,this.shader.uniforms.angle=S,this.shader.uniforms.scale=_,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.labelCount[y],this.labelOffset[y]))},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function g(y,_){try{return l(y,_)}catch(S){return console.warn('error vectorizing text:"'+y+'" error:',S),{cells:[],positions:[]}}}function m(y,_,S,M,w,A){var k=i(y),T=s(y,[{buffer:k,size:3}]),L=u(y);L.attributes.position.location=0;var C=new v(y,L,k,T);return C.update(_,S,M,w,A),C}}).call(this)}).call(this,r("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(r,a,n){n.create=i,n.equal=s;function o(l,u){var f=l+"",c=f.indexOf("."),h=0;c>=0&&(h=f.length-c-1);var v=Math.pow(10,h),p=Math.round(l*u*v),d=p+"";if(d.indexOf("e")>=0)return d;var g=p/v,m=p%v;p<0?(g=-Math.ceil(g)|0,m=-m|0):(g=Math.floor(g)|0,m=m|0);var y=""+g;if(p<0&&(y="-"+y),h){for(var _=""+m;_.length<h;)_="0"+_;return y+"."+_}else return y}function i(l,u){for(var f=[],c=0;c<3;++c){var h=[];.5*(l[0][c]+l[1][c]);for(var v=0;v*u[c]<=l[1][c];++v)h.push({x:v*u[c],text:o(u[c],v)});for(var v=-1;v*u[c]>=l[0][c];--v)h.push({x:v*u[c],text:o(u[c],v)});f.push(h)}return f}function s(l,u){for(var f=0;f<3;++f){if(l[f].length!==u[f].length)return!1;for(var c=0;c<l[f].length;++c){var h=l[f][c],v=u[f][c];if(h.x!==v.x||h.text!==v.text||h.font!==v.font||h.fontColor!==v.fontColor||h.fontSize!==v.fontSize||h.dx!==v.dx||h.dy!==v.dy)return!1}}return!0}},{}],77:[function(r,a,n){a.exports=_;var o=r("extract-frustum-planes"),i=r("split-polygon"),s=r("./lib/cube.js"),l=r("gl-mat4/multiply"),u=r("gl-mat4/transpose"),f=r("gl-vec4/transformMat4"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function v(S,M,w){this.lo=S,this.hi=M,this.pixelsPerDataUnit=w}var p=[0,0,0,1],d=[0,0,0,1];function g(S,M,w,A,k){for(var T=0;T<3;++T){for(var L=p,C=d,I=0;I<3;++I)C[I]=L[I]=w[I];C[3]=L[3]=1,C[T]+=1,f(C,C,M),C[3]<0&&(S[T]=1/0),L[T]-=1,f(L,L,M),L[3]<0&&(S[T]=1/0);var R=(L[0]/L[3]-C[0]/C[3])*A,B=(L[1]/L[3]-C[1]/C[3])*k;S[T]=.25*Math.sqrt(R*R+B*B)}return S}var m=[new v(1/0,-1/0,1/0),new v(1/0,-1/0,1/0),new v(1/0,-1/0,1/0)],y=[0,0,0];function _(S,M,w,A,k){var T=M.model||c,L=M.view||c,C=M.projection||c,I=M._ortho||!1,R=S.bounds,k=k||s(T,L,C,R,I),B=k.axis;l(h,L,T),l(h,C,h);for(var N=m,D=0;D<3;++D)N[D].lo=1/0,N[D].hi=-1/0,N[D].pixelsPerDataUnit=1/0;var O=o(u(h,h));u(h,h);for(var $=0;$<3;++$){var Y=($+1)%3,X=($+2)%3,ee=y;e:for(var D=0;D<2;++D){var Q=[];if(B[$]<0!=!!D){ee[$]=R[D][$];for(var Z=0;Z<2;++Z){ee[Y]=R[Z^D][Y];for(var q=0;q<2;++q)ee[X]=R[q^Z^D][X],Q.push(ee.slice())}for(var ae=I?5:4,Z=ae;Z===ae;++Z){if(Q.length===0)continue e;Q=i.positive(Q,O[Z])}for(var Z=0;Z<Q.length;++Z)for(var X=Q[Z],ie=g(y,h,X,w,A),q=0;q<3;++q)N[q].lo=Math.min(N[q].lo,X[q]),N[q].hi=Math.max(N[q].hi,X[q]),q!==$&&(N[q].pixelsPerDataUnit=Math.min(N[q].pixelsPerDataUnit,Math.abs(ie[q])))}}}return N}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(r,a,n){var o=r("typedarray-pool"),i=r("ndarray-ops"),s=r("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(d,g,m,y,_){this.gl=d,this.type=g,this.handle=m,this.length=y,this.usage=_}var f=u.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function c(d,g,m,y,_,S){var M=_.length*_.BYTES_PER_ELEMENT;if(S<0)return d.bufferData(g,_,y),M;if(M+S>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(g,S,_),m}function h(d,g){for(var m=o.malloc(d.length,g),y=d.length,_=0;_<y;++_)m[_]=d[_];return m}function v(d,g){for(var m=1,y=g.length-1;y>=0;--y){if(g[y]!==m)return!1;m*=d[y]}return!0}f.update=function(d,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof d=="object"&&typeof d.shape!="undefined"){var m=d.dtype;if(l.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var y=gl.getExtension("OES_element_index_uint");y&&m!=="uint16"?m="uint32":m="uint16"}if(m===d.dtype&&v(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,d.data,g):this.length=c(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),g);else{var _=o.malloc(d.size,m),S=s(_,d.shape);i.assign(S,d),g<0?this.length=c(this.gl,this.type,this.length,this.usage,_,g):this.length=c(this.gl,this.type,this.length,this.usage,_.subarray(0,d.size),g),o.free(_)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=h(d,"uint16"):M=h(d,"float32"),g<0?this.length=c(this.gl,this.type,this.length,this.usage,M,g):this.length=c(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),g),o.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=c(this.gl,this.type,this.length,this.usage,d,g);else if(typeof d=="number"||d===void 0){if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function p(d,g,m,y){if(m=m||d.ARRAY_BUFFER,y=y||d.DYNAMIC_DRAW,m!==d.ARRAY_BUFFER&&m!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==d.DYNAMIC_DRAW&&y!==d.STATIC_DRAW&&y!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var _=d.createBuffer(),S=new u(d,m,_,0,y);return S.update(g),S}a.exports=p},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(r,a,n){var o=r("gl-vec3");a.exports=function(s,l){var u=s.positions,f=s.vectors,c={positions:[],vertexIntensity:[],vertexIntensityBounds:s.vertexIntensityBounds,vectors:[],cells:[],coneOffset:s.coneOffset,colormap:s.colormap};if(s.positions.length===0)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),c;for(var h=0,v=1/0,p=-1/0,d=1/0,g=-1/0,m=1/0,y=-1/0,_=null,S=null,M=[],w=1/0,A=!1,k=0;k<u.length;k++){var T=u[k];v=Math.min(T[0],v),p=Math.max(T[0],p),d=Math.min(T[1],d),g=Math.max(T[1],g),m=Math.min(T[2],m),y=Math.max(T[2],y);var L=f[k];if(o.length(L)>h&&(h=o.length(L)),k){var C=2*o.distance(_,T)/(o.length(S)+o.length(L));C?(w=Math.min(w,C),A=!1):A=!0}A||(_=T,S=L),M.push(L)}var I=[v,d,m],R=[p,g,y];l&&(l[0]=I,l[1]=R),h===0&&(h=1);var B=1/h;isFinite(w)||(w=1),c.vectorScale=w;var N=s.coneSize||.5;s.absoluteConeSize&&(N=s.absoluteConeSize*B),c.coneScale=N;for(var k=0,D=0;k<u.length;k++)for(var T=u[k],O=T[0],$=T[1],Y=T[2],X=M[k],ee=o.length(X)*B,Q=0,Z=8;Q<Z;Q++){c.positions.push([O,$,Y,D++]),c.positions.push([O,$,Y,D++]),c.positions.push([O,$,Y,D++]),c.positions.push([O,$,Y,D++]),c.positions.push([O,$,Y,D++]),c.positions.push([O,$,Y,D++]),c.vectors.push(X),c.vectors.push(X),c.vectors.push(X),c.vectors.push(X),c.vectors.push(X),c.vectors.push(X),c.vertexIntensity.push(ee,ee,ee),c.vertexIntensity.push(ee,ee,ee);var q=c.positions.length;c.cells.push([q-6,q-5,q-4],[q-3,q-2,q-1])}return c};var i=r("./lib/shaders");a.exports.createMesh=r("./create_mesh"),a.exports.createConeMesh=function(s,l){return a.exports.createMesh(s,l,{shaders:i,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(r,a,n){var o=r("gl-shader"),i=r("gl-buffer"),s=r("gl-vao"),l=r("gl-texture2d"),u=r("gl-mat4/multiply"),f=r("gl-mat4/invert"),c=r("ndarray"),h=r("colormap"),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(M,w,A,k,T,L,C,I,R,B,N){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=A,this.pickShader=k,this.trianglePositions=T,this.triangleVectors=L,this.triangleColors=I,this.triangleUVs=R,this.triangleIds=C,this.triangleVAO=B,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=N,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=v,this._view=v,this._projection=v,this._resolution=[1,1]}var d=p.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function g(M){for(var w=h({colormap:M,nshades:256,format:"rgba"}),A=new Uint8Array(256*4),k=0;k<256;++k){for(var T=w[k],L=0;L<3;++L)A[4*k+L]=T[L];A[4*k+3]=T[3]*255}return c(A,[256,256,4],[4,0,1])}function m(M){for(var w=M.length,A=new Array(w),k=0;k<w;++k)A[k]=M[k][2];return A}d.update=function(M){M=M||{};var w=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(g(M.colormap)),this.texture.generateMipmap());var A=M.cells,k=M.positions,T=M.vectors;if(!k||!A||!T)return;var L=[],C=[],I=[],R=[],B=[];this.cells=A,this.positions=k,this.vectors=T;var N=M.meshColor||[1,1,1,1],D=M.vertexIntensity,O=1/0,$=-1/0;if(D)if(M.vertexIntensityBounds)O=+M.vertexIntensityBounds[0],$=+M.vertexIntensityBounds[1];else for(var Y=0;Y<D.length;++Y){var X=D[Y];O=Math.min(O,X),$=Math.max($,X)}else for(var Y=0;Y<k.length;++Y){var X=k[Y][2];O=Math.min(O,X),$=Math.max($,X)}D?this.intensity=D:this.intensity=m(k),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Y=0;Y<k.length;++Y)for(var ee=k[Y],Q=0;Q<3;++Q)isNaN(ee[Q])||!isFinite(ee[Q])||(this.bounds[0][Q]=Math.min(this.bounds[0][Q],ee[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],ee[Q]));var Z=0;e:for(var Y=0;Y<A.length;++Y){var q=A[Y];switch(q.length){case 3:for(var Q=0;Q<3;++Q)for(var ae=q[Q],ee=k[ae],ie=0;ie<3;++ie)if(isNaN(ee[ie])||!isFinite(ee[ie]))continue e;for(var Q=0;Q<3;++Q){var ae=q[2-Q],ee=k[ae];L.push(ee[0],ee[1],ee[2],ee[3]);var we=T[ae];C.push(we[0],we[1],we[2],we[3]||0);var Te=N;Te.length===3?I.push(Te[0],Te[1],Te[2],1):I.push(Te[0],Te[1],Te[2],Te[3]);var he;D?he=[(D[ae]-O)/($-O),0]:he=[(ee[2]-O)/($-O),0],R.push(he[0],he[1]),B.push(Y)}Z+=1;break}}this.triangleCount=Z,this.trianglePositions.update(L),this.triangleVectors.update(C),this.triangleColors.update(I),this.triangleUVs.update(R),this.triangleIds.update(new Uint32Array(B))},d.drawTransparent=d.draw=function(M){M=M||{};for(var w=this.gl,A=M.model||v,k=M.view||v,T=M.projection||v,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)L[0][C]=Math.max(L[0][C],this.clipBounds[0][C]),L[1][C]=Math.min(L[1][C],this.clipBounds[1][C]);var I={model:A,view:k,projection:T,inverseModel:v.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};I.inverseModel=f(I.inverseModel,I.model),w.disable(w.CULL_FACE),this.texture.bind(0);var R=new Array(16);u(R,I.view,I.model),u(R,I.projection,R),f(R,R);for(var C=0;C<3;++C)I.eyePosition[C]=R[12+C]/R[15];for(var B=R[15],C=0;C<3;++C)B+=this.lightPosition[C]*R[4*C+3];for(var C=0;C<3;++C){for(var N=R[12+C],D=0;D<3;++D)N+=R[4*D+C]*this.lightPosition[D];I.lightPosition[C]=N/B}if(this.triangleCount>0){var O=this.triShader;O.bind(),O.uniforms=I,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var w=this.gl,A=M.model||v,k=M.view||v,T=M.projection||v,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)L[0][C]=Math.max(L[0][C],this.clipBounds[0][C]),L[1][C]=Math.min(L[1][C],this.clipBounds[1][C]);this._model=[].slice.call(A),this._view=[].slice.call(k),this._projection=[].slice.call(T),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var I={model:A,view:k,projection:T,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},R=this.pickShader;R.bind(),R.uniforms=I,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var w=M.value[0]+256*M.value[1]+65536*M.value[2],A=this.cells[w],k=this.positions[A[1]].slice(0,3),T={position:k,dataCoordinate:k,index:Math.floor(A[1]/48)};return this.traceType==="cone"?T.index=Math.floor(A[1]/48):this.traceType==="streamtube"&&(T.intensity=this.intensity[A[1]],T.velocity=this.vectors[A[1]].slice(0,3),T.divergence=this.vectors[A[1]][3],T.index=w),T},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function y(M,w){var A=o(M,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return A.attributes.position.location=0,A.attributes.color.location=2,A.attributes.uv.location=3,A.attributes.vector.location=4,A}function _(M,w){var A=o(M,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return A.attributes.position.location=0,A.attributes.id.location=1,A.attributes.vector.location=4,A}function S(M,w,A){var k=A.shaders;arguments.length===1&&(w=M,M=w.gl);var T=y(M,k),L=_(M,k),C=l(M,c(new Uint8Array([255,255,255,255]),[1,1,4]));C.generateMipmap(),C.minFilter=M.LINEAR_MIPMAP_LINEAR,C.magFilter=M.LINEAR;var I=i(M),R=i(M),B=i(M),N=i(M),D=i(M),O=s(M,[{buffer:I,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:M.FLOAT,size:4},{buffer:N,type:M.FLOAT,size:2},{buffer:R,type:M.FLOAT,size:4}]),$=new p(M,C,T,L,I,R,D,B,N,O,A.traceType||"cone");return $.update(w),$}a.exports=S},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(r,a,n){var o=r("glslify"),i=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),s=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);n.meshShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(r,a,n){a.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(r,a,n){var o=r("./1.0/numbers");a.exports=function(s){return o[s]}},{"./1.0/numbers":82}],84:[function(r,a,n){a.exports=p;var o=r("gl-buffer"),i=r("gl-vao"),s=r("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(d,g,m,y){this.gl=d,this.shader=y,this.buffer=g,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=u.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(d){var g=this.gl,m=this.shader.uniforms;this.shader.bind();var y=m.view=d.view||l,_=m.projection=d.projection||l;m.model=d.model||l,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var S=y[12],M=y[13],w=y[14],A=y[15],k=d._ortho||!1,T=k?2:1,L=T*this.pixelRatio*(_[3]*S+_[7]*M+_[11]*w+_[15]*A)/g.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)g.lineWidth(this.lineWidth[C]*this.pixelRatio),m.capSize=this.capSize[C]*L,this.lineCount[C]&&g.drawArrays(g.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};function c(d,g){for(var m=0;m<3;++m)d[0][m]=Math.min(d[0][m],g[m]),d[1][m]=Math.max(d[1][m],g[m])}var h=function(){for(var d=new Array(3),g=0;g<3;++g){for(var m=[],y=1;y<=2;++y)for(var _=-1;_<=1;_+=2){var S=(y+g)%3,M=[0,0,0];M[S]=_,m.push(M)}d[g]=m}return d}();function v(d,g,m,y){for(var _=h[y],S=0;S<_.length;++S){var M=_[S];d.push(g[0],g[1],g[2],m[0],m[1],m[2],m[3],M[0],M[1],M[2])}return _.length}f.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=d.color||[[0,0,0],[0,0,0],[0,0,0]],m=d.position,y=d.error;if(Array.isArray(g[0])||(g=[g,g,g]),m&&y){var _=[],S=m.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=M;e:for(var A=0;A<S;++A){for(var k=m[A],T=0;T<3;++T)if(isNaN(k[T])||!isFinite(k[T]))continue e;var L=y[A],C=g[w];if(Array.isArray(C[0])&&(C=g[A]),C.length===3?C=[C[0],C[1],C[2],1]:C.length===4&&(C=[C[0],C[1],C[2],C[3]],!this.hasAlpha&&C[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][w])||isNaN(L[1][w]))){if(L[0][w]<0){var I=k.slice();I[w]+=L[0][w],_.push(k[0],k[1],k[2],C[0],C[1],C[2],C[3],0,0,0,I[0],I[1],I[2],C[0],C[1],C[2],C[3],0,0,0),c(this.bounds,I),M+=2+v(_,I,C,w)}if(L[1][w]>0){var I=k.slice();I[w]+=L[1][w],_.push(k[0],k[1],k[2],C[0],C[1],C[2],C[3],0,0,0,I[0],I[1],I[2],C[0],C[1],C[2],C[3],0,0,0),c(this.bounds,I),M+=2+v(_,I,C,w)}}}this.lineCount[w]=M-this.lineOffset[w]}this.buffer.update(_)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function p(d){var g=d.gl,m=o(g),y=i(g,[{buffer:m,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:g.FLOAT,size:3,offset:28,stride:40}]),_=s(g);_.attributes.position.location=0,_.attributes.color.location=1,_.attributes.offset.location=2;var S=new u(g,m,y,_);return S.update(d),S}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(r,a,n){var o=r("glslify"),i=r("gl-shader"),s=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),l=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);a.exports=function(u){return i(u,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(r,a,n){var o=r("gl-texture2d");a.exports=M;var i=null,s,l,u,f;function c(w){var A=w.getParameter(w.FRAMEBUFFER_BINDING),k=w.getParameter(w.RENDERBUFFER_BINDING),T=w.getParameter(w.TEXTURE_BINDING_2D);return[A,k,T]}function h(w,A){w.bindFramebuffer(w.FRAMEBUFFER,A[0]),w.bindRenderbuffer(w.RENDERBUFFER,A[1]),w.bindTexture(w.TEXTURE_2D,A[2])}function v(w,A){var k=w.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL);i=new Array(k+1);for(var T=0;T<=k;++T){for(var L=new Array(k),C=0;C<T;++C)L[C]=w.COLOR_ATTACHMENT0+C;for(var C=T;C<k;++C)L[C]=w.NONE;i[T]=L}}function p(w){switch(w){case s:throw new Error("gl-fbo: Framebuffer unsupported");case l:throw new Error("gl-fbo: Framebuffer incomplete attachment");case u:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(w,A,k,T,L,C){if(!T)return null;var I=o(w,A,k,L,T);return I.magFilter=w.NEAREST,I.minFilter=w.NEAREST,I.mipSamples=1,I.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,C,w.TEXTURE_2D,I.handle,0),I}function g(w,A,k,T,L){var C=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,C),w.renderbufferStorage(w.RENDERBUFFER,T,A,k),w.framebufferRenderbuffer(w.FRAMEBUFFER,L,w.RENDERBUFFER,C),C}function m(w){var A=c(w.gl),k=w.gl,T=w.handle=k.createFramebuffer(),L=w._shape[0],C=w._shape[1],I=w.color.length,R=w._ext,B=w._useStencil,N=w._useDepth,D=w._colorType;k.bindFramebuffer(k.FRAMEBUFFER,T);for(var O=0;O<I;++O)w.color[O]=d(k,L,C,D,k.RGBA,k.COLOR_ATTACHMENT0+O);I===0?(w._color_rb=g(k,L,C,k.RGBA4,k.COLOR_ATTACHMENT0),R&&R.drawBuffersWEBGL(i[0])):I>1&&R.drawBuffersWEBGL(i[I]);var $=k.getExtension("WEBGL_depth_texture");$?B?w.depth=d(k,L,C,$.UNSIGNED_INT_24_8_WEBGL,k.DEPTH_STENCIL,k.DEPTH_STENCIL_ATTACHMENT):N&&(w.depth=d(k,L,C,k.UNSIGNED_SHORT,k.DEPTH_COMPONENT,k.DEPTH_ATTACHMENT)):N&&B?w._depth_rb=g(k,L,C,k.DEPTH_STENCIL,k.DEPTH_STENCIL_ATTACHMENT):N?w._depth_rb=g(k,L,C,k.DEPTH_COMPONENT16,k.DEPTH_ATTACHMENT):B&&(w._depth_rb=g(k,L,C,k.STENCIL_INDEX,k.STENCIL_ATTACHMENT));var Y=k.checkFramebufferStatus(k.FRAMEBUFFER);if(Y!==k.FRAMEBUFFER_COMPLETE){w._destroyed=!0,k.bindFramebuffer(k.FRAMEBUFFER,null),k.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(k.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var O=0;O<w.color.length;++O)w.color[O].dispose(),w.color[O]=null;w._color_rb&&(k.deleteRenderbuffer(w._color_rb),w._color_rb=null),h(k,A),p(Y)}h(k,A)}function y(w,A,k,T,L,C,I,R){this.gl=w,this._shape=[A|0,k|0],this._destroyed=!1,this._ext=R,this.color=new Array(L);for(var B=0;B<L;++B)this.color[B]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=T,this._useDepth=C,this._useStencil=I;var N=this,D=[A|0,k|0];Object.defineProperties(D,{0:{get:function(){return N._shape[0]},set:function(O){return N.width=O}},1:{get:function(){return N._shape[1]},set:function(O){return N.height=O}}}),this._shapeVector=D,m(this)}var _=y.prototype;function S(w,A,k){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===A&&w._shape[1]===k)){var T=w.gl,L=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(A<0||A>L||k<0||k>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=A,w._shape[1]=k;for(var C=c(T),I=0;I<w.color.length;++I)w.color[I].shape=w._shape;w._color_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,w._color_rb),T.renderbufferStorage(T.RENDERBUFFER,T.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&T.renderbufferStorage(T.RENDERBUFFER,T.STENCIL_INDEX,w._shape[0],w._shape[1])),T.bindFramebuffer(T.FRAMEBUFFER,w.handle);var R=T.checkFramebufferStatus(T.FRAMEBUFFER);R!==T.FRAMEBUFFER_COMPLETE&&(w.dispose(),h(T,C),p(R)),h(T,C)}}Object.defineProperties(_,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var A=w[0]|0,k=w[1]|0;return S(this,A,k),[A,k]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,S(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,S(this,this._shape[0],w),w},enumerable:!1}}),_.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},_.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var A=0;A<this.color.length;++A)this.color[A].dispose(),this.color[A]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(w,A,k,T){s||(s=w.FRAMEBUFFER_UNSUPPORTED,l=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,u=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=w.getExtension("WEBGL_draw_buffers");if(!i&&L&&v(w,L),Array.isArray(A)&&(T=k,k=A[1]|0,A=A[0]|0),typeof A!="number")throw new Error("gl-fbo: Missing shape parameter");var C=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(A<0||A>C||k<0||k>C)throw new Error("gl-fbo: Parameters are too large for FBO");T=T||{};var I=1;if("color"in T){if(I=Math.max(T.color|0,0),I<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1)if(L){if(I>w.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var R=w.UNSIGNED_BYTE,B=w.getExtension("OES_texture_float");if(T.float&&I>0){if(!B)throw new Error("gl-fbo: Context does not support floating point textures");R=w.FLOAT}else T.preferFloat&&I>0&&B&&(R=w.FLOAT);var N=!0;"depth"in T&&(N=!!T.depth);var D=!1;return"stencil"in T&&(D=!!T.stencil),new y(w,A,k,R,I,N,D,L)}},{"gl-texture2d":146}],87:[function(r,a,n){var o=r("sprintf-js").sprintf,i=r("gl-constants/lookup"),s=r("glsl-shader-name"),l=r("add-line-numbers");a.exports=u;function u(f,c,h){var v=s(c)||"of unknown name (see npm glsl-shader-name)",p="unknown type";h!==void 0&&(p=h===i.FRAGMENT_SHADER?"fragment":"vertex");for(var d=o(`Error compiling %s shader %s:
`,p,v),g=o("%s%s",d,f),m=f.split(`
`),y={},_=0;_<m.length;_++){var S=m[_];if(!(S===""||S==="\0")){var M=parseInt(S.split(":")[2]);if(isNaN(M))throw new Error(o("Could not parse error: %s",S));y[M]=S}}for(var w=l(c).split(`
`),_=0;_<w.length;_++)if(!(!y[_+3]&&!y[_+2]&&!y[_+1])){var A=w[_];if(d+=A+`
`,y[_+1]){var k=y[_+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),d+=o(`^^^ %s

`,k)}}return{long:d.trim(),short:g.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(r,a,n){a.exports=p;var o=r("binary-search-bounds"),i=r("iota-array"),s=r("typedarray-pool"),l=r("gl-shader"),u=r("gl-buffer"),f=r("./lib/shaders");function c(d,g,m,y,_,S,M){this.plot=d,this.shader=g,this.pickShader=m,this.positionBuffer=y,this.weightBuffer=_,this.colorBuffer=S,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var h=c.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var g=this.plot,m=this.shader,y=this.bounds,_=this.numVertices;if(!(_<=0)){var S=g.gl,M=g.dataBox,w=y[2]-y[0],A=y[3]-y[1],k=M[2]-M[0],T=M[3]-M[1];d[0]=2*w/k,d[4]=2*A/T,d[6]=2*(y[0]-M[0])/k-1,d[7]=2*(y[1]-M[1])/T-1,m.bind();var L=m.uniforms;L.viewTransform=d,L.shape=this.shape;var C=m.attributes;this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(S.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),C.color.pointer(S.UNSIGNED_BYTE,!0),S.drawArrays(S.TRIANGLES,0,_)}}}(),h.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(m){var y=this.plot,_=this.pickShader,S=this.bounds,M=this.numVertices;if(!(M<=0)){var w=y.gl,A=y.dataBox,k=S[2]-S[0],T=S[3]-S[1],L=A[2]-A[0],C=A[3]-A[1];d[0]=2*k/L,d[4]=2*T/C,d[6]=2*(S[0]-A[0])/L-1,d[7]=2*(S[1]-A[1])/C-1;for(var I=0;I<4;++I)g[I]=m>>I*8&255;this.pickOffset=m,_.bind();var R=_.uniforms;R.viewTransform=d,R.pickOffset=g,R.shape=this.shape;var B=_.attributes;return this.positionBuffer.bind(),B.position.pointer(),this.weightBuffer.bind(),B.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),B.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,M),m+this.shape[0]*this.shape[1]}}}(),h.pick=function(d,g,m){var y=this.pickOffset,_=this.shape[0]*this.shape[1];if(m<y||m>=y+_)return null;var S=m-y,M=this.xData,w=this.yData;return{object:this,pointId:S,dataCoord:[M[S%this.shape[0]],w[S/this.shape[0]|0]]}},h.update=function(d){d=d||{};var g=d.shape||[0,0],m=d.x||i(g[0]),y=d.y||i(g[1]),_=d.z||new Float32Array(g[0]*g[1]),S=d.zsmooth!==!1;this.xData=m,this.yData=y;var M=d.colorLevels||[0],w=d.colorValues||[0,0,0,1],A=M.length,k=this.bounds,T,L,C,I;S?(T=k[0]=m[0],L=k[1]=y[0],C=k[2]=m[m.length-1],I=k[3]=y[y.length-1]):(T=k[0]=m[0]+(m[1]-m[0])/2,L=k[1]=y[0]+(y[1]-y[0])/2,C=k[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,I=k[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var R=1/(C-T),B=1/(I-L),N=g[0],D=g[1];this.shape=[N,D];var O=(S?(N-1)*(D-1):N*D)*(v.length>>>1);this.numVertices=O;for(var $=s.mallocUint8(O*4),Y=s.mallocFloat32(O*2),X=s.mallocUint8(O*2),ee=s.mallocUint32(O),Q=0,Z=S?N-1:N,q=S?D-1:D,ae=0;ae<q;++ae){var ie,we;S?(ie=B*(y[ae]-L),we=B*(y[ae+1]-L)):(ie=ae<D-1?B*(y[ae]-(y[ae+1]-y[ae])/2-L):B*(y[ae]-(y[ae]-y[ae-1])/2-L),we=ae<D-1?B*(y[ae]+(y[ae+1]-y[ae])/2-L):B*(y[ae]+(y[ae]-y[ae-1])/2-L));for(var Te=0;Te<Z;++Te){var he,xe;S?(he=R*(m[Te]-T),xe=R*(m[Te+1]-T)):(he=Te<N-1?R*(m[Te]-(m[Te+1]-m[Te])/2-T):R*(m[Te]-(m[Te]-m[Te-1])/2-T),xe=Te<N-1?R*(m[Te]+(m[Te+1]-m[Te])/2-T):R*(m[Te]+(m[Te]-m[Te-1])/2-T));for(var Se=0;Se<v.length;Se+=2){var ye=v[Se],re=v[Se+1],se=S?(ae+re)*N+(Te+ye):ae*N+Te,de=_[se],Me=o.le(M,de),Ie,Ee,qe,be;if(Me<0)Ie=w[0],Ee=w[1],qe=w[2],be=w[3];else if(Me===A-1)Ie=w[4*A-4],Ee=w[4*A-3],qe=w[4*A-2],be=w[4*A-1];else{var oe=(de-M[Me])/(M[Me+1]-M[Me]),ce=1-oe,ue=4*Me,Re=4*(Me+1);Ie=ce*w[ue]+oe*w[Re],Ee=ce*w[ue+1]+oe*w[Re+1],qe=ce*w[ue+2]+oe*w[Re+2],be=ce*w[ue+3]+oe*w[Re+3]}$[4*Q]=255*Ie,$[4*Q+1]=255*Ee,$[4*Q+2]=255*qe,$[4*Q+3]=255*be,Y[2*Q]=he*.5+xe*.5,Y[2*Q+1]=ie*.5+we*.5,X[2*Q]=ye,X[2*Q+1]=re,ee[Q]=ae*N+Te,Q+=1}}}this.positionBuffer.update(Y),this.weightBuffer.update(X),this.colorBuffer.update($),this.idBuffer.update(ee),s.free(Y),s.free($),s.free(X),s.free(ee)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function p(d,g){var m=d.gl,y=l(m,f.vertex,f.fragment),_=l(m,f.pickVertex,f.pickFragment),S=u(m),M=u(m),w=u(m),A=u(m),k=new c(d,y,_,S,M,w,A);return k.update(g),d.addObject(k),k}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(r,a,n){var o=r("glslify");a.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(r,a,n){var o=r("glslify"),i=r("gl-shader"),s=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),l=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(c){return i(c,s,l,null,f)},n.createPickShader=function(c){return i(c,s,u,null,f)}},{"gl-shader":132,glslify:231}],91:[function(r,a,n){a.exports=w;var o=r("gl-buffer"),i=r("gl-vao"),s=r("gl-texture2d"),l=new Uint8Array(4),u=new Float32Array(l.buffer);function f(A,k,T,L){return l[0]=L,l[1]=T,l[2]=k,l[3]=A,u[0]}var c=r("binary-search-bounds"),h=r("ndarray"),v=r("./lib/shaders"),p=v.createShader,d=v.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(A,k){for(var T=0,L=0;L<3;++L){var C=A[L]-k[L];T+=C*C}return Math.sqrt(T)}function y(A){for(var k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)k[0][T]=Math.max(A[0][T],k[0][T]),k[1][T]=Math.min(A[1][T],k[1][T]);return k}function _(A,k,T,L){this.arcLength=A,this.position=k,this.index=T,this.dataCoordinate=L}function S(A,k,T,L,C,I){this.gl=A,this.shader=k,this.pickShader=T,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=I,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=S.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(A){this.pickId=A},M.drawTransparent=M.draw=function(A){if(!!this.vertexCount){var k=this.gl,T=this.shader,L=this.vao;T.bind(),T.uniforms={model:A.model||g,view:A.view||g,projection:A.projection||g,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(k.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(A){if(!!this.vertexCount){var k=this.gl,T=this.pickShader,L=this.vao;T.bind(),T.uniforms={model:A.model||g,view:A.view||g,projection:A.projection||g,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(k.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(A){var k,T;this.dirty=!0;var L=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],I=[],R=[],B=0,N=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],O=A.position||A.positions;if(O){var $=A.color||A.colors||[0,0,0,1],Y=A.lineWidth||1,X=!1;e:for(k=1;k<O.length;++k){var ee=O[k-1],Q=O[k];for(I.push(B),R.push(ee.slice()),T=0;T<3;++T){if(isNaN(ee[T])||isNaN(Q[T])||!isFinite(ee[T])||!isFinite(Q[T])){if(!L&&C.length>0){for(var Z=0;Z<24;++Z)C.push(C[C.length-12]);N+=2,X=!0}continue e}D[0][T]=Math.min(D[0][T],ee[T],Q[T]),D[1][T]=Math.max(D[1][T],ee[T],Q[T])}var q,ae;Array.isArray($[0])?(q=$.length>k-1?$[k-1]:$.length>0?$[$.length-1]:[0,0,0,1],ae=$.length>k?$[k]:$.length>0?$[$.length-1]:[0,0,0,1]):q=ae=$,q.length===3&&(q=[q[0],q[1],q[2],1]),ae.length===3&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&q[3]<1&&(this.hasAlpha=!0);var ie;Array.isArray(Y)?ie=Y.length>k-1?Y[k-1]:Y.length>0?Y[Y.length-1]:[0,0,0,1]:ie=Y;var we=B;if(B+=m(ee,Q),X){for(T=0;T<2;++T)C.push(ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],we,ie,q[0],q[1],q[2],q[3]);N+=2,X=!1}C.push(ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],we,ie,q[0],q[1],q[2],q[3],ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],we,-ie,q[0],q[1],q[2],q[3],Q[0],Q[1],Q[2],ee[0],ee[1],ee[2],B,-ie,ae[0],ae[1],ae[2],ae[3],Q[0],Q[1],Q[2],ee[0],ee[1],ee[2],B,ie,ae[0],ae[1],ae[2],ae[3]),N+=4}}if(this.buffer.update(C),I.push(B),R.push(O[O.length-1].slice()),this.bounds=D,this.vertexCount=N,this.points=R,this.arcLength=I,"dashes"in A){var Te=A.dashes,he=Te.slice();for(he.unshift(0),k=1;k<he.length;++k)he[k]=he[k-1]+he[k];var xe=h(new Array(256*4),[256,1,4]);for(k=0;k<256;++k){for(T=0;T<4;++T)xe.set(k,0,T,0);c.le(he,he[he.length-1]*k/255)&1?xe.set(k,0,0,0):xe.set(k,0,0,255)}this.texture.setPixels(xe)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(A){if(!A||A.id!==this.pickId)return null;var k=f(A.value[0],A.value[1],A.value[2],0),T=c.le(this.arcLength,k);if(T<0)return null;if(T===this.arcLength.length-1)return new _(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),T);for(var L=this.points[T],C=this.points[Math.min(T+1,this.points.length-1)],I=(k-this.arcLength[T])/(this.arcLength[T+1]-this.arcLength[T]),R=1-I,B=[0,0,0],N=0;N<3;++N)B[N]=R*L[N]+I*C[N];var D=Math.min(I<.5?T:T+1,this.points.length-1);return new _(k,B,D,this.points[D])};function w(A){var k=A.gl||A.scene&&A.scene.gl,T=p(k);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;var L=d(k);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(k),I=i(k,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),R=h(new Array(256*4),[256,1,4]),B=0;B<256*4;++B)R.data[B]=255;var N=s(k,R);N.wrap=k.REPEAT;var D=new S(k,T,L,C,I,N);return D.update(A),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(r,a,n){a.exports=o;function o(i){var s=new Float32Array(16);return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}},{}],93:[function(r,a,n){a.exports=o;function o(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],94:[function(r,a,n){a.exports=o;function o(i){var s=i[0],l=i[1],u=i[2],f=i[3],c=i[4],h=i[5],v=i[6],p=i[7],d=i[8],g=i[9],m=i[10],y=i[11],_=i[12],S=i[13],M=i[14],w=i[15],A=s*h-l*c,k=s*v-u*c,T=s*p-f*c,L=l*v-u*h,C=l*p-f*h,I=u*p-f*v,R=d*S-g*_,B=d*M-m*_,N=d*w-y*_,D=g*M-m*S,O=g*w-y*S,$=m*w-y*M;return A*$-k*O+T*D+L*N-C*B+I*R}},{}],95:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l+l,v=u+u,p=f+f,d=l*h,g=u*h,m=u*v,y=f*h,_=f*v,S=f*p,M=c*h,w=c*v,A=c*p;return i[0]=1-m-S,i[1]=g+A,i[2]=y-w,i[3]=0,i[4]=g-A,i[5]=1-d-S,i[6]=_+M,i[7]=0,i[8]=y+w,i[9]=_-M,i[10]=1-d-m,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],96:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=u+u,p=f+f,d=c+c,g=u*v,m=u*p,y=u*d,_=f*p,S=f*d,M=c*d,w=h*v,A=h*p,k=h*d;return i[0]=1-(_+M),i[1]=m+k,i[2]=y-A,i[3]=0,i[4]=m-k,i[5]=1-(g+M),i[6]=S+w,i[7]=0,i[8]=y+A,i[9]=S-w,i[10]=1-(g+_),i[11]=0,i[12]=l[0],i[13]=l[1],i[14]=l[2],i[15]=1,i}},{}],97:[function(r,a,n){a.exports=o;function o(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],98:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=s[4],v=s[5],p=s[6],d=s[7],g=s[8],m=s[9],y=s[10],_=s[11],S=s[12],M=s[13],w=s[14],A=s[15],k=l*v-u*h,T=l*p-f*h,L=l*d-c*h,C=u*p-f*v,I=u*d-c*v,R=f*d-c*p,B=g*M-m*S,N=g*w-y*S,D=g*A-_*S,O=m*w-y*M,$=m*A-_*M,Y=y*A-_*w,X=k*Y-T*$+L*O+C*D-I*N+R*B;return X?(X=1/X,i[0]=(v*Y-p*$+d*O)*X,i[1]=(f*$-u*Y-c*O)*X,i[2]=(M*R-w*I+A*C)*X,i[3]=(y*I-m*R-_*C)*X,i[4]=(p*D-h*Y-d*N)*X,i[5]=(l*Y-f*D+c*N)*X,i[6]=(w*L-S*R-A*T)*X,i[7]=(g*R-y*L+_*T)*X,i[8]=(h*$-v*D+d*B)*X,i[9]=(u*D-l*$-c*B)*X,i[10]=(S*I-M*L+A*k)*X,i[11]=(m*L-g*I-_*k)*X,i[12]=(v*N-h*O-p*B)*X,i[13]=(l*O-u*N+f*B)*X,i[14]=(M*T-S*C-w*k)*X,i[15]=(g*C-m*T+y*k)*X,i):null}},{}],99:[function(r,a,n){var o=r("./identity");a.exports=i;function i(s,l,u,f){var c,h,v,p,d,g,m,y,_,S,M=l[0],w=l[1],A=l[2],k=f[0],T=f[1],L=f[2],C=u[0],I=u[1],R=u[2];return Math.abs(M-C)<1e-6&&Math.abs(w-I)<1e-6&&Math.abs(A-R)<1e-6?o(s):(m=M-C,y=w-I,_=A-R,S=1/Math.sqrt(m*m+y*y+_*_),m*=S,y*=S,_*=S,c=T*_-L*y,h=L*m-k*_,v=k*y-T*m,S=Math.sqrt(c*c+h*h+v*v),S?(S=1/S,c*=S,h*=S,v*=S):(c=0,h=0,v=0),p=y*v-_*h,d=_*c-m*v,g=m*h-y*c,S=Math.sqrt(p*p+d*d+g*g),S?(S=1/S,p*=S,d*=S,g*=S):(p=0,d=0,g=0),s[0]=c,s[1]=p,s[2]=m,s[3]=0,s[4]=h,s[5]=d,s[6]=y,s[7]=0,s[8]=v,s[9]=g,s[10]=_,s[11]=0,s[12]=-(c*M+h*w+v*A),s[13]=-(p*M+d*w+g*A),s[14]=-(m*M+y*w+_*A),s[15]=1,s)}},{"./identity":97}],100:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=s[4],p=s[5],d=s[6],g=s[7],m=s[8],y=s[9],_=s[10],S=s[11],M=s[12],w=s[13],A=s[14],k=s[15],T=l[0],L=l[1],C=l[2],I=l[3];return i[0]=T*u+L*v+C*m+I*M,i[1]=T*f+L*p+C*y+I*w,i[2]=T*c+L*d+C*_+I*A,i[3]=T*h+L*g+C*S+I*k,T=l[4],L=l[5],C=l[6],I=l[7],i[4]=T*u+L*v+C*m+I*M,i[5]=T*f+L*p+C*y+I*w,i[6]=T*c+L*d+C*_+I*A,i[7]=T*h+L*g+C*S+I*k,T=l[8],L=l[9],C=l[10],I=l[11],i[8]=T*u+L*v+C*m+I*M,i[9]=T*f+L*p+C*y+I*w,i[10]=T*c+L*d+C*_+I*A,i[11]=T*h+L*g+C*S+I*k,T=l[12],L=l[13],C=l[14],I=l[15],i[12]=T*u+L*v+C*m+I*M,i[13]=T*f+L*p+C*y+I*w,i[14]=T*c+L*d+C*_+I*A,i[15]=T*h+L*g+C*S+I*k,i}},{}],101:[function(r,a,n){a.exports=o;function o(i,s,l,u,f,c,h){var v=1/(s-l),p=1/(u-f),d=1/(c-h);return i[0]=-2*v,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*p,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*d,i[11]=0,i[12]=(s+l)*v,i[13]=(f+u)*p,i[14]=(h+c)*d,i[15]=1,i}},{}],102:[function(r,a,n){a.exports=o;function o(i,s,l,u,f){var c=1/Math.tan(s/2),h=1/(u-f);return i[0]=c/l,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=c,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(f+u)*h,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*f*u*h,i[15]=0,i}},{}],103:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=u[0],c=u[1],h=u[2],v=Math.sqrt(f*f+c*c+h*h),p,d,g,m,y,_,S,M,w,A,k,T,L,C,I,R,B,N,D,O,$,Y,X,ee;return Math.abs(v)<1e-6?null:(v=1/v,f*=v,c*=v,h*=v,p=Math.sin(l),d=Math.cos(l),g=1-d,m=s[0],y=s[1],_=s[2],S=s[3],M=s[4],w=s[5],A=s[6],k=s[7],T=s[8],L=s[9],C=s[10],I=s[11],R=f*f*g+d,B=c*f*g+h*p,N=h*f*g-c*p,D=f*c*g-h*p,O=c*c*g+d,$=h*c*g+f*p,Y=f*h*g+c*p,X=c*h*g-f*p,ee=h*h*g+d,i[0]=m*R+M*B+T*N,i[1]=y*R+w*B+L*N,i[2]=_*R+A*B+C*N,i[3]=S*R+k*B+I*N,i[4]=m*D+M*O+T*$,i[5]=y*D+w*O+L*$,i[6]=_*D+A*O+C*$,i[7]=S*D+k*O+I*$,i[8]=m*Y+M*X+T*ee,i[9]=y*Y+w*X+L*ee,i[10]=_*Y+A*X+C*ee,i[11]=S*Y+k*X+I*ee,s!==i&&(i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15]),i)}},{}],104:[function(r,a,n){a.exports=o;function o(i,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[4],h=s[5],v=s[6],p=s[7],d=s[8],g=s[9],m=s[10],y=s[11];return s!==i&&(i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15]),i[4]=c*f+d*u,i[5]=h*f+g*u,i[6]=v*f+m*u,i[7]=p*f+y*u,i[8]=d*f-c*u,i[9]=g*f-h*u,i[10]=m*f-v*u,i[11]=y*f-p*u,i}},{}],105:[function(r,a,n){a.exports=o;function o(i,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],p=s[3],d=s[8],g=s[9],m=s[10],y=s[11];return s!==i&&(i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15]),i[0]=c*f-d*u,i[1]=h*f-g*u,i[2]=v*f-m*u,i[3]=p*f-y*u,i[8]=c*u+d*f,i[9]=h*u+g*f,i[10]=v*u+m*f,i[11]=p*u+y*f,i}},{}],106:[function(r,a,n){a.exports=o;function o(i,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],p=s[3],d=s[4],g=s[5],m=s[6],y=s[7];return s!==i&&(i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15]),i[0]=c*f+d*u,i[1]=h*f+g*u,i[2]=v*f+m*u,i[3]=p*f+y*u,i[4]=d*f-c*u,i[5]=g*f-h*u,i[6]=m*f-v*u,i[7]=y*f-p*u,i}},{}],107:[function(r,a,n){a.exports=o;function o(i,s,l){var u=l[0],f=l[1],c=l[2];return i[0]=s[0]*u,i[1]=s[1]*u,i[2]=s[2]*u,i[3]=s[3]*u,i[4]=s[4]*f,i[5]=s[5]*f,i[6]=s[6]*f,i[7]=s[7]*f,i[8]=s[8]*c,i[9]=s[9]*c,i[10]=s[10]*c,i[11]=s[11]*c,i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i}},{}],108:[function(r,a,n){a.exports=o;function o(i,s,l){var u=l[0],f=l[1],c=l[2],h,v,p,d,g,m,y,_,S,M,w,A;return s===i?(i[12]=s[0]*u+s[4]*f+s[8]*c+s[12],i[13]=s[1]*u+s[5]*f+s[9]*c+s[13],i[14]=s[2]*u+s[6]*f+s[10]*c+s[14],i[15]=s[3]*u+s[7]*f+s[11]*c+s[15]):(h=s[0],v=s[1],p=s[2],d=s[3],g=s[4],m=s[5],y=s[6],_=s[7],S=s[8],M=s[9],w=s[10],A=s[11],i[0]=h,i[1]=v,i[2]=p,i[3]=d,i[4]=g,i[5]=m,i[6]=y,i[7]=_,i[8]=S,i[9]=M,i[10]=w,i[11]=A,i[12]=h*u+g*f+S*c+s[12],i[13]=v*u+m*f+M*c+s[13],i[14]=p*u+y*f+w*c+s[14],i[15]=d*u+_*f+A*c+s[15]),i}},{}],109:[function(r,a,n){a.exports=o;function o(i,s){if(i===s){var l=s[1],u=s[2],f=s[3],c=s[6],h=s[7],v=s[11];i[1]=s[4],i[2]=s[8],i[3]=s[12],i[4]=l,i[6]=s[9],i[7]=s[13],i[8]=u,i[9]=c,i[11]=s[14],i[12]=f,i[13]=h,i[14]=v}else i[0]=s[0],i[1]=s[4],i[2]=s[8],i[3]=s[12],i[4]=s[1],i[5]=s[5],i[6]=s[9],i[7]=s[13],i[8]=s[2],i[9]=s[6],i[10]=s[10],i[11]=s[14],i[12]=s[3],i[13]=s[7],i[14]=s[11],i[15]=s[15];return i}},{}],110:[function(r,a,n){var o=r("barycentric"),i=r("polytope-closest-point/lib/closest_point_2d.js");a.exports=c;function s(h,v){for(var p=[0,0,0,0],d=0;d<4;++d)for(var g=0;g<4;++g)p[g]+=h[4*d+g]*v[d];return p}function l(h,v,p,d,g){for(var m=s(d,s(p,s(v,[h[0],h[1],h[2],1]))),y=0;y<3;++y)m[y]/=m[3];return[.5*g[0]*(1+m[0]),.5*g[1]*(1-m[1])]}function u(h,v){if(h.length===2){for(var p=0,d=0,g=0;g<2;++g)p+=Math.pow(v[g]-h[0][g],2),d+=Math.pow(v[g]-h[1][g],2);return p=Math.sqrt(p),d=Math.sqrt(d),p+d<1e-6?[1,0]:[d/(p+d),p/(d+p)]}else if(h.length===3){var m=[0,0];return i(h[0],h[1],h[2],v,m),o(h,m)}return[]}function f(h,v){for(var p=[0,0,0],d=0;d<h.length;++d)for(var g=h[d],m=v[d],y=0;y<3;++y)p[y]+=m*g[y];return p}function c(h,v,p,d,g,m){if(h.length===1)return[0,h[0].slice()];for(var y=new Array(h.length),_=0;_<h.length;++_)y[_]=l(h[_],p,d,g,m);for(var S=0,M=1/0,_=0;_<y.length;++_){for(var w=0,A=0;A<2;++A)w+=Math.pow(y[_][A]-v[A],2);w<M&&(M=w,S=_)}for(var k=u(y,v),T=0,_=0;_<3;++_){if(k[_]<-.001||k[_]>1.0001)return null;T+=k[_]}return Math.abs(T-1)>.001?null:[S,f(h,k),k]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(r,a,n){var o=r("glslify"),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),s=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),l=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),c=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),v=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),p=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),g=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);n.meshShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:p,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:d,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(r,a,n){var o=1e-6,i=1e-6,s=r("gl-shader"),l=r("gl-buffer"),u=r("gl-vao"),f=r("gl-texture2d"),c=r("normals"),h=r("gl-mat4/multiply"),v=r("gl-mat4/invert"),p=r("ndarray"),d=r("colormap"),g=r("simplicial-complex-contour"),m=r("typedarray-pool"),y=r("./lib/shaders"),_=r("./lib/closest-point"),S=y.meshShader,M=y.wireShader,w=y.pointShader,A=y.pickShader,k=y.pointPickShader,T=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(Z,q,ae,ie,we,Te,he,xe,Se,ye,re,se,de,Me,Ie,Ee,qe,be,oe,ce,ue,Re,Xe,Ke,vt,Ze,Qe){this.gl=Z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=q,this.dirty=!0,this.triShader=ae,this.lineShader=ie,this.pointShader=we,this.pickShader=Te,this.pointPickShader=he,this.contourShader=xe,this.trianglePositions=Se,this.triangleColors=re,this.triangleNormals=de,this.triangleUVs=se,this.triangleIds=ye,this.triangleVAO=Me,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Ie,this.edgeColors=qe,this.edgeUVs=be,this.edgeIds=Ee,this.edgeVAO=oe,this.edgeCount=0,this.pointPositions=ce,this.pointColors=Re,this.pointUVs=Xe,this.pointSizes=Ke,this.pointIds=ue,this.pointVAO=vt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ze,this.contourVAO=Qe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var I=C.prototype;I.isOpaque=function(){return!this.hasAlpha},I.isTransparent=function(){return this.hasAlpha},I.pickSlots=1,I.setPickBase=function(Z){this.pickId=Z};function R(Z,q){if(!q||!q.length)return 1;for(var ae=0;ae<q.length;++ae){if(q.length<2)return 1;if(q[ae][0]===Z)return q[ae][1];if(q[ae][0]>Z&&ae>0){var ie=(q[ae][0]-Z)/(q[ae][0]-q[ae-1][0]);return q[ae][1]*(1-ie)+ie*q[ae-1][1]}}return 1}function B(Z,q){for(var ae=d({colormap:Z,nshades:256,format:"rgba"}),ie=new Uint8Array(256*4),we=0;we<256;++we){for(var Te=ae[we],he=0;he<3;++he)ie[4*we+he]=Te[he];q?ie[4*we+3]=255*R(we/255,q):ie[4*we+3]=255*Te[3]}return p(ie,[256,256,4],[4,0,1])}function N(Z){for(var q=Z.length,ae=new Array(q),ie=0;ie<q;++ie)ae[ie]=Z[ie][2];return ae}I.highlight=function(Z){if(!Z||!this.contourEnable){this.contourCount=0;return}for(var q=g(this.cells,this.intensity,Z.intensity),ae=q.cells,ie=q.vertexIds,we=q.vertexWeights,Te=ae.length,he=m.mallocFloat32(2*3*Te),xe=0,Se=0;Se<Te;++Se)for(var ye=ae[Se],re=0;re<2;++re){var se=ye[0];ye.length===2&&(se=ye[re]);for(var de=ie[se][0],Me=ie[se][1],Ie=we[se],Ee=1-Ie,qe=this.positions[de],be=this.positions[Me],oe=0;oe<3;++oe)he[xe++]=Ie*qe[oe]+Ee*be[oe]}this.contourCount=xe/3|0,this.contourPositions.update(he.subarray(0,xe)),m.free(he)},I.update=function(Z){Z=Z||{};var q=this.gl;this.dirty=!0,"contourEnable"in Z&&(this.contourEnable=Z.contourEnable),"contourColor"in Z&&(this.contourColor=Z.contourColor),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"lightPosition"in Z&&(this.lightPosition=Z.lightPosition),this.hasAlpha=!1,"opacity"in Z&&(this.opacity=Z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Z&&(this.opacityscale=Z.opacityscale,this.hasAlpha=!0),"ambient"in Z&&(this.ambientLight=Z.ambient),"diffuse"in Z&&(this.diffuseLight=Z.diffuse),"specular"in Z&&(this.specularLight=Z.specular),"roughness"in Z&&(this.roughness=Z.roughness),"fresnel"in Z&&(this.fresnel=Z.fresnel),Z.texture?(this.texture.dispose(),this.texture=f(q,Z.texture)):Z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=q.LINEAR,this.texture.setPixels(B(Z.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=Z.cells,ie=Z.positions;if(!ie||!ae)return;var we=[],Te=[],he=[],xe=[],Se=[],ye=[],re=[],se=[],de=[],Me=[],Ie=[],Ee=[],qe=[],be=[];this.cells=ae,this.positions=ie;var oe=Z.vertexNormals,ce=Z.cellNormals,ue=Z.vertexNormalsEpsilon===void 0?o:Z.vertexNormalsEpsilon,Re=Z.faceNormalsEpsilon===void 0?i:Z.faceNormalsEpsilon;Z.useFacetNormals&&!ce&&(ce=c.faceNormals(ae,ie,Re)),!ce&&!oe&&(oe=c.vertexNormals(ae,ie,ue));var Xe=Z.vertexColors,Ke=Z.cellColors,vt=Z.meshColor||[1,1,1,1],Ze=Z.vertexUVs,Qe=Z.vertexIntensity,Je=Z.cellUVs,je=Z.cellIntensity,$e=1/0,Ye=-1/0;if(!Ze&&!Je)if(Qe)if(Z.vertexIntensityBounds)$e=+Z.vertexIntensityBounds[0],Ye=+Z.vertexIntensityBounds[1];else for(var yt=0;yt<Qe.length;++yt){var _t=Qe[yt];$e=Math.min($e,_t),Ye=Math.max(Ye,_t)}else if(je)if(Z.cellIntensityBounds)$e=+Z.cellIntensityBounds[0],Ye=+Z.cellIntensityBounds[1];else for(var yt=0;yt<je.length;++yt){var _t=je[yt];$e=Math.min($e,_t),Ye=Math.max(Ye,_t)}else for(var yt=0;yt<ie.length;++yt){var _t=ie[yt][2];$e=Math.min($e,_t),Ye=Math.max(Ye,_t)}Qe?this.intensity=Qe:je?this.intensity=je:this.intensity=N(ie),this.pickVertex=!(je||Ke);var Pt=Z.pointSizes,Tt=Z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var yt=0;yt<ie.length;++yt)for(var Ot=ie[yt],qt=0;qt<3;++qt)isNaN(Ot[qt])||!isFinite(Ot[qt])||(this.bounds[0][qt]=Math.min(this.bounds[0][qt],Ot[qt]),this.bounds[1][qt]=Math.max(this.bounds[1][qt],Ot[qt]));var Xt=0,Or=0,Br=0;e:for(var yt=0;yt<ae.length;++yt){var Qr=ae[yt];switch(Qr.length){case 1:for(var Sr=Qr[0],Ot=ie[Sr],qt=0;qt<3;++qt)if(isNaN(Ot[qt])||!isFinite(Ot[qt]))continue e;Me.push(Ot[0],Ot[1],Ot[2]);var Zr;Xe?Zr=Xe[Sr]:Ke?Zr=Ke[yt]:Zr=vt,this.opacityscale&&Qe?Te.push(Zr[0],Zr[1],Zr[2],this.opacity*R((Qe[Sr]-$e)/(Ye-$e),this.opacityscale)):Zr.length===3?Ie.push(Zr[0],Zr[1],Zr[2],this.opacity):(Ie.push(Zr[0],Zr[1],Zr[2],Zr[3]*this.opacity),Zr[3]<1&&(this.hasAlpha=!0));var Oe;Ze?Oe=Ze[Sr]:Qe?Oe=[(Qe[Sr]-$e)/(Ye-$e),0]:Je?Oe=Je[yt]:je?Oe=[(je[yt]-$e)/(Ye-$e),0]:Oe=[(Ot[2]-$e)/(Ye-$e),0],Ee.push(Oe[0],Oe[1]),Pt?qe.push(Pt[Sr]):qe.push(Tt),be.push(yt),Br+=1;break;case 2:for(var qt=0;qt<2;++qt)for(var Sr=Qr[qt],Ot=ie[Sr],it=0;it<3;++it)if(isNaN(Ot[it])||!isFinite(Ot[it]))continue e;for(var qt=0;qt<2;++qt){var Sr=Qr[qt],Ot=ie[Sr];ye.push(Ot[0],Ot[1],Ot[2]);var Zr;Xe?Zr=Xe[Sr]:Ke?Zr=Ke[yt]:Zr=vt,this.opacityscale&&Qe?Te.push(Zr[0],Zr[1],Zr[2],this.opacity*R((Qe[Sr]-$e)/(Ye-$e),this.opacityscale)):Zr.length===3?re.push(Zr[0],Zr[1],Zr[2],this.opacity):(re.push(Zr[0],Zr[1],Zr[2],Zr[3]*this.opacity),Zr[3]<1&&(this.hasAlpha=!0));var Oe;Ze?Oe=Ze[Sr]:Qe?Oe=[(Qe[Sr]-$e)/(Ye-$e),0]:Je?Oe=Je[yt]:je?Oe=[(je[yt]-$e)/(Ye-$e),0]:Oe=[(Ot[2]-$e)/(Ye-$e),0],se.push(Oe[0],Oe[1]),de.push(yt)}Or+=1;break;case 3:for(var qt=0;qt<3;++qt)for(var Sr=Qr[qt],Ot=ie[Sr],it=0;it<3;++it)if(isNaN(Ot[it])||!isFinite(Ot[it]))continue e;for(var qt=0;qt<3;++qt){var Sr=Qr[2-qt],Ot=ie[Sr];we.push(Ot[0],Ot[1],Ot[2]);var Zr;Xe?Zr=Xe[Sr]:Ke?Zr=Ke[yt]:Zr=vt,Zr?this.opacityscale&&Qe?Te.push(Zr[0],Zr[1],Zr[2],this.opacity*R((Qe[Sr]-$e)/(Ye-$e),this.opacityscale)):Zr.length===3?Te.push(Zr[0],Zr[1],Zr[2],this.opacity):(Te.push(Zr[0],Zr[1],Zr[2],Zr[3]*this.opacity),Zr[3]<1&&(this.hasAlpha=!0)):Te.push(.5,.5,.5,1);var Oe;Ze?Oe=Ze[Sr]:Qe?Oe=[(Qe[Sr]-$e)/(Ye-$e),0]:Je?Oe=Je[yt]:je?Oe=[(je[yt]-$e)/(Ye-$e),0]:Oe=[(Ot[2]-$e)/(Ye-$e),0],xe.push(Oe[0],Oe[1]);var ft;oe?ft=oe[Sr]:ft=ce[yt],he.push(ft[0],ft[1],ft[2]),Se.push(yt)}Xt+=1;break}}this.pointCount=Br,this.edgeCount=Or,this.triangleCount=Xt,this.pointPositions.update(Me),this.pointColors.update(Ie),this.pointUVs.update(Ee),this.pointSizes.update(qe),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(ye),this.edgeColors.update(re),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(de)),this.trianglePositions.update(we),this.triangleColors.update(Te),this.triangleUVs.update(xe),this.triangleNormals.update(he),this.triangleIds.update(new Uint32Array(Se))},I.drawTransparent=I.draw=function(Z){Z=Z||{};for(var q=this.gl,ae=Z.model||L,ie=Z.view||L,we=Z.projection||L,Te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)Te[0][he]=Math.max(Te[0][he],this.clipBounds[0][he]),Te[1][he]=Math.min(Te[1][he],this.clipBounds[1][he]);var xe={model:ae,view:ie,projection:we,inverseModel:L.slice(),clipBounds:Te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};xe.inverseModel=v(xe.inverseModel,xe.model),q.disable(q.CULL_FACE),this.texture.bind(0);var Se=new Array(16);h(Se,xe.view,xe.model),h(Se,xe.projection,Se),v(Se,Se);for(var he=0;he<3;++he)xe.eyePosition[he]=Se[12+he]/Se[15];for(var ye=Se[15],he=0;he<3;++he)ye+=this.lightPosition[he]*Se[4*he+3];for(var he=0;he<3;++he){for(var re=Se[12+he],se=0;se<3;++se)re+=Se[4*se+he]*this.lightPosition[se];xe.lightPosition[he]=re/ye}if(this.triangleCount>0){var de=this.triShader;de.bind(),de.uniforms=xe,this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var de=this.lineShader;de.bind(),de.uniforms=xe,this.edgeVAO.bind(),q.lineWidth(this.lineWidth*this.pixelRatio),q.drawArrays(q.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var de=this.pointShader;de.bind(),de.uniforms=xe,this.pointVAO.bind(),q.drawArrays(q.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var de=this.contourShader;de.bind(),de.uniforms=xe,this.contourVAO.bind(),q.drawArrays(q.LINES,0,this.contourCount),this.contourVAO.unbind()}},I.drawPick=function(Z){Z=Z||{};for(var q=this.gl,ae=Z.model||L,ie=Z.view||L,we=Z.projection||L,Te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)Te[0][he]=Math.max(Te[0][he],this.clipBounds[0][he]),Te[1][he]=Math.min(Te[1][he],this.clipBounds[1][he]);this._model=[].slice.call(ae),this._view=[].slice.call(ie),this._projection=[].slice.call(we),this._resolution=[q.drawingBufferWidth,q.drawingBufferHeight];var xe={model:ae,view:ie,projection:we,clipBounds:Te,pickId:this.pickId/255},Se=this.pickShader;if(Se.bind(),Se.uniforms=xe,this.triangleCount>0&&(this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),q.lineWidth(this.lineWidth*this.pixelRatio),q.drawArrays(q.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var Se=this.pointPickShader;Se.bind(),Se.uniforms=xe,this.pointVAO.bind(),q.drawArrays(q.POINTS,0,this.pointCount),this.pointVAO.unbind()}},I.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;for(var q=Z.value[0]+256*Z.value[1]+65536*Z.value[2],ae=this.cells[q],ie=this.positions,we=new Array(ae.length),Te=0;Te<ae.length;++Te)we[Te]=ie[ae[Te]];var he=Z.coord[0],xe=Z.coord[1];if(!this.pickVertex){var Se=this.positions[ae[0]],ye=this.positions[ae[1]],re=this.positions[ae[2]],se=[(Se[0]+ye[0]+re[0])/3,(Se[1]+ye[1]+re[1])/3,(Se[2]+ye[2]+re[2])/3];return{_cellCenter:!0,position:[he,xe],index:q,cell:ae,cellId:q,intensity:this.intensity[q],dataCoordinate:se}}var de=_(we,[he*this.pixelRatio,this._resolution[1]-xe*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!de)return null;for(var Me=de[2],Ie=0,Te=0;Te<ae.length;++Te)Ie+=Me[Te]*this.intensity[ae[Te]];return{position:de[1],index:ae[de[0]],cell:ae,cellId:q,intensity:Ie,dataCoordinate:this.positions[ae[de[0]]]}},I.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(Z){var q=s(Z,S.vertex,S.fragment);return q.attributes.position.location=0,q.attributes.color.location=2,q.attributes.uv.location=3,q.attributes.normal.location=4,q}function O(Z){var q=s(Z,M.vertex,M.fragment);return q.attributes.position.location=0,q.attributes.color.location=2,q.attributes.uv.location=3,q}function $(Z){var q=s(Z,w.vertex,w.fragment);return q.attributes.position.location=0,q.attributes.color.location=2,q.attributes.uv.location=3,q.attributes.pointSize.location=4,q}function Y(Z){var q=s(Z,A.vertex,A.fragment);return q.attributes.position.location=0,q.attributes.id.location=1,q}function X(Z){var q=s(Z,k.vertex,k.fragment);return q.attributes.position.location=0,q.attributes.id.location=1,q.attributes.pointSize.location=4,q}function ee(Z){var q=s(Z,T.vertex,T.fragment);return q.attributes.position.location=0,q}function Q(Z,q){arguments.length===1&&(q=Z,Z=q.gl);var ae=Z.getExtension("OES_standard_derivatives")||Z.getExtension("MOZ_OES_standard_derivatives")||Z.getExtension("WEBKIT_OES_standard_derivatives");if(!ae)throw new Error("derivatives not supported");var ie=D(Z),we=O(Z),Te=$(Z),he=Y(Z),xe=X(Z),Se=ee(Z),ye=f(Z,p(new Uint8Array([255,255,255,255]),[1,1,4]));ye.generateMipmap(),ye.minFilter=Z.LINEAR_MIPMAP_LINEAR,ye.magFilter=Z.LINEAR;var re=l(Z),se=l(Z),de=l(Z),Me=l(Z),Ie=l(Z),Ee=u(Z,[{buffer:re,type:Z.FLOAT,size:3},{buffer:Ie,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:Z.FLOAT,size:4},{buffer:de,type:Z.FLOAT,size:2},{buffer:Me,type:Z.FLOAT,size:3}]),qe=l(Z),be=l(Z),oe=l(Z),ce=l(Z),ue=u(Z,[{buffer:qe,type:Z.FLOAT,size:3},{buffer:ce,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:Z.FLOAT,size:4},{buffer:oe,type:Z.FLOAT,size:2}]),Re=l(Z),Xe=l(Z),Ke=l(Z),vt=l(Z),Ze=l(Z),Qe=u(Z,[{buffer:Re,type:Z.FLOAT,size:3},{buffer:Ze,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Xe,type:Z.FLOAT,size:4},{buffer:Ke,type:Z.FLOAT,size:2},{buffer:vt,type:Z.FLOAT,size:1}]),Je=l(Z),je=u(Z,[{buffer:Je,type:Z.FLOAT,size:3}]),$e=new C(Z,ye,ie,we,Te,he,xe,Se,re,Ie,se,de,Me,Ee,qe,ce,be,oe,ue,Re,Ze,Xe,Ke,vt,Qe,Je,je);return $e.update(q),$e}a.exports=Q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(r,a,n){a.exports=f;var o=r("gl-buffer"),i=r("gl-shader"),s=r("./shaders");function l(c,h,v){this.plot=c,this.vbo=h,this.shader=v}var u=l.prototype;u.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},u.drawBox=function(){var c=[0,0],h=[0,0];return function(v,p,d,g,m){var y=this.plot,_=this.shader,S=y.gl;c[0]=v,c[1]=p,h[0]=d,h[1]=g,_.uniforms.lo=c,_.uniforms.hi=h,_.uniforms.color=m,S.drawArrays(S.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(c){var h=c.gl,v=o(h,[0,0,0,1,1,0,1,1]),p=i(h,s.boxVert,s.lineFrag);return new l(c,v,p)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(r,a,n){a.exports=h;var o=r("gl-buffer"),i=r("gl-shader"),s=r("binary-search-bounds"),l=r("./shaders");function u(v,p,d,g){this.plot=v,this.vbo=p,this.shader=d,this.tickShader=g,this.ticks=[[],[]]}function f(v,p){return v-p}var c=u.prototype;c.draw=function(){var v=[0,0],p=[0,0],d=[0,0];return function(){for(var g=this.plot,m=this.vbo,y=this.shader,_=this.ticks,S=g.gl,M=g._tickBounds,w=g.dataBox,A=g.viewBox,k=g.gridLineWidth,T=g.gridLineColor,L=g.gridLineEnable,C=g.pixelRatio,I=0;I<2;++I){var R=M[I],B=M[I+2],N=B-R,D=.5*(w[I+2]+w[I]),O=w[I+2]-w[I];p[I]=2*N/O,v[I]=2*(R-D)/O}y.bind(),m.bind(),y.attributes.dataCoord.pointer(),y.uniforms.dataShift=v,y.uniforms.dataScale=p;for(var $=0,I=0;I<2;++I){d[0]=d[1]=0,d[I]=1,y.uniforms.dataAxis=d,y.uniforms.lineWidth=k[I]/(A[I+2]-A[I])*C,y.uniforms.color=T[I];var Y=_[I].length*6;L[I]&&Y&&S.drawArrays(S.TRIANGLES,$,Y),$+=Y}}}(),c.drawTickMarks=function(){var v=[0,0],p=[0,0],d=[1,0],g=[0,1],m=[0,0],y=[0,0];return function(){for(var _=this.plot,S=this.vbo,M=this.tickShader,w=this.ticks,A=_.gl,k=_._tickBounds,T=_.dataBox,L=_.viewBox,C=_.pixelRatio,I=_.screenBox,R=I[2]-I[0],B=I[3]-I[1],N=L[2]-L[0],D=L[3]-L[1],O=0;O<2;++O){var $=k[O],Y=k[O+2],X=Y-$,ee=.5*(T[O+2]+T[O]),Q=T[O+2]-T[O];p[O]=2*X/Q,v[O]=2*($-ee)/Q}p[0]*=N/R,v[0]*=N/R,p[1]*=D/B,v[1]*=D/B,M.bind(),S.bind(),M.attributes.dataCoord.pointer();var Z=M.uniforms;Z.dataShift=v,Z.dataScale=p;var q=_.tickMarkLength,ae=_.tickMarkWidth,ie=_.tickMarkColor,we=0,Te=w[0].length*6,he=Math.min(s.ge(w[0],(T[0]-k[0])/(k[2]-k[0]),f),w[0].length),xe=Math.min(s.gt(w[0],(T[2]-k[0])/(k[2]-k[0]),f),w[0].length),Se=we+6*he,ye=6*Math.max(0,xe-he),re=Math.min(s.ge(w[1],(T[1]-k[1])/(k[3]-k[1]),f),w[1].length),se=Math.min(s.gt(w[1],(T[3]-k[1])/(k[3]-k[1]),f),w[1].length),de=Te+6*re,Me=6*Math.max(0,se-re);m[0]=2*(L[0]-q[1])/R-1,m[1]=(L[3]+L[1])/B-1,y[0]=q[1]*C/R,y[1]=ae[1]*C/B,Me&&(Z.color=ie[1],Z.tickScale=y,Z.dataAxis=g,Z.screenOffset=m,A.drawArrays(A.TRIANGLES,de,Me)),m[0]=(L[2]+L[0])/R-1,m[1]=2*(L[1]-q[0])/B-1,y[0]=ae[0]*C/R,y[1]=q[0]*C/B,ye&&(Z.color=ie[0],Z.tickScale=y,Z.dataAxis=d,Z.screenOffset=m,A.drawArrays(A.TRIANGLES,Se,ye)),m[0]=2*(L[2]+q[3])/R-1,m[1]=(L[3]+L[1])/B-1,y[0]=q[3]*C/R,y[1]=ae[3]*C/B,Me&&(Z.color=ie[3],Z.tickScale=y,Z.dataAxis=g,Z.screenOffset=m,A.drawArrays(A.TRIANGLES,de,Me)),m[0]=(L[2]+L[0])/R-1,m[1]=2*(L[3]+q[2])/B-1,y[0]=ae[2]*C/R,y[1]=q[2]*C/B,ye&&(Z.color=ie[2],Z.tickScale=y,Z.dataAxis=d,Z.screenOffset=m,A.drawArrays(A.TRIANGLES,Se,ye))}}(),c.update=function(){var v=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1];return function(d){var g=d.ticks,m=d.bounds,y=new Float32Array(6*3*(g[0].length+g[1].length));this.plot.zeroLineEnable;for(var _=0,S=[[],[]],M=0;M<2;++M)for(var w=S[M],A=g[M],k=m[M],T=m[M+2],L=0;L<A.length;++L){var C=(A[L].x-k)/(T-k);w.push(C);for(var I=0;I<6;++I)y[_++]=C,y[_++]=v[I],y[_++]=p[I]}this.ticks=S,this.vbo.update(y)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function h(v){var p=v.gl,d=o(p),g=i(p,l.gridVert,l.gridFrag),m=i(p,l.tickVert,l.gridFrag),y=new u(v,d,g,m);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(r,a,n){a.exports=f;var o=r("gl-buffer"),i=r("gl-shader"),s=r("./shaders");function l(c,h,v){this.plot=c,this.vbo=h,this.shader=v}var u=l.prototype;u.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},u.drawLine=function(){var c=[0,0],h=[0,0];return function(v,p,d,g,m,y){var _=this.plot,S=this.shader,M=_.gl;c[0]=v,c[1]=p,h[0]=d,h[1]=g,S.uniforms.start=c,S.uniforms.end=h,S.uniforms.width=m*_.pixelRatio,S.uniforms.color=y,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(c){var h=c.gl,v=o(h,[-1,-1,-1,1,1,-1,1,1]),p=i(h,s.lineVert,s.lineFrag),d=new l(c,v,p);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(r,a,n){var o=r("glslify"),i=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);a.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:i,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:i,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:i,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(r,a,n){a.exports=h;var o=r("gl-buffer"),i=r("gl-shader"),s=r("text-cache"),l=r("binary-search-bounds"),u=r("./shaders");function f(v,p,d){this.plot=v,this.vbo=p,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c=f.prototype;c.drawTicks=function(){var v=[0,0],p=[0,0],d=[0,0];return function(g){var m=this.plot,y=this.shader,_=this.tickX[g],S=this.tickOffset[g],M=m.gl,w=m.viewBox,A=m.dataBox,k=m.screenBox,T=m.pixelRatio,L=m.tickEnable,C=m.tickPad,I=m.tickColor,R=m.tickAngle,B=m.labelEnable,N=m.labelPad,D=m.labelColor,O=m.labelAngle,$=this.labelOffset[g],Y=this.labelCount[g],X=l.lt(_,A[g]),ee=l.le(_,A[g+2]);v[0]=v[1]=0,v[g]=1,p[g]=(w[2+g]+w[g])/(k[2+g]-k[g])-1;var Q=2/k[2+(g^1)]-k[g^1];p[g^1]=Q*w[g^1]-1,L[g]&&(p[g^1]-=Q*T*C[g],X<ee&&S[ee]>S[X]&&(y.uniforms.dataAxis=v,y.uniforms.screenOffset=p,y.uniforms.color=I[g],y.uniforms.angle=R[g],M.drawArrays(M.TRIANGLES,S[X],S[ee]-S[X]))),B[g]&&Y&&(p[g^1]-=Q*T*N[g],y.uniforms.dataAxis=d,y.uniforms.screenOffset=p,y.uniforms.color=D[g],y.uniforms.angle=O[g],M.drawArrays(M.TRIANGLES,$,Y)),p[g^1]=Q*w[2+(g^1)]-1,L[g+2]&&(p[g^1]+=Q*T*C[g+2],X<ee&&S[ee]>S[X]&&(y.uniforms.dataAxis=v,y.uniforms.screenOffset=p,y.uniforms.color=I[g+2],y.uniforms.angle=R[g+2],M.drawArrays(M.TRIANGLES,S[X],S[ee]-S[X]))),B[g+2]&&Y&&(p[g^1]+=Q*T*N[g+2],y.uniforms.dataAxis=d,y.uniforms.screenOffset=p,y.uniforms.color=D[g+2],y.uniforms.angle=O[g+2],M.drawArrays(M.TRIANGLES,$,Y))}}(),c.drawTitle=function(){var v=[0,0],p=[0,0];return function(){var d=this.plot,g=this.shader,m=d.gl,y=d.screenBox,_=d.titleCenter,S=d.titleAngle,M=d.titleColor,w=d.pixelRatio;if(!!this.titleCount){for(var A=0;A<2;++A)p[A]=2*(_[A]*w-y[A])/(y[2+A]-y[A])-1;g.bind(),g.uniforms.dataAxis=v,g.uniforms.screenOffset=p,g.uniforms.angle=S,g.uniforms.color=M,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),c.bind=function(){var v=[0,0],p=[0,0],d=[0,0];return function(){var g=this.plot,m=this.shader,y=g._tickBounds,_=g.dataBox,S=g.screenBox,M=g.viewBox;m.bind();for(var w=0;w<2;++w){var A=y[w],k=y[w+2],T=k-A,L=.5*(_[w+2]+_[w]),C=_[w+2]-_[w],I=M[w],R=M[w+2],B=R-I,N=S[w],D=S[w+2],O=D-N;p[w]=2*T/C*B/O,v[w]=2*(A-L)/C*B/O}d[1]=2*g.pixelRatio/(S[3]-S[1]),d[0]=d[1]*(S[3]-S[1])/(S[2]-S[0]),m.uniforms.dataScale=p,m.uniforms.dataShift=v,m.uniforms.textScale=d,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),c.update=function(v){var p=[],d=v.ticks,g=v.bounds,m,y,_,S,M;for(M=0;M<2;++M){var w=[Math.floor(p.length/3)],A=[-1/0],k=d[M];for(m=0;m<k.length;++m){var T=k[m],L=T.x,C=T.text,I=T.font||"sans-serif";S=T.fontSize||12;for(var R=1/(g[M+2]-g[M]),B=g[M],N=C.split(`
`),D=0;D<N.length;D++)for(_=s(I,N[D]).data,y=0;y<_.length;y+=2)p.push(_[y]*S,-_[y+1]*S-D*S*1.2,(L-B)*R);w.push(Math.floor(p.length/3)),A.push(L)}this.tickOffset[M]=w,this.tickX[M]=A}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(p.length/3),_=s(v.labelFont[M],v.labels[M],{textAlign:"center"}).data,S=v.labelSize[M],m=0;m<_.length;m+=2)p.push(_[m]*S,-_[m+1]*S,0);this.labelCount[M]=Math.floor(p.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(p.length/3),_=s(v.titleFont,v.title).data,S=v.titleSize,m=0;m<_.length;m+=2)p.push(_[m]*S,-_[m+1]*S,0);this.titleCount=Math.floor(p.length/3)-this.titleOffset,this.vbo.update(p)},c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var p=v.gl,d=o(p),g=i(p,u.textVert,u.textFrag),m=new f(v,d,g);return m}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(r,a,n){a.exports=p;var o=r("gl-select-static"),i=r("./lib/grid"),s=r("./lib/text"),l=r("./lib/line"),u=r("./lib/box");function f(d,g){this.gl=d,this.pickBuffer=g,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=f.prototype;c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){return function(){var d=this.gl,g=this.screenBox,m=this.viewBox,y=this.dataBox,_=this.pixelRatio,S=this.grid,M=this.line,w=this.text,A=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var k=this.borderColor;d.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var T=this.backgroundColor;d.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),d.clear(d.COLOR_BUFFER_BIT),S.draw();var L=this.zeroLineEnable,C=this.zeroLineColor,I=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var R=0;R<2;++R)if(!(!L[R]||!(y[R]<=0&&y[R+2]>=0))){var B=g[R]-y[R]*(g[R+2]-g[R])/(y[R+2]-y[R]);R===0?M.drawLine(B,g[1],B,g[3],I[R],C[R]):M.drawLine(g[0],B,g[2],B,I[R],C[R])}}for(var R=0;R<A.length;++R)A[R].draw();d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),M.bind();var N=this.borderLineEnable,D=this.borderLineWidth,O=this.borderLineColor;N[1]&&M.drawLine(m[0],m[1]-.5*D[1]*_,m[0],m[3]+.5*D[3]*_,D[1],O[1]),N[0]&&M.drawLine(m[0]-.5*D[0]*_,m[1],m[2]+.5*D[2]*_,m[1],D[0],O[0]),N[3]&&M.drawLine(m[2],m[1]-.5*D[1]*_,m[2],m[3]+.5*D[3]*_,D[3],O[3]),N[2]&&M.drawLine(m[0]-.5*D[0]*_,m[3],m[2]+.5*D[2]*_,m[3],D[2],O[2]),w.bind();for(var R=0;R<2;++R)w.drawTicks(R);this.titleEnable&&w.drawTitle();for(var $=this.overlays,R=0;R<$.length;++R)$[R].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),c.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var g=1,m=this.objects,y=0;y<m.length;++y)g=m[y].drawPick(g);d.end()}}}(),c.pick=function(){return function(d,g){if(!this.static){var m=this.pixelRatio,y=this.pickPixelRatio,_=this.viewBox,S=Math.round((d-_[0]/m)*y)|0,M=Math.round((g-_[1]/m)*y)|0,w=this.pickBuffer.query(S,M,this.pickRadius);if(!w)return null;for(var A=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),k=this.objects,T=0;T<k.length;++T){var L=k[T].pick(S,M,A);if(L)return L}return null}}}();function h(d){for(var g=d.slice(),m=0;m<g.length;++m)g[m]=g[m].slice();return g}function v(d,g){return d.x-g.x}c.setScreenBox=function(d){var g=this.screenBox,m=this.pixelRatio;g[0]=Math.round(d[0]*m)|0,g[1]=Math.round(d[1]*m)|0,g[2]=Math.round(d[2]*m)|0,g[3]=Math.round(d[3]*m)|0,this.setDirty()},c.setDataBox=function(d){var g=this.dataBox,m=g[0]!==d[0]||g[1]!==d[1]||g[2]!==d[2]||g[3]!==d[3];m&&(g[0]=d[0],g[1]=d[1],g[2]=d[2],g[3]=d[3],this.setDirty())},c.setViewBox=function(d){var g=this.pixelRatio,m=this.viewBox;m[0]=Math.round(d[0]*g)|0,m[1]=Math.round(d[1]*g)|0,m[2]=Math.round(d[2]*g)|0,m[3]=Math.round(d[3]*g)|0;var y=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*y)|0,Math.round((d[3]-d[1])*y)|0],this.setDirty()},c.update=function(d){d=d||{};var g=this.gl;this.pixelRatio=d.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(d.screenBox||[0,0,g.drawingBufferWidth/m,g.drawingBufferHeight/m]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var y=this.viewBox,_=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(d.dataBox||[-10,-10/_,10,10/_]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(y[0]+y[2])/m,(y[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var S=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var w=0;w<2;++w){var A=S[w].slice(0);A.length!==0&&(A.sort(v),M[w]=Math.min(M[w],A[0].x),M[w+2]=Math.max(M[w+2],A[A.length-1].x))}this.grid.update({bounds:M,ticks:S}),this.text.update({bounds:M,ticks:S,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},c.removeObject=function(d){for(var g=this.objects,m=0;m<g.length;++m)if(g[m]===d){g.splice(m,1),this.setDirty();break}},c.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},c.removeOverlay=function(d){for(var g=this.overlays,m=0;m<g.length;++m)if(g[m]===d){g.splice(m,1),this.setOverlayDirty();break}};function p(d){var g=d.gl,m=o(g,[g.drawingBufferWidth,g.drawingBufferHeight]),y=new f(g,m);return y.grid=i(y),y.text=s(y),y.line=l(y),y.box=u(y),y.update(d),y}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(r,a,n){a.exports=c;var o=r("right-now"),i=r("3d-view"),s=r("mouse-change"),l=r("mouse-wheel"),u=r("mouse-event-offset"),f=r("has-passive-events");function c(h,v){h=h||document.body,v=v||{};var p=[.01,1/0];"distanceLimits"in v&&(p[0]=v.distanceLimits[0],p[1]=v.distanceLimits[1]),"zoomMin"in v&&(p[0]=v.zoomMin),"zoomMax"in v&&(p[1]=v.zoomMax);var d=i({center:v.center||[0,0,0],up:v.up||[0,1,0],eye:v.eye||[0,0,10],mode:v.mode||"orbit",distanceLimits:p}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=h.clientWidth,_=h.clientHeight,S={keyBindingMode:"rotate",enableWheel:!0,view:d,element:h,delay:v.delay||16,rotateSpeed:v.rotateSpeed||1,zoomSpeed:v.zoomSpeed||1,translateSpeed:v.translateSpeed||1,flipX:!!v.flipX,flipY:!!v.flipY,modes:d.modes,_ortho:v._ortho||v.projection&&v.projection.type==="orthographic"||!1,tick:function(){var M=o(),w=this.delay,A=M-2*w;d.idle(M-w),d.recalcMatrix(A),d.flush(M-(100+w*2));for(var k=!0,T=d.computedMatrix,L=0;L<16;++L)k=k&&g[L]===T[L],g[L]=T[L];var C=h.clientWidth===y&&h.clientHeight===_;return y=h.clientWidth,_=h.clientHeight,k?!C:(m=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,w,A){d.lookAt(d.lastT(),M,w,A)},rotate:function(M,w,A){d.rotate(d.lastT(),M,w,A)},pan:function(M,w,A){d.pan(d.lastT(),M,w,A)},translate:function(M,w,A){d.translate(d.lastT(),M,w,A)}};return Object.defineProperties(S,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var w=d.computedUp.slice(),A=d.computedEye.slice(),k=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var T=o();d._active.lookAt(T,A,k,w),d._active.lookAt(T+500,A,k,[0,0,1]),d._active.flush(T)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(p)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),h.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),S._lastX=-1,S._lastY=-1,S._lastMods={shift:!1,control:!1,alt:!1,meta:!1},S.enableMouseListeners=function(){S.mouseListener=s(h,M),h.addEventListener("touchstart",function(w){var A=u(w.changedTouches[0],h);M(0,A[0],A[1],S._lastMods),M(1,A[0],A[1],S._lastMods)},f?{passive:!0}:!1),h.addEventListener("touchmove",function(w){var A=u(w.changedTouches[0],h);M(1,A[0],A[1],S._lastMods),w.preventDefault()},f?{passive:!1}:!1),h.addEventListener("touchend",function(w){M(0,S._lastX,S._lastY,S._lastMods)},f?{passive:!0}:!1);function M(w,A,k,T){var L=S.keyBindingMode;if(L!==!1){var C=L==="rotate",I=L==="pan",R=L==="zoom",B=!!T.control,N=!!T.alt,D=!!T.shift,O=!!(w&1),$=!!(w&2),Y=!!(w&4),X=1/h.clientHeight,ee=X*(A-S._lastX),Q=X*(k-S._lastY),Z=S.flipX?1:-1,q=S.flipY?1:-1,ae=Math.PI*S.rotateSpeed,ie=o();if(S._lastX!==-1&&S._lastY!==-1&&((C&&O&&!B&&!N&&!D||O&&!B&&!N&&D)&&d.rotate(ie,Z*ae*ee,-q*ae*Q,0),(I&&O&&!B&&!N&&!D||$||O&&B&&!N&&!D)&&d.pan(ie,-S.translateSpeed*ee*m,S.translateSpeed*Q*m,0),R&&O&&!B&&!N&&!D||Y||O&&!B&&N&&!D)){var we=-S.zoomSpeed*Q/window.innerHeight*(ie-d.lastT())*100;d.pan(ie,0,0,m*(Math.exp(we)-1))}return S._lastX=A,S._lastY=k,S._lastMods=T,!0}}S.wheelListener=l(h,function(w,A){if(S.keyBindingMode!==!1&&!!S.enableWheel){var k=S.flipX?1:-1,T=S.flipY?1:-1,L=o();if(Math.abs(w)>Math.abs(A))d.rotate(L,0,0,-w*k*Math.PI*S.rotateSpeed/window.innerWidth);else if(!S._ortho){var C=-S.zoomSpeed*T*A/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,m*(Math.exp(C)-1))}}},!0)},S.enableMouseListeners(),S}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(r,a,n){var o=r("glslify"),i=r("gl-shader"),s=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),l=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);a.exports=function(u){return i(u,s,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(r,a,n){var o=r("./camera.js"),i=r("gl-axes3d"),s=r("gl-axes3d/properties"),l=r("gl-spikes3d"),u=r("gl-select-static"),f=r("gl-fbo"),c=r("a-big-triangle"),h=r("mouse-change"),v=r("gl-mat4/perspective"),p=r("gl-mat4/ortho"),d=r("./lib/shader"),g=r("is-mobile")({tablet:!0,featureDetect:!0});a.exports={createScene:M,createCamera:o};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(A,k){var T=null;try{T=A.getContext("webgl",k),T||(T=A.getContext("experimental-webgl",k))}catch{return null}return T}function _(A){var k=Math.round(Math.log(Math.abs(A))/Math.log(10));if(k<0){var T=Math.round(Math.pow(10,-k));return Math.ceil(A*T)/T}else if(k>0){var T=Math.round(Math.pow(10,k));return Math.ceil(A/T)*T}return Math.ceil(A)}function S(A){return typeof A=="boolean"?A:!0}function M(A){A=A||{},A.camera=A.camera||{};var k=A.canvas;if(!k)if(k=document.createElement("canvas"),A.container){var T=A.container;T.appendChild(k)}else document.body.appendChild(k);var L=A.gl;if(L||(A.glOptions&&(g=!!A.glOptions.preserveDrawingBuffer),L=y(k,A.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!L)throw new Error("webgl not supported");var C=A.bounds||[[-10,-10,-10],[10,10,10]],I=new m,R=f(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!g}),B=d(L),N=A.cameraObject&&A.cameraObject._ortho===!0||A.camera.projection&&A.camera.projection.type==="orthographic"||!1,D={eye:A.camera.eye||[2,0,0],center:A.camera.center||[0,0,0],up:A.camera.up||[0,1,0],zoomMin:A.camera.zoomMax||.1,zoomMax:A.camera.zoomMin||100,mode:A.camera.mode||"turntable",_ortho:N},O=A.axes||{},$=i(L,O);$.enable=!O.disable;var Y=A.spikes||{},X=l(L,Y),ee=[],Q=[],Z=[],q=[],ae=!0,ie=!0,we=new Array(16),Te=new Array(16),he={view:null,projection:we,model:Te,_ortho:!1},ie=!0,xe=[L.drawingBufferWidth,L.drawingBufferHeight],Se=A.cameraObject||o(k,D),ye={gl:L,contextLost:!1,pixelRatio:A.pixelRatio||1,canvas:k,selection:I,camera:Se,axes:$,axesPixels:null,spikes:X,bounds:C,objects:ee,shape:xe,aspect:A.aspectRatio||[1,1,1],pickRadius:A.pickRadius||10,zNear:A.zNear||.01,zFar:A.zFar||1e3,fovy:A.fovy||Math.PI/4,clearColor:A.clearColor||[0,0,0,0],autoResize:S(A.autoResize),autoBounds:S(A.autoBounds),autoScale:!!A.autoScale,autoCenter:S(A.autoCenter),clipToBounds:S(A.clipToBounds),snapToData:!!A.snapToData,onselect:A.onselect||null,onrender:A.onrender||null,onclick:A.onclick||null,cameraParams:he,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ce){this.aspect[0]=ce.x,this.aspect[1]=ce.y,this.aspect[2]=ce.z,ie=!0},setBounds:function(ce,ue){this.bounds[0][ce]=ue.min,this.bounds[1][ce]=ue.max},setClearColor:function(ce){this.clearColor=ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},re=[L.drawingBufferWidth/ye.pixelRatio|0,L.drawingBufferHeight/ye.pixelRatio|0];function se(){if(!ye._stopped&&!!ye.autoResize){var ce=k.parentNode,ue=1,Re=1;ce&&ce!==document.body?(ue=ce.clientWidth,Re=ce.clientHeight):(ue=window.innerWidth,Re=window.innerHeight);var Xe=Math.ceil(ue*ye.pixelRatio)|0,Ke=Math.ceil(Re*ye.pixelRatio)|0;if(Xe!==k.width||Ke!==k.height){k.width=Xe,k.height=Ke;var vt=k.style;vt.position=vt.position||"absolute",vt.left="0px",vt.top="0px",vt.width=ue+"px",vt.height=Re+"px",ae=!0}}}ye.autoResize&&se(),window.addEventListener("resize",se);function de(){for(var ce=ee.length,ue=q.length,Re=0;Re<ue;++Re)Z[Re]=0;e:for(var Re=0;Re<ce;++Re){var Xe=ee[Re],Ke=Xe.pickSlots;if(!Ke){Q[Re]=-1;continue}for(var vt=0;vt<ue;++vt)if(Z[vt]+Ke<255){Q[Re]=vt,Xe.setPickBase(Z[vt]+1),Z[vt]+=Ke;continue e}var Ze=u(L,xe);Q[Re]=ue,q.push(Ze),Z.push(Ke),Xe.setPickBase(1),ue+=1}for(;ue>0&&Z[ue-1]===0;)Z.pop(),q.pop().dispose()}ye.update=function(ce){ye._stopped||(ae=!0,ie=!0)},ye.add=function(ce){ye._stopped||(ce.axes=$,ee.push(ce),Q.push(-1),ae=!0,ie=!0,de())},ye.remove=function(ce){if(!ye._stopped){var ue=ee.indexOf(ce);ue<0||(ee.splice(ue,1),Q.pop(),ae=!0,ie=!0,de())}},ye.dispose=function(){if(!ye._stopped&&(ye._stopped=!0,window.removeEventListener("resize",se),k.removeEventListener("webglcontextlost",Me),ye.mouseListener.enabled=!1,!ye.contextLost)){$.dispose(),X.dispose();for(var ce=0;ce<ee.length;++ce)ee[ce].dispose();R.dispose();for(var ce=0;ce<q.length;++ce)q[ce].dispose();B.dispose(),L=null,$=null,X=null,ee=[]}},ye._mouseRotating=!1,ye._prevButtons=0,ye.enableMouseListeners=function(){ye.mouseListener=h(k,function(ce,ue,Re){if(!ye._stopped){var Xe=q.length,Ke=ee.length,vt=I.object;I.distance=1/0,I.mouse[0]=ue,I.mouse[1]=Re,I.object=null,I.screen=null,I.dataCoordinate=I.dataPosition=null;var Ze=!1;if(ce&&ye._prevButtons)ye._mouseRotating=!0;else{ye._mouseRotating&&(ie=!0),ye._mouseRotating=!1;for(var Qe=0;Qe<Xe;++Qe){var Je=q[Qe].query(ue,re[1]-Re-1,ye.pickRadius);if(Je){if(Je.distance>I.distance)continue;for(var je=0;je<Ke;++je){var $e=ee[je];if(Q[je]===Qe){var Ye=$e.pick(Je);Ye&&(I.buttons=ce,I.screen=Je.coord,I.distance=Je.distance,I.object=$e,I.index=Ye.distance,I.dataPosition=Ye.position,I.dataCoordinate=Ye.dataCoordinate,I.data=Ye,Ze=!0)}}}}}vt&&vt!==I.object&&(vt.highlight&&vt.highlight(null),ae=!0),I.object&&(I.object.highlight&&I.object.highlight(I.data),ae=!0),Ze=Ze||I.object!==vt,Ze&&ye.onselect&&ye.onselect(I),ce&1&&!(ye._prevButtons&1)&&ye.onclick&&ye.onclick(I),ye._prevButtons=ce}})};function Me(){if(ye.contextLost)return!0;L.isContextLost()&&(ye.contextLost=!0,ye.mouseListener.enabled=!1,ye.selection.object=null,ye.oncontextloss&&ye.oncontextloss())}k.addEventListener("webglcontextlost",Me);function Ie(){if(!Me()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var ce=ee.length,ue=q.length,Re=0;Re<ue;++Re){var Xe=q[Re];Xe.shape=re,Xe.begin();for(var Ke=0;Ke<ce;++Ke)if(Q[Ke]===Re){var vt=ee[Ke];vt.drawPick&&(vt.pixelRatio=1,vt.drawPick(he))}Xe.end()}}}var Ee=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],qe=[Ee[0].slice(),Ee[1].slice()];function be(){if(!Me()){se();var ce=ye.camera.tick();he.view=ye.camera.matrix,ae=ae||ce,ie=ie||ce,$.pixelRatio=ye.pixelRatio,X.pixelRatio=ye.pixelRatio;var ue=ee.length,Re=Ee[0],Xe=Ee[1];Re[0]=Re[1]=Re[2]=1/0,Xe[0]=Xe[1]=Xe[2]=-1/0;for(var Ke=0;Ke<ue;++Ke){var vt=ee[Ke];vt.pixelRatio=ye.pixelRatio,vt.axes=ye.axes,ae=ae||!!vt.dirty,ie=ie||!!vt.dirty;var Ze=vt.bounds;if(Ze)for(var Qe=Ze[0],Je=Ze[1],je=0;je<3;++je)Re[je]=Math.min(Re[je],Qe[je]),Xe[je]=Math.max(Xe[je],Je[je])}var $e=ye.bounds;if(ye.autoBounds)for(var je=0;je<3;++je){if(Xe[je]<Re[je])Re[je]=-1,Xe[je]=1;else{Re[je]===Xe[je]&&(Re[je]-=1,Xe[je]+=1);var Ye=.05*(Xe[je]-Re[je]);Re[je]=Re[je]-Ye,Xe[je]=Xe[je]+Ye}$e[0][je]=Re[je],$e[1][je]=Xe[je]}for(var yt=!1,je=0;je<3;++je)yt=yt||qe[0][je]!==$e[0][je]||qe[1][je]!==$e[1][je],qe[0][je]=$e[0][je],qe[1][je]=$e[1][je];if(ie=ie||yt,ae=ae||yt,!!ae){if(yt){for(var _t=[0,0,0],Ke=0;Ke<3;++Ke)_t[Ke]=_(($e[1][Ke]-$e[0][Ke])/10);$.autoTicks?$.update({bounds:$e,tickSpacing:_t}):$.update({bounds:$e})}var Pt=L.drawingBufferWidth,Tt=L.drawingBufferHeight;xe[0]=Pt,xe[1]=Tt,re[0]=Math.max(Pt/ye.pixelRatio,1)|0,re[1]=Math.max(Tt/ye.pixelRatio,1)|0,w(ye,N);for(var Ke=0;Ke<ue;++Ke){var vt=ee[Ke];vt.axesBounds=$e,ye.clipToBounds&&(vt.clipBounds=$e)}I.object&&(ye.snapToData?X.position=I.dataCoordinate:X.position=I.dataPosition,X.bounds=$e),ie&&(ie=!1,Ie()),ye.axesPixels=s(ye.axes,he,Pt,Tt),ye.onrender&&ye.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Pt,Tt),ye.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Ot=!1;$.enable&&(Ot=Ot||$.isTransparent(),$.draw(he)),X.axes=$,I.object&&X.draw(he),L.disable(L.CULL_FACE);for(var Ke=0;Ke<ue;++Ke){var vt=ee[Ke];vt.axes=$,vt.pixelRatio=ye.pixelRatio,vt.isOpaque&&vt.isOpaque()&&vt.draw(he),vt.isTransparent&&vt.isTransparent()&&(Ot=!0)}if(Ot){R.shape=xe,R.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),$.enable&&$.isTransparent()&&$.drawTransparent(he);for(var Ke=0;Ke<ue;++Ke){var vt=ee[Ke];vt.isOpaque&&vt.isOpaque()&&vt.draw(he)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),$.isTransparent()&&$.drawTransparent(he);for(var Ke=0;Ke<ue;++Ke){var vt=ee[Ke];vt.isTransparent&&vt.isTransparent()&&vt.drawTransparent(he)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),B.bind(),R.color[0].bind(0),B.uniforms.accumBuffer=0,c(L),L.disable(L.BLEND)}ae=!1;for(var Ke=0;Ke<ue;++Ke)ee[Ke].dirty=!1}}}function oe(){ye._stopped||ye.contextLost||(be(),requestAnimationFrame(oe))}return ye.enableMouseListeners(),oe(),ye.redraw=function(){ye._stopped||(ae=!0,be())},ye}function w(A,k){var T=A.bounds,L=A.cameraParams,C=L.projection,I=L.model,R=A.gl.drawingBufferWidth,B=A.gl.drawingBufferHeight,N=A.zNear,D=A.zFar,O=A.fovy,$=R/B;k?(p(C,-$,$,-1,1,N,D),L._ortho=!0):(v(C,O,$,N,D),L._ortho=!1);for(var Y=0;Y<16;++Y)I[Y]=0;I[15]=1;for(var X=0,Y=0;Y<3;++Y)X=Math.max(X,T[1][Y]-T[0][Y]);for(var Y=0;Y<3;++Y)A.autoScale?I[5*Y]=A.aspect[Y]/(T[1][Y]-T[0][Y]):I[5*Y]=1/X,A.autoCenter&&(I[12+Y]=-I[5*Y]*.5*(T[0][Y]+T[1][Y]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(r,a,n){var o=r("glslify");n.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),n.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),n.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),n.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(r,a,n){var o=r("gl-shader"),i=r("gl-buffer"),s=r("typedarray-pool"),l=r("./lib/shader");a.exports=h;function u(v,p,d,g,m){this.plot=v,this.offsetBuffer=p,this.pickBuffer=d,this.shader=g,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=u.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(v){var p;v=v||{};function d(w,A){return w in v?v[w]:A}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var g=v.positions.length>>>1,m=v.positions instanceof Float32Array,y=v.idToIndex instanceof Int32Array&&v.idToIndex.length>=g,_=v.positions,S=m?_:s.mallocFloat32(_.length),M=y?v.idToIndex:s.mallocInt32(g);if(m||S.set(_),!y)for(S.set(_),p=0;p<g;p++)M[p]=p;this.points=_,this.offsetBuffer.update(S),this.pickBuffer.update(M),m||s.free(S),y||s.free(M),this.pointCount=g,this.pickOffset=0};function c(v,p){var d=0,g=v.length>>>1,m;for(m=0;m<g;m++){var y=v[m*2],_=v[m*2+1];y>=p[0]&&y<=p[2]&&_>=p[1]&&_<=p[3]&&d++}return d}f.unifiedDraw=function(){var v=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(d){var g=d!==void 0,m=g?this.pickShader:this.shader,y=this.plot.gl,_=this.plot.dataBox;if(this.pointCount===0)return d;var S=_[2]-_[0],M=_[3]-_[1],w=c(this.points,_),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));v[0]=2/S,v[4]=2/M,v[6]=-2*_[0]/S-1,v[7]=-2*_[1]/M-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=v,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=A<5,m.uniforms.pointSize=A,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(p[0]=d&255,p[1]=d>>8&255,p[2]=d>>16&255,p[3]=d>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(y.UNSIGNED_BYTE),m.uniforms.pickOffset=p,this.pickOffset=d);var k=y.getParameter(y.BLEND),T=y.getParameter(y.DITHER);return k&&!this.blend&&y.disable(y.BLEND),T&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),k&&!this.blend&&y.enable(y.BLEND),T&&y.enable(y.DITHER),d+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(v,p,d){var g=this.pickOffset,m=this.pointCount;if(d<g||d>=g+m)return null;var y=d-g,_=this.points;return{object:this,pointId:y,dataCoord:[_[2*y],_[2*y+1]]}};function h(v,p){var d=v.gl,g=i(d),m=i(d),y=o(d,l.pointVertex,l.pointFragment),_=o(d,l.pickVertex,l.pickFragment),S=new u(v,g,m,y,_);return S.update(p),v.addObject(S),S}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3],p=l[0],d=l[1],g=l[2],m=l[3],y,_,S,M,w;return _=f*p+c*d+h*g+v*m,_<0&&(_=-_,p=-p,d=-d,g=-g,m=-m),1-_>1e-6?(y=Math.acos(_),S=Math.sin(y),M=Math.sin((1-u)*y)/S,w=Math.sin(u*y)/S):(M=1-u,w=u),i[0]=M*f+w*p,i[1]=M*c+w*d,i[2]=M*h+w*g,i[3]=M*v+w*m,i}},{}],125:[function(r,a,n){a.exports=function(o){return!o&&o!==0?"":o.toString()}},{}],126:[function(r,a,n){var o=r("vectorize-text");a.exports=s;var i={};function s(l,u,f){var c=i[u];if(c||(c=i[u]={}),l in c)return c[l];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:u,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};h.triangles=!0;var v=o(l,h);h.triangles=!1;var p=o(l,h),d,g;if(f&&f!==1){for(d=0;d<v.positions.length;++d)for(g=0;g<v.positions[d].length;++g)v.positions[d][g]/=f;for(d=0;d<p.positions.length;++d)for(g=0;g<p.positions[d].length;++g)p.positions[d][g]/=f}var m=[[1/0,1/0],[-1/0,-1/0]],y=p.positions.length;for(d=0;d<y;++d){var _=p.positions[d];for(g=0;g<2;++g)m[0][g]=Math.min(m[0][g],_[g]),m[1][g]=Math.max(m[1][g],_[g])}return c[l]=[v,p,m]}},{"vectorize-text":311}],127:[function(r,a,n){var o=r("gl-shader"),i=r("glslify"),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),c=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],v={vertex:s,fragment:f,attributes:h},p={vertex:l,fragment:f,attributes:h},d={vertex:u,fragment:f,attributes:h},g={vertex:s,fragment:c,attributes:h},m={vertex:l,fragment:c,attributes:h},y={vertex:u,fragment:c,attributes:h};function _(S,M){var w=o(S,M),A=w.attributes;return A.position.location=0,A.color.location=1,A.glyph.location=2,A.id.location=3,w}n.createPerspective=function(S){return _(S,v)},n.createOrtho=function(S){return _(S,p)},n.createProject=function(S){return _(S,d)},n.createPickPerspective=function(S){return _(S,g)},n.createPickOrtho=function(S){return _(S,m)},n.createPickProject=function(S){return _(S,y)}},{"gl-shader":132,glslify:231}],128:[function(r,a,n){var o=r("is-string-blank"),i=r("gl-buffer"),s=r("gl-vao"),l=r("typedarray-pool"),u=r("gl-mat4/multiply"),f=r("./lib/shaders"),c=r("./lib/glyphs"),h=r("./lib/get-simple-string"),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.exports=Q;function p(Z,q){var ae=Z[0],ie=Z[1],we=Z[2],Te=Z[3];return Z[0]=q[0]*ae+q[4]*ie+q[8]*we+q[12]*Te,Z[1]=q[1]*ae+q[5]*ie+q[9]*we+q[13]*Te,Z[2]=q[2]*ae+q[6]*ie+q[10]*we+q[14]*Te,Z[3]=q[3]*ae+q[7]*ie+q[11]*we+q[15]*Te,Z}function d(Z,q,ae,ie){return p(ie,ie),p(ie,ie),p(ie,ie)}function g(Z,q){this.index=Z,this.dataCoordinate=this.position=q}function m(Z){return Z===!0||Z>1?1:Z}function y(Z,q,ae,ie,we,Te,he,xe,Se,ye,re,se){this.gl=Z,this.pixelRatio=1,this.shader=q,this.orthoShader=ae,this.projectShader=ie,this.pointBuffer=we,this.colorBuffer=Te,this.glyphBuffer=he,this.idBuffer=xe,this.vao=Se,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ye,this.pickOrthoShader=re,this.pickProjectShader=se,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var _=y.prototype;_.pickSlots=1,_.setPickBase=function(Z){this.pickId=Z},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&!this.projectHasAlpha)return!0;return!1};var S=[0,0],M=[0,0,0],w=[0,0,0],A=[0,0,0,1],k=[0,0,0,1],T=v.slice(),L=[0,0,0],C=[[0,0,0],[0,0,0]];function I(Z){return Z[0]=Z[1]=Z[2]=0,Z}function R(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[3]=1,Z}function B(Z,q,ae,ie){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[ae]=ie,Z}function N(Z){for(var q=C,ae=0;ae<2;++ae)for(var ie=0;ie<3;++ie)q[ae][ie]=Math.max(Math.min(Z[ae][ie],1e8),-1e8);return q}function D(Z,q,ae,ie){var we=q.axesProject,Te=q.gl,he=Z.uniforms,xe=ae.model||v,Se=ae.view||v,ye=ae.projection||v,re=q.axesBounds,se=N(q.clipBounds),de;q.axes&&q.axes.lastCubeProps?de=q.axes.lastCubeProps.axis:de=[1,1,1],S[0]=2/Te.drawingBufferWidth,S[1]=2/Te.drawingBufferHeight,Z.bind(),he.view=Se,he.projection=ye,he.screenSize=S,he.highlightId=q.highlightId,he.highlightScale=q.highlightScale,he.clipBounds=se,he.pickGroup=q.pickId/255,he.pixelRatio=ie;for(var Me=0;Me<3;++Me)if(!!we[Me]){he.scale=q.projectScale[Me],he.opacity=q.projectOpacity[Me];for(var Ie=T,Ee=0;Ee<16;++Ee)Ie[Ee]=0;for(var Ee=0;Ee<4;++Ee)Ie[5*Ee]=1;Ie[5*Me]=0,de[Me]<0?Ie[12+Me]=re[0][Me]:Ie[12+Me]=re[1][Me],u(Ie,xe,Ie),he.model=Ie;var qe=(Me+1)%3,be=(Me+2)%3,oe=I(M),ce=I(w);oe[qe]=1,ce[be]=1;var ue=d(ye,Se,xe,R(A,oe)),Re=d(ye,Se,xe,R(k,ce));if(Math.abs(ue[1])>Math.abs(Re[1])){var Xe=ue;ue=Re,Re=Xe,Xe=oe,oe=ce,ce=Xe;var Ke=qe;qe=be,be=Ke}ue[0]<0&&(oe[qe]=-1),Re[1]>0&&(ce[be]=-1);for(var vt=0,Ze=0,Ee=0;Ee<4;++Ee)vt+=Math.pow(xe[4*qe+Ee],2),Ze+=Math.pow(xe[4*be+Ee],2);oe[qe]/=Math.sqrt(vt),ce[be]/=Math.sqrt(Ze),he.axes[0]=oe,he.axes[1]=ce,he.fragClipBounds[0]=B(L,se[0],Me,-1e8),he.fragClipBounds[1]=B(L,se[1],Me,1e8),q.vao.bind(),q.vao.draw(Te.TRIANGLES,q.vertexCount),q.lineWidth>0&&(Te.lineWidth(q.lineWidth*ie),q.vao.draw(Te.LINES,q.lineVertexCount,q.vertexCount)),q.vao.unbind()}}var O=[-1e8,-1e8,-1e8],$=[1e8,1e8,1e8],Y=[O,$];function X(Z,q,ae,ie,we,Te,he){var xe=ae.gl;if((Te===ae.projectHasAlpha||he)&&D(q,ae,ie,we),Te===ae.hasAlpha||he){Z.bind();var Se=Z.uniforms;Se.model=ie.model||v,Se.view=ie.view||v,Se.projection=ie.projection||v,S[0]=2/xe.drawingBufferWidth,S[1]=2/xe.drawingBufferHeight,Se.screenSize=S,Se.highlightId=ae.highlightId,Se.highlightScale=ae.highlightScale,Se.fragClipBounds=Y,Se.clipBounds=ae.axes.bounds,Se.opacity=ae.opacity,Se.pickGroup=ae.pickId/255,Se.pixelRatio=we,ae.vao.bind(),ae.vao.draw(xe.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(xe.lineWidth(ae.lineWidth*we),ae.vao.draw(xe.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}_.draw=function(Z){var q=this.useOrtho?this.orthoShader:this.shader;X(q,this.projectShader,this,Z,this.pixelRatio,!1,!1)},_.drawTransparent=function(Z){var q=this.useOrtho?this.orthoShader:this.shader;X(q,this.projectShader,this,Z,this.pixelRatio,!0,!1)},_.drawPick=function(Z){var q=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;X(q,this.pickProjectShader,this,Z,1,!0,!0)},_.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var q=Z.value[2]+(Z.value[1]<<8)+(Z.value[0]<<16);if(q>=this.pointCount||q<0)return null;var ae=this.points[q],ie=this._selectResult;ie.index=q;for(var we=0;we<3;++we)ie.position[we]=ie.dataCoordinate[we]=ae[we];return ie},_.highlight=function(Z){if(!Z)this.highlightId=[1,1,1,1];else{var q=Z.index,ae=q&255,ie=q>>8&255,we=q>>16&255;this.highlightId=[ae/255,ie/255,we/255,0]}};function ee(Z,q,ae,ie){var we;Array.isArray(Z)?q<Z.length?we=Z[q]:we=void 0:we=Z,we=h(we);var Te=!0;o(we)&&(we="\u25BC",Te=!1);var he=c(we,ae,ie);return{mesh:he[0],lines:he[1],bounds:he[2],visible:Te}}_.update=function(Z){if(Z=Z||{},"perspective"in Z&&(this.useOrtho=!Z.perspective),"orthographic"in Z&&(this.useOrtho=!!Z.orthographic),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"project"in Z)if(Array.isArray(Z.project))this.axesProject=Z.project;else{var q=!!Z.project;this.axesProject=[q,q,q]}if("projectScale"in Z)if(Array.isArray(Z.projectScale))this.projectScale=Z.projectScale.slice();else{var ae=+Z.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in Z){if(Array.isArray(Z.projectOpacity))this.projectOpacity=Z.projectOpacity.slice();else{var ae=+Z.projectOpacity;this.projectOpacity=[ae,ae,ae]}for(var ie=0;ie<3;++ie)this.projectOpacity[ie]=m(this.projectOpacity[ie]),this.projectOpacity[ie]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Z&&(this.opacity=m(Z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var we=Z.position,Te=Z.font||"normal",he=Z.alignment||[0,0],xe,Se;if(he.length===2)xe=he[0],Se=he[1];else{xe=[],Se=[];for(var ie=0;ie<he.length;++ie)xe[ie]=he[ie][0],Se[ie]=he[ie][1]}var ye=[1/0,1/0,1/0],re=[-1/0,-1/0,-1/0],se=Z.glyph,de=Z.color,Me=Z.size,Ie=Z.angle,Ee=Z.lineColor,qe=-1,be=0,oe=0,ce=0;if(we.length){ce=we.length;e:for(var ie=0;ie<ce;++ie){for(var ue=we[ie],Re=0;Re<3;++Re)if(isNaN(ue[Re])||!isFinite(ue[Re]))continue e;var Xe=ee(se,ie,Te,this.pixelRatio),Ke=Xe.mesh,vt=Xe.lines,Ze=Xe.bounds;be+=Ke.cells.length*3,oe+=vt.edges.length*2}}var Qe=be+oe,Je=l.mallocFloat(3*Qe),je=l.mallocFloat(4*Qe),$e=l.mallocFloat(2*Qe),Ye=l.mallocUint32(Qe);if(Qe>0){var yt=0,_t=be,Pt=[0,0,0,1],Tt=[0,0,0,1],Ot=Array.isArray(de)&&Array.isArray(de[0]),qt=Array.isArray(Ee)&&Array.isArray(Ee[0]);e:for(var ie=0;ie<ce;++ie){qe+=1;for(var ue=we[ie],Re=0;Re<3;++Re){if(isNaN(ue[Re])||!isFinite(ue[Re]))continue e;re[Re]=Math.max(re[Re],ue[Re]),ye[Re]=Math.min(ye[Re],ue[Re])}var Xe=ee(se,ie,Te,this.pixelRatio),Ke=Xe.mesh,vt=Xe.lines,Ze=Xe.bounds,Xt=Xe.visible;if(!Xt)Pt=[1,1,1,0];else if(Array.isArray(de)){var Or;if(Ot?ie<de.length?Or=de[ie]:Or=[0,0,0,0]:Or=de,Or.length===3){for(var Re=0;Re<3;++Re)Pt[Re]=Or[Re];Pt[3]=1}else if(Or.length===4){for(var Re=0;Re<4;++Re)Pt[Re]=Or[Re];!this.hasAlpha&&Or[3]<1&&(this.hasAlpha=!0)}}else Pt[0]=Pt[1]=Pt[2]=0,Pt[3]=1;if(!Xt)Tt=[1,1,1,0];else if(Array.isArray(Ee)){var Or;if(qt?ie<Ee.length?Or=Ee[ie]:Or=[0,0,0,0]:Or=Ee,Or.length===3){for(var Re=0;Re<3;++Re)Tt[Re]=Or[Re];Tt[Re]=1}else if(Or.length===4){for(var Re=0;Re<4;++Re)Tt[Re]=Or[Re];!this.hasAlpha&&Or[3]<1&&(this.hasAlpha=!0)}}else Tt[0]=Tt[1]=Tt[2]=0,Tt[3]=1;var Br=.5;Xt?Array.isArray(Me)?ie<Me.length?Br=+Me[ie]:Br=12:Me?Br=+Me:this.useOrtho&&(Br=12):Br=0;var Qr=0;Array.isArray(Ie)?ie<Ie.length?Qr=+Ie[ie]:Qr=0:Ie&&(Qr=+Ie);for(var Sr=Math.cos(Qr),Zr=Math.sin(Qr),ue=we[ie],Re=0;Re<3;++Re)re[Re]=Math.max(re[Re],ue[Re]),ye[Re]=Math.min(ye[Re],ue[Re]);var Oe=xe,it=Se,Oe=0;Array.isArray(xe)?ie<xe.length?Oe=xe[ie]:Oe=0:xe&&(Oe=xe);var it=0;Array.isArray(Se)?ie<Se.length?it=Se[ie]:it=0:Se&&(it=Se),Oe*=Oe>0?1-Ze[0][0]:Oe<0?1+Ze[1][0]:1,it*=it>0?1-Ze[0][1]:it<0?1+Ze[1][1]:1;for(var ft=[Oe,it],pt=Ke.cells||[],Dt=Ke.positions||[],Re=0;Re<pt.length;++Re)for(var Nt=pt[Re],hr=0;hr<3;++hr){for(var fr=0;fr<3;++fr)Je[3*yt+fr]=ue[fr];for(var fr=0;fr<4;++fr)je[4*yt+fr]=Pt[fr];Ye[yt]=qe;var vr=Dt[Nt[hr]];$e[2*yt]=Br*(Sr*vr[0]-Zr*vr[1]+ft[0]),$e[2*yt+1]=Br*(Zr*vr[0]+Sr*vr[1]+ft[1]),yt+=1}for(var pt=vt.edges,Dt=vt.positions,Re=0;Re<pt.length;++Re)for(var Nt=pt[Re],hr=0;hr<2;++hr){for(var fr=0;fr<3;++fr)Je[3*_t+fr]=ue[fr];for(var fr=0;fr<4;++fr)je[4*_t+fr]=Tt[fr];Ye[_t]=qe;var vr=Dt[Nt[hr]];$e[2*_t]=Br*(Sr*vr[0]-Zr*vr[1]+ft[0]),$e[2*_t+1]=Br*(Zr*vr[0]+Sr*vr[1]+ft[1]),_t+=1}}}this.bounds=[ye,re],this.points=we,this.pointCount=we.length,this.vertexCount=be,this.lineVertexCount=oe,this.pointBuffer.update(Je),this.colorBuffer.update(je),this.glyphBuffer.update($e),this.idBuffer.update(Ye),l.free(Je),l.free(je),l.free($e),l.free(Ye)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function Q(Z){var q=Z.gl,ae=f.createPerspective(q),ie=f.createOrtho(q),we=f.createProject(q),Te=f.createPickPerspective(q),he=f.createPickOrtho(q),xe=f.createPickProject(q),Se=i(q),ye=i(q),re=i(q),se=i(q),de=s(q,[{buffer:Se,size:3,type:q.FLOAT},{buffer:ye,size:4,type:q.FLOAT},{buffer:re,size:2,type:q.FLOAT},{buffer:se,size:4,type:q.UNSIGNED_BYTE,normalized:!0}]),Me=new y(q,ae,ie,we,Se,ye,re,se,de,Te,he,xe);return Me.update(Z),Me}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(r,a,n){var o=r("glslify");n.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),n.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(r,a,n){var o=r("gl-shader"),i=r("gl-buffer"),s=r("./lib/shaders");a.exports=f;function l(c,h,v){this.plot=c,this.boxBuffer=h,this.boxShader=v,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var u=l.prototype;u.draw=function(){if(!!this.enabled){var c=this.plot,h=this.selectBox,v=this.borderWidth;this.innerFill;var p=this.innerColor;this.outerFill;var d=this.outerColor,g=this.borderColor,m=c.box,y=c.screenBox,_=c.dataBox,S=c.viewBox,M=c.pixelRatio,w=(h[0]-_[0])*(S[2]-S[0])/(_[2]-_[0])+S[0],A=(h[1]-_[1])*(S[3]-S[1])/(_[3]-_[1])+S[1],k=(h[2]-_[0])*(S[2]-S[0])/(_[2]-_[0])+S[0],T=(h[3]-_[1])*(S[3]-S[1])/(_[3]-_[1])+S[1];if(w=Math.max(w,S[0]),A=Math.max(A,S[1]),k=Math.min(k,S[2]),T=Math.min(T,S[3]),!(k<w||T<A)){m.bind();var L=y[2]-y[0],C=y[3]-y[1];if(this.outerFill&&(m.drawBox(0,0,L,A,d),m.drawBox(0,A,w,T,d),m.drawBox(0,T,L,C,d),m.drawBox(k,A,L,T,d)),this.innerFill&&m.drawBox(w,A,k,T,p),v>0){var I=v*M;m.drawBox(w-I,A-I,k+I,A+I,g),m.drawBox(w-I,T-I,k+I,T+I,g),m.drawBox(w-I,A-I,w+I,T+I,g),m.drawBox(k-I,A-I,k+I,T+I,g)}}}},u.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(c,h){var v=c.gl,p=i(v,[0,0,0,1,1,0,1,1]),d=o(v,s.boxVertex,s.boxFragment),g=new l(c,p,d);return g.update(h),c.addOverlay(g),g}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(r,a,n){a.exports=v;var o=r("gl-fbo"),i=r("typedarray-pool"),s=r("ndarray"),l=r("bit-twiddle").nextPow2,u=function(p,d,g){for(var m=1e8,y=-1,_=-1,S=p.shape[0],M=p.shape[1],w=0;w<S;w++)for(var A=0;A<M;A++){var k=p.get(w,A,0),T=p.get(w,A,1),L=p.get(w,A,2),C=p.get(w,A,3);if(k<255||T<255||L<255||C<255){var I=d-w,R=g-A,B=I*I+R*R;B<m&&(m=B,y=w,_=A)}}return[y,_,m]};function f(p,d,g,m,y){this.coord=[p,d],this.id=g,this.value=m,this.distance=y}function c(p,d,g){this.gl=p,this.fbo=d,this.buffer=g,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(d.bind(),p.readPixels(0,0,d.shape[0],d.shape[1],p.RGBA,p.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(p){if(!!this.gl){this.fbo.shape=p;var d=this.fbo.shape[0],g=this.fbo.shape[1];if(g*d*4>this.buffer.length){i.free(this.buffer);for(var m=this.buffer=i.mallocUint8(l(g*d*4)),y=0;y<g*d*4;++y)m[y]=255}return p}}}),h.begin=function(){var p=this.gl;this.shape,!!p&&(this.fbo.bind(),p.clearColor(1,1,1,1),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT))},h.end=function(){var p=this.gl;!p||(p.bindFramebuffer(p.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(p,d,g){if(!this.gl)return null;var m=this.fbo.shape.slice();p=p|0,d=d|0,typeof g!="number"&&(g=1);var y=Math.min(Math.max(p-g,0),m[0])|0,_=Math.min(Math.max(p+g,0),m[0])|0,S=Math.min(Math.max(d-g,0),m[1])|0,M=Math.min(Math.max(d+g,0),m[1])|0;if(_<=y||M<=S)return null;var w=[_-y,M-S],A=s(this.buffer,[w[0],w[1],4],[4,m[0]*4,1],4*(y+m[0]*S)),k=u(A.hi(w[0],w[1],1),g,g),T=k[0],L=k[1];if(T<0||Math.pow(this.radius,2)<k[2])return null;var C=A.get(T,L,0),I=A.get(T,L,1),R=A.get(T,L,2),B=A.get(T,L,3);return new f(T+y|0,L+S|0,C,[I,R,B],Math.sqrt(k[2]))},h.dispose=function(){!this.gl||(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function v(p,d){var g=d[0],m=d[1],y={},_=o(p,g,m,y),S=i.mallocUint8(g*m*4);return new c(p,_,S)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(r,a,n){var o=r("./lib/create-uniforms"),i=r("./lib/create-attributes"),s=r("./lib/reflect"),l=r("./lib/shader-cache"),u=r("./lib/runtime-reflect"),f=r("./lib/GLError");function c(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=c.prototype;h.bind=function(){this.program||this._relink();var d,g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(g>m)for(d=m;d<g;d++)this.gl.enableVertexAttribArray(d);else if(m>g)for(d=g;d<m;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},h.dispose=function(){for(var d=this.gl.lastAttribCount,g=0;g<d;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function v(d,g){return d.name<g.name?-1:1}h.update=function(d,g,m,y){if(!g||arguments.length===1){var _=d;d=_.vertex,g=_.fragment,m=_.uniforms,y=_.attributes}var S=this,M=S.gl,w=S._vref;S._vref=l.shader(M,M.VERTEX_SHADER,d),w&&w.dispose(),S.vertShader=S._vref.shader;var A=this._fref;if(S._fref=l.shader(M,M.FRAGMENT_SHADER,g),A&&A.dispose(),S.fragShader=S._fref.shader,!m||!y){var k=M.createProgram();if(M.attachShader(k,S.fragShader),M.attachShader(k,S.vertShader),M.linkProgram(k),!M.getProgramParameter(k,M.LINK_STATUS)){var T=M.getProgramInfoLog(k);throw new f(T,"Error linking program:"+T)}m=m||u.uniforms(M,k),y=y||u.attributes(M,k),M.deleteProgram(k)}y=y.slice(),y.sort(v);var L=[],C=[],I=[],R;for(R=0;R<y.length;++R){var B=y[R];if(B.type.indexOf("mat")>=0){for(var N=B.type.charAt(B.type.length-1)|0,D=new Array(N),O=0;O<N;++O)D[O]=I.length,C.push(B.name+"["+O+"]"),typeof B.location=="number"?I.push(B.location+O):Array.isArray(B.location)&&B.location.length===N&&typeof B.location[O]=="number"?I.push(B.location[O]|0):I.push(-1);L.push({name:B.name,type:B.type,locations:D})}else L.push({name:B.name,type:B.type,locations:[I.length]}),C.push(B.name),typeof B.location=="number"?I.push(B.location|0):I.push(-1)}var $=0;for(R=0;R<I.length;++R)if(I[R]<0){for(;I.indexOf($)>=0;)$+=1;I[R]=$}var Y=new Array(m.length);function X(){S.program=l.program(M,S._vref,S._fref,C,I);for(var ee=0;ee<m.length;++ee)Y[ee]=M.getUniformLocation(S.program,m[ee].name)}X(),S._relink=X,S.types={uniforms:s(m),attributes:s(y)},S.attributes=i(M,S,L,I),Object.defineProperty(S,"uniforms",o(M,S,m,Y))};function p(d,g,m,y,_){var S=new c(d);return S.update(g,m,y,_),S}a.exports=p},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(r,a,n){function o(i,s,l){this.shortMessage=s||"",this.longMessage=l||"",this.rawError=i||"",this.message="gl-shader: "+(s||i||"")+(l?`
`+l:""),this.stack=new Error().stack}o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,a.exports=o},{}],134:[function(r,a,n){a.exports=c;var o=r("./GLError");function i(h,v,p,d,g,m){this._gl=h,this._wrapper=v,this._index=p,this._locations=d,this._dimension=g,this._constFunc=m}var s=i.prototype;s.pointer=function(v,p,d,g){var m=this,y=m._gl,_=m._locations[m._index];y.vertexAttribPointer(_,m._dimension,v||y.FLOAT,!!p,d||0,g||0),y.enableVertexAttribArray(_)},s.set=function(h,v,p,d){return this._constFunc(this._locations[this._index],h,v,p,d)},Object.defineProperty(s,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=h|0,this._wrapper.program=null),h|0}});var l=[function(h,v,p){return p.length===void 0?h.vertexAttrib1f(v,p):h.vertexAttrib1fv(v,p)},function(h,v,p,d){return p.length===void 0?h.vertexAttrib2f(v,p,d):h.vertexAttrib2fv(v,p)},function(h,v,p,d,g){return p.length===void 0?h.vertexAttrib3f(v,p,d,g):h.vertexAttrib3fv(v,p)},function(h,v,p,d,g,m){return p.length===void 0?h.vertexAttrib4f(v,p,d,g,m):h.vertexAttrib4fv(v,p)}];function u(h,v,p,d,g,m,y){var _=l[g],S=new i(h,v,p,d,g,_);Object.defineProperty(m,y,{set:function(M){return h.disableVertexAttribArray(d[p]),_(h,d[p],M),M},get:function(){return S},enumerable:!0})}function f(h,v,p,d,g,m,y){for(var _=new Array(g),S=new Array(g),M=0;M<g;++M)u(h,v,p[M],d,g,_,M),S[M]=_[M];Object.defineProperty(_,"location",{set:function(k){if(Array.isArray(k))for(var T=0;T<g;++T)S[T].location=k[T];else for(var T=0;T<g;++T)S[T].location=k+T;return k},get:function(){for(var k=new Array(g),T=0;T<g;++T)k[T]=d[p[T]];return k},enumerable:!0}),_.pointer=function(k,T,L,C){k=k||h.FLOAT,T=!!T,L=L||g*g,C=C||0;for(var I=0;I<g;++I){var R=d[p[I]];h.vertexAttribPointer(R,g,k,T,L,C+I*g),h.enableVertexAttribArray(R)}};var w=new Array(g),A=h["vertexAttrib"+g+"fv"];Object.defineProperty(m,y,{set:function(k){for(var T=0;T<g;++T){var L=d[p[T]];if(h.disableVertexAttribArray(L),Array.isArray(k[0]))A.call(h,L,k[T]);else{for(var C=0;C<g;++C)w[C]=k[g*T+C];A.call(h,L,w)}}return k},get:function(){return _},enumerable:!0})}function c(h,v,p,d){for(var g={},m=0,y=p.length;m<y;++m){var _=p[m],S=_.name,M=_.type,w=_.locations;switch(M){case"bool":case"int":case"float":u(h,v,w[0],d,1,g,S);break;default:if(M.indexOf("vec")>=0){var A=M.charCodeAt(M.length-1)-48;if(A<2||A>4)throw new o("","Invalid data type for attribute "+S+": "+M);u(h,v,w[0],d,A,g,S)}else if(M.indexOf("mat")>=0){var A=M.charCodeAt(M.length-1)-48;if(A<2||A>4)throw new o("","Invalid data type for attribute "+S+": "+M);f(h,v,w,d,A,g,S)}else throw new o("","Unknown data type for attribute "+S+": "+M);break}}return g}},{"./GLError":133}],135:[function(r,a,n){var o=r("./reflect"),i=r("./GLError");a.exports=u;function s(f){return function(){return f}}function l(f,c){for(var h=new Array(f),v=0;v<f;++v)h[v]=c;return h}function u(f,c,h,v){function p(M){return function(w,A,k){return w.getUniform(A.program,k[M])}}function d(M){return function(A){for(var k=g("",M),T=0;T<k.length;++T){var L=k[T],C=L[0],I=L[1];if(v[I]){var R=A;if(typeof C=="string"&&(C.indexOf(".")===0||C.indexOf("[")===0)){var B=C;if(C.indexOf(".")===0&&(B=C.slice(1)),B.indexOf("]")===B.length-1){var N=B.indexOf("["),D=B.slice(0,N),O=B.slice(N+1,B.length-1);R=D?A[D][O]:A[O]}else R=A[B]}var $=h[I].type,Y;switch($){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(v[I],R);break;case"float":f.uniform1f(v[I],R);break;default:var X=$.indexOf("vec");if(0<=X&&X<=1&&$.length===4+X){if(Y=$.charCodeAt($.length-1)-48,Y<2||Y>4)throw new i("","Invalid data type");switch($.charAt(0)){case"b":case"i":f["uniform"+Y+"iv"](v[I],R);break;case"v":f["uniform"+Y+"fv"](v[I],R);break;default:throw new i("","Unrecognized data type for vector "+name+": "+$)}}else if($.indexOf("mat")===0&&$.length===4){if(Y=$.charCodeAt($.length-1)-48,Y<2||Y>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+$);f["uniformMatrix"+Y+"fv"](v[I],!1,R);break}else throw new i("","Unknown uniform data type for "+name+": "+$)}}}}}function g(M,w){if(typeof w!="object")return[[M,w]];var A=[];for(var k in w){var T=w[k],L=M;parseInt(k)+""===k?L+="["+k+"]":L+="."+k,typeof T=="object"?A.push.apply(A,g(L,T)):A.push([L,T])}return A}function m(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=M.indexOf("vec");if(0<=w&&w<=1&&M.length===4+w){var A=M.charCodeAt(M.length-1)-48;if(A<2||A>4)throw new i("","Invalid data type");return M.charAt(0)==="b"?l(A,!1):l(A,0)}else if(M.indexOf("mat")===0&&M.length===4){var A=M.charCodeAt(M.length-1)-48;if(A<2||A>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+M);return l(A*A,0)}else throw new i("","Unknown uniform data type for "+name+": "+M)}}function y(M,w,A){if(typeof A=="object"){var k=_(A);Object.defineProperty(M,w,{get:s(k),set:d(A),enumerable:!0,configurable:!1})}else v[A]?Object.defineProperty(M,w,{get:p(A),set:d(A),enumerable:!0,configurable:!1}):M[w]=m(h[A].type)}function _(M){var w;if(Array.isArray(M)){w=new Array(M.length);for(var A=0;A<M.length;++A)y(w,A,M[A])}else{w={};for(var k in M)y(w,k,M[k])}return w}var S=o(h,!0);return{get:s(_(S)),set:d(S),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(r,a,n){a.exports=o;function o(i,s){for(var l={},u=0;u<i.length;++u)for(var f=i[u].name,c=f.split("."),h=l,v=0;v<c.length;++v){var p=c[v].split("[");if(p.length>1){p[0]in h||(h[p[0]]=[]),h=h[p[0]];for(var d=1;d<p.length;++d){var g=parseInt(p[d]);d<p.length-1||v<c.length-1?(g in h||(d<p.length-1?h[g]=[]:h[g]={}),h=h[g]):s?h[g]=u:h[g]=i[u].type}}else v<c.length-1?(p[0]in h||(h[p[0]]={}),h=h[p[0]]):s?h[p[0]]=u:h[p[0]]=i[u].type}return l}},{}],137:[function(r,a,n){n.uniforms=l,n.attributes=u;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function s(f,c){if(!i){var h=Object.keys(o);i={};for(var v=0;v<h.length;++v){var p=h[v];i[f[p]]=o[p]}}return i[c]}function l(f,c){for(var h=f.getProgramParameter(c,f.ACTIVE_UNIFORMS),v=[],p=0;p<h;++p){var d=f.getActiveUniform(c,p);if(d){var g=s(f,d.type);if(d.size>1)for(var m=0;m<d.size;++m)v.push({name:d.name.replace("[0]","["+m+"]"),type:g});else v.push({name:d.name,type:g})}}return v}function u(f,c){for(var h=f.getProgramParameter(c,f.ACTIVE_ATTRIBUTES),v=[],p=0;p<h;++p){var d=f.getActiveAttrib(c,p);d&&v.push({name:d.name,type:s(f,d.type)})}return v}},{}],138:[function(r,a,n){n.shader=g,n.program=m;var o=r("./GLError"),i=r("gl-format-compiler-error"),s=typeof WeakMap=="undefined"?r("weakmap-shim"):WeakMap,l=new s,u=0;function f(y,_,S,M,w,A,k){this.id=y,this.src=_,this.type=S,this.shader=M,this.count=A,this.programs=[],this.cache=k}f.prototype.dispose=function(){if(--this.count==0){for(var y=this.cache,_=y.gl,S=this.programs,M=0,w=S.length;M<w;++M){var A=y.programs[S[M]];A&&(delete y.programs[M],_.deleteProgram(A))}_.deleteShader(this.shader),delete y.shaders[this.type===_.FRAGMENT_SHADER|0][this.src]}};function c(y){this.gl=y,this.shaders=[{},{}],this.programs={}}var h=c.prototype;function v(y,_,S){var M=y.createShader(_);if(y.shaderSource(M,S),y.compileShader(M),!y.getShaderParameter(M,y.COMPILE_STATUS)){var w=y.getShaderInfoLog(M);try{var A=i(w,S,_)}catch(k){throw console.warn("Failed to format compiler error: "+k),new o(w,`Error compiling shader:
`+w)}throw new o(w,A.short,A.long)}return M}h.getShaderReference=function(y,_){var S=this.gl,M=this.shaders[y===S.FRAGMENT_SHADER|0],w=M[_];if(!w||!S.isShader(w.shader)){var A=v(S,y,_);w=M[_]=new f(u++,_,y,A,[],1,this)}else w.count+=1;return w};function p(y,_,S,M,w){var A=y.createProgram();y.attachShader(A,_),y.attachShader(A,S);for(var k=0;k<M.length;++k)y.bindAttribLocation(A,w[k],M[k]);if(y.linkProgram(A),!y.getProgramParameter(A,y.LINK_STATUS)){var T=y.getProgramInfoLog(A);throw new o(T,"Error linking program: "+T)}return A}h.getProgram=function(y,_,S,M){var w=[y.id,_.id,S.join(":"),M.join(":")].join("@"),A=this.programs[w];return(!A||!this.gl.isProgram(A))&&(this.programs[w]=A=p(this.gl,y.shader,_.shader,S,M),y.programs.push(w),_.programs.push(w)),A};function d(y){var _=l.get(y);return _||(_=new c(y),l.set(y,_)),_}function g(y,_,S){return d(y).getShaderReference(_,S)}function m(y,_,S,M,w){return d(y).getProgram(_,S,M,w)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(r,a,n){a.exports=s;function o(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var i=o.prototype;i.update=function(l){l=l||{},this.enable=(l.enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(u){return u.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var l=this.enable,u=this.width,f=this.color,c=this.center,h=this.plot,v=h.line,p=h.dataBox,d=h.viewBox;if(v.bind(),p[0]<=c[0]&&c[0]<=p[2]&&p[1]<=c[1]&&c[1]<=p[3]){var g=d[0]+(c[0]-p[0])/(p[2]-p[0])*(d[2]-d[0]),m=d[1]+(c[1]-p[1])/(p[3]-p[1])*(d[3]-d[1]);l[0]&&v.drawLine(g,m,d[0],m,u[0],f[0]),l[1]&&v.drawLine(g,m,g,d[1],u[1],f[1]),l[2]&&v.drawLine(g,m,d[2],m,u[2],f[2]),l[3]&&v.drawLine(g,m,g,d[3],u[3],f[3])}},i.dispose=function(){this.plot.removeOverlay(this)};function s(l,u){var f=new o(l);return f.update(u),l.addOverlay(f),f}},{}],140:[function(r,a,n){var o=r("glslify"),i=r("gl-shader"),s=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),l=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);a.exports=function(u){return i(u,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(r,a,n){var o=r("gl-buffer"),i=r("gl-vao"),s=r("./shaders/index");a.exports=p;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(d,g,m,y){this.gl=d,this.buffer=g,this.vao=m,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=u.prototype,c=[0,0,0],h=[0,0,0],v=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(d){},f.draw=function(d){var g=this.gl,m=this.vao,y=this.shader;m.bind(),y.bind();var _=d.model||l,S=d.view||l,M=d.projection||l,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var A=c,k=h,T=0;T<3;++T)w&&w[T]<0?(A[T]=this.bounds[0][T],k[T]=this.bounds[1][T]):(A[T]=this.bounds[1][T],k[T]=this.bounds[0][T]);v[0]=g.drawingBufferWidth,v[1]=g.drawingBufferHeight,y.uniforms.model=_,y.uniforms.view=S,y.uniforms.projection=M,y.uniforms.coordinates=[this.position,A,k],y.uniforms.colors=this.colors,y.uniforms.screenShape=v;for(var T=0;T<3;++T)y.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(m.draw(g.TRIANGLES,6,6*T),this.drawSides[T]&&m.draw(g.TRIANGLES,12,18+12*T));m.unbind()},f.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function p(d,g){var m=[];function y(A,k,T,L,C,I){var R=[A,k,T,0,0,0,1];R[L+3]=1,R[L]=C,m.push.apply(m,R),R[6]=-1,m.push.apply(m,R),R[L]=I,m.push.apply(m,R),m.push.apply(m,R),R[6]=1,m.push.apply(m,R),R[L]=C,m.push.apply(m,R)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var _=o(d,m),S=i(d,[{type:d.FLOAT,buffer:_,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:_,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:_,size:1,offset:24,stride:28}]),M=s(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var w=new u(d,_,S,M);return w.update(g),w}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(r,a,n){var o=r("glslify"),i=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),s=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);n.meshShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(r,a,n){var o=r("gl-vec3"),i=r("gl-vec4"),s=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(m,y,_,S){for(var M=m.points,w=m.velocities,A=m.divergences,k=[],T=[],L=[],C=[],I=[],R=[],B=0,N=0,D=i.create(),O=i.create(),$=8,Y=0;Y<M.length;Y++){var X=M[Y],ee=w[Y],Q=A[Y];y===0&&(Q=_*.05),N=o.length(ee)/S,D=i.create(),o.copy(D,ee),D[3]=Q;for(var Z=0;Z<$;Z++)I[Z]=[X[0],X[1],X[2],Z];if(C.length>0)for(var Z=0;Z<$;Z++){var q=(Z+1)%$;k.push(C[Z],I[Z],I[q],I[q],C[q],C[Z]),L.push(O,D,D,D,O,O),R.push(B,N,N,N,B,B);var ae=k.length;T.push([ae-6,ae-5,ae-4],[ae-3,ae-2,ae-1])}var ie=C;C=I,I=ie;var we=O;O=D,D=we;var Te=B;B=N,N=Te}return{positions:k,cells:T,vectors:L,vertexIntensity:R}},u=function(m,y,_,S){for(var M=0,w=0;w<m.length;w++)for(var A=m[w].velocities,k=0;k<A.length;k++)M=Math.max(M,o.length(A[k]));for(var T=m.map(function(Y){return l(Y,_,S,M)}),L=[],C=[],I=[],R=[],w=0;w<T.length;w++){var B=T[w],N=L.length;L=L.concat(B.positions),I=I.concat(B.vectors),R=R.concat(B.vertexIntensity);for(var k=0;k<B.cells.length;k++){var D=B.cells[k],O=[];C.push(O);for(var $=0;$<D.length;$++)O.push(D[$]+N)}}return{positions:L,cells:C,vectors:I,vertexIntensity:R,colormap:y}},f=function(m,y){var _=m.length,S;for(S=0;S<_;S++){var M=m[S];if(M===y)return S;if(M>y)return S-1}return S},c=function(m,y,_){return m<y?y:m>_?_:m},h=function(m,y,_){var S=y.vectors,M=y.meshgrid,w=m[0],A=m[1],k=m[2],T=M[0].length,L=M[1].length,C=M[2].length,I=f(M[0],w),R=f(M[1],A),B=f(M[2],k),N=I+1,D=R+1,O=B+1;if(I=c(I,0,T-1),N=c(N,0,T-1),R=c(R,0,L-1),D=c(D,0,L-1),B=c(B,0,C-1),O=c(O,0,C-1),I<0||R<0||B<0||N>T-1||D>L-1||O>C-1)return o.create();var $=M[0][I],Y=M[0][N],X=M[1][R],ee=M[1][D],Q=M[2][B],Z=M[2][O],q=(w-$)/(Y-$),ae=(A-X)/(ee-X),ie=(k-Q)/(Z-Q);isFinite(q)||(q=.5),isFinite(ae)||(ae=.5),isFinite(ie)||(ie=.5);var we,Te,he,xe,Se,ye;switch(_.reversedX&&(I=T-1-I,N=T-1-N),_.reversedY&&(R=L-1-R,D=L-1-D),_.reversedZ&&(B=C-1-B,O=C-1-O),_.filled){case 5:Se=B,ye=O,he=R*C,xe=D*C,we=I*C*L,Te=N*C*L;break;case 4:Se=B,ye=O,we=I*C,Te=N*C,he=R*C*T,xe=D*C*T;break;case 3:he=R,xe=D,Se=B*L,ye=O*L,we=I*L*C,Te=N*L*C;break;case 2:he=R,xe=D,we=I*L,Te=N*L,Se=B*L*T,ye=O*L*T;break;case 1:we=I,Te=N,Se=B*T,ye=O*T,he=R*T*C,xe=D*T*C;break;default:we=I,Te=N,he=R*T,xe=D*T,Se=B*T*L,ye=O*T*L;break}var re=S[we+he+Se],se=S[we+he+ye],de=S[we+xe+Se],Me=S[we+xe+ye],Ie=S[Te+he+Se],Ee=S[Te+he+ye],qe=S[Te+xe+Se],be=S[Te+xe+ye],oe=o.create(),ce=o.create(),ue=o.create(),Re=o.create();o.lerp(oe,re,Ie,q),o.lerp(ce,se,Ee,q),o.lerp(ue,de,qe,q),o.lerp(Re,Me,be,q);var Xe=o.create(),Ke=o.create();o.lerp(Xe,oe,ue,ae),o.lerp(Ke,ce,Re,ae);var vt=o.create();return o.lerp(vt,Xe,Ke,ie),vt},v=function(m){var y=1/0;m.sort(function(w,A){return w-A});for(var _=m.length,S=1;S<_;S++){var M=Math.abs(m[S]-m[S-1]);M<y&&(y=M)}return y},p=function(m){for(var y=[],_=[],S=[],M={},w={},A={},k=m.length,T=0;T<k;T++){var L=m[T],C=L[0],I=L[1],R=L[2];M[C]||(y.push(C),M[C]=!0),w[I]||(_.push(I),w[I]=!0),A[R]||(S.push(R),A[R]=!0)}var B=v(y),N=v(_),D=v(S),O=Math.min(B,N,D);return isFinite(O)?O:1};a.exports=function(m,y){var _=m.startingPositions,S=m.maxLength||1e3,M=m.tubeSize||1,w=m.absoluteTubeSize,A=m.gridFill||"+x+y+z",k={};A.indexOf("-x")!==-1&&(k.reversedX=!0),A.indexOf("-y")!==-1&&(k.reversedY=!0),A.indexOf("-z")!==-1&&(k.reversedZ=!0),k.filled=s.indexOf(A.replace(/-/g,"").replace(/\+/g,""));var T=m.getVelocity||function(Ee){return h(Ee,m,k)},L=m.getDivergence||function(Ee,qe){var be=o.create(),oe=1e-4;o.add(be,Ee,[oe,0,0]);var ce=T(be);o.subtract(ce,ce,qe),o.scale(ce,ce,1/oe),o.add(be,Ee,[0,oe,0]);var ue=T(be);o.subtract(ue,ue,qe),o.scale(ue,ue,1/oe),o.add(be,Ee,[0,0,oe]);var Re=T(be);return o.subtract(Re,Re,qe),o.scale(Re,Re,1/oe),o.add(be,ce,ue),o.add(be,be,Re),be},C=[],I=y[0][0],R=y[0][1],B=y[0][2],N=y[1][0],D=y[1][1],O=y[1][2],$=function(Ee){var qe=Ee[0],be=Ee[1],oe=Ee[2];return!(qe<I||qe>N||be<R||be>D||oe<B||oe>O)},Y=o.distance(y[0],y[1]),X=10*Y/S,ee=X*X,Q=1,Z=0,q=_.length;q>1&&(Q=p(_));for(var ae=0;ae<q;ae++){var ie=o.create();o.copy(ie,_[ae]);var we=[ie],Te=[],he=T(ie),xe=ie;Te.push(he);var Se=[],ye=L(ie,he),re=o.length(ye);isFinite(re)&&re>Z&&(Z=re),Se.push(re),C.push({points:we,velocities:Te,divergences:Se});for(var se=0;se<S*100&&we.length<S&&$(ie);){se++;var de=o.clone(he),Me=o.squaredLength(de);if(Me===0)break;if(Me>ee&&o.scale(de,de,X/Math.sqrt(Me)),o.add(de,de,ie),he=T(de),o.squaredDistance(xe,de)-ee>-1e-4*ee){we.push(de),xe=de,Te.push(he);var ye=L(de,he),re=o.length(ye);isFinite(re)&&re>Z&&(Z=re),Se.push(re)}ie=de}}var Ie=u(C,m.colormap,Z,Q);return w?Ie.tubeScale=w:(Z===0&&(Z=1),Ie.tubeScale=M*.5*Q/Z),Ie};var d=r("./lib/shaders"),g=r("gl-cone3d").createMesh;a.exports.createTubeMesh=function(m,y){return g(m,y,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(r,a,n){var o=r("gl-shader"),i=r("glslify"),s=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);n.createShader=function(c){var h=o(c,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},n.createPickShader=function(c){var h=o(c,s,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},n.createContourShader=function(c){var h=o(c,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},n.createPickContourShader=function(c){var h=o(c,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},{"gl-shader":132,glslify:231}],145:[function(r,a,n){a.exports=Te;var o=r("bit-twiddle"),i=r("gl-buffer"),s=r("gl-vao"),l=r("gl-texture2d"),u=r("typedarray-pool"),f=r("colormap"),c=r("ndarray-ops"),h=r("ndarray-pack"),v=r("ndarray"),p=r("surface-nets"),d=r("gl-mat4/multiply"),g=r("gl-mat4/invert"),m=r("binary-search-bounds"),y=r("ndarray-gradient"),_=r("./lib/shaders"),S=_.createShader,M=_.createContourShader,w=_.createPickShader,A=_.createPickContourShader,k=4*(4+3+3),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var he=0;he<3;++he){var xe=C[he],Se=(he+1)%3,ye=(he+2)%3;xe[Se+0]=1,xe[ye+3]=1,xe[he+6]=1}})();function I(he,xe,Se,ye,re){this.position=he,this.index=xe,this.uv=Se,this.level=ye,this.dataCoordinate=re}var R=256;function B(he,xe,Se,ye,re,se,de,Me,Ie,Ee,qe,be,oe,ce,ue){this.gl=he,this.shape=xe,this.bounds=Se,this.objectOffset=ue,this.intensityBounds=[],this._shader=ye,this._pickShader=re,this._coordinateBuffer=se,this._vao=de,this._colorMap=Me,this._contourShader=Ie,this._contourPickShader=Ee,this._contourBuffer=qe,this._contourVAO=be,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=oe,this._dynamicVAO=ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(u.mallocFloat(1024),[0,0]),v(u.mallocFloat(1024),[0,0]),v(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var N=B.prototype;N.genColormap=function(he,xe){var Se=!1,ye=h([f({colormap:he,nshades:R,format:"rgba"}).map(function(re,se){var de=xe?D(se/255,xe):re[3];return de<1&&(Se=!0),[re[0],re[1],re[2],255*de]})]);return c.divseq(ye,255),this.hasAlphaScale=Se,ye},N.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},N.isOpaque=function(){return!this.isTransparent()},N.pickSlots=1,N.setPickBase=function(he){this.pickId=he};function D(he,xe){if(!xe||!xe.length)return 1;for(var Se=0;Se<xe.length;++Se){if(xe.length<2)return 1;if(xe[Se][0]===he)return xe[Se][1];if(xe[Se][0]>he&&Se>0){var ye=(xe[Se][0]-he)/(xe[Se][0]-xe[Se-1][0]);return xe[Se][1]*(1-ye)+ye*xe[Se-1][1]}}return 1}var O=[0,0,0],$={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function Y(he,xe){var Se,ye,re,se=xe.axes&&xe.axes.lastCubeProps.axis||O,de=xe.showSurface,Me=xe.showContour;for(Se=0;Se<3;++Se)for(de=de||xe.surfaceProject[Se],ye=0;ye<3;++ye)Me=Me||xe.contourProject[Se][ye];for(Se=0;Se<3;++Se){var Ie=$.projections[Se];for(ye=0;ye<16;++ye)Ie[ye]=0;for(ye=0;ye<4;++ye)Ie[5*ye]=1;Ie[5*Se]=0,Ie[12+Se]=xe.axesBounds[+(se[Se]>0)][Se],d(Ie,he.model,Ie);var Ee=$.clipBounds[Se];for(re=0;re<2;++re)for(ye=0;ye<3;++ye)Ee[re][ye]=he.clipBounds[re][ye];Ee[0][Se]=-1e8,Ee[1][Se]=1e8}return $.showSurface=de,$.showContour=Me,$}var X={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=T.slice(),Q=[1,0,0,0,1,0,0,0,1];function Z(he,xe){he=he||{};var Se=this.gl;Se.disable(Se.CULL_FACE),this._colorMap.bind(0);var ye=X;ye.model=he.model||T,ye.view=he.view||T,ye.projection=he.projection||T,ye.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ye.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ye.objectOffset=this.objectOffset,ye.contourColor=this.contourColor[0],ye.inverseModel=g(ye.inverseModel,ye.model);for(var re=0;re<2;++re)for(var se=ye.clipBounds[re],de=0;de<3;++de)se[de]=Math.min(Math.max(this.clipBounds[re][de],-1e8),1e8);ye.kambient=this.ambientLight,ye.kdiffuse=this.diffuseLight,ye.kspecular=this.specularLight,ye.roughness=this.roughness,ye.fresnel=this.fresnel,ye.opacity=this.opacity,ye.height=0,ye.permutation=Q,ye.vertexColor=this.vertexColor;var Me=ee;for(d(Me,ye.view,ye.model),d(Me,ye.projection,Me),g(Me,Me),re=0;re<3;++re)ye.eyePosition[re]=Me[12+re]/Me[15];var Ie=Me[15];for(re=0;re<3;++re)Ie+=this.lightPosition[re]*Me[4*re+3];for(re=0;re<3;++re){var Ee=Me[12+re];for(de=0;de<3;++de)Ee+=Me[4*de+re]*this.lightPosition[de];ye.lightPosition[re]=Ee/Ie}var qe=Y(ye,this);if(qe.showSurface){for(this._shader.bind(),this._shader.uniforms=ye,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(Se.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||!this.vertexCount||(this._shader.uniforms.model=qe.projections[re],this._shader.uniforms.clipBounds=qe.clipBounds[re],this._vao.draw(Se.TRIANGLES,this._vertexCount));this._vao.unbind()}if(qe.showContour){var be=this._contourShader;ye.kambient=1,ye.kdiffuse=0,ye.kspecular=0,ye.opacity=1,be.bind(),be.uniforms=ye;var oe=this._contourVAO;for(oe.bind(),re=0;re<3;++re)for(be.uniforms.permutation=C[re],Se.lineWidth(this.contourWidth[re]*this.pixelRatio),de=0;de<this.contourLevels[re].length;++de)de===this.highlightLevel[re]?(be.uniforms.contourColor=this.highlightColor[re],be.uniforms.contourTint=this.highlightTint[re]):(de===0||de-1===this.highlightLevel[re])&&(be.uniforms.contourColor=this.contourColor[re],be.uniforms.contourTint=this.contourTint[re]),!!this._contourCounts[re][de]&&(be.uniforms.height=this.contourLevels[re][de],oe.draw(Se.LINES,this._contourCounts[re][de],this._contourOffsets[re][de]));for(re=0;re<3;++re)for(be.uniforms.model=qe.projections[re],be.uniforms.clipBounds=qe.clipBounds[re],de=0;de<3;++de)if(!!this.contourProject[re][de]){be.uniforms.permutation=C[de],Se.lineWidth(this.contourWidth[de]*this.pixelRatio);for(var ce=0;ce<this.contourLevels[de].length;++ce)ce===this.highlightLevel[de]?(be.uniforms.contourColor=this.highlightColor[de],be.uniforms.contourTint=this.highlightTint[de]):(ce===0||ce-1===this.highlightLevel[de])&&(be.uniforms.contourColor=this.contourColor[de],be.uniforms.contourTint=this.contourTint[de]),!!this._contourCounts[de][ce]&&(be.uniforms.height=this.contourLevels[de][ce],oe.draw(Se.LINES,this._contourCounts[de][ce],this._contourOffsets[de][ce]))}for(oe.unbind(),oe=this._dynamicVAO,oe.bind(),re=0;re<3;++re)if(this._dynamicCounts[re]!==0)for(be.uniforms.model=ye.model,be.uniforms.clipBounds=ye.clipBounds,be.uniforms.permutation=C[re],Se.lineWidth(this.dynamicWidth[re]*this.pixelRatio),be.uniforms.contourColor=this.dynamicColor[re],be.uniforms.contourTint=this.dynamicTint[re],be.uniforms.height=this.dynamicLevel[re],oe.draw(Se.LINES,this._dynamicCounts[re],this._dynamicOffsets[re]),de=0;de<3;++de)!this.contourProject[de][re]||(be.uniforms.model=qe.projections[de],be.uniforms.clipBounds=qe.clipBounds[de],oe.draw(Se.LINES,this._dynamicCounts[re],this._dynamicOffsets[re]));oe.unbind()}}N.draw=function(he){return Z.call(this,he,!1)},N.drawTransparent=function(he){return Z.call(this,he,!0)};var q={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};N.drawPick=function(he){he=he||{};var xe=this.gl;xe.disable(xe.CULL_FACE);var Se=q;Se.model=he.model||T,Se.view=he.view||T,Se.projection=he.projection||T,Se.shape=this._field[2].shape,Se.pickId=this.pickId/255,Se.lowerBound=this.bounds[0],Se.upperBound=this.bounds[1],Se.objectOffset=this.objectOffset,Se.permutation=Q;for(var ye=0;ye<2;++ye)for(var re=Se.clipBounds[ye],se=0;se<3;++se)re[se]=Math.min(Math.max(this.clipBounds[ye][se],-1e8),1e8);var de=Y(Se,this);if(de.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=Se,this._vao.bind(),this._vao.draw(xe.TRIANGLES,this._vertexCount),ye=0;ye<3;++ye)!this.surfaceProject[ye]||(this._pickShader.uniforms.model=de.projections[ye],this._pickShader.uniforms.clipBounds=de.clipBounds[ye],this._vao.draw(xe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var Me=this._contourPickShader;Me.bind(),Me.uniforms=Se;var Ie=this._contourVAO;for(Ie.bind(),se=0;se<3;++se)for(xe.lineWidth(this.contourWidth[se]*this.pixelRatio),Me.uniforms.permutation=C[se],ye=0;ye<this.contourLevels[se].length;++ye)this._contourCounts[se][ye]&&(Me.uniforms.height=this.contourLevels[se][ye],Ie.draw(xe.LINES,this._contourCounts[se][ye],this._contourOffsets[se][ye]));for(ye=0;ye<3;++ye)for(Me.uniforms.model=de.projections[ye],Me.uniforms.clipBounds=de.clipBounds[ye],se=0;se<3;++se)if(!!this.contourProject[ye][se]){Me.uniforms.permutation=C[se],xe.lineWidth(this.contourWidth[se]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[se].length;++Ee)this._contourCounts[se][Ee]&&(Me.uniforms.height=this.contourLevels[se][Ee],Ie.draw(xe.LINES,this._contourCounts[se][Ee],this._contourOffsets[se][Ee]))}Ie.unbind()}},N.pick=function(he){if(!he||he.id!==this.pickId)return null;var xe=this._field[2].shape,Se=this._pickResult,ye=xe[0]*(he.value[0]+(he.value[2]>>4)/16)/255,re=Math.floor(ye),se=ye-re,de=xe[1]*(he.value[1]+(he.value[2]&15)/16)/255,Me=Math.floor(de),Ie=de-Me;re+=1,Me+=1;var Ee=Se.position;Ee[0]=Ee[1]=Ee[2]=0;for(var qe=0;qe<2;++qe)for(var be=qe?se:1-se,oe=0;oe<2;++oe)for(var ce=oe?Ie:1-Ie,ue=re+qe,Re=Me+oe,Xe=be*ce,Ke=0;Ke<3;++Ke)Ee[Ke]+=this._field[Ke].get(ue,Re)*Xe;for(var vt=this._pickResult.level,Ze=0;Ze<3;++Ze)if(vt[Ze]=m.le(this.contourLevels[Ze],Ee[Ze]),vt[Ze]<0)this.contourLevels[Ze].length>0&&(vt[Ze]=0);else if(vt[Ze]<this.contourLevels[Ze].length-1){var Qe=this.contourLevels[Ze][vt[Ze]],Je=this.contourLevels[Ze][vt[Ze]+1];Math.abs(Qe-Ee[Ze])>Math.abs(Je-Ee[Ze])&&(vt[Ze]+=1)}for(Se.index[0]=se<.5?re:re+1,Se.index[1]=Ie<.5?Me:Me+1,Se.uv[0]=ye/xe[0],Se.uv[1]=de/xe[1],Ke=0;Ke<3;++Ke)Se.dataCoordinate[Ke]=this._field[Ke].get(Se.index[0],Se.index[1]);return Se},N.padField=function(he,xe){var Se=xe.shape.slice(),ye=he.shape.slice();c.assign(he.lo(1,1).hi(Se[0],Se[1]),xe),c.assign(he.lo(1).hi(Se[0],1),xe.hi(Se[0],1)),c.assign(he.lo(1,ye[1]-1).hi(Se[0],1),xe.lo(0,Se[1]-1).hi(Se[0],1)),c.assign(he.lo(0,1).hi(1,Se[1]),xe.hi(1)),c.assign(he.lo(ye[0]-1,1).hi(1,Se[1]),xe.lo(Se[0]-1)),he.set(0,0,xe.get(0,0)),he.set(0,ye[1]-1,xe.get(0,Se[1]-1)),he.set(ye[0]-1,0,xe.get(Se[0]-1,0)),he.set(ye[0]-1,ye[1]-1,xe.get(Se[0]-1,Se[1]-1))};function ae(he,xe){return Array.isArray(he)?[xe(he[0]),xe(he[1]),xe(he[2])]:[xe(he),xe(he),xe(he)]}function ie(he){return Array.isArray(he)?he.length===3?[he[0],he[1],he[2],1]:[he[0],he[1],he[2],he[3]]:[0,0,0,1]}function we(he){if(Array.isArray(he)){if(Array.isArray(he))return[ie(he[0]),ie(he[1]),ie(he[2])];var xe=ie(he);return[xe.slice(),xe.slice(),xe.slice()]}}N.update=function(he){he=he||{},this.objectOffset=he.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in he&&(this.contourWidth=ae(he.contourWidth,Number)),"showContour"in he&&(this.showContour=ae(he.showContour,Boolean)),"showSurface"in he&&(this.showSurface=!!he.showSurface),"contourTint"in he&&(this.contourTint=ae(he.contourTint,Boolean)),"contourColor"in he&&(this.contourColor=we(he.contourColor)),"contourProject"in he&&(this.contourProject=ae(he.contourProject,function(rr){return ae(rr,Boolean)})),"surfaceProject"in he&&(this.surfaceProject=he.surfaceProject),"dynamicColor"in he&&(this.dynamicColor=we(he.dynamicColor)),"dynamicTint"in he&&(this.dynamicTint=ae(he.dynamicTint,Number)),"dynamicWidth"in he&&(this.dynamicWidth=ae(he.dynamicWidth,Number)),"opacity"in he&&(this.opacity=he.opacity),"opacityscale"in he&&(this.opacityscale=he.opacityscale),"colorBounds"in he&&(this.colorBounds=he.colorBounds),"vertexColor"in he&&(this.vertexColor=he.vertexColor?1:0),"colormap"in he&&this._colorMap.setPixels(this.genColormap(he.colormap,this.opacityscale));var xe=he.field||he.coords&&he.coords[2]||null,Se=!1;if(xe||(this._field[2].shape[0]||this._field[2].shape[2]?xe=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):xe=this._field[2].hi(0,0)),"field"in he||"coords"in he){var ye=(xe.shape[0]+2)*(xe.shape[1]+2);ye>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(o.nextPow2(ye))),this._field[2]=v(this._field[2].data,[xe.shape[0]+2,xe.shape[1]+2]),this.padField(this._field[2],xe),this.shape=xe.shape.slice();for(var re=this.shape,se=0;se<2;++se)this._field[2].size>this._field[se].data.length&&(u.freeFloat(this._field[se].data),this._field[se].data=u.mallocFloat(this._field[2].size)),this._field[se]=v(this._field[se].data,[re[0]+2,re[1]+2]);if(he.coords){var de=he.coords;if(!Array.isArray(de)||de.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(se=0;se<2;++se){var Me=de[se];for(oe=0;oe<2;++oe)if(Me.shape[oe]!==re[oe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[se],Me)}}else if(he.ticks){var Ie=he.ticks;if(!Array.isArray(Ie)||Ie.length!==2)throw new Error("gl-surface: invalid ticks");for(se=0;se<2;++se){var Ee=Ie[se];if((Array.isArray(Ee)||Ee.length)&&(Ee=v(Ee)),Ee.shape[0]!==re[se])throw new Error("gl-surface: invalid tick length");var qe=v(Ee.data,re);qe.stride[se]=Ee.stride[0],qe.stride[se^1]=0,this.padField(this._field[se],qe)}}else{for(se=0;se<2;++se){var be=[0,0];be[se]=1,this._field[se]=v(this._field[se].data,[re[0]+2,re[1]+2],be,0)}this._field[0].set(0,0,0);for(var oe=0;oe<re[0];++oe)this._field[0].set(oe+1,0,oe);for(this._field[0].set(re[0]+1,0,re[0]-1),this._field[1].set(0,0,0),oe=0;oe<re[1];++oe)this._field[1].set(0,oe+1,oe);this._field[1].set(0,re[1]+1,re[1]-1)}var ce=this._field,ue=v(u.mallocFloat(ce[2].size*3*2),[3,re[0]+2,re[1]+2,2]);for(se=0;se<3;++se)y(ue.pick(se),ce[se],"mirror");var Re=v(u.mallocFloat(ce[2].size*3),[re[0]+2,re[1]+2,3]);for(se=0;se<re[0]+2;++se)for(oe=0;oe<re[1]+2;++oe){var Xe=ue.get(0,se,oe,0),Ke=ue.get(0,se,oe,1),vt=ue.get(1,se,oe,0),Ze=ue.get(1,se,oe,1),Qe=ue.get(2,se,oe,0),Je=ue.get(2,se,oe,1),je=vt*Je-Ze*Qe,$e=Qe*Ke-Je*Xe,Ye=Xe*Ze-Ke*vt,yt=Math.sqrt(je*je+$e*$e+Ye*Ye);yt<1e-8?(yt=Math.max(Math.abs(je),Math.abs($e),Math.abs(Ye)),yt<1e-8?(Ye=1,$e=je=0,yt=1):yt=1/yt):yt=1/Math.sqrt(yt),Re.set(se,oe,0,je*yt),Re.set(se,oe,1,$e*yt),Re.set(se,oe,2,Ye*yt)}u.free(ue.data);var _t=[1/0,1/0,1/0],Pt=[-1/0,-1/0,-1/0],Tt=1/0,Ot=-1/0,qt=(re[0]-1)*(re[1]-1)*6,Xt=u.mallocFloat(o.nextPow2(10*qt)),Or=0,Br=0;for(se=0;se<re[0]-1;++se){e:for(oe=0;oe<re[1]-1;++oe){for(var Qr=0;Qr<2;++Qr)for(var Sr=0;Sr<2;++Sr)for(var Zr=0;Zr<3;++Zr){var Oe=this._field[Zr].get(1+se+Qr,1+oe+Sr);if(isNaN(Oe)||!isFinite(Oe))continue e}for(Zr=0;Zr<6;++Zr){var it=se+L[Zr][0],ft=oe+L[Zr][1],pt=this._field[0].get(it+1,ft+1),Dt=this._field[1].get(it+1,ft+1);Oe=this._field[2].get(it+1,ft+1),je=Re.get(it+1,ft+1,0),$e=Re.get(it+1,ft+1,1),Ye=Re.get(it+1,ft+1,2),he.intensity&&(Nt=he.intensity.get(it,ft));var Nt=he.intensity?he.intensity.get(it,ft):Oe+this.objectOffset[2];Xt[Or++]=it,Xt[Or++]=ft,Xt[Or++]=pt,Xt[Or++]=Dt,Xt[Or++]=Oe,Xt[Or++]=0,Xt[Or++]=Nt,Xt[Or++]=je,Xt[Or++]=$e,Xt[Or++]=Ye,_t[0]=Math.min(_t[0],pt+this.objectOffset[0]),_t[1]=Math.min(_t[1],Dt+this.objectOffset[1]),_t[2]=Math.min(_t[2],Oe+this.objectOffset[2]),Tt=Math.min(Tt,Nt),Pt[0]=Math.max(Pt[0],pt+this.objectOffset[0]),Pt[1]=Math.max(Pt[1],Dt+this.objectOffset[1]),Pt[2]=Math.max(Pt[2],Oe+this.objectOffset[2]),Ot=Math.max(Ot,Nt),Br+=1}}}for(he.intensityBounds&&(Tt=+he.intensityBounds[0],Ot=+he.intensityBounds[1]),se=6;se<Or;se+=10)Xt[se]=(Xt[se]-Tt)/(Ot-Tt);this._vertexCount=Br,this._coordinateBuffer.update(Xt.subarray(0,Or)),u.freeFloat(Xt),u.free(Re.data),this.bounds=[_t,Pt],this.intensity=he.intensity||this._field[2],(this.intensityBounds[0]!==Tt||this.intensityBounds[1]!==Ot)&&(Se=!0),this.intensityBounds=[Tt,Ot]}if("levels"in he){var hr=he.levels;for(Array.isArray(hr[0])?hr=hr.slice():hr=[[],[],hr],se=0;se<3;++se)hr[se]=hr[se].slice(),hr[se].sort(function(rr,sr){return rr-sr});for(se=0;se<3;++se)for(oe=0;oe<hr[se].length;++oe)hr[se][oe]-=this.objectOffset[se];e:for(se=0;se<3;++se){if(hr[se].length!==this.contourLevels[se].length){Se=!0;break}for(oe=0;oe<hr[se].length;++oe)if(hr[se][oe]!==this.contourLevels[se][oe]){Se=!0;break e}}this.contourLevels=hr}if(Se){ce=this._field,re=this.shape;for(var fr=[],vr=0;vr<3;++vr){var Ut=this.contourLevels[vr],Fr=[],sa=[],$r=[0,0,0];for(se=0;se<Ut.length;++se){var Ca=p(this._field[vr],Ut[se]);Fr.push(fr.length/5|0),Br=0;e:for(oe=0;oe<Ca.cells.length;++oe){var on=Ca.cells[oe];for(Zr=0;Zr<2;++Zr){var Fa=Ca.positions[on[Zr]],jr=Fa[0],Rn=Math.floor(jr)|0,xa=jr-Rn,ia=Fa[1],vn=Math.floor(ia)|0,ka=ia-vn,Ge=!1;t:for(var Pe=0;Pe<3;++Pe){$r[Pe]=0;var Ne=(vr+Pe+1)%3;for(Qr=0;Qr<2;++Qr){var We=Qr?xa:1-xa;for(it=Math.min(Math.max(Rn+Qr,0),re[0])|0,Sr=0;Sr<2;++Sr){var lt=Sr?ka:1-ka;if(ft=Math.min(Math.max(vn+Sr,0),re[1])|0,Pe<2?Oe=this._field[Ne].get(it,ft):Oe=(this.intensity.get(it,ft)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Oe)||isNaN(Oe)){Ge=!0;break t}var wt=We*lt;$r[Pe]+=wt*Oe}}}if(!Ge)fr.push($r[0],$r[1],Fa[0],Fa[1],$r[2]),Br+=1;else{if(Zr>0){for(var Mt=0;Mt<5;++Mt)fr.pop();Br-=1}continue e}}}sa.push(Br)}this._contourOffsets[vr]=Fr,this._contourCounts[vr]=sa}var It=u.mallocFloat(fr.length);for(se=0;se<fr.length;++se)It[se]=fr[se];this._contourBuffer.update(It),u.freeFloat(It)}},N.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var he=0;he<3;++he)u.freeFloat(this._field[he].data)},N.highlight=function(he){var xe;if(!he){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(xe=0;xe<3;++xe)this.enableHighlight[xe]?this.highlightLevel[xe]=he.level[xe]:this.highlightLevel[xe]=-1;var Se;for(this.snapToData?Se=he.dataCoordinate:Se=he.position,xe=0;xe<3;++xe)Se[xe]-=this.objectOffset[xe];if(!((!this.enableDynamic[0]||Se[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||Se[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||Se[2]===this.dynamicLevel[2]))){for(var ye=0,re=this.shape,se=u.mallocFloat(12*re[0]*re[1]),de=0;de<3;++de){if(!this.enableDynamic[de]){this.dynamicLevel[de]=NaN,this._dynamicCounts[de]=0;continue}this.dynamicLevel[de]=Se[de];var Me=(de+1)%3,Ie=(de+2)%3,Ee=this._field[de],qe=this._field[Me],be=this._field[Ie],oe=p(Ee,Se[de]),ce=oe.cells,ue=oe.positions;for(this._dynamicOffsets[de]=ye,xe=0;xe<ce.length;++xe)for(var Re=ce[xe],Xe=0;Xe<2;++Xe){var Ke=ue[Re[Xe]],vt=+Ke[0],Ze=vt|0,Qe=Math.min(Ze+1,re[0])|0,Je=vt-Ze,je=1-Je,$e=+Ke[1],Ye=$e|0,yt=Math.min(Ye+1,re[1])|0,_t=$e-Ye,Pt=1-_t,Tt=je*Pt,Ot=je*_t,qt=Je*Pt,Xt=Je*_t,Or=Tt*qe.get(Ze,Ye)+Ot*qe.get(Ze,yt)+qt*qe.get(Qe,Ye)+Xt*qe.get(Qe,yt),Br=Tt*be.get(Ze,Ye)+Ot*be.get(Ze,yt)+qt*be.get(Qe,Ye)+Xt*be.get(Qe,yt);if(isNaN(Or)||isNaN(Br)){Xe&&(ye-=1);break}se[2*ye+0]=Or,se[2*ye+1]=Br,ye+=1}this._dynamicCounts[de]=ye-this._dynamicOffsets[de]}this._dynamicBuffer.update(se.subarray(0,2*ye)),u.freeFloat(se)}};function Te(he){var xe=he.gl,Se=S(xe),ye=w(xe),re=M(xe),se=A(xe),de=i(xe),Me=s(xe,[{buffer:de,size:4,stride:k,offset:0},{buffer:de,size:3,stride:k,offset:16},{buffer:de,size:3,stride:k,offset:28}]),Ie=i(xe),Ee=s(xe,[{buffer:Ie,size:4,stride:20,offset:0},{buffer:Ie,size:1,stride:20,offset:16}]),qe=i(xe),be=s(xe,[{buffer:qe,size:2,type:xe.FLOAT}]),oe=l(xe,1,R,xe.RGBA,xe.UNSIGNED_BYTE);oe.minFilter=xe.LINEAR,oe.magFilter=xe.LINEAR;var ce=new B(xe,[0,0],[[0,0,0],[0,0,0]],Se,ye,de,Me,oe,re,se,Ie,Ee,qe,be,[0,0,0]),ue={levels:[[],[],[]]};for(var Re in he)ue[Re]=he[Re];return ue.colormap=ue.colormap||"jet",ce.update(ue),ce}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(r,a,n){var o=r("ndarray"),i=r("ndarray-ops"),s=r("typedarray-pool");a.exports=A;var l=null,u=null,f=null;function c(k){l=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],u=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],f=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]}function h(k){return typeof HTMLCanvasElement!="undefined"&&k instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&k instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&k instanceof HTMLVideoElement||typeof ImageData!="undefined"&&k instanceof ImageData}var v=function(k,T){i.muls(k,T,255)};function p(k,T,L){var C=k.gl,I=C.getParameter(C.MAX_TEXTURE_SIZE);if(T<0||T>I||L<0||L>I)throw new Error("gl-texture2d: Invalid texture size");return k._shape=[T,L],k.bind(),C.texImage2D(C.TEXTURE_2D,0,k.format,T,L,0,k.format,k.type,null),k._mipLevels=[0],k}function d(k,T,L,C,I,R){this.gl=k,this.handle=T,this.format=I,this.type=R,this._shape=[L,C],this._mipLevels=[0],this._magFilter=k.NEAREST,this._minFilter=k.NEAREST,this._wrapS=k.CLAMP_TO_EDGE,this._wrapT=k.CLAMP_TO_EDGE,this._anisoSamples=1;var B=this,N=[this._wrapS,this._wrapT];Object.defineProperties(N,[{get:function(){return B._wrapS},set:function(O){return B.wrapS=O}},{get:function(){return B._wrapT},set:function(O){return B.wrapT=O}}]),this._wrapVector=N;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return B._shape[0]},set:function(O){return B.width=O}},{get:function(){return B._shape[1]},set:function(O){return B.height=O}}]),this._shapeVector=D}var g=d.prototype;Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(k){this.bind();var T=this.gl;if(this.type===T.FLOAT&&l.indexOf(k)>=0&&(T.getExtension("OES_texture_float_linear")||(k=T.NEAREST)),u.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,k),this._minFilter=k}},magFilter:{get:function(){return this._magFilter},set:function(k){this.bind();var T=this.gl;if(this.type===T.FLOAT&&l.indexOf(k)>=0&&(T.getExtension("OES_texture_float_linear")||(k=T.NEAREST)),u.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,k),this._magFilter=k}},mipSamples:{get:function(){return this._anisoSamples},set:function(k){var T=this._anisoSamples;if(this._anisoSamples=Math.max(k,1)|0,T!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(k){if(this.bind(),f.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,k),this._wrapS=k}},wrapT:{get:function(){return this._wrapT},set:function(k){if(this.bind(),f.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,k),this._wrapT=k}},wrap:{get:function(){return this._wrapVector},set:function(k){if(Array.isArray(k)||(k=[k,k]),k.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var T=0;T<2;++T)if(f.indexOf(k[T])<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);this._wrapS=k[0],this._wrapT=k[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),k}},shape:{get:function(){return this._shapeVector},set:function(k){if(!Array.isArray(k))k=[k|0,k|0];else if(k.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return p(this,k[0]|0,k[1]|0),[k[0]|0,k[1]|0]}},width:{get:function(){return this._shape[0]},set:function(k){return k=k|0,p(this,k,this._shape[1]),k}},height:{get:function(){return this._shape[1]},set:function(k){return k=k|0,p(this,this._shape[0],k),k}}}),g.bind=function(k){var T=this.gl;return k!==void 0&&T.activeTexture(T.TEXTURE0+(k|0)),T.bindTexture(T.TEXTURE_2D,this.handle),k!==void 0?k|0:T.getParameter(T.ACTIVE_TEXTURE)-T.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var k=Math.min(this._shape[0],this._shape[1]),T=0;k>0;++T,k>>>=1)this._mipLevels.indexOf(T)<0&&this._mipLevels.push(T)},g.setPixels=function(k,T,L,C){var I=this.gl;this.bind(),Array.isArray(T)?(C=L,L=T[1]|0,T=T[0]|0):(T=T||0,L=L||0),C=C||0;var R=h(k)?k:k.raw;if(R){var B=this._mipLevels.indexOf(C)<0;B?(I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,this.type,R),this._mipLevels.push(C)):I.texSubImage2D(I.TEXTURE_2D,C,T,L,this.format,this.type,R)}else if(k.shape&&k.stride&&k.data){if(k.shape.length<2||T+k.shape[1]>this._shape[1]>>>C||L+k.shape[0]>this._shape[0]>>>C||T<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");y(I,T,L,C,this.format,this.type,this._mipLevels,k)}else throw new Error("gl-texture2d: Unsupported data type")};function m(k,T){return k.length===3?T[2]===1&&T[1]===k[0]*k[2]&&T[0]===k[2]:T[0]===1&&T[1]===k[0]}function y(k,T,L,C,I,R,B,N){var D=N.dtype,O=N.shape.slice();if(O.length<2||O.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var $=0,Y=0,X=m(O,N.stride.slice());if(D==="float32"?$=k.FLOAT:D==="float64"?($=k.FLOAT,X=!1,D="float32"):D==="uint8"?$=k.UNSIGNED_BYTE:($=k.UNSIGNED_BYTE,X=!1,D="uint8"),O.length===2)Y=k.LUMINANCE,O=[O[0],O[1],1],N=o(N.data,O,[N.stride[0],N.stride[1],1],N.offset);else if(O.length===3)if(O[2]===1)Y=k.ALPHA;else if(O[2]===2)Y=k.LUMINANCE_ALPHA;else if(O[2]===3)Y=k.RGB;else if(O[2]===4)Y=k.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((Y===k.LUMINANCE||Y===k.ALPHA)&&(I===k.LUMINANCE||I===k.ALPHA)&&(Y=I),Y!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ee=N.size,Q=B.indexOf(C)<0;if(Q&&B.push(C),$===R&&X)N.offset===0&&N.data.length===ee?Q?k.texImage2D(k.TEXTURE_2D,C,I,O[0],O[1],0,I,R,N.data):k.texSubImage2D(k.TEXTURE_2D,C,T,L,O[0],O[1],I,R,N.data):Q?k.texImage2D(k.TEXTURE_2D,C,I,O[0],O[1],0,I,R,N.data.subarray(N.offset,N.offset+ee)):k.texSubImage2D(k.TEXTURE_2D,C,T,L,O[0],O[1],I,R,N.data.subarray(N.offset,N.offset+ee));else{var Z;R===k.FLOAT?Z=s.mallocFloat32(ee):Z=s.mallocUint8(ee);var q=o(Z,O,[O[2],O[2]*O[0],1]);$===k.FLOAT&&R===k.UNSIGNED_BYTE?v(q,N):i.assign(q,N),Q?k.texImage2D(k.TEXTURE_2D,C,I,O[0],O[1],0,I,R,Z.subarray(0,ee)):k.texSubImage2D(k.TEXTURE_2D,C,T,L,O[0],O[1],I,R,Z.subarray(0,ee)),R===k.FLOAT?s.freeFloat32(Z):s.freeUint8(Z)}}function _(k){var T=k.createTexture();return k.bindTexture(k.TEXTURE_2D,T),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),T}function S(k,T,L,C,I){var R=k.getParameter(k.MAX_TEXTURE_SIZE);if(T<0||T>R||L<0||L>R)throw new Error("gl-texture2d: Invalid texture shape");if(I===k.FLOAT&&!k.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var B=_(k);return k.texImage2D(k.TEXTURE_2D,0,C,T,L,0,C,I,null),new d(k,B,T,L,C,I)}function M(k,T,L,C,I,R){var B=_(k);return k.texImage2D(k.TEXTURE_2D,0,I,I,R,T),new d(k,B,L,C,I,R)}function w(k,T){var L=T.dtype,C=T.shape.slice(),I=k.getParameter(k.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>I||C[1]<0||C[1]>I)throw new Error("gl-texture2d: Invalid texture size");var R=m(C,T.stride.slice()),B=0;L==="float32"?B=k.FLOAT:L==="float64"?(B=k.FLOAT,R=!1,L="float32"):L==="uint8"?B=k.UNSIGNED_BYTE:(B=k.UNSIGNED_BYTE,R=!1,L="uint8");var N=0;if(C.length===2)N=k.LUMINANCE,C=[C[0],C[1],1],T=o(T.data,C,[T.stride[0],T.stride[1],1],T.offset);else if(C.length===3)if(C[2]===1)N=k.ALPHA;else if(C[2]===2)N=k.LUMINANCE_ALPHA;else if(C[2]===3)N=k.RGB;else if(C[2]===4)N=k.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");B===k.FLOAT&&!k.getExtension("OES_texture_float")&&(B=k.UNSIGNED_BYTE,R=!1);var D,O,$=T.size;if(R)T.offset===0&&T.data.length===$?D=T.data:D=T.data.subarray(T.offset,T.offset+$);else{var Y=[C[2],C[2]*C[0],1];O=s.malloc($,L);var X=o(O,C,Y,0);(L==="float32"||L==="float64")&&B===k.UNSIGNED_BYTE?v(X,T):i.assign(X,T),D=O.subarray(0,$)}var ee=_(k);return k.texImage2D(k.TEXTURE_2D,0,N,C[0],C[1],0,N,B,D),R||s.free(O),new d(k,ee,C[0],C[1],N,B)}function A(k){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||c(k),typeof arguments[1]=="number")return S(k,arguments[1],arguments[2],arguments[3]||k.RGBA,arguments[4]||k.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return S(k,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var T=arguments[1],L=h(T)?T:T.raw;if(L)return M(k,L,T.width|0,T.height|0,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if(T.shape&&T.data&&T.stride)return w(k,T)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(r,a,n){function o(i,s,l){s?s.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var u=i.getParameter(i.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>u)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<l.length;++f){var c=l[f];if(c.buffer){var h=c.buffer,v=c.size||4,p=c.type||i.FLOAT,d=!!c.normalized,g=c.stride||0,m=c.offset||0;h.bind(),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,v,p,d,g,m)}else{if(typeof c=="number")i.vertexAttrib1f(f,c);else if(c.length===1)i.vertexAttrib1f(f,c[0]);else if(c.length===2)i.vertexAttrib2f(f,c[0],c[1]);else if(c.length===3)i.vertexAttrib3f(f,c[0],c[1],c[2]);else if(c.length===4)i.vertexAttrib4f(f,c[0],c[1],c[2],c[3]);else throw new Error("gl-vao: Invalid vertex attribute");i.disableVertexAttribArray(f)}}for(;f<u;++f)i.disableVertexAttribArray(f)}else{i.bindBuffer(i.ARRAY_BUFFER,null);for(var f=0;f<u;++f)i.disableVertexAttribArray(f)}}a.exports=o},{}],148:[function(r,a,n){var o=r("./do-bind.js");function i(l){this.gl=l,this._elements=null,this._attributes=null,this._elementsType=l.UNSIGNED_SHORT}i.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},i.prototype.update=function(l,u,f){this._elements=u,this._attributes=l,this._elementsType=f||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(l,u,f){f=f||0;var c=this.gl;this._elements?c.drawElements(l,u,this._elementsType,f):c.drawArrays(l,f,u)};function s(l){return new i(l)}a.exports=s},{"./do-bind.js":147}],149:[function(r,a,n){var o=r("./do-bind.js");function i(u,f,c,h,v,p){this.location=u,this.dimension=f,this.a=c,this.b=h,this.c=v,this.d=p}i.prototype.bind=function(u){switch(this.dimension){case 1:u.vertexAttrib1f(this.location,this.a);break;case 2:u.vertexAttrib2f(this.location,this.a,this.b);break;case 3:u.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:u.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function s(u,f,c){this.gl=u,this._ext=f,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=u.UNSIGNED_SHORT}s.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var u=0;u<this._attribs.length;++u)this._attribs[u].bind(this.gl)},s.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},s.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},s.prototype.update=function(u,f,c){if(this.bind(),o(this.gl,f,u),this.unbind(),this._attribs.length=0,u)for(var h=0;h<u.length;++h){var v=u[h];typeof v=="number"?this._attribs.push(new i(h,1,v)):Array.isArray(v)&&this._attribs.push(new i(h,v.length,v[0],v[1],v[2],v[3]))}this._useElements=!!f,this._elementsType=c||this.gl.UNSIGNED_SHORT},s.prototype.draw=function(u,f,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(u,f,this._elementsType,c):h.drawArrays(u,c,f)};function l(u,f){return new s(u,f,f.createVertexArrayOES())}a.exports=l},{"./do-bind.js":147}],150:[function(r,a,n){var o=r("./lib/vao-native.js"),i=r("./lib/vao-emulated.js");function s(u){this.bindVertexArrayOES=u.bindVertexArray.bind(u),this.createVertexArrayOES=u.createVertexArray.bind(u),this.deleteVertexArrayOES=u.deleteVertexArray.bind(u)}function l(u,f,c,h){var v=u.createVertexArray?new s(u):u.getExtension("OES_vertex_array_object"),p;return v?p=o(u,v):p=i(u),p.update(f,c,h),p}a.exports=l},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]+l[0],i[1]=s[1]+l[1],i[2]=s[2]+l[2],i}},{}],152:[function(r,a,n){a.exports=l;var o=r("./fromValues"),i=r("./normalize"),s=r("./dot");function l(u,f){var c=o(u[0],u[1],u[2]),h=o(f[0],f[1],f[2]);i(c,c),i(h,h);var v=s(c,h);return v>1?0:Math.acos(v)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=Math.ceil(s[0]),i[1]=Math.ceil(s[1]),i[2]=Math.ceil(s[2]),i}},{}],154:[function(r,a,n){a.exports=o;function o(i){var s=new Float32Array(3);return s[0]=i[0],s[1]=i[1],s[2]=i[2],s}},{}],155:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}},{}],156:[function(r,a,n){a.exports=o;function o(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},{}],157:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2];return i[0]=f*p-c*v,i[1]=c*h-u*p,i[2]=u*v-f*h,i}},{}],158:[function(r,a,n){a.exports=r("./distance")},{"./distance":159}],159:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0]-i[0],u=s[1]-i[1],f=s[2]-i[2];return Math.sqrt(l*l+u*u+f*f)}},{}],160:[function(r,a,n){a.exports=r("./divide")},{"./divide":161}],161:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]/l[0],i[1]=s[1]/l[1],i[2]=s[2]/l[2],i}},{}],162:[function(r,a,n){a.exports=o;function o(i,s){return i[0]*s[0]+i[1]*s[1]+i[2]*s[2]}},{}],163:[function(r,a,n){a.exports=1e-6},{}],164:[function(r,a,n){a.exports=i;var o=r("./epsilon");function i(s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2];return Math.abs(u-h)<=o*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(f-v)<=o*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(c-p)<=o*Math.max(1,Math.abs(c),Math.abs(p))}},{"./epsilon":163}],165:[function(r,a,n){a.exports=o;function o(i,s){return i[0]===s[0]&&i[1]===s[1]&&i[2]===s[2]}},{}],166:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=Math.floor(s[0]),i[1]=Math.floor(s[1]),i[2]=Math.floor(s[2]),i}},{}],167:[function(r,a,n){a.exports=i;var o=r("./create")();function i(s,l,u,f,c,h){var v,p;for(l||(l=3),u||(u=0),f?p=Math.min(f*l+u,s.length):p=s.length,v=u;v<p;v+=l)o[0]=s[v],o[1]=s[v+1],o[2]=s[v+2],c(o,o,h),s[v]=o[0],s[v+1]=o[1],s[v+2]=o[2];return s}},{"./create":156}],168:[function(r,a,n){a.exports=o;function o(i,s,l){var u=new Float32Array(3);return u[0]=i,u[1]=s,u[2]=l,u}},{}],169:[function(r,a,n){a.exports={EPSILON:r("./epsilon"),create:r("./create"),clone:r("./clone"),angle:r("./angle"),fromValues:r("./fromValues"),copy:r("./copy"),set:r("./set"),equals:r("./equals"),exactEquals:r("./exactEquals"),add:r("./add"),subtract:r("./subtract"),sub:r("./sub"),multiply:r("./multiply"),mul:r("./mul"),divide:r("./divide"),div:r("./div"),min:r("./min"),max:r("./max"),floor:r("./floor"),ceil:r("./ceil"),round:r("./round"),scale:r("./scale"),scaleAndAdd:r("./scaleAndAdd"),distance:r("./distance"),dist:r("./dist"),squaredDistance:r("./squaredDistance"),sqrDist:r("./sqrDist"),length:r("./length"),len:r("./len"),squaredLength:r("./squaredLength"),sqrLen:r("./sqrLen"),negate:r("./negate"),inverse:r("./inverse"),normalize:r("./normalize"),dot:r("./dot"),cross:r("./cross"),lerp:r("./lerp"),random:r("./random"),transformMat4:r("./transformMat4"),transformMat3:r("./transformMat3"),transformQuat:r("./transformQuat"),rotateX:r("./rotateX"),rotateY:r("./rotateY"),rotateZ:r("./rotateZ"),forEach:r("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=1/s[0],i[1]=1/s[1],i[2]=1/s[2],i}},{}],171:[function(r,a,n){a.exports=r("./length")},{"./length":172}],172:[function(r,a,n){a.exports=o;function o(i){var s=i[0],l=i[1],u=i[2];return Math.sqrt(s*s+l*l+u*u)}},{}],173:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=s[0],c=s[1],h=s[2];return i[0]=f+u*(l[0]-f),i[1]=c+u*(l[1]-c),i[2]=h+u*(l[2]-h),i}},{}],174:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=Math.max(s[0],l[0]),i[1]=Math.max(s[1],l[1]),i[2]=Math.max(s[2],l[2]),i}},{}],175:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=Math.min(s[0],l[0]),i[1]=Math.min(s[1],l[1]),i[2]=Math.min(s[2],l[2]),i}},{}],176:[function(r,a,n){a.exports=r("./multiply")},{"./multiply":177}],177:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]*l[0],i[1]=s[1]*l[1],i[2]=s[2]*l[2],i}},{}],178:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=-s[0],i[1]=-s[1],i[2]=-s[2],i}},{}],179:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0],u=s[1],f=s[2],c=l*l+u*u+f*f;return c>0&&(c=1/Math.sqrt(c),i[0]=s[0]*c,i[1]=s[1]*c,i[2]=s[2]*c),i}},{}],180:[function(r,a,n){a.exports=o;function o(i,s){s=s||1;var l=Math.random()*2*Math.PI,u=Math.random()*2-1,f=Math.sqrt(1-u*u)*s;return i[0]=Math.cos(l)*f,i[1]=Math.sin(l)*f,i[2]=u*s,i}},{}],181:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=l[1],c=l[2],h=s[1]-f,v=s[2]-c,p=Math.sin(u),d=Math.cos(u);return i[0]=s[0],i[1]=f+h*d-v*p,i[2]=c+h*p+v*d,i}},{}],182:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=l[0],c=l[2],h=s[0]-f,v=s[2]-c,p=Math.sin(u),d=Math.cos(u);return i[0]=f+v*p+h*d,i[1]=s[1],i[2]=c+v*d-h*p,i}},{}],183:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=l[0],c=l[1],h=s[0]-f,v=s[1]-c,p=Math.sin(u),d=Math.cos(u);return i[0]=f+h*d-v*p,i[1]=c+h*p+v*d,i[2]=s[2],i}},{}],184:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=Math.round(s[0]),i[1]=Math.round(s[1]),i[2]=Math.round(s[2]),i}},{}],185:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]*l,i[1]=s[1]*l,i[2]=s[2]*l,i}},{}],186:[function(r,a,n){a.exports=o;function o(i,s,l,u){return i[0]=s[0]+l[0]*u,i[1]=s[1]+l[1]*u,i[2]=s[2]+l[2]*u,i}},{}],187:[function(r,a,n){a.exports=o;function o(i,s,l,u){return i[0]=s,i[1]=l,i[2]=u,i}},{}],188:[function(r,a,n){a.exports=r("./squaredDistance")},{"./squaredDistance":190}],189:[function(r,a,n){a.exports=r("./squaredLength")},{"./squaredLength":191}],190:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0]-i[0],u=s[1]-i[1],f=s[2]-i[2];return l*l+u*u+f*f}},{}],191:[function(r,a,n){a.exports=o;function o(i){var s=i[0],l=i[1],u=i[2];return s*s+l*l+u*u}},{}],192:[function(r,a,n){a.exports=r("./subtract")},{"./subtract":193}],193:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]-l[0],i[1]=s[1]-l[1],i[2]=s[2]-l[2],i}},{}],194:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2];return i[0]=u*l[0]+f*l[3]+c*l[6],i[1]=u*l[1]+f*l[4]+c*l[7],i[2]=u*l[2]+f*l[5]+c*l[8],i}},{}],195:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=l[3]*u+l[7]*f+l[11]*c+l[15];return h=h||1,i[0]=(l[0]*u+l[4]*f+l[8]*c+l[12])/h,i[1]=(l[1]*u+l[5]*f+l[9]*c+l[13])/h,i[2]=(l[2]*u+l[6]*f+l[10]*c+l[14])/h,i}},{}],196:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2],d=l[3],g=d*u+v*c-p*f,m=d*f+p*u-h*c,y=d*c+h*f-v*u,_=-h*u-v*f-p*c;return i[0]=g*d+_*-h+m*-p-y*-v,i[1]=m*d+_*-v+y*-h-g*-p,i[2]=y*d+_*-p+g*-v-m*-h,i}},{}],197:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]+l[0],i[1]=s[1]+l[1],i[2]=s[2]+l[2],i[3]=s[3]+l[3],i}},{}],198:[function(r,a,n){a.exports=o;function o(i){var s=new Float32Array(4);return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s}},{}],199:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i}},{}],200:[function(r,a,n){a.exports=o;function o(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},{}],201:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0]-i[0],u=s[1]-i[1],f=s[2]-i[2],c=s[3]-i[3];return Math.sqrt(l*l+u*u+f*f+c*c)}},{}],202:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]/l[0],i[1]=s[1]/l[1],i[2]=s[2]/l[2],i[3]=s[3]/l[3],i}},{}],203:[function(r,a,n){a.exports=o;function o(i,s){return i[0]*s[0]+i[1]*s[1]+i[2]*s[2]+i[3]*s[3]}},{}],204:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=new Float32Array(4);return f[0]=i,f[1]=s,f[2]=l,f[3]=u,f}},{}],205:[function(r,a,n){a.exports={create:r("./create"),clone:r("./clone"),fromValues:r("./fromValues"),copy:r("./copy"),set:r("./set"),add:r("./add"),subtract:r("./subtract"),multiply:r("./multiply"),divide:r("./divide"),min:r("./min"),max:r("./max"),scale:r("./scale"),scaleAndAdd:r("./scaleAndAdd"),distance:r("./distance"),squaredDistance:r("./squaredDistance"),length:r("./length"),squaredLength:r("./squaredLength"),negate:r("./negate"),inverse:r("./inverse"),normalize:r("./normalize"),dot:r("./dot"),lerp:r("./lerp"),random:r("./random"),transformMat4:r("./transformMat4"),transformQuat:r("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=1/s[0],i[1]=1/s[1],i[2]=1/s[2],i[3]=1/s[3],i}},{}],207:[function(r,a,n){a.exports=o;function o(i){var s=i[0],l=i[1],u=i[2],f=i[3];return Math.sqrt(s*s+l*l+u*u+f*f)}},{}],208:[function(r,a,n){a.exports=o;function o(i,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3];return i[0]=f+u*(l[0]-f),i[1]=c+u*(l[1]-c),i[2]=h+u*(l[2]-h),i[3]=v+u*(l[3]-v),i}},{}],209:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=Math.max(s[0],l[0]),i[1]=Math.max(s[1],l[1]),i[2]=Math.max(s[2],l[2]),i[3]=Math.max(s[3],l[3]),i}},{}],210:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=Math.min(s[0],l[0]),i[1]=Math.min(s[1],l[1]),i[2]=Math.min(s[2],l[2]),i[3]=Math.min(s[3],l[3]),i}},{}],211:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]*l[0],i[1]=s[1]*l[1],i[2]=s[2]*l[2],i[3]=s[3]*l[3],i}},{}],212:[function(r,a,n){a.exports=o;function o(i,s){return i[0]=-s[0],i[1]=-s[1],i[2]=-s[2],i[3]=-s[3],i}},{}],213:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l*l+u*u+f*f+c*c;return h>0&&(h=1/Math.sqrt(h),i[0]=l*h,i[1]=u*h,i[2]=f*h,i[3]=c*h),i}},{}],214:[function(r,a,n){var o=r("./normalize"),i=r("./scale");a.exports=s;function s(l,u){return u=u||1,l[0]=Math.random(),l[1]=Math.random(),l[2]=Math.random(),l[3]=Math.random(),o(l,l),i(l,l,u),l}},{"./normalize":213,"./scale":215}],215:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]*l,i[1]=s[1]*l,i[2]=s[2]*l,i[3]=s[3]*l,i}},{}],216:[function(r,a,n){a.exports=o;function o(i,s,l,u){return i[0]=s[0]+l[0]*u,i[1]=s[1]+l[1]*u,i[2]=s[2]+l[2]*u,i[3]=s[3]+l[3]*u,i}},{}],217:[function(r,a,n){a.exports=o;function o(i,s,l,u,f){return i[0]=s,i[1]=l,i[2]=u,i[3]=f,i}},{}],218:[function(r,a,n){a.exports=o;function o(i,s){var l=s[0]-i[0],u=s[1]-i[1],f=s[2]-i[2],c=s[3]-i[3];return l*l+u*u+f*f+c*c}},{}],219:[function(r,a,n){a.exports=o;function o(i){var s=i[0],l=i[1],u=i[2],f=i[3];return s*s+l*l+u*u+f*f}},{}],220:[function(r,a,n){a.exports=o;function o(i,s,l){return i[0]=s[0]-l[0],i[1]=s[1]-l[1],i[2]=s[2]-l[2],i[3]=s[3]-l[3],i}},{}],221:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=s[3];return i[0]=l[0]*u+l[4]*f+l[8]*c+l[12]*h,i[1]=l[1]*u+l[5]*f+l[9]*c+l[13]*h,i[2]=l[2]*u+l[6]*f+l[10]*c+l[14]*h,i[3]=l[3]*u+l[7]*f+l[11]*c+l[15]*h,i}},{}],222:[function(r,a,n){a.exports=o;function o(i,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2],d=l[3],g=d*u+v*c-p*f,m=d*f+p*u-h*c,y=d*c+h*f-v*u,_=-h*u-v*f-p*c;return i[0]=g*d+_*-h+m*-p-y*-v,i[1]=m*d+_*-v+y*-h-g*-p,i[2]=y*d+_*-p+g*-v-m*-h,i[3]=s[3],i}},{}],223:[function(r,a,n){var o=r("glsl-tokenizer"),i=r("atob-lite");a.exports=s;function s(l){for(var u=Array.isArray(l)?l:o(l),f=0;f<u.length;f++){var c=u[f];if(c.type==="preprocessor"){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!h&&!!h[2]){var v=h[1],p=h[2];return(v?i(p):p).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(r,a,n){a.exports=T;var o=r("./lib/literals"),i=r("./lib/operators"),s=r("./lib/builtins"),l=r("./lib/literals-300es"),u=r("./lib/builtins-300es"),f=999,c=9999,h=0,v=1,p=2,d=3,g=4,m=5,y=6,_=7,S=8,M=9,w=10,A=11,k=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function T(L){var C=0,I=0,R=f,B,N,D=[],O=[],$=1,Y=0,X=0,ee=!1,Q=!1,Z="",q;L=L||{};var ae=s,ie=o;L.version==="300 es"&&(ae=u,ie=l);for(var we={},Te={},C=0;C<ae.length;C++)we[ae[C]]=!0;for(var C=0;C<ie.length;C++)Te[ie[C]]=!0;return function(ue){return O=[],ue!==null?xe(ue):Se()};function he(ue){ue.length&&O.push({type:k[R],data:ue,position:X,line:$,column:Y})}function xe(ue){C=0,ue.toString&&(ue=ue.toString()),Z+=ue.replace(/\r\n/g,`
`),q=Z.length;for(var Re;B=Z[C],C<q;){switch(Re=C,R){case h:C=Me();break;case v:C=de();break;case p:C=se();break;case d:C=Ie();break;case g:C=be();break;case A:C=qe();break;case m:C=oe();break;case c:C=ce();break;case M:C=re();break;case f:C=ye();break}if(Re!==C)switch(Z[Re]){case`
`:Y=0,++$;break;default:++Y;break}}return I+=C,Z=Z.slice(C),O}function Se(ue){return D.length&&he(D.join("")),R=w,he("(eof)"),O}function ye(){return D=D.length?[]:D,N==="/"&&B==="*"?(X=I+C-1,R=h,N=B,C+1):N==="/"&&B==="/"?(X=I+C-1,R=v,N=B,C+1):B==="#"?(R=p,X=I+C,C):/\s/.test(B)?(R=M,X=I+C,C):(ee=/\d/.test(B),Q=/[^\w_]/.test(B),X=I+C,R=ee?g:Q?d:c,C)}function re(){return/[^\s]/g.test(B)?(he(D.join("")),R=f,C):(D.push(B),N=B,C+1)}function se(){return(B==="\r"||B===`
`)&&N!=="\\"?(he(D.join("")),R=f,C):(D.push(B),N=B,C+1)}function de(){return se()}function Me(){return B==="/"&&N==="*"?(D.push(B),he(D.join("")),R=f,C+1):(D.push(B),N=B,C+1)}function Ie(){if(N==="."&&/\d/.test(B))return R=m,C;if(N==="/"&&B==="*")return R=h,C;if(N==="/"&&B==="/")return R=v,C;if(B==="."&&D.length){for(;Ee(D););return R=m,C}if(B===";"||B===")"||B==="("){if(D.length)for(;Ee(D););return he(B),R=f,C+1}var ue=D.length===2&&B!=="=";if(/[\w_\d\s]/.test(B)||ue){for(;Ee(D););return R=f,C}return D.push(B),N=B,C+1}function Ee(ue){var Re=0,Xe,Ke;do{if(Xe=i.indexOf(ue.slice(0,ue.length+Re).join("")),Ke=i[Xe],Xe===-1){if(Re--+ue.length>0)continue;Ke=ue.slice(0,1).join("")}return he(Ke),X+=Ke.length,D=D.slice(Ke.length),D.length}while(1)}function qe(){return/[^a-fA-F0-9]/.test(B)?(he(D.join("")),R=f,C):(D.push(B),N=B,C+1)}function be(){return B==="."||/[eE]/.test(B)?(D.push(B),R=m,N=B,C+1):B==="x"&&D.length===1&&D[0]==="0"?(R=A,D.push(B),N=B,C+1):/[^\d]/.test(B)?(he(D.join("")),R=f,C):(D.push(B),N=B,C+1)}function oe(){return B==="f"&&(D.push(B),N=B,C+=1),/[eE]/.test(B)||(B==="-"||B==="+")&&/[eE]/.test(N)?(D.push(B),N=B,C+1):/[^\d]/.test(B)?(he(D.join("")),R=f,C):(D.push(B),N=B,C+1)}function ce(){if(/[^\d\w_]/.test(B)){var ue=D.join("");return Te[ue]?R=S:we[ue]?R=_:R=y,he(D.join("")),R=f,C}return D.push(B),N=B,C+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(r,a,n){var o=r("./builtins");o=o.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),a.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(r,a,n){a.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(r,a,n){var o=r("./literals");a.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(r,a,n){a.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(r,a,n){a.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(r,a,n){var o=r("./index");a.exports=i;function i(s,l){var u=o(l),f=[];return f=f.concat(u(s)),f=f.concat(u(null)),f}},{"./index":224}],231:[function(r,a,n){a.exports=function(o){typeof o=="string"&&(o=[o]);for(var i=[].slice.call(arguments,1),s=[],l=0;l<o.length-1;l++)s.push(o[l],i[l]||"");return s.push(o[l]),s.join("")}},{}],232:[function(r,a,n){var o=r("is-browser");function i(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{s=!1}return s}a.exports=o&&i()},{"is-browser":236}],233:[function(r,a,n){a.exports=d;var o=r("robust-orientation"),i=r("simplicial-complex").compareCells;function s(g,m,y){this.vertices=g,this.adjacent=m,this.boundary=y,this.lastVisited=-1}s.prototype.flip=function(){var g=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=g;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function l(g,m,y){this.vertices=g,this.cell=m,this.index=y}function u(g,m){return i(g.vertices,m.vertices)}function f(g){return function(){var m=this.tuple;return g.apply(this,m)}}function c(g){var m=o[g+1];return m||(m=o),f(m)}var h=[];function v(g,m,y){this.dimension=g,this.vertices=m,this.simplices=y,this.interior=y.filter(function(M){return!M.boundary}),this.tuple=new Array(g+1);for(var _=0;_<=g;++_)this.tuple[_]=this.vertices[_];var S=h[g];S||(S=h[g]=c(g)),this.orient=S}var p=v.prototype;p.handleBoundaryDegeneracy=function(g,m){var y=this.dimension,_=this.vertices.length-1,S=this.tuple,M=this.vertices,w=[g];for(g.lastVisited=-_;w.length>0;){g=w.pop();for(var A=g.adjacent,k=0;k<=y;++k){var T=A[k];if(!(!T.boundary||T.lastVisited<=-_)){for(var L=T.vertices,C=0;C<=y;++C){var I=L[C];I<0?S[C]=m:S[C]=M[I]}var R=this.orient();if(R>0)return T;T.lastVisited=-_,R===0&&w.push(T)}}}return null},p.walk=function(g,m){var y=this.vertices.length-1,_=this.dimension,S=this.vertices,M=this.tuple,w=m?this.interior.length*Math.random()|0:this.interior.length-1,A=this.interior[w];e:for(;!A.boundary;){for(var k=A.vertices,T=A.adjacent,L=0;L<=_;++L)M[L]=S[k[L]];A.lastVisited=y;for(var L=0;L<=_;++L){var C=T[L];if(!(C.lastVisited>=y)){var I=M[L];M[L]=g;var R=this.orient();if(M[L]=I,R<0){A=C;continue e}else C.boundary?C.lastVisited=-y:C.lastVisited=y}}return}return A},p.addPeaks=function(g,m){var y=this.vertices.length-1,_=this.dimension,S=this.vertices,M=this.tuple,w=this.interior,A=this.simplices,k=[m];m.lastVisited=y,m.vertices[m.vertices.indexOf(-1)]=y,m.boundary=!1,w.push(m);for(var T=[];k.length>0;){var m=k.pop(),L=m.vertices,C=m.adjacent,I=L.indexOf(y);if(!(I<0)){for(var R=0;R<=_;++R)if(R!==I){var B=C[R];if(!(!B.boundary||B.lastVisited>=y)){var N=B.vertices;if(B.lastVisited!==-y){for(var D=0,O=0;O<=_;++O)N[O]<0?(D=O,M[O]=g):M[O]=S[N[O]];var $=this.orient();if($>0){N[D]=y,B.boundary=!1,w.push(B),k.push(B),B.lastVisited=y;continue}else B.lastVisited=-y}var Y=B.adjacent,X=L.slice(),ee=C.slice(),Q=new s(X,ee,!0);A.push(Q);var Z=Y.indexOf(m);if(!(Z<0)){Y[Z]=Q,ee[I]=B,X[R]=-1,ee[R]=m,C[R]=Q,Q.flip();for(var O=0;O<=_;++O){var q=X[O];if(!(q<0||q===y)){for(var ae=new Array(_-1),ie=0,we=0;we<=_;++we){var Te=X[we];Te<0||we===O||(ae[ie++]=Te)}T.push(new l(ae,Q,O))}}}}}}}T.sort(u);for(var R=0;R+1<T.length;R+=2){var he=T[R],xe=T[R+1],Se=he.index,ye=xe.index;Se<0||ye<0||(he.cell.adjacent[he.index]=xe.cell,xe.cell.adjacent[xe.index]=he.cell)}},p.insert=function(g,m){var y=this.vertices;y.push(g);var _=this.walk(g,m);if(!!_){for(var S=this.dimension,M=this.tuple,w=0;w<=S;++w){var A=_.vertices[w];A<0?M[w]=g:M[w]=y[A]}var k=this.orient(M);k<0||k===0&&(_=this.handleBoundaryDegeneracy(_,g),!_)||this.addPeaks(g,_)}},p.boundary=function(){for(var g=this.dimension,m=[],y=this.simplices,_=y.length,S=0;S<_;++S){var M=y[S];if(M.boundary){for(var w=new Array(g),A=M.vertices,k=0,T=0,L=0;L<=g;++L)A[L]>=0?w[k++]=A[L]:T=L&1;if(T===(g&1)){var C=w[0];w[0]=w[1],w[1]=C}m.push(w)}}return m};function d(g,m){var y=g.length;if(y===0)throw new Error("Must have at least d+1 points");var _=g[0].length;if(y<=_)throw new Error("Must input at least d+1 points");var S=g.slice(0,_+1),M=o.apply(void 0,S);if(M===0)throw new Error("Input not in general position");for(var w=new Array(_+1),A=0;A<=_;++A)w[A]=A;M<0&&(w[0]=1,w[1]=0);for(var k=new s(w,new Array(_+1),!1),T=k.adjacent,L=new Array(_+2),A=0;A<=_;++A){for(var C=w.slice(),I=0;I<=_;++I)I===A&&(C[I]=-1);var R=C[0];C[0]=C[1],C[1]=R;var B=new s(C,new Array(_+1),!0);T[A]=B,L[A]=B}L[_+1]=k;for(var A=0;A<=_;++A)for(var C=T[A].vertices,N=T[A].adjacent,I=0;I<=_;++I){var D=C[I];if(D<0){N[I]=k;continue}for(var O=0;O<=_;++O)T[O].vertices.indexOf(D)<0&&(N[I]=T[O])}for(var $=new v(_,S,L),Y=!!m,A=_+1;A<y;++A)$.insert(g[A],Y);return $.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(r,a,n){var o=r("binary-search-bounds"),i=0,s=1,l=2;a.exports=k;function u(T,L,C,I,R){this.mid=T,this.left=L,this.right=C,this.leftPoints=I,this.rightPoints=R,this.count=(L?L.count:0)+(C?C.count:0)+I.length}var f=u.prototype;function c(T,L){T.mid=L.mid,T.left=L.left,T.right=L.right,T.leftPoints=L.leftPoints,T.rightPoints=L.rightPoints,T.count=L.count}function h(T,L){var C=M(L);T.mid=C.mid,T.left=C.left,T.right=C.right,T.leftPoints=C.leftPoints,T.rightPoints=C.rightPoints,T.count=C.count}function v(T,L){var C=T.intervals([]);C.push(L),h(T,C)}function p(T,L){var C=T.intervals([]),I=C.indexOf(L);return I<0?i:(C.splice(I,1),h(T,C),s)}f.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},f.insert=function(T){var L=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?v(this,T):this.left.insert(T):this.left=M([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?v(this,T):this.right.insert(T):this.right=M([T]);else{var C=o.ge(this.leftPoints,T,_),I=o.ge(this.rightPoints,T,S);this.leftPoints.splice(C,0,T),this.rightPoints.splice(I,0,T)}},f.remove=function(T){var L=this.count-this.leftPoints;if(T[1]<this.mid){if(!this.left)return i;var C=this.right?this.right.count:0;if(4*C>3*(L-1))return p(this,T);var I=this.left.remove(T);return I===l?(this.left=null,this.count-=1,s):(I===s&&(this.count-=1),I)}else if(T[0]>this.mid){if(!this.right)return i;var R=this.left?this.left.count:0;if(4*R>3*(L-1))return p(this,T);var I=this.right.remove(T);return I===l?(this.right=null,this.count-=1,s):(I===s&&(this.count-=1),I)}else{if(this.count===1)return this.leftPoints[0]===T?l:i;if(this.leftPoints.length===1&&this.leftPoints[0]===T){if(this.left&&this.right){for(var B=this,N=this.left;N.right;)B=N,N=N.right;if(B===this)N.right=this.right;else{var D=this.left,I=this.right;B.count-=N.count,B.right=N.left,N.left=D,N.right=I}c(this,N),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?c(this,this.left):c(this,this.right);return s}for(var D=o.ge(this.leftPoints,T,_);D<this.leftPoints.length&&this.leftPoints[D][0]===T[0];++D)if(this.leftPoints[D]===T){this.count-=1,this.leftPoints.splice(D,1);for(var I=o.ge(this.rightPoints,T,S);I<this.rightPoints.length&&this.rightPoints[I][1]===T[1];++I)if(this.rightPoints[I]===T)return this.rightPoints.splice(I,1),s}return i}};function d(T,L,C){for(var I=0;I<T.length&&T[I][0]<=L;++I){var R=C(T[I]);if(R)return R}}function g(T,L,C){for(var I=T.length-1;I>=0&&T[I][1]>=L;--I){var R=C(T[I]);if(R)return R}}function m(T,L){for(var C=0;C<T.length;++C){var I=L(T[C]);if(I)return I}}f.queryPoint=function(T,L){if(T<this.mid){if(this.left){var C=this.left.queryPoint(T,L);if(C)return C}return d(this.leftPoints,T,L)}else if(T>this.mid){if(this.right){var C=this.right.queryPoint(T,L);if(C)return C}return g(this.rightPoints,T,L)}else return m(this.leftPoints,L)},f.queryInterval=function(T,L,C){if(T<this.mid&&this.left){var I=this.left.queryInterval(T,L,C);if(I)return I}if(L>this.mid&&this.right){var I=this.right.queryInterval(T,L,C);if(I)return I}return L<this.mid?d(this.leftPoints,L,C):T>this.mid?g(this.rightPoints,T,C):m(this.leftPoints,C)};function y(T,L){return T-L}function _(T,L){var C=T[0]-L[0];return C||T[1]-L[1]}function S(T,L){var C=T[1]-L[1];return C||T[0]-L[0]}function M(T){if(T.length===0)return null;for(var L=[],C=0;C<T.length;++C)L.push(T[C][0],T[C][1]);L.sort(y);for(var I=L[L.length>>1],R=[],B=[],N=[],C=0;C<T.length;++C){var D=T[C];D[1]<I?R.push(D):I<D[0]?B.push(D):N.push(D)}var O=N,$=N.slice();return O.sort(_),$.sort(S),new u(I,M(R),M(B),O,$)}function w(T){this.root=T}var A=w.prototype;A.insert=function(T){this.root?this.root.insert(T):this.root=new u(T[0],null,null,[T],[T])},A.remove=function(T){if(this.root){var L=this.root.remove(T);return L===l&&(this.root=null),L!==i}return!1},A.queryPoint=function(T,L){if(this.root)return this.root.queryPoint(T,L)},A.queryInterval=function(T,L,C){if(T<=L&&this.root)return this.root.queryInterval(T,L,C)},Object.defineProperty(A,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(A,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function k(T){return!T||T.length===0?new w(null):new w(M(T))}},{"binary-search-bounds":31}],235:[function(r,a,n){function o(i){for(var s=new Array(i),l=0;l<i;++l)s[l]=l;return s}a.exports=o},{}],236:[function(r,a,n){a.exports=!0},{}],237:[function(r,a,n){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */a.exports=function(s){return s!=null&&(o(s)||i(s)||!!s._isBuffer)};function o(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function i(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&o(s.slice(0,0))}},{}],238:[function(r,a,n){a.exports=s,a.exports.isMobile=s,a.exports.default=s;var o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function s(l){l||(l={});var u=l.ua;if(!u&&typeof navigator!="undefined"&&(u=navigator.userAgent),u&&u.headers&&typeof u.headers["user-agent"]=="string"&&(u=u.headers["user-agent"]),typeof u!="string")return!1;var f=l.tablet?i.test(u):o.test(u);return!f&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&u.indexOf("Macintosh")!==-1&&u.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(r,a,n){a.exports=function(o){for(var i=o.length,s,l=0;l<i;l++)if(s=o.charCodeAt(l),(s<9||s>13)&&s!==32&&s!==133&&s!==160&&s!==5760&&s!==6158&&(s<8192||s>8205)&&s!==8232&&s!==8233&&s!==8239&&s!==8287&&s!==8288&&s!==12288&&s!==65279)return!1;return!0}},{}],240:[function(r,a,n){function o(i,s,l){return i*(1-l)+s*l}a.exports=o},{}],241:[function(r,a,n){var o=r("./normalize"),i=r("gl-mat4/create"),s=r("gl-mat4/clone"),l=r("gl-mat4/determinant"),u=r("gl-mat4/invert"),f=r("gl-mat4/transpose"),c={length:r("gl-vec3/length"),normalize:r("gl-vec3/normalize"),dot:r("gl-vec3/dot"),cross:r("gl-vec3/cross")},h=i(),v=i(),p=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];a.exports=function(M,w,A,k,T,L){if(w||(w=[0,0,0]),A||(A=[0,0,0]),k||(k=[0,0,0]),T||(T=[0,0,0,1]),L||(L=[0,0,0,1]),!o(h,M)||(s(v,h),v[3]=0,v[7]=0,v[11]=0,v[15]=1,Math.abs(l(v)<1e-8)))return!1;var C=h[3],I=h[7],R=h[11],B=h[12],N=h[13],D=h[14],O=h[15];if(C!==0||I!==0||R!==0){p[0]=C,p[1]=I,p[2]=R,p[3]=O;var $=u(v,v);if(!$)return!1;f(v,v),m(T,p,v)}else T[0]=T[1]=T[2]=0,T[3]=1;if(w[0]=B,w[1]=N,w[2]=D,y(d,h),A[0]=c.length(d[0]),c.normalize(d[0],d[0]),k[0]=c.dot(d[0],d[1]),_(d[1],d[1],d[0],1,-k[0]),A[1]=c.length(d[1]),c.normalize(d[1],d[1]),k[0]/=A[1],k[1]=c.dot(d[0],d[2]),_(d[2],d[2],d[0],1,-k[1]),k[2]=c.dot(d[1],d[2]),_(d[2],d[2],d[1],1,-k[2]),A[2]=c.length(d[2]),c.normalize(d[2],d[2]),k[1]/=A[2],k[2]/=A[2],c.cross(g,d[1],d[2]),c.dot(d[0],g)<0)for(var Y=0;Y<3;Y++)A[Y]*=-1,d[Y][0]*=-1,d[Y][1]*=-1,d[Y][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function m(S,M,w){var A=M[0],k=M[1],T=M[2],L=M[3];return S[0]=w[0]*A+w[4]*k+w[8]*T+w[12]*L,S[1]=w[1]*A+w[5]*k+w[9]*T+w[13]*L,S[2]=w[2]*A+w[6]*k+w[10]*T+w[14]*L,S[3]=w[3]*A+w[7]*k+w[11]*T+w[15]*L,S}function y(S,M){S[0][0]=M[0],S[0][1]=M[1],S[0][2]=M[2],S[1][0]=M[4],S[1][1]=M[5],S[1][2]=M[6],S[2][0]=M[8],S[2][1]=M[9],S[2][2]=M[10]}function _(S,M,w,A,k){S[0]=M[0]*A+w[0]*k,S[1]=M[1]*A+w[1]*k,S[2]=M[2]*A+w[2]*k}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(r,a,n){a.exports=function(i,s){var l=s[15];if(l===0)return!1;for(var u=1/l,f=0;f<16;f++)i[f]=s[f]*u;return!0}},{}],243:[function(r,a,n){var o=r("gl-vec3/lerp"),i=r("mat4-recompose"),s=r("mat4-decompose"),l=r("gl-mat4/determinant"),u=r("quat-slerp"),f=p(),c=p(),h=p();a.exports=v;function v(m,y,_,S){if(l(y)===0||l(_)===0)return!1;var M=s(y,f.translate,f.scale,f.skew,f.perspective,f.quaternion),w=s(_,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!M||!w?!1:(o(h.translate,f.translate,c.translate,S),o(h.skew,f.skew,c.skew,S),o(h.scale,f.scale,c.scale,S),o(h.perspective,f.perspective,c.perspective,S),u(h.quaternion,f.quaternion,c.quaternion,S),i(m,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}function p(){return{translate:d(),scale:d(1),skew:d(),perspective:g(),quaternion:g()}}function d(m){return[m||0,m||0,m||0]}function g(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(r,a,n){var o={identity:r("gl-mat4/identity"),translate:r("gl-mat4/translate"),multiply:r("gl-mat4/multiply"),create:r("gl-mat4/create"),scale:r("gl-mat4/scale"),fromRotationTranslation:r("gl-mat4/fromRotationTranslation")};o.create();var i=o.create();a.exports=function(l,u,f,c,h,v){return o.identity(l),o.fromRotationTranslation(l,v,u),l[3]=h[0],l[7]=h[1],l[11]=h[2],l[15]=h[3],o.identity(i),c[2]!==0&&(i[9]=c[2],o.multiply(l,l,i)),c[1]!==0&&(i[9]=0,i[8]=c[1],o.multiply(l,l,i)),c[0]!==0&&(i[8]=0,i[4]=c[0],o.multiply(l,l,i)),o.scale(l,l,f),l}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(r,a,n){var o=r("binary-search-bounds"),i=r("mat4-interpolate"),s=r("gl-mat4/invert"),l=r("gl-mat4/rotateX"),u=r("gl-mat4/rotateY"),f=r("gl-mat4/rotateZ"),c=r("gl-mat4/lookAt"),h=r("gl-mat4/translate");r("gl-mat4/scale");var v=r("gl-vec3/normalize"),p=[0,0,0];a.exports=y;function d(_){this._components=_.slice(),this._time=[0],this.prevMatrix=_.slice(),this.nextMatrix=_.slice(),this.computedMatrix=_.slice(),this.computedInverse=_.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var g=d.prototype;g.recalcMatrix=function(_){var S=this._time,M=o.le(S,_),w=this.computedMatrix;if(!(M<0)){var A=this._components;if(M===S.length-1)for(var k=16*M,T=0;T<16;++T)w[T]=A[k++];else{for(var L=S[M+1]-S[M],k=16*M,C=this.prevMatrix,I=!0,T=0;T<16;++T)C[T]=A[k++];for(var R=this.nextMatrix,T=0;T<16;++T)R[T]=A[k++],I=I&&C[T]===R[T];if(L<1e-6||I)for(var T=0;T<16;++T)w[T]=C[T];else i(w,C,R,(_-S[M])/L)}var B=this.computedUp;B[0]=w[1],B[1]=w[5],B[2]=w[9],v(B,B);var N=this.computedInverse;s(N,w);var D=this.computedEye,O=N[15];D[0]=N[12]/O,D[1]=N[13]/O,D[2]=N[14]/O;for(var $=this.computedCenter,Y=Math.exp(this.computedRadius[0]),T=0;T<3;++T)$[T]=D[T]-w[2+4*T]*Y}},g.idle=function(_){if(!(_<this.lastT())){for(var S=this._components,M=S.length-16,w=0;w<16;++w)S.push(S[M++]);this._time.push(_)}},g.flush=function(_){var S=o.gt(this._time,_)-2;S<0||(this._time.splice(0,S),this._components.splice(0,16*S))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(_,S,M,w){this.recalcMatrix(_),S=S||this.computedEye,M=M||p,w=w||this.computedUp,this.setMatrix(_,c(this.computedMatrix,S,M,w));for(var A=0,k=0;k<3;++k)A+=Math.pow(M[k]-S[k],2);A=Math.log(Math.sqrt(A)),this.computedRadius[0]=A},g.rotate=function(_,S,M,w){this.recalcMatrix(_);var A=this.computedInverse;S&&u(A,A,S),M&&l(A,A,M),w&&f(A,A,w),this.setMatrix(_,s(this.computedMatrix,A))};var m=[0,0,0];g.pan=function(_,S,M,w){m[0]=-(S||0),m[1]=-(M||0),m[2]=-(w||0),this.recalcMatrix(_);var A=this.computedInverse;h(A,A,m),this.setMatrix(_,s(A,A))},g.translate=function(_,S,M,w){m[0]=S||0,m[1]=M||0,m[2]=w||0,this.recalcMatrix(_);var A=this.computedMatrix;h(A,A,m),this.setMatrix(_,A)},g.setMatrix=function(_,S){if(!(_<this.lastT())){this._time.push(_);for(var M=0;M<16;++M)this._components.push(S[M])}},g.setDistance=function(_,S){this.computedRadius[0]=S},g.setDistanceLimits=function(_,S){var M=this._limits;M[0]=_,M[1]=S},g.getDistanceLimits=function(_){var S=this._limits;return _?(_[0]=S[0],_[1]=S[1],_):S};function y(_){_=_||{};var S=_.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(S)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(r,a,n){a.exports=i;var o=r("robust-orientation")[3];function i(s){var l=s.length;if(l<3){for(var g=new Array(l),u=0;u<l;++u)g[u]=u;return l===2&&s[0][0]===s[1][0]&&s[0][1]===s[1][1]?[0]:g}for(var f=new Array(l),u=0;u<l;++u)f[u]=u;f.sort(function(S,M){var w=s[S][0]-s[M][0];return w||s[S][1]-s[M][1]});for(var c=[f[0],f[1]],h=[f[0],f[1]],u=2;u<l;++u){for(var v=f[u],p=s[v],d=c.length;d>1&&o(s[c[d-2]],s[c[d-1]],p)<=0;)d-=1,c.pop();for(c.push(v),d=h.length;d>1&&o(s[h[d-2]],s[h[d-1]],p)>=0;)d-=1,h.pop();h.push(v)}for(var g=new Array(h.length+c.length-2),m=0,u=0,y=c.length;u<y;++u)g[m++]=c[u];for(var _=h.length-2;_>0;--_)g[m++]=h[_];return g}},{"robust-orientation":284}],247:[function(r,a,n){a.exports=i;var o=r("mouse-event");function i(s,l){l||(l=s,s=window);var u=0,f=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},v=!1;function p(T){var L=!1;return"altKey"in T&&(L=L||T.altKey!==h.alt,h.alt=!!T.altKey),"shiftKey"in T&&(L=L||T.shiftKey!==h.shift,h.shift=!!T.shiftKey),"ctrlKey"in T&&(L=L||T.ctrlKey!==h.control,h.control=!!T.ctrlKey),"metaKey"in T&&(L=L||T.metaKey!==h.meta,h.meta=!!T.metaKey),L}function d(T,L){var C=o.x(L),I=o.y(L);"buttons"in L&&(T=L.buttons|0),(T!==u||C!==f||I!==c||p(L))&&(u=T|0,f=C||0,c=I||0,l&&l(u,f,c,h))}function g(T){d(0,T)}function m(){(u||f||c||h.shift||h.alt||h.meta||h.control)&&(f=c=0,u=0,h.shift=h.alt=h.control=h.meta=!1,l&&l(0,0,0,h))}function y(T){p(T)&&l&&l(u,f,c,h)}function _(T){o.buttons(T)===0?d(0,T):d(u,T)}function S(T){d(u|o.buttons(T),T)}function M(T){d(u&~o.buttons(T),T)}function w(){v||(v=!0,s.addEventListener("mousemove",_),s.addEventListener("mousedown",S),s.addEventListener("mouseup",M),s.addEventListener("mouseleave",g),s.addEventListener("mouseenter",g),s.addEventListener("mouseout",g),s.addEventListener("mouseover",g),s.addEventListener("blur",m),s.addEventListener("keyup",y),s.addEventListener("keydown",y),s.addEventListener("keypress",y),s!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}function A(){!v||(v=!1,s.removeEventListener("mousemove",_),s.removeEventListener("mousedown",S),s.removeEventListener("mouseup",M),s.removeEventListener("mouseleave",g),s.removeEventListener("mouseenter",g),s.removeEventListener("mouseout",g),s.removeEventListener("mouseover",g),s.removeEventListener("blur",m),s.removeEventListener("keyup",y),s.removeEventListener("keydown",y),s.removeEventListener("keypress",y),s!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))}w();var k={element:s};return Object.defineProperties(k,{enabled:{get:function(){return v},set:function(T){T?w():A()},enumerable:!0},buttons:{get:function(){return u},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),k}},{"mouse-event":249}],248:[function(r,a,n){var o={left:0,top:0};a.exports=i;function i(l,u,f){u=u||l.currentTarget||l.srcElement,Array.isArray(f)||(f=[0,0]);var c=l.clientX||0,h=l.clientY||0,v=s(u);return f[0]=c-v.left,f[1]=h-v.top,f}function s(l){return l===window||l===document||l===document.body?o:l.getBoundingClientRect()}},{}],249:[function(r,a,n){function o(u){if(typeof u=="object"){if("buttons"in u)return u.buttons;if("which"in u){var f=u.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in u){var f=u.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}n.buttons=o;function i(u){return u.target||u.srcElement||window}n.element=i;function s(u){if(typeof u=="object"){if("offsetX"in u)return u.offsetX;var f=i(u),c=f.getBoundingClientRect();return u.clientX-c.left}return 0}n.x=s;function l(u){if(typeof u=="object"){if("offsetY"in u)return u.offsetY;var f=i(u),c=f.getBoundingClientRect();return u.clientY-c.top}return 0}n.y=l},{}],250:[function(r,a,n){var o=r("to-px");a.exports=i;function i(s,l,u){typeof s=="function"&&(u=!!l,l=s,s=window);var f=o("ex",s),c=function(h){u&&h.preventDefault();var v=h.deltaX||0,p=h.deltaY||0,d=h.deltaZ||0,g=h.deltaMode,m=1;switch(g){case 1:m=f;break;case 2:m=window.innerHeight;break}if(v*=m,p*=m,d*=m,v||p||d)return l(v,p,d,h)};return s.addEventListener("wheel",c),c}},{"to-px":304}],251:[function(r,a,n){var o=r("typedarray-pool");a.exports=l;var i={"false,0,1":function(f,c,h,v,p){return function(g,m,y,_){var S=g.shape[0]|0,M=g.shape[1]|0,w=g.data,A=g.offset|0,k=g.stride[0]|0,T=g.stride[1]|0,L=A,C,I=-k|0,R=0,B=-T|0,N=0,D=-k-T|0,O=0,$=k|0,Y=T-k*S|0,X=0,ee=0,Q=0,Z=2*S|0,q=v(Z),ae=v(Z),ie=0,we=0,Te=-1|0,he=-1|0,xe=0,Se=-S|0,ye=S|0,re=0,se=-S-1|0,de=S-1|0,Me=0,Ie=0,Ee=0;for(X=0;X<S;++X)q[ie++]=h(w[L],m,y,_),L+=$;if(L+=Y,M>0){if(ee=1,q[ie++]=h(w[L],m,y,_),L+=$,S>0)for(X=1,C=w[L],we=q[ie]=h(C,m,y,_),xe=q[ie+Te],re=q[ie+Se],Me=q[ie+se],(we!==xe||we!==re||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,xe,re,Me,m,y,_),Ie=ae[ie]=Q++),ie+=1,L+=$,X=2;X<S;++X)C=w[L],we=q[ie]=h(C,m,y,_),xe=q[ie+Te],re=q[ie+Se],Me=q[ie+se],(we!==xe||we!==re||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,xe,re,Me,m,y,_),Ie=ae[ie]=Q++,Me!==xe&&c(ae[ie+Te],Ie,O,R,Me,xe,m,y,_)),ie+=1,L+=$;for(L+=Y,ie=0,Ee=Te,Te=he,he=Ee,Ee=Se,Se=ye,ye=Ee,Ee=se,se=de,de=Ee,ee=2;ee<M;++ee){if(q[ie++]=h(w[L],m,y,_),L+=$,S>0)for(X=1,C=w[L],we=q[ie]=h(C,m,y,_),xe=q[ie+Te],re=q[ie+Se],Me=q[ie+se],(we!==xe||we!==re||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,xe,re,Me,m,y,_),Ie=ae[ie]=Q++,Me!==re&&c(ae[ie+Se],Ie,N,O,re,Me,m,y,_)),ie+=1,L+=$,X=2;X<S;++X)C=w[L],we=q[ie]=h(C,m,y,_),xe=q[ie+Te],re=q[ie+Se],Me=q[ie+se],(we!==xe||we!==re||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,xe,re,Me,m,y,_),Ie=ae[ie]=Q++,Me!==re&&c(ae[ie+Se],Ie,N,O,re,Me,m,y,_),Me!==xe&&c(ae[ie+Te],Ie,O,R,Me,xe,m,y,_)),ie+=1,L+=$;ee&1&&(ie=0),Ee=Te,Te=he,he=Ee,Ee=Se,Se=ye,ye=Ee,Ee=se,se=de,de=Ee,L+=Y}}p(ae),p(q)}},"false,1,0":function(f,c,h,v,p){return function(g,m,y,_){var S=g.shape[0]|0,M=g.shape[1]|0,w=g.data,A=g.offset|0,k=g.stride[0]|0,T=g.stride[1]|0,L=A,C,I=-k|0,R=0,B=-T|0,N=0,D=-k-T|0,O=0,$=T|0,Y=k-T*M|0,X=0,ee=0,Q=0,Z=2*M|0,q=v(Z),ae=v(Z),ie=0,we=0,Te=-1|0,he=-1|0,xe=0,Se=-M|0,ye=M|0,re=0,se=-M-1|0,de=M-1|0,Me=0,Ie=0,Ee=0;for(ee=0;ee<M;++ee)q[ie++]=h(w[L],m,y,_),L+=$;if(L+=Y,S>0){if(X=1,q[ie++]=h(w[L],m,y,_),L+=$,M>0)for(ee=1,C=w[L],we=q[ie]=h(C,m,y,_),re=q[ie+Se],xe=q[ie+Te],Me=q[ie+se],(we!==re||we!==xe||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,re,xe,Me,m,y,_),Ie=ae[ie]=Q++),ie+=1,L+=$,ee=2;ee<M;++ee)C=w[L],we=q[ie]=h(C,m,y,_),re=q[ie+Se],xe=q[ie+Te],Me=q[ie+se],(we!==re||we!==xe||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,re,xe,Me,m,y,_),Ie=ae[ie]=Q++,Me!==xe&&c(ae[ie+Te],Ie,N,O,xe,Me,m,y,_)),ie+=1,L+=$;for(L+=Y,ie=0,Ee=Se,Se=ye,ye=Ee,Ee=Te,Te=he,he=Ee,Ee=se,se=de,de=Ee,X=2;X<S;++X){if(q[ie++]=h(w[L],m,y,_),L+=$,M>0)for(ee=1,C=w[L],we=q[ie]=h(C,m,y,_),re=q[ie+Se],xe=q[ie+Te],Me=q[ie+se],(we!==re||we!==xe||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,re,xe,Me,m,y,_),Ie=ae[ie]=Q++,Me!==re&&c(ae[ie+Se],Ie,O,R,Me,re,m,y,_)),ie+=1,L+=$,ee=2;ee<M;++ee)C=w[L],we=q[ie]=h(C,m,y,_),re=q[ie+Se],xe=q[ie+Te],Me=q[ie+se],(we!==re||we!==xe||we!==Me)&&(R=w[L+I],N=w[L+B],O=w[L+D],f(X,ee,C,R,N,O,we,re,xe,Me,m,y,_),Ie=ae[ie]=Q++,Me!==xe&&c(ae[ie+Te],Ie,N,O,xe,Me,m,y,_),Me!==re&&c(ae[ie+Se],Ie,O,R,Me,re,m,y,_)),ie+=1,L+=$;X&1&&(ie=0),Ee=Se,Se=ye,ye=Ee,Ee=Te,Te=he,he=Ee,Ee=se,se=de,de=Ee,L+=Y}}p(ae),p(q)}}};function s(u,f,c,h,v,p){var d=[p,v].join(","),g=i[d];return g(u,f,c,o.mallocUint32,o.freeUint32)}function l(u){function f(m){throw new Error("ndarray-extract-contour: "+m)}typeof u!="object"&&f("Must specify arguments");var c=u.order;Array.isArray(c)||f("Must specify order");var h=u.arrayArguments||1;h<1&&f("Must have at least one array argument");var v=u.scalarArguments||0;v<0&&f("Scalar arg count must be > 0"),typeof u.vertex!="function"&&f("Must specify vertex creation function"),typeof u.cell!="function"&&f("Must specify cell creation function"),typeof u.phase!="function"&&f("Must specify phase function");for(var p=u.getters||[],d=new Array(h),g=0;g<h;++g)p.indexOf(g)>=0?d[g]=!0:d[g]=!1;return s(u.vertex,u.cell,u.phase,v,c,d)}},{"typedarray-pool":308}],252:[function(r,a,n){var o=r("dup"),i={zero:function(y,_,S,M){var w=y[0],A=S[0];M|=0;var k=0,T=A;for(k=0;k<w;++k)_[M]=0,M+=T},fdTemplate1:function(y,_,S,M,w,A,k){var T=y[0],L=S[0],C=A[0],I=-1*L,R=L;M|=0,k|=0;var B=0,N=L,D=C;for(B=0;B<T;++B)w[k]=.5*(_[M+I]-_[M+R]),M+=N,k+=D},fdTemplate2:function(y,_,S,M,w,A,k,T,L,C){var I=y[0],R=y[1],B=S[0],N=S[1],D=A[0],O=A[1],$=L[0],Y=L[1],X=-1*B,ee=B,Q=-1*N,Z=N;M|=0,k|=0,C|=0;var q=0,ae=0,ie=N,we=B-R*N,Te=O,he=D-R*O,xe=Y,Se=$-R*Y;for(ae=0;ae<I;++ae){for(q=0;q<R;++q)w[k]=.5*(_[M+X]-_[M+ee]),T[C]=.5*(_[M+Q]-_[M+Z]),M+=ie,k+=Te,C+=xe;M+=we,k+=he,C+=Se}}},s={cdiff:function(y){var _={};return function(M,w,A){var k=M.dtype,T=M.order,L=w.dtype,C=w.order,I=A.dtype,R=A.order,B=[k,T.join(),L,C.join(),I,R.join()].join(),N=_[B];return N||(_[B]=N=y([k,T,L,C,I,R])),N(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,A.data,A.stride,A.offset|0)}},zero:function(y){var _={};return function(M){var w=M.dtype,A=M.order,k=[w,A.join()].join(),T=_[k];return T||(_[k]=T=y([w,A])),T(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(y){var _={};return function(M,w){var A=M.dtype,k=M.order,T=w.dtype,L=w.order,C=[A,k.join(),T,L.join()].join(),I=_[C];return I||(_[C]=I=y([A,k,T,L])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0)}},fdTemplate2:function(y){var _={};return function(M,w,A){var k=M.dtype,T=M.order,L=w.dtype,C=w.order,I=A.dtype,R=A.order,B=[k,T.join(),L,C.join(),I,R.join()].join(),N=_[B];return N||(_[B]=N=y([k,T,L,C,I,R])),N(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,A.data,A.stride,A.offset|0)}}};function l(y){var _=s[y.funcName];return _(u.bind(void 0,y))}function u(y){return i[y.funcName]}function f(y){return l({funcName:y.funcName})}var c={},h={},v=f({funcName:"cdiff"}),p=f({funcName:"zero"});function d(y){return y in c?c[y]:c[y]=f({funcName:"fdTemplate"+y})}function g(y,_,S,M){return function(w,A){var k=A.shape.slice();return k[0]>2&&k[1]>2&&M(A.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),w.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),w.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(S(A.pick(0,-1).lo(1).hi(k[1]-2),w.pick(0,-1,1).lo(1).hi(k[1]-2)),_(w.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(S(A.pick(k[0]-1,-1).lo(1).hi(k[1]-2),w.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),_(w.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(S(A.pick(-1,0).lo(1).hi(k[0]-2),w.pick(-1,0,0).lo(1).hi(k[0]-2)),_(w.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(S(A.pick(-1,k[1]-1).lo(1).hi(k[0]-2),w.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),_(w.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(k[0]-1,0,0,0),w.set(k[0]-1,0,1,0),w.set(0,k[1]-1,0,0),w.set(0,k[1]-1,1,0),w.set(k[0]-1,k[1]-1,0,0),w.set(k[0]-1,k[1]-1,1,0),w}}function m(y){var _=y.join(),S=h[_];if(S)return S;for(var M=y.length,w=[v,p],A=1;A<=M;++A)w.push(d(A));var k=g,S=k.apply(void 0,w);return h[_]=S,S}a.exports=function(_,S,M){if(Array.isArray(M)||(typeof M=="string"?M=o(S.dimension,M):M=o(S.dimension,"clamp")),S.size===0)return _;if(S.dimension===0)return _.set(0),_;var w=m(M);return w(_,S)}},{dup:65}],253:[function(r,a,n){function o(f,c){var h=Math.floor(c),v=c-h,p=0<=h&&h<f.shape[0],d=0<=h+1&&h+1<f.shape[0],g=p?+f.get(h):0,m=d?+f.get(h+1):0;return(1-v)*g+v*m}function i(f,c,h){var v=Math.floor(c),p=c-v,d=0<=v&&v<f.shape[0],g=0<=v+1&&v+1<f.shape[0],m=Math.floor(h),y=h-m,_=0<=m&&m<f.shape[1],S=0<=m+1&&m+1<f.shape[1],M=d&&_?f.get(v,m):0,w=d&&S?f.get(v,m+1):0,A=g&&_?f.get(v+1,m):0,k=g&&S?f.get(v+1,m+1):0;return(1-y)*((1-p)*M+p*A)+y*((1-p)*w+p*k)}function s(f,c,h,v){var p=Math.floor(c),d=c-p,g=0<=p&&p<f.shape[0],m=0<=p+1&&p+1<f.shape[0],y=Math.floor(h),_=h-y,S=0<=y&&y<f.shape[1],M=0<=y+1&&y+1<f.shape[1],w=Math.floor(v),A=v-w,k=0<=w&&w<f.shape[2],T=0<=w+1&&w+1<f.shape[2],L=g&&S&&k?f.get(p,y,w):0,C=g&&M&&k?f.get(p,y+1,w):0,I=m&&S&&k?f.get(p+1,y,w):0,R=m&&M&&k?f.get(p+1,y+1,w):0,B=g&&S&&T?f.get(p,y,w+1):0,N=g&&M&&T?f.get(p,y+1,w+1):0,D=m&&S&&T?f.get(p+1,y,w+1):0,O=m&&M&&T?f.get(p+1,y+1,w+1):0;return(1-A)*((1-_)*((1-d)*L+d*I)+_*((1-d)*C+d*R))+A*((1-_)*((1-d)*B+d*D)+_*((1-d)*N+d*O))}function l(f){var c=f.shape.length|0,h=new Array(c),v=new Array(c),p=new Array(c),d=new Array(c),g,m;for(g=0;g<c;++g)m=+arguments[g+1],h[g]=Math.floor(m),v[g]=m-h[g],p[g]=0<=h[g]&&h[g]<f.shape[g],d[g]=0<=h[g]+1&&h[g]+1<f.shape[g];var y=0,_,S,M;e:for(g=0;g<1<<c;++g){for(S=1,M=f.offset,_=0;_<c;++_)if(g&1<<_){if(!d[_])continue e;S*=v[_],M+=f.stride[_]*(h[_]+1)}else{if(!p[_])continue e;S*=1-v[_],M+=f.stride[_]*h[_]}y+=S*f.data[M]}return y}function u(f,c,h,v){switch(f.shape.length){case 0:return 0;case 1:return o(f,c);case 2:return i(f,c,h);case 3:return s(f,c,h,v);default:return l.apply(void 0,arguments)}}a.exports=u,a.exports.d1=o,a.exports.d2=i,a.exports.d3=s},{}],254:[function(r,a,n){var o={"float64,2,1,0":function(){return function(v,p,d,g,m){var y=v[0],_=v[1],S=v[2],M=d[0],w=d[1],A=d[2];g|=0;var k=0,T=0,L=0,C=A,I=w-S*A,R=M-_*w;for(L=0;L<y;++L){for(T=0;T<_;++T){for(k=0;k<S;++k)p[g]/=m,g+=C;g+=I}g+=R}}},"uint8,2,0,1,float64,2,1,0":function(){return function(v,p,d,g,m,y,_,S){var M=v[0],w=v[1],A=v[2],k=d[0],T=d[1],L=d[2],C=y[0],I=y[1],R=y[2];g|=0,_|=0;for(var B=g,N=_,D=v[0]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var O=v[1]|0;O>0;){O<64?(w=O,O=0):(w=64,O-=64),g=B+D*k+O*T,_=N+D*C+O*I;var $=0,Y=0,X=0,ee=L,Q=k-A*L,Z=T-M*k,q=R,ae=C-A*R,ie=I-M*C;for(X=0;X<w;++X){for(Y=0;Y<M;++Y){for($=0;$<A;++$)p[g]=m[_]*S,g+=ee,_+=q;g+=Q,_+=ae}g+=Z,_+=ie}}}}},"float32,1,0,float32,1,0":function(){return function(v,p,d,g,m,y,_){var S=v[0],M=v[1],w=d[0],A=d[1],k=y[0],T=y[1];g|=0,_|=0;var L=0,C=0,I=A,R=w-M*A,B=T,N=k-M*T;for(C=0;C<S;++C){for(L=0;L<M;++L)p[g]=m[_],g+=I,_+=B;g+=R,_+=N}}},"float32,1,0,float32,0,1":function(){return function(v,p,d,g,m,y,_){var S=v[0],M=v[1],w=d[0],A=d[1],k=y[0],T=y[1];g|=0,_|=0;for(var L=g,C=_,I=v[1]|0;I>0;){I<64?(M=I,I=0):(M=64,I-=64);for(var R=v[0]|0;R>0;){R<64?(S=R,R=0):(S=64,R-=64),g=L+I*A+R*w,_=C+I*T+R*k;var B=0,N=0,D=A,O=w-M*A,$=T,Y=k-M*T;for(N=0;N<S;++N){for(B=0;B<M;++B)p[g]=m[_],g+=D,_+=$;g+=O,_+=Y}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(v,p,d,g,m,y,_){var S=v[0],M=v[1],w=v[2],A=d[0],k=d[1],T=d[2],L=y[0],C=y[1],I=y[2];g|=0,_|=0;for(var R=g,B=_,N=v[2]|0;N>0;){N<64?(w=N,N=0):(w=64,N-=64);for(var D=v[0]|0;D>0;){D<64?(S=D,D=0):(S=64,D-=64);for(var O=v[1]|0;O>0;){O<64?(M=O,O=0):(M=64,O-=64),g=R+N*T+D*A+O*k,_=B+N*I+D*L+O*C;var $=0,Y=0,X=0,ee=T,Q=A-w*T,Z=k-S*A,q=I,ae=L-w*I,ie=C-S*L;for(X=0;X<M;++X){for(Y=0;Y<S;++Y){for($=0;$<w;++$)p[g]=m[_],g+=ee,_+=q;g+=Q,_+=ae}g+=Z,_+=ie}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(v,p,d,g,m,y,_){var S=v[0],M=v[1],w=v[2],A=d[0],k=d[1],T=d[2],L=y[0],C=y[1],I=y[2];g|=0,_|=0;var R=0,B=0,N=0,D=T,O=A-w*T,$=k-S*A,Y=I,X=L-w*I,ee=C-S*L;for(N=0;N<M;++N){for(B=0;B<S;++B){for(R=0;R<w;++R)p[g]=m[_],g+=D,_+=Y;g+=O,_+=X}g+=$,_+=ee}}}};function i(h,v){var p=v.join(","),d=o[p];return d()}var s=i,l={mul:function(h){var v={};return function(d,g,m){var y=d.dtype,_=d.order,S=g.dtype,M=g.order,w=m.dtype,A=m.order,k=[y,_.join(),S,M.join(),w,A.join()].join(),T=v[k];return T||(v[k]=T=h([y,_,S,M,w,A])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,g.data,g.stride,g.offset|0,m.data,m.stride,m.offset|0)}},muls:function(h){var v={};return function(d,g,m){var y=d.dtype,_=d.order,S=g.dtype,M=g.order,w=[y,_.join(),S,M.join()].join(),A=v[w];return A||(v[w]=A=h([y,_,S,M])),A(d.shape.slice(0),d.data,d.stride,d.offset|0,g.data,g.stride,g.offset|0,m)}},mulseq:function(h){var v={};return function(d,g){var m=d.dtype,y=d.order,_=[m,y.join()].join(),S=v[_];return S||(v[_]=S=h([m,y])),S(d.shape.slice(0),d.data,d.stride,d.offset|0,g)}},div:function(h){var v={};return function(d,g,m){var y=d.dtype,_=d.order,S=g.dtype,M=g.order,w=m.dtype,A=m.order,k=[y,_.join(),S,M.join(),w,A.join()].join(),T=v[k];return T||(v[k]=T=h([y,_,S,M,w,A])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,g.data,g.stride,g.offset|0,m.data,m.stride,m.offset|0)}},divs:function(h){var v={};return function(d,g,m){var y=d.dtype,_=d.order,S=g.dtype,M=g.order,w=[y,_.join(),S,M.join()].join(),A=v[w];return A||(v[w]=A=h([y,_,S,M])),A(d.shape.slice(0),d.data,d.stride,d.offset|0,g.data,g.stride,g.offset|0,m)}},divseq:function(h){var v={};return function(d,g){var m=d.dtype,y=d.order,_=[m,y.join()].join(),S=v[_];return S||(v[_]=S=h([m,y])),S(d.shape.slice(0),d.data,d.stride,d.offset|0,g)}},assign:function(h){var v={};return function(d,g){var m=d.dtype,y=d.order,_=g.dtype,S=g.order,M=[m,y.join(),_,S.join()].join(),w=v[M];return w||(v[M]=w=h([m,y,_,S])),w(d.shape.slice(0),d.data,d.stride,d.offset|0,g.data,g.stride,g.offset|0)}}};function u(h){var v=l[h.funcName];return v(s.bind(void 0,h))}function f(h){return u({funcName:h.funcName})}var c={mul:"*",div:"/"};(function(){for(var h in c)n[h]=f({funcName:h}),n[h+"s"]=f({funcName:h+"s"}),n[h+"seq"]=f({funcName:h+"seq"})})(),n.assign=f({funcName:"assign"})},{}],255:[function(r,a,n){var o=r("ndarray"),i=r("./doConvert.js");a.exports=function(l,u){for(var f=[],c=l,h=1;Array.isArray(c);)f.push(c.length),h*=c.length,c=c[0];return f.length===0?o():(u||(u=o(new Float64Array(h),f)),i(u,l),u)}},{"./doConvert.js":256,ndarray:259}],256:[function(r,a,n){function o(){return function(c,h,v,p,d){var g=c[0],m=c[1],y=c[2],_=v[0],S=v[1],M=v[2],w=[0,0,0];p|=0;var A=0,k=0,T=0,L=M,C=S-y*M,I=_-m*S;for(T=0;T<g;++T){for(k=0;k<m;++k){for(A=0;A<y;++A){{var R=d,B;for(B=0;B<w.length-1;++B)R=R[w[B]];h[p]=R[w[w.length-1]]}p+=L,++w[2]}p+=C,w[2]-=y,++w[1]}p+=I,w[1]-=m,++w[0]}}}function i(){return o()}var s=i;function l(c){var h={};return function(p,d){var g=p.dtype,m=p.order,y=[g,m.join()].join(),_=h[y];return _||(h[y]=_=c([g,m])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,d)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}a.exports=f({funcName:"convert"})},{}],257:[function(r,a,n){var o=r("typedarray-pool");function i(v){switch(v){case"uint32":return[o.mallocUint32,o.freeUint32];default:return null}}var s={"uint32,1,0":function(v,p){return function(g,m,y,_,S,M,w,A,k,T,L){var C,I,R,B=g*S+_,N,D=v(A),O,$,Y,X;for(C=g+1;C<=m;++C){for(I=C,B+=S,R=B,O=0,$=B,N=0;N<A;++N)D[O++]=y[$],$+=k;e:for(;I-- >g;){O=0,$=R-S;t:for(N=0;N<A;++N){if(Y=y[$],X=D[O],Y<X)break e;if(Y>X)break t;$+=T,O+=L}for(O=R,$=R-S,N=0;N<A;++N)y[O]=y[$],O+=k,$+=k;R-=S}for(O=R,$=0,N=0;N<A;++N)y[O]=D[$++],O+=k}p(D)}}};function l(v,p){var d=i(p),g=[p,v].join(","),m=s[g];return d?m(d[0],d[1]):m()}var u={"uint32,1,0":function(v,p,d){return function g(m,y,_,S,M,w,A,k,T,L,C){var I=(y-m+1)/6|0,R=m+I,B=y-I,N=m+y>>1,D=N-I,O=N+I,$=R,Y=D,X=N,ee=O,Q=B,Z=m+1,q=y-1,ae=!0,ie,we,Te,he,xe,Se,ye,re,se,de=0,Me=0,Ie=0,Ee,qe,be,oe,ce,ue,Re,Xe,Ke,vt,Ze,Qe,Je,je,$e,Ye,yt=k,_t=p(yt),Pt=p(yt);qe=M*$,be=M*Y,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=$,$=Y,Y=we;break e}if(Ie<0)break e;Ye+=L}qe=M*ee,be=M*Q,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=ee,ee=Q,Q=we;break e}if(Ie<0)break e;Ye+=L}qe=M*$,be=M*X,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=$,$=X,X=we;break e}if(Ie<0)break e;Ye+=L}qe=M*Y,be=M*X,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=Y,Y=X,X=we;break e}if(Ie<0)break e;Ye+=L}qe=M*$,be=M*ee,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=$,$=ee,ee=we;break e}if(Ie<0)break e;Ye+=L}qe=M*X,be=M*ee,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=X,X=ee,ee=we;break e}if(Ie<0)break e;Ye+=L}qe=M*Y,be=M*Q,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=Y,Y=Q,Q=we;break e}if(Ie<0)break e;Ye+=L}qe=M*Y,be=M*X,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=Y,Y=X,X=we;break e}if(Ie<0)break e;Ye+=L}qe=M*ee,be=M*Q,Ye=S;e:for(Ee=0;Ee<k;++Ee){if(ye=qe+Ye,re=be+Ye,Ie=_[ye]-_[re],Ie>0){we=ee,ee=Q,Q=we;break e}if(Ie<0)break e;Ye+=L}for(qe=M*$,be=M*Y,oe=M*X,ce=M*ee,ue=M*Q,Re=M*R,Xe=M*N,Ke=M*B,$e=0,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,se=oe+Ye,vt=ce+Ye,Ze=ue+Ye,Qe=Re+Ye,Je=Xe+Ye,je=Ke+Ye,_t[$e]=_[re],Pt[$e]=_[vt],ae=ae&&_t[$e]===Pt[$e],Te=_[ye],he=_[se],xe=_[Ze],_[Qe]=Te,_[Je]=he,_[je]=xe,++$e,Ye+=T;for(qe=M*D,be=M*m,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,_[ye]=_[re],Ye+=T;for(qe=M*O,be=M*y,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,_[ye]=_[re],Ye+=T;if(ae)for(Se=Z;Se<=q;++Se){ye=S+Se*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-_t[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie!==0)if(Ie<0){if(Se!==Z)for(qe=M*Se,be=M*Z,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;++Z}else for(;;){ye=S+q*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-_t[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie>0)q--;else if(Ie<0){for(qe=M*Se,be=M*Z,oe=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,se=oe+Ye,ie=_[ye],_[ye]=_[re],_[re]=_[se],_[se]=ie,Ye+=T;++Z,--q;break}else{for(qe=M*Se,be=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;--q;break}}}else for(Se=Z;Se<=q;++Se){ye=S+Se*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(de=_[ye]-_t[$e],de!==0)break e;$e+=C,ye+=L}if(de<0){if(Se!==Z)for(qe=M*Se,be=M*Z,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;++Z}else{ye=S+Se*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Me=_[ye]-Pt[$e],Me!==0)break e;$e+=C,ye+=L}if(Me>0)for(;;){ye=S+q*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-Pt[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie>0){if(--q<Se)break;continue}else{ye=S+q*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-_t[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie<0){for(qe=M*Se,be=M*Z,oe=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,se=oe+Ye,ie=_[ye],_[ye]=_[re],_[re]=_[se],_[se]=ie,Ye+=T;++Z,--q}else{for(qe=M*Se,be=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;--q}break}}}}for(qe=M*m,be=M*(Z-1),$e=0,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,_[ye]=_[re],_[re]=_t[$e],++$e,Ye+=T;for(qe=M*y,be=M*(q+1),$e=0,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,_[ye]=_[re],_[re]=Pt[$e],++$e,Ye+=T;if(Z-2-m<=32?v(m,Z-2,_,S,M,w,A,k,T,L,C):g(m,Z-2,_,S,M,w,A,k,T,L,C),y-(q+2)<=32?v(q+2,y,_,S,M,w,A,k,T,L,C):g(q+2,y,_,S,M,w,A,k,T,L,C),ae){d(_t),d(Pt);return}if(Z<R&&q>B){e:for(;;){for(ye=S+Z*M,$e=0,Ye=S,Ee=0;Ee<k;++Ee){if(_[ye]!==_t[$e])break e;++$e,ye+=T}++Z}e:for(;;){for(ye=S+q*M,$e=0,Ye=S,Ee=0;Ee<k;++Ee){if(_[ye]!==Pt[$e])break e;++$e,ye+=T}--q}for(Se=Z;Se<=q;++Se){ye=S+Se*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(de=_[ye]-_t[$e],de!==0)break e;$e+=C,ye+=L}if(de===0){if(Se!==Z)for(qe=M*Se,be=M*Z,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;++Z}else{ye=S+Se*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Me=_[ye]-Pt[$e],Me!==0)break e;$e+=C,ye+=L}if(Me===0)for(;;){ye=S+q*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-Pt[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie===0){if(--q<Se)break;continue}else{ye=S+q*M,$e=0;e:for(Ee=0;Ee<k;++Ee){if(Ie=_[ye]-_t[$e],Ie!==0)break e;$e+=C,ye+=L}if(Ie<0){for(qe=M*Se,be=M*Z,oe=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,se=oe+Ye,ie=_[ye],_[ye]=_[re],_[re]=_[se],_[se]=ie,Ye+=T;++Z,--q}else{for(qe=M*Se,be=M*q,Ye=S,Ee=0;Ee<k;++Ee)ye=qe+Ye,re=be+Ye,ie=_[ye],_[ye]=_[re],_[re]=ie,Ye+=T;--q}break}}}}}d(_t),d(Pt),q-Z<=32?v(Z,q,_,S,M,w,A,k,T,L,C):g(Z,q,_,S,M,w,A,k,T,L,C)}}};function f(v,p,d){var g=i(p),m=[p,v].join(","),y=u[m];return v.length>1&&g?y(d,g[0],g[1]):y(d)}var c={"uint32,1,0":function(v,p){return function(d){var g=d.data,m=d.offset|0,y=d.shape,_=d.stride,S=_[0]|0,M=y[0]|0,w=_[1]|0,A=y[1]|0,k=w,T=w,L=1;M<=32?v(0,M-1,g,m,S,w,M,A,k,T,L):p(0,M-1,g,m,S,w,M,A,k,T,L)}}};function h(v,p){var d=[p,v].join(","),g=c[d],m=l(v,p),y=f(v,p,m);return g(m,y)}a.exports=h},{"typedarray-pool":308}],258:[function(r,a,n){var o=r("./lib/compile_sort.js"),i={};function s(l){var u=l.order,f=l.dtype,c=[u,f],h=c.join(":"),v=i[h];return v||(i[h]=v=o(u,f)),v(l),l}a.exports=s},{"./lib/compile_sort.js":257}],259:[function(r,a,n){var o=r("is-buffer"),i=typeof Float64Array!="undefined";function s(p,d){return p[0]-d[0]}function l(){var p=this.stride,d=new Array(p.length),g;for(g=0;g<d.length;++g)d[g]=[Math.abs(p[g]),g];d.sort(s);var m=new Array(d.length);for(g=0;g<m.length;++g)m[g]=d[g][1];return m}var u={T:function(p){function d(m){this.data=m}var g=d.prototype;return g.dtype=p,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new d(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(y){return new d(y)}},0:function(p,d){function g(y,_){this.data=y,this.offset=_}var m=g.prototype;return m.dtype=p,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new g(this.data,this.offset)},m.pick=function(){return d(this.data)},m.valueOf=m.get=function(){return p==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(_){return p==="generic"?this.data.set(this.offset,_):this.data[this.offset]=_},function(_,S,M,w){return new g(_,w)}},1:function(p,d,g){function m(_,S,M,w){this.data=_,this.shape=[S],this.stride=[M],this.offset=w|0}var y=m.prototype;return y.dtype=p,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(S,M){return p==="generic"?this.data.set(this.offset+this.stride[0]*S,M):this.data[this.offset+this.stride[0]*S]=M},y.get=function(S){return p==="generic"?this.data.get(this.offset+this.stride[0]*S):this.data[this.offset+this.stride[0]*S]},y.index=function(S){return this.offset+this.stride[0]*S},y.hi=function(S){return new m(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,this.stride[0],this.offset)},y.lo=function(S){var M=this.offset,w=0,A=this.shape[0],k=this.stride[0];return typeof S=="number"&&S>=0&&(w=S|0,M+=k*w,A-=w),new m(this.data,A,k,M)},y.step=function(S){var M=this.shape[0],w=this.stride[0],A=this.offset,k=0,T=Math.ceil;return typeof S=="number"&&(k=S|0,k<0?(A+=w*(M-1),M=T(-M/k)):M=T(M/k),w*=k),new m(this.data,M,w,A)},y.transpose=function(S){S=S===void 0?0:S|0;var M=this.shape,w=this.stride;return new m(this.data,M[S],w[S],this.offset)},y.pick=function(S){var M=[],w=[],A=this.offset;typeof S=="number"&&S>=0?A=A+this.stride[0]*S|0:(M.push(this.shape[0]),w.push(this.stride[0]));var k=d[M.length+1];return k(this.data,M,w,A)},function(S,M,w,A){return new m(S,M[0],w[0],A)}},2:function(p,d,g){function m(_,S,M,w,A,k){this.data=_,this.shape=[S,M],this.stride=[w,A],this.offset=k|0}var y=m.prototype;return y.dtype=p,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(S,M,w){return p==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*M,w):this.data[this.offset+this.stride[0]*S+this.stride[1]*M]=w},y.get=function(S,M){return p==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*M):this.data[this.offset+this.stride[0]*S+this.stride[1]*M]},y.index=function(S,M){return this.offset+this.stride[0]*S+this.stride[1]*M},y.hi=function(S,M){return new m(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},y.lo=function(S,M){var w=this.offset,A=0,k=this.shape[0],T=this.shape[1],L=this.stride[0],C=this.stride[1];return typeof S=="number"&&S>=0&&(A=S|0,w+=L*A,k-=A),typeof M=="number"&&M>=0&&(A=M|0,w+=C*A,T-=A),new m(this.data,k,T,L,C,w)},y.step=function(S,M){var w=this.shape[0],A=this.shape[1],k=this.stride[0],T=this.stride[1],L=this.offset,C=0,I=Math.ceil;return typeof S=="number"&&(C=S|0,C<0?(L+=k*(w-1),w=I(-w/C)):w=I(w/C),k*=C),typeof M=="number"&&(C=M|0,C<0?(L+=T*(A-1),A=I(-A/C)):A=I(A/C),T*=C),new m(this.data,w,A,k,T,L)},y.transpose=function(S,M){S=S===void 0?0:S|0,M=M===void 0?1:M|0;var w=this.shape,A=this.stride;return new m(this.data,w[S],w[M],A[S],A[M],this.offset)},y.pick=function(S,M){var w=[],A=[],k=this.offset;typeof S=="number"&&S>=0?k=k+this.stride[0]*S|0:(w.push(this.shape[0]),A.push(this.stride[0])),typeof M=="number"&&M>=0?k=k+this.stride[1]*M|0:(w.push(this.shape[1]),A.push(this.stride[1]));var T=d[w.length+1];return T(this.data,w,A,k)},function(S,M,w,A){return new m(S,M[0],M[1],w[0],w[1],A)}},3:function(p,d,g){function m(_,S,M,w,A,k,T,L){this.data=_,this.shape=[S,M,w],this.stride=[A,k,T],this.offset=L|0}var y=m.prototype;return y.dtype=p,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var S=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return S>M?M>w?[2,1,0]:S>w?[1,2,0]:[1,0,2]:S>w?[2,0,1]:w>M?[0,1,2]:[0,2,1]}}),y.set=function(S,M,w,A){return p==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w,A):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w]=A},y.get=function(S,M,w){return p==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w]},y.index=function(S,M,w){return this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w},y.hi=function(S,M,w){return new m(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(S,M,w){var A=this.offset,k=0,T=this.shape[0],L=this.shape[1],C=this.shape[2],I=this.stride[0],R=this.stride[1],B=this.stride[2];return typeof S=="number"&&S>=0&&(k=S|0,A+=I*k,T-=k),typeof M=="number"&&M>=0&&(k=M|0,A+=R*k,L-=k),typeof w=="number"&&w>=0&&(k=w|0,A+=B*k,C-=k),new m(this.data,T,L,C,I,R,B,A)},y.step=function(S,M,w){var A=this.shape[0],k=this.shape[1],T=this.shape[2],L=this.stride[0],C=this.stride[1],I=this.stride[2],R=this.offset,B=0,N=Math.ceil;return typeof S=="number"&&(B=S|0,B<0?(R+=L*(A-1),A=N(-A/B)):A=N(A/B),L*=B),typeof M=="number"&&(B=M|0,B<0?(R+=C*(k-1),k=N(-k/B)):k=N(k/B),C*=B),typeof w=="number"&&(B=w|0,B<0?(R+=I*(T-1),T=N(-T/B)):T=N(T/B),I*=B),new m(this.data,A,k,T,L,C,I,R)},y.transpose=function(S,M,w){S=S===void 0?0:S|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0;var A=this.shape,k=this.stride;return new m(this.data,A[S],A[M],A[w],k[S],k[M],k[w],this.offset)},y.pick=function(S,M,w){var A=[],k=[],T=this.offset;typeof S=="number"&&S>=0?T=T+this.stride[0]*S|0:(A.push(this.shape[0]),k.push(this.stride[0])),typeof M=="number"&&M>=0?T=T+this.stride[1]*M|0:(A.push(this.shape[1]),k.push(this.stride[1])),typeof w=="number"&&w>=0?T=T+this.stride[2]*w|0:(A.push(this.shape[2]),k.push(this.stride[2]));var L=d[A.length+1];return L(this.data,A,k,T)},function(S,M,w,A){return new m(S,M[0],M[1],M[2],w[0],w[1],w[2],A)}},4:function(p,d,g){function m(_,S,M,w,A,k,T,L,C,I){this.data=_,this.shape=[S,M,w,A],this.stride=[k,T,L,C],this.offset=I|0}var y=m.prototype;return y.dtype=p,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:g}),y.set=function(S,M,w,A,k){return p==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w+this.stride[3]*A,k):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w+this.stride[3]*A]=k},y.get=function(S,M,w,A){return p==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w+this.stride[3]*A):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w+this.stride[3]*A]},y.index=function(S,M,w,A){return this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*w+this.stride[3]*A},y.hi=function(S,M,w,A){return new m(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof A!="number"||A<0?this.shape[3]:A|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(S,M,w,A){var k=this.offset,T=0,L=this.shape[0],C=this.shape[1],I=this.shape[2],R=this.shape[3],B=this.stride[0],N=this.stride[1],D=this.stride[2],O=this.stride[3];return typeof S=="number"&&S>=0&&(T=S|0,k+=B*T,L-=T),typeof M=="number"&&M>=0&&(T=M|0,k+=N*T,C-=T),typeof w=="number"&&w>=0&&(T=w|0,k+=D*T,I-=T),typeof A=="number"&&A>=0&&(T=A|0,k+=O*T,R-=T),new m(this.data,L,C,I,R,B,N,D,O,k)},y.step=function(S,M,w,A){var k=this.shape[0],T=this.shape[1],L=this.shape[2],C=this.shape[3],I=this.stride[0],R=this.stride[1],B=this.stride[2],N=this.stride[3],D=this.offset,O=0,$=Math.ceil;return typeof S=="number"&&(O=S|0,O<0?(D+=I*(k-1),k=$(-k/O)):k=$(k/O),I*=O),typeof M=="number"&&(O=M|0,O<0?(D+=R*(T-1),T=$(-T/O)):T=$(T/O),R*=O),typeof w=="number"&&(O=w|0,O<0?(D+=B*(L-1),L=$(-L/O)):L=$(L/O),B*=O),typeof A=="number"&&(O=A|0,O<0?(D+=N*(C-1),C=$(-C/O)):C=$(C/O),N*=O),new m(this.data,k,T,L,C,I,R,B,N,D)},y.transpose=function(S,M,w,A){S=S===void 0?0:S|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0,A=A===void 0?3:A|0;var k=this.shape,T=this.stride;return new m(this.data,k[S],k[M],k[w],k[A],T[S],T[M],T[w],T[A],this.offset)},y.pick=function(S,M,w,A){var k=[],T=[],L=this.offset;typeof S=="number"&&S>=0?L=L+this.stride[0]*S|0:(k.push(this.shape[0]),T.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(k.push(this.shape[1]),T.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(k.push(this.shape[2]),T.push(this.stride[2])),typeof A=="number"&&A>=0?L=L+this.stride[3]*A|0:(k.push(this.shape[3]),T.push(this.stride[3]));var C=d[k.length+1];return C(this.data,k,T,L)},function(S,M,w,A){return new m(S,M[0],M[1],M[2],M[3],w[0],w[1],w[2],w[3],A)}},5:function(d,g,m){function y(S,M,w,A,k,T,L,C,I,R,B,N){this.data=S,this.shape=[M,w,A,k,T],this.stride=[L,C,I,R,B],this.offset=N|0}var _=y.prototype;return _.dtype=d,_.dimension=5,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(_,"order",{get:m}),_.set=function(M,w,A,k,T,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*A+this.stride[3]*k+this.stride[4]*T,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*A+this.stride[3]*k+this.stride[4]*T]=L},_.get=function(M,w,A,k,T){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*A+this.stride[3]*k+this.stride[4]*T):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*A+this.stride[3]*k+this.stride[4]*T]},_.index=function(M,w,A,k,T){return this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*A+this.stride[3]*k+this.stride[4]*T},_.hi=function(M,w,A,k,T){return new y(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof A!="number"||A<0?this.shape[2]:A|0,typeof k!="number"||k<0?this.shape[3]:k|0,typeof T!="number"||T<0?this.shape[4]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},_.lo=function(M,w,A,k,T){var L=this.offset,C=0,I=this.shape[0],R=this.shape[1],B=this.shape[2],N=this.shape[3],D=this.shape[4],O=this.stride[0],$=this.stride[1],Y=this.stride[2],X=this.stride[3],ee=this.stride[4];return typeof M=="number"&&M>=0&&(C=M|0,L+=O*C,I-=C),typeof w=="number"&&w>=0&&(C=w|0,L+=$*C,R-=C),typeof A=="number"&&A>=0&&(C=A|0,L+=Y*C,B-=C),typeof k=="number"&&k>=0&&(C=k|0,L+=X*C,N-=C),typeof T=="number"&&T>=0&&(C=T|0,L+=ee*C,D-=C),new y(this.data,I,R,B,N,D,O,$,Y,X,ee,L)},_.step=function(M,w,A,k,T){var L=this.shape[0],C=this.shape[1],I=this.shape[2],R=this.shape[3],B=this.shape[4],N=this.stride[0],D=this.stride[1],O=this.stride[2],$=this.stride[3],Y=this.stride[4],X=this.offset,ee=0,Q=Math.ceil;return typeof M=="number"&&(ee=M|0,ee<0?(X+=N*(L-1),L=Q(-L/ee)):L=Q(L/ee),N*=ee),typeof w=="number"&&(ee=w|0,ee<0?(X+=D*(C-1),C=Q(-C/ee)):C=Q(C/ee),D*=ee),typeof A=="number"&&(ee=A|0,ee<0?(X+=O*(I-1),I=Q(-I/ee)):I=Q(I/ee),O*=ee),typeof k=="number"&&(ee=k|0,ee<0?(X+=$*(R-1),R=Q(-R/ee)):R=Q(R/ee),$*=ee),typeof T=="number"&&(ee=T|0,ee<0?(X+=Y*(B-1),B=Q(-B/ee)):B=Q(B/ee),Y*=ee),new y(this.data,L,C,I,R,B,N,D,O,$,Y,X)},_.transpose=function(M,w,A,k,T){M=M===void 0?0:M|0,w=w===void 0?1:w|0,A=A===void 0?2:A|0,k=k===void 0?3:k|0,T=T===void 0?4:T|0;var L=this.shape,C=this.stride;return new y(this.data,L[M],L[w],L[A],L[k],L[T],C[M],C[w],C[A],C[k],C[T],this.offset)},_.pick=function(M,w,A,k,T){var L=[],C=[],I=this.offset;typeof M=="number"&&M>=0?I=I+this.stride[0]*M|0:(L.push(this.shape[0]),C.push(this.stride[0])),typeof w=="number"&&w>=0?I=I+this.stride[1]*w|0:(L.push(this.shape[1]),C.push(this.stride[1])),typeof A=="number"&&A>=0?I=I+this.stride[2]*A|0:(L.push(this.shape[2]),C.push(this.stride[2])),typeof k=="number"&&k>=0?I=I+this.stride[3]*k|0:(L.push(this.shape[3]),C.push(this.stride[3])),typeof T=="number"&&T>=0?I=I+this.stride[4]*T|0:(L.push(this.shape[4]),C.push(this.stride[4]));var R=g[L.length+1];return R(this.data,L,C,I)},function(M,w,A,k){return new y(M,w[0],w[1],w[2],w[3],w[4],A[0],A[1],A[2],A[3],A[4],k)}}};function f(p,d){var g=d===-1?"T":String(d),m=u[g];return d===-1?m(p):d===0?m(p,h[p][0]):m(p,h[p],l)}function c(p){if(o(p))return"buffer";if(i)switch(Object.prototype.toString.call(p)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function v(p,d,g,m){if(p===void 0){var A=h.array[0];return A([])}else typeof p=="number"&&(p=[p]);d===void 0&&(d=[p.length]);var y=d.length;if(g===void 0){g=new Array(y);for(var _=y-1,S=1;_>=0;--_)g[_]=S,S*=d[_]}if(m===void 0){m=0;for(var _=0;_<y;++_)g[_]<0&&(m-=(d[_]-1)*g[_])}for(var M=c(p),w=h[M];w.length<=y+1;)w.push(f(M,w.length-1));var A=w[y+1];return A(p,d,g,m)}a.exports=v},{"is-buffer":237}],260:[function(r,a,n){var o=r("double-bits"),i=Math.pow(2,-1074),s=-1>>>0;a.exports=l;function l(u,f){if(isNaN(u)||isNaN(f))return NaN;if(u===f)return u;if(u===0)return f<0?-i:i;var c=o.hi(u),h=o.lo(u);return f>u==u>0?h===s?(c+=1,h=0):h+=1:h===0?(h=s,c-=1):h-=1,o.pack(h,c)}},{"double-bits":64}],261:[function(r,a,n){var o=1e-6,i=1e-6;n.vertexNormals=function(s,l,u){for(var f=l.length,c=new Array(f),h=u===void 0?o:u,v=0;v<f;++v)c[v]=[0,0,0];for(var v=0;v<s.length;++v)for(var p=s[v],d=0,g=p[p.length-1],m=p[0],y=0;y<p.length;++y){d=g,g=m,m=p[(y+1)%p.length];for(var _=l[d],S=l[g],M=l[m],w=new Array(3),A=0,k=new Array(3),T=0,L=0;L<3;++L)w[L]=_[L]-S[L],A+=w[L]*w[L],k[L]=M[L]-S[L],T+=k[L]*k[L];if(A*T>h)for(var C=c[g],I=1/Math.sqrt(A*T),L=0;L<3;++L){var R=(L+1)%3,B=(L+2)%3;C[L]+=I*(k[R]*w[B]-k[B]*w[R])}}for(var v=0;v<f;++v){for(var C=c[v],N=0,L=0;L<3;++L)N+=C[L]*C[L];if(N>h)for(var I=1/Math.sqrt(N),L=0;L<3;++L)C[L]*=I;else for(var L=0;L<3;++L)C[L]=0}return c},n.faceNormals=function(s,l,u){for(var f=s.length,c=new Array(f),h=u===void 0?i:u,v=0;v<f;++v){for(var p=s[v],d=new Array(3),g=0;g<3;++g)d[g]=l[p[g]];for(var m=new Array(3),y=new Array(3),g=0;g<3;++g)m[g]=d[1][g]-d[0][g],y[g]=d[2][g]-d[0][g];for(var _=new Array(3),S=0,g=0;g<3;++g){var M=(g+1)%3,w=(g+2)%3;_[g]=m[M]*y[w]-m[w]*y[M],S+=_[g]*_[g]}S>h?S=1/Math.sqrt(S):S=0;for(var g=0;g<3;++g)_[g]*=S;c[v]=_}return c}},{}],262:[function(r,a,n){a.exports=o;function o(i,s,l,u,f,c,h,v,p,d){var g=s+c+d;if(m>0){var m=Math.sqrt(g+1);i[0]=.5*(h-p)/m,i[1]=.5*(v-u)/m,i[2]=.5*(l-c)/m,i[3]=.5*m}else{var y=Math.max(s,c,d),m=Math.sqrt(2*y-g+1);s>=y?(i[0]=.5*m,i[1]=.5*(f+l)/m,i[2]=.5*(v+u)/m,i[3]=.5*(h-p)/m):c>=y?(i[0]=.5*(l+f)/m,i[1]=.5*m,i[2]=.5*(p+h)/m,i[3]=.5*(v-u)/m):(i[0]=.5*(u+v)/m,i[1]=.5*(h+p)/m,i[2]=.5*m,i[3]=.5*(l-f)/m)}return i}},{}],263:[function(r,a,n){a.exports=d;var o=r("filtered-vector"),i=r("gl-mat4/lookAt"),s=r("gl-mat4/fromQuat"),l=r("gl-mat4/invert"),u=r("./lib/quatFromFrame");function f(g,m,y){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(y,2))}function c(g,m,y,_){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(y,2)+Math.pow(_,2))}function h(g,m){var y=m[0],_=m[1],S=m[2],M=m[3],w=c(y,_,S,M);w>1e-6?(g[0]=y/w,g[1]=_/w,g[2]=S/w,g[3]=M/w):(g[0]=g[1]=g[2]=0,g[3]=1)}function v(g,m,y){this.radius=o([y]),this.center=o(m),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=v.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var m=this.computedRotation;h(m,m);var y=this.computedMatrix;s(y,m);var _=this.computedCenter,S=this.computedEye,M=this.computedUp,w=Math.exp(this.computedRadius[0]);S[0]=_[0]+w*y[2],S[1]=_[1]+w*y[6],S[2]=_[2]+w*y[10],M[0]=y[1],M[1]=y[5],M[2]=y[9];for(var A=0;A<3;++A){for(var k=0,T=0;T<3;++T)k+=y[A+4*T]*S[T];y[12+A]=-k}},p.getMatrix=function(g,m){this.recalcMatrix(g);var y=this.computedMatrix;if(m){for(var _=0;_<16;++_)m[_]=y[_];return m}return y},p.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},p.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},p.pan=function(g,m,y,_){m=m||0,y=y||0,_=_||0,this.recalcMatrix(g);var S=this.computedMatrix,M=S[1],w=S[5],A=S[9],k=f(M,w,A);M/=k,w/=k,A/=k;var T=S[0],L=S[4],C=S[8],I=T*M+L*w+C*A;T-=M*I,L-=w*I,C-=A*I;var R=f(T,L,C);T/=R,L/=R,C/=R,S[2],S[6],S[10];var B=T*m+M*y,N=L*m+w*y,D=C*m+A*y;this.center.move(g,B,N,D);var O=Math.exp(this.computedRadius[0]);O=Math.max(1e-4,O+_),this.radius.set(g,Math.log(O))},p.rotate=function(g,m,y,_){this.recalcMatrix(g),m=m||0,y=y||0;var S=this.computedMatrix,M=S[0],w=S[4],A=S[8],k=S[1],T=S[5],L=S[9],C=S[2],I=S[6],R=S[10],B=m*M+y*k,N=m*w+y*T,D=m*A+y*L,O=-(I*D-R*N),$=-(R*B-C*D),Y=-(C*N-I*B),X=Math.sqrt(Math.max(0,1-Math.pow(O,2)-Math.pow($,2)-Math.pow(Y,2))),ee=c(O,$,Y,X);ee>1e-6?(O/=ee,$/=ee,Y/=ee,X/=ee):(O=$=Y=0,X=1);var Q=this.computedRotation,Z=Q[0],q=Q[1],ae=Q[2],ie=Q[3],we=Z*X+ie*O+q*Y-ae*$,Te=q*X+ie*$+ae*O-Z*Y,he=ae*X+ie*Y+Z*$-q*O,xe=ie*X-Z*O-q*$-ae*Y;if(_){O=C,$=I,Y=R;var Se=Math.sin(_)/f(O,$,Y);O*=Se,$*=Se,Y*=Se,X=Math.cos(m),we=we*X+xe*O+Te*Y-he*$,Te=Te*X+xe*$+he*O-we*Y,he=he*X+xe*Y+we*$-Te*O,xe=xe*X-we*O-Te*$-he*Y}var ye=c(we,Te,he,xe);ye>1e-6?(we/=ye,Te/=ye,he/=ye,xe/=ye):(we=Te=he=0,xe=1),this.rotation.set(g,we,Te,he,xe)},p.lookAt=function(g,m,y,_){this.recalcMatrix(g),y=y||this.computedCenter,m=m||this.computedEye,_=_||this.computedUp;var S=this.computedMatrix;i(S,m,y,_);var M=this.computedRotation;u(M,S[0],S[1],S[2],S[4],S[5],S[6],S[8],S[9],S[10]),h(M,M),this.rotation.set(g,M[0],M[1],M[2],M[3]);for(var w=0,A=0;A<3;++A)w+=Math.pow(y[A]-m[A],2);this.radius.set(g,.5*Math.log(Math.max(w,1e-6))),this.center.set(g,y[0],y[1],y[2])},p.translate=function(g,m,y,_){this.center.move(g,m||0,y||0,_||0)},p.setMatrix=function(g,m){var y=this.computedRotation;u(y,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),h(y,y),this.rotation.set(g,y[0],y[1],y[2],y[3]);var _=this.computedMatrix;l(_,m);var S=_[15];if(Math.abs(S)>1e-6){var M=_[12]/S,w=_[13]/S,A=_[14]/S;this.recalcMatrix(g);var k=Math.exp(this.computedRadius[0]);this.center.set(g,M-_[2]*k,w-_[6]*k,A-_[10]*k),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},p.setDistance=function(g,m){m>0&&this.radius.set(g,Math.log(m))},p.setDistanceLimits=function(g,m){g>0?g=Math.log(g):g=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=m},p.getDistanceLimits=function(g){var m=this.radius.bounds;return g?(g[0]=Math.exp(m[0][0]),g[1]=Math.exp(m[1][0]),g):[Math.exp(m[0][0]),Math.exp(m[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(g){var m=this.lastT(),y=g.center;y&&this.center.set(m,y[0],y[1],y[2]);var _=g.rotation;_&&this.rotation.set(m,_[0],_[1],_[2],_[3]);var S=g.distance;S&&S>0&&this.radius.set(m,Math.log(S)),this.setDistanceLimits(g.zoomMin,g.zoomMax)};function d(g){g=g||{};var m=g.center||[0,0,0],y=g.rotation||[0,0,0,1],_=g.radius||1;m=[].slice.call(m,0,3),y=[].slice.call(y,0,4),h(y,y);var S=new v(y,m,Math.log(_));return S.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&S.lookAt(0,g.eye,g.center,g.up),S}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(r,a,n){var o=r("repeat-string");a.exports=function(s,l,u){return u=typeof u!="undefined"?u+"":" ",o(u,l)+s}},{"repeat-string":277}],265:[function(r,a,n){a.exports=function(i,s){s||(s=[0,""]),i=String(i);var l=parseFloat(i,10);return s[0]=l,s[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",s}},{}],266:[function(r,a,n){a.exports=i;var o=r("compare-angle");function i(s,l){for(var u=l.length|0,f=s.length,c=[new Array(u),new Array(u)],h=0;h<u;++h)c[0][h]=[],c[1][h]=[];for(var h=0;h<f;++h){var v=s[h];c[0][v[0]].push(v),c[1][v[1]].push(v)}for(var p=[],h=0;h<u;++h)c[0][h].length+c[1][h].length===0&&p.push([h]);function d(w,A){var k=c[A][w[A]];k.splice(k.indexOf(w),1)}function g(w,A,k){for(var T,L,C,I=0;I<2;++I)if(c[I][A].length>0){T=c[I][A][0],C=I;break}L=T[C^1];for(var R=0;R<2;++R)for(var B=c[R][A],N=0;N<B.length;++N){var D=B[N],O=D[R^1],$=o(l[w],l[A],l[L],l[O]);$>0&&(T=D,L=O,C=R)}return k||T&&d(T,C),L}function m(w,A){var k=c[A][w][0],T=[w];d(k,A);for(var L=k[A^1];;){for(;L!==w;)T.push(L),L=g(T[T.length-2],L,!1);if(c[0][w].length+c[1][w].length===0)break;var C=T[T.length-1],I=w,R=T[1],B=g(C,I,!0);if(o(l[C],l[I],l[R],l[B])<0)break;T.push(w),L=g(C,I)}return T}function y(w,A){return A[1]===A[A.length-1]}for(var h=0;h<u;++h)for(var _=0;_<2;++_){for(var S=[];c[_][h].length>0;){c[0][h].length;var M=m(h,_);y(S,M)?S.push.apply(S,M):(S.length>0&&p.push(S),S=M)}S.length>0&&p.push(S)}return p}},{"compare-angle":54}],267:[function(r,a,n){a.exports=i;var o=r("edges-to-adjacency-list");function i(s,l){for(var u=o(s,l.length),f=new Array(l.length),c=new Array(l.length),h=[],v=0;v<l.length;++v){var p=u[v].length;c[v]=p,f[v]=!0,p<=1&&h.push(v)}for(;h.length>0;){var d=h.pop();f[d]=!1;for(var g=u[d],v=0;v<g.length;++v){var m=g[v];--c[m]==0&&h.push(m)}}for(var y=new Array(l.length),_=[],v=0;v<l.length;++v)if(f[v]){var d=_.length;y[v]=d,_.push(l[v])}else y[v]=-1;for(var S=[],v=0;v<s.length;++v){var M=s[v];f[M[0]]&&f[M[1]]&&S.push([y[M[0]],y[M[1]]])}return[S,_]}},{"edges-to-adjacency-list":66}],268:[function(r,a,n){a.exports=p;var o=r("edges-to-adjacency-list"),i=r("planar-dual"),s=r("point-in-big-polygon"),l=r("two-product"),u=r("robust-sum"),f=r("uniq"),c=r("./lib/trim-leaves");function h(d,g){for(var m=new Array(d),y=0;y<d;++y)m[y]=g;return m}function v(d){for(var g=new Array(d),m=0;m<d;++m)g[m]=[];return g}function p(d,g){var m=c(d,g);d=m[0],g=m[1];var y=g.length;d.length;for(var _=o(d,g.length),S=0;S<y;++S)if(_[S].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=i(d,g);function w(Ie){for(var Ee=Ie.length,qe=[0],be=0;be<Ee;++be){var oe=g[Ie[be]],ce=g[Ie[(be+1)%Ee]],ue=l(-oe[0],oe[1]),Re=l(-oe[0],ce[1]),Xe=l(ce[0],oe[1]),Ke=l(ce[0],ce[1]);qe=u(qe,u(u(ue,Re),u(Xe,Ke)))}return qe[qe.length-1]>0}M=M.filter(w);for(var A=M.length,k=new Array(A),T=new Array(A),S=0;S<A;++S){k[S]=S;var L=new Array(A),C=M[S].map(function(Ee){return g[Ee]}),I=s([C]),R=0;e:for(var B=0;B<A;++B)if(L[B]=0,S!==B){for(var N=M[B],D=N.length,O=0;O<D;++O){var $=I(g[N[O]]);if($!==0){$<0&&(L[B]=1,R+=1);continue e}}L[B]=1,R+=1}T[S]=[R,S,L]}T.sort(function(Ie,Ee){return Ee[0]-Ie[0]});for(var S=0;S<A;++S)for(var L=T[S],Y=L[1],X=L[2],B=0;B<A;++B)X[B]&&(k[B]=Y);for(var ee=v(A),S=0;S<A;++S)ee[S].push(k[S]),ee[k[S]].push(S);for(var Q={},Z=h(y,!1),S=0;S<A;++S)for(var N=M[S],D=N.length,B=0;B<D;++B){var q=N[B],ae=N[(B+1)%D],ie=Math.min(q,ae)+":"+Math.max(q,ae);if(ie in Q){var we=Q[ie];ee[we].push(S),ee[S].push(we),Z[q]=Z[ae]=!0}else Q[ie]=S}function Te(Ie){for(var Ee=Ie.length,qe=0;qe<Ee;++qe)if(!Z[Ie[qe]])return!1;return!0}for(var he=[],xe=h(A,-1),S=0;S<A;++S)k[S]===S&&!Te(M[S])?(he.push(S),xe[S]=0):xe[S]=-1;for(var m=[];he.length>0;){var Se=he.pop(),ye=ee[Se];f(ye,function(Ie,Ee){return Ie-Ee});var re=ye.length,se=xe[Se],de;if(se===0){var N=M[Se];de=[N]}for(var S=0;S<re;++S){var Me=ye[S];if(!(xe[Me]>=0)&&(xe[Me]=se^1,he.push(Me),se===0)){var N=M[Me];Te(N)||(N.reverse(),de.push(N))}}se===0&&m.push(de)}return m}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(r,a,n){a.exports=g;var o=r("robust-orientation")[3],i=r("slab-decomposition"),s=r("interval-tree-1d"),l=r("binary-search-bounds");function u(){return!0}function f(m){return function(y,_){var S=m[y];return S?!!S.queryPoint(_,u):!1}}function c(m){for(var y={},_=0;_<m.length;++_){var S=m[_],M=S[0][0],w=S[0][1],A=S[1][1],k=[Math.min(w,A),Math.max(w,A)];M in y?y[M].push(k):y[M]=[k]}for(var T={},L=Object.keys(y),_=0;_<L.length;++_){var C=y[L[_]];T[L[_]]=s(C)}return f(T)}function h(m,y){return function(_){var S=l.le(y,_[0]);if(S<0)return 1;var M=m[S];if(!M)if(S>0&&y[S]===_[0])M=m[S-1];else return 1;for(var w=1;M;){var A=M.key,k=o(_,A[0],A[1]);if(A[0][0]<A[1][0])if(k<0)M=M.left;else if(k>0)w=-1,M=M.right;else return 0;else if(k>0)M=M.left;else if(k<0)w=1,M=M.right;else return 0}return w}}function v(m){return 1}function p(m){return function(_){return m(_[0],_[1])?0:1}}function d(m,y){return function(S){return m(S[0],S[1])?0:y(S)}}function g(m){for(var y=m.length,_=[],S=[],M=0;M<y;++M)for(var w=m[M],A=w.length,k=A-1,T=0;T<A;k=T++){var L=w[k],C=w[T];L[0]===C[0]?S.push([L,C]):_.push([L,C])}if(_.length===0)return S.length===0?v:p(c(S));var I=i(_),R=h(I.slabs,I.coordinates);return S.length===0?R:d(c(S),R)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(r,a,n){var o=new Float64Array(4),i=new Float64Array(4),s=new Float64Array(4);function l(u,f,c,h,v){o.length<h.length&&(o=new Float64Array(h.length),i=new Float64Array(h.length),s=new Float64Array(h.length));for(var p=0;p<h.length;++p)o[p]=u[p]-h[p],i[p]=f[p]-u[p],s[p]=c[p]-u[p];for(var d=0,g=0,m=0,y=0,_=0,S=0,p=0;p<h.length;++p){var M=i[p],w=s[p],A=o[p];d+=M*M,g+=M*w,m+=w*w,y+=A*M,_+=A*w,S+=A*A}var k=Math.abs(d*m-g*g),T=g*_-m*y,L=g*y-d*_,C;if(T+L<=k)if(T<0)L<0&&y<0?(L=0,-y>=d?(T=1,C=d+2*y+S):(T=-y/d,C=y*T+S)):(T=0,_>=0?(L=0,C=S):-_>=m?(L=1,C=m+2*_+S):(L=-_/m,C=_*L+S));else if(L<0)L=0,y>=0?(T=0,C=S):-y>=d?(T=1,C=d+2*y+S):(T=-y/d,C=y*T+S);else{var I=1/k;T*=I,L*=I,C=T*(d*T+g*L+2*y)+L*(g*T+m*L+2*_)+S}else{var R,B,N,D;T<0?(R=g+y,B=m+_,B>R?(N=B-R,D=d-2*g+m,N>=D?(T=1,L=0,C=d+2*y+S):(T=N/D,L=1-T,C=T*(d*T+g*L+2*y)+L*(g*T+m*L+2*_)+S)):(T=0,B<=0?(L=1,C=m+2*_+S):_>=0?(L=0,C=S):(L=-_/m,C=_*L+S))):L<0?(R=g+_,B=d+y,B>R?(N=B-R,D=d-2*g+m,N>=D?(L=1,T=0,C=m+2*_+S):(L=N/D,T=1-L,C=T*(d*T+g*L+2*y)+L*(g*T+m*L+2*_)+S)):(L=0,B<=0?(T=1,C=d+2*y+S):y>=0?(T=0,C=S):(T=-y/d,C=y*T+S))):(N=m+_-g-y,N<=0?(T=0,L=1,C=m+2*_+S):(D=d-2*g+m,N>=D?(T=1,L=0,C=d+2*y+S):(T=N/D,L=1-T,C=T*(d*T+g*L+2*y)+L*(g*T+m*L+2*_)+S)))}for(var O=1-T-L,p=0;p<h.length;++p)v[p]=O*u[p]+T*f[p]+L*c[p];return C<0?0:C}a.exports=l},{}],271:[function(r,a,n){a.exports=r("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(r,a,n){var o=r("big-rat/add");a.exports=i;function i(s,l){for(var u=s.length,f=new Array(u),c=0;c<u;++c)f[c]=o(s[c],l[c]);return f}},{"big-rat/add":15}],273:[function(r,a,n){a.exports=i;var o=r("big-rat");function i(s){for(var l=new Array(s.length),u=0;u<s.length;++u)l[u]=o(s[u]);return l}},{"big-rat":18}],274:[function(r,a,n){var o=r("big-rat"),i=r("big-rat/mul");a.exports=s;function s(l,u){for(var f=o(u),c=l.length,h=new Array(c),v=0;v<c;++v)h[v]=i(l[v],f);return h}},{"big-rat":18,"big-rat/mul":27}],275:[function(r,a,n){var o=r("big-rat/sub");a.exports=i;function i(s,l){for(var u=s.length,f=new Array(u),c=0;c<u;++c)f[c]=o(s[c],l[c]);return f}},{"big-rat/sub":29}],276:[function(r,a,n){var o=r("compare-cell"),i=r("compare-oriented-cell"),s=r("cell-orientation");a.exports=l;function l(u){u.sort(i);for(var f=u.length,c=0,h=0;h<f;++h){var v=u[h],p=s(v);if(p!==0){if(c>0){var d=u[c-1];if(o(v,d)===0&&s(d)!==p){c-=1;continue}}u[c++]=v}}return u.length=c,u}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(r,a,n){var o="",i;a.exports=s;function s(l,u){if(typeof l!="string")throw new TypeError("expected a string");if(u===1)return l;if(u===2)return l+l;var f=l.length*u;if(i!==l||typeof i=="undefined")i=l,o="";else if(o.length>=f)return o.substr(0,f);for(;f>o.length&&u>1;)u&1&&(o+=l),u>>=1,l+=l;return o+=l,o=o.substr(0,f),o}},{}],278:[function(r,a,n){(function(o){(function(){a.exports=o.performance&&o.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof ll!="undefined"?ll:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(r,a,n){a.exports=o;function o(i){for(var s=i.length,l=i[i.length-1],u=s,f=s-2;f>=0;--f){var c=l,h=i[f];l=c+h;var v=l-c,p=h-v;p&&(i[--u]=l,l=p)}for(var d=0,f=u;f<s;++f){var c=i[f],h=l;l=c+h;var v=l-c,p=h-v;p&&(i[d++]=p)}return i[d++]=l,i.length=d,i}},{}],280:[function(r,a,n){var o=r("two-product"),i=r("robust-sum"),s=r("robust-scale"),l=r("robust-compress"),u=4;function f(g,m,y,_){return function(M){return _(g(y(M[0][0],M[1][1]),y(-M[0][1],M[1][0])))}}function c(g,m,y,_){return function(M){return _(g(m(g(y(M[1][1],M[2][2]),y(-M[1][2],M[2][1])),M[0][0]),g(m(g(y(M[1][0],M[2][2]),y(-M[1][2],M[2][0])),-M[0][1]),m(g(y(M[1][0],M[2][1]),y(-M[1][1],M[2][0])),M[0][2]))))}}function h(g){var m=g===2?f:g===3?c:void 0;return m(i,s,o,l)}var v=[function(){return[0]},function(m){return[m[0][0]]}];function p(g,m,y,_,S,M){return function(A){switch(A.length){case 0:return g(A);case 1:return m(A);case 2:return y(A);case 3:return _(A)}var k=S[A.length];return k||(k=S[A.length]=M(A.length)),k(A)}}function d(){for(;v.length<u;)v.push(h(v.length));a.exports=p.apply(void 0,v.concat([v,h]));for(var g=0;g<v.length;++g)a.exports[g]=v[g]}d()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(r,a,n){var o=r("two-product"),i=r("robust-sum");a.exports=s;function s(l,u){for(var f=o(l[0],u[0]),c=1;c<l.length;++c)f=i(f,o(l[c],u[c]));return f}},{"robust-sum":289,"two-product":306}],282:[function(r,a,n){var o=r("two-product"),i=r("robust-sum"),s=r("robust-subtract"),l=r("robust-scale"),u=6;function f(w){var A=w===3?p:w===4?d:w===5?g:m;return A(i,s,o,l)}function c(){return 0}function h(){return 0}function v(){return 0}function p(w,A,k,T){function L(C,I,R){var B=k(C[0],C[0]),N=T(B,I[0]),D=T(B,R[0]),O=k(I[0],I[0]),$=T(O,C[0]),Y=T(O,R[0]),X=k(R[0],R[0]),ee=T(X,C[0]),Q=T(X,I[0]),Z=w(A(Q,Y),A($,N)),q=A(ee,D),ae=A(Z,q);return ae[ae.length-1]}return L}function d(w,A,k,T){function L(C,I,R,B){var N=w(k(C[0],C[0]),k(C[1],C[1])),D=T(N,I[0]),O=T(N,R[0]),$=T(N,B[0]),Y=w(k(I[0],I[0]),k(I[1],I[1])),X=T(Y,C[0]),ee=T(Y,R[0]),Q=T(Y,B[0]),Z=w(k(R[0],R[0]),k(R[1],R[1])),q=T(Z,C[0]),ae=T(Z,I[0]),ie=T(Z,B[0]),we=w(k(B[0],B[0]),k(B[1],B[1])),Te=T(we,C[0]),he=T(we,I[0]),xe=T(we,R[0]),Se=w(w(T(A(xe,ie),I[1]),w(T(A(he,Q),-R[1]),T(A(ae,ee),B[1]))),w(T(A(he,Q),C[1]),w(T(A(Te,$),-I[1]),T(A(X,D),B[1])))),ye=w(w(T(A(xe,ie),C[1]),w(T(A(Te,$),-R[1]),T(A(q,O),B[1]))),w(T(A(ae,ee),C[1]),w(T(A(q,O),-I[1]),T(A(X,D),R[1])))),re=A(Se,ye);return re[re.length-1]}return L}function g(w,A,k,T){function L(C,I,R,B,N){var D=w(k(C[0],C[0]),w(k(C[1],C[1]),k(C[2],C[2]))),O=T(D,I[0]),$=T(D,R[0]),Y=T(D,B[0]),X=T(D,N[0]),ee=w(k(I[0],I[0]),w(k(I[1],I[1]),k(I[2],I[2]))),Q=T(ee,C[0]),Z=T(ee,R[0]),q=T(ee,B[0]),ae=T(ee,N[0]),ie=w(k(R[0],R[0]),w(k(R[1],R[1]),k(R[2],R[2]))),we=T(ie,C[0]),Te=T(ie,I[0]),he=T(ie,B[0]),xe=T(ie,N[0]),Se=w(k(B[0],B[0]),w(k(B[1],B[1]),k(B[2],B[2]))),ye=T(Se,C[0]),re=T(Se,I[0]),se=T(Se,R[0]),de=T(Se,N[0]),Me=w(k(N[0],N[0]),w(k(N[1],N[1]),k(N[2],N[2]))),Ie=T(Me,C[0]),Ee=T(Me,I[0]),qe=T(Me,R[0]),be=T(Me,B[0]),oe=w(w(w(T(w(T(A(be,de),R[1]),w(T(A(qe,xe),-B[1]),T(A(se,he),N[1]))),I[2]),w(T(w(T(A(be,de),I[1]),w(T(A(Ee,ae),-B[1]),T(A(re,q),N[1]))),-R[2]),T(w(T(A(qe,xe),I[1]),w(T(A(Ee,ae),-R[1]),T(A(Te,Z),N[1]))),B[2]))),w(T(w(T(A(se,he),I[1]),w(T(A(re,q),-R[1]),T(A(Te,Z),B[1]))),-N[2]),w(T(w(T(A(be,de),I[1]),w(T(A(Ee,ae),-B[1]),T(A(re,q),N[1]))),C[2]),T(w(T(A(be,de),C[1]),w(T(A(Ie,X),-B[1]),T(A(ye,Y),N[1]))),-I[2])))),w(w(T(w(T(A(Ee,ae),C[1]),w(T(A(Ie,X),-I[1]),T(A(Q,O),N[1]))),B[2]),w(T(w(T(A(re,q),C[1]),w(T(A(ye,Y),-I[1]),T(A(Q,O),B[1]))),-N[2]),T(w(T(A(se,he),I[1]),w(T(A(re,q),-R[1]),T(A(Te,Z),B[1]))),C[2]))),w(T(w(T(A(se,he),C[1]),w(T(A(ye,Y),-R[1]),T(A(we,$),B[1]))),-I[2]),w(T(w(T(A(re,q),C[1]),w(T(A(ye,Y),-I[1]),T(A(Q,O),B[1]))),R[2]),T(w(T(A(Te,Z),C[1]),w(T(A(we,$),-I[1]),T(A(Q,O),R[1]))),-B[2]))))),ce=w(w(w(T(w(T(A(be,de),R[1]),w(T(A(qe,xe),-B[1]),T(A(se,he),N[1]))),C[2]),T(w(T(A(be,de),C[1]),w(T(A(Ie,X),-B[1]),T(A(ye,Y),N[1]))),-R[2])),w(T(w(T(A(qe,xe),C[1]),w(T(A(Ie,X),-R[1]),T(A(we,$),N[1]))),B[2]),T(w(T(A(se,he),C[1]),w(T(A(ye,Y),-R[1]),T(A(we,$),B[1]))),-N[2]))),w(w(T(w(T(A(qe,xe),I[1]),w(T(A(Ee,ae),-R[1]),T(A(Te,Z),N[1]))),C[2]),T(w(T(A(qe,xe),C[1]),w(T(A(Ie,X),-R[1]),T(A(we,$),N[1]))),-I[2])),w(T(w(T(A(Ee,ae),C[1]),w(T(A(Ie,X),-I[1]),T(A(Q,O),N[1]))),R[2]),T(w(T(A(Te,Z),C[1]),w(T(A(we,$),-I[1]),T(A(Q,O),R[1]))),-N[2])))),ue=A(oe,ce);return ue[ue.length-1]}return L}function m(w,A,k,T){function L(C,I,R,B,N,D){var O=w(w(k(C[0],C[0]),k(C[1],C[1])),w(k(C[2],C[2]),k(C[3],C[3]))),$=T(O,I[0]),Y=T(O,R[0]),X=T(O,B[0]),ee=T(O,N[0]),Q=T(O,D[0]),Z=w(w(k(I[0],I[0]),k(I[1],I[1])),w(k(I[2],I[2]),k(I[3],I[3]))),q=T(Z,C[0]),ae=T(Z,R[0]),ie=T(Z,B[0]),we=T(Z,N[0]),Te=T(Z,D[0]),he=w(w(k(R[0],R[0]),k(R[1],R[1])),w(k(R[2],R[2]),k(R[3],R[3]))),xe=T(he,C[0]),Se=T(he,I[0]),ye=T(he,B[0]),re=T(he,N[0]),se=T(he,D[0]),de=w(w(k(B[0],B[0]),k(B[1],B[1])),w(k(B[2],B[2]),k(B[3],B[3]))),Me=T(de,C[0]),Ie=T(de,I[0]),Ee=T(de,R[0]),qe=T(de,N[0]),be=T(de,D[0]),oe=w(w(k(N[0],N[0]),k(N[1],N[1])),w(k(N[2],N[2]),k(N[3],N[3]))),ce=T(oe,C[0]),ue=T(oe,I[0]),Re=T(oe,R[0]),Xe=T(oe,B[0]),Ke=T(oe,D[0]),vt=w(w(k(D[0],D[0]),k(D[1],D[1])),w(k(D[2],D[2]),k(D[3],D[3]))),Ze=T(vt,C[0]),Qe=T(vt,I[0]),Je=T(vt,R[0]),je=T(vt,B[0]),$e=T(vt,N[0]),Ye=w(w(w(T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),R[2]),T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),-B[2])),w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),N[2]),T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),-D[2]))),I[3]),w(T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),I[2]),T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),-B[2])),w(T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),N[2]),T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),-D[2]))),-R[3]),T(w(w(T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),I[2]),T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),-R[2])),w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),N[2]),T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),-D[2]))),B[3]))),w(w(T(w(w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),I[2]),T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),-R[2])),w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),B[2]),T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),-D[2]))),-N[3]),T(w(w(T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),I[2]),T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),-R[2])),w(T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),B[2]),T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),-N[2]))),D[3])),w(T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),I[2]),T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),-B[2])),w(T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),N[2]),T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),-D[2]))),C[3]),T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-B[2])),w(T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),N[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-D[2]))),-I[3])))),w(w(w(T(w(w(T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),N[2]),T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),-D[2]))),B[3]),T(w(w(T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),C[2]),T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),B[2]),T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),-D[2]))),-N[3])),w(T(w(w(T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),C[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-I[2])),w(T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),B[2]),T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),-N[2]))),D[3]),T(w(w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),I[2]),T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),-R[2])),w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),B[2]),T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),-D[2]))),C[3]))),w(w(T(w(w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),C[2]),T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),-R[2])),w(T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),B[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-D[2]))),-I[3]),T(w(w(T(w(T(A(je,be),I[1]),w(T(A(Qe,Te),-B[1]),T(A(Ie,ie),D[1]))),C[2]),T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),B[2]),T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),-D[2]))),R[3])),w(T(w(w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),C[2]),T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-D[2]))),-B[3]),T(w(w(T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),C[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-I[2])),w(T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-B[2]))),D[3]))))),yt=w(w(w(T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),R[2]),T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),-B[2])),w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),N[2]),T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),-D[2]))),C[3]),w(T(w(w(T(w(T(A($e,Ke),B[1]),w(T(A(je,be),-N[1]),T(A(Xe,qe),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-B[2])),w(T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),N[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-D[2]))),-R[3]),T(w(w(T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-R[2])),w(T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),N[2]),T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),-D[2]))),B[3]))),w(w(T(w(w(T(w(T(A(je,be),R[1]),w(T(A(Je,se),-B[1]),T(A(Ee,ye),D[1]))),C[2]),T(w(T(A(je,be),C[1]),w(T(A(Ze,Q),-B[1]),T(A(Me,X),D[1]))),-R[2])),w(T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),B[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-D[2]))),-N[3]),T(w(w(T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),C[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-R[2])),w(T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),B[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-N[2]))),D[3])),w(T(w(w(T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),I[2]),T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),-R[2])),w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),N[2]),T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),-D[2]))),C[3]),T(w(w(T(w(T(A($e,Ke),R[1]),w(T(A(Je,se),-N[1]),T(A(Re,re),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-R[2])),w(T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),N[2]),T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),-D[2]))),-I[3])))),w(w(w(T(w(w(T(w(T(A($e,Ke),I[1]),w(T(A(Qe,Te),-N[1]),T(A(ue,we),D[1]))),C[2]),T(w(T(A($e,Ke),C[1]),w(T(A(Ze,Q),-N[1]),T(A(ce,ee),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),N[2]),T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),-D[2]))),R[3]),T(w(w(T(w(T(A(Je,se),I[1]),w(T(A(Qe,Te),-R[1]),T(A(Se,ae),D[1]))),C[2]),T(w(T(A(Je,se),C[1]),w(T(A(Ze,Q),-R[1]),T(A(xe,Y),D[1]))),-I[2])),w(T(w(T(A(Qe,Te),C[1]),w(T(A(Ze,Q),-I[1]),T(A(q,$),D[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-D[2]))),-N[3])),w(T(w(w(T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),C[2]),T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),-I[2])),w(T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-N[2]))),D[3]),T(w(w(T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),I[2]),T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),-R[2])),w(T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),B[2]),T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),-N[2]))),C[3]))),w(w(T(w(w(T(w(T(A(Xe,qe),R[1]),w(T(A(Re,re),-B[1]),T(A(Ee,ye),N[1]))),C[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-R[2])),w(T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),B[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-N[2]))),-I[3]),T(w(w(T(w(T(A(Xe,qe),I[1]),w(T(A(ue,we),-B[1]),T(A(Ie,ie),N[1]))),C[2]),T(w(T(A(Xe,qe),C[1]),w(T(A(ce,ee),-B[1]),T(A(Me,X),N[1]))),-I[2])),w(T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),B[2]),T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),-N[2]))),R[3])),w(T(w(w(T(w(T(A(Re,re),I[1]),w(T(A(ue,we),-R[1]),T(A(Se,ae),N[1]))),C[2]),T(w(T(A(Re,re),C[1]),w(T(A(ce,ee),-R[1]),T(A(xe,Y),N[1]))),-I[2])),w(T(w(T(A(ue,we),C[1]),w(T(A(ce,ee),-I[1]),T(A(q,$),N[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-N[2]))),-B[3]),T(w(w(T(w(T(A(Ee,ye),I[1]),w(T(A(Ie,ie),-R[1]),T(A(Se,ae),B[1]))),C[2]),T(w(T(A(Ee,ye),C[1]),w(T(A(Me,X),-R[1]),T(A(xe,Y),B[1]))),-I[2])),w(T(w(T(A(Ie,ie),C[1]),w(T(A(Me,X),-I[1]),T(A(q,$),B[1]))),R[2]),T(w(T(A(Se,ae),C[1]),w(T(A(xe,Y),-I[1]),T(A(q,$),R[1]))),-B[2]))),N[3]))))),_t=A(Ye,yt);return _t[_t.length-1]}return L}var y=[c,h,v];function _(w){var A=y[w.length];return A||(A=y[w.length]=f(w.length)),A.apply(void 0,w)}function S(w,A,k,T,L,C,I,R){function B(N,D,O,$,Y,X){switch(arguments.length){case 0:case 1:return 0;case 2:return T(N,D);case 3:return L(N,D,O);case 4:return C(N,D,O,$);case 5:return I(N,D,O,$,Y);case 6:return R(N,D,O,$,Y,X)}for(var ee=new Array(arguments.length),Q=0;Q<arguments.length;++Q)ee[Q]=arguments[Q];return w(ee)}return B}function M(){for(;y.length<=u;)y.push(f(y.length));a.exports=S.apply(void 0,[_].concat(y));for(var w=0;w<=u;++w)a.exports[w]=y[w]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(r,a,n){var o=r("robust-determinant"),i=3;function s(d){var g=d===2?f:c;return d<i?g(o[d]):g(o)}function l(){return[[0]]}function u(d,g){return[[g[0]],[d[0][0]]]}function f(d){return function(m,y){return[d([[+y[0],+m[0][1]],[+y[1],+m[1][1]]]),d([[+m[0][0],+y[0]],[+m[1][0],+y[1]]]),d(m)]}}function c(d){return function(m,y){return[d([[+y[0],+m[0][1],+m[0][2]],[+y[1],+m[1][1],+m[1][2]],[+y[2],+m[2][1],+m[2][2]]]),d([[+m[0][0],+y[0],+m[0][2]],[+m[1][0],+y[1],+m[1][2]],[+m[2][0],+y[2],+m[2][2]]]),d([[+m[0][0],+m[0][1],+y[0]],[+m[1][0],+m[1][1],+y[1]],[+m[2][0],+m[2][1],+y[2]]]),d(m)]}}var h=[l,u];function v(d,g,m,y,_,S){return function(w,A){switch(w.length){case 0:return d(w,A);case 1:return g(w,A);case 2:return m(w,A);case 3:return y(w,A)}var k=_[w.length];return k||(k=_[w.length]=S(w.length)),k(w,A)}}function p(){for(;h.length<=i;)h.push(s(h.length));a.exports=v.apply(void 0,h.concat([h,s]));for(var d=0;d<i;++d)a.exports[d]=h[d]}p()},{"robust-determinant":280}],284:[function(r,a,n){var o=r("two-product"),i=r("robust-sum"),s=r("robust-scale"),l=r("robust-subtract"),u=5,f=11102230246251565e-32,c=(3+16*f)*f,h=(7+56*f)*f;function v(A,k,T,L){return function(I,R,B){var N=A(A(k(R[1],B[0]),k(-B[1],R[0])),A(k(I[1],R[0]),k(-R[1],I[0]))),D=A(k(I[1],B[0]),k(-B[1],I[0])),O=L(N,D);return O[O.length-1]}}function p(A,k,T,L){return function(I,R,B,N){var D=A(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),R[2]),A(T(A(k(R[1],N[0]),k(-N[1],R[0])),-B[2]),T(A(k(R[1],B[0]),k(-B[1],R[0])),N[2]))),A(T(A(k(R[1],N[0]),k(-N[1],R[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),N[2])))),O=A(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-B[2]),T(A(k(I[1],B[0]),k(-B[1],I[0])),N[2]))),A(T(A(k(R[1],B[0]),k(-B[1],R[0])),I[2]),A(T(A(k(I[1],B[0]),k(-B[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),B[2])))),$=L(D,O);return $[$.length-1]}}function d(A,k,T,L){return function(I,R,B,N,D){var O=A(A(A(T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),B[2]),A(T(A(k(B[1],D[0]),k(-D[1],B[0])),-N[2]),T(A(k(B[1],N[0]),k(-N[1],B[0])),D[2]))),R[3]),A(T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),R[2]),A(T(A(k(R[1],D[0]),k(-D[1],R[0])),-N[2]),T(A(k(R[1],N[0]),k(-N[1],R[0])),D[2]))),-B[3]),T(A(T(A(k(B[1],D[0]),k(-D[1],B[0])),R[2]),A(T(A(k(R[1],D[0]),k(-D[1],R[0])),-B[2]),T(A(k(R[1],B[0]),k(-B[1],R[0])),D[2]))),N[3]))),A(T(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),R[2]),A(T(A(k(R[1],N[0]),k(-N[1],R[0])),-B[2]),T(A(k(R[1],B[0]),k(-B[1],R[0])),N[2]))),-D[3]),A(T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),R[2]),A(T(A(k(R[1],D[0]),k(-D[1],R[0])),-N[2]),T(A(k(R[1],N[0]),k(-N[1],R[0])),D[2]))),I[3]),T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-N[2]),T(A(k(I[1],N[0]),k(-N[1],I[0])),D[2]))),-R[3])))),A(A(T(A(T(A(k(R[1],D[0]),k(-D[1],R[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),D[2]))),N[3]),A(T(A(T(A(k(R[1],N[0]),k(-N[1],R[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),N[2]))),-D[3]),T(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),R[2]),A(T(A(k(R[1],N[0]),k(-N[1],R[0])),-B[2]),T(A(k(R[1],B[0]),k(-B[1],R[0])),N[2]))),I[3]))),A(T(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-B[2]),T(A(k(I[1],B[0]),k(-B[1],I[0])),N[2]))),-R[3]),A(T(A(T(A(k(R[1],N[0]),k(-N[1],R[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),N[2]))),B[3]),T(A(T(A(k(R[1],B[0]),k(-B[1],R[0])),I[2]),A(T(A(k(I[1],B[0]),k(-B[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),B[2]))),-N[3]))))),$=A(A(A(T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),B[2]),A(T(A(k(B[1],D[0]),k(-D[1],B[0])),-N[2]),T(A(k(B[1],N[0]),k(-N[1],B[0])),D[2]))),I[3]),T(A(T(A(k(N[1],D[0]),k(-D[1],N[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-N[2]),T(A(k(I[1],N[0]),k(-N[1],I[0])),D[2]))),-B[3])),A(T(A(T(A(k(B[1],D[0]),k(-D[1],B[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-B[2]),T(A(k(I[1],B[0]),k(-B[1],I[0])),D[2]))),N[3]),T(A(T(A(k(B[1],N[0]),k(-N[1],B[0])),I[2]),A(T(A(k(I[1],N[0]),k(-N[1],I[0])),-B[2]),T(A(k(I[1],B[0]),k(-B[1],I[0])),N[2]))),-D[3]))),A(A(T(A(T(A(k(B[1],D[0]),k(-D[1],B[0])),R[2]),A(T(A(k(R[1],D[0]),k(-D[1],R[0])),-B[2]),T(A(k(R[1],B[0]),k(-B[1],R[0])),D[2]))),I[3]),T(A(T(A(k(B[1],D[0]),k(-D[1],B[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-B[2]),T(A(k(I[1],B[0]),k(-B[1],I[0])),D[2]))),-R[3])),A(T(A(T(A(k(R[1],D[0]),k(-D[1],R[0])),I[2]),A(T(A(k(I[1],D[0]),k(-D[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),D[2]))),B[3]),T(A(T(A(k(R[1],B[0]),k(-B[1],R[0])),I[2]),A(T(A(k(I[1],B[0]),k(-B[1],I[0])),-R[2]),T(A(k(I[1],R[0]),k(-R[1],I[0])),B[2]))),-D[3])))),Y=L(O,$);return Y[Y.length-1]}}function g(A){var k=A===3?v:A===4?p:d;return k(i,o,s,l)}var m=g(3),y=g(4),_=[function(){return 0},function(){return 0},function(k,T){return T[0]-k[0]},function(k,T,L){var C=(k[1]-L[1])*(T[0]-L[0]),I=(k[0]-L[0])*(T[1]-L[1]),R=C-I,B;if(C>0){if(I<=0)return R;B=C+I}else if(C<0){if(I>=0)return R;B=-(C+I)}else return R;var N=c*B;return R>=N||R<=-N?R:m(k,T,L)},function(k,T,L,C){var I=k[0]-C[0],R=T[0]-C[0],B=L[0]-C[0],N=k[1]-C[1],D=T[1]-C[1],O=L[1]-C[1],$=k[2]-C[2],Y=T[2]-C[2],X=L[2]-C[2],ee=R*O,Q=B*D,Z=B*N,q=I*O,ae=I*D,ie=R*N,we=$*(ee-Q)+Y*(Z-q)+X*(ae-ie),Te=(Math.abs(ee)+Math.abs(Q))*Math.abs($)+(Math.abs(Z)+Math.abs(q))*Math.abs(Y)+(Math.abs(ae)+Math.abs(ie))*Math.abs(X),he=h*Te;return we>he||-we>he?we:y(k,T,L,C)}];function S(A){var k=_[A.length];return k||(k=_[A.length]=g(A.length)),k.apply(void 0,A)}function M(A,k,T,L,C,I,R){return function(N,D,O,$,Y){switch(arguments.length){case 0:case 1:return 0;case 2:return L(N,D);case 3:return C(N,D,O);case 4:return I(N,D,O,$);case 5:return R(N,D,O,$,Y)}for(var X=new Array(arguments.length),ee=0;ee<arguments.length;++ee)X[ee]=arguments[ee];return A(X)}}function w(){for(;_.length<=u;)_.push(g(_.length));a.exports=M.apply(void 0,[S].concat(_));for(var A=0;A<=u;++A)a.exports[A]=_[A]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(r,a,n){var o=r("robust-sum"),i=r("robust-scale");a.exports=s;function s(l,u){if(l.length===1)return i(u,l[0]);if(u.length===1)return i(l,u[0]);if(l.length===0||u.length===0)return[0];var f=[0];if(l.length<u.length)for(var c=0;c<l.length;++c)f=o(f,i(u,l[c]));else for(var c=0;c<u.length;++c)f=o(f,i(l,u[c]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(r,a,n){var o=r("two-product"),i=r("two-sum");a.exports=s;function s(l,u){var f=l.length;if(f===1){var c=o(l[0],u);return c[0]?c:[c[1]]}var h=new Array(2*f),v=[.1,.1],p=[.1,.1],d=0;o(l[0],u,v),v[0]&&(h[d++]=v[0]);for(var g=1;g<f;++g){o(l[g],u,p);var m=v[1];i(m,p[0],v),v[0]&&(h[d++]=v[0]);var y=p[1],_=v[1],S=y+_,M=S-y,w=_-M;v[1]=S,w&&(h[d++]=w)}return v[1]&&(h[d++]=v[1]),d===0&&(h[d++]=0),h.length=d,h}},{"two-product":306,"two-sum":307}],287:[function(r,a,n){a.exports=s;var o=r("robust-orientation")[3];function i(l,u,f,c){for(var h=0;h<2;++h){var v=l[h],p=u[h],d=Math.min(v,p),g=Math.max(v,p),m=f[h],y=c[h],_=Math.min(m,y),S=Math.max(m,y);if(S<d||g<_)return!1}return!0}function s(l,u,f,c){var h=o(l,f,c),v=o(u,f,c);if(h>0&&v>0||h<0&&v<0)return!1;var p=o(f,l,u),d=o(c,l,u);return p>0&&d>0||p<0&&d<0?!1:h===0&&v===0&&p===0&&d===0?i(l,u,f,c):!0}},{"robust-orientation":284}],288:[function(r,a,n){a.exports=i;function o(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,p=v+h;return p?[p,u]:[u]}function i(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return o(s[0],-l[0]);var c=u+f,h=new Array(c),v=0,p=0,d=0,g=Math.abs,m=s[p],y=g(m),_=-l[d],S=g(_),M,w;y<S?(w=m,p+=1,p<u&&(m=s[p],y=g(m))):(w=_,d+=1,d<f&&(_=-l[d],S=g(_))),p<u&&y<S||d>=f?(M=m,p+=1,p<u&&(m=s[p],y=g(m))):(M=_,d+=1,d<f&&(_=-l[d],S=g(_)));for(var A=M+w,k=A-M,T=w-k,L=T,C=A,I,R,B,N,D;p<u&&d<f;)y<S?(M=m,p+=1,p<u&&(m=s[p],y=g(m))):(M=_,d+=1,d<f&&(_=-l[d],S=g(_))),w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I;for(;p<u;)M=m,w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I,p+=1,p<u&&(m=s[p]);for(;d<f;)M=_,w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I,d+=1,d<f&&(_=-l[d]);return L&&(h[v++]=L),C&&(h[v++]=C),v||(h[v++]=0),h.length=v,h}},{}],289:[function(r,a,n){a.exports=i;function o(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,p=v+h;return p?[p,u]:[u]}function i(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return o(s[0],l[0]);var c=u+f,h=new Array(c),v=0,p=0,d=0,g=Math.abs,m=s[p],y=g(m),_=l[d],S=g(_),M,w;y<S?(w=m,p+=1,p<u&&(m=s[p],y=g(m))):(w=_,d+=1,d<f&&(_=l[d],S=g(_))),p<u&&y<S||d>=f?(M=m,p+=1,p<u&&(m=s[p],y=g(m))):(M=_,d+=1,d<f&&(_=l[d],S=g(_)));for(var A=M+w,k=A-M,T=w-k,L=T,C=A,I,R,B,N,D;p<u&&d<f;)y<S?(M=m,p+=1,p<u&&(m=s[p],y=g(m))):(M=_,d+=1,d<f&&(_=l[d],S=g(_))),w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I;for(;p<u;)M=m,w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I,p+=1,p<u&&(m=s[p]);for(;d<f;)M=_,w=L,A=M+w,k=A-M,T=w-k,T&&(h[v++]=T),I=C+A,R=I-C,B=I-R,N=A-R,D=C-B,L=D+N,C=I,d+=1,d<f&&(_=l[d]);return L&&(h[v++]=L),C&&(h[v++]=C),v||(h[v++]=0),h.length=v,h}},{}],290:[function(r,a,n){a.exports=s;var o=r("boundary-cells"),i=r("reduce-simplicial-complex");function s(l){return i(o(l))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(r,a,n){a.exports=d;var o=r("ndarray"),i=r("typedarray-pool"),s=r("ndarray-sort"),l=r("./lib/codegen");function u(g){for(var m=g.length,y=0,_=0;_<m;++_)y=Math.max(y,g[_].length)|0;return y-1}function f(g,m){for(var y=g.length,_=i.mallocUint8(y),S=0;S<y;++S)_[S]=g[S]<m|0;return _}function c(g,m){for(var y=g.length,_=m*(m+1)/2*y|0,S=i.mallocUint32(_*2),M=0,w=0;w<y;++w)for(var A=g[w],m=A.length,k=0;k<m;++k)for(var T=0;T<k;++T){var L=A[T],C=A[k];S[M++]=Math.min(L,C)|0,S[M++]=Math.max(L,C)|0}var I=M/2|0;s(o(S,[I,2]));for(var R=2,w=2;w<M;w+=2)S[w-2]===S[w]&&S[w-1]===S[w+1]||(S[R++]=S[w],S[R++]=S[w+1]);return o(S,[R/2|0,2])}function h(g,m,y,_){for(var S=g.data,M=g.shape[0],w=i.mallocDouble(M),A=0,k=0;k<M;++k){var T=S[2*k],L=S[2*k+1];if(y[T]!==y[L]){var C=m[T],I=m[L];S[2*A]=T,S[2*A+1]=L,w[A++]=(I-_)/(I-C)}}return g.shape[0]=A,o(w,[A])}function v(g,m){var y=i.mallocInt32(m*2),_=g.shape[0],S=g.data;y[0]=0;for(var M=0,w=0;w<_;++w){var A=S[2*w];if(A!==M){for(y[2*M+1]=w;++M<A;)y[2*M]=w,y[2*M+1]=w;y[2*M]=w}}for(y[2*M+1]=_;++M<m;)y[2*M]=y[2*M+1]=_;return y}function p(g){for(var m=g.shape[0]|0,y=g.data,_=new Array(m),S=0;S<m;++S)_[S]=[y[2*S],y[2*S+1]];return _}function d(g,m,y,_){y=y||0,typeof _=="undefined"&&(_=u(g));var S=g.length;if(S===0||_<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=f(m,+y),w=c(g,_),A=h(w,m,M,+y),k=v(w,m.length|0),T=l(_)(g,w.data,k,M),L=p(w),C=[].slice.call(A.data,0,A.shape[0]);return i.free(M),i.free(w.data),i.free(A.data),i.free(k),{cells:T,vertexIds:L,vertexWeights:C}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(r,a,n){a.exports=i;var o=[function(){function l(u,f,c,h){for(var v=u.length,p=[],d=0;d<v;++d){var g=u[d];g.length}return p}return l},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,d=Math.max(h,v)|0,g=f[2*p],m=f[2*p+1];g<m;){var y=g+m>>1,_=c[2*y+1];if(_===d)return y;d<_?m=y:g=y+1}return g}function u(f,c,h,v){for(var p=f.length,d=[],g=0;g<p;++g){var m=f[g],y=m.length;if(y===2){var _=(v[m[0]]<<0)+(v[m[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[1])]);break;case 2:d.push([l(h,c,m[1],m[0])]);break}}}return d}return u},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,d=Math.max(h,v)|0,g=f[2*p],m=f[2*p+1];g<m;){var y=g+m>>1,_=c[2*y+1];if(_===d)return y;d<_?m=y:g=y+1}return g}function u(f,c,h,v){for(var p=f.length,d=[],g=0;g<p;++g){var m=f[g],y=m.length;if(y===3){var _=(v[m[0]]<<0)+(v[m[1]]<<1)+(v[m[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[2]),l(h,c,m[0],m[1])]);break;case 2:d.push([l(h,c,m[1],m[0]),l(h,c,m[1],m[2])]);break;case 3:d.push([l(h,c,m[0],m[2]),l(h,c,m[1],m[2])]);break;case 4:d.push([l(h,c,m[2],m[1]),l(h,c,m[2],m[0])]);break;case 5:d.push([l(h,c,m[2],m[1]),l(h,c,m[0],m[1])]);break;case 6:d.push([l(h,c,m[1],m[0]),l(h,c,m[2],m[0])]);break}}else if(y===2){var _=(v[m[0]]<<0)+(v[m[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[1])]);break;case 2:d.push([l(h,c,m[1],m[0])]);break}}}return d}return u},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,d=Math.max(h,v)|0,g=f[2*p],m=f[2*p+1];g<m;){var y=g+m>>1,_=c[2*y+1];if(_===d)return y;d<_?m=y:g=y+1}return g}function u(f,c,h,v){for(var p=f.length,d=[],g=0;g<p;++g){var m=f[g],y=m.length;if(y===4){var _=(v[m[0]]<<0)+(v[m[1]]<<1)+(v[m[2]]<<2)+(v[m[3]]<<3);if(_===0||_===15)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[1]),l(h,c,m[0],m[2]),l(h,c,m[0],m[3])]);break;case 2:d.push([l(h,c,m[1],m[2]),l(h,c,m[1],m[0]),l(h,c,m[1],m[3])]);break;case 3:d.push([l(h,c,m[1],m[2]),l(h,c,m[0],m[2]),l(h,c,m[0],m[3])],[l(h,c,m[1],m[3]),l(h,c,m[1],m[2]),l(h,c,m[0],m[3])]);break;case 4:d.push([l(h,c,m[2],m[0]),l(h,c,m[2],m[1]),l(h,c,m[2],m[3])]);break;case 5:d.push([l(h,c,m[0],m[1]),l(h,c,m[2],m[1]),l(h,c,m[0],m[3])],[l(h,c,m[2],m[1]),l(h,c,m[2],m[3]),l(h,c,m[0],m[3])]);break;case 6:d.push([l(h,c,m[2],m[0]),l(h,c,m[1],m[0]),l(h,c,m[1],m[3])],[l(h,c,m[2],m[3]),l(h,c,m[2],m[0]),l(h,c,m[1],m[3])]);break;case 7:d.push([l(h,c,m[0],m[3]),l(h,c,m[1],m[3]),l(h,c,m[2],m[3])]);break;case 8:d.push([l(h,c,m[3],m[1]),l(h,c,m[3],m[0]),l(h,c,m[3],m[2])]);break;case 9:d.push([l(h,c,m[3],m[1]),l(h,c,m[0],m[1]),l(h,c,m[0],m[2])],[l(h,c,m[3],m[2]),l(h,c,m[3],m[1]),l(h,c,m[0],m[2])]);break;case 10:d.push([l(h,c,m[1],m[0]),l(h,c,m[3],m[0]),l(h,c,m[1],m[2])],[l(h,c,m[3],m[0]),l(h,c,m[3],m[2]),l(h,c,m[1],m[2])]);break;case 11:d.push([l(h,c,m[1],m[2]),l(h,c,m[0],m[2]),l(h,c,m[3],m[2])]);break;case 12:d.push([l(h,c,m[3],m[0]),l(h,c,m[2],m[0]),l(h,c,m[2],m[1])],[l(h,c,m[3],m[1]),l(h,c,m[3],m[0]),l(h,c,m[2],m[1])]);break;case 13:d.push([l(h,c,m[0],m[1]),l(h,c,m[2],m[1]),l(h,c,m[3],m[1])]);break;case 14:d.push([l(h,c,m[2],m[0]),l(h,c,m[1],m[0]),l(h,c,m[3],m[0])]);break}}else if(y===3){var _=(v[m[0]]<<0)+(v[m[1]]<<1)+(v[m[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[2]),l(h,c,m[0],m[1])]);break;case 2:d.push([l(h,c,m[1],m[0]),l(h,c,m[1],m[2])]);break;case 3:d.push([l(h,c,m[0],m[2]),l(h,c,m[1],m[2])]);break;case 4:d.push([l(h,c,m[2],m[1]),l(h,c,m[2],m[0])]);break;case 5:d.push([l(h,c,m[2],m[1]),l(h,c,m[0],m[1])]);break;case 6:d.push([l(h,c,m[1],m[0]),l(h,c,m[2],m[0])]);break}}else if(y===2){var _=(v[m[0]]<<0)+(v[m[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:d.push([l(h,c,m[0],m[1])]);break;case 2:d.push([l(h,c,m[1],m[0])]);break}}}return d}return u}];function i(s){return o[s]()}},{}],293:[function(r,a,n){var o=r("bit-twiddle"),i=r("union-find");function s(A){for(var k=0,T=Math.max,L=0,C=A.length;L<C;++L)k=T(k,A[L].length);return k-1}n.dimension=s;function l(A){for(var k=-1,T=Math.max,L=0,C=A.length;L<C;++L)for(var I=A[L],R=0,B=I.length;R<B;++R)k=T(k,I[R]);return k+1}n.countVertices=l;function u(A){for(var k=new Array(A.length),T=0,L=A.length;T<L;++T)k[T]=A[T].slice(0);return k}n.cloneCells=u;function f(A,k){var T=A.length,L=A.length-k.length,C=Math.min;if(L)return L;switch(T){case 0:return 0;case 1:return A[0]-k[0];case 2:var I=A[0]+A[1]-k[0]-k[1];return I||C(A[0],A[1])-C(k[0],k[1]);case 3:var R=A[0]+A[1],B=k[0]+k[1];if(I=R+A[2]-(B+k[2]),I)return I;var N=C(A[0],A[1]),D=C(k[0],k[1]),I=C(N,A[2])-C(D,k[2]);return I||C(N+A[2],R)-C(D+k[2],B);default:var O=A.slice(0);O.sort();var $=k.slice(0);$.sort();for(var Y=0;Y<T;++Y)if(L=O[Y]-$[Y],L)return L;return 0}}n.compareCells=f;function c(A,k){return f(A[0],k[0])}function h(A,k){if(k){for(var T=A.length,L=new Array(T),C=0;C<T;++C)L[C]=[A[C],k[C]];L.sort(c);for(var C=0;C<T;++C)A[C]=L[C][0],k[C]=L[C][1];return A}else return A.sort(f),A}n.normalize=h;function v(A){if(A.length===0)return[];for(var k=1,T=A.length,L=1;L<T;++L){var C=A[L];if(f(C,A[L-1])){if(L===k){k++;continue}A[k++]=C}}return A.length=k,A}n.unique=v;function p(A,k){for(var T=0,L=A.length-1,C=-1;T<=L;){var I=T+L>>1,R=f(A[I],k);R<=0?(R===0&&(C=I),T=I+1):R>0&&(L=I-1)}return C}n.findCell=p;function d(A,k){for(var T=new Array(A.length),L=0,C=T.length;L<C;++L)T[L]=[];for(var I=[],L=0,R=k.length;L<R;++L)for(var B=k[L],N=B.length,D=1,O=1<<N;D<O;++D){I.length=o.popCount(D);for(var $=0,Y=0;Y<N;++Y)D&1<<Y&&(I[$++]=B[Y]);var X=p(A,I);if(!(X<0))for(;T[X++].push(L),!(X>=A.length||f(A[X],I)!==0););}return T}n.incidence=d;function g(A,k){if(!k)return d(v(y(A,0)),A);for(var T=new Array(k),L=0;L<k;++L)T[L]=[];for(var L=0,C=A.length;L<C;++L)for(var I=A[L],R=0,B=I.length;R<B;++R)T[I[R]].push(L);return T}n.dual=g;function m(A){for(var k=[],T=0,L=A.length;T<L;++T)for(var C=A[T],I=C.length|0,R=1,B=1<<I;R<B;++R){for(var N=[],D=0;D<I;++D)R>>>D&1&&N.push(C[D]);k.push(N)}return h(k)}n.explode=m;function y(A,k){if(k<0)return[];for(var T=[],L=(1<<k+1)-1,C=0;C<A.length;++C)for(var I=A[C],R=L;R<1<<I.length;R=o.nextCombination(R)){for(var B=new Array(k+1),N=0,D=0;D<I.length;++D)R&1<<D&&(B[N++]=I[D]);T.push(B)}return h(T)}n.skeleton=y;function _(A){for(var k=[],T=0,L=A.length;T<L;++T)for(var C=A[T],I=0,R=C.length;I<R;++I){for(var B=new Array(C.length-1),N=0,D=0;N<R;++N)N!==I&&(B[D++]=C[N]);k.push(B)}return h(k)}n.boundary=_;function S(A,k){for(var T=new i(k),L=0;L<A.length;++L)for(var C=A[L],I=0;I<C.length;++I)for(var R=I+1;R<C.length;++R)T.link(C[I],C[R]);for(var B=[],N=T.ranks,L=0;L<N.length;++L)N[L]=-1;for(var L=0;L<A.length;++L){var D=T.find(A[L][0]);N[D]<0?(N[D]=B.length,B.push([A[L].slice(0)])):B[N[D]].push(A[L].slice(0))}return B}function M(A){for(var k=v(h(y(A,0))),T=new i(k.length),L=0;L<A.length;++L)for(var C=A[L],I=0;I<C.length;++I)for(var R=p(k,[C[I]]),B=I+1;B<C.length;++B)T.link(R,p(k,[C[B]]));for(var N=[],D=T.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<A.length;++L){var O=T.find(p(k,[A[L][0]]));D[O]<0?(D[O]=N.length,N.push([A[L].slice(0)])):N[D[O]].push(A[L].slice(0))}return N}function w(A,k){return k?S(A,k):M(A)}n.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(r,a,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],295:[function(r,a,n){arguments[4][293][0].apply(n,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(r,a,n){a.exports=o;function o(i){this.roots=new Array(i),this.ranks=new Array(i);for(var s=0;s<i;++s)this.roots[s]=s,this.ranks[s]=0}o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},o.prototype.find=function(i){for(var s=this.roots;s[i]!==i;){var l=s[i];s[i]=s[l],i=l}return i},o.prototype.link=function(i,s){var l=this.find(i),u=this.find(s);if(l!==u){var f=this.ranks,c=this.roots,h=f[l],v=f[u];h<v?c[l]=u:v<h?c[u]=l:(c[u]=l,++f[l])}}},{}],297:[function(r,a,n){a.exports=l;var o=r("robust-orientation"),i=r("simplicial-complex");function s(u,f,c){var h=Math.abs(o(u,f,c)),v=Math.sqrt(Math.pow(f[0]-c[0],2)+Math.pow(f[1]-c[1],2));return h/v}function l(u,f,c){for(var h=f.length,v=u.length,p=new Array(h),d=new Array(h),g=new Array(h),m=new Array(h),y=0;y<h;++y)p[y]=d[y]=-1,g[y]=1/0,m[y]=!1;for(var y=0;y<v;++y){var _=u[y];if(_.length!==2)throw new Error("Input must be a graph");var S=_[1],M=_[0];d[M]!==-1?d[M]=-2:d[M]=S,p[S]!==-1?p[S]=-2:p[S]=M}function w(Z){if(m[Z])return 1/0;var q=p[Z],ae=d[Z];return q<0||ae<0?1/0:s(f[Z],f[q],f[ae])}function A(Z,q){var ae=N[Z],ie=N[q];N[Z]=ie,N[q]=ae,D[ae]=q,D[ie]=Z}function k(Z){return g[N[Z]]}function T(Z){return Z&1?Z-1>>1:(Z>>1)-1}function L(Z){for(var q=k(Z);;){var ae=q,ie=2*Z+1,we=2*(Z+1),Te=Z;if(ie<$){var he=k(ie);he<ae&&(Te=ie,ae=he)}if(we<$){var xe=k(we);xe<ae&&(Te=we)}if(Te===Z)return Z;A(Z,Te),Z=Te}}function C(Z){for(var q=k(Z);Z>0;){var ae=T(Z);if(ae>=0){var ie=k(ae);if(q<ie){A(Z,ae),Z=ae;continue}}return Z}}function I(){if($>0){var Z=N[0];return A(0,$-1),$-=1,L(0),Z}return-1}function R(Z,q){var ae=N[Z];return g[ae]===q?Z:(g[ae]=-1/0,C(Z),I(),g[ae]=q,$+=1,C($-1))}function B(Z){if(!m[Z]){m[Z]=!0;var q=p[Z],ae=d[Z];p[ae]>=0&&(p[ae]=q),d[q]>=0&&(d[q]=ae),D[q]>=0&&R(D[q],w(q)),D[ae]>=0&&R(D[ae],w(ae))}}for(var N=[],D=new Array(h),y=0;y<h;++y){var O=g[y]=w(y);O<1/0?(D[y]=N.length,N.push(y)):D[y]=-1}for(var $=N.length,y=$>>1;y>=0;--y)L(y);for(;;){var Y=I();if(Y<0||g[Y]>c)break;B(Y)}for(var X=[],y=0;y<h;++y)m[y]||(D[y]=X.length,X.push(f[y].slice()));X.length;function ee(Z,q){if(Z[q]<0)return q;var ae=q,ie=q;do{var we=Z[ie];if(!m[ie]||we<0||we===ie||(ie=we,we=Z[ie],!m[ie]||we<0||we===ie))break;ie=we,ae=Z[ae]}while(ae!==ie);for(var Te=q;Te!==ie;Te=Z[Te])Z[Te]=ie;return ie}var Q=[];return u.forEach(function(Z){var q=ee(p,Z[0]),ae=ee(d,Z[1]);if(q>=0&&ae>=0&&q!==ae){var ie=D[q],we=D[ae];ie!==we&&Q.push([ie,we])}}),i.unique(i.normalize(Q)),{positions:X,edges:Q}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(r,a,n){a.exports=s;var o=r("robust-orientation");function i(l,u){var f,c;if(u[0][0]<u[1][0])f=u[0],c=u[1];else if(u[0][0]>u[1][0])f=u[1],c=u[0];else{var h=Math.min(l[0][1],l[1][1]),v=Math.max(l[0][1],l[1][1]),p=Math.min(u[0][1],u[1][1]),d=Math.max(u[0][1],u[1][1]);return v<p?v-p:h>d?h-d:v-d}var g,m;l[0][1]<l[1][1]?(g=l[0],m=l[1]):(g=l[1],m=l[0]);var y=o(c,f,g);return y||(y=o(c,f,m),y)?y:m-c}function s(l,u){var f,c;if(u[0][0]<u[1][0])f=u[0],c=u[1];else if(u[0][0]>u[1][0])f=u[1],c=u[0];else return i(u,l);var h,v;if(l[0][0]<l[1][0])h=l[0],v=l[1];else if(l[0][0]>l[1][0])h=l[1],v=l[0];else return-i(l,u);var p=o(f,c,v),d=o(f,c,h);if(p<0){if(d<=0)return p}else if(p>0){if(d>=0)return p}else if(d)return d;if(p=o(v,h,c),d=o(v,h,f),p<0){if(d<=0)return p}else if(p>0){if(d>=0)return p}else if(d)return d;return c[0]-v[0]}},{"robust-orientation":284}],299:[function(r,a,n){a.exports=d;var o=r("binary-search-bounds"),i=r("functional-red-black-tree"),s=r("robust-orientation"),l=r("./lib/order-segments");function u(g,m,y){this.slabs=g,this.coordinates=m,this.horizontal=y}var f=u.prototype;function c(g,m){return g.y-m}function h(g,m){for(var y=null;g;){var _=g.key,S,M;_[0][0]<_[1][0]?(S=_[0],M=_[1]):(S=_[1],M=_[0]);var w=s(S,M,m);if(w<0)g=g.left;else if(w>0)if(m[0]!==_[1][0])y=g,g=g.right;else{var A=h(g.right,m);if(A)return A;g=g.left}else{if(m[0]!==_[1][0])return g;var A=h(g.right,m);if(A)return A;g=g.left}}return y}f.castUp=function(g){var m=o.le(this.coordinates,g[0]);if(m<0)return-1;this.slabs[m];var y=h(this.slabs[m],g),_=-1;if(y&&(_=y.value),this.coordinates[m]===g[0]){var S=null;if(y&&(S=y.key),m>0){var M=h(this.slabs[m-1],g);M&&(S?l(M.key,S)>0&&(S=M.key,_=M.value):(_=M.value,S=M.key))}var w=this.horizontal[m];if(w.length>0){var A=o.ge(w,g[1],c);if(A<w.length){var k=w[A];if(g[1]===k.y){if(k.closed)return k.index;for(;A<w.length-1&&w[A+1].y===g[1];)if(A=A+1,k=w[A],k.closed)return k.index;if(k.y===g[1]&&!k.start){if(A=A+1,A>=w.length)return _;k=w[A]}}if(k.start)if(S){var T=s(S[0],S[1],[g[0],k.y]);S[0][0]>S[1][0]&&(T=-T),T>0&&(_=k.index)}else _=k.index;else k.y!==g[1]&&(_=k.index)}}}return _};function v(g,m,y,_){this.y=g,this.index=m,this.start=y,this.closed=_}function p(g,m,y,_){this.x=g,this.segment=m,this.create=y,this.index=_}function d(g){for(var m=g.length,y=2*m,_=new Array(y),S=0;S<m;++S){var M=g[S],w=M[0][0]<M[1][0];_[2*S]=new p(M[0][0],M,w,S),_[2*S+1]=new p(M[1][0],M,!w,S)}_.sort(function(B,N){var D=B.x-N.x;return D||(D=B.create-N.create,D)?D:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(N.segment[0][1],N.segment[1][1])});for(var A=i(l),k=[],T=[],L=[],S=0;S<y;){for(var C=_[S].x,I=[];S<y;){var R=_[S];if(R.x!==C)break;S+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(I.push(new v(R.segment[0][1],R.index,!0,!0)),I.push(new v(R.segment[1][1],R.index,!1,!1))):(I.push(new v(R.segment[1][1],R.index,!0,!1)),I.push(new v(R.segment[0][1],R.index,!1,!0)))):R.create?A=A.insert(R.segment,R.index):A=A.remove(R.segment)}k.push(A.root),T.push(C),L.push(I)}return new u(k,T,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(r,a,n){var o=r("robust-dot-product"),i=r("robust-sum");a.exports=u,a.exports.positive=f,a.exports.negative=c;function s(h,v){var p=i(o(h,v),[v[v.length-1]]);return p[p.length-1]}function l(h,v,p,d){var g=d-v,m=-v/g;m<0?m=0:m>1&&(m=1);for(var y=1-m,_=h.length,S=new Array(_),M=0;M<_;++M)S[M]=m*h[M]+y*p[M];return S}function u(h,v){for(var p=[],d=[],g=s(h[h.length-1],v),m=h[h.length-1],y=h[0],_=0;_<h.length;++_,m=y){y=h[_];var S=s(y,v);if(g<0&&S>0||g>0&&S<0){var M=l(m,S,y,g);p.push(M),d.push(M.slice())}S<0?d.push(y.slice()):S>0?p.push(y.slice()):(p.push(y.slice()),d.push(y.slice())),g=S}return{positive:p,negative:d}}function f(h,v){for(var p=[],d=s(h[h.length-1],v),g=h[h.length-1],m=h[0],y=0;y<h.length;++y,g=m){m=h[y];var _=s(m,v);(d<0&&_>0||d>0&&_<0)&&p.push(l(g,_,m,d)),_>=0&&p.push(m.slice()),d=_}return p}function c(h,v){for(var p=[],d=s(h[h.length-1],v),g=h[h.length-1],m=h[0],y=0;y<h.length;++y,g=m){m=h[y];var _=s(m,v);(d<0&&_>0||d>0&&_<0)&&p.push(l(g,_,m,d)),_<=0&&p.push(m.slice()),d=_}return p}},{"robust-dot-product":281,"robust-sum":289}],301:[function(r,a,n){(function(){var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(c){return l(f(c),arguments)}function s(c,h){return i.apply(null,[c].concat(h||[]))}function l(c,h){var v=1,p=c.length,d,g="",m,y,_,S,M,w,A,k;for(m=0;m<p;m++)if(typeof c[m]=="string")g+=c[m];else if(typeof c[m]=="object"){if(_=c[m],_.keys)for(d=h[v],y=0;y<_.keys.length;y++){if(d==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[y],_.keys[y-1]));d=d[_.keys[y]]}else _.param_no?d=h[_.param_no]:d=h[v++];if(o.not_type.test(_.type)&&o.not_primitive.test(_.type)&&d instanceof Function&&(d=d()),o.numeric_arg.test(_.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(i("[sprintf] expecting number but found %T",d));switch(o.number.test(_.type)&&(A=d>=0),_.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,_.width?parseInt(_.width):0);break;case"e":d=_.precision?parseFloat(d).toExponential(_.precision):parseFloat(d).toExponential();break;case"f":d=_.precision?parseFloat(d).toFixed(_.precision):parseFloat(d);break;case"g":d=_.precision?String(Number(d.toPrecision(_.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=_.precision?d.substring(0,_.precision):d;break;case"t":d=String(!!d),d=_.precision?d.substring(0,_.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=_.precision?d.substring(0,_.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=_.precision?d.substring(0,_.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}o.json.test(_.type)?g+=d:(o.number.test(_.type)&&(!A||_.sign)?(k=A?"+":"-",d=d.toString().replace(o.sign,"")):k="",M=_.pad_char?_.pad_char==="0"?"0":_.pad_char.charAt(1):" ",w=_.width-(k+d).length,S=_.width&&w>0?M.repeat(w):"",g+=_.align?k+d+S:M==="0"?k+S+d:S+k+d)}return g}var u=Object.create(null);function f(c){if(u[c])return u[c];for(var h=c,v,p=[],d=0;h;){if((v=o.text.exec(h))!==null)p.push(v[0]);else if((v=o.modulo.exec(h))!==null)p.push("%");else if((v=o.placeholder.exec(h))!==null){if(v[2]){d|=1;var g=[],m=v[2],y=[];if((y=o.key.exec(m))!==null)for(g.push(y[1]);(m=m.substring(y[0].length))!=="";)if((y=o.key_access.exec(m))!==null)g.push(y[1]);else if((y=o.index_access.exec(m))!==null)g.push(y[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");v[2]=g}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:v[0],param_no:v[1],keys:v[2],sign:v[3],pad_char:v[4],align:v[5],width:v[6],precision:v[7],type:v[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");h=h.substring(v[0].length)}return u[c]=p}typeof n!="undefined"&&(n.sprintf=i,n.vsprintf=s),typeof window!="undefined"&&(window.sprintf=i,window.vsprintf=s)})()},{}],302:[function(r,a,n){a.exports=c;var o=r("ndarray-extract-contour"),i=r("zero-crossings"),s={"2d":function(h,v,p){var d=h({order:v,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(m,y,_,S){return m>S|0},vertex:function(m,y,_,S,M,w,A,k,T,L,C,I,R){var B=(A<<0)+(k<<1)+(T<<2)+(L<<3)|0;if(!(B===0||B===15))switch(B){case 0:C.push([m-.5,y-.5]);break;case 1:C.push([m-.25-.25*(S+_-2*R)/(_-S),y-.25-.25*(M+_-2*R)/(_-M)]);break;case 2:C.push([m-.75-.25*(-S-_+2*R)/(S-_),y-.25-.25*(w+S-2*R)/(S-w)]);break;case 3:C.push([m-.5,y-.5-.5*(M+_+w+S-4*R)/(_-M+S-w)]);break;case 4:C.push([m-.25-.25*(w+M-2*R)/(M-w),y-.75-.25*(-M-_+2*R)/(M-_)]);break;case 5:C.push([m-.5-.5*(S+_+w+M-4*R)/(_-S+M-w),y-.5]);break;case 6:C.push([m-.5-.25*(-S-_+w+M)/(S-_+M-w),y-.5-.25*(-M-_+w+S)/(M-_+S-w)]);break;case 7:C.push([m-.75-.25*(w+M-2*R)/(M-w),y-.75-.25*(w+S-2*R)/(S-w)]);break;case 8:C.push([m-.75-.25*(-w-M+2*R)/(w-M),y-.75-.25*(-w-S+2*R)/(w-S)]);break;case 9:C.push([m-.5-.25*(S+_+-w-M)/(_-S+w-M),y-.5-.25*(M+_+-w-S)/(_-M+w-S)]);break;case 10:C.push([m-.5-.5*(-S-_+-w-M+4*R)/(S-_+w-M),y-.5]);break;case 11:C.push([m-.25-.25*(-w-M+2*R)/(w-M),y-.75-.25*(M+_-2*R)/(_-M)]);break;case 12:C.push([m-.5,y-.5-.5*(-M-_+-w-S+4*R)/(M-_+w-S)]);break;case 13:C.push([m-.75-.25*(S+_-2*R)/(_-S),y-.25-.25*(-w-S+2*R)/(w-S)]);break;case 14:C.push([m-.25-.25*(-S-_+2*R)/(S-_),y-.25-.25*(-M-_+2*R)/(M-_)]);break;case 15:C.push([m-.5,y-.5]);break}},cell:function(m,y,_,S,M,w,A,k,T){M?k.push([m,y]):k.push([y,m])}});return function(g,m){var y=[],_=[];return d(g,y,_,m),{positions:y,cells:_}}}};function l(h,v){var p=h.length+"d",d=s[p];if(d)return d(o,h,v)}function u(h,v){for(var p=i(h,v),d=p.length,g=new Array(d),m=new Array(d),y=0;y<d;++y)g[y]=[p[y]],m[y]=[y];return{positions:g,cells:m}}var f={};function c(h,v){if(h.dimension<=0)return{positions:[],cells:[]};if(h.dimension===1)return u(h,v);var p=h.order.join()+"-"+h.dtype,d=f[p],v=+v||0;return d||(d=f[p]=l(h.order,h.dtype)),d(h,v)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(r,a,n){(function(o){(function(){a.exports=f;var i=r("vectorize-text"),s=window||o.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function u(c){for(var h=c.cells,v=c.positions,p=new Float32Array(h.length*6),d=0,g=0,m=0;m<h.length;++m)for(var y=h[m],_=0;_<3;++_){var S=v[y[_]];p[d++]=S[0],p[d++]=S[1]+1.4,g=Math.max(S[0],g)}return{data:p,shape:g}}function f(c,h,v){var v=v||{},p=l[c];p||(p=l[c]={" ":{data:new Float32Array(0),shape:.2}});var d=p[h];if(!d)if(h.length<=1||!/\d/.test(h))d=p[h]=u(i(h,{triangles:!0,font:c,textAlign:v.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=h.split(/(\d|\s)/),m=new Array(g.length),y=0,_=0,S=0;S<g.length;++S)m[S]=f(c,g[S]),y+=m[S].data.length,_+=m[S].shape,S>0&&(_+=.02);for(var M=new Float32Array(y),w=0,A=-.5*_,S=0;S<m.length;++S){for(var k=m[S].data,T=0;T<k.length;T+=2)M[w++]=k[T]+A,M[w++]=k[T+1];A+=m[S].shape+.02}d=p[h]={data:M,shape:_}}return d}}).call(this)}).call(this,r("_process"))},{_process:5,"vectorize-text":311}],304:[function(r,a,n){var o=r("parse-unit");a.exports=u;var i=96;function s(f,c){var h=o(getComputedStyle(f).getPropertyValue(c));return h[0]*u(h[1],f)}function l(f,c){var h=document.createElement("div");h.style["font-size"]="128"+f,c.appendChild(h);var v=s(h,"font-size")/128;return c.removeChild(h),v}function u(f,c){switch(c=c||document.body,f=(f||"px").trim().toLowerCase(),(c===window||c===document)&&(c=document.body),f){case"%":return c.clientHeight/100;case"ch":case"ex":return l(f,c);case"em":return s(c,"font-size");case"rem":return s(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},{"parse-unit":265}],305:[function(r,a,n){a.exports=m;var o=r("filtered-vector"),i=r("gl-mat4/invert"),s=r("gl-mat4/rotate"),l=r("gl-vec3/cross"),u=r("gl-vec3/normalize"),f=r("gl-vec3/dot");function c(y,_,S){return Math.sqrt(Math.pow(y,2)+Math.pow(_,2)+Math.pow(S,2))}function h(y){return Math.min(1,Math.max(-1,y))}function v(y){var _=Math.abs(y[0]),S=Math.abs(y[1]),M=Math.abs(y[2]),w=[0,0,0];_>Math.max(S,M)?w[2]=1:S>Math.max(_,M)?w[0]=1:w[1]=1;for(var A=0,k=0,T=0;T<3;++T)A+=y[T]*y[T],k+=w[T]*y[T];for(var T=0;T<3;++T)w[T]-=k/A*y[T];return u(w,w),w}function p(y,_,S,M,w,A,k,T){this.center=o(S),this.up=o(M),this.right=o(w),this.radius=o([A]),this.angle=o([k,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,_),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=p.prototype;d.setDistanceLimits=function(y,_){y>0?y=Math.log(y):y=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=_},d.getDistanceLimits=function(y){var _=this.radius.bounds[0];return y?(y[0]=Math.exp(_[0][0]),y[1]=Math.exp(_[1][0]),y):[Math.exp(_[0][0]),Math.exp(_[1][0])]},d.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var _=this.computedUp,S=this.computedRight,M=0,w=0,A=0;A<3;++A)w+=_[A]*S[A],M+=_[A]*_[A];for(var k=Math.sqrt(M),T=0,A=0;A<3;++A)S[A]-=_[A]*w/M,T+=S[A]*S[A],_[A]/=k;for(var L=Math.sqrt(T),A=0;A<3;++A)S[A]/=L;var C=this.computedToward;l(C,_,S),u(C,C);for(var I=Math.exp(this.computedRadius[0]),R=this.computedAngle[0],B=this.computedAngle[1],N=Math.cos(R),D=Math.sin(R),O=Math.cos(B),$=Math.sin(B),Y=this.computedCenter,X=N*O,ee=D*O,Q=$,Z=-N*$,q=-D*$,ae=O,ie=this.computedEye,we=this.computedMatrix,A=0;A<3;++A){var Te=X*S[A]+ee*C[A]+Q*_[A];we[4*A+1]=Z*S[A]+q*C[A]+ae*_[A],we[4*A+2]=Te,we[4*A+3]=0}var he=we[1],xe=we[5],Se=we[9],ye=we[2],re=we[6],se=we[10],de=xe*se-Se*re,Me=Se*ye-he*se,Ie=he*re-xe*ye,Ee=c(de,Me,Ie);de/=Ee,Me/=Ee,Ie/=Ee,we[0]=de,we[4]=Me,we[8]=Ie;for(var A=0;A<3;++A)ie[A]=Y[A]+we[2+4*A]*I;for(var A=0;A<3;++A){for(var T=0,qe=0;qe<3;++qe)T+=we[A+4*qe]*ie[qe];we[12+A]=-T}we[15]=1},d.getMatrix=function(y,_){this.recalcMatrix(y);var S=this.computedMatrix;if(_){for(var M=0;M<16;++M)_[M]=S[M];return _}return S};var g=[0,0,0];d.rotate=function(y,_,S,M){if(this.angle.move(y,_,S),M){this.recalcMatrix(y);var w=this.computedMatrix;g[0]=w[2],g[1]=w[6],g[2]=w[10];for(var A=this.computedUp,k=this.computedRight,T=this.computedToward,L=0;L<3;++L)w[4*L]=A[L],w[4*L+1]=k[L],w[4*L+2]=T[L];s(w,w,M,g);for(var L=0;L<3;++L)A[L]=w[4*L],k[L]=w[4*L+1];this.up.set(y,A[0],A[1],A[2]),this.right.set(y,k[0],k[1],k[2])}},d.pan=function(y,_,S,M){_=_||0,S=S||0,M=M||0,this.recalcMatrix(y);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var A=w[1],k=w[5],T=w[9],L=c(A,k,T);A/=L,k/=L,T/=L;var C=w[0],I=w[4],R=w[8],B=C*A+I*k+R*T;C-=A*B,I-=k*B,R-=T*B;var N=c(C,I,R);C/=N,I/=N,R/=N;var D=C*_+A*S,O=I*_+k*S,$=R*_+T*S;this.center.move(y,D,O,$);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+M),this.radius.set(y,Math.log(Y))},d.translate=function(y,_,S,M){this.center.move(y,_||0,S||0,M||0)},d.setMatrix=function(y,_,S,M){var w=1;typeof S=="number"&&(w=S|0),(w<0||w>3)&&(w=1);var A=(w+2)%3;_||(this.recalcMatrix(y),_=this.computedMatrix);var k=_[w],T=_[w+4],L=_[w+8];if(M){var I=Math.abs(k),R=Math.abs(T),B=Math.abs(L),N=Math.max(I,R,B);I===N?(k=k<0?-1:1,T=L=0):B===N?(L=L<0?-1:1,k=T=0):(T=T<0?-1:1,k=L=0)}else{var C=c(k,T,L);k/=C,T/=C,L/=C}var D=_[A],O=_[A+4],$=_[A+8],Y=D*k+O*T+$*L;D-=k*Y,O-=T*Y,$-=L*Y;var X=c(D,O,$);D/=X,O/=X,$/=X;var ee=T*$-L*O,Q=L*D-k*$,Z=k*O-T*D,q=c(ee,Q,Z);ee/=q,Q/=q,Z/=q,this.center.jump(y,ue,Re,Xe),this.radius.idle(y),this.up.jump(y,k,T,L),this.right.jump(y,D,O,$);var ae,ie;if(w===2){var we=_[1],Te=_[5],he=_[9],xe=we*D+Te*O+he*$,Se=we*ee+Te*Q+he*Z;de<0?ae=-Math.PI/2:ae=Math.PI/2,ie=Math.atan2(Se,xe)}else{var ye=_[2],re=_[6],se=_[10],de=ye*k+re*T+se*L,Me=ye*D+re*O+se*$,Ie=ye*ee+re*Q+se*Z;ae=Math.asin(h(de)),ie=Math.atan2(Ie,Me)}this.angle.jump(y,ie,ae),this.recalcMatrix(y);var Ee=_[2],qe=_[6],be=_[10],oe=this.computedMatrix;i(oe,_);var ce=oe[15],ue=oe[12]/ce,Re=oe[13]/ce,Xe=oe[14]/ce,Ke=Math.exp(this.computedRadius[0]);this.center.jump(y,ue-Ee*Ke,Re-qe*Ke,Xe-be*Ke)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},d.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},d.setDistance=function(y,_){_>0&&this.radius.set(y,Math.log(_))},d.lookAt=function(y,_,S,M){this.recalcMatrix(y),_=_||this.computedEye,S=S||this.computedCenter,M=M||this.computedUp;var w=M[0],A=M[1],k=M[2],T=c(w,A,k);if(!(T<1e-6)){w/=T,A/=T,k/=T;var L=_[0]-S[0],C=_[1]-S[1],I=_[2]-S[2],R=c(L,C,I);if(!(R<1e-6)){L/=R,C/=R,I/=R;var B=this.computedRight,N=B[0],D=B[1],O=B[2],$=w*N+A*D+k*O;N-=$*w,D-=$*A,O-=$*k;var Y=c(N,D,O);if(!(Y<.01&&(N=A*I-k*C,D=k*L-w*I,O=w*C-A*L,Y=c(N,D,O),Y<1e-6))){N/=Y,D/=Y,O/=Y,this.up.set(y,w,A,k),this.right.set(y,N,D,O),this.center.set(y,S[0],S[1],S[2]),this.radius.set(y,Math.log(R));var X=A*O-k*D,ee=k*N-w*O,Q=w*D-A*N,Z=c(X,ee,Q);X/=Z,ee/=Z,Q/=Z;var q=w*L+A*C+k*I,ae=N*L+D*C+O*I,ie=X*L+ee*C+Q*I,we=Math.asin(h(q)),Te=Math.atan2(ie,ae),he=this.angle._state,xe=he[he.length-1],Se=he[he.length-2];xe=xe%(2*Math.PI);var ye=Math.abs(xe+2*Math.PI-Te),re=Math.abs(xe-Te),se=Math.abs(xe-2*Math.PI-Te);ye<re&&(xe+=2*Math.PI),se<re&&(xe-=2*Math.PI),this.angle.jump(this.angle.lastT(),xe,Se),this.angle.set(y,Te,we)}}}};function m(y){y=y||{};var _=y.center||[0,0,0],S=y.up||[0,1,0],M=y.right||v(S),w=y.radius||1,A=y.theta||0,k=y.phi||0;if(_=[].slice.call(_,0,3),S=[].slice.call(S,0,3),u(S,S),M=[].slice.call(M,0,3),u(M,M),"eye"in y){var T=y.eye,L=[T[0]-_[0],T[1]-_[1],T[2]-_[2]];l(M,L,S),c(M[0],M[1],M[2])<1e-6?M=v(S):u(M,M),w=c(L[0],L[1],L[2]);var C=f(S,L)/w,I=f(M,L)/w;k=Math.acos(C),A=Math.acos(I)}return w=Math.log(w),new p(y.zoomMin,y.zoomMax,_,S,M,w,A,k)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(r,a,n){a.exports=i;var o=+(Math.pow(2,27)+1);function i(s,l,u){var f=s*l,c=o*s,h=c-s,v=c-h,p=s-v,d=o*l,g=d-l,m=d-g,y=l-m,_=f-v*m,S=_-p*m,M=S-v*y,w=p*y-M;return u?(u[0]=w,u[1]=f,u):[w,f]}},{}],307:[function(r,a,n){a.exports=o;function o(i,s,l){var u=i+s,f=u-i,c=u-f,h=s-f,v=i-c;return l?(l[0]=v+h,l[1]=u,l):[v+h,u]}},{}],308:[function(r,a,n){(function(o){(function(){var i=r("bit-twiddle"),s=r("dup"),l=r("buffer").Buffer;o.__TYPEDARRAY_POOL||(o.__TYPEDARRAY_POOL={UINT8:s([32,0]),UINT16:s([32,0]),UINT32:s([32,0]),BIGUINT64:s([32,0]),INT8:s([32,0]),INT16:s([32,0]),INT32:s([32,0]),BIGINT64:s([32,0]),FLOAT:s([32,0]),DOUBLE:s([32,0]),DATA:s([32,0]),UINT8C:s([32,0]),BUFFER:s([32,0])});var u=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",c=typeof BigInt64Array!="undefined",h=o.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=s([32,0])),h.BIGUINT64||(h.BIGUINT64=s([32,0])),h.BIGINT64||(h.BIGINT64=s([32,0])),h.BUFFER||(h.BUFFER=s([32,0]));var v=h.DATA,p=h.BUFFER;n.free=function(D){if(l.isBuffer(D))p[i.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var O=D.length||D.byteLength,$=i.log2(O)|0;v[$].push(D)}};function d(N){if(!!N){var D=N.length||N.byteLength,O=i.log2(D);v[O].push(N)}}function g(N){d(N.buffer)}n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=g,n.freeArrayBuffer=d,n.freeBuffer=function(D){p[i.log2(D.length)].push(D)},n.malloc=function(D,O){if(O===void 0||O==="arraybuffer")return m(D);switch(O){case"uint8":return y(D);case"uint16":return _(D);case"uint32":return S(D);case"int8":return M(D);case"int16":return w(D);case"int32":return A(D);case"float":case"float32":return k(D);case"double":case"float64":return T(D);case"uint8_clamped":return L(D);case"bigint64":return I(D);case"biguint64":return C(D);case"buffer":return B(D);case"data":case"dataview":return R(D);default:return null}return null};function m(N){var N=i.nextPow2(N),D=i.log2(N),O=v[D];return O.length>0?O.pop():new ArrayBuffer(N)}n.mallocArrayBuffer=m;function y(N){return new Uint8Array(m(N),0,N)}n.mallocUint8=y;function _(N){return new Uint16Array(m(2*N),0,N)}n.mallocUint16=_;function S(N){return new Uint32Array(m(4*N),0,N)}n.mallocUint32=S;function M(N){return new Int8Array(m(N),0,N)}n.mallocInt8=M;function w(N){return new Int16Array(m(2*N),0,N)}n.mallocInt16=w;function A(N){return new Int32Array(m(4*N),0,N)}n.mallocInt32=A;function k(N){return new Float32Array(m(4*N),0,N)}n.mallocFloat32=n.mallocFloat=k;function T(N){return new Float64Array(m(8*N),0,N)}n.mallocFloat64=n.mallocDouble=T;function L(N){return u?new Uint8ClampedArray(m(N),0,N):y(N)}n.mallocUint8Clamped=L;function C(N){return f?new BigUint64Array(m(8*N),0,N):null}n.mallocBigUint64=C;function I(N){return c?new BigInt64Array(m(8*N),0,N):null}n.mallocBigInt64=I;function R(N){return new DataView(m(N),0,N)}n.mallocDataView=R;function B(N){N=i.nextPow2(N);var D=i.log2(N),O=p[D];return O.length>0?O.pop():new l(N)}n.mallocBuffer=B,n.clearCache=function(){for(var D=0;D<32;++D)h.UINT8[D].length=0,h.UINT16[D].length=0,h.UINT32[D].length=0,h.INT8[D].length=0,h.INT16[D].length=0,h.INT32[D].length=0,h.FLOAT[D].length=0,h.DOUBLE[D].length=0,h.BIGUINT64[D].length=0,h.BIGINT64[D].length=0,h.UINT8C[D].length=0,v[D].length=0,p[D].length=0}}).call(this)}).call(this,typeof ll!="undefined"?ll:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(r,a,n){a.exports=o;function o(s){this.roots=new Array(s),this.ranks=new Array(s);for(var l=0;l<s;++l)this.roots[l]=l,this.ranks[l]=0}var i=o.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var s=this.roots.length;return this.roots.push(s),this.ranks.push(0),s},i.find=function(s){for(var l=s,u=this.roots;u[s]!==s;)s=u[s];for(;u[l]!==s;){var f=u[l];u[l]=s,l=f}return s},i.link=function(s,l){var u=this.find(s),f=this.find(l);if(u!==f){var c=this.ranks,h=this.roots,v=c[u],p=c[f];v<p?h[u]=f:p<v?h[f]=u:(h[f]=u,++c[u])}}},{}],310:[function(r,a,n){function o(l,u){for(var f=1,c=l.length,h=l[0],v=l[0],p=1;p<c;++p)if(v=h,h=l[p],u(h,v)){if(p===f){f++;continue}l[f++]=h}return l.length=f,l}function i(l){for(var u=1,f=l.length,c=l[0],h=l[0],v=1;v<f;++v,h=c)if(h=c,c=l[v],c!==h){if(v===u){u++;continue}l[u++]=c}return l.length=u,l}function s(l,u,f){return l.length===0?l:u?(f||l.sort(u),o(l,u)):(f||l.sort(),i(l))}a.exports=s},{}],311:[function(r,a,n){a.exports=l;var o=r("./lib/vtext"),i=null,s=null;typeof document!="undefined"&&(i=document.createElement("canvas"),i.width=8192,i.height=1024,s=i.getContext("2d"));function l(u,f){return(typeof f!="object"||f===null)&&(f={}),o(u,f.canvas||i,f.context||s,f)}},{"./lib/vtext":312}],312:[function(r,a,n){a.exports=C,a.exports.processPixels=L;var o=r("surface-nets"),i=r("ndarray"),s=r("simplify-planar-graph"),l=r("clean-pslg"),u=r("cdt2d"),f=r("planar-graph-to-polyline"),c="b",h="b|",v="i",p="i|",d="sup",g="+",m="+1",y="sub",_="-",S="-1";function M(I,R,B,N){for(var D="<"+I+">",O="</"+I+">",$=D.length,Y=O.length,X=R[0]===g||R[0]===_,ee=0,Q=-Y;ee>-1&&(ee=B.indexOf(D,ee),!(ee===-1||(Q=B.indexOf(O,ee+$),Q===-1)||Q<=ee));){for(var Z=ee;Z<Q+Y;++Z)if(Z<ee+$||Z>=Q)N[Z]=null,B=B.substr(0,Z)+" "+B.substr(Z+1);else if(N[Z]!==null){var q=N[Z].indexOf(R[0]);q===-1?N[Z]+=R:X&&(N[Z]=N[Z].substr(0,q+1)+(1+parseInt(N[Z][q+1]))+N[Z].substr(q+2))}var ae=ee+$,ie=B.substr(ae,Q-ae),we=ie.indexOf(D);we!==-1?ee=we:ee=Q+Y}return N}function w(I,R,B){for(var N=R.textAlign||"start",D=R.textBaseline||"alphabetic",O=[1<<30,1<<30],$=[0,0],Y=I.length,X=0;X<Y;++X)for(var ee=I[X],Q=0;Q<2;++Q)O[Q]=Math.min(O[Q],ee[Q])|0,$[Q]=Math.max($[Q],ee[Q])|0;var Z=0;switch(N){case"center":Z=-.5*(O[0]+$[0]);break;case"right":case"end":Z=-$[0];break;case"left":case"start":Z=-O[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+N+"'")}var q=0;switch(D){case"hanging":case"top":q=-O[1];break;case"middle":q=-.5*(O[1]+$[1]);break;case"alphabetic":case"ideographic":q=-3*B;break;case"bottom":q=-$[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var ae=1/B;return"lineHeight"in R?ae*=+R.lineHeight:"width"in R?ae=R.width/($[0]-O[0]):"height"in R&&(ae=R.height/($[1]-O[1])),I.map(function(ie){return[ae*(ie[0]+Z),ae*(ie[1]+q)]})}function A(I,R,B,N,D,O){B=B.replace(/\n/g,""),O.breaklines===!0?B=B.replace(/\<br\>/g,`
`):B=B.replace(/\<br\>/g," ");var $="",Y=[];for(xe=0;xe<B.length;++xe)Y[xe]=$;O.bolds===!0&&(Y=M(c,h,B,Y)),O.italics===!0&&(Y=M(v,p,B,Y)),O.superscripts===!0&&(Y=M(d,m,B,Y)),O.subscripts===!0&&(Y=M(y,S,B,Y));var X=[],ee="";for(xe=0;xe<B.length;++xe)Y[xe]!==null&&(ee+=B[xe],X.push(Y[xe]));var Q=ee.split(`
`),Z=Q.length,q=Math.round(D*N),ae=N,ie=N*2,we=0,Te=Z*q+ie;I.height<Te&&(I.height=Te),R.fillStyle="#000",R.fillRect(0,0,I.width,I.height),R.fillStyle="#fff";var he,xe,Se,ye,re,se=0,de="";function Me(){if(de!==""){var Xe=R.measureText(de).width;R.fillText(de,ae+Se,ie+ye),Se+=Xe}}function Ie(){return""+Math.round(re)+"px "}function Ee(Xe,Ke){var vt=""+R.font;if(O.subscripts===!0){var Ze=Xe.indexOf(_),Qe=Ke.indexOf(_),Je=Ze>-1?parseInt(Xe[1+Ze]):0,je=Qe>-1?parseInt(Ke[1+Qe]):0;Je!==je&&(vt=vt.replace(Ie(),"?px "),re*=Math.pow(.75,je-Je),vt=vt.replace("?px ",Ie())),ye+=.25*q*(je-Je)}if(O.superscripts===!0){var $e=Xe.indexOf(g),Ye=Ke.indexOf(g),yt=$e>-1?parseInt(Xe[1+$e]):0,_t=Ye>-1?parseInt(Ke[1+Ye]):0;yt!==_t&&(vt=vt.replace(Ie(),"?px "),re*=Math.pow(.75,_t-yt),vt=vt.replace("?px ",Ie())),ye-=.25*q*(_t-yt)}if(O.bolds===!0){var Pt=Xe.indexOf(h)>-1,Tt=Ke.indexOf(h)>-1;!Pt&&Tt&&(Ot?vt=vt.replace("italic ","italic bold "):vt="bold "+vt),Pt&&!Tt&&(vt=vt.replace("bold ",""))}if(O.italics===!0){var Ot=Xe.indexOf(p)>-1,qt=Ke.indexOf(p)>-1;!Ot&&qt&&(vt="italic "+vt),Ot&&!qt&&(vt=vt.replace("italic ",""))}R.font=vt}for(he=0;he<Z;++he){var qe=Q[he]+`
`;for(Se=0,ye=he*q,re=N,de="",xe=0;xe<qe.length;++xe){var be=xe+se<X.length?X[xe+se]:X[X.length-1];$===be?de+=qe[xe]:(Me(),de=qe[xe],be!==void 0&&(Ee($,be),$=be))}Me(),se+=qe.length;var oe=Math.round(Se+2*ae)|0;we<oe&&(we=oe)}var ce=we,ue=ie+q*Z,Re=i(R.getImageData(0,0,ce,ue).data,[ue,ce,4]);return Re.pick(-1,-1,0).transpose(1,0)}function k(I,R){var B=o(I,128);return R?s(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions}}function T(I,R,B,N){var D=k(I,N),O=w(D.positions,R,B),$=D.edges,Y=R.orientation==="ccw";if(l(O,$),R.polygons||R.polygon||R.polyline){for(var X=f($,O),ee=new Array(X.length),Q=0;Q<X.length;++Q){for(var Z=X[Q],q=new Array(Z.length),ae=0;ae<Z.length;++ae){for(var ie=Z[ae],we=new Array(ie.length),Te=0;Te<ie.length;++Te)we[Te]=O[ie[Te]].slice();Y&&we.reverse(),q[ae]=we}ee[Q]=q}return ee}else return R.triangles||R.triangulate||R.triangle?{cells:u(O,$,{delaunay:!1,exterior:!1,interior:!0}),positions:O}:{edges:$,positions:O}}function L(I,R,B){try{return T(I,R,B,!0)}catch{}try{return T(I,R,B,!1)}catch{}return R.polygons||R.polyline||R.polygon?[]:R.triangles||R.triangulate||R.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function C(I,R,B,N){var D=64,O=1.25,$={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};N&&(N.size&&N.size>0&&(D=N.size),N.lineSpacing&&N.lineSpacing>0&&(O=N.lineSpacing),N.styletags&&N.styletags.breaklines&&($.breaklines=!!N.styletags.breaklines),N.styletags&&N.styletags.bolds&&($.bolds=!!N.styletags.bolds),N.styletags&&N.styletags.italics&&($.italics=!!N.styletags.italics),N.styletags&&N.styletags.subscripts&&($.subscripts=!!N.styletags.subscripts),N.styletags&&N.styletags.superscripts&&($.superscripts=!!N.styletags.superscripts)),B.font=[N.fontStyle,N.fontVariant,N.fontWeight,D+"px",N.font].filter(function(X){return X}).join(" "),B.textAlign="start",B.textBaseline="alphabetic",B.direction="ltr";var Y=A(R,B,I,D,O,$);return L(Y,N,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(r,a,n){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function i(L){L.permitHostObjects___&&L.permitHostObjects___(i)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=i);var s=!1;if(typeof WeakMap=="function"){var l=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var u=new l,f=Object.freeze({});if(u.set(f,1),u.get(f)!==1)s=!0;else{a.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,h=Object.defineProperty,v=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var g=new ArrayBuffer(25),m=new Uint8Array(g);crypto.getRandomValues(m),d=p+"rand:"+Array.prototype.map.call(m,function(L){return(L%36).toString(36)}).join("")+"___"}function y(L){return!(L.substr(0,p.length)==p&&L.substr(L.length-3)==="___")}if(h(Object,"getOwnPropertyNames",{value:function(C){return c(C).filter(y)}}),"getPropertyNames"in Object){var _=Object.getPropertyNames;h(Object,"getPropertyNames",{value:function(C){return _(C).filter(y)}})}function S(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var C=L[d];if(C&&C.key===L)return C;if(!!v(L)){C={key:L};try{return h(L,d,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}(function(){var L=Object.freeze;h(Object,"freeze",{value:function(B){return S(B),L(B)}});var C=Object.seal;h(Object,"seal",{value:function(B){return S(B),C(B)}});var I=Object.preventExtensions;h(Object,"preventExtensions",{value:function(B){return S(B),I(B)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var w=!1;function A(){!w&&typeof console!="undefined"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var k=0,T=function(){this instanceof T||A();var L=[],C=[],I=k++;function R(O,$){var Y,X=S(O);return X?I in X?X[I]:$:(Y=L.indexOf(O),Y>=0?C[Y]:$)}function B(O){var $=S(O);return $?I in $:L.indexOf(O)>=0}function N(O,$){var Y,X=S(O);return X?X[I]=$:(Y=L.indexOf(O),Y>=0?C[Y]=$:(Y=L.length,C[Y]=$,L[Y]=O)),this}function D(O){var $=S(O),Y,X;return $?I in $&&delete $[I]:(Y=L.indexOf(O),Y<0?!1:(X=L.length-1,L[Y]=void 0,C[Y]=C[X],L[Y]=L[X],L.length=X,C.length=X,!0))}return Object.create(T.prototype,{get___:{value:M(R)},has___:{value:M(B)},set___:{value:M(N)},delete___:{value:M(D)}})};T.prototype=Object.create(Object.prototype,{get:{value:function(C,I){return this.get___(C,I)},writable:!0,configurable:!0},has:{value:function(C){return this.has___(C)},writable:!0,configurable:!0},set:{value:function(C,I){return this.set___(C,I)},writable:!0,configurable:!0},delete:{value:function(C){return this.delete___(C)},writable:!0,configurable:!0}}),typeof l=="function"?function(){s&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof T||A();var C=new l,I=void 0,R=!1;function B($,Y){return I?C.has($)?C.get($):I.get___($,Y):C.get($,Y)}function N($){return C.has($)||(I?I.has___($):!1)}var D;s?D=function($,Y){return C.set($,Y),C.has($)||(I||(I=new T),I.set($,Y)),this}:D=function($,Y){if(R)try{C.set($,Y)}catch{I||(I=new T),I.set___($,Y)}else C.set($,Y);return this};function O($){var Y=!!C.delete($);return I&&I.delete___($)||Y}return Object.create(T.prototype,{get___:{value:M(B)},has___:{value:M(N)},set___:{value:M(D)},delete___:{value:M(O)},permitHostObjects___:{value:M(function($){if($===i)R=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=T.prototype,a.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),a.exports=T)})()},{}],314:[function(r,a,n){var o=r("./hidden-store.js");a.exports=i;function i(){var s={};return function(l){if((typeof l!="object"||l===null)&&typeof l!="function")throw new Error("Weakmap-shim: Key must be object");var u=l.valueOf(s);return u&&u.identity===s?u:o(l,s)}}},{"./hidden-store.js":315}],315:[function(r,a,n){a.exports=o;function o(i,s){var l={identity:s},u=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(f){return f!==s?u.apply(this,arguments):l},writable:!0}),l}},{}],316:[function(r,a,n){var o=r("./create-store.js");a.exports=i;function i(){var s=o();return{get:function(l,u){var f=s(l);return f.hasOwnProperty("value")?f.value:u},set:function(l,u){return s(l).value=u,this},has:function(l){return"value"in s(l)},delete:function(l){return delete s(l).value}}}},{"./create-store.js":314}],317:[function(r,a,n){function o(){return function(c,h,v,p,d,g){var m=c[0],y=v[0],_=[0],S=y;p|=0;var M=0,w=y;for(M=0;M<m;++M){{var A=h[p]-g,k=h[p+S]-g;A>=0!=k>=0&&d.push(_[0]+.5+.5*(A+k)/(A-k))}p+=w,++_[0]}}}function i(){return o()}var s=i;function l(c){var h={};return function(p,d,g){var m=p.dtype,y=p.order,_=[m,y.join()].join(),S=h[_];return S||(h[_]=S=c([m,y])),S(p.shape.slice(0),p.data,p.stride,p.offset|0,d,g)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}a.exports=f({funcName:"zeroCrossings"})},{}],318:[function(r,a,n){a.exports=i;var o=r("./lib/zc-core");function i(s,l){var u=[];return l=+l||0,o(s.hi(s.shape[0]-1),u,l),u}},{"./lib/zc-core":317}]},{},[6])(6)})})(Ns);var bJe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_Je=Object.prototype.toString,efe=function(e){var t;return _Je.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},tfe=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==void 0)return arguments[e]},rfe=bJe,wJe=efe,jx=tfe,TJe=AJe,afe={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function AJe(e){var t,r=[],a=1,n;if(typeof e=="string")if(rfe[e])r=rfe[e].slice(),n="rgb";else if(e==="transparent")a=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var o=e.slice(1),i=o.length,s=i<=4;a=1,s?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],i===4&&(a=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],i===8&&(a=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var l=t[1],u=l==="rgb",o=l.replace(/a$/,"");n=o;var i=o==="cmyk"?4:o==="gray"?1:3;r=t[2].trim().split(/\s*,\s*/).map(function(v,p){if(/%$/.test(v))return p===i?parseFloat(v)/100:o==="rgb"?parseFloat(v)*255/100:parseFloat(v);if(o[p]==="h"){if(/deg$/.test(v))return parseFloat(v);if(afe[v]!==void 0)return afe[v]}return parseFloat(v)}),l===o&&r.push(1),a=u||r[i]===void 0?1:r[i],r=r.slice(0,i)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),n=e.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(e))n="rgb",r=[e>>>16,(e&65280)>>>8,e&255];else if(wJe(e)){var f=jx(e.r,e.red,e.R,null);f!==null?(n="rgb",r=[f,jx(e.g,e.green,e.G),jx(e.b,e.blue,e.B)]):(n="hsl",r=[jx(e.h,e.hue,e.H),jx(e.s,e.saturation,e.S),jx(e.l,e.lightness,e.L,e.b,e.brightness)]),a=jx(e.a,e.alpha,e.opacity,1),e.opacity!=null&&(a/=100)}else(Array.isArray(e)||ll.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))&&(r=[e[0],e[1],e[2]],n="rgb",a=e.length===4?e[3]:1);return{space:n,values:r,alpha:a}}var SJe={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100,n,o,i,s,l;if(r===0)return l=a*255,[l,l,l];a<.5?o=a*(1+r):o=a+r-a*r,n=2*a-o,s=[0,0,0];for(var u=0;u<3;u++)i=t+1/3*-(u-1),i<0?i++:i>1&&i--,6*i<1?l=n+(o-n)*6*i:2*i<1?l=o:3*i<2?l=n+(o-n)*(2/3-i)*6:l=n,s[u]=l*255;return s}},lS=MJe;function MJe(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}var kJe=TJe,EJe=SJe,HL=lS,nfe=function(t){var r,a=kJe(t);return a.space?(r=Array(3),r[0]=HL(a.values[0],0,255),r[1]=HL(a.values[1],0,255),r[2]=HL(a.values[2],0,255),a.space[0]==="h"&&(r=EJe.rgb(r)),r.push(HL(a.alpha,0,1)),r):[]},H9=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},CJe=nfe,GL=lS,LJe=H9,qx=function(t,r){(r==="float"||!r)&&(r="array"),r==="uint"&&(r="uint8"),r==="uint_clamped"&&(r="uint8_clamped");var a=LJe(r),n=new a(4),o=r!=="uint8"&&r!=="uint8_clamped";return(!t.length||typeof t=="string")&&(t=CJe(t),t[0]/=255,t[1]/=255,t[2]/=255),PJe(t)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:255,o&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(o?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:1):(n[0]=GL(Math.floor(t[0]*255),0,255),n[1]=GL(Math.floor(t[1]*255),0,255),n[2]=GL(Math.floor(t[2]*255),0,255),n[3]=t[3]==null?255:GL(Math.floor(t[3]*255),0,255)),n)};function PJe(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}var IJe=qx;function DJe(e){return e?IJe(e):[0,0,0,1]}var lp=DJe,ife=gn,RJe=Hl.exports,VL=qx,jL=Qo,zJe=us.defaultLine,ofe=nh.isArrayOrTypedArray,G9=VL(zJe),sfe=1;function lfe(e,t){var r=e;return r[3]*=t,r}function ufe(e){if(ife(e))return G9;var t=VL(e);return t.length?t:G9}function ffe(e){return ife(e)?e:sfe}function FJe(e,t,r){var a=e.color,n=ofe(a),o=ofe(t),i=jL.extractOpts(e),s=[],l,u,f,c,h;if(i.colorscale!==void 0?l=jL.makeColorScaleFuncFromTrace(e):l=ufe,n?u=function(p,d){return p[d]===void 0?G9:VL(l(p[d]))}:u=ufe,o?f=function(p,d){return p[d]===void 0?sfe:ffe(p[d])}:f=ffe,n||o)for(var v=0;v<r;v++)c=u(a,v),h=f(t,v),s[v]=lfe(c,h);else s=lfe(VL(a),t);return s}function OJe(e){var t=jL.extractOpts(e),r=t.colorscale;return t.reversescale&&(r=jL.flipScale(t.colorscale)),r.map(function(a){var n=a[0],o=RJe(a[1]),i=o.toRgb();return{index:n,rgb:[i.r,i.g,i.b,i.a]}})}var Oy={formatColor:FJe,parseColorScale:OJe},cfe={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},V9={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"},NJe=Pa;function j9(e,t,r,a){if(!t||!t.visible)return null;for(var n=NJe.getComponentMethod("errorbars","makeComputeError")(t),o=new Array(e.length),i=0;i<e.length;i++){var s=n(+e[i],i);if(a.type==="log"){var l=a.c2l(e[i]),u=e[i]-s[0],f=e[i]+s[1];if(o[i]=[(a.c2l(u,!0)-l)*r,(a.c2l(f,!0)-l)*r],u>0){var c=a.c2l(u);a._lowerLogErrorBound||(a._lowerLogErrorBound=c),a._lowerErrorBound=Math.min(a._lowerLogErrorBound,c)}}else o[i]=[-s[0]*r,s[1]*r]}return o}function BJe(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function $Je(e,t,r){var a=[j9(e.x,e.error_x,t[0],r.xaxis),j9(e.y,e.error_y,t[1],r.yaxis),j9(e.z,e.error_z,t[2],r.zaxis)],n=BJe(a);if(n===0)return null;for(var o=new Array(n),i=0;i<n;i++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(a[l])for(var u=0;u<2;u++)s[u][l]=a[l][i][u];o[i]=s}return o}var UJe=$Je,HJe=Ns.exports.gl_line3d,hfe=Ns.exports.gl_scatter3d,GJe=Ns.exports.gl_error3d,VJe=Ns.exports.gl_mesh3d,jJe=Ns.exports.delaunay_triangulate,Yx=bt.exports,vfe=lp,qL=Oy.formatColor,qJe=G5,q9=cfe,YJe=V9,WJe=rn.exports,XJe=oh.appendArrayPointValue,ZJe=UJe;function dfe(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var Y9=dfe.prototype;Y9.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[t]||this.textLabels[t]===0)&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}};function KJe(e,t,r){var a=(r+1)%3,n=(r+2)%3,o=[],i=[],s;for(s=0;s<e.length;++s){var l=e[s];isNaN(l[a])||!isFinite(l[a])||isNaN(l[n])||!isFinite(l[n])||(o.push([l[a],l[n]]),i.push(s))}var u=jJe(o);for(s=0;s<u.length;++s)for(var f=u[s],c=0;c<f.length;++c)f[c]=i[f[c]];return{positions:e,cells:u,meshColor:t}}function JJe(e){for(var t=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],a=[1,1,1],n=0;n<3;n++){var o=e[n];o&&o.copy_zstyle!==!1&&e[2].visible!==!1&&(o=e[2]),!(!o||!o.visible)&&(t[n]=o.width/2,r[n]=vfe(o.color),a[n]=o.thickness)}return{capSize:t,color:r,lineWidth:a}}function pfe(e){return e==null?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function gfe(e){return e==null?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function QJe(e){var t=0,r=0,a=[t,r];if(Array.isArray(e))for(var n=0;n<e.length;n++)a[n]=[t,r],e[n]&&(a[n][0]=pfe(e[n]),a[n][1]=gfe(e[n]));else a[0]=pfe(e),a[1]=gfe(e);return a}function eQe(e,t){return t(e*4)}function tQe(e){return YJe[e]}function W9(e,t,r,a,n){var o=null;if(Yx.isArrayOrTypedArray(e)){o=[];for(var i=0;i<t;i++)e[i]===void 0?o[i]=a:o[i]=r(e[i],n)}else o=r(e,Yx.identity);return o}function rQe(e,t){var r=[],a=e.fullSceneLayout,n=e.dataScale,o=a.xaxis,i=a.yaxis,s=a.zaxis,l=t.marker,u=t.line,f=t.x||[],c=t.y||[],h=t.z||[],v=f.length,p=t.xcalendar,d=t.ycalendar,g=t.zcalendar,m,y,_,S,M,w;for(M=0;M<v;M++)m=o.d2l(f[M],0,p)*n[0],y=i.d2l(c[M],0,d)*n[1],_=s.d2l(h[M],0,g)*n[2],r[M]=[m,y,_];if(Array.isArray(t.text))w=t.text;else if(t.text!==void 0)for(w=new Array(v),M=0;M<v;M++)w[M]=t.text;function A(Q,Z){var q=a[Q];return WJe.tickText(q,q.d2l(Z),!0).text}var k=t.texttemplate;if(k){var T=e.fullLayout,L=T._d3locale,C=Array.isArray(k),I=C?Math.min(k.length,v):v,R=C?function(Q){return k[Q]}:function(){return k};for(w=new Array(I),M=0;M<I;M++){var B={x:f[M],y:c[M],z:h[M]},N={xLabel:A("xaxis",f[M]),yLabel:A("yaxis",c[M]),zLabel:A("zaxis",h[M])},D={};XJe(D,t,M);var O=t._meta||{};w[M]=Yx.texttemplateString(R(M),N,L,D,B,O)}}if(S={position:r,mode:t.mode,text:w},"line"in t&&(S.lineColor=qL(u,1,v),S.lineWidth=u.width,S.lineDashes=u.dash),"marker"in t){var $=qJe(t);S.scatterColor=qL(l,1,v),S.scatterSize=W9(l.size,v,eQe,20,$),S.scatterMarker=W9(l.symbol,v,tQe,"\u25CF"),S.scatterLineWidth=l.line.width,S.scatterLineColor=qL(l.line,1,v),S.scatterAngle=0}"textposition"in t&&(S.textOffset=QJe(t.textposition),S.textColor=qL(t.textfont,1,v),S.textSize=W9(t.textfont.size,v,Yx.identity,12),S.textFont=t.textfont.family,S.textAngle=0);var Y=["x","y","z"];for(S.project=[!1,!1,!1],S.projectScale=[1,1,1],S.projectOpacity=[1,1,1],M=0;M<3;++M){var X=t.projection[Y[M]];(S.project[M]=X.show)&&(S.projectOpacity[M]=X.opacity,S.projectScale[M]=X.scale)}S.errorBounds=ZJe(t,n,a);var ee=JJe([t.error_x,t.error_y,t.error_z]);return S.errorColor=ee.color,S.errorLineWidth=ee.lineWidth,S.errorCapSize=ee.capSize,S.delaunayAxis=t.surfaceaxis,S.delaunayColor=vfe(t.surfacecolor),S}function mfe(e){if(Yx.isArrayOrTypedArray(e)){var t=e[0];return Yx.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(r){return Math.round(r*255)})+")"}return null}function yfe(e){return Yx.isArrayOrTypedArray(e)?e.length===4&&typeof e[0]=="number"?mfe(e):e.map(mfe):null}Y9.update=function(e){var t=this.scene.glplot.gl,r,a,n,o,i=q9.solid;this.data=e;var s=rQe(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in q9&&(i=q9[s.lineDashes]),this.color=yfe(s.scatterColor)||yfe(s.lineColor),this.dataPoints=s.position,r={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:i[0],dashScale:i[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(r):(this.linePlot=HJe(r),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity&&(l*=e.marker.opacity),a={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(a):(this.scatterPlot=hfe(a),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),o={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(o):(this.textMarkers=hfe(o),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=GJe(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=KJe(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=t,this.delaunayMesh=VJe(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};Y9.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function aQe(e,t){var r=new dfe(e,t.uid);return r.update(t),r}var nQe=aQe,X9={exports:{}},qv=Cl,Z9=bo,K9=Ss.axisHoverFormat,iQe=zn.hovertemplateAttrs,oQe=zn.texttemplateAttrs,xfe=ao,sQe=cfe,lQe=V9,Yv=cn.extendFlat,uQe=Jo.overrideAll,bfe=L_,fQe=qv.line,Wx=qv.marker,cQe=Wx.line,hQe=Yv({width:fQe.width,dash:{valType:"enumerated",values:bfe(sQe),dflt:"solid",description:"Sets the dash style of the lines."}},Z9("line"));function J9(e){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",e,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var Q9=X9.exports=uQe({x:qv.x,y:qv.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:Yv({},qv.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:oQe({},{}),hovertext:Yv({},qv.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:iQe(),xhoverformat:K9("x"),yhoverformat:K9("y"),zhoverformat:K9("z"),mode:Yv({},qv.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:J9("x"),y:J9("y"),z:J9("z")},connectgaps:qv.connectgaps,line:hQe,marker:Yv({symbol:{valType:"enumerated",values:bfe(lQe),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:Yv({},Wx.size,{dflt:8}),sizeref:Wx.sizeref,sizemin:Wx.sizemin,sizemode:Wx.sizemode,opacity:Yv({},Wx.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:Wx.colorbar,line:Yv({width:Yv({},cQe.width,{arrayOk:!1})},Z9("marker.line"))},Z9("marker")),textposition:Yv({},qv.textposition,{dflt:"top center"}),textfont:{color:qv.textfont.color,size:qv.textfont.size,family:Yv({},qv.textfont.family,{arrayOk:!1})},opacity:xfe.opacity,hoverinfo:Yv({},xfe.hoverinfo)},"calc","nested");Q9.x.editType=Q9.y.editType=Q9.z.editType="calc+clearAxisTypes";var _fe=Pa,vQe=bt.exports,eN=Ro,dQe=Wd,pQe=n0,gQe=i0,mQe=X9.exports,yQe=function(t,r,a,n){function o(v,p){return vQe.coerce(t,r,mQe,v,p)}var i=xQe(t,r,o,n);if(!i){r.visible=!1;return}o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),eN.hasLines(r)&&(o("connectgaps"),pQe(t,r,a,n,o)),eN.hasMarkers(r)&&dQe(t,r,a,n,o,{noSelect:!0}),eN.hasText(r)&&(o("texttemplate"),gQe(t,r,n,o,{noSelect:!0}));var s=(r.line||{}).color,l=(r.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",s||l);for(var u=["x","y","z"],f=0;f<3;++f){var c="projection."+u[f];o(c+".show")&&(o(c+".opacity"),o(c+".scale"))}var h=_fe.getComponentMethod("errorbars","supplyDefaults");h(t,r,s||l||a,{axis:"z"}),h(t,r,s||l||a,{axis:"y",inherit:"z"}),h(t,r,s||l||a,{axis:"x",inherit:"z"})};function xQe(e,t,r,a){var n=0,o=r("x"),i=r("y"),s=r("z"),l=_fe.getComponentMethod("calendars","handleTraceDefaults");return l(e,t,["x","y","z"],a),o&&i&&s&&(n=Math.min(o.length,i.length,s.length),t._length=t._xlength=t._ylength=t._zlength=n),n}var bQe=Vg,_Qe=Xd,wfe=function(t,r){var a=[{x:!1,y:!1,trace:r,t:{}}];return bQe(a,r),_Qe(t,r),a},Pl={},wQe=TQe;function TQe(e,t){if(typeof e!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document=="undefined"&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(r.width=t.width),typeof t.height=="number"&&(r.height=t.height);var a=t,n;try{var o=[e];e.indexOf("webgl")===0&&o.push("experimental-"+e);for(var i=0;i<o.length;i++)if(n=r.getContext(o[i],a),n)return n}catch{n=null}return n||null}var AQe=wQe,Tfe=function(t){return AQe("webgl",t)},Afe=Oa.exports,SQe=function(){},tN=function(t){for(var r in t)typeof t[r]=="function"&&(t[r]=SQe);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=Afe.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=Afe.lightLine,a.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",a.appendChild(n),t.container.appendChild(a),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1},Xx=lp,MQe=bt.exports,kQe=["xaxis","yaxis","zaxis"];function Sfe(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var EQe=Sfe.prototype;EQe.merge=function(e,t){for(var r=this,a=0;a<3;++a){var n=t[kQe[a]];if(!n.visible){r.tickEnable[a]=!1,r.labelEnable[a]=!1,r.lineEnable[a]=!1,r.lineTickEnable[a]=!1,r.gridEnable[a]=!1,r.zeroEnable[a]=!1,r.backgroundEnable[a]=!1;continue}r.labels[a]=e._meta?MQe.templateString(n.title.text,e._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[a]=Xx(n.title.font.color)),n.title.font.family&&(r.labelFont[a]=n.title.font.family),n.title.font.size&&(r.labelSize[a]=n.title.font.size)),"showline"in n&&(r.lineEnable[a]=n.showline),"linecolor"in n&&(r.lineColor[a]=Xx(n.linecolor)),"linewidth"in n&&(r.lineWidth[a]=n.linewidth),"showgrid"in n&&(r.gridEnable[a]=n.showgrid),"gridcolor"in n&&(r.gridColor[a]=Xx(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[a]=n.gridwidth),n.type==="log"?r.zeroEnable[a]=!1:"zeroline"in n&&(r.zeroEnable[a]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[a]=Xx(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[a]=n.zerolinewidth),"ticks"in n&&!!n.ticks?r.lineTickEnable[a]=!0:r.lineTickEnable[a]=!1,"ticklen"in n&&(r.lineTickLength[a]=r._defaultLineTickLength[a]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[a]=Xx(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[a]=n.tickwidth),"tickangle"in n&&(r.tickAngle[a]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[a]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[a]=Xx(n.tickfont.color)),n.tickfont.family&&(r.tickFont[a]=n.tickfont.family),n.tickfont.size&&(r.tickSize[a]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(r.lineTickMirror[a]=!0,r.lineMirror[a]=!0):n.mirror===!0?(r.lineTickMirror[a]=!1,r.lineMirror[a]=!0):(r.lineTickMirror[a]=!1,r.lineMirror[a]=!1):r.lineMirror[a]=!1,"showbackground"in n&&n.showbackground!==!1?(r.backgroundEnable[a]=!0,r.backgroundColor[a]=Xx(n.backgroundcolor)):r.backgroundEnable[a]=!1}};function CQe(e,t){var r=new Sfe;return r.merge(e,t),r}var LQe=CQe,PQe=lp,IQe=["xaxis","yaxis","zaxis"];function Mfe(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var DQe=Mfe.prototype;DQe.merge=function(e){for(var t=0;t<3;++t){var r=e[IQe[t]];if(!r.visible){this.enabled[t]=!1,this.drawSides[t]=!1;continue}this.enabled[t]=r.showspikes,this.colors[t]=PQe(r.spikecolor),this.drawSides[t]=r.spikesides,this.lineWidth[t]=r.spikethickness}};function RQe(e){var t=new Mfe;return t.merge(e),t}var zQe=RQe,FQe=UQe,kfe=rn.exports,OQe=bt.exports,NQe=["xaxis","yaxis","zaxis"],BQe=[0,0,0];function $Qe(e){for(var t=new Array(3),r=0;r<3;++r){for(var a=e[r],n=new Array(a.length),o=0;o<a.length;++o)n[o]=a[o].x;t[r]=n}return t}function UQe(e){for(var t=e.axesOptions,r=e.glplot.axesPixels,a=e.fullSceneLayout,n=[[],[],[]],o=0;o<3;++o){var i=a[NQe[o]];if(i._length=(r[o].hi-r[o].lo)*r[o].pixelsPerDataUnit/e.dataScale[o],Math.abs(i._length)===1/0||isNaN(i._length))n[o]=[];else{i._input_range=i.range.slice(),i.range[0]=r[o].lo/e.dataScale[o],i.range[1]=r[o].hi/e.dataScale[o],i._m=1/(e.dataScale[o]*r[o].pixelsPerDataUnit),i.range[0]===i.range[1]&&(i.range[0]-=1,i.range[1]+=1);var s=i.tickmode;if(i.tickmode==="auto"){i.tickmode="linear";var l=i.nticks||OQe.constrain(i._length/40,4,9);kfe.autoTicks(i,Math.abs(i.range[1]-i.range[0])/l)}for(var u=kfe.calcTicks(i,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*e.dataScale[o],i.type==="date"&&(u[f].text=u[f].text.replace(/\<br\>/g," "));n[o]=u,i.tickmode=s}}t.ticks=n;for(var o=0;o<3;++o){BQe[o]=.5*(e.glplot.bounds[0][o]+e.glplot.bounds[1][o]);for(var f=0;f<2;++f)t.bounds[f][o]=e.glplot.bounds[f][o]}e.contourLevels=$Qe(n)}var Efe=Ns.exports.gl_plot3d,HQe=Efe.createCamera,Cfe=Efe.createScene,GQe=Tfe,VQe=vE,YL=Pa,lc=bt.exports,WL=lc.preserveDrawingBuffer(),XL=rn.exports,up=Rs,jQe=lp,qQe=tN,YQe=mte,WQe=LQe,XQe=zQe,ZQe=FQe,uS,ZL;function Lfe(e,t){var r=document.createElement("div"),a=e.container;this.graphDiv=e.graphDiv;var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",r.appendChild(n),this.svgContainer=n,r.id=e.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",a.appendChild(r),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=WQe(t,t[this.id]),this.spikeOptions=XQe(t[this.id]),this.container=r,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=YL.getComponentMethod("annotations3d","convert"),this.drawAnnotations=YL.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var tf=Lfe.prototype;tf.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:WL,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!ZL&&(uS=document.createElement("canvas"),ZL=GQe({canvas:uS,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!ZL))throw new Error("error creating static canvas/context for image server");t.gl=ZL,t.canvas=uS}return t};var Pfe=!0;tf.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),r=!0;try{e.glplot=Cfe(t)}catch{if(e.staticMode||!Pfe||WL)r=!1;else{lc.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{WL=t.glOptions.preserveDrawingBuffer=!0,e.glplot=Cfe(t)}catch{WL=t.glOptions.preserveDrawingBuffer=!1,r=!1}}}return Pfe=!1,r};tf.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,r=t.projection.type==="orthographic";e.camera=HQe(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})};tf.initializeGLPlot=function(){var e=this;e.initializeGLCamera();var t=e.tryCreatePlot();if(!t)return qQe(e);e.traces={},e.make4thDimension();var r=e.graphDiv,a=r.layout,n=function(){var i={};return e.isCameraChanged(a)&&(i[e.id+".camera"]=e.getCamera()),e.isAspectChanged(a)&&(i[e.id+".aspectratio"]=e.glplot.getAspectratio(),a[e.id].aspectmode!=="manual"&&(e.fullSceneLayout.aspectmode=a[e.id].aspectmode=i[e.id+".aspectmode"]="manual")),i},o=function(i){if(i.fullSceneLayout.dragmode!==!1){var s=n();i.saveLayout(a),i.graphDiv.emit("plotly_relayout",s)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",function(){o(e)}),e.glplot.canvas.addEventListener("wheel",function(i){if(r._context._scrollZoom.gl3d){if(e.camera._ortho){var s=i.deltaX>i.deltaY?1.1:1/1.1,l=e.glplot.getAspectratio();e.glplot.setAspectratio({x:s*l.x,y:s*l.y,z:s*l.z})}o(e)}},VQe?{passive:!1}:!1),e.glplot.canvas.addEventListener("mousemove",function(){if(e.fullSceneLayout.dragmode!==!1&&e.camera.mouseListener.buttons!==0){var i=n();e.graphDiv.emit("plotly_relayouting",i)}}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(i){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:i,layer:e.id})},!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0};tf.render=function(){var e=this,t=e.graphDiv,r,a=e.svgContainer,n=e.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var o=t._fullLayout._invScaleX,i=t._fullLayout._invScaleY,s=n.width*o,l=n.height*i;a.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),a.setAttributeNS(null,"width",s),a.setAttributeNS(null,"height",l),ZQe(e),e.glplot.axes.update(e.axesOptions);for(var u=Object.keys(e.traces),f=null,c=e.glplot.selection,h=0;h<u.length;++h)r=e.traces[u[h]],r.data.hoverinfo!=="skip"&&r.handlePick(c)&&(f=r),r.setContourLevels&&r.setContourLevels();function v(L,C,I){var R=e.fullSceneLayout[L+"axis"];return R.type!=="log"&&(C=R.d2l(C)),XL.hoverLabelText(R,C,I)}if(f!==null){var p=YQe(e.glplot.cameraParams,c.dataCoordinate);r=f.data;var d=t._fullData[r.index],g=c.index,m={xLabel:v("x",c.traceCoordinate[0],r.xhoverformat),yLabel:v("y",c.traceCoordinate[1],r.yhoverformat),zLabel:v("z",c.traceCoordinate[2],r.zhoverformat)},y=up.castHoverinfo(d,e.fullLayout,g),_=(y||"").split("+"),S=y&&y==="all";!d.hovertemplate&&!S&&(_.indexOf("x")===-1&&(m.xLabel=void 0),_.indexOf("y")===-1&&(m.yLabel=void 0),_.indexOf("z")===-1&&(m.zLabel=void 0),_.indexOf("text")===-1&&(c.textLabel=void 0),_.indexOf("name")===-1&&(f.name=void 0));var M,w=[];r.type==="cone"||r.type==="streamtube"?(m.uLabel=v("x",c.traceCoordinate[3],r.uhoverformat),(S||_.indexOf("u")!==-1)&&w.push("u: "+m.uLabel),m.vLabel=v("y",c.traceCoordinate[4],r.vhoverformat),(S||_.indexOf("v")!==-1)&&w.push("v: "+m.vLabel),m.wLabel=v("z",c.traceCoordinate[5],r.whoverformat),(S||_.indexOf("w")!==-1)&&w.push("w: "+m.wLabel),m.normLabel=c.traceCoordinate[6].toPrecision(3),(S||_.indexOf("norm")!==-1)&&w.push("norm: "+m.normLabel),r.type==="streamtube"&&(m.divergenceLabel=c.traceCoordinate[7].toPrecision(3),(S||_.indexOf("divergence")!==-1)&&w.push("divergence: "+m.divergenceLabel)),c.textLabel&&w.push(c.textLabel),M=w.join("<br>")):r.type==="isosurface"||r.type==="volume"?(m.valueLabel=XL.hoverLabelText(e._mockAxis,e._mockAxis.d2l(c.traceCoordinate[3]),r.valuehoverformat),w.push("value: "+m.valueLabel),c.textLabel&&w.push(c.textLabel),M=w.join("<br>")):M=c.textLabel;var A={x:c.traceCoordinate[0],y:c.traceCoordinate[1],z:c.traceCoordinate[2],data:d._input,fullData:d,curveNumber:d.index,pointNumber:g};up.appendArrayPointValue(A,d,g),r._module.eventData&&(A=d._module.eventData(A,c,d,{},g));var k={points:[A]};if(e.fullSceneLayout.hovermode){var T=[];up.loneHover({trace:d,x:(.5+.5*p[0]/p[3])*s,y:(.5-.5*p[1]/p[3])*l,xLabel:m.xLabel,yLabel:m.yLabel,zLabel:m.zLabel,text:M,name:f.name,color:up.castHoverOption(d,g,"bgcolor")||f.color,borderColor:up.castHoverOption(d,g,"bordercolor"),fontFamily:up.castHoverOption(d,g,"font.family"),fontSize:up.castHoverOption(d,g,"font.size"),fontColor:up.castHoverOption(d,g,"font.color"),nameLength:up.castHoverOption(d,g,"namelength"),textAlign:up.castHoverOption(d,g,"align"),hovertemplate:lc.castOption(d,g,"hovertemplate"),hovertemplateLabels:lc.extendFlat({},A,m),eventData:[A]},{container:a,gd:t,inOut_bbox:T}),A.bbox=T[0]}c.buttons&&c.distance<5?t.emit("plotly_click",k):t.emit("plotly_hover",k),this.oldEventData=k}else up.loneUnhover(a),this.oldEventData&&t.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)};tf.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){if(e.glplot.gl.isContextLost()){requestAnimationFrame(t);return}if(!e.initializeGLPlot()){lc.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}e.plot.apply(e,e.plotArgs)};requestAnimationFrame(t)};var fS=["xaxis","yaxis","zaxis"];function KQe(e,t,r){for(var a=e.fullSceneLayout,n=0;n<3;n++){var o=fS[n],i=o.charAt(0),s=a[o],l=t[i],u=t[i+"calendar"],f=t["_"+i+"length"];if(!lc.isArrayOrTypedArray(l))r[0][n]=Math.min(r[0][n],0),r[1][n]=Math.max(r[1][n],f-1);else for(var c,h=0;h<(f||l.length);h++)if(lc.isArrayOrTypedArray(l[h]))for(var v=0;v<l[h].length;++v)c=s.d2l(l[h][v],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c));else c=s.d2l(l[h],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c))}}function JQe(e,t){for(var r=e.fullSceneLayout,a=r.annotations||[],n=0;n<3;n++)for(var o=fS[n],i=o.charAt(0),s=r[o],l=0;l<a.length;l++){var u=a[l];if(u.visible){var f=s.r2l(u[i]);!isNaN(f)&&isFinite(f)&&(t[0][n]=Math.min(t[0][n],f),t[1][n]=Math.max(t[1][n],f))}}}tf.plot=function(e,t,r){var a=this;if(a.plotArgs=[e,t,r],a.glplot.contextLost)return;var n,o,i,s,l,u,f=t[a.id],c=r[a.id];a.fullLayout=t,a.fullSceneLayout=f,a.axesOptions.merge(t,f),a.spikeOptions.merge(f),a.setViewport(f),a.updateFx(f.dragmode,f.hovermode),a.camera.enableWheel=a.graphDiv._context._scrollZoom.gl3d,a.glplot.setClearColor(jQe(f.bgcolor)),a.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(i=0;i<e.length;++i)n=e[i],!(n.visible!==!0||n._length===0)&&KQe(this,n,h);JQe(this,h);var v=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?v[s]=1:v[s]=1/(h[1][s]-h[0][s]);for(a.dataScale=v,a.convertAnnotations(this),i=0;i<e.length;++i)n=e[i],!(n.visible!==!0||n._length===0)&&(o=a.traces[n.uid],o?o.data.type===n.type?o.update(n):(o.dispose(),o=n._module.plot(this,n),a.traces[n.uid]=o):(o=n._module.plot(this,n),a.traces[n.uid]=o),o.name=n.name);var p=Object.keys(a.traces);e:for(i=0;i<p.length;++i){for(s=0;s<e.length;++s)if(e[s].uid===p[i]&&e[s].visible===!0&&e[s]._length!==0)continue e;o=a.traces[p[i]],o.dispose(),delete a.traces[p[i]]}a.glplot.objects.sort(function(ee,Q){return ee._trace.data.index-Q._trace.data.index});var d=[[0,0,0],[0,0,0]],g=[],m={};for(i=0;i<3;++i){if(l=f[fS[i]],u=l.type,u in m?(m[u].acc*=v[i],m[u].count+=1):m[u]={acc:v[i],count:1},l.autorange){d[0][i]=1/0,d[1][i]=-1/0;var y=a.glplot.objects,_=a.fullSceneLayout.annotations||[],S=l._name.charAt(0);for(s=0;s<y.length;s++){var M=y[s],w=M.bounds,A=M._trace.data._pad||0;M.constructor.name==="ErrorBars"&&l._lowerLogErrorBound?d[0][i]=Math.min(d[0][i],l._lowerLogErrorBound):d[0][i]=Math.min(d[0][i],w[0][i]/v[i]-A),d[1][i]=Math.max(d[1][i],w[1][i]/v[i]+A)}for(s=0;s<_.length;s++){var k=_[s];if(k.visible){var T=l.r2l(k[S]);d[0][i]=Math.min(d[0][i],T),d[1][i]=Math.max(d[1][i],T)}}if("rangemode"in l&&l.rangemode==="tozero"&&(d[0][i]=Math.min(d[0][i],0),d[1][i]=Math.max(d[1][i],0)),d[0][i]>d[1][i])d[0][i]=-1,d[1][i]=1;else{var L=d[1][i]-d[0][i];d[0][i]-=L/32,d[1][i]+=L/32}if(l.autorange==="reversed"){var C=d[0][i];d[0][i]=d[1][i],d[1][i]=C}}else{var I=l.range;d[0][i]=l.r2l(I[0]),d[1][i]=l.r2l(I[1])}d[0][i]===d[1][i]&&(d[0][i]-=1,d[1][i]+=1),g[i]=d[1][i]-d[0][i],a.glplot.setBounds(i,{min:d[0][i]*v[i],max:d[1][i]*v[i]})}var R,B=f.aspectmode;if(B==="cube")R=[1,1,1];else if(B==="manual"){var N=f.aspectratio;R=[N.x,N.y,N.z]}else if(B==="auto"||B==="data"){var D=[1,1,1];for(i=0;i<3;++i){l=f[fS[i]],u=l.type;var O=m[u];D[i]=Math.pow(O.acc,1/O.count)/v[i]}B==="data"||Math.max.apply(null,D)/Math.min.apply(null,D)<=4?R=D:R=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");f.aspectratio.x=c.aspectratio.x=R[0],f.aspectratio.y=c.aspectratio.y=R[1],f.aspectratio.z=c.aspectratio.z=R[2],a.glplot.setAspectratio(f.aspectratio),a.viewInitial.aspectratio||(a.viewInitial.aspectratio={x:f.aspectratio.x,y:f.aspectratio.y,z:f.aspectratio.z}),a.viewInitial.aspectmode||(a.viewInitial.aspectmode=f.aspectmode);var $=f.domain||null,Y=t._size||null;if($&&Y){var X=a.container.style;X.position="absolute",X.left=Y.l+$.x[0]*Y.w+"px",X.top=Y.t+(1-$.y[1])*Y.h+"px",X.width=Y.w*($.x[1]-$.x[0])+"px",X.height=Y.h*($.y[1]-$.y[0])+"px"}a.glplot.redraw()};tf.destroy=function(){var e=this;!e.glplot||(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)};function QQe(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function eet(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:e._ortho===!0?"orthographic":"perspective"}}}tf.getCamera=function(){var e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),eet(e.camera)};tf.setViewport=function(e){var t=this,r=e.camera;t.camera.lookAt.apply(this,QQe(r)),t.glplot.setAspectratio(e.aspectratio);var a=r.projection.type==="orthographic",n=t.camera._ortho;a!==n&&(t.glplot.redraw(),t.glplot.clearRGBA(),t.glplot.dispose(),t.initializeGLPlot())};tf.isCameraChanged=function(e){var t=this,r=t.getCamera(),a=lc.nestedProperty(e,t.id+".camera"),n=a.get();function o(u,f,c,h){var v=["up","center","eye"],p=["x","y","z"];return f[v[c]]&&u[v[c]][p[h]]===f[v[c]][p[h]]}var i=!1;if(n===void 0)i=!0;else{for(var s=0;s<3;s++)for(var l=0;l<3;l++)if(!o(r,n,s,l)){i=!0;break}(!n.projection||r.projection&&r.projection.type!==n.projection.type)&&(i=!0)}return i};tf.isAspectChanged=function(e){var t=this,r=t.glplot.getAspectratio(),a=lc.nestedProperty(e,t.id+".aspectratio"),n=a.get();return n===void 0||n.x!==r.x||n.y!==r.y||n.z!==r.z};tf.saveLayout=function(e){var t=this,r=t.fullLayout,a,n,o,i,s,l,u=t.isCameraChanged(e),f=t.isAspectChanged(e),c=u||f;if(c){var h={};if(u&&(a=t.getCamera(),n=lc.nestedProperty(e,t.id+".camera"),o=n.get(),h[t.id+".camera"]=o),f&&(i=t.glplot.getAspectratio(),s=lc.nestedProperty(e,t.id+".aspectratio"),l=s.get(),h[t.id+".aspectratio"]=l),YL.call("_storeDirectGUIEdit",e,r._preGUI,h),u){n.set(a);var v=lc.nestedProperty(r,t.id+".camera");v.set(a)}if(f){s.set(i);var p=lc.nestedProperty(r,t.id+".aspectratio");p.set(i),t.glplot.redraw()}}return c};tf.updateFx=function(e,t){var r=this,a=r.camera;if(a)if(e==="orbit")a.mode="orbit",a.keyBindingMode="rotate";else if(e==="turntable"){a.up=[0,0,1],a.mode="turntable",a.keyBindingMode="rotate";var n=r.graphDiv,o=n._fullLayout,i=r.fullSceneLayout.camera,s=i.up.x,l=i.up.y,u=i.up.z;if(u/Math.sqrt(s*s+l*l+u*u)<.999){var f=r.id+".camera.up",c={x:0,y:0,z:1},h={};h[f]=c;var v=n.layout;YL.call("_storeDirectGUIEdit",v,o._preGUI,h),i.up=c,lc.nestedProperty(v,f).set(c)}}else a.keyBindingMode=e;r.fullSceneLayout.hovermode=t};function tet(e,t,r){for(var a=0,n=r-1;a<n;++a,--n)for(var o=0;o<t;++o)for(var i=0;i<4;++i){var s=4*(t*a+o)+i,l=4*(t*n+o)+i,u=e[s];e[s]=e[l],e[l]=u}}function ret(e,t,r){for(var a=0;a<r;++a)for(var n=0;n<t;++n){var o=4*(t*a+n),i=e[o+3];if(i>0)for(var s=255/i,l=0;l<3;++l)e[o+l]=Math.min(s*e[o+l],255)}}tf.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(uS),t.glplot.redraw();var r=t.glplot.gl,a=r.drawingBufferWidth,n=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var o=new Uint8Array(a*n*4);r.readPixels(0,0,a,n,r.RGBA,r.UNSIGNED_BYTE,o),tet(o,a,n),ret(o,a,n);var i=document.createElement("canvas");i.width=a,i.height=n;var s=i.getContext("2d"),l=s.createImageData(a,n);l.data.set(o),s.putImageData(l,0,0);var u;switch(e){case"jpeg":u=i.toDataURL("image/jpeg");break;case"webp":u=i.toDataURL("image/webp");break;default:u=i.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(uS),u};tf.setConvert=function(){for(var e=this,t=0;t<3;t++){var r=e.fullSceneLayout[fS[t]];XL.setConvert(r,e.fullLayout),r.setScale=lc.noop}};tf.make4thDimension=function(){var e=this,t=e.graphDiv,r=t._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},XL.setConvert(e._mockAxis,r)};var aet=Lfe,net={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}},iet=Oa.exports,ei=Zu,rN=cn.extendFlat,oet=Jo.overrideAll,Ife=oet({visible:ei.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:iet.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:ei.color,categoryorder:ei.categoryorder,categoryarray:ei.categoryarray,title:{text:ei.title.text,font:ei.title.font},type:rN({},ei.type,{values:["-","linear","log","date","category"]}),autotypenumbers:ei.autotypenumbers,autorange:ei.autorange,rangemode:ei.rangemode,range:rN({},ei.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:ei.tickmode,nticks:ei.nticks,tick0:ei.tick0,dtick:ei.dtick,tickvals:ei.tickvals,ticktext:ei.ticktext,ticks:ei.ticks,mirror:ei.mirror,ticklen:ei.ticklen,tickwidth:ei.tickwidth,tickcolor:ei.tickcolor,showticklabels:ei.showticklabels,tickfont:ei.tickfont,tickangle:ei.tickangle,tickprefix:ei.tickprefix,showtickprefix:ei.showtickprefix,ticksuffix:ei.ticksuffix,showticksuffix:ei.showticksuffix,showexponent:ei.showexponent,exponentformat:ei.exponentformat,minexponent:ei.minexponent,separatethousands:ei.separatethousands,tickformat:ei.tickformat,tickformatstops:ei.tickformatstops,hoverformat:ei.hoverformat,showline:ei.showline,linecolor:ei.linecolor,linewidth:ei.linewidth,showgrid:ei.showgrid,gridcolor:rN({},ei.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:ei.gridwidth,zeroline:ei.zeroline,zerolinecolor:ei.zerolinecolor,zerolinewidth:ei.zerolinewidth,_deprecated:{title:ei._deprecated.title,titlefont:ei._deprecated.titlefont}},"plot","from-root"),aN=Ife,set=Fo.attributes,nN=cn.extendFlat,uet=bt.exports.counterRegex;function iN(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}var Dfe={_arrayAttrRegexps:[uet("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:nN(iN(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:nN(iN(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:nN(iN(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:set({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:aN,yaxis:aN,zaxis:aN,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}},fet=Hl.exports.mix,Rfe=bt.exports,cet=si,het=Ife,vet=Eee,det=WE,zfe=["xaxis","yaxis","zaxis"],pet=100*(204-68)/(255-68),get=function(t,r,a){var n,o;function i(u,f){return Rfe.coerce(n,o,het,u,f)}for(var s=0;s<zfe.length;s++){var l=zfe[s];n=t[l]||{},o=cet.newContainer(r,l),o._id=l[0]+a.scene,o._name=l,vet(n,o,i,a),det(n,o,i,{font:a.font,letter:l[0],data:a.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:a.bgColor,calendar:a.calendar},a.fullLayout),i("gridcolor",fet(o.color,a.bgColor,pet).toRgbString()),i("title.text",l[0]),o.setScale=Rfe.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",o.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}},met=bt.exports,yet=Oa.exports,xet=Pa,bet=R2,_et=get,Ffe=Dfe,wet=Ml.getSubplotData,Ofe="gl3d",Tet=function(t,r,a){var n=r._basePlotModules.length>1;function o(i){if(!n){var s=met.validate(t[i],Ffe[i]);if(s)return t[i]}}bet(t,r,a,{type:Ofe,attributes:Ffe,handleDefaults:Aet,fullLayout:r,font:r.font,fullData:a,getDfltFromLayout:o,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})};function Aet(e,t,r,a){for(var n=r("bgcolor"),o=yet.combine(n,a.paper_bgcolor),i=["up","center","eye"],s=0;s<i.length;s++)r("camera."+i[s]+".x"),r("camera."+i[s]+".y"),r("camera."+i[s]+".z");r("camera.projection.type");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),u=l?"manual":"auto",f=r("aspectmode",u);l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},f==="manual"&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var c=wet(a.fullData,Ofe,a.id);_et(e,t,{font:a.font,scene:a.id,data:c,bgColor:o,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),xet.getComponentMethod("annotations3d","handleDefaults")(e,t,a);var h=a.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",e.camera&&e.camera.up){var v=e.camera.up.x,p=e.camera.up.y,d=e.camera.up.z;d!==0&&(!v||!p||!d||d/Math.sqrt(v*v+p*p+d*d)>.999)&&(h="turntable")}else h="turntable";r("dragmode",h),r("hovermode",a.getDfltFromLayout("hovermode"))}var Met=Jo.overrideAll,ket=ay,Eet=aet,Cet=Ml.getSubplotData,Let=bt.exports,Pet=Xh,iw="gl3d",oN="scene";Pl.name=iw;Pl.attr=oN;Pl.idRoot=oN;Pl.idRegex=Pl.attrRegex=Let.counterRegex("scene");Pl.attributes=net;Pl.layoutAttributes=Dfe;Pl.baseLayoutAttrOverrides=Met({hoverlabel:ket.hoverlabel},"plot","nested");Pl.supplyLayoutDefaults=Tet;Pl.plot=function(t){for(var r=t._fullLayout,a=t._fullData,n=r._subplots[iw],o=0;o<n.length;o++){var i=n[o],s=Cet(a,iw,i),l=r[i],u=l.camera,f=l._scene;f||(f=new Eet({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:u},r),l._scene=f),f.viewInitial||(f.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),f.plot(s,r,t.layout)}};Pl.clean=function(e,t,r,a){for(var n=a._subplots[iw]||[],o=0;o<n.length;o++){var i=n[o];!t[i]&&!!a[i]._scene&&(a[i]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+i).remove())}};Pl.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[iw],a=t._size,n=0;n<r.length;n++){var o=t[r[n]],i=o.domain,s=o._scene,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:Pet.svg,"xlink:href":l,x:a.l+a.w*i.x[0],y:a.t+a.h*(1-i.y[1]),width:a.w*(i.x[1]-i.x[0]),height:a.h*(i.y[1]-i.y[0]),preserveAspectRatio:"none"}),s.destroy()}};Pl.cleanId=function(t){if(!!t.match(/^scene[0-9]*$/)){var r=t.substr(5);return r==="1"&&(r=""),oN+r}};Pl.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[iw],a=0;a<r.length;a++){var n=t[r[a]]._scene;n.updateFx(t.dragmode,t.hovermode)}};var Iet={plot:nQe,attributes:X9.exports,markerSymbols:V9,supplyDefaults:yQe,colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:wfe,moduleType:"trace",name:"scatter3d",basePlotModule:Pl,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},Det=Iet,cS={exports:{}},Nfe=Oa.exports,KL=bo,sN=Ss.axisHoverFormat,Ret=zn.hovertemplateAttrs,Bfe=ao,ow=cn.extendFlat,zet=Jo.overrideAll;function lN(e){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",e,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function uN(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",e,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:lN("x"),y:lN("y"),z:lN("z")},color:{valType:"color",dflt:Nfe.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",e,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:Nfe.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var JL=cS.exports=zet(ow({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:Ret(),xhoverformat:sN("x"),yhoverformat:sN("y"),zhoverformat:sN("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},KL("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:uN("x"),y:uN("y"),z:uN("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:ow({},KL.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:ow({},KL.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:ow({},KL.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:ow({},Bfe.hoverinfo),showlegend:ow({},Bfe.showlegend,{dflt:!1})}),"calc","nested");JL.x.editType=JL.y.editType=JL.z.editType="calc+clearAxisTypes";JL.transforms=void 0;var Fet=Pa,$fe=bt.exports,Oet=su,Net=cS.exports,fN=.1;function Bet(e,t){for(var r=[],a=32,n=0;n<a;n++){var o=n/(a-1),i=t+(1-t)*(1-Math.pow(Math.sin(e*o*Math.PI),2));r.push([o,Math.max(0,Math.min(1,i))])}return r}function $et(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(a.length!==2||+a[0]<t)return!1;t=+a[0]}return!0}function Uet(e,t,r,a){var n,o;function i(g,m){return $fe.coerce(e,t,Net,g,m)}var s=i("x"),l=i("y"),u=i("z");if(!u||!u.length||(s?s.length<1:!1)||(l?l.length<1:!1)){t.visible=!1;return}t._xlength=Array.isArray(s)&&$fe.isArrayOrTypedArray(s[0])?u.length:u[0].length,t._ylength=u.length;var f=Fet.getComponentMethod("calendars","handleTraceDefaults");f(e,t,["x","y","z"],a),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(g){i(g)});var c=i("surfacecolor"),h=["x","y","z"];for(n=0;n<3;++n){var v="contours."+h[n],p=i(v+".show"),d=i(v+".highlight");if(p||d)for(o=0;o<3;++o)i(v+".project."+h[o]);p&&(i(v+".color"),i(v+".width"),i(v+".usecolormap")),d&&(i(v+".highlightcolor"),i(v+".highlightwidth")),i(v+".start"),i(v+".end"),i(v+".size")}c||(cN(e,"zmin","cmin"),cN(e,"zmax","cmax"),cN(e,"zauto","cauto")),Oet(e,t,a,i,{prefix:"",cLetter:"c"}),Ufe(e,t,a,i),t._length=null}function Ufe(e,t,r,a){var n=a("opacityscale");n==="max"?t.opacityscale=[[0,fN],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,fN]]:n==="extremes"?t.opacityscale=Bet(1,fN):$et(n)||(t.opacityscale=void 0)}function cN(e,t,r){t in e&&!(r in e)&&(e[r]=e[t])}var Hfe={supplyDefaults:Uet,opacityscaleDefaults:Ufe},Gfe=ih,Het=function(t,r){r.surfacecolor?Gfe(t,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):Gfe(t,r,{vals:r.z,containerStr:"",cLetter:"c"})},Get=Ns.exports.gl_surface3d,sw=Ns.exports.ndarray,Vet=Ns.exports.ndarray_linear_interpolate.d2,jet=R7,qet=z7,QL=bt.exports.isArrayOrTypedArray,Yet=Oy.parseColorScale,Vfe=lp,Wet=Qo.extractOpts;function jfe(e,t,r){this.scene=e,this.uid=r,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var fp=jfe.prototype;fp.getXat=function(e,t,r,a){var n=QL(this.data.x)?QL(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return r===void 0?n:a.d2l(n,0,r)};fp.getYat=function(e,t,r,a){var n=QL(this.data.y)?QL(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return r===void 0?n:a.d2l(n,0,r)};fp.getZat=function(e,t,r,a){var n=this.data.z[t][e];return n===null&&this.data.connectgaps&&this.data._interpolatedZ&&(n=this.data._interpolatedZ[t][e]),r===void 0?n:a.d2l(n,0,r)};fp.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,a=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0),n=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[a,n],e.traceCoordinate=[this.getXat(a,n),this.getYat(a,n),this.getZat(a,n)],e.dataCoordinate=[this.getXat(a,n,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(a,n,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(a,n,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var o=0;o<3;o++){var i=e.dataCoordinate[o];i!=null&&(e.dataCoordinate[o]*=this.scene.dataScale[o])}var s=this.data.hovertext||this.data.text;return Array.isArray(s)&&s[n]&&s[n][a]!==void 0?e.textLabel=s[n][a]:s?e.textLabel=s:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}};function Xet(e){var t=e[0].rgb,r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}var lw=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function Zet(e,t){if(e<t)return 0;for(var r=0;Math.floor(e%t)===0;)e/=t,r++;return r}function hN(e){for(var t=[],r=0;r<lw.length;r++){var a=lw[r];t.push(Zet(e,a))}return t}function Ket(e){for(var t=hN(e),r=e,a=0;a<lw.length;a++)if(t[a]>0){r=lw[a];break}return r}function Jet(e,t){if(!(e<1||t<1)){for(var r=hN(e),a=hN(t),n=1,o=0;o<lw.length;o++)n*=Math.pow(lw[o],Math.max(r[o],a[o]));return n}}function Qet(e){if(e.length!==0){for(var t=1,r=0;r<e.length;r++)t=Jet(t,e[r]);return t}}fp.calcXnums=function(e){var t,r=[];for(t=1;t<e;t++){var a=this.getXat(t-1,0),n=this.getXat(t,0);n!==a&&a!==void 0&&a!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-a):r[t-1]=0}var o=0;for(t=1;t<e;t++)o+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(o/r[t-1]);return r};fp.calcYnums=function(e){var t,r=[];for(t=1;t<e;t++){var a=this.getYat(0,t-1),n=this.getYat(0,t);n!==a&&a!==void 0&&a!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-a):r[t-1]=0}var o=0;for(t=1;t<e;t++)o+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(o/r[t-1]);return r};var qfe=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],Yfe=qfe[9],e4=qfe[13];fp.estimateScale=function(e,t){for(var r=t===0?this.calcXnums(e):this.calcYnums(e),a=1+Qet(r);a<Yfe;)a*=2;for(;a>e4;)a--,a/=Ket(a),a++,a<Yfe&&(a=e4);var n=Math.round(a/e);return n>1?n:1};function ett(e,t,r){var a=r[8]+r[2]*t[0]+r[5]*t[1];return e[0]=(r[6]+r[0]*t[0]+r[3]*t[1])/a,e[1]=(r[7]+r[1]*t[0]+r[4]*t[1])/a,e}function ttt(e,t,r){return rtt(e,t,ett,r),e}function rtt(e,t,r,a){for(var n=[0,0],o=e.shape[0],i=e.shape[1],s=0;s<o;s++)for(var l=0;l<i;l++)r(n,[s,l],a),e.set(s,l,Vet(t,n[0],n[1]));return e}fp.refineCoords=function(e){for(var t=this.dataScaleX,r=this.dataScaleY,a=e[0].shape[0],n=e[0].shape[1],o=Math.floor(e[0].shape[0]*t+1)|0,i=Math.floor(e[0].shape[1]*r+1)|0,s=1+a+1,l=1+n+1,u=sw(new Float32Array(s*l),[s,l]),f=[1/t,0,0,0,1/r,0,0,0,1],c=0;c<e.length;++c){this.surface.padField(u,e[c]);var h=sw(new Float32Array(o*i),[o,i]);ttt(h,u,f),e[c]=h}};function att(e,t){for(var r=!1,a=0;a<e.length;a++)if(t===e[a]){r=!0;break}r===!1&&e.push(t)}fp.setContourLevels=function(){var e=[[],[],[]],t=[!1,!1,!1],r=!1,a,n,o;for(a=0;a<3;++a)if(this.showContour[a]&&(r=!0,this.contourSize[a]>0&&this.contourStart[a]!==null&&this.contourEnd[a]!==null&&this.contourEnd[a]>this.contourStart[a]))for(t[a]=!0,n=this.contourStart[a];n<this.contourEnd[a];n+=this.contourSize[a])o=n*this.scene.dataScale[a],att(e[a],o);if(r){var i=[[],[],[]];for(a=0;a<3;++a)this.showContour[a]&&(i[a]=t[a]?e[a]:this.scene.contourLevels[a]);this.surface.update({levels:i})}};fp.update=function(e){var t=this.scene,r=t.fullSceneLayout,a=this.surface,n=Yet(e),o=t.dataScale,i=e.z[0].length,s=e._ylength,l=t.contourLevels;this.data=e;var u,f,c,h,v=[];for(u=0;u<3;u++)for(v[u]=[],f=0;f<i;f++)v[u][f]=[];for(f=0;f<i;f++)for(c=0;c<s;c++)v[0][f][c]=this.getXat(f,c,e.xcalendar,r.xaxis),v[1][f][c]=this.getYat(f,c,e.ycalendar,r.yaxis),v[2][f][c]=this.getZat(f,c,e.zcalendar,r.zaxis);if(e.connectgaps)for(e._emptypoints=qet(v[2]),jet(v[2],e._emptypoints),e._interpolatedZ=[],f=0;f<i;f++)for(e._interpolatedZ[f]=[],c=0;c<s;c++)e._interpolatedZ[f][c]=v[2][f][c];for(u=0;u<3;u++)for(f=0;f<i;f++)for(c=0;c<s;c++)h=v[u][f][c],h==null?v[u][f][c]=NaN:h=v[u][f][c]*=o[u];for(u=0;u<3;u++)for(f=0;f<i;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(this.minValues[u]>h&&(this.minValues[u]=h),this.maxValues[u]<h&&(this.maxValues[u]=h));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(f=0;f<i;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(v[u][f][c]-=this.objectOffset[u]);var p=[sw(new Float32Array(i*s),[i,s]),sw(new Float32Array(i*s),[i,s]),sw(new Float32Array(i*s),[i,s])];for(u=0;u<3;u++)for(f=0;f<i;f++)for(c=0;c<s;c++)p[u].set(f,c,v[u][f][c]);v=[];var d={colormap:n,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},g=Wet(e);if(d.intensityBounds=[g.min,g.max],e.surfacecolor){var m=sw(new Float32Array(i*s),[i,s]);for(f=0;f<i;f++)for(c=0;c<s;c++)m.set(f,c,e.surfacecolor[c][f]);p.push(m)}else d.intensityBounds[0]*=o[2],d.intensityBounds[1]*=o[2];(e4<p[0].shape[0]||e4<p[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(p[0].shape[0],0),this.dataScaleY=this.estimateScale(p[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(p)),e.surfacecolor&&(d.intensity=p.pop());var y=[!0,!0,!0],_=["x","y","z"];for(u=0;u<3;++u){var S=e.contours[_[u]];y[u]=S.highlight,d.showContour[u]=S.show||S.highlight,!!d.showContour[u]&&(d.contourProject[u]=[S.project.x,S.project.y,S.project.z],S.show?(this.showContour[u]=!0,d.levels[u]=l[u],a.highlightColor[u]=d.contourColor[u]=Vfe(S.color),S.usecolormap?a.highlightTint[u]=d.contourTint[u]=0:a.highlightTint[u]=d.contourTint[u]=1,d.contourWidth[u]=S.width,this.contourStart[u]=S.start,this.contourEnd[u]=S.end,this.contourSize[u]=S.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),S.highlight&&(d.dynamicColor[u]=Vfe(S.highlightcolor),d.dynamicWidth[u]=S.highlightwidth))}Xet(n)&&(d.vertexColor=!0),d.objectOffset=this.objectOffset,d.coords=p,a.update(d),a.visible=e.visible,a.enableDynamic=y,a.enableHighlight=y,a.snapToData=!0,"lighting"in e&&(a.ambientLight=e.lighting.ambient,a.diffuseLight=e.lighting.diffuse,a.specularLight=e.lighting.specular,a.roughness=e.lighting.roughness,a.fresnel=e.lighting.fresnel),"lightposition"in e&&(a.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z])};fp.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function ntt(e,t){var r=e.glplot.gl,a=Get({gl:r}),n=new jfe(e,a,t.uid);return a._trace=n,n.update(t),e.glplot.add(a),n}var itt=ntt,ott={attributes:cS.exports,supplyDefaults:Hfe.supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:Het,plot:itt,moduleType:"trace",name:"surface",basePlotModule:Pl,categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}},stt=ott,t4={exports:{}},ltt=bo,vN=Ss.axisHoverFormat,utt=zn.hovertemplateAttrs,Ny=cS.exports,Wfe=ao,By=cn.extendFlat,hS=By({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:utt({editType:"calc"}),xhoverformat:vN("x"),yhoverformat:vN("y"),zhoverformat:vN("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},ltt("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:Ny.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:By({},Ny.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:Ny.contours.x.color,width:Ny.contours.x.width,editType:"calc"},lightposition:{x:By({},Ny.lightposition.x,{dflt:1e5}),y:By({},Ny.lightposition.y,{dflt:1e5}),z:By({},Ny.lightposition.z,{dflt:0}),editType:"calc"},lighting:By({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},Ny.lighting),hoverinfo:By({},Wfe.hoverinfo,{editType:"calc"}),showlegend:By({},Wfe.showlegend,{dflt:!1})}),ftt=bo,r4=Ss.axisHoverFormat,ctt=zn.hovertemplateAttrs,vS=hS,Xfe=ao,dN=cn.extendFlat,htt=Jo.overrideAll;function pN(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",e,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",e,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function gN(e){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",e,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var Zx=t4.exports=htt(dN({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:pN("x"),y:pN("y"),z:pN("z")},caps:{x:gN("x"),y:gN("y"),z:gN("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:ctt(),xhoverformat:r4("x"),yhoverformat:r4("y"),zhoverformat:r4("z"),valuehoverformat:r4("value",1),showlegend:dN({},Xfe.showlegend,{dflt:!1})},ftt("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:vS.opacity,lightposition:vS.lightposition,lighting:vS.lighting,flatshading:vS.flatshading,contour:vS.contour,hoverinfo:dN({},Xfe.hoverinfo)}),"calc","nested");Zx.flatshading.dflt=!0;Zx.lighting.facenormalsepsilon.dflt=0;Zx.x.editType=Zx.y.editType=Zx.z.editType=Zx.value.editType="calc+clearAxisTypes";Zx.transforms=void 0;var vtt=bt.exports,dtt=Pa,ptt=t4.exports,gtt=su;function mtt(e,t,r,a){function n(o,i){return vtt.coerce(e,t,ptt,o,i)}Zfe(e,t,r,a,n)}function Zfe(e,t,r,a,n){var o=n("isomin"),i=n("isomax");i!=null&&o!==void 0&&o!==null&&o>i&&(t.isomin=null,t.isomax=null);var s=n("x"),l=n("y"),u=n("z"),f=n("value");if(!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length){t.visible=!1;return}var c=dtt.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y","z"],a),n("valuehoverformat"),["x","y","z"].forEach(function(d){n(d+"hoverformat");var g="caps."+d,m=n(g+".show");m&&n(g+".fill");var y="slices."+d,_=n(y+".show");_&&(n(y+".fill"),n(y+".locations"))});var h=n("spaceframe.show");h&&n("spaceframe.fill");var v=n("surface.show");v&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var p=n("contour.show");p&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(d){n(d)}),gtt(e,t,a,n,{prefix:"",cLetter:"c"}),t._length=null}var Kfe={supplyDefaults:mtt,supplyIsoDefaults:Zfe},mN=bt.exports,ytt=ih;function xtt(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=p0(t.u,t._len),t._v=p0(t.v,t._len),t._w=p0(t.w,t._len),t._x=p0(t.x,t._len),t._y=p0(t.y,t._len),t._z=p0(t.z,t._len);var r=Jfe(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var a=0,n,o,i;t.starts&&(n=p0(t.starts.x||[]),o=p0(t.starts.y||[]),i=p0(t.starts.z||[]),a=Math.min(n.length,o.length,i.length)),t._startsX=n||[],t._startsY=o||[],t._startsZ=i||[];var s=0,l=1/0,u;for(u=0;u<t._len;u++){var f=t._u[u],c=t._v[u],h=t._w[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}for(ytt(e,t,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<a;u++){var p=n[u];r.xMax=Math.max(r.xMax,p),r.xMin=Math.min(r.xMin,p);var d=o[u];r.yMax=Math.max(r.yMax,d),r.yMin=Math.min(r.yMin,d);var g=i[u];r.zMax=Math.max(r.zMax,g),r.zMin=Math.min(r.zMin,g)}t._slen=a,t._normMax=s,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function Jfe(e){var t=e._x,r=e._y,a=e._z,n=e._len,o,i,s,l=-1/0,u=1/0,f=-1/0,c=1/0,h=-1/0,v=1/0,p="",d,g,m,y,_,S,M,w,A;for(n&&(y=t[0],S=r[0],w=a[0]),n>1&&(_=t[n-1],M=r[n-1],A=a[n-1]),o=0;o<n;o++)l=Math.max(l,t[o]),u=Math.min(u,t[o]),f=Math.max(f,r[o]),c=Math.min(c,r[o]),h=Math.max(h,a[o]),v=Math.min(v,a[o]),!d&&t[o]!==y&&(d=!0,p+="x"),!g&&r[o]!==S&&(g=!0,p+="y"),!m&&a[o]!==w&&(m=!0,p+="z");d||(p+="x"),g||(p+="y"),m||(p+="z");var k=yN(e._x),T=yN(e._y),L=yN(e._z);p=p.replace("x",(y>_?"-":"+")+"x"),p=p.replace("y",(S>M?"-":"+")+"y"),p=p.replace("z",(w>A?"-":"+")+"z");var C=function(){n=0,k=[],T=[],L=[]};(!n||n<k.length*T.length*L.length)&&C();var I=function(xe){return xe==="x"?t:xe==="y"?r:a},R=function(xe){return xe==="x"?k:xe==="y"?T:L},B=function(xe){return xe[n-1]<xe[0]?-1:1},N=I(p[1]),D=I(p[3]),O=I(p[5]),$=R(p[1]).length,Y=R(p[3]).length,X=R(p[5]).length,ee=!1,Q=function(xe,Se,ye){return $*(Y*xe+Se)+ye},Z=B(I(p[1])),q=B(I(p[3])),ae=B(I(p[5]));for(o=0;o<X-1;o++){for(i=0;i<Y-1;i++){for(s=0;s<$-1;s++){var ie=Q(o,i,s),we=Q(o,i,s+1),Te=Q(o,i+1,s),he=Q(o+1,i,s);if((!(N[ie]*Z<N[we]*Z)||!(D[ie]*q<D[Te]*q)||!(O[ie]*ae<O[he]*ae))&&(ee=!0),ee)break}if(ee)break}if(ee)break}return ee&&(mN.warn("Encountered arbitrary coordinates! Unable to input data grid."),C()),{xMin:u,yMin:c,zMin:v,xMax:l,yMax:f,zMax:h,Xs:k,Ys:T,Zs:L,len:n,fill:p}}function yN(e){return mN.distinctVals(e).vals}function p0(e,t){if(t===void 0&&(t=e.length),mN.isTypedArray(e))return e.subarray(0,t);for(var r=[],a=0;a<t;a++)r[a]=+e[a];return r}var xN={calc:xtt,filter:p0,processGrid:Jfe},btt=ih,_tt=xN.processGrid,a4=xN.filter,Qfe=function(t,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length),r._x=a4(r.x,r._len),r._y=a4(r.y,r._len),r._z=a4(r.z,r._len),r._value=a4(r.value,r._len);var a=_tt(r);r._gridFill=a.fill,r._Xs=a.Xs,r._Ys=a.Ys,r._Zs=a.Zs,r._len=a.len;for(var n=1/0,o=-1/0,i=0;i<r._len;i++){var s=r._value[i];n=Math.min(n,s),o=Math.max(o,s)}r._minValues=n,r._maxValues=o,r._vMin=r.isomin===void 0||r.isomin===null?n:r.isomin,r._vMax=r.isomax===void 0||r.isomin===null?o:r.isomax,btt(t,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})},dS=function(t,r,a,n){n=n||t.length;for(var o=new Array(n),i=0;i<n;i++)o[i]=[t[i],r[i],a[i]];return o},wtt=Ns.exports.gl_mesh3d,Ttt=Oy.parseColorScale,Att=lp,Stt=Qo.extractOpts,ece=dS,pS=function(e,t){for(var r=t.length-1;r>0;r--){var a=Math.min(t[r],t[r-1]),n=Math.max(t[r],t[r-1]);if(n>a&&a<e&&e<=n)return{id:r,distRatio:(n-e)/(n-a)}}return{id:0,distRatio:0}};function tce(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var bN=tce.prototype;bN.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],a=this.data._meshY[t],n=this.data._meshZ[t],o=this.data._Ys.length,i=this.data._Zs.length,s=pS(r,this.data._Xs).id,l=pS(a,this.data._Ys).id,u=pS(n,this.data._Zs).id,f=e.index=u+i*l+i*o*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return Array.isArray(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};bN.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=rce(e);function a(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=ece(a(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),a(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),a(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),o=ece(e._meshI,e._meshJ,e._meshK),i={positions:n,cells:o,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:Att(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=Stt(e);i.vertexIntensity=e._meshIntensity,i.vertexIntensityBounds=[s.min,s.max],i.colormap=Ttt(e),this.mesh.update(i)};bN.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var Mtt=["xyz","xzy","yxz","yzx","zxy","zyx"];function rce(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t=e.surface.show,r=e.spaceframe.show,a=e.surface.fill,n=e.spaceframe.fill,o=!1,i=!1,s=0,l,u,f=e._Xs,c=e._Ys,h=e._Zs,v=f.length,p=c.length,d=h.length,g=Mtt.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),m=function(Qe,Je,je){switch(g){case 5:return je+d*Je+d*p*Qe;case 4:return je+d*Qe+d*v*Je;case 3:return Je+p*je+p*d*Qe;case 2:return Je+p*Qe+p*v*je;case 1:return Qe+v*je+v*d*Je;default:return Qe+v*Je+v*p*je}},y=e._minValues,_=e._maxValues,S=e._vMin,M=e._vMax,w,A,k,T;function L(Qe,Je,je){for(var $e=T.length,Ye=u;Ye<$e;Ye++)if(Qe===w[Ye]&&Je===A[Ye]&&je===k[Ye])return Ye;return-1}function C(){u=l}function I(){w=[],A=[],k=[],T=[],l=0,C()}function R(Qe,Je,je,$e){return w.push(Qe),A.push(Je),k.push(je),T.push($e),l++,l-1}function B(Qe,Je,je){return e._meshI.push(Qe),e._meshJ.push(Je),e._meshK.push(je),s++,s-1}function N(Qe,Je,je){for(var $e=[],Ye=0;Ye<Qe.length;Ye++)$e[Ye]=(Qe[Ye]+Je[Ye]+je[Ye])/3;return $e}function D(Qe,Je,je){for(var $e=[],Ye=0;Ye<Qe.length;Ye++)$e[Ye]=Qe[Ye]*(1-je)+je*Je[Ye];return $e}var O;function $(Qe){O=Qe}function Y(Qe,Je){var je=Qe[0],$e=Qe[1],Ye=Qe[2],yt=N(je,$e,Ye),_t=Math.sqrt(1-O),Pt=D(yt,je,_t),Tt=D(yt,$e,_t),Ot=D(yt,Ye,_t),qt=Je[0],Xt=Je[1],Or=Je[2];return{xyzv:[[je,$e,Tt],[Tt,Pt,je],[$e,Ye,Ot],[Ot,Tt,$e],[Ye,je,Pt],[Pt,Ot,Ye]],abc:[[qt,Xt,-1],[-1,-1,qt],[Xt,Or,-1],[-1,-1,Xt],[Or,qt,-1],[-1,-1,Or]]}}function X(Qe,Je){return Qe==="all"||Qe===null?!0:Qe.indexOf(Je)>-1}function ee(Qe,Je){return Qe===null?Je:Qe}function Q(Qe,Je,je){C();var $e=[Je],Ye=[je];if(O>=1)$e=[Je],Ye=[je];else if(O>0){var yt=Y(Je,je);$e=yt.xyzv,Ye=yt.abc}for(var _t=0;_t<$e.length;_t++){Je=$e[_t],je=Ye[_t];for(var Pt=[],Tt=0;Tt<3;Tt++){var Ot=Je[Tt][0],qt=Je[Tt][1],Xt=Je[Tt][2],Or=Je[Tt][3],Br=je[Tt]>-1?je[Tt]:L(Ot,qt,Xt);Br>-1?Pt[Tt]=Br:Pt[Tt]=R(Ot,qt,Xt,ee(Qe,Or))}B(Pt[0],Pt[1],Pt[2])}}function Z(Qe,Je,je){var $e=function(Ye,yt,_t){Q(Qe,[Je[Ye],Je[yt],Je[_t]],[je[Ye],je[yt],je[_t]])};$e(0,1,2),$e(2,3,0)}function q(Qe,Je,je){var $e=function(Ye,yt,_t){Q(Qe,[Je[Ye],Je[yt],Je[_t]],[je[Ye],je[yt],je[_t]])};$e(0,1,2),$e(3,0,1),$e(2,3,0),$e(1,2,3)}function ae(Qe,Je,je,$e){var Ye=Qe[3];Ye<je&&(Ye=je),Ye>$e&&(Ye=$e);for(var yt=(Qe[3]-Ye)/(Qe[3]-Je[3]+1e-9),_t=[],Pt=0;Pt<4;Pt++)_t[Pt]=(1-yt)*Qe[Pt]+yt*Je[Pt];return _t}function ie(Qe,Je,je){return Qe>=Je&&Qe<=je}function we(Qe){var Je=.001*(M-S);return Qe>=S-Je&&Qe<=M+Je}function Te(Qe){for(var Je=[],je=0;je<4;je++){var $e=Qe[je];Je.push([e._x[$e],e._y[$e],e._z[$e],e._value[$e]])}return Je}var he=3;function xe(Qe,Je,je,$e,Ye,yt){yt||(yt=1),je=[-1,-1,-1];var _t=!1,Pt=[ie(Je[0][3],$e,Ye),ie(Je[1][3],$e,Ye),ie(Je[2][3],$e,Ye)];if(!Pt[0]&&!Pt[1]&&!Pt[2])return!1;var Tt=function(qt,Xt,Or){return we(Xt[0][3])&&we(Xt[1][3])&&we(Xt[2][3])?(Q(qt,Xt,Or),!0):yt<he?xe(qt,Xt,Or,S,M,++yt):!1};if(Pt[0]&&Pt[1]&&Pt[2])return Tt(Qe,Je,je)||_t;var Ot=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(qt){if(Pt[qt[0]]&&Pt[qt[1]]&&!Pt[qt[2]]){var Xt=Je[qt[0]],Or=Je[qt[1]],Br=Je[qt[2]],Qr=ae(Br,Xt,$e,Ye),Sr=ae(Br,Or,$e,Ye);_t=Tt(Qe,[Sr,Qr,Xt],[-1,-1,je[qt[0]]])||_t,_t=Tt(Qe,[Xt,Or,Sr],[je[qt[0]],je[qt[1]],-1])||_t,Ot=!0}}),Ot||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(qt){if(Pt[qt[0]]&&!Pt[qt[1]]&&!Pt[qt[2]]){var Xt=Je[qt[0]],Or=Je[qt[1]],Br=Je[qt[2]],Qr=ae(Or,Xt,$e,Ye),Sr=ae(Br,Xt,$e,Ye);_t=Tt(Qe,[Sr,Qr,Xt],[-1,-1,je[qt[0]]])||_t,Ot=!0}}),_t}function Se(Qe,Je,je,$e){var Ye=!1,yt=Te(Je),_t=[ie(yt[0][3],je,$e),ie(yt[1][3],je,$e),ie(yt[2][3],je,$e),ie(yt[3][3],je,$e)];if(!_t[0]&&!_t[1]&&!_t[2]&&!_t[3])return Ye;if(_t[0]&&_t[1]&&_t[2]&&_t[3])return i&&(Ye=q(Qe,yt,Je)||Ye),Ye;var Pt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Tt){if(_t[Tt[0]]&&_t[Tt[1]]&&_t[Tt[2]]&&!_t[Tt[3]]){var Ot=yt[Tt[0]],qt=yt[Tt[1]],Xt=yt[Tt[2]],Or=yt[Tt[3]];if(i)Ye=Q(Qe,[Ot,qt,Xt],[Je[Tt[0]],Je[Tt[1]],Je[Tt[2]]])||Ye;else{var Br=ae(Or,Ot,je,$e),Qr=ae(Or,qt,je,$e),Sr=ae(Or,Xt,je,$e);Ye=Q(null,[Br,Qr,Sr],[-1,-1,-1])||Ye}Pt=!0}}),Pt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Tt){if(_t[Tt[0]]&&_t[Tt[1]]&&!_t[Tt[2]]&&!_t[Tt[3]]){var Ot=yt[Tt[0]],qt=yt[Tt[1]],Xt=yt[Tt[2]],Or=yt[Tt[3]],Br=ae(Xt,Ot,je,$e),Qr=ae(Xt,qt,je,$e),Sr=ae(Or,qt,je,$e),Zr=ae(Or,Ot,je,$e);i?(Ye=Q(Qe,[Ot,Zr,Br],[Je[Tt[0]],-1,-1])||Ye,Ye=Q(Qe,[qt,Qr,Sr],[Je[Tt[1]],-1,-1])||Ye):Ye=Z(null,[Br,Qr,Sr,Zr],[-1,-1,-1,-1])||Ye,Pt=!0}}),Pt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Tt){if(_t[Tt[0]]&&!_t[Tt[1]]&&!_t[Tt[2]]&&!_t[Tt[3]]){var Ot=yt[Tt[0]],qt=yt[Tt[1]],Xt=yt[Tt[2]],Or=yt[Tt[3]],Br=ae(qt,Ot,je,$e),Qr=ae(Xt,Ot,je,$e),Sr=ae(Or,Ot,je,$e);i?(Ye=Q(Qe,[Ot,Br,Qr],[Je[Tt[0]],-1,-1])||Ye,Ye=Q(Qe,[Ot,Qr,Sr],[Je[Tt[0]],-1,-1])||Ye,Ye=Q(Qe,[Ot,Sr,Br],[Je[Tt[0]],-1,-1])||Ye):Ye=Q(null,[Br,Qr,Sr],[-1,-1,-1])||Ye,Pt=!0}}),Ye}function ye(Qe,Je,je,$e,Ye,yt,_t,Pt,Tt,Ot,qt){var Xt=!1;return o&&(X(Qe,"A")&&(Xt=Se(null,[Je,je,$e,yt],Ot,qt)||Xt),X(Qe,"B")&&(Xt=Se(null,[je,$e,Ye,Tt],Ot,qt)||Xt),X(Qe,"C")&&(Xt=Se(null,[je,yt,_t,Tt],Ot,qt)||Xt),X(Qe,"D")&&(Xt=Se(null,[$e,yt,Pt,Tt],Ot,qt)||Xt),X(Qe,"E")&&(Xt=Se(null,[je,$e,yt,Tt],Ot,qt)||Xt)),i&&(Xt=Se(Qe,[je,$e,yt,Tt],Ot,qt)||Xt),Xt}function re(Qe,Je,je,$e,Ye,yt,_t,Pt){return[Pt[0]===!0?!0:xe(Qe,Te([Je,je,$e]),[Je,je,$e],yt,_t),Pt[1]===!0?!0:xe(Qe,Te([$e,Ye,Je]),[$e,Ye,Je],yt,_t)]}function se(Qe,Je,je,$e,Ye,yt,_t,Pt,Tt){return Pt?re(Qe,Je,je,Ye,$e,yt,_t,Tt):re(Qe,je,Ye,$e,Je,yt,_t,Tt)}function de(Qe,Je,je,$e,Ye,yt,_t){var Pt=!1,Tt,Ot,qt,Xt,Or=function(){Pt=xe(Qe,[Tt,Ot,qt],[-1,-1,-1],Ye,yt)||Pt,Pt=xe(Qe,[qt,Xt,Tt],[-1,-1,-1],Ye,yt)||Pt},Br=_t[0],Qr=_t[1],Sr=_t[2];return Br&&(Tt=D(Te([m(Je,je-0,$e-0)])[0],Te([m(Je-1,je-0,$e-0)])[0],Br),Ot=D(Te([m(Je,je-0,$e-1)])[0],Te([m(Je-1,je-0,$e-1)])[0],Br),qt=D(Te([m(Je,je-1,$e-1)])[0],Te([m(Je-1,je-1,$e-1)])[0],Br),Xt=D(Te([m(Je,je-1,$e-0)])[0],Te([m(Je-1,je-1,$e-0)])[0],Br),Or()),Qr&&(Tt=D(Te([m(Je-0,je,$e-0)])[0],Te([m(Je-0,je-1,$e-0)])[0],Qr),Ot=D(Te([m(Je-0,je,$e-1)])[0],Te([m(Je-0,je-1,$e-1)])[0],Qr),qt=D(Te([m(Je-1,je,$e-1)])[0],Te([m(Je-1,je-1,$e-1)])[0],Qr),Xt=D(Te([m(Je-1,je,$e-0)])[0],Te([m(Je-1,je-1,$e-0)])[0],Qr),Or()),Sr&&(Tt=D(Te([m(Je-0,je-0,$e)])[0],Te([m(Je-0,je-0,$e-1)])[0],Sr),Ot=D(Te([m(Je-0,je-1,$e)])[0],Te([m(Je-0,je-1,$e-1)])[0],Sr),qt=D(Te([m(Je-1,je-1,$e)])[0],Te([m(Je-1,je-1,$e-1)])[0],Sr),Xt=D(Te([m(Je-1,je-0,$e)])[0],Te([m(Je-1,je-0,$e-1)])[0],Sr),Or()),Pt}function Me(Qe,Je,je,$e,Ye,yt,_t,Pt,Tt,Ot,qt,Xt){var Or=Qe;return Xt?(o&&Qe==="even"&&(Or=null),ye(Or,Je,je,$e,Ye,yt,_t,Pt,Tt,Ot,qt)):(o&&Qe==="odd"&&(Or=null),ye(Or,Tt,Pt,_t,yt,Ye,$e,je,Je,Ot,qt))}function Ie(Qe,Je,je,$e,Ye){for(var yt=[],_t=0,Pt=0;Pt<Je.length;Pt++)for(var Tt=Je[Pt],Ot=1;Ot<d;Ot++)for(var qt=1;qt<p;qt++)yt.push(se(Qe,m(Tt,qt-1,Ot-1),m(Tt,qt-1,Ot),m(Tt,qt,Ot-1),m(Tt,qt,Ot),je,$e,(Tt+qt+Ot)%2,Ye&&Ye[_t]?Ye[_t]:[])),_t++;return yt}function Ee(Qe,Je,je,$e,Ye){for(var yt=[],_t=0,Pt=0;Pt<Je.length;Pt++)for(var Tt=Je[Pt],Ot=1;Ot<v;Ot++)for(var qt=1;qt<d;qt++)yt.push(se(Qe,m(Ot-1,Tt,qt-1),m(Ot,Tt,qt-1),m(Ot-1,Tt,qt),m(Ot,Tt,qt),je,$e,(Ot+Tt+qt)%2,Ye&&Ye[_t]?Ye[_t]:[])),_t++;return yt}function qe(Qe,Je,je,$e,Ye){for(var yt=[],_t=0,Pt=0;Pt<Je.length;Pt++)for(var Tt=Je[Pt],Ot=1;Ot<p;Ot++)for(var qt=1;qt<v;qt++)yt.push(se(Qe,m(qt-1,Ot-1,Tt),m(qt-1,Ot,Tt),m(qt,Ot-1,Tt),m(qt,Ot,Tt),je,$e,(qt+Ot+Tt)%2,Ye&&Ye[_t]?Ye[_t]:[])),_t++;return yt}function be(Qe,Je,je){for(var $e=1;$e<d;$e++)for(var Ye=1;Ye<p;Ye++)for(var yt=1;yt<v;yt++)Me(Qe,m(yt-1,Ye-1,$e-1),m(yt-1,Ye-1,$e),m(yt-1,Ye,$e-1),m(yt-1,Ye,$e),m(yt,Ye-1,$e-1),m(yt,Ye-1,$e),m(yt,Ye,$e-1),m(yt,Ye,$e),Je,je,(yt+Ye+$e)%2)}function oe(Qe,Je,je){i=!0,be(Qe,Je,je),i=!1}function ce(Qe,Je,je){o=!0,be(Qe,Je,je),o=!1}function ue(Qe,Je,je,$e,Ye,yt){for(var _t=[],Pt=0,Tt=0;Tt<Je.length;Tt++)for(var Ot=Je[Tt],qt=1;qt<d;qt++)for(var Xt=1;Xt<p;Xt++)_t.push(de(Qe,Ot,Xt,qt,je,$e,Ye[Tt],yt&&yt[Pt]?yt[Pt]:[])),Pt++;return _t}function Re(Qe,Je,je,$e,Ye,yt){for(var _t=[],Pt=0,Tt=0;Tt<Je.length;Tt++)for(var Ot=Je[Tt],qt=1;qt<v;qt++)for(var Xt=1;Xt<d;Xt++)_t.push(de(Qe,qt,Ot,Xt,je,$e,Ye[Tt],yt&&yt[Pt]?yt[Pt]:[])),Pt++;return _t}function Xe(Qe,Je,je,$e,Ye,yt){for(var _t=[],Pt=0,Tt=0;Tt<Je.length;Tt++)for(var Ot=Je[Tt],qt=1;qt<p;qt++)for(var Xt=1;Xt<v;Xt++)_t.push(de(Qe,Xt,qt,Ot,je,$e,Ye[Tt],yt&&yt[Pt]?yt[Pt]:[])),Pt++;return _t}function Ke(Qe,Je){for(var je=[],$e=Qe;$e<Je;$e++)je.push($e);return je}function vt(){for(var Qe=0;Qe<v;Qe++)for(var Je=0;Je<p;Je++)for(var je=0;je<d;je++){var $e=m(Qe,Je,je);R(e._x[$e],e._y[$e],e._z[$e],e._value[$e])}}function Ze(){I(),vt();var Qe=null;if(r&&n&&($(n),oe(Qe,S,M)),t&&a){$(a);for(var Je=e.surface.pattern,je=e.surface.count,$e=0;$e<je;$e++){var Ye=je===1?.5:$e/(je-1),yt=(1-Ye)*S+Ye*M,_t=Math.abs(yt-y),Pt=Math.abs(yt-_),Tt=_t>Pt?[y,yt]:[yt,_];ce(Je,Tt[0],Tt[1])}}var Ot=[[Math.min(S,_),Math.max(S,_)],[Math.min(y,M),Math.max(y,M)]];["x","y","z"].forEach(function(qt){for(var Xt=[],Or=0;Or<Ot.length;Or++){var Br=0,Qr=Ot[Or][0],Sr=Ot[Or][1],Zr=e.slices[qt];if(Zr.show&&Zr.fill){$(Zr.fill);var Oe=[],it=[],ft=[];if(Zr.locations.length)for(var pt=0;pt<Zr.locations.length;pt++){var Dt=pS(Zr.locations[pt],qt==="x"?f:qt==="y"?c:h);Dt.distRatio===0?Oe.push(Dt.id):Dt.id>0&&(it.push(Dt.id),qt==="x"?ft.push([Dt.distRatio,0,0]):qt==="y"?ft.push([0,Dt.distRatio,0]):ft.push([0,0,Dt.distRatio]))}else qt==="x"?Oe=Ke(1,v-1):qt==="y"?Oe=Ke(1,p-1):Oe=Ke(1,d-1);it.length>0&&(qt==="x"?Xt[Br]=ue(Qe,it,Qr,Sr,ft,Xt[Br]):qt==="y"?Xt[Br]=Re(Qe,it,Qr,Sr,ft,Xt[Br]):Xt[Br]=Xe(Qe,it,Qr,Sr,ft,Xt[Br]),Br++),Oe.length>0&&(qt==="x"?Xt[Br]=Ie(Qe,Oe,Qr,Sr,Xt[Br]):qt==="y"?Xt[Br]=Ee(Qe,Oe,Qr,Sr,Xt[Br]):Xt[Br]=qe(Qe,Oe,Qr,Sr,Xt[Br]),Br++)}var Nt=e.caps[qt];Nt.show&&Nt.fill&&($(Nt.fill),qt==="x"?Xt[Br]=Ie(Qe,[0,v-1],Qr,Sr,Xt[Br]):qt==="y"?Xt[Br]=Ee(Qe,[0,p-1],Qr,Sr,Xt[Br]):Xt[Br]=qe(Qe,[0,d-1],Qr,Sr,Xt[Br]),Br++)}}),s===0&&I(),e._meshX=w,e._meshY=A,e._meshZ=k,e._meshIntensity=T,e._Xs=f,e._Ys=c,e._Zs=h}return Ze(),e}function ktt(e,t){var r=e.glplot.gl,a=wtt({gl:r}),n=new tce(e,a,t.uid);return a._trace=n,n.update(t),e.glplot.add(a),n}var _N={findNearestOnAxis:pS,generateIsoMeshes:rce,createIsosurfaceTrace:ktt},Ett={attributes:t4.exports,supplyDefaults:Kfe.supplyDefaults,calc:Qfe,colorbar:{min:"cmin",max:"cmax"},plot:_N.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:Pl,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},Ctt=Ett,wN={exports:{}},Ltt=bo,hl=t4.exports,Ptt=cS.exports,ace=ao,TN=cn.extendFlat,Itt=Jo.overrideAll,gS=wN.exports=Itt(TN({x:hl.x,y:hl.y,z:hl.z,value:hl.value,isomin:hl.isomin,isomax:hl.isomax,surface:hl.surface,spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 1 meaning that they are entirely shaded. Applying a `fill` ratio less","than one would allow the creation of openings parallel to the edges."].join(" ")}},slices:hl.slices,caps:hl.caps,text:hl.text,hovertext:hl.hovertext,xhoverformat:hl.xhoverformat,yhoverformat:hl.yhoverformat,zhoverformat:hl.zhoverformat,valuehoverformat:hl.valuehoverformat,hovertemplate:hl.hovertemplate},Ltt("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:hl.colorbar,opacity:hl.opacity,opacityscale:Ptt.opacityscale,lightposition:hl.lightposition,lighting:hl.lighting,flatshading:hl.flatshading,contour:hl.contour,hoverinfo:TN({},ace.hoverinfo),showlegend:TN({},ace.showlegend,{dflt:!1})}),"calc","nested");gS.x.editType=gS.y.editType=gS.z.editType=gS.value.editType="calc+clearAxisTypes";gS.transforms=void 0;var Dtt=bt.exports,Rtt=wN.exports,ztt=Kfe.supplyIsoDefaults,Ftt=Hfe.opacityscaleDefaults,Ott=function(t,r,a,n){function o(i,s){return Dtt.coerce(t,r,Rtt,i,s)}ztt(t,r,a,n,o),Ftt(t,r,n,o)},Ntt=Ns.exports.gl_mesh3d,Btt=Oy.parseColorScale,$tt=lp,Utt=Qo.extractOpts,nce=dS,AN=_N.findNearestOnAxis,Htt=_N.generateIsoMeshes;function ice(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var SN=ice.prototype;SN.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],a=this.data._meshY[t],n=this.data._meshZ[t],o=this.data._Ys.length,i=this.data._Zs.length,s=AN(r,this.data._Xs).id,l=AN(a,this.data._Ys).id,u=AN(n,this.data._Zs).id,f=e.index=u+i*l+i*o*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return Array.isArray(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};SN.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=Htt(e);function a(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=nce(a(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),a(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),a(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),o=nce(e._meshI,e._meshJ,e._meshK),i={positions:n,cells:o,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:$tt(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=Utt(e);i.vertexIntensity=e._meshIntensity,i.vertexIntensityBounds=[s.min,s.max],i.colormap=Btt(e),this.mesh.update(i)};SN.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function Gtt(e,t){var r=e.glplot.gl,a=Ntt({gl:r}),n=new ice(e,a,t.uid);return a._trace=n,n.update(t),e.glplot.add(a),n}var Vtt=Gtt,jtt={attributes:wN.exports,supplyDefaults:Ott,calc:Qfe,colorbar:{min:"cmin",max:"cmax"},plot:Vtt,moduleType:"trace",name:"volume",basePlotModule:Pl,categories:["gl3d","showLegend"],meta:{description:["Draws volume trace between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},qtt=jtt,Ytt=Pa,oce=bt.exports,Wtt=su,Xtt=hS,Ztt=function(t,r,a,n){function o(f,c){return oce.coerce(t,r,Xtt,f,c)}function i(f){var c=f.map(function(h){var v=o(h);return v&&oce.isArrayOrTypedArray(v)?v:null});return c.every(function(h){return h&&h.length===c[0].length})&&c}var s=i(["x","y","z"]);if(!s){r.visible=!1;return}if(i(["i","j","k"]),r.i&&(!r.j||!r.k)||r.j&&(!r.k||!r.i)||r.k&&(!r.i||!r.j)){r.visible=!1;return}var l=Ytt.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(f){o(f)});var u=o("contour.show");u&&(o("contour.color"),o("contour.width")),"intensity"in t?(o("intensity"),o("intensitymode"),Wtt(t,r,n,o,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in t?o("facecolor"):"vertexcolor"in t?o("vertexcolor"):o("color",a)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),r._length=null},Ktt=ih,Jtt=function(t,r){r.intensity&&Ktt(t,r,{vals:r.intensity,containerStr:"",cLetter:"c"})},Qtt=Ns.exports.gl_mesh3d,ert=Ns.exports.delaunay_triangulate,trt=Ns.exports.alpha_shape,rrt=Ns.exports.convex_hull,art=Oy.parseColorScale,MN=lp,nrt=Qo.extractOpts,sce=dS;function lce(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var kN=lce.prototype;kN.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var r=this.data.hovertext||this.data.text;return Array.isArray(r)&&r[t]!==void 0?e.textLabel=r[t]:r&&(e.textLabel=r),!0}};function uce(e){for(var t=[],r=e.length,a=0;a<r;a++)t[a]=MN(e[a]);return t}function EN(e,t,r,a){for(var n=[],o=t.length,i=0;i<o;i++)n[i]=e.d2l(t[i],0,a)*r;return n}function CN(e){for(var t=[],r=e.length,a=0;a<r;a++)t[a]=Math.round(e[a]);return t}function irt(e,t){for(var r=["x","y","z"].indexOf(e),a=[],n=t.length,o=0;o<n;o++)a[o]=[t[o][(r+1)%3],t[o][(r+2)%3]];return ert(a)}function LN(e,t){for(var r=e.length,a=0;a<r;a++)if(e[a]<=-.5||e[a]>=t-.5)return!1;return!0}kN.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=e;var a=e.x.length,n=sce(EN(r.xaxis,e.x,t.dataScale[0],e.xcalendar),EN(r.yaxis,e.y,t.dataScale[1],e.ycalendar),EN(r.zaxis,e.z,t.dataScale[2],e.zcalendar)),o;if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!LN(e.i,a)||!LN(e.j,a)||!LN(e.k,a))return;o=sce(CN(e.i),CN(e.j),CN(e.k))}else e.alphahull===0?o=rrt(n):e.alphahull>0?o=trt(e.alphahull,n):o=irt(e.delaunayaxis,n);var i={positions:n,cells:o,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:MN(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var s=nrt(e);this.color="#fff";var l=e.intensitymode;i[l+"Intensity"]=e.intensity,i[l+"IntensityBounds"]=[s.min,s.max],i.colormap=art(e)}else e.vertexcolor?(this.color=e.vertexcolor[0],i.vertexColors=uce(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],i.cellColors=uce(e.facecolor)):(this.color=e.color,i.meshColor=MN(e.color));this.mesh.update(i)};kN.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function ort(e,t){var r=e.glplot.gl,a=Qtt({gl:r}),n=new lce(e,a,t.uid);return a._trace=n,n.update(t),e.glplot.add(a),n}var srt=ort,lrt={attributes:hS,supplyDefaults:Ztt,calc:Jtt,colorbar:{min:"cmin",max:"cmax"},plot:srt,moduleType:"trace",name:"mesh3d",basePlotModule:Pl,categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}},urt=lrt,frt=bo,uw=Ss.axisHoverFormat,crt=zn.hovertemplateAttrs,hrt=hS,fce=ao,PN=cn.extendFlat,mS={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates of the vector field","and of the displayed cones."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y coordinates of the vector field","and of the displayed cones."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the z coordinates of the vector field","and of the displayed cones."].join(" ")},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled",description:["Determines whether `sizeref` is set as a *scaled* (i.e unitless) scalar","(normalized by the max u/v/w norm in the vector field) or as","*absolute* value (in the same units as the vector field)."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,description:["Adjusts the cone size scaling.","The size of the cones is determined by their u/v/w norm multiplied a factor and `sizeref`.",'This factor (computed internally) corresponds to the minimum "time" to travel across',"two successive x/y/z positions at the average velocity of those two successive positions.","All cones in a given trace use the same factor.","With `sizemode` set to *scaled*, `sizeref` is unitless, its default value is *0.5*","With `sizemode` set to *absolute*, `sizeref` has the same units as the u/v/w vector field,","its the default value is half the sample's maximum vector norm."].join(" ")},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm",description:["Sets the cones' anchor with respect to their x/y/z positions.","Note that *cm* denote the cone's center of mass which corresponds to","1/4 from the tail to tip."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the cones.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:crt({editType:"calc"},{keys:["norm"]}),uhoverformat:uw("u",1),vhoverformat:uw("v",1),whoverformat:uw("w",1),xhoverformat:uw("x"),yhoverformat:uw("y"),zhoverformat:uw("z"),showlegend:PN({},fce.showlegend,{dflt:!1})};PN(mS,frt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var vrt=["opacity","lightposition","lighting"];vrt.forEach(function(e){mS[e]=hrt[e]});mS.hoverinfo=PN({},fce.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"});mS.transforms=void 0;var cce=mS,drt=bt.exports,prt=su,grt=cce,mrt=function(t,r,a,n){function o(h,v){return drt.coerce(t,r,grt,h,v)}var i=o("u"),s=o("v"),l=o("w"),u=o("x"),f=o("y"),c=o("z");if(!i||!i.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}o("sizeref"),o("sizemode"),o("anchor"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),prt(t,r,n,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),r._length=null},yrt=ih,xrt=function(t,r){for(var a=r.u,n=r.v,o=r.w,i=Math.min(r.x.length,r.y.length,r.z.length,a.length,n.length,o.length),s=-1/0,l=1/0,u=0;u<i;u++){var f=a[u],c=n[u],h=o[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}r._len=i,r._normMax=s,yrt(t,r,{vals:[l,s],containerStr:"",cLetter:"c"})},brt=Ns.exports.gl_cone3d,_rt=Ns.exports.gl_cone3d.createConeMesh,wrt=bt.exports.simpleMap,Trt=Oy.parseColorScale,Art=Qo.extractOpts,hce=dS;function vce(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var IN=vce.prototype;IN.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,r=this.data.x[t],a=this.data.y[t],n=this.data.z[t],o=this.data.u[t],i=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[r,a,n,o,i,s,Math.sqrt(o*o+i*i+s*s)];var l=this.data.hovertext||this.data.text;return Array.isArray(l)&&l[t]!==void 0?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var Srt={xaxis:0,yaxis:1,zaxis:2},Mrt={tip:1,tail:0,cm:.25,center:.5},krt={tip:1,tail:1,cm:.75,center:.5};function dce(e,t){var r=e.fullSceneLayout,a=e.dataScale,n={};function o(u,f){var c=r[f],h=a[Srt[f]];return wrt(u,function(v){return c.d2l(v)*h})}n.vectors=hce(o(t.u,"xaxis"),o(t.v,"yaxis"),o(t.w,"zaxis"),t._len),n.positions=hce(o(t.x,"xaxis"),o(t.y,"yaxis"),o(t.z,"zaxis"),t._len);var i=Art(t);n.colormap=Trt(t),n.vertexIntensityBounds=[i.min/t._normMax,i.max/t._normMax],n.coneOffset=Mrt[t.anchor],t.sizemode==="scaled"?n.coneSize=t.sizeref||.5:n.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5;var s=brt(n),l=t.lightposition;return s.lightPosition=[l.x,l.y,l.z],s.ambient=t.lighting.ambient,s.diffuse=t.lighting.diffuse,s.specular=t.lighting.specular,s.roughness=t.lighting.roughness,s.fresnel=t.lighting.fresnel,s.opacity=t.opacity,t._pad=krt[t.anchor]*s.vectorScale*s.coneScale*t._normMax,s}IN.update=function(e){this.data=e;var t=dce(this.scene,e);this.mesh.update(t)};IN.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function Ert(e,t){var r=e.glplot.gl,a=dce(e,t),n=_rt(r,a),o=new vce(e,t.uid);return o.mesh=n,o.data=t,n._trace=o,e.glplot.add(n),o}var Crt=Ert,Lrt={moduleType:"trace",name:"cone",basePlotModule:Pl,categories:["gl3d","showLegend"],attributes:cce,supplyDefaults:mrt,colorbar:{min:"cmin",max:"cmax"},calc:xrt,plot:Crt,eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{description:["Use cone traces to visualize vector fields.","","Specify a vector field using 6 1D arrays,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, `w`.","The cones are drawn exactly at the positions given","by `x`, `y` and `z`."].join(" ")}},Prt=Lrt,Irt=bo,fw=Ss.axisHoverFormat,Drt=zn.hovertemplateAttrs,Rrt=hS,pce=ao,DN=cn.extendFlat,yS={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the x coordinates of the vector field."},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the y coordinates of the vector field."},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the z coordinates of the vector field."},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},starts:{x:{valType:"data_array",editType:"calc",description:["Sets the x components of the starting position of the streamtubes"].join(" ")},y:{valType:"data_array",editType:"calc",description:["Sets the y components of the starting position of the streamtubes"].join(" ")},z:{valType:"data_array",editType:"calc",description:["Sets the z components of the starting position of the streamtubes"].join(" ")},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc",description:["The maximum number of displayed segments in a streamtube."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,dflt:1,description:["The scaling factor for the streamtubes.","The default is 1, which avoids two max divergence tubes from touching","at adjacent starting positions."].join(" ")},text:{valType:"string",dflt:"",editType:"calc",description:["Sets a text element associated with this trace.","If trace `hoverinfo` contains a *text* flag,","this text element will be seen in all hover labels.","Note that streamtube traces do not support array `text` values."].join(" ")},hovertext:{valType:"string",dflt:"",editType:"calc",description:"Same as `text`."},hovertemplate:Drt({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:fw("u",1),vhoverformat:fw("v",1),whoverformat:fw("w",1),xhoverformat:fw("x"),yhoverformat:fw("y"),zhoverformat:fw("z"),showlegend:DN({},pce.showlegend,{dflt:!1})};DN(yS,Irt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var zrt=["opacity","lightposition","lighting"];zrt.forEach(function(e){yS[e]=Rrt[e]});yS.hoverinfo=DN({},pce.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"});yS.transforms=void 0;var gce=yS,Frt=bt.exports,Ort=su,Nrt=gce,Brt=function(t,r,a,n){function o(h,v){return Frt.coerce(t,r,Nrt,h,v)}var i=o("u"),s=o("v"),l=o("w"),u=o("x"),f=o("y"),c=o("z");if(!i||!i.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}o("starts.x"),o("starts.y"),o("starts.z"),o("maxdisplayed"),o("sizeref"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),Ort(t,r,n,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),r._length=null},mce=Ns.exports.gl_streamtube3d,$rt=mce.createTubeMesh,Urt=bt.exports,Hrt=Oy.parseColorScale,Grt=Qo.extractOpts,yce=dS,xce={xaxis:0,yaxis:1,zaxis:2};function bce(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var RN=bce.prototype;RN.handlePick=function(e){var t=this.scene.fullSceneLayout,r=this.scene.dataScale;function a(i,s){var l=t[s],u=r[xce[s]];return l.l2c(i)/u}if(e.object===this.mesh){var n=e.data.position,o=e.data.velocity;return e.traceCoordinate=[a(n[0],"xaxis"),a(n[1],"yaxis"),a(n[2],"zaxis"),a(o[0],"xaxis"),a(o[1],"yaxis"),a(o[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.hovertext||this.data.text,!0}};function _ce(e){var t=e.length,r;return t>2?r=e.slice(1,t-1):t===2?r=[(e[0]+e[1])/2]:r=e,r}function zN(e){var t=e.length;return t===1?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function wce(e,t){var r=e.fullSceneLayout,a=e.dataScale,n=t._len,o={};function i(I,R){var B=r[R],N=a[xce[R]];return Urt.simpleMap(I,function(D){return B.d2l(D)*N})}if(o.vectors=yce(i(t._u,"xaxis"),i(t._v,"yaxis"),i(t._w,"zaxis"),n),!n)return{positions:[],cells:[]};var s=i(t._Xs,"xaxis"),l=i(t._Ys,"yaxis"),u=i(t._Zs,"zaxis");o.meshgrid=[s,l,u],o.gridFill=t._gridFill;var f=t._slen;if(f)o.startingPositions=yce(i(t._startsX,"xaxis"),i(t._startsY,"yaxis"),i(t._startsZ,"zaxis"));else{for(var c=l[0],h=_ce(s),v=_ce(u),p=new Array(h.length*v.length),d=0,g=0;g<h.length;g++)for(var m=0;m<v.length;m++)p[d++]=[h[g],c,v[m]];o.startingPositions=p}o.colormap=Hrt(t),o.tubeSize=t.sizeref,o.maxLength=t.maxdisplayed;var y=i(t._xbnds,"xaxis"),_=i(t._ybnds,"yaxis"),S=i(t._zbnds,"zaxis"),M=zN(s),w=zN(l),A=zN(u),k=[[y[0]-M[0],_[0]-w[0],S[0]-A[0]],[y[1]+M[1],_[1]+w[1],S[1]+A[1]]],T=mce(o,k),L=Grt(t);T.vertexIntensityBounds=[L.min/t._normMax,L.max/t._normMax];var C=t.lightposition;return T.lightPosition=[C.x,C.y,C.z],T.ambient=t.lighting.ambient,T.diffuse=t.lighting.diffuse,T.specular=t.lighting.specular,T.roughness=t.lighting.roughness,T.fresnel=t.lighting.fresnel,T.opacity=t.opacity,t._pad=T.tubeScale*t.sizeref*2,T}RN.update=function(e){this.data=e;var t=wce(this.scene,e);this.mesh.update(t)};RN.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function Vrt(e,t){var r=e.glplot.gl,a=wce(e,t),n=$rt(r,a),o=new bce(e,t.uid);return o.mesh=n,o.data=t,n._trace=o,e.glplot.add(n),o}var jrt=Vrt,qrt={moduleType:"trace",name:"streamtube",basePlotModule:Pl,categories:["gl3d","showLegend"],attributes:gce,supplyDefaults:Brt,colorbar:{min:"cmin",max:"cmax"},calc:xN.calc,plot:jrt,eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{description:["Use a streamtube trace to visualize flow in a vector field.","","Specify a vector field using 6 1D arrays of equal length,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, and `w`.","","By default, the tubes' starting positions will be cut from the vector field's","x-z plane at its minimum y value.","To specify your own starting position, use attributes `starts.x`, `starts.y`","and `starts.z`.","The color is encoded by the norm of (u, v, w), and the local radius","by the divergence of (u, v, w)."].join(" ")}},Yrt=qrt,Wrt=zn.hovertemplateAttrs,Xrt=zn.texttemplateAttrs,cp=Cl,Zrt=ao,Tce=bo,Krt=Bd.dash,cw=cn.extendFlat,Jrt=Jo.overrideAll,lm=cp.marker,Ace=cp.line,Qrt=lm.line,xS=Jrt({lon:{valType:"data_array",description:"Sets the longitude coordinates (in degrees East)."},lat:{valType:"data_array",description:"Sets the latitude coordinates (in degrees North)."},locations:{valType:"data_array",description:["Sets the coordinates via location IDs or names.","Coordinates correspond to the centroid of each location given.","See `locationmode` for more info."].join(" ")},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3",description:["Determines the set of locations used to match entries in `locations`","to regions on the map.","Values *ISO-3*, *USA-states*, *country names* correspond to features on","the base map and value *geojson-id* corresponds to features from a custom","GeoJSON linked to the `geojson` attribute."].join(" ")},geojson:{valType:"any",editType:"calc",description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used when `locations` is set.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:{valType:"string",editType:"calc",dflt:"id",description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Only has an effect when `geojson` is set.","Support nested property, for example *properties.name*."].join(" ")},mode:cw({},cp.mode,{dflt:"markers"}),text:cw({},cp.text,{description:["Sets text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:Xrt({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:cw({},cp.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),textfont:cp.textfont,textposition:cp.textposition,line:{color:Ace.color,width:Ace.width,dash:Krt},connectgaps:cp.connectgaps,marker:cw({symbol:lm.symbol,opacity:lm.opacity,size:lm.size,sizeref:lm.sizeref,sizemin:lm.sizemin,sizemode:lm.sizemode,colorbar:lm.colorbar,line:cw({width:Qrt.width},Tce("marker.line")),gradient:lm.gradient},Tce("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape."].join(" ")},fillcolor:cp.fillcolor,selected:cp.selected,unselected:cp.unselected,hoverinfo:cw({},Zrt.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:Wrt()},"calc","nested"),FN=bt.exports,ON=Ro,eat=Wd,tat=n0,rat=i0,aat=Gg,nat=xS,iat=function(t,r,a,n){function o(v,p){return FN.coerce(t,r,nat,v,p)}var i=o("locations"),s;if(i&&i.length){var l=o("geojson"),u;(typeof l=="string"&&l!==""||FN.isPlainObject(l))&&(u="geojson-id");var f=o("locationmode",u);f==="geojson-id"&&o("featureidkey"),s=i.length}else{var c=o("lon")||[],h=o("lat")||[];s=Math.min(c.length,h.length)}if(!s){r.visible=!1;return}r._length=s,o("text"),o("hovertext"),o("hovertemplate"),o("mode"),ON.hasLines(r)&&(tat(t,r,a,n,o),o("connectgaps")),ON.hasMarkers(r)&&eat(t,r,a,n,o,{gradient:!0}),ON.hasText(r)&&(o("texttemplate"),rat(t,r,n,o)),o("fill"),r.fill!=="none"&&aat(t,r,a,o),FN.coerceSelectionMarkerOpacity(r,o)},Sce=rn.exports,oat=function(t,r,a){var n={},o=a[r.geo]._subplot,i=o.mockAxis,s=t.lonlat;return n.lonLabel=Sce.tickText(i,i.c2l(s[0]),!0).text,n.latLabel=Sce.tickText(i,i.c2l(s[1]),!0).text,n},NN=gn,Mce=Un.BADNUM,sat=Xd,lat=Vg,uat=Zd,kce=bt.exports._;function Ece(e){return e&&typeof e=="string"}var Cce=function(t,r){var a=Array.isArray(r.locations),n=a?r.locations.length:r._length,o=new Array(n),i;r.geojson?i=function(h){return Ece(h)||NN(h)}:i=Ece;for(var s=0;s<n;s++){var l=o[s]={};if(a){var u=r.locations[s];l.loc=i(u)?u:null}else{var f=r.lon[s],c=r.lat[s];NN(f)&&NN(c)?l.lonlat=[+f,+c]:l.lonlat=[Mce,Mce]}}return lat(o,r),sat(t,r),uat(o,r),n&&(o[0].t={labels:{lat:kce(t,"lat:")+" ",lon:kce(t,"lon:")+" "}}),o},n4={exports:{}},ql={};ql.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};ql.axesNames=["lonaxis","lataxis"];ql.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};ql.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};ql.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};ql.clipPad=.001;ql.precision=.1;ql.landColor="#F0DC82";ql.waterColor="#3399FF";ql.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};ql.sphereSVG={type:"Sphere"};ql.fillLayers={ocean:1,land:1,lakes:1};ql.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};ql.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];ql.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];ql.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"};function Lce(e){return e}function BN(e){if(e==null)return Lce;var t,r,a=e.scale[0],n=e.scale[1],o=e.translate[0],i=e.translate[1];return function(s,l){l||(t=r=0);var u=2,f=s.length,c=new Array(f);for(c[0]=(t+=s[0])*a+o,c[1]=(r+=s[1])*n+i;u<f;)c[u]=s[u],++u;return c}}function Pce(e){var t=BN(e.transform),r,a=1/0,n=a,o=-a,i=-a;function s(u){u=t(u),u[0]<a&&(a=u[0]),u[0]>o&&(o=u[0]),u[1]<n&&(n=u[1]),u[1]>i&&(i=u[1])}function l(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(l);break;case"Point":s(u.coordinates);break;case"MultiPoint":u.coordinates.forEach(s);break}}e.arcs.forEach(function(u){for(var f=-1,c=u.length,h;++f<c;)h=t(u[f],f),h[0]<a&&(a=h[0]),h[0]>o&&(o=h[0]),h[1]<n&&(n=h[1]),h[1]>i&&(i=h[1])});for(r in e.objects)l(e.objects[r]);return[a,n,o,i]}function fat(e,t){for(var r,a=e.length,n=a-t;n<--a;)r=e[n],e[n++]=e[a],e[a]=r}function cat(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return Ice(e,r)})}:Ice(e,t)}function Ice(e,t){var r=t.id,a=t.bbox,n=t.properties==null?{}:t.properties,o=i4(e,t);return r==null&&a==null?{type:"Feature",properties:n,geometry:o}:a==null?{type:"Feature",id:r,properties:n,geometry:o}:{type:"Feature",id:r,bbox:a,properties:n,geometry:o}}function i4(e,t){var r=BN(e.transform),a=e.arcs;function n(f,c){c.length&&c.pop();for(var h=a[f<0?~f:f],v=0,p=h.length;v<p;++v)c.push(r(h[v],v));f<0&&fat(c,p)}function o(f){return r(f)}function i(f){for(var c=[],h=0,v=f.length;h<v;++h)n(f[h],c);return c.length<2&&c.push(c[0]),c}function s(f){for(var c=i(f);c.length<4;)c.push(c[0]);return c}function l(f){return f.map(s)}function u(f){var c=f.type,h;switch(c){case"GeometryCollection":return{type:c,geometries:f.geometries.map(u)};case"Point":h=o(f.coordinates);break;case"MultiPoint":h=f.coordinates.map(o);break;case"LineString":h=i(f.arcs);break;case"MultiLineString":h=f.arcs.map(i);break;case"Polygon":h=l(f.arcs);break;case"MultiPolygon":h=f.arcs.map(l);break;default:return null}return{type:c,coordinates:h}}return u(t)}function Dce(e,t){var r={},a={},n={},o=[],i=-1;t.forEach(function(u,f){var c=e.arcs[u<0?~u:u],h;c.length<3&&!c[1][0]&&!c[1][1]&&(h=t[++i],t[i]=u,t[f]=h)}),t.forEach(function(u){var f=s(u),c=f[0],h=f[1],v,p;if(v=n[c])if(delete n[v.end],v.push(u),v.end=h,p=a[h]){delete a[p.start];var d=p===v?v:v.concat(p);a[d.start=v.start]=n[d.end=p.end]=d}else a[v.start]=n[v.end]=v;else if(v=a[h])if(delete a[v.start],v.unshift(u),v.start=c,p=n[c]){delete n[p.end];var g=p===v?v:p.concat(v);a[g.start=p.start]=n[g.end=v.end]=g}else a[v.start]=n[v.end]=v;else v=[u],a[v.start=c]=n[v.end=h]=v});function s(u){var f=e.arcs[u<0?~u:u],c=f[0],h;return e.transform?(h=[0,0],f.forEach(function(v){h[0]+=v[0],h[1]+=v[1]})):h=f[f.length-1],u<0?[h,c]:[c,h]}function l(u,f){for(var c in u){var h=u[c];delete f[h.start],delete h.start,delete h.end,h.forEach(function(v){r[v<0?~v:v]=1}),o.push(h)}}return l(n,a),l(a,n),t.forEach(function(u){r[u<0?~u:u]||o.push([u])}),o}function hat(e){return i4(e,Rce.apply(this,arguments))}function Rce(e,t,r){var a,n,o;if(arguments.length>1)a=vat(e,t,r);else for(n=0,a=new Array(o=e.arcs.length);n<o;++n)a[n]=n;return{type:"MultiLineString",arcs:Dce(e,a)}}function vat(e,t,r){var a=[],n=[],o;function i(c){var h=c<0?~c:c;(n[h]||(n[h]=[])).push({i:c,g:o})}function s(c){c.forEach(i)}function l(c){c.forEach(s)}function u(c){c.forEach(l)}function f(c){switch(o=c,c.type){case"GeometryCollection":c.geometries.forEach(f);break;case"LineString":s(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return f(t),n.forEach(r==null?function(c){a.push(c[0].i)}:function(c){r(c[0].g,c[c.length-1].g)&&a.push(c[0].i)}),a}function dat(e){for(var t=-1,r=e.length,a,n=e[r-1],o=0;++t<r;)a=n,n=e[t],o+=a[0]*n[1]-a[1]*n[0];return Math.abs(o)}function pat(e){return i4(e,zce.apply(this,arguments))}function zce(e,t){var r={},a=[],n=[];t.forEach(o);function o(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(o);break;case"Polygon":i(l.arcs);break;case"MultiPolygon":l.arcs.forEach(i);break}}function i(l){l.forEach(function(u){u.forEach(function(f){(r[f=f<0?~f:f]||(r[f]=[])).push(l)})}),a.push(l)}function s(l){return dat(i4(e,{type:"Polygon",arcs:[l]}).coordinates[0])}return a.forEach(function(l){if(!l._){var u=[],f=[l];for(l._=1,n.push(u);l=f.pop();)u.push(l),l.forEach(function(c){c.forEach(function(h){r[h<0?~h:h].forEach(function(v){v._||(v._=1,f.push(v))})})})}}),a.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:n.map(function(l){var u=[],f;if(l.forEach(function(d){d.forEach(function(g){g.forEach(function(m){r[m<0?~m:m].length<2&&u.push(m)})})}),u=Dce(e,u),(f=u.length)>1)for(var c=1,h=s(u[0]),v,p;c<f;++c)(v=s(u[c]))>h&&(p=u[0],u[0]=u[c],u[c]=p,h=v);return u}).filter(function(l){return l.length>0})}}function Fce(e,t){for(var r=0,a=e.length;r<a;){var n=r+a>>>1;e[n]<t?r=n+1:a=n}return r}function gat(e){var t={},r=e.map(function(){return[]});function a(d,g){d.forEach(function(m){m<0&&(m=~m);var y=t[m];y?y.push(g):t[m]=[g]})}function n(d,g){d.forEach(function(m){a(m,g)})}function o(d,g){d.type==="GeometryCollection"?d.geometries.forEach(function(m){o(m,g)}):d.type in i&&i[d.type](d.arcs,g)}var i={LineString:a,MultiLineString:n,Polygon:n,MultiPolygon:function(d,g){d.forEach(function(m){n(m,g)})}};e.forEach(o);for(var s in t)for(var l=t[s],u=l.length,f=0;f<u;++f)for(var c=f+1;c<u;++c){var h=l[f],v=l[c],p;(p=r[h])[s=Fce(p,v)]!==v&&p.splice(s,0,v),(p=r[v])[s=Fce(p,h)]!==h&&p.splice(s,0,h)}return r}function Oce(e){if(e==null)return Lce;var t,r,a=e.scale[0],n=e.scale[1],o=e.translate[0],i=e.translate[1];return function(s,l){l||(t=r=0);var u=2,f=s.length,c=new Array(f),h=Math.round((s[0]-o)/a),v=Math.round((s[1]-i)/n);for(c[0]=h-t,t=h,c[1]=v-r,r=v;u<f;)c[u]=s[u],++u;return c}}function mat(e,t){if(e.transform)throw new Error("already quantized");if(!t||!t.scale){if(!((i=Math.floor(t))>=2))throw new Error("n must be \u22652");l=e.bbox||Pce(e);var r=l[0],a=l[1],n=l[2],o=l[3],i;t={scale:[n-r?(n-r)/(i-1):1,o-a?(o-a)/(i-1):1],translate:[r,a]}}else l=e.bbox;var s=Oce(t),l,u,f=e.objects,c={};function h(d){return s(d)}function v(d){var g;switch(d.type){case"GeometryCollection":g={type:"GeometryCollection",geometries:d.geometries.map(v)};break;case"Point":g={type:"Point",coordinates:h(d.coordinates)};break;case"MultiPoint":g={type:"MultiPoint",coordinates:d.coordinates.map(h)};break;default:return d}return d.id!=null&&(g.id=d.id),d.bbox!=null&&(g.bbox=d.bbox),d.properties!=null&&(g.properties=d.properties),g}function p(d){var g=0,m=1,y=d.length,_,S=new Array(y);for(S[0]=s(d[0],0);++g<y;)((_=s(d[g],g))[0]||_[1])&&(S[m++]=_);return m===1&&(S[m++]=[0,0]),S.length=m,S}for(u in f)c[u]=v(f[u]);return{type:"Topology",bbox:l,transform:t,objects:c,arcs:e.arcs.map(p)}}var yat=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bbox:Pce,feature:cat,mesh:hat,meshArcs:Rce,merge:pat,mergeArcs:zce,neighbors:gat,quantize:mat,transform:BN,untransform:Oce}),Nce=qh(yat),$N=n4.exports={},xat=ql.locationmodeToLayer,bat=Nce.feature;$N.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};$N.getTopojsonPath=function(e,t){return e+t+".json"};$N.getTopojsonFeatures=function(e,t){var r=xat[e.locationmode],a=t.objects[r];return bat(t,a).features};var $y={},_at=Un.BADNUM;$y.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,a=[],n=[],o=0;o<e.length;o++){var i=e[o],s=i.lonlat;s[0]!==_at?n.push(s):!r&&n.length>0&&(a.push(n),n=[])}return n.length>0&&a.push(n),a};$y.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};$y.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};$y.makeBlank=function(){return{type:"Point",coordinates:[]}};var wat={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"},UN={},Il={},HN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=63710088e-1,e.factors={centimeters:e.earthRadius*100,centimetres:e.earthRadius*100,degrees:e.earthRadius/111325,feet:e.earthRadius*3.28084,inches:e.earthRadius*39.37,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:e.earthRadius*1e3,millimetres:e.earthRadius*1e3,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius*1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(C,I,R){R===void 0&&(R={});var B={type:"Feature"};return(R.id===0||R.id)&&(B.id=R.id),R.bbox&&(B.bbox=R.bbox),B.properties=I||{},B.geometry=C,B}e.feature=t;function r(C,I,R){switch(C){case"Point":return a(I).geometry;case"LineString":return s(I).geometry;case"Polygon":return o(I).geometry;case"MultiPoint":return c(I).geometry;case"MultiLineString":return f(I).geometry;case"MultiPolygon":return h(I).geometry;default:throw new Error(C+" is invalid")}}e.geometry=r;function a(C,I,R){if(R===void 0&&(R={}),!C)throw new Error("coordinates is required");if(!Array.isArray(C))throw new Error("coordinates must be an Array");if(C.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(C[0])||!A(C[1]))throw new Error("coordinates must contain numbers");var B={type:"Point",coordinates:C};return t(B,I,R)}e.point=a;function n(C,I,R){return R===void 0&&(R={}),u(C.map(function(B){return a(B,I)}),R)}e.points=n;function o(C,I,R){R===void 0&&(R={});for(var B=0,N=C;B<N.length;B++){var D=N[B];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var O=0;O<D[D.length-1].length;O++)if(D[D.length-1][O]!==D[0][O])throw new Error("First and last Position are not equivalent.")}var $={type:"Polygon",coordinates:C};return t($,I,R)}e.polygon=o;function i(C,I,R){return R===void 0&&(R={}),u(C.map(function(B){return o(B,I)}),R)}e.polygons=i;function s(C,I,R){if(R===void 0&&(R={}),C.length<2)throw new Error("coordinates must be an array of two or more positions");var B={type:"LineString",coordinates:C};return t(B,I,R)}e.lineString=s;function l(C,I,R){return R===void 0&&(R={}),u(C.map(function(B){return s(B,I)}),R)}e.lineStrings=l;function u(C,I){I===void 0&&(I={});var R={type:"FeatureCollection"};return I.id&&(R.id=I.id),I.bbox&&(R.bbox=I.bbox),R.features=C,R}e.featureCollection=u;function f(C,I,R){R===void 0&&(R={});var B={type:"MultiLineString",coordinates:C};return t(B,I,R)}e.multiLineString=f;function c(C,I,R){R===void 0&&(R={});var B={type:"MultiPoint",coordinates:C};return t(B,I,R)}e.multiPoint=c;function h(C,I,R){R===void 0&&(R={});var B={type:"MultiPolygon",coordinates:C};return t(B,I,R)}e.multiPolygon=h;function v(C,I,R){R===void 0&&(R={});var B={type:"GeometryCollection",geometries:C};return t(B,I,R)}e.geometryCollection=v;function p(C,I){if(I===void 0&&(I=0),I&&!(I>=0))throw new Error("precision must be a positive number");var R=Math.pow(10,I||0);return Math.round(C*R)/R}e.round=p;function d(C,I){I===void 0&&(I="kilometers");var R=e.factors[I];if(!R)throw new Error(I+" units is invalid");return C*R}e.radiansToLength=d;function g(C,I){I===void 0&&(I="kilometers");var R=e.factors[I];if(!R)throw new Error(I+" units is invalid");return C/R}e.lengthToRadians=g;function m(C,I){return _(g(C,I))}e.lengthToDegrees=m;function y(C){var I=C%360;return I<0&&(I+=360),I}e.bearingToAzimuth=y;function _(C){var I=C%(2*Math.PI);return I*180/Math.PI}e.radiansToDegrees=_;function S(C){var I=C%360;return I*Math.PI/180}e.degreesToRadians=S;function M(C,I,R){if(I===void 0&&(I="kilometers"),R===void 0&&(R="kilometers"),!(C>=0))throw new Error("length must be a positive number");return d(g(C,I),R)}e.convertLength=M;function w(C,I,R){if(I===void 0&&(I="meters"),R===void 0&&(R="kilometers"),!(C>=0))throw new Error("area must be a positive number");var B=e.areaFactors[I];if(!B)throw new Error("invalid original units");var N=e.areaFactors[R];if(!N)throw new Error("invalid final units");return C/B*N}e.convertArea=w;function A(C){return!isNaN(C)&&C!==null&&!Array.isArray(C)}e.isNumber=A;function k(C){return!!C&&C.constructor===Object}e.isObject=k;function T(C){if(!C)throw new Error("bbox is required");if(!Array.isArray(C))throw new Error("bbox must be an Array");if(C.length!==4&&C.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");C.forEach(function(I){if(!A(I))throw new Error("bbox must only contain numbers")})}e.validateBBox=T;function L(C){if(!C)throw new Error("id is required");if(["string","number"].indexOf(typeof C)===-1)throw new Error("id must be a number or a string")}e.validateId=L})(HN);Object.defineProperty(Il,"__esModule",{value:!0});var Ff=HN;function bS(e,t,r){if(e!==null)for(var a,n,o,i,s,l,u,f=0,c=0,h,v=e.type,p=v==="FeatureCollection",d=v==="Feature",g=p?e.features.length:1,m=0;m<g;m++){u=p?e.features[m].geometry:d?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var y=0;y<s;y++){var _=0,S=0;if(i=h?u.geometries[y]:u,i!==null){l=i.coordinates;var M=i.type;switch(f=r&&(M==="Polygon"||M==="MultiPolygon")?1:0,M){case null:break;case"Point":if(t(l,c,m,_,S)===!1)return!1;c++,_++;break;case"LineString":case"MultiPoint":for(a=0;a<l.length;a++){if(t(l[a],c,m,_,S)===!1)return!1;c++,M==="MultiPoint"&&_++}M==="LineString"&&_++;break;case"Polygon":case"MultiLineString":for(a=0;a<l.length;a++){for(n=0;n<l[a].length-f;n++){if(t(l[a][n],c,m,_,S)===!1)return!1;c++}M==="MultiLineString"&&_++,M==="Polygon"&&S++}M==="Polygon"&&_++;break;case"MultiPolygon":for(a=0;a<l.length;a++){for(S=0,n=0;n<l[a].length;n++){for(o=0;o<l[a][n].length-f;o++){if(t(l[a][n][o],c,m,_,S)===!1)return!1;c++}S++}_++}break;case"GeometryCollection":for(a=0;a<i.geometries.length;a++)if(bS(i.geometries[a],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tat(e,t,r,a){var n=r;return bS(e,function(o,i,s,l,u){i===0&&r===void 0?n=o:n=t(n,o,i,s,l,u)},a),n}function Bce(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function Aat(e,t,r){var a=r;return Bce(e,function(n,o){o===0&&r===void 0?a=n:a=t(a,n,o)}),a}function $ce(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Sat(e,t,r){var a=r;return $ce(e,function(n,o){o===0&&r===void 0?a=n:a=t(a,n,o)}),a}function Mat(e){var t=[];return bS(e,function(r){t.push(r)}),t}function GN(e,t){var r,a,n,o,i,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",p=e.type==="Feature",d=v?e.features.length:1;for(r=0;r<d;r++){for(s=v?e.features[r].geometry:p?e.geometry:e,u=v?e.features[r].properties:p?e.properties:{},f=v?e.features[r].bbox:p?e.bbox:void 0,c=v?e.features[r].id:p?e.id:void 0,l=s?s.type==="GeometryCollection":!1,i=l?s.geometries.length:1,n=0;n<i;n++){if(o=l?s.geometries[n]:s,o===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<o.geometries.length;a++)if(t(o.geometries[a],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function kat(e,t,r){var a=r;return GN(e,function(n,o,i,s,l){o===0&&r===void 0?a=n:a=t(a,n,o,i,s,l)}),a}function o4(e,t){GN(e,function(r,a,n,o,i){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Ff.feature(r,n,{bbox:o,id:i}),a,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(Ff.feature(c,n),a,u)===!1)return!1}})}function Eat(e,t,r){var a=r;return o4(e,function(n,o,i){o===0&&i===0&&r===void 0?a=n:a=t(a,n,o,i)}),a}function Uce(e,t){o4(e,function(r,a,n){var o=0;if(!!r.geometry){var i=r.geometry.type;if(!(i==="Point"||i==="MultiPoint")){var s,l=0,u=0,f=0;if(bS(r,function(c,h,v,p,d){if(s===void 0||a>l||p>u||d>f){s=c,l=a,u=p,f=d,o=0;return}var g=Ff.lineString([s,c],r.properties);if(t(g,a,n,d,o)===!1)return!1;o++,s=c})===!1)return!1}}})}function Cat(e,t,r){var a=r,n=!1;return Uce(e,function(o,i,s,l,u){n===!1&&r===void 0?a=o:a=t(a,o,i,s,l,u),n=!0}),a}function Hce(e,t){if(!e)throw new Error("geojson is required");o4(e,function(r,a,n){if(r.geometry!==null){var o=r.geometry.type,i=r.geometry.coordinates;switch(o){case"LineString":if(t(r,a,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(t(Ff.lineString(i[s],r.properties),a,n,s)===!1)return!1;break}}})}function Lat(e,t,r){var a=r;return Hce(e,function(n,o,i,s){o===0&&r===void 0?a=n:a=t(a,n,o,i,s)}),a}function Pat(e,t){if(t=t||{},!Ff.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,a=t.multiFeatureIndex||0,n=t.geometryIndex||0,o=t.segmentIndex||0,i=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),i=i||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":i=i||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=l.length+o-1),Ff.lineString([l[o],l[o+1]],i,t);case"Polygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o-1),Ff.lineString([l[n][o],l[n][o+1]],i,t);case"MultiLineString":return a<0&&(a=l.length+a),o<0&&(o=l[a].length+o-1),Ff.lineString([l[a][o],l[a][o+1]],i,t);case"MultiPolygon":return a<0&&(a=l.length+a),n<0&&(n=l[a].length+n),o<0&&(o=l[a][n].length-o-1),Ff.lineString([l[a][n][o],l[a][n][o+1]],i,t)}throw new Error("geojson is invalid")}function Iat(e,t){if(t=t||{},!Ff.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,a=t.multiFeatureIndex||0,n=t.geometryIndex||0,o=t.coordIndex||0,i=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),i=i||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":i=i||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return Ff.point(l,i,t);case"MultiPoint":return a<0&&(a=l.length+a),Ff.point(l[a],i,t);case"LineString":return o<0&&(o=l.length+o),Ff.point(l[o],i,t);case"Polygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),Ff.point(l[n][o],i,t);case"MultiLineString":return a<0&&(a=l.length+a),o<0&&(o=l[a].length+o),Ff.point(l[a][o],i,t);case"MultiPolygon":return a<0&&(a=l.length+a),n<0&&(n=l[a].length+n),o<0&&(o=l[a][n].length-o),Ff.point(l[a][n][o],i,t)}throw new Error("geojson is invalid")}Il.coordAll=Mat;Il.coordEach=bS;Il.coordReduce=Tat;Il.featureEach=$ce;Il.featureReduce=Sat;Il.findPoint=Iat;Il.findSegment=Pat;Il.flattenEach=o4;Il.flattenReduce=Eat;Il.geomEach=GN;Il.geomReduce=kat;Il.lineEach=Hce;Il.lineReduce=Lat;Il.propEach=Bce;Il.propReduce=Aat;Il.segmentEach=Uce;Il.segmentReduce=Cat;Object.defineProperty(UN,"__esModule",{value:!0});var Dat=Il,Gce=6378137;function Rat(e){return Dat.geomReduce(e,function(t,r){return t+zat(r)},0)}UN.default=Rat;function zat(e){var t=0,r;switch(e.type){case"Polygon":return Vce(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Vce(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Vce(e){var t=0;if(e&&e.length>0){t+=Math.abs(jce(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(jce(e[r]))}return t}function jce(e){var t,r,a,n,o,i,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,o=u-1,i=0):s===u-1?(n=u-1,o=0,i=1):(n=s,o=s+1,i=s+2),t=e[n],r=e[o],a=e[i],l+=(VN(a[0])-VN(t[0]))*Math.sin(VN(r[1]));l=l*Gce*Gce/2}return l}function VN(e){return e*Math.PI/180}var jN={};Object.defineProperty(jN,"__esModule",{value:!0});var Fat=Il,Oat=HN;function Nat(e,t){t===void 0&&(t={});var r=0,a=0,n=0;return Fat.coordEach(e,function(o){r+=o[0],a+=o[1],n++},!0),Oat.point([r/n,a/n],t.properties)}jN.default=Nat;var qN={};Object.defineProperty(qN,"__esModule",{value:!0});var Bat=Il;function YN(e){var t=[1/0,1/0,-1/0,-1/0];return Bat.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}YN.default=YN;qN.default=YN;var $at=Ra.exports,qce=wat,Uat=UN,Hat=jN,Gat=qN,Yce=A5,hw=ny.exports,Vat=A_,jat=h5,s4=FT.exports,Wce=Object.keys(qce),qat={"ISO-3":Yce,"USA-states":Yce,"country names":Yat};function Yat(e){for(var t=0;t<Wce.length;t++){var r=Wce[t],a=new RegExp(qce[r]);if(a.test(e.trim().toLowerCase()))return r}return hw.log("Unrecognized country name: "+e+"."),!1}function Wat(e,t,r){if(!t||typeof t!="string")return!1;var a=qat[e](t),n,o,i;if(a){if(e==="USA-states")for(n=[],i=0;i<r.length;i++)o=r[i],o.properties&&o.properties.gu&&o.properties.gu==="USA"&&n.push(o);else n=r;for(i=0;i<n.length;i++)if(o=n[i],o.id===a)return o;hw.log(["Location with id",a,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function Xat(e){var t=e.geometry,r=t.coordinates,a=e.id,n=[],o,i,s,l;function u(f){for(var c=0;c<f.length-1;c++)if(f[c][0]>0&&f[c+1][0]<0)return c;return null}switch(a==="RUS"||a==="FJI"?o=function(f){var c;if(u(f)===null)c=f;else for(c=new Array(f.length),l=0;l<f.length;l++)c[l]=[f[l][0]<0?f[l][0]+360:f[l][0],f[l][1]];n.push(s4.tester(c))}:a==="ATA"?o=function(f){var c=u(f);if(c===null)return n.push(s4.tester(f));var h=new Array(f.length+1),v=0;for(l=0;l<f.length;l++)l>c?h[v++]=[f[l][0]+360,f[l][1]]:l===c?(h[v++]=f[l],h[v++]=[f[l][0],-90]):h[v++]=f[l];var p=s4.tester(h);p.pts.pop(),n.push(p)}:o=function(f){n.push(s4.tester(f))},t.type){case"MultiPolygon":for(i=0;i<r.length;i++)for(s=0;s<r[i].length;s++)o(r[i][s]);break;case"Polygon":for(i=0;i<r.length;i++)o(r[i]);break}return n}function Xce(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},a=typeof t=="string"?r[t]:t;return Vat(a)?a:(hw.error("Oops ... something went wrong when fetching "+t),!1)}function Zat(e){var t=e[0].trace,r=Xce(t);if(!r)return!1;var a={},n=[],o;for(o=0;o<t._length;o++){var i=e[o];(i.loc||i.loc===0)&&(a[i.loc]=i)}function s(f){var c=jat(f,t.featureidkey||"id").get(),h=a[c];if(h){var v=f.geometry;if(v.type==="Polygon"||v.type==="MultiPolygon"){var p={type:"Feature",id:c,geometry:v,properties:{}};p.properties.ct=Kat(p),h.fIn=f,h.fOut=p,n.push(p)}else hw.log(["Location",h.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete a[c]}switch(r.type){case"FeatureCollection":var l=r.features;for(o=0;o<l.length;o++)s(l[o]);break;case"Feature":s(r);break;default:return hw.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var u in a)hw.log(["Location *"+u+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return n}function Kat(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var a=t.coordinates,n=0,o=0;o<a.length;o++){var i={type:"Polygon",coordinates:a[o]},s=Uat.default(i);s>n&&(n=s,r=i)}else r=t;return Hat.default(r).geometry.coordinates}function Jat(e){var t=window.PlotlyGeoAssets||{},r=[];function a(l){return new Promise(function(u,f){$at.json(l,function(c,h){if(c){delete t[l];var v=c.status===404?'GeoJSON at URL "'+l+'" does not exist.':"Unexpected error while fetching from "+l;return f(new Error(v))}return t[l]=h,u(h)})})}function n(l){return new Promise(function(u,f){var c=0,h=setInterval(function(){if(t[l]&&t[l]!=="pending")return clearInterval(h),u(t[l]);if(c>100)return clearInterval(h),f("Unexpected error while fetching from "+l);c++},50)})}for(var o=0;o<e.length;o++){var i=e[o][0].trace,s=i.geojson;typeof s=="string"&&(t[s]?t[s]==="pending"&&r.push(n(s)):(t[s]="pending",r.push(a(s))))}return r}function Qat(e){return Gat.default(e)}var _S={locationToFeature:Wat,feature2polygons:Xat,getTraceGeojson:Xce,extractTraceFeature:Zat,fetchTraceGeoData:Jat,computeBbox:Qat},ent=Ra.exports,tnt=xn.exports,Zce=Oa.exports,Kce=fh,rnt=Kce.stylePoints,ant=Kce.styleText,Jce=function(t,r){r&&nnt(t,r)};function nnt(e,t){var r=t[0].trace,a=t[0].node3;a.style("opacity",t[0].trace.opacity),rnt(a,r,e),ant(a,r,e),a.selectAll("path.js-line").style("fill","none").each(function(n){var o=ent.select(this),i=n.trace,s=i.line||{};o.call(Zce.stroke,s.color).call(tnt.dashLine,s.dash||"",s.width||0),i.fill!=="none"&&o.call(Zce.fill,i.fillcolor)})}var Qce=Ra.exports,WN=bt.exports,int=n4.exports.getTopojsonFeatures,XN=$y,l4=_S,ehe=Hd.findExtremes,ZN=Un.BADNUM,ont=Kd.calcMarkerSize,KN=Ro,snt=Jce;function lnt(e,t,r){var a=t.layers.frontplot.select(".scatterlayer"),n=WN.makeTraceGroups(a,r,"trace scattergeo");function o(i,s){i.lonlat[0]===ZN&&Qce.select(s).remove()}n.selectAll("*").remove(),n.each(function(i){var s=Qce.select(this),l=i[0].trace;if(KN.hasLines(l)||l.fill!=="none"){var u=XN.calcTraceToLineCoords(i),f=l.fill!=="none"?XN.makePolygon(u):XN.makeLine(u);s.selectAll("path.js-line").data([{geojson:f,trace:l}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}KN.hasMarkers(l)&&s.selectAll("path.point").data(WN.identity).enter().append("path").classed("point",!0).each(function(c){o(c,this)}),KN.hasText(l)&&s.selectAll("g").data(WN.identity).enter().append("g").append("text").each(function(c){o(c,this)}),snt(e,i)})}function unt(e,t){var r=e[0].trace,a=t[r.geo],n=a._subplot,o=r._length,i,s;if(Array.isArray(r.locations)){var l=r.locationmode,u=l==="geojson-id"?l4.extractTraceFeature(e):int(r,n.topojson);for(i=0;i<o;i++){s=e[i];var f=l==="geojson-id"?s.fOut:l4.locationToFeature(l,s.loc,u);s.lonlat=f?f.properties.ct:[ZN,ZN]}}var c={padded:!0},h,v;if(a.fitbounds==="geojson"&&r.locationmode==="geojson-id"){var p=l4.computeBbox(l4.getTraceGeojson(r));h=[p[0],p[2]],v=[p[1],p[3]]}else{for(h=new Array(o),v=new Array(o),i=0;i<o;i++)s=e[i],h[i]=s.lonlat[0],v[i]=s.lonlat[1];c.ppad=ont(r,o)}r._extremes.lon=ehe(a.lonaxis._ax,h,c),r._extremes.lat=ehe(a.lataxis._ax,v,c)}var the={calcGeoJSON:unt,plot:lnt},fnt=Rs,cnt=Un.BADNUM,hnt=QT,vnt=bt.exports.fillText,dnt=xS,pnt=function(t,r,a){var n=t.cd,o=n[0].trace,i=t.xa,s=t.ya,l=t.subplot,u=l.projection.isLonLatOverEdges,f=l.project;function c(y){var _=y.lonlat;if(_[0]===cnt||u(_))return 1/0;var S=f(_),M=f([r,a]),w=Math.abs(S[0]-M[0]),A=Math.abs(S[1]-M[1]),k=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(w*w+A*A)-k,1-3/k)}if(fnt.getClosest(n,c,t),t.index!==!1){var h=n[t.index],v=h.lonlat,p=[i.c2p(v),s.c2p(v)],d=h.mrc||1;t.x0=p[0]-d,t.x1=p[0]+d,t.y0=p[1]-d,t.y1=p[1]+d,t.loc=h.loc,t.lon=v[0],t.lat=v[1];var g={};g[o.geo]={_subplot:l};var m=o._module.formatLabels(h,o,g);return t.lonLabel=m.lonLabel,t.latLabel=m.latLabel,t.color=hnt(o,h),t.extraText=gnt(o,h,t,n[0].t.labels),t.hovertemplate=o.hovertemplate,[t]}};function gnt(e,t,r,a){if(e.hovertemplate)return;var n=t.hi||e.hoverinfo,o=n==="all"?dnt.hoverinfo.flags:n.split("+"),i=o.indexOf("location")!==-1&&Array.isArray(e.locations),s=o.indexOf("lon")!==-1,l=o.indexOf("lat")!==-1,u=o.indexOf("text")!==-1,f=[];function c(h){return h+"\xB0"}return i?f.push(t.loc):s&&l?f.push("("+c(r.latLabel)+", "+c(r.lonLabel)+")"):s?f.push(a.lon+c(r.lonLabel)):l&&f.push(a.lat+c(r.latLabel)),u&&vnt(t,e,f),f.join("<br>")}var mnt=function(t,r,a,n,o){t.lon=r.lon,t.lat=r.lat,t.location=r.loc?r.loc:null;var i=n[o];return i.fIn&&i.fIn.properties&&(t.properties=i.fIn.properties),t},rhe=Ro,ynt=Un.BADNUM,xnt=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s=a[0].trace,l,u,f,c,h,v=!rhe.hasMarkers(s)&&!rhe.hasText(s);if(v)return[];if(r===!1)for(h=0;h<a.length;h++)a[h].selected=0;else for(h=0;h<a.length;h++)l=a[h],u=l.lonlat,u[0]!==ynt&&(f=n.c2p(u),c=o.c2p(u),r.contains([f,c],null,h,t)?(i.push({pointNumber:h,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return i};function Uy(){return new u4}function u4(){this.reset()}u4.prototype={constructor:u4,reset:function(){this.s=this.t=0},add:function(e){ahe(f4,e,this.t),ahe(this,f4.s,this.s),this.s?this.t+=f4.t:this.s=f4.t},valueOf:function(){return this.s}};var f4=new u4;function ahe(e,t,r){var a=e.s=t+r,n=a-t,o=a-n;e.t=t-o+(r-n)}var Fn=1e-6,c4=1e-12,Ri=Math.PI,vl=Ri/2,h4=Ri/4,uc=Ri*2,hs=180/Ri,$n=Ri/180,Ji=Math.abs,vw=Math.atan,fc=Math.atan2,En=Math.cos,v4=Math.ceil,nhe=Math.exp,d4=Math.log,JN=Math.pow,mn=Math.sin,Wv=Math.sign||function(e){return e>0?1:e<0?-1:0},Yl=Math.sqrt,QN=Math.tan;function ihe(e){return e>1?0:e<-1?Ri:Math.acos(e)}function cc(e){return e>1?vl:e<-1?-vl:Math.asin(e)}function ohe(e){return(e=mn(e/2))*e}function Zs(){}function p4(e,t){e&&lhe.hasOwnProperty(e.type)&&lhe[e.type](e,t)}var she={Feature:function(e,t){p4(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,n=r.length;++a<n;)p4(r[a].geometry,t)}},lhe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){eB(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)eB(r[a],t,0)},Polygon:function(e,t){uhe(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)uhe(r[a],t)},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,n=r.length;++a<n;)p4(r[a],t)}};function eB(e,t,r){var a=-1,n=e.length-r,o;for(t.lineStart();++a<n;)o=e[a],t.point(o[0],o[1],o[2]);t.lineEnd()}function uhe(e,t){var r=-1,a=e.length;for(t.polygonStart();++r<a;)eB(e[r],t,1);t.polygonEnd()}function gh(e,t){e&&she.hasOwnProperty(e.type)?she[e.type](e,t):p4(e,t)}var g4=Uy(),m4=Uy(),fhe,che,tB,rB,aB,g0={point:Zs,lineStart:Zs,lineEnd:Zs,polygonStart:function(){g4.reset(),g0.lineStart=bnt,g0.lineEnd=_nt},polygonEnd:function(){var e=+g4;m4.add(e<0?uc+e:e),this.lineStart=this.lineEnd=this.point=Zs},sphere:function(){m4.add(uc)}};function bnt(){g0.point=wnt}function _nt(){hhe(fhe,che)}function wnt(e,t){g0.point=hhe,fhe=e,che=t,e*=$n,t*=$n,tB=e,rB=En(t=t/2+h4),aB=mn(t)}function hhe(e,t){e*=$n,t*=$n,t=t/2+h4;var r=e-tB,a=r>=0?1:-1,n=a*r,o=En(t),i=mn(t),s=aB*i,l=rB*o+s*En(n),u=s*a*mn(n);g4.add(fc(u,l)),tB=e,rB=o,aB=i}function Tnt(e){return m4.reset(),gh(e,g0),m4*2}function y4(e){return[fc(e[1],e[0]),cc(e[2])]}function Kx(e){var t=e[0],r=e[1],a=En(r);return[a*En(t),a*mn(t),mn(r)]}function x4(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dw(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b4(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _4(e){var t=Yl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ks,mh,dl,rv,Jx,vhe,dhe,pw,wS=Uy(),Hy,um,fm={point:iB,lineStart:ghe,lineEnd:mhe,polygonStart:function(){fm.point=yhe,fm.lineStart=Ant,fm.lineEnd=Snt,wS.reset(),g0.polygonStart()},polygonEnd:function(){g0.polygonEnd(),fm.point=iB,fm.lineStart=ghe,fm.lineEnd=mhe,g4<0?(Ks=-(dl=180),mh=-(rv=90)):wS>Fn?rv=90:wS<-Fn&&(mh=-90),um[0]=Ks,um[1]=dl},sphere:function(){Ks=-(dl=180),mh=-(rv=90)}};function iB(e,t){Hy.push(um=[Ks=e,dl=e]),t<mh&&(mh=t),t>rv&&(rv=t)}function phe(e,t){var r=Kx([e*$n,t*$n]);if(pw){var a=dw(pw,r),n=[a[1],-a[0],0],o=dw(n,a);_4(o),o=y4(o);var i=e-Jx,s=i>0?1:-1,l=o[0]*hs*s,u,f=Ji(i)>180;f^(s*Jx<l&&l<s*e)?(u=o[1]*hs,u>rv&&(rv=u)):(l=(l+360)%360-180,f^(s*Jx<l&&l<s*e)?(u=-o[1]*hs,u<mh&&(mh=u)):(t<mh&&(mh=t),t>rv&&(rv=t))),f?e<Jx?av(Ks,e)>av(Ks,dl)&&(dl=e):av(e,dl)>av(Ks,dl)&&(Ks=e):dl>=Ks?(e<Ks&&(Ks=e),e>dl&&(dl=e)):e>Jx?av(Ks,e)>av(Ks,dl)&&(dl=e):av(e,dl)>av(Ks,dl)&&(Ks=e)}else Hy.push(um=[Ks=e,dl=e]);t<mh&&(mh=t),t>rv&&(rv=t),pw=r,Jx=e}function ghe(){fm.point=phe}function mhe(){um[0]=Ks,um[1]=dl,fm.point=iB,pw=null}function yhe(e,t){if(pw){var r=e-Jx;wS.add(Ji(r)>180?r+(r>0?360:-360):r)}else vhe=e,dhe=t;g0.point(e,t),phe(e,t)}function Ant(){g0.lineStart()}function Snt(){yhe(vhe,dhe),g0.lineEnd(),Ji(wS)>Fn&&(Ks=-(dl=180)),um[0]=Ks,um[1]=dl,pw=null}function av(e,t){return(t-=e)<0?t+360:t}function Mnt(e,t){return e[0]-t[0]}function xhe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function bhe(e){var t,r,a,n,o,i,s;if(rv=dl=-(Ks=mh=1/0),Hy=[],gh(e,fm),r=Hy.length){for(Hy.sort(Mnt),t=1,a=Hy[0],o=[a];t<r;++t)n=Hy[t],xhe(a,n[0])||xhe(a,n[1])?(av(a[0],n[1])>av(a[0],a[1])&&(a[1]=n[1]),av(n[0],a[1])>av(a[0],a[1])&&(a[0]=n[0])):o.push(a=n);for(i=-1/0,r=o.length-1,t=0,a=o[r];t<=r;a=n,++t)n=o[t],(s=av(a[1],n[0]))>i&&(i=s,Ks=n[0],dl=a[1])}return Hy=um=null,Ks===1/0||mh===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ks,mh],[dl,rv]]}var TS,w4,T4,A4,S4,M4,k4,E4,oB,sB,lB,_he,whe,hc,vc,dc,hp={sphere:Zs,point:uB,lineStart:The,lineEnd:Ahe,polygonStart:function(){hp.lineStart=Cnt,hp.lineEnd=Lnt},polygonEnd:function(){hp.lineStart=The,hp.lineEnd=Ahe}};function uB(e,t){e*=$n,t*=$n;var r=En(t);AS(r*En(e),r*mn(e),mn(t))}function AS(e,t,r){++TS,T4+=(e-T4)/TS,A4+=(t-A4)/TS,S4+=(r-S4)/TS}function The(){hp.point=knt}function knt(e,t){e*=$n,t*=$n;var r=En(t);hc=r*En(e),vc=r*mn(e),dc=mn(t),hp.point=Ent,AS(hc,vc,dc)}function Ent(e,t){e*=$n,t*=$n;var r=En(t),a=r*En(e),n=r*mn(e),o=mn(t),i=fc(Yl((i=vc*o-dc*n)*i+(i=dc*a-hc*o)*i+(i=hc*n-vc*a)*i),hc*a+vc*n+dc*o);w4+=i,M4+=i*(hc+(hc=a)),k4+=i*(vc+(vc=n)),E4+=i*(dc+(dc=o)),AS(hc,vc,dc)}function Ahe(){hp.point=uB}function Cnt(){hp.point=Pnt}function Lnt(){She(_he,whe),hp.point=uB}function Pnt(e,t){_he=e,whe=t,e*=$n,t*=$n,hp.point=She;var r=En(t);hc=r*En(e),vc=r*mn(e),dc=mn(t),AS(hc,vc,dc)}function She(e,t){e*=$n,t*=$n;var r=En(t),a=r*En(e),n=r*mn(e),o=mn(t),i=vc*o-dc*n,s=dc*a-hc*o,l=hc*n-vc*a,u=Yl(i*i+s*s+l*l),f=cc(u),c=u&&-f/u;oB+=c*i,sB+=c*s,lB+=c*l,w4+=f,M4+=f*(hc+(hc=a)),k4+=f*(vc+(vc=n)),E4+=f*(dc+(dc=o)),AS(hc,vc,dc)}function gw(e){TS=w4=T4=A4=S4=M4=k4=E4=oB=sB=lB=0,gh(e,hp);var t=oB,r=sB,a=lB,n=t*t+r*r+a*a;return n<c4&&(t=M4,r=k4,a=E4,w4<Fn&&(t=T4,r=A4,a=S4),n=t*t+r*r+a*a,n<c4)?[NaN,NaN]:[fc(r,t)*hs,cc(a/Yl(n))*hs]}function mw(e){return function(){return e}}function fB(e,t){function r(a,n){return a=e(a,n),t(a[0],a[1])}return e.invert&&t.invert&&(r.invert=function(a,n){return a=t.invert(a,n),a&&e.invert(a[0],a[1])}),r}function cB(e,t){return[Ji(e)>Ri?e+Math.round(-e/uc)*uc:e,t]}cB.invert=cB;function hB(e,t,r){return(e%=uc)?t||r?fB(khe(e),Ehe(t,r)):khe(e):t||r?Ehe(t,r):cB}function Mhe(e){return function(t,r){return t+=e,[t>Ri?t-uc:t<-Ri?t+uc:t,r]}}function khe(e){var t=Mhe(e);return t.invert=Mhe(-e),t}function Ehe(e,t){var r=En(e),a=mn(e),n=En(t),o=mn(t);function i(s,l){var u=En(l),f=En(s)*u,c=mn(s)*u,h=mn(l),v=h*r+f*a;return[fc(c*n-v*o,f*r-h*a),cc(v*n+c*o)]}return i.invert=function(s,l){var u=En(l),f=En(s)*u,c=mn(s)*u,h=mn(l),v=h*n-c*o;return[fc(c*n+h*o,f*r+v*a),cc(v*r-f*a)]},i}function yw(e){e=hB(e[0]*$n,e[1]*$n,e.length>2?e[2]*$n:0);function t(r){return r=e(r[0]*$n,r[1]*$n),r[0]*=hs,r[1]*=hs,r}return t.invert=function(r){return r=e.invert(r[0]*$n,r[1]*$n),r[0]*=hs,r[1]*=hs,r},t}function Che(e,t,r,a,n,o){if(!!r){var i=En(t),s=mn(t),l=a*r;n==null?(n=t+a*uc,o=t-l/2):(n=Lhe(i,n),o=Lhe(i,o),(a>0?n<o:n>o)&&(n+=a*uc));for(var u,f=n;a>0?f>o:f<o;f-=l)u=y4([i,-s*En(f),-s*mn(f)]),e.point(u[0],u[1])}}function Lhe(e,t){t=Kx(t),t[0]-=e,_4(t);var r=ihe(-t[1]);return((-t[2]<0?-r:r)+uc-Fn)%uc}function Phe(){var e=mw([0,0]),t=mw(90),r=mw(6),a,n,o={point:i};function i(l,u){a.push(l=n(l,u)),l[0]*=hs,l[1]*=hs}function s(){var l=e.apply(this,arguments),u=t.apply(this,arguments)*$n,f=r.apply(this,arguments)*$n;return a=[],n=hB(-l[0]*$n,-l[1]*$n,0).invert,Che(o,u,f,1),l={type:"Polygon",coordinates:[a]},a=n=null,l}return s.center=function(l){return arguments.length?(e=typeof l=="function"?l:mw([+l[0],+l[1]]),s):e},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:mw(+l),s):t},s.precision=function(l){return arguments.length?(r=typeof l=="function"?l:mw(+l),s):r},s}function Ihe(){var e=[],t;return{point:function(r,a,n){t.push([r,a,n])},lineStart:function(){e.push(t=[])},lineEnd:Zs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function C4(e,t){return Ji(e[0]-t[0])<Fn&&Ji(e[1]-t[1])<Fn}function L4(e,t,r,a){this.x=e,this.z=t,this.o=r,this.e=a,this.v=!1,this.n=this.p=null}function Dhe(e,t,r,a,n){var o=[],i=[],s,l;if(e.forEach(function(p){if(!((d=p.length-1)<=0)){var d,g=p[0],m=p[d],y;if(C4(g,m)){if(!g[2]&&!m[2]){for(n.lineStart(),s=0;s<d;++s)n.point((g=p[s])[0],g[1]);n.lineEnd();return}m[0]+=2*Fn}o.push(y=new L4(g,p,null,!0)),i.push(y.o=new L4(g,null,y,!1)),o.push(y=new L4(m,p,null,!1)),i.push(y.o=new L4(m,null,y,!0))}}),!!o.length){for(i.sort(t),Rhe(o),Rhe(i),s=0,l=i.length;s<l;++s)i[s].e=r=!r;for(var u=o[0],f,c;;){for(var h=u,v=!0;h.v;)if((h=h.n)===u)return;f=h.z,n.lineStart();do{if(h.v=h.o.v=!0,h.e){if(v)for(s=0,l=f.length;s<l;++s)n.point((c=f[s])[0],c[1]);else a(h.x,h.n.x,1,n);h=h.n}else{if(v)for(f=h.p.z,s=f.length-1;s>=0;--s)n.point((c=f[s])[0],c[1]);else a(h.x,h.p.x,-1,n);h=h.p}h=h.o,f=h.z,v=!v}while(!h.v);n.lineEnd()}}}function Rhe(e){if(!!(t=e.length)){for(var t,r=0,a=e[0],n;++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}var vB=Uy();function dB(e){return Ji(e[0])<=Ri?e[0]:Wv(e[0])*((Ji(e[0])+Ri)%uc-Ri)}function zhe(e,t){var r=dB(t),a=t[1],n=mn(a),o=[mn(r),-En(r),0],i=0,s=0;vB.reset(),n===1?a=vl+Fn:n===-1&&(a=-vl-Fn);for(var l=0,u=e.length;l<u;++l)if(!!(c=(f=e[l]).length))for(var f,c,h=f[c-1],v=dB(h),p=h[1]/2+h4,d=mn(p),g=En(p),m=0;m<c;++m,v=_,d=M,g=w,h=y){var y=f[m],_=dB(y),S=y[1]/2+h4,M=mn(S),w=En(S),A=_-v,k=A>=0?1:-1,T=k*A,L=T>Ri,C=d*M;if(vB.add(fc(C*k*mn(T),g*w+C*En(T))),i+=L?A+k*uc:A,L^v>=r^_>=r){var I=dw(Kx(h),Kx(y));_4(I);var R=dw(o,I);_4(R);var B=(L^A>=0?-1:1)*cc(R[2]);(a>B||a===B&&(I[0]||I[1]))&&(s+=L^A>=0?1:-1)}}return(i<-Fn||i<Fn&&vB<-Fn)^s&1}function P4(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Int(e){return e.length===1&&(e=Dnt(e)),{left:function(t,r,a,n){for(a==null&&(a=0),n==null&&(n=t.length);a<n;){var o=a+n>>>1;e(t[o],r)<0?a=o+1:n=o}return a},right:function(t,r,a,n){for(a==null&&(a=0),n==null&&(n=t.length);a<n;){var o=a+n>>>1;e(t[o],r)>0?n=o:a=o+1}return a}}}function Dnt(e){return function(t,r){return P4(e(t),r)}}Int(P4);function Fhe(e){return e===null?NaN:+e}function Gy(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(n);++a<n;)o[a]=e+a*r;return o}function I4(e,t){var r=e.length,a=-1,n,o;if(t==null){for(;++a<r;)if((n=e[a])!=null&&n>=n)for(o=n;++a<r;)(n=e[a])!=null&&n>o&&(o=n)}else for(;++a<r;)if((n=t(e[a],a,e))!=null&&n>=n)for(o=n;++a<r;)(n=t(e[a],a,e))!=null&&n>o&&(o=n);return o}function Ohe(e,t){var r=e.length,a=r,n=-1,o,i=0;if(t==null)for(;++n<r;)isNaN(o=Fhe(e[n]))?--a:i+=o;else for(;++n<r;)isNaN(o=Fhe(t(e[n],n,e)))?--a:i+=o;if(a)return i/a}function pB(e){for(var t=e.length,r,a=-1,n=0,o,i;++a<t;)n+=e[a].length;for(o=new Array(n);--t>=0;)for(i=e[t],r=i.length;--r>=0;)o[--n]=i[r];return o}function xw(e,t){var r=e.length,a=-1,n,o;if(t==null){for(;++a<r;)if((n=e[a])!=null&&n>=n)for(o=n;++a<r;)(n=e[a])!=null&&o>n&&(o=n)}else for(;++a<r;)if((n=t(e[a],a,e))!=null&&n>=n)for(o=n;++a<r;)(n=t(e[a],a,e))!=null&&o>n&&(o=n);return o}function m0(e,t){var r=e.length,a=-1,n,o=0;if(t==null)for(;++a<r;)(n=+e[a])&&(o+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(o+=n);return o}function Nhe(e,t,r,a){return function(n){var o=t(n),i=Ihe(),s=t(i),l=!1,u,f,c,h={point:v,lineStart:d,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=_,f=[],u=[]},polygonEnd:function(){h.point=v,h.lineStart=d,h.lineEnd=g,f=pB(f);var S=zhe(u,a);f.length?(l||(n.polygonStart(),l=!0),Dhe(f,znt,S,r,n)):S&&(l||(n.polygonStart(),l=!0),n.lineStart(),r(null,null,1,n),n.lineEnd()),l&&(n.polygonEnd(),l=!1),f=u=null},sphere:function(){n.polygonStart(),n.lineStart(),r(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function v(S,M){e(S,M)&&n.point(S,M)}function p(S,M){o.point(S,M)}function d(){h.point=p,o.lineStart()}function g(){h.point=v,o.lineEnd()}function m(S,M){c.push([S,M]),s.point(S,M)}function y(){s.lineStart(),c=[]}function _(){m(c[0][0],c[0][1]),s.lineEnd();var S=s.clean(),M=i.result(),w,A=M.length,k,T,L;if(c.pop(),u.push(c),c=null,!!A){if(S&1){if(T=M[0],(k=T.length-1)>0){for(l||(n.polygonStart(),l=!0),n.lineStart(),w=0;w<k;++w)n.point((L=T[w])[0],L[1]);n.lineEnd()}return}A>1&&S&2&&M.push(M.pop().concat(M.shift())),f.push(M.filter(Rnt))}}return h}}function Rnt(e){return e.length>1}function znt(e,t){return((e=e.x)[0]<0?e[1]-vl-Fn:vl-e[1])-((t=t.x)[0]<0?t[1]-vl-Fn:vl-t[1])}var gB=Nhe(function(){return!0},Fnt,Nnt,[-Ri,-vl]);function Fnt(e){var t=NaN,r=NaN,a=NaN,n;return{lineStart:function(){e.lineStart(),n=1},point:function(o,i){var s=o>0?Ri:-Ri,l=Ji(o-t);Ji(l-Ri)<Fn?(e.point(t,r=(r+i)/2>0?vl:-vl),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),n=0):a!==s&&l>=Ri&&(Ji(t-a)<Fn&&(t-=a*Fn),Ji(o-s)<Fn&&(o-=s*Fn),r=Ont(t,r,o,i),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),n=0),e.point(t=o,r=i),a=s},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-n}}}function Ont(e,t,r,a){var n,o,i=mn(e-r);return Ji(i)>Fn?vw((mn(t)*(o=En(a))*mn(r)-mn(a)*(n=En(t))*mn(e))/(n*o*i)):(t+a)/2}function Nnt(e,t,r,a){var n;if(e==null)n=r*vl,a.point(-Ri,n),a.point(0,n),a.point(Ri,n),a.point(Ri,0),a.point(Ri,-n),a.point(0,-n),a.point(-Ri,-n),a.point(-Ri,0),a.point(-Ri,n);else if(Ji(e[0]-t[0])>Fn){var o=e[0]<t[0]?Ri:-Ri;n=r*o/2,a.point(-o,n),a.point(0,n),a.point(o,n)}else a.point(t[0],t[1])}function Bhe(e){var t=En(e),r=6*$n,a=t>0,n=Ji(t)>Fn;function o(f,c,h,v){Che(v,e,r,h,f,c)}function i(f,c){return En(f)*En(c)>t}function s(f){var c,h,v,p,d;return{lineStart:function(){p=v=!1,d=1},point:function(g,m){var y=[g,m],_,S=i(g,m),M=a?S?0:u(g,m):S?u(g+(g<0?Ri:-Ri),m):0;if(!c&&(p=v=S)&&f.lineStart(),S!==v&&(_=l(c,y),(!_||C4(c,_)||C4(y,_))&&(y[2]=1)),S!==v)d=0,S?(f.lineStart(),_=l(y,c),f.point(_[0],_[1])):(_=l(c,y),f.point(_[0],_[1],2),f.lineEnd()),c=_;else if(n&&c&&a^S){var w;!(M&h)&&(w=l(y,c,!0))&&(d=0,a?(f.lineStart(),f.point(w[0][0],w[0][1]),f.point(w[1][0],w[1][1]),f.lineEnd()):(f.point(w[1][0],w[1][1]),f.lineEnd(),f.lineStart(),f.point(w[0][0],w[0][1],3)))}S&&(!c||!C4(c,y))&&f.point(y[0],y[1]),c=y,v=S,h=M},lineEnd:function(){v&&f.lineEnd(),c=null},clean:function(){return d|(p&&v)<<1}}}function l(f,c,h){var v=Kx(f),p=Kx(c),d=[1,0,0],g=dw(v,p),m=x4(g,g),y=g[0],_=m-y*y;if(!_)return!h&&f;var S=t*m/_,M=-t*y/_,w=dw(d,g),A=b4(d,S),k=b4(g,M);nB(A,k);var T=w,L=x4(A,T),C=x4(T,T),I=L*L-C*(x4(A,A)-1);if(!(I<0)){var R=Yl(I),B=b4(T,(-L-R)/C);if(nB(B,A),B=y4(B),!h)return B;var N=f[0],D=c[0],O=f[1],$=c[1],Y;D<N&&(Y=N,N=D,D=Y);var X=D-N,ee=Ji(X-Ri)<Fn,Q=ee||X<Fn;if(!ee&&$<O&&(Y=O,O=$,$=Y),Q?ee?O+$>0^B[1]<(Ji(B[0]-N)<Fn?O:$):O<=B[1]&&B[1]<=$:X>Ri^(N<=B[0]&&B[0]<=D)){var Z=b4(T,(-L+R)/C);return nB(Z,A),[B,y4(Z)]}}}function u(f,c){var h=a?e:Ri-e,v=0;return f<-h?v|=1:f>h&&(v|=2),c<-h?v|=4:c>h&&(v|=8),v}return Nhe(i,s,o,a?[0,-e]:[-Ri,e-Ri])}function Bnt(e,t,r,a,n,o){var i=e[0],s=e[1],l=t[0],u=t[1],f=0,c=1,h=l-i,v=u-s,p;if(p=r-i,!(!h&&p>0)){if(p/=h,h<0){if(p<f)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>f&&(f=p)}if(p=n-i,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>f&&(f=p)}else if(h>0){if(p<f)return;p<c&&(c=p)}if(p=a-s,!(!v&&p>0)){if(p/=v,v<0){if(p<f)return;p<c&&(c=p)}else if(v>0){if(p>c)return;p>f&&(f=p)}if(p=o-s,!(!v&&p<0)){if(p/=v,v<0){if(p>c)return;p>f&&(f=p)}else if(v>0){if(p<f)return;p<c&&(c=p)}return f>0&&(e[0]=i+f*h,e[1]=s+f*v),c<1&&(t[0]=i+c*h,t[1]=s+c*v),!0}}}}}var SS=1e9,D4=-SS;function R4(e,t,r,a){function n(u,f){return e<=u&&u<=r&&t<=f&&f<=a}function o(u,f,c,h){var v=0,p=0;if(u==null||(v=i(u,c))!==(p=i(f,c))||l(u,f)<0^c>0)do h.point(v===0||v===3?e:r,v>1?a:t);while((v=(v+c+4)%4)!==p);else h.point(f[0],f[1])}function i(u,f){return Ji(u[0]-e)<Fn?f>0?0:3:Ji(u[0]-r)<Fn?f>0?2:1:Ji(u[1]-t)<Fn?f>0?1:0:f>0?3:2}function s(u,f){return l(u.x,f.x)}function l(u,f){var c=i(u,1),h=i(f,1);return c!==h?c-h:c===0?f[1]-u[1]:c===1?u[0]-f[0]:c===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,c=Ihe(),h,v,p,d,g,m,y,_,S,M,w,A={point:k,lineStart:I,lineEnd:R,polygonStart:L,polygonEnd:C};function k(N,D){n(N,D)&&f.point(N,D)}function T(){for(var N=0,D=0,O=v.length;D<O;++D)for(var $=v[D],Y=1,X=$.length,ee=$[0],Q,Z,q=ee[0],ae=ee[1];Y<X;++Y)Q=q,Z=ae,ee=$[Y],q=ee[0],ae=ee[1],Z<=a?ae>a&&(q-Q)*(a-Z)>(ae-Z)*(e-Q)&&++N:ae<=a&&(q-Q)*(a-Z)<(ae-Z)*(e-Q)&&--N;return N}function L(){f=c,h=[],v=[],w=!0}function C(){var N=T(),D=w&&N,O=(h=pB(h)).length;(D||O)&&(u.polygonStart(),D&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),O&&Dhe(h,s,N,o,u),u.polygonEnd()),f=u,h=v=p=null}function I(){A.point=B,v&&v.push(p=[]),M=!0,S=!1,y=_=NaN}function R(){h&&(B(d,g),m&&S&&c.rejoin(),h.push(c.result())),A.point=k,S&&f.lineEnd()}function B(N,D){var O=n(N,D);if(v&&p.push([N,D]),M)d=N,g=D,m=O,M=!1,O&&(f.lineStart(),f.point(N,D));else if(O&&S)f.point(N,D);else{var $=[y=Math.max(D4,Math.min(SS,y)),_=Math.max(D4,Math.min(SS,_))],Y=[N=Math.max(D4,Math.min(SS,N)),D=Math.max(D4,Math.min(SS,D))];Bnt($,Y,e,t,r,a)?(S||(f.lineStart(),f.point($[0],$[1])),f.point(Y[0],Y[1]),O||f.lineEnd(),w=!1):O&&(f.lineStart(),f.point(N,D),w=!1)}y=N,_=D,S=O}return A}}function $nt(){var e=0,t=0,r=960,a=500,n,o,i;return i={stream:function(s){return n&&o===s?n:n=R4(e,t,r,a)(o=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],r=+s[1][0],a=+s[1][1],n=o=null,i):[[e,t],[r,a]]}}}var mB=Uy(),yB,z4,F4,bw={sphere:Zs,point:Zs,lineStart:Unt,lineEnd:Zs,polygonStart:Zs,polygonEnd:Zs};function Unt(){bw.point=Gnt,bw.lineEnd=Hnt}function Hnt(){bw.point=bw.lineEnd=Zs}function Gnt(e,t){e*=$n,t*=$n,yB=e,z4=mn(t),F4=En(t),bw.point=Vnt}function Vnt(e,t){e*=$n,t*=$n;var r=mn(t),a=En(t),n=Ji(e-yB),o=En(n),i=mn(n),s=a*i,l=F4*r-z4*a*o,u=z4*r+F4*a*o;mB.add(fc(Yl(s*s+l*l),u)),yB=e,z4=r,F4=a}function $he(e){return mB.reset(),gh(e,bw),+mB}var xB=[null,null],jnt={type:"LineString",coordinates:xB};function O4(e,t){return xB[0]=e,xB[1]=t,$he(jnt)}var Uhe={Feature:function(e,t){return N4(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,n=r.length;++a<n;)if(N4(r[a].geometry,t))return!0;return!1}},Hhe={Sphere:function(){return!0},Point:function(e,t){return Ghe(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)if(Ghe(r[a],t))return!0;return!1},LineString:function(e,t){return Vhe(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)if(Vhe(r[a],t))return!0;return!1},Polygon:function(e,t){return jhe(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,n=r.length;++a<n;)if(jhe(r[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,n=r.length;++a<n;)if(N4(r[a],t))return!0;return!1}};function N4(e,t){return e&&Hhe.hasOwnProperty(e.type)?Hhe[e.type](e,t):!1}function Ghe(e,t){return O4(e,t)===0}function Vhe(e,t){for(var r,a,n,o=0,i=e.length;o<i;o++){if(a=O4(e[o],t),a===0||o>0&&(n=O4(e[o],e[o-1]),n>0&&r<=n&&a<=n&&(r+a-n)*(1-Math.pow((r-a)/n,2))<c4*n))return!0;r=a}return!1}function jhe(e,t){return!!zhe(e.map(qnt),qhe(t))}function qnt(e){return e=e.map(qhe),e.pop(),e}function qhe(e){return[e[0]*$n,e[1]*$n]}function Ynt(e,t){return(e&&Uhe.hasOwnProperty(e.type)?Uhe[e.type]:N4)(e,t)}function Yhe(e,t,r){var a=Gy(e,t-Fn,r).concat(t);return function(n){return a.map(function(o){return[n,o]})}}function Whe(e,t,r){var a=Gy(e,t-Fn,r).concat(t);return function(n){return a.map(function(o){return[o,n]})}}function Xhe(){var e,t,r,a,n,o,i,s,l=10,u=l,f=90,c=360,h,v,p,d,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return Gy(v4(a/f)*f,r,f).map(p).concat(Gy(v4(s/c)*c,i,c).map(d)).concat(Gy(v4(t/l)*l,e,l).filter(function(_){return Ji(_%f)>Fn}).map(h)).concat(Gy(v4(o/u)*u,n,u).filter(function(_){return Ji(_%c)>Fn}).map(v))}return m.lines=function(){return y().map(function(_){return{type:"LineString",coordinates:_}})},m.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(d(i).slice(1),p(r).reverse().slice(1),d(s).reverse().slice(1))]}},m.extent=function(_){return arguments.length?m.extentMajor(_).extentMinor(_):m.extentMinor()},m.extentMajor=function(_){return arguments.length?(a=+_[0][0],r=+_[1][0],s=+_[0][1],i=+_[1][1],a>r&&(_=a,a=r,r=_),s>i&&(_=s,s=i,i=_),m.precision(g)):[[a,s],[r,i]]},m.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],o=+_[0][1],n=+_[1][1],t>e&&(_=t,t=e,e=_),o>n&&(_=o,o=n,n=_),m.precision(g)):[[t,o],[e,n]]},m.step=function(_){return arguments.length?m.stepMajor(_).stepMinor(_):m.stepMinor()},m.stepMajor=function(_){return arguments.length?(f=+_[0],c=+_[1],m):[f,c]},m.stepMinor=function(_){return arguments.length?(l=+_[0],u=+_[1],m):[l,u]},m.precision=function(_){return arguments.length?(g=+_,h=Yhe(o,n,90),v=Whe(t,e,g),p=Yhe(s,i,90),d=Whe(a,r,g),m):g},m.extentMajor([[-180,-90+Fn],[180,90-Fn]]).extentMinor([[-180,-80-Fn],[180,80+Fn]])}function Wnt(){return Xhe()()}function B4(e,t){var r=e[0]*$n,a=e[1]*$n,n=t[0]*$n,o=t[1]*$n,i=En(a),s=mn(a),l=En(o),u=mn(o),f=i*En(r),c=i*mn(r),h=l*En(n),v=l*mn(n),p=2*cc(Yl(ohe(o-a)+i*l*ohe(n-r))),d=mn(p),g=p?function(m){var y=mn(m*=p)/d,_=mn(p-m)/d,S=_*f+y*h,M=_*c+y*v,w=_*s+y*u;return[fc(M,S)*hs,fc(w,Yl(S*S+M*M))*hs]}:function(){return[r*hs,a*hs]};return g.distance=p,g}function MS(e){return e}var bB=Uy(),_B=Uy(),Zhe,Khe,wB,TB,Vy={point:Zs,lineStart:Zs,lineEnd:Zs,polygonStart:function(){Vy.lineStart=Xnt,Vy.lineEnd=Knt},polygonEnd:function(){Vy.lineStart=Vy.lineEnd=Vy.point=Zs,bB.add(Ji(_B)),_B.reset()},result:function(){var e=bB/2;return bB.reset(),e}};function Xnt(){Vy.point=Znt}function Znt(e,t){Vy.point=Jhe,Zhe=wB=e,Khe=TB=t}function Jhe(e,t){_B.add(TB*e-wB*t),wB=e,TB=t}function Knt(){Jhe(Zhe,Khe)}var Qhe=Vy,_w=1/0,$4=_w,kS=-_w,U4=kS,Jnt={point:Qnt,lineStart:Zs,lineEnd:Zs,polygonStart:Zs,polygonEnd:Zs,result:function(){var e=[[_w,$4],[kS,U4]];return kS=U4=-($4=_w=1/0),e}};function Qnt(e,t){e<_w&&(_w=e),e>kS&&(kS=e),t<$4&&($4=t),t>U4&&(U4=t)}var H4=Jnt,AB=0,SB=0,ES=0,G4=0,V4=0,ww=0,MB=0,kB=0,CS=0,eve,tve,y0,x0,vp={point:Qx,lineStart:rve,lineEnd:ave,polygonStart:function(){vp.lineStart=rit,vp.lineEnd=ait},polygonEnd:function(){vp.point=Qx,vp.lineStart=rve,vp.lineEnd=ave},result:function(){var e=CS?[MB/CS,kB/CS]:ww?[G4/ww,V4/ww]:ES?[AB/ES,SB/ES]:[NaN,NaN];return AB=SB=ES=G4=V4=ww=MB=kB=CS=0,e}};function Qx(e,t){AB+=e,SB+=t,++ES}function rve(){vp.point=eit}function eit(e,t){vp.point=tit,Qx(y0=e,x0=t)}function tit(e,t){var r=e-y0,a=t-x0,n=Yl(r*r+a*a);G4+=n*(y0+e)/2,V4+=n*(x0+t)/2,ww+=n,Qx(y0=e,x0=t)}function ave(){vp.point=Qx}function rit(){vp.point=nit}function ait(){nve(eve,tve)}function nit(e,t){vp.point=nve,Qx(eve=y0=e,tve=x0=t)}function nve(e,t){var r=e-y0,a=t-x0,n=Yl(r*r+a*a);G4+=n*(y0+e)/2,V4+=n*(x0+t)/2,ww+=n,n=x0*e-y0*t,MB+=n*(y0+e),kB+=n*(x0+t),CS+=n*3,Qx(y0=e,x0=t)}var ive=vp;function ove(e){this._context=e}ove.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,uc);break}}},result:Zs};var EB=Uy(),CB,sve,lve,LS,PS,j4={point:Zs,lineStart:function(){j4.point=iit},lineEnd:function(){CB&&uve(sve,lve),j4.point=Zs},polygonStart:function(){CB=!0},polygonEnd:function(){CB=null},result:function(){var e=+EB;return EB.reset(),e}};function iit(e,t){j4.point=uve,sve=LS=e,lve=PS=t}function uve(e,t){LS-=e,PS-=t,EB.add(Yl(LS*LS+PS*PS)),LS=e,PS=t}var fve=j4;function cve(){this._string=[]}cve.prototype={_radius:4.5,_circle:hve(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=hve(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function hve(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function oit(e,t){var r=4.5,a,n;function o(i){return i&&(typeof r=="function"&&n.pointRadius(+r.apply(this,arguments)),gh(i,a(n))),n.result()}return o.area=function(i){return gh(i,a(Qhe)),Qhe.result()},o.measure=function(i){return gh(i,a(fve)),fve.result()},o.bounds=function(i){return gh(i,a(H4)),H4.result()},o.centroid=function(i){return gh(i,a(ive)),ive.result()},o.projection=function(i){return arguments.length?(a=i==null?(e=null,MS):(e=i).stream,o):e},o.context=function(i){return arguments.length?(n=i==null?(t=null,new cve):new ove(t=i),typeof r!="function"&&n.pointRadius(r),o):t},o.pointRadius=function(i){return arguments.length?(r=typeof i=="function"?i:(n.pointRadius(+i),+i),o):r},o.projection(e).context(t)}function sit(e){return{stream:IS(e)}}function IS(e){return function(t){var r=new LB;for(var a in e)r[a]=e[a];return r.stream=t,r}}function LB(){}LB.prototype={constructor:LB,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PB(e,t,r){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),gh(r,e.stream(H4)),t(H4.result()),a!=null&&e.clipExtent(a),e}function q4(e,t,r){return PB(e,function(a){var n=t[1][0]-t[0][0],o=t[1][1]-t[0][1],i=Math.min(n/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),s=+t[0][0]+(n-i*(a[1][0]+a[0][0]))/2,l=+t[0][1]+(o-i*(a[1][1]+a[0][1]))/2;e.scale(150*i).translate([s,l])},r)}function IB(e,t,r){return q4(e,[[0,0],t],r)}function DB(e,t,r){return PB(e,function(a){var n=+t,o=n/(a[1][0]-a[0][0]),i=(n-o*(a[1][0]+a[0][0]))/2,s=-o*a[0][1];e.scale(150*o).translate([i,s])},r)}function RB(e,t,r){return PB(e,function(a){var n=+t,o=n/(a[1][1]-a[0][1]),i=-o*a[0][0],s=(n-o*(a[1][1]+a[0][1]))/2;e.scale(150*o).translate([i,s])},r)}var vve=16,lit=En(30*$n);function dve(e,t){return+t?fit(e,t):uit(e)}function uit(e){return IS({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function fit(e,t){function r(a,n,o,i,s,l,u,f,c,h,v,p,d,g){var m=u-a,y=f-n,_=m*m+y*y;if(_>4*t&&d--){var S=i+h,M=s+v,w=l+p,A=Yl(S*S+M*M+w*w),k=cc(w/=A),T=Ji(Ji(w)-1)<Fn||Ji(o-c)<Fn?(o+c)/2:fc(M,S),L=e(T,k),C=L[0],I=L[1],R=C-a,B=I-n,N=y*R-m*B;(N*N/_>t||Ji((m*R+y*B)/_-.5)>.3||i*h+s*v+l*p<lit)&&(r(a,n,o,i,s,l,C,I,T,S/=A,M/=A,w,d,g),g.point(C,I),r(C,I,T,S,M,w,u,f,c,h,v,p,d,g))}}return function(a){var n,o,i,s,l,u,f,c,h,v,p,d,g={point:m,lineStart:y,lineEnd:S,polygonStart:function(){a.polygonStart(),g.lineStart=M},polygonEnd:function(){a.polygonEnd(),g.lineStart=y}};function m(k,T){k=e(k,T),a.point(k[0],k[1])}function y(){c=NaN,g.point=_,a.lineStart()}function _(k,T){var L=Kx([k,T]),C=e(k,T);r(c,h,f,v,p,d,c=C[0],h=C[1],f=k,v=L[0],p=L[1],d=L[2],vve,a),a.point(c,h)}function S(){g.point=m,a.lineEnd()}function M(){y(),g.point=w,g.lineEnd=A}function w(k,T){_(n=k,T),o=c,i=h,s=v,l=p,u=d,g.point=_}function A(){r(c,h,f,v,p,d,o,i,n,s,l,u,vve,a),g.lineEnd=S,S()}return g}}var cit=IS({point:function(e,t){this.stream.point(e*$n,t*$n)}});function hit(e){return IS({point:function(t,r){var a=e(t,r);return this.stream.point(a[0],a[1])}})}function vit(e,t,r,a,n){function o(i,s){return i*=a,s*=n,[t+e*i,r-e*s]}return o.invert=function(i,s){return[(i-t)/e*a,(r-s)/e*n]},o}function pve(e,t,r,a,n,o){var i=En(o),s=mn(o),l=i*e,u=s*e,f=i/e,c=s/e,h=(s*r-i*t)/e,v=(s*t+i*r)/e;function p(d,g){return d*=a,g*=n,[l*d-u*g+t,r-u*d-l*g]}return p.invert=function(d,g){return[a*(f*d-c*g+h),n*(v-c*d-f*g)]},p}function hn(e){return cu(function(){return e})()}function cu(e){var t,r=150,a=480,n=250,o=0,i=0,s=0,l=0,u=0,f,c=0,h=1,v=1,p=null,d=gB,g=null,m,y,_,S=MS,M=.5,w,A,k,T,L;function C(N){return k(N[0]*$n,N[1]*$n)}function I(N){return N=k.invert(N[0],N[1]),N&&[N[0]*hs,N[1]*hs]}C.stream=function(N){return T&&L===N?T:T=cit(hit(f)(d(w(S(L=N)))))},C.preclip=function(N){return arguments.length?(d=N,p=void 0,B()):d},C.postclip=function(N){return arguments.length?(S=N,g=m=y=_=null,B()):S},C.clipAngle=function(N){return arguments.length?(d=+N?Bhe(p=N*$n):(p=null,gB),B()):p*hs},C.clipExtent=function(N){return arguments.length?(S=N==null?(g=m=y=_=null,MS):R4(g=+N[0][0],m=+N[0][1],y=+N[1][0],_=+N[1][1]),B()):g==null?null:[[g,m],[y,_]]},C.scale=function(N){return arguments.length?(r=+N,R()):r},C.translate=function(N){return arguments.length?(a=+N[0],n=+N[1],R()):[a,n]},C.center=function(N){return arguments.length?(o=N[0]%360*$n,i=N[1]%360*$n,R()):[o*hs,i*hs]},C.rotate=function(N){return arguments.length?(s=N[0]%360*$n,l=N[1]%360*$n,u=N.length>2?N[2]%360*$n:0,R()):[s*hs,l*hs,u*hs]},C.angle=function(N){return arguments.length?(c=N%360*$n,R()):c*hs},C.reflectX=function(N){return arguments.length?(h=N?-1:1,R()):h<0},C.reflectY=function(N){return arguments.length?(v=N?-1:1,R()):v<0},C.precision=function(N){return arguments.length?(w=dve(A,M=N*N),B()):Yl(M)},C.fitExtent=function(N,D){return q4(C,N,D)},C.fitSize=function(N,D){return IB(C,N,D)},C.fitWidth=function(N,D){return DB(C,N,D)},C.fitHeight=function(N,D){return RB(C,N,D)};function R(){var N=pve(r,0,0,h,v,c).apply(null,t(o,i)),D=(c?pve:vit)(r,a-N[0],n-N[1],h,v,c);return f=hB(s,l,u),A=fB(t,D),k=fB(f,A),w=dve(A,M),B()}function B(){return T=L=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&I,R()}}function zB(e){var t=0,r=Ri/3,a=cu(e),n=a(t,r);return n.parallels=function(o){return arguments.length?a(t=o[0]*$n,r=o[1]*$n):[t*hs,r*hs]},n}function dit(e){var t=En(e);function r(a,n){return[a*t,mn(n)/t]}return r.invert=function(a,n){return[a/t,cc(n*t)]},r}function gve(e,t){var r=mn(e),a=(r+mn(t))/2;if(Ji(a)<Fn)return dit(e);var n=1+r*(2*a-r),o=Yl(n)/a;function i(s,l){var u=Yl(n-2*a*mn(l))/a;return[u*mn(s*=a),o-u*En(s)]}return i.invert=function(s,l){var u=o-l,f=fc(s,Ji(u))*Wv(u);return u*a<0&&(f-=Ri*Wv(s)*Wv(u)),[f/a,cc((n-(s*s+u*u)*a*a)/(2*a))]},i}function Y4(){return zB(gve).scale(155.424).center([0,33.6442])}function mve(){return Y4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pit(e){var t=e.length;return{point:function(r,a){for(var n=-1;++n<t;)e[n].point(r,a)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function git(){var e,t,r=mve(),a,n=Y4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,i=Y4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(h,v){l=[h,v]}};function f(h){var v=h[0],p=h[1];return l=null,a.point(v,p),l||(o.point(v,p),l)||(s.point(v,p),l)}f.invert=function(h){var v=r.scale(),p=r.translate(),d=(h[0]-p[0])/v,g=(h[1]-p[1])/v;return(g>=.12&&g<.234&&d>=-.425&&d<-.214?n:g>=.166&&g<.234&&d>=-.214&&d<-.115?i:r).invert(h)},f.stream=function(h){return e&&t===h?e:e=pit([r.stream(t=h),n.stream(h),i.stream(h)])},f.precision=function(h){return arguments.length?(r.precision(h),n.precision(h),i.precision(h),c()):r.precision()},f.scale=function(h){return arguments.length?(r.scale(h),n.scale(h*.35),i.scale(h),f.translate(r.translate())):r.scale()},f.translate=function(h){if(!arguments.length)return r.translate();var v=r.scale(),p=+h[0],d=+h[1];return a=r.translate(h).clipExtent([[p-.455*v,d-.238*v],[p+.455*v,d+.238*v]]).stream(u),o=n.translate([p-.307*v,d+.201*v]).clipExtent([[p-.425*v+Fn,d+.12*v+Fn],[p-.214*v-Fn,d+.234*v-Fn]]).stream(u),s=i.translate([p-.205*v,d+.212*v]).clipExtent([[p-.214*v+Fn,d+.166*v+Fn],[p-.115*v-Fn,d+.234*v-Fn]]).stream(u),c()},f.fitExtent=function(h,v){return q4(f,h,v)},f.fitSize=function(h,v){return IB(f,h,v)},f.fitWidth=function(h,v){return DB(f,h,v)},f.fitHeight=function(h,v){return RB(f,h,v)};function c(){return e=t=null,f}return f.scale(1070)}function yve(e){return function(t,r){var a=En(t),n=En(r),o=e(a*n);return[o*n*mn(t),o*mn(r)]}}function DS(e){return function(t,r){var a=Yl(t*t+r*r),n=e(a),o=mn(n),i=En(n);return[fc(t*o,a*i),cc(a&&r*o/a)]}}var Tw=yve(function(e){return Yl(2/(1+e))});Tw.invert=DS(function(e){return 2*cc(e/2)});function mit(){return hn(Tw).scale(124.75).clipAngle(180-.001)}var jy=yve(function(e){return(e=ihe(e))&&e/mn(e)});jy.invert=DS(function(e){return e});function yit(){return hn(jy).scale(79.4188).clipAngle(180-.001)}function RS(e,t){return[e,d4(QN((vl+t)/2))]}RS.invert=function(e,t){return[e,2*vw(nhe(t))-vl]};function xit(){return xve(RS).scale(961/uc)}function xve(e){var t=hn(e),r=t.center,a=t.scale,n=t.translate,o=t.clipExtent,i=null,s,l,u;t.scale=function(c){return arguments.length?(a(c),f()):a()},t.translate=function(c){return arguments.length?(n(c),f()):n()},t.center=function(c){return arguments.length?(r(c),f()):r()},t.clipExtent=function(c){return arguments.length?(c==null?i=s=l=u=null:(i=+c[0][0],s=+c[0][1],l=+c[1][0],u=+c[1][1]),f()):i==null?null:[[i,s],[l,u]]};function f(){var c=Ri*a(),h=t(yw(t.rotate()).invert([0,0]));return o(i==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:e===RS?[[Math.max(h[0]-c,i),s],[Math.min(h[0]+c,l),u]]:[[i,Math.max(h[1]-c,s)],[l,Math.min(h[1]+c,u)]])}return f()}function W4(e){return QN((vl+e)/2)}function bve(e,t){var r=En(e),a=e===t?mn(e):d4(r/En(t))/d4(W4(t)/W4(e)),n=r*JN(W4(e),a)/a;if(!a)return RS;function o(i,s){n>0?s<-vl+Fn&&(s=-vl+Fn):s>vl-Fn&&(s=vl-Fn);var l=n/JN(W4(s),a);return[l*mn(a*i),n-l*En(a*i)]}return o.invert=function(i,s){var l=n-s,u=Wv(a)*Yl(i*i+l*l),f=fc(i,Ji(l))*Wv(l);return l*a<0&&(f-=Ri*Wv(i)*Wv(l)),[f/a,2*vw(JN(n/u,1/a))-vl]},o}function bit(){return zB(bve).scale(109.5).parallels([30,30])}function zS(e,t){return[e,t]}zS.invert=zS;function _ve(){return hn(zS).scale(152.63)}function wve(e,t){var r=En(e),a=e===t?mn(e):(r-En(t))/(t-e),n=r/a+e;if(Ji(a)<Fn)return zS;function o(i,s){var l=n-s,u=a*i;return[l*mn(u),n-l*En(u)]}return o.invert=function(i,s){var l=n-s,u=fc(i,Ji(l))*Wv(l);return l*a<0&&(u-=Ri*Wv(i)*Wv(l)),[u/a,n-Wv(a)*Yl(i*i+l*l)]},o}function _it(){return zB(wve).scale(131.154).center([0,13.9389])}var FS=1.340264,OS=-.081106,NS=893e-6,BS=.003796,X4=Yl(3)/2,wit=12;function FB(e,t){var r=cc(X4*mn(t)),a=r*r,n=a*a*a;return[e*En(r)/(X4*(FS+3*OS*a+n*(7*NS+9*BS*a))),r*(FS+OS*a+n*(NS+BS*a))]}FB.invert=function(e,t){for(var r=t,a=r*r,n=a*a*a,o=0,i,s,l;o<wit&&(s=r*(FS+OS*a+n*(NS+BS*a))-t,l=FS+3*OS*a+n*(7*NS+9*BS*a),r-=i=s/l,a=r*r,n=a*a*a,!(Ji(i)<c4));++o);return[X4*e*(FS+3*OS*a+n*(7*NS+9*BS*a))/En(r),cc(mn(r)/X4)]};function Tit(){return hn(FB).scale(177.158)}function $S(e,t){var r=En(t),a=En(e)*r;return[r*mn(e)/a,mn(t)/a]}$S.invert=DS(vw);function OB(){return hn($S).scale(144.049).clipAngle(60)}function Ait(){var e=1,t=0,r=0,a=1,n=1,o=0,i,s,l=null,u,f,c,h=1,v=1,p=IS({point:function(S,M){var w=_([S,M]);this.stream.point(w[0],w[1])}}),d=MS,g,m;function y(){return h=e*a,v=e*n,g=m=null,_}function _(S){var M=S[0]*h,w=S[1]*v;if(o){var A=w*i-M*s;M=M*i+w*s,w=A}return[M+t,w+r]}return _.invert=function(S){var M=S[0]-t,w=S[1]-r;if(o){var A=w*i+M*s;M=M*i-w*s,w=A}return[M/h,w/v]},_.stream=function(S){return g&&m===S?g:g=p(d(m=S))},_.postclip=function(S){return arguments.length?(d=S,l=u=f=c=null,y()):d},_.clipExtent=function(S){return arguments.length?(d=S==null?(l=u=f=c=null,MS):R4(l=+S[0][0],u=+S[0][1],f=+S[1][0],c=+S[1][1]),y()):l==null?null:[[l,u],[f,c]]},_.scale=function(S){return arguments.length?(e=+S,y()):e},_.translate=function(S){return arguments.length?(t=+S[0],r=+S[1],y()):[t,r]},_.angle=function(S){return arguments.length?(o=S%360*$n,s=mn(o),i=En(o),y()):o*hs},_.reflectX=function(S){return arguments.length?(a=S?-1:1,y()):a<0},_.reflectY=function(S){return arguments.length?(n=S?-1:1,y()):n<0},_.fitExtent=function(S,M){return q4(_,S,M)},_.fitSize=function(S,M){return IB(_,S,M)},_.fitWidth=function(S,M){return DB(_,S,M)},_.fitHeight=function(S,M){return RB(_,S,M)},_}function Z4(e,t){var r=t*t,a=r*r;return[e*(.8707-.131979*r+a*(-.013791+a*(.003971*r-.001529*a))),t*(1.007226+r*(.015085+a*(-.044475+.028874*r-.005916*a)))]}Z4.invert=function(e,t){var r=t,a=25,n;do{var o=r*r,i=o*o;r-=n=(r*(1.007226+o*(.015085+i*(-.044475+.028874*o-.005916*i)))-t)/(1.007226+o*(.015085*3+i*(-.044475*7+.028874*9*o-.005916*11*i)))}while(Ji(n)>Fn&&--a>0);return[e/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};function Tve(){return hn(Z4).scale(175.295)}function NB(e,t){return[En(t)*mn(e),mn(t)]}NB.invert=DS(cc);function Ave(){return hn(NB).scale(249.5).clipAngle(90+Fn)}function BB(e,t){var r=En(t),a=1+En(e)*r;return[r*mn(e)/a,mn(t)/a]}BB.invert=DS(function(e){return 2*vw(e)});function Sit(){return hn(BB).scale(250).clipAngle(142)}function $B(e,t){return[d4(QN((vl+t)/2)),-e]}$B.invert=function(e,t){return[-t,2*vw(nhe(e))-vl]};function Mit(){var e=xve($B),t=e.center,r=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?r([a[0],a[1],a.length>2?a[2]+90:90]):(a=r(),[a[0],a[1],a[2]-90])},r([0,0,90]).scale(159.155)}var kit=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",geoArea:Tnt,geoBounds:bhe,geoCentroid:gw,geoCircle:Phe,geoClipAntimeridian:gB,geoClipCircle:Bhe,geoClipExtent:$nt,geoClipRectangle:R4,geoContains:Ynt,geoDistance:O4,geoGraticule:Xhe,geoGraticule10:Wnt,geoInterpolate:B4,geoLength:$he,geoPath:oit,geoAlbers:mve,geoAlbersUsa:git,geoAzimuthalEqualArea:mit,geoAzimuthalEqualAreaRaw:Tw,geoAzimuthalEquidistant:yit,geoAzimuthalEquidistantRaw:jy,geoConicConformal:bit,geoConicConformalRaw:bve,geoConicEqualArea:Y4,geoConicEqualAreaRaw:gve,geoConicEquidistant:_it,geoConicEquidistantRaw:wve,geoEqualEarth:Tit,geoEqualEarthRaw:FB,geoEquirectangular:_ve,geoEquirectangularRaw:zS,geoGnomonic:OB,geoGnomonicRaw:$S,geoIdentity:Ait,geoProjection:hn,geoProjectionMutator:cu,geoMercator:xit,geoMercatorRaw:RS,geoNaturalEarth1:Tve,geoNaturalEarth1Raw:Z4,geoOrthographic:Ave,geoOrthographicRaw:NB,geoStereographic:Sit,geoStereographicRaw:BB,geoTransverseMercator:Mit,geoTransverseMercatorRaw:$B,geoRotation:yw,geoStream:gh,geoTransform:sit}),Eit=qh(kit),Xr=Math.abs,Js=Math.atan,$i=Math.atan2,wr=Math.cos,b0=Math.exp,Aw=Math.floor,hu=Math.log,cm=Math.max,yh=Math.min,US=Math.pow,K4=Math.round,di=Math.sign||function(e){return e>0?1:e<0?-1:0},Tr=Math.sin,ci=Math.tan,Ea=1e-6,eb=1e-12,kr=Math.PI,Ia=kr/2,xh=kr/4,Xv=Math.SQRT1_2,Co=Hr(2),Zv=Hr(kr),dp=kr*2,Ui=180/kr,Ai=kr/180;function Cit(e){return e?e/Math.sin(e):1}function Cn(e){return e>1?Ia:e<-1?-Ia:Math.asin(e)}function Fu(e){return e>1?0:e<-1?kr:Math.acos(e)}function Hr(e){return e>0?Math.sqrt(e):0}function Lit(e){return e=b0(2*e),(e-1)/(e+1)}function UB(e){return(b0(e)-b0(-e))/2}function Sve(e){return(b0(e)+b0(-e))/2}function Pit(e){return hu(e+Hr(e*e+1))}function Iit(e){return hu(e+Hr(e*e-1))}function Mve(e){var t=ci(e/2),r=2*hu(wr(e/2))/(t*t);function a(n,o){var i=wr(n),s=wr(o),l=Tr(o),u=s*i,f=-((1-u?hu((1+u)/2)/(1-u):-.5)+r/(1+u));return[f*s*Tr(n),f*l]}return a.invert=function(n,o){var i=Hr(n*n+o*o),s=-e/2,l=50,u;if(!i)return[0,0];do{var f=s/2,c=wr(f),h=Tr(f),v=h/c,p=-hu(Xr(c));s-=u=(2/v*p-r*v-i)/(-p/(h*h)+1-r/(2*c*c))*(c<0?.7:1)}while(Xr(u)>Ea&&--l>0);var d=Tr(s);return[$i(n*d,i*wr(s)),Cn(o*d/i)]},a}function Dit(){var e=Ia,t=cu(Mve),r=t(e);return r.radius=function(a){return arguments.length?t(e=a*Ai):e*Ui},r.scale(179.976).clipAngle(147)}function J4(e,t){var r=wr(t),a=Cit(Fu(r*wr(e/=2)));return[2*r*Tr(e)*a,Tr(t)*a]}J4.invert=function(e,t){if(!(e*e+4*t*t>kr*kr+Ea)){var r=e,a=t,n=25;do{var o=Tr(r),i=Tr(r/2),s=wr(r/2),l=Tr(a),u=wr(a),f=Tr(2*a),c=l*l,h=u*u,v=i*i,p=1-h*s*s,d=p?Fu(u*s)*Hr(g=1/p):g=0,g,m=2*d*u*i-e,y=d*l-t,_=g*(h*v+d*u*s*c),S=g*(.5*o*f-d*2*l*i),M=g*.25*(f*i-d*l*h*o),w=g*(c*s+d*v*u),A=S*M-w*_;if(!A)break;var k=(y*S-m*w)/A,T=(m*M-y*_)/A;r-=k,a-=T}while((Xr(k)>Ea||Xr(T)>Ea)&&--n>0);return[r,a]}};function Rit(){return hn(J4).scale(152.63)}function kve(e){var t=Tr(e),r=wr(e),a=e>=0?1:-1,n=ci(a*e),o=(1+t-r)/2;function i(s,l){var u=wr(l),f=wr(s/=2);return[(1+u)*Tr(s),(a*l>-$i(f,n)-.001?0:-a*10)+o+Tr(l)*r-(1+u)*t*f]}return i.invert=function(s,l){var u=0,f=0,c=50;do{var h=wr(u),v=Tr(u),p=wr(f),d=Tr(f),g=1+p,m=g*v-s,y=o+d*r-g*t*h-l,_=g*h/2,S=-v*d,M=t*g*v/2,w=r*p+t*h*d,A=S*M-w*_,k=(y*S-m*w)/A/2,T=(m*M-y*_)/A;Xr(T)>2&&(T/=2),u-=k,f-=T}while((Xr(k)>Ea||Xr(T)>Ea)&&--c>0);return a*f>-$i(wr(u),n)-.001?[u*2,f]:null},i}function zit(){var e=20*Ai,t=e>=0?1:-1,r=ci(t*e),a=cu(kve),n=a(e),o=n.stream;return n.parallel=function(i){return arguments.length?(r=ci((t=(e=i*Ai)>=0?1:-1)*e),a(e)):e*Ui},n.stream=function(i){var s=n.rotate(),l=o(i),u=(n.rotate([0,0]),o(i)),f=n.precision();return n.rotate(s),l.sphere=function(){u.polygonStart(),u.lineStart();for(var c=t*-180;t*c<180;c+=t*90)u.point(c,t*90);if(e)for(;t*(c-=3*t*f)>=-180;)u.point(c,t*-$i(wr(c*Ai/2),r)*Ui);u.lineEnd(),u.polygonEnd()},l},n.scale(218.695).center([0,28.0974])}function Q4(e,t){var r=ci(t/2),a=Hr(1-r*r),n=1+a*wr(e/=2),o=Tr(e)*a/n,i=r/n,s=o*o,l=i*i;return[4/3*o*(3+s-3*l),4/3*i*(3+3*s-l)]}Q4.invert=function(e,t){if(e*=3/8,t*=3/8,!e&&Xr(t)>1)return null;var r=e*e,a=t*t,n=1+r+a,o=Hr((n-Hr(n*n-4*t*t))/2),i=Cn(o)/3,s=o?Iit(Xr(t/o))/3:Pit(Xr(e))/3,l=wr(i),u=Sve(s),f=u*u-l*l;return[di(e)*2*$i(UB(s)*l,.25-f),di(t)*2*$i(u*Tr(i),.25+f)]};function Fit(){return hn(Q4).scale(66.1603)}var HB=Hr(8),Oit=hu(1+Co);function GB(e,t){var r=Xr(t);return r<xh?[e,hu(ci(xh+t/2))]:[e*wr(r)*(2*Co-1/Tr(r)),di(t)*(2*Co*(r-xh)-hu(ci(r/2)))]}GB.invert=function(e,t){if((o=Xr(t))<Oit)return[e,2*Js(b0(t))-Ia];var r=xh,a=25,n,o;do{var i=wr(r/2),s=ci(r/2);r-=n=(HB*(r-xh)-hu(s)-o)/(HB-i*i/(2*s))}while(Xr(n)>eb&&--a>0);return[e/(wr(r)*(HB-1/Tr(r))),di(t)*r]};function Nit(){return hn(GB).scale(112.314)}function Eve(e){var t=2*kr/e;function r(a,n){var o=jy(a,n);if(Xr(a)>Ia){var i=$i(o[1],o[0]),s=Hr(o[0]*o[0]+o[1]*o[1]),l=t*K4((i-Ia)/t)+Ia,u=$i(Tr(i-=l),2-wr(i));i=l+Cn(kr/s*Tr(u))-u,o[0]=s*wr(i),o[1]=s*Tr(i)}return o}return r.invert=function(a,n){var o=Hr(a*a+n*n);if(o>Ia){var i=$i(n,a),s=t*K4((i-Ia)/t)+Ia,l=i>s?-1:1,u=o*wr(s-i),f=1/ci(l*Fu((u-kr)/Hr(kr*(kr-2*u)+o*o)));i=s+2*Js((f+l*Hr(f*f-3))/3),a=o*wr(i),n=o*Tr(i)}return jy.invert(a,n)},r}function Bit(){var e=5,t=cu(Eve),r=t(e),a=r.stream,n=.01,o=-wr(n*Ai),i=Tr(n*Ai);return r.lobes=function(s){return arguments.length?t(e=+s):e},r.stream=function(s){var l=r.rotate(),u=a(s),f=(r.rotate([0,0]),a(s));return r.rotate(l),u.sphere=function(){f.polygonStart(),f.lineStart();for(var c=0,h=360/e,v=2*kr/e,p=90-180/e,d=Ia;c<e;++c,p-=h,d-=v)f.point($i(i*wr(d),o)*Ui,Cn(i*Tr(d))*Ui),p<-90?(f.point(-90,-180-p-n),f.point(-90,-180-p+n)):(f.point(90,p+n),f.point(90,p-n));f.lineEnd(),f.polygonEnd()},u},r.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function eP(e,t){if(arguments.length<2&&(t=e),t===1)return Tw;if(t===1/0)return Cve;function r(a,n){var o=Tw(a/t,n);return o[0]*=e,o}return r.invert=function(a,n){var o=Tw.invert(a/e,n);return o[0]*=t,o},r}function Cve(e,t){return[e*wr(t)/wr(t/=2),2*Tr(t)]}Cve.invert=function(e,t){var r=2*Cn(t/2);return[e*wr(r/2)/wr(r),r]};function $it(){var e=2,t=cu(eP),r=t(e);return r.coefficient=function(a){return arguments.length?t(e=+a):e},r.scale(169.529)}function tP(e,t,r){var a=100,n,o,i;r=r===void 0?0:+r,t=+t;do o=e(r),i=e(r+Ea),o===i&&(i=o+Ea),r-=n=-1*Ea*(o-t)/(o-i);while(a-- >0&&Xr(n)>Ea);return a<0?NaN:r}function VB(e,t,r){return t===void 0&&(t=40),r===void 0&&(r=eb),function(a,n,o,i){var s,l,u;o=o===void 0?0:+o,i=i===void 0?0:+i;for(var f=0;f<t;f++){var c=e(o,i),h=c[0]-a,v=c[1]-n;if(Xr(h)<r&&Xr(v)<r)break;var p=h*h+v*v;if(p>s){o-=l/=2,i-=u/=2;continue}s=p;var d=(o>0?-1:1)*r,g=(i>0?-1:1)*r,m=e(o+d,i),y=e(o,i+g),_=(m[0]-c[0])/d,S=(m[1]-c[1])/d,M=(y[0]-c[0])/g,w=(y[1]-c[1])/g,A=w*_-S*M,k=(Xr(A)<.5?.5:1)/A;if(l=(v*M-h*w)*k,u=(h*S-v*_)*k,o+=l,i+=u,Xr(l)<r&&Xr(u)<r)break}return[o,i]}}function Lve(){var e=eP(1.68,2),t=1.4,r=12;function a(n,o){if(n+o<-t){var i=(n-o+1.6)*(n+o+t)/8;n+=i,o-=.8*i*Tr(o+kr/2)}var s=e(n,o),l=(1-wr(n*o))/r;return s[1]<0&&(s[0]*=1+l),s[1]>0&&(s[1]*=1+l/1.5*s[0]*s[0]),s}return a.invert=VB(a),a}function Uit(){return hn(Lve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Pve(e,t){var r=e*Tr(t),a=30,n;do t-=n=(t+Tr(t)-r)/(1+wr(t));while(Xr(n)>Ea&&--a>0);return t/2}function jB(e,t,r){function a(n,o){return[e*n*wr(o=Pve(r,o)),t*Tr(o)]}return a.invert=function(n,o){return o=Cn(o/t),[n/(e*wr(o)),Cn((2*o+Tr(2*o))/r)]},a}var qy=jB(Co/Ia,Co,kr);function Hit(){return hn(qy).scale(169.529)}var rP=2.00276,Ive=1.11072;function aP(e,t){var r=Pve(kr,t);return[rP*e/(1/wr(t)+Ive/wr(r)),(t+Co*Tr(r))/rP]}aP.invert=function(e,t){var r=rP*t,a=t<0?-xh:xh,n=25,o,i;do i=r-Co*Tr(a),a-=o=(Tr(2*a)+2*a-kr*Tr(i))/(2*wr(2*a)+2+kr*wr(i)*Co*wr(a));while(Xr(o)>Ea&&--n>0);return i=r-Co*Tr(a),[e*(1/wr(i)+Ive/wr(a))/rP,i]};function Git(){return hn(aP).scale(160.857)}function Sw(e){var t=0,r=cu(e),a=r(t);return a.parallel=function(n){return arguments.length?r(t=n*Ai):t*Ui},a}function hm(e,t){return[e*wr(t),t]}hm.invert=function(e,t){return[e/wr(t),t]};function Vit(){return hn(hm).scale(152.63)}function Dve(e){if(!e)return hm;var t=1/ci(e);function r(a,n){var o=t+e-n,i=o&&a*wr(n)/o;return[o*Tr(i),t-o*wr(i)]}return r.invert=function(a,n){var o=Hr(a*a+(n=t-n)*n),i=t+e-o;return[o/wr(i)*$i(a,n),i]},r}function jit(){return Sw(Dve).scale(123.082).center([0,26.1441]).parallel(45)}function Rve(e){function t(r,a){var n=Ia-a,o=n&&r*e*Tr(n)/n;return[n*Tr(o)/e,Ia-n*wr(o)]}return t.invert=function(r,a){var n=r*e,o=Ia-a,i=Hr(n*n+o*o),s=$i(n,o);return[(i?i/Tr(i):1)*s/e,Ia-i]},t}function qit(){var e=.5,t=cu(Rve),r=t(e);return r.fraction=function(a){return arguments.length?t(e=+a):e},r.scale(158.837)}var zve=jB(1,4/kr,kr);function Yit(){return hn(zve).scale(152.63)}function Fve(e,t,r,a,n,o){var i=wr(o),s;if(Xr(e)>1||Xr(o)>1)s=Fu(r*n+t*a*i);else{var l=Tr(e/2),u=Tr(o/2);s=2*Cn(Hr(l*l+t*a*u*u))}return Xr(s)>Ea?[s,$i(a*Tr(o),t*n-r*a*i)]:[0,0]}function qB(e,t,r){return Fu((e*e+t*t-r*r)/(2*e*t))}function Wit(e){return e-2*kr*Aw((e+kr)/(2*kr))}function Ove(e,t,r){for(var a=[[e[0],e[1],Tr(e[1]),wr(e[1])],[t[0],t[1],Tr(t[1]),wr(t[1])],[r[0],r[1],Tr(r[1]),wr(r[1])]],n=a[2],o,i=0;i<3;++i,n=o)o=a[i],n.v=Fve(o[1]-n[1],n[3],n[2],o[3],o[2],o[0]-n[0]),n.point=[0,0];var s=qB(a[0].v[0],a[2].v[0],a[1].v[0]),l=qB(a[0].v[0],a[1].v[0],a[2].v[0]),u=kr-s;a[2].point[1]=0,a[0].point[0]=-(a[1].point[0]=a[0].v[0]/2);var f=[a[2].point[0]=a[0].point[0]+a[2].v[0]*wr(s),2*(a[0].point[1]=a[1].point[1]=a[2].v[0]*Tr(s))];function c(h,v){var p=Tr(v),d=wr(v),g=new Array(3),m;for(m=0;m<3;++m){var y=a[m];if(g[m]=Fve(v-y[1],y[3],y[2],d,p,h-y[0]),!g[m][0])return y.point;g[m][1]=Wit(g[m][1]-y.v[1])}var _=f.slice();for(m=0;m<3;++m){var S=m==2?0:m+1,M=qB(a[m].v[0],g[m][0],g[S][0]);g[m][1]<0&&(M=-M),m?m==1?(M=l-M,_[0]-=g[m][0]*wr(M),_[1]-=g[m][0]*Tr(M)):(M=u-M,_[0]+=g[m][0]*wr(M),_[1]+=g[m][0]*Tr(M)):(_[0]+=g[m][0]*wr(M),_[1]-=g[m][0]*Tr(M))}return _[0]/=3,_[1]/=3,_}return c}function YB(e){return e[0]*=Ai,e[1]*=Ai,e}function Xit(){return Nve([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Nve(e,t,r){var a=gw({type:"MultiPoint",coordinates:[e,t,r]}),n=[-a[0],-a[1]],o=yw(n),i=Ove(YB(o(e)),YB(o(t)),YB(o(r)));i.invert=VB(i);var s=hn(i).rotate(n),l=s.center;return delete s.rotate,s.center=function(u){return arguments.length?l(o(u)):o.invert(l())},s.clipAngle(90)}function _0(e,t){var r=Hr(1-Tr(t));return[2/Zv*e*r,Zv*(1-r)]}_0.invert=function(e,t){var r=(r=t/Zv-1)*r;return[r>0?e*Hr(kr/r)/2:0,Cn(1-r)]};function Zit(){return hn(_0).scale(95.6464).center([0,30])}function Bve(e){var t=ci(e);function r(a,n){return[a,(a?a/Tr(a):1)*(Tr(n)*wr(a)-t*wr(n))]}return r.invert=t?function(a,n){a&&(n*=Tr(a)/a);var o=wr(a);return[a,2*$i(Hr(o*o+t*t-n*n)-o,t-n)]}:function(a,n){return[a,Cn(a?n*ci(a)/a:n)]},r}function Kit(){return Sw(Bve).scale(249.828).clipAngle(90)}var nP=Hr(3);function WB(e,t){return[nP*e*(2*wr(2*t/3)-1)/Zv,nP*Zv*Tr(t/3)]}WB.invert=function(e,t){var r=3*Cn(t/(nP*Zv));return[Zv*e/(nP*(2*wr(2*r/3)-1)),r]};function Jit(){return hn(WB).scale(156.19)}function XB(e){var t=wr(e);function r(a,n){return[a*t,Tr(n)/t]}return r.invert=function(a,n){return[a/t,Cn(n*t)]},r}function Qit(){return Sw(XB).parallel(38.58).scale(195.044)}function $ve(e){var t=wr(e);function r(a,n){return[a*t,(1+t)*ci(n/2)]}return r.invert=function(a,n){return[a/t,Js(n/(1+t))*2]},r}function eot(){return Sw($ve).scale(124.75)}function ZB(e,t){var r=Hr(8/(3*kr));return[r*e*(1-Xr(t)/kr),r*t]}ZB.invert=function(e,t){var r=Hr(8/(3*kr)),a=t/r;return[e/(r*(1-Xr(a)/kr)),a]};function tot(){return hn(ZB).scale(165.664)}function KB(e,t){var r=Hr(4-3*Tr(Xr(t)));return[2/Hr(6*kr)*e*r,di(t)*Hr(2*kr/3)*(2-r)]}KB.invert=function(e,t){var r=2-Xr(t)/Hr(2*kr/3);return[e*Hr(6*kr)/(2*r),di(t)*Cn((4-r*r)/3)]};function rot(){return hn(KB).scale(165.664)}function JB(e,t){var r=Hr(kr*(4+kr));return[2/r*e*(1+Hr(1-4*t*t/(kr*kr))),4/r*t]}JB.invert=function(e,t){var r=Hr(kr*(4+kr))/2;return[e*r/(1+Hr(1-t*t*(4+kr)/(4*kr))),t*r/2]};function aot(){return hn(JB).scale(180.739)}function QB(e,t){var r=(2+Ia)*Tr(t);t/=2;for(var a=0,n=1/0;a<10&&Xr(n)>Ea;a++){var o=wr(t);t-=n=(t+Tr(t)*(o+2)-r)/(2*o*(1+o))}return[2/Hr(kr*(4+kr))*e*(1+wr(t)),2*Hr(kr/(4+kr))*Tr(t)]}QB.invert=function(e,t){var r=t*Hr((4+kr)/kr)/2,a=Cn(r),n=wr(a);return[e/(2/Hr(kr*(4+kr))*(1+n)),Cn((a+r*(n+2))/(2+Ia))]};function not(){return hn(QB).scale(180.739)}function e$(e,t){return[e*(1+wr(t))/Hr(2+kr),2*t/Hr(2+kr)]}e$.invert=function(e,t){var r=Hr(2+kr),a=t*r/2;return[r*e/(1+wr(a)),a]};function iot(){return hn(e$).scale(173.044)}function t$(e,t){for(var r=(1+Ia)*Tr(t),a=0,n=1/0;a<10&&Xr(n)>Ea;a++)t-=n=(t+Tr(t)-r)/(1+wr(t));return r=Hr(2+kr),[e*(1+wr(t))/r,2*t/r]}t$.invert=function(e,t){var r=1+Ia,a=Hr(r/2);return[e*2*a/(1+wr(t*=a)),Cn((t+Tr(t))/r)]};function oot(){return hn(t$).scale(173.044)}var iP=3+2*Co;function r$(e,t){var r=Tr(e/=2),a=wr(e),n=Hr(wr(t)),o=wr(t/=2),i=Tr(t)/(o+Co*a*n),s=Hr(2/(1+i*i)),l=Hr((Co*o+(a+r)*n)/(Co*o+(a-r)*n));return[iP*(s*(l-1/l)-2*hu(l)),iP*(s*i*(l+1/l)-2*Js(i))]}r$.invert=function(e,t){if(!(o=Q4.invert(e/1.2,t*1.065)))return null;var r=o[0],a=o[1],n=20,o;e/=iP,t/=iP;do{var i=r/2,s=a/2,l=Tr(i),u=wr(i),f=Tr(s),c=wr(s),h=wr(a),v=Hr(h),p=f/(c+Co*u*v),d=p*p,g=Hr(2/(1+d)),m=Co*c+(u+l)*v,y=Co*c+(u-l)*v,_=m/y,S=Hr(_),M=S-1/S,w=S+1/S,A=g*M-2*hu(S)-e,k=g*p*w-2*Js(p)-t,T=f&&Xv*v*l*d/f,L=(Co*u*c+v)/(2*(c+Co*u*v)*(c+Co*u*v)*v),C=-.5*p*g*g*g,I=C*T,R=C*L,B=(B=2*c+Co*v*(u-l))*B*S,N=(Co*u*c*v+h)/B,D=-(Co*l*f)/(v*B),O=M*I-2*N/S+g*(N+N/_),$=M*R-2*D/S+g*(D+D/_),Y=p*w*I-2*T/(1+d)+g*w*T+g*p*(N-N/_),X=p*w*R-2*L/(1+d)+g*w*L+g*p*(D-D/_),ee=$*Y-X*O;if(!ee)break;var Q=(k*$-A*X)/ee,Z=(A*Y-k*O)/ee;r-=Q,a=cm(-Ia,yh(Ia,a-Z))}while((Xr(Q)>Ea||Xr(Z)>Ea)&&--n>0);return Xr(Xr(a)-Ia)<Ea?[0,a]:n&&[r,a]};function sot(){return hn(r$).scale(62.5271)}var oP=wr(35*Ai);function a$(e,t){var r=ci(t/2);return[e*oP*Hr(1-r*r),(1+oP)*r]}a$.invert=function(e,t){var r=t/(1+oP);return[e&&e/(oP*Hr(1-r*r)),2*Js(r)]};function lot(){return hn(a$).scale(137.152)}function n$(e,t){var r=t/2,a=wr(r);return[2*e/Zv*wr(t)*a*a,Zv*ci(r)]}n$.invert=function(e,t){var r=Js(t/Zv),a=wr(r),n=2*r;return[e*Zv/2/(wr(n)*a*a),n]};function uot(){return hn(n$).scale(135.264)}function Uve(e){var t=1-e,r=o(kr,0)[0]-o(-kr,0)[0],a=o(0,Ia)[1]-o(0,-Ia)[1],n=Hr(2*a/r);function o(l,u){var f=wr(u),c=Tr(u);return[f/(t+e*f)*l,t*u+e*c]}function i(l,u){var f=o(l,u);return[f[0]*n,f[1]/n]}function s(l){return i(0,l)[1]}return i.invert=function(l,u){var f=tP(s,u),c=l/n*(e+t/wr(f));return[c,f]},i}function fot(){var e=.5,t=cu(Uve),r=t(e);return r.alpha=function(a){return arguments.length?t(e=+a):e},r.scale(168.725)}function Hve(e){return[e[0]/2,Cn(ci(e[1]/2*Ai))*Ui]}function Gve(e){return[e[0]*2,2*Js(Tr(e[1]*Ai))*Ui]}function cot(e){e==null&&(e=Ave);var t=e(),r=_ve().scale(Ui).precision(0).clipAngle(null).translate([0,0]);function a(o){return t(Hve(o))}t.invert&&(a.invert=function(o){return Gve(t.invert(o))}),a.stream=function(o){var i=t.stream(o),s=r.stream({point:function(l,u){i.point(l/2,Cn(ci(-u/2*Ai))*Ui)},lineStart:function(){i.lineStart()},lineEnd:function(){i.lineEnd()},polygonStart:function(){i.polygonStart()},polygonEnd:function(){i.polygonEnd()}});return s.sphere=i.sphere,s};function n(o){a[o]=function(){return arguments.length?(t[o].apply(t,arguments),a):t[o]()}}return a.rotate=function(o){return arguments.length?(r.rotate(o),a):r.rotate()},a.center=function(o){return arguments.length?(t.center(Hve(o)),a):Gve(t.center())},n("angle"),n("clipAngle"),n("clipExtent"),n("fitExtent"),n("fitHeight"),n("fitSize"),n("fitWidth"),n("scale"),n("translate"),n("precision"),a.scale(249.5)}function Vve(e,t){var r=2*kr/t,a=e*e;function n(o,i){var s=jy(o,i),l=s[0],u=s[1],f=l*l+u*u;if(f>a){var c=Hr(f),h=$i(u,l),v=r*K4(h/r),p=h-v,d=e*wr(p),g=(e*Tr(p)-p*Tr(d))/(Ia-d),m=jve(p,g),y=(kr-e)/sP(m,d,kr);l=c;var _=50,S;do l-=S=(e+sP(m,d,l)*y-c)/(m(l)*y);while(Xr(S)>Ea&&--_>0);u=p*Tr(l),l<Ia&&(u-=g*(l-Ia));var M=Tr(v),w=wr(v);s[0]=l*w-u*M,s[1]=l*M+u*w}return s}return n.invert=function(o,i){var s=o*o+i*i;if(s>a){var l=Hr(s),u=$i(i,o),f=r*K4(u/r),c=u-f;o=l*wr(c),i=l*Tr(c);for(var h=o-Ia,v=Tr(o),p=i/v,d=o<Ia?1/0:0,g=10;;){var m=e*Tr(p),y=e*wr(p),_=Tr(y),S=Ia-y,M=(m-p*_)/S,w=jve(p,M);if(Xr(d)<eb||!--g)break;p-=d=(p*v-M*h-i)/(v-h*2*(S*(y+p*m*wr(y)-_)-m*(m-p*_))/(S*S))}l=e+sP(w,y,o)*(kr-e)/sP(w,y,kr),u=f+p,o=l*wr(u),i=l*Tr(u)}return jy.invert(o,i)},n}function jve(e,t){return function(r){var a=e*wr(r);return r<Ia&&(a-=t),Hr(1+a*a)}}function sP(e,t,r){for(var a=50,n=(r-t)/a,o=e(t)+e(r),i=1,s=t;i<a;++i)o+=2*e(s+=n);return o*.5*n}function hot(){var e=6,t=30*Ai,r=wr(t),a=Tr(t),n=cu(Vve),o=n(t,e),i=o.stream,s=.01,l=-wr(s*Ai),u=Tr(s*Ai);return o.radius=function(f){return arguments.length?(r=wr(t=f*Ai),a=Tr(t),n(t,e)):t*Ui},o.lobes=function(f){return arguments.length?n(t,e=+f):e},o.stream=function(f){var c=o.rotate(),h=i(f),v=(o.rotate([0,0]),i(f));return o.rotate(c),h.sphere=function(){v.polygonStart(),v.lineStart();for(var p=0,d=2*kr/e,g=0;p<e;++p,g-=d)v.point($i(u*wr(g),l)*Ui,Cn(u*Tr(g))*Ui),v.point($i(a*wr(g-d/2),r)*Ui,Cn(a*Tr(g-d/2))*Ui);v.lineEnd(),v.polygonEnd()},h},o.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function lP(e,t,r,a,n,o,i,s){arguments.length<8&&(s=0);function l(u,f){if(!f)return[e*u/kr,0];var c=f*f,h=e+c*(t+c*(r+c*a)),v=f*(n-1+c*(o-s+c*i)),p=(h*h+v*v)/(2*v),d=u*Cn(h/p)/kr;return[p*Tr(d),f*(1+c*s)+p*(1-wr(d))]}return l.invert=function(u,f){var c=kr*u/e,h=f,v,p,d=50;do{var g=h*h,m=e+g*(t+g*(r+g*a)),y=h*(n-1+g*(o-s+g*i)),_=m*m+y*y,S=2*y,M=_/S,w=M*M,A=Cn(m/M)/kr,k=c*A,T=m*m,L=(2*t+g*(4*r+g*6*a))*h,C=n+g*(3*o+g*5*i),I=2*(m*L+y*(C-1)),R=2*(C-1),B=(I*S-_*R)/(S*S),N=wr(k),D=Tr(k),O=M*N,$=M*D,Y=c/kr*(1/Hr(1-T/w))*(L*M-m*B)/w,X=$-u,ee=h*(1+g*s)+M-O-f,Q=B*D+O*Y,Z=O*A,q=1+B-(B*N-$*Y),ae=$*A,ie=Q*ae-q*Z;if(!ie)break;c-=v=(ee*Q-X*q)/ie,h-=p=(X*ae-ee*Z)/ie}while((Xr(v)>Ea||Xr(p)>Ea)&&--d>0);return[c,h]},l}var qve=lP(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function vot(){return hn(qve).scale(149.995)}var Yve=lP(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function dot(){return hn(Yve).scale(153.93)}var Wve=lP(5/6*kr,-.62636,-.0344,0,1.3493,-.05524,0,.045);function pot(){return hn(Wve).scale(130.945)}function i$(e,t){var r=e*e,a=t*t;return[e*(1-.162388*a)*(.87-952426e-9*r*r),t*(1+a/12)]}i$.invert=function(e,t){var r=e,a=t,n=50,o;do{var i=a*a;a-=o=(a*(1+i/12)-t)/(1+i/4)}while(Xr(o)>Ea&&--n>0);n=50,e/=1-.162388*i;do{var s=(s=r*r)*s;r-=o=(r*(.87-952426e-9*s)-e)/(.87-.00476213*s)}while(Xr(o)>Ea&&--n>0);return[r,a]};function got(){return hn(i$).scale(131.747)}var Xve=lP(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function mot(){return hn(Xve).scale(131.087)}function Zve(e){var t=e(Ia,0)[0]-e(-Ia,0)[0];function r(a,n){var o=a>0?-.5:.5,i=e(a+o*kr,n);return i[0]-=o*t,i}return e.invert&&(r.invert=function(a,n){var o=a>0?-.5:.5,i=e.invert(a+o*t,n),s=i[0]-o*kr;return s<-kr?s+=2*kr:s>kr&&(s-=2*kr),i[0]=s,i}),r}function uP(e,t){var r=di(e),a=di(t),n=wr(t),o=wr(e)*n,i=Tr(e)*n,s=Tr(a*t);e=Xr($i(i,s)),t=Cn(o),Xr(e-Ia)>Ea&&(e%=Ia);var l=yot(e>kr/4?Ia-e:e,t);return e>kr/4&&(s=l[0],l[0]=-l[1],l[1]=-s),l[0]*=r,l[1]*=-a,l}uP.invert=function(e,t){Xr(e)>1&&(e=di(e)*2-e),Xr(t)>1&&(t=di(t)*2-t);var r=di(e),a=di(t),n=-r*e,o=-a*t,i=o/n<1,s=xot(i?o:n,i?n:o),l=s[0],u=s[1],f=wr(u);return i&&(l=-Ia-l),[r*($i(Tr(l)*f,-Tr(u))+kr),a*Cn(wr(l)*f)]};function yot(e,t){if(t===Ia)return[0,0];var r=Tr(t),a=r*r,n=a*a,o=1+n,i=1+3*n,s=1-n,l=Cn(1/Hr(o)),u=s+a*o*l,f=(1-r)/u,c=Hr(f),h=f*o,v=Hr(h),p=c*s,d,g;if(e===0)return[0,-(p+a*v)];var m=wr(t),y=1/m,_=2*r*m,S=(-3*a+l*i)*_,M=(-u*m-(1-r)*S)/(u*u),w=.5*M/c,A=s*w-2*a*c*_,k=a*o*M+f*i*_,T=-y*_,L=-y*k,C=-2*y*A,I=4*e/kr,R;if(e>.222*kr||t<kr/4&&e>.175*kr){if(d=(p+a*Hr(h*(1+n)-p*p))/(1+n),e>kr/4)return[d,d];var B=d,N=.5*d;d=.5*(N+B),g=50;do{var D=Hr(h-d*d),O=d*(C+T*D)+L*Cn(d/v)-I;if(!O)break;O<0?N=d:B=d,d=.5*(N+B)}while(Xr(B-N)>Ea&&--g>0)}else{d=Ea,g=25;do{var $=d*d,Y=Hr(h-$),X=C+T*Y,ee=d*X+L*Cn(d/v)-I,Q=X+(L-T*$)/Y;d-=R=Y?ee/Q:0}while(Xr(R)>Ea&&--g>0)}return[d,-p-a*Hr(h-d*d)]}function xot(e,t){for(var r=0,a=1,n=.5,o=50;;){var i=n*n,s=Hr(n),l=Cn(1/Hr(1+i)),u=1-i+n*(1+i)*l,f=(1-s)/u,c=Hr(f),h=f*(1+i),v=c*(1-i),p=h-e*e,d=Hr(p),g=t+v+n*d;if(Xr(a-r)<eb||--o==0||g===0)break;g>0?r=n:a=n,n=.5*(r+a)}if(!o)return null;var m=Cn(s),y=wr(m),_=1/y,S=2*s*y,M=(-3*n+l*(1+3*i))*S,w=(-u*y-(1-s)*M)/(u*u),A=.5*w/c,k=(1-i)*A-2*n*c*S,T=-2*_*k,L=-_*S,C=-_*(n*(1+i)*w+f*(1+3*i)*S);return[kr/4*(e*(T+L*d)+C*Cn(e/Hr(h))),m]}function bot(){return hn(Zve(uP)).scale(239.75)}function _ot(e,t,r){var a,n,o;return e?(a=o$(e,r),t?(n=o$(t,1-r),o=n[1]*n[1]+r*a[0]*a[0]*n[0]*n[0],[[a[0]*n[2]/o,a[1]*a[2]*n[0]*n[1]/o],[a[1]*n[1]/o,-a[0]*a[2]*n[0]*n[2]/o],[a[2]*n[1]*n[2]/o,-r*a[0]*a[1]*n[0]/o]]):[[a[0],0],[a[1],0],[a[2],0]]):(n=o$(t,1-r),[[0,n[0]/n[1]],[1/n[1],0],[n[2]/n[1],0]])}function o$(e,t){var r,a,n,o,i;if(t<Ea)return o=Tr(e),a=wr(e),r=t*(e-o*a)/4,[o-r*a,a+r*o,1-t*o*o/2,e-r];if(t>=1-Ea)return r=(1-t)/4,a=Sve(e),o=Lit(e),n=1/a,i=a*UB(e),[o+r*(i-e)/(a*a),n-r*o*n*(i-e),n+r*o*n*(i+e),2*Js(b0(e))-Ia+r*(i-e)/a];var s=[1,0,0,0,0,0,0,0,0],l=[Hr(t),0,0,0,0,0,0,0,0],u=0;for(a=Hr(1-t),i=1;Xr(l[u]/s[u])>Ea&&u<8;)r=s[u++],l[u]=(r-a)/2,s[u]=(r+a)/2,a=Hr(r*a),i*=2;n=i*s[u]*e;do o=l[u]*Tr(a=n)/s[u],n=(Cn(o)+n)/2;while(--u);return[Tr(n),o=wr(n),o/wr(n-a),n]}function wot(e,t,r){var a=Xr(e),n=Xr(t),o=UB(n);if(a){var i=1/Tr(a),s=1/(ci(a)*ci(a)),l=-(s+r*(o*o*i*i)-1+r),u=(r-1)*s,f=(-l+Hr(l*l-4*u))/2;return[HS(Js(1/Hr(f)),r)*di(e),HS(Js(Hr((f/s-1)/r)),1-r)*di(t)]}return[0,HS(Js(o),1-r)*di(t)]}function HS(e,t){if(!t)return e;if(t===1)return hu(ci(e/2+xh));for(var r=1,a=Hr(1-t),n=Hr(t),o=0;Xr(n)>Ea;o++){if(e%kr){var i=Js(a*ci(e)/r);i<0&&(i+=kr),e+=i+~~(e/kr)*kr}else e+=e;n=(r+a)/2,a=Hr(r*a),n=((r=n)-a)/2}return e/(US(2,o)*r)}function fP(e,t){var r=(Co-1)/(Co+1),a=Hr(1-r*r),n=HS(Ia,a*a),o=-1,i=hu(ci(kr/4+Xr(t)/2)),s=b0(o*i)/Hr(r),l=Tot(s*wr(o*e),s*Tr(o*e)),u=wot(l[0],l[1],a*a);return[-u[1],(t>=0?1:-1)*(.5*n-u[0])]}function Tot(e,t){var r=e*e,a=t+1,n=1-r-t*t;return[.5*((e>=0?Ia:-Ia)-$i(n,2*e)),-.25*hu(n*n+4*r)+.5*hu(a*a+r)]}function Aot(e,t){var r=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/r,(e[1]*t[0]-e[0]*t[1])/r]}fP.invert=function(e,t){var r=(Co-1)/(Co+1),a=Hr(1-r*r),n=HS(Ia,a*a),o=-1,i=_ot(.5*n-t,-e,a*a),s=Aot(i[0],i[1]),l=$i(s[1],s[0])/o;return[l,2*Js(b0(.5/o*hu(r*s[0]*s[0]+r*s[1]*s[1])))-Ia]};function Sot(){return hn(Zve(fP)).scale(151.496)}function Kve(e){var t=Tr(e),r=wr(e),a=Jve(e);a.invert=Jve(-e);function n(o,i){var s=a(o,i);o=s[0],i=s[1];var l=Tr(i),u=wr(i),f=wr(o),c=Fu(t*l+r*u*f),h=Tr(c),v=Xr(h)>Ea?c/h:1;return[v*r*Tr(o),(Xr(o)>Ia?v:-v)*(t*u-r*l*f)]}return n.invert=function(o,i){var s=Hr(o*o+i*i),l=-Tr(s),u=wr(s),f=s*u,c=-i*l,h=s*t,v=Hr(f*f+c*c-h*h),p=$i(f*h+c*v,c*h-f*v),d=(s>Ia?-1:1)*$i(o*l,s*wr(p)*u+i*Tr(p)*l);return a.invert(d,p)},n}function Jve(e){var t=Tr(e),r=wr(e);return function(a,n){var o=wr(n),i=wr(a)*o,s=Tr(a)*o,l=Tr(n);return[$i(s,i*r-l*t),Cn(l*r+i*t)]}}function Mot(){var e=0,t=cu(Kve),r=t(e),a=r.rotate,n=r.stream,o=Phe();return r.parallel=function(i){if(!arguments.length)return e*Ui;var s=r.rotate();return t(e=i*Ai).rotate(s)},r.rotate=function(i){return arguments.length?(a.call(r,[i[0],i[1]-e*Ui]),o.center([-i[0],-i[1]]),r):(i=a.call(r),i[1]+=e*Ui,i)},r.stream=function(i){return i=n(i),i.sphere=function(){i.polygonStart();var s=.01,l=o.radius(90-s)().coordinates[0],u=l.length-1,f=-1,c;for(i.lineStart();++f<u;)i.point((c=l[f])[0],c[1]);for(i.lineEnd(),l=o.radius(90+s)().coordinates[0],u=l.length-1,i.lineStart();--f>=0;)i.point((c=l[f])[0],c[1]);i.lineEnd(),i.polygonEnd()},i},r.scale(79.4187).parallel(45).clipAngle(180-.001)}var kot=3,s$=Cn(1-1/kot)*Ui,l$=XB(0);function Qve(e){var t=s$*Ai,r=_0(kr,t)[0]-_0(-kr,t)[0],a=l$(0,t)[1],n=_0(0,t)[1],o=Zv-n,i=dp/e,s=4/dp,l=a+o*o*4/dp;function u(f,c){var h,v=Xr(c);if(v>t){var p=yh(e-1,cm(0,Aw((f+kr)/i)));f+=kr*(e-1)/e-p*i,h=_0(f,v),h[0]=h[0]*dp/r-dp*(e-1)/(2*e)+p*dp/e,h[1]=a+(h[1]-n)*4*o/dp,c<0&&(h[1]=-h[1])}else h=l$(f,c);return h[0]*=s,h[1]/=l,h}return u.invert=function(f,c){f/=s,c*=l;var h=Xr(c);if(h>a){var v=yh(e-1,cm(0,Aw((f+kr)/i)));f=(f+kr*(e-1)/e-v*i)*r/dp;var p=_0.invert(f,.25*(h-a)*dp/o+n);return p[0]-=kr*(e-1)/e-v*i,c<0&&(p[1]=-p[1]),p}return l$.invert(f,c)},u}function Eot(e,t){return[e,t&1?90-Ea:s$]}function Cot(e,t){return[e,t&1?-90+Ea:-s$]}function Lot(e){return[e[0]*(1-Ea),e[1]]}function Pot(e){var t=[].concat(Gy(-180,180+e/2,e).map(Eot),Gy(180,-180-e/2,-e).map(Cot));return{type:"Polygon",coordinates:[e===180?t.map(Lot):t]}}function Iot(){var e=4,t=cu(Qve),r=t(e),a=r.stream;return r.lobes=function(n){return arguments.length?t(e=+n):e},r.stream=function(n){var o=r.rotate(),i=a(n),s=(r.rotate([0,0]),a(n));return r.rotate(o),i.sphere=function(){gh(Pot(180/e),s)},i},r.scale(239.75)}function ede(e){var t=1+e,r=Tr(1/t),a=Cn(r),n=2*Hr(kr/(o=kr+4*a*t)),o,i=.5*n*(t+Hr(e*(2+e))),s=e*e,l=t*t;function u(f,c){var h=1-Tr(c),v,p;if(h&&h<2){var d=Ia-c,g=25,m;do{var y=Tr(d),_=wr(d),S=a+$i(y,t-_),M=1+l-2*t*_;d-=m=(d-s*a-t*y+M*S-.5*h*o)/(2*t*y*S)}while(Xr(m)>eb&&--g>0);v=n*Hr(M),p=f*S/kr}else v=n*(e+h),p=f*a/kr;return[v*Tr(p),i-v*wr(p)]}return u.invert=function(f,c){var h=f*f+(c-=i)*c,v=(1+l-h/(n*n))/(2*t),p=Fu(v),d=Tr(p),g=a+$i(d,t-v);return[Cn(f/Hr(h))*kr/g,Cn(1-2*(p-s*a-t*d+(1+l-2*t*v)*g)/o)]},u}function Dot(){var e=1,t=cu(ede),r=t(e);return r.ratio=function(a){return arguments.length?t(e=+a):e},r.scale(167.774).center([0,18.67])}var cP=.7109889596207567,Mw=.0528035274542;function hP(e,t){return t>-cP?(e=qy(e,t),e[1]+=Mw,e):hm(e,t)}hP.invert=function(e,t){return t>-cP?qy.invert(e,t-Mw):hm.invert(e,t)};function Rot(){return hn(hP).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function vP(e,t){return Xr(t)>cP?(e=qy(e,t),e[1]-=t>0?Mw:-Mw,e):hm(e,t)}vP.invert=function(e,t){return Xr(t)>cP?qy.invert(e,t+(t>0?Mw:-Mw)):hm.invert(e,t)};function zot(){return hn(vP).scale(152.63)}function tde(e,t,r,a){var n=Hr(4*kr/(2*r+(1+e-t/2)*Tr(2*r)+(e+t)/2*Tr(4*r)+t/2*Tr(6*r))),o=Hr(a*Tr(r)*Hr((1+e*wr(2*r)+t*wr(4*r))/(1+e+t))),i=r*l(1);function s(c){return Hr(1+e*wr(2*c)+t*wr(4*c))}function l(c){var h=c*r;return(2*h+(1+e-t/2)*Tr(2*h)+(e+t)/2*Tr(4*h)+t/2*Tr(6*h))/r}function u(c){return s(c)*Tr(c)}var f=function(c,h){var v=r*tP(l,i*Tr(h)/r,h/kr);isNaN(v)&&(v=r*di(h));var p=n*s(v);return[p*o*c/kr*wr(v),p/o*Tr(v)]};return f.invert=function(c,h){var v=tP(u,h*o/n);return[c*kr/(wr(v)*n*o*s(v)),Cn(r*l(v/r)/i)]},r===0&&(n=Hr(a/kr),f=function(c,h){return[c*n,Tr(h)/n]},f.invert=function(c,h){return[c/n,Cn(h*n)]}),f}function Fot(){var e=1,t=0,r=45*Ai,a=2,n=cu(tde),o=n(e,t,r,a);return o.a=function(i){return arguments.length?n(e=+i,t,r,a):e},o.b=function(i){return arguments.length?n(e,t=+i,r,a):t},o.psiMax=function(i){return arguments.length?n(e,t,r=+i*Ai,a):r*Ui},o.ratio=function(i){return arguments.length?n(e,t,r,a=+i):a},o.scale(180.739)}function u$(e,t,r,a,n,o,i,s,l,u,f){if(f.nanEncountered)return NaN;var c,h,v,p,d,g,m,y,_,S;if(c=r-t,h=e(t+c*.25),v=e(r-c*.25),isNaN(h)){f.nanEncountered=!0;return}if(isNaN(v)){f.nanEncountered=!0;return}return p=c*(a+4*h+n)/12,d=c*(n+4*v+o)/12,g=p+d,S=(g-i)/15,u>l?(f.maxDepthCount++,g+S):Math.abs(S)<s?g+S:(m=t+c*.5,y=u$(e,t,m,a,h,n,p,s*.5,l,u+1,f),isNaN(y)?(f.nanEncountered=!0,NaN):(_=u$(e,m,r,n,v,o,d,s*.5,l,u+1,f),isNaN(_)?(f.nanEncountered=!0,NaN):y+_))}function Oot(e,t,r,a,n){var o={maxDepthCount:0,nanEncountered:!1};a===void 0&&(a=1e-8),n===void 0&&(n=20);var i=e(t),s=e(.5*(t+r)),l=e(r),u=(i+4*s+l)*(r-t)/6,f=u$(e,t,r,i,s,l,u,a,n,1,o);return f}function rde(e,t,r){function a(v){return e+(1-e)*US(1-US(v,t),1/t)}function n(v){return Oot(a,0,v,1e-4)}for(var o=1/n(1),i=1e3,s=(1+1e-8)*o,l=[],u=0;u<=i;u++)l.push(n(u/i)*s);function f(v){var p=0,d=i,g=i>>1;do l[g]>v?d=g:p=g,g=p+d>>1;while(g>p);var m=l[g+1]-l[g];return m&&(m=(v-l[g+1])/m),(g+1+m)/i}var c=2*f(1)/kr*o/r,h=function(v,p){var d=f(Xr(Tr(p))),g=a(d)*v;return d/=c,[g,p>=0?d:-d]};return h.invert=function(v,p){var d;return p*=c,Xr(p)<1&&(d=di(p)*Cn(n(Xr(p))*o)),[v/a(Xr(p)),d]},h}function Not(){var e=0,t=2.5,r=1.183136,a=cu(rde),n=a(e,t,r);return n.alpha=function(o){return arguments.length?a(e=+o,t,r):e},n.k=function(o){return arguments.length?a(e,t=+o,r):t},n.gamma=function(o){return arguments.length?a(e,t,r=+o):r},n.scale(152.63)}function Bot(e,t){return Xr(e[0]-t[0])<Ea&&Xr(e[1]-t[1])<Ea}function ade(e,t){for(var r=-1,a=e.length,n=e[0],o,i,s,l=[];++r<a;){o=e[r],i=(o[0]-n[0])/t,s=(o[1]-n[1])/t;for(var u=0;u<t;++u)l.push([n[0]+u*i,n[1]+u*s]);n=o}return l.push(o),l}function $ot(e){var t=[],r,a,n,o,i,s,l,u=e[0].length;for(l=0;l<u;++l)r=e[0][l],a=r[0][0],n=r[0][1],o=r[1][1],i=r[2][0],s=r[2][1],t.push(ade([[a+Ea,n+Ea],[a+Ea,o-Ea],[i-Ea,o-Ea],[i-Ea,s+Ea]],30));for(l=e[1].length-1;l>=0;--l)r=e[1][l],a=r[0][0],n=r[0][1],o=r[1][1],i=r[2][0],s=r[2][1],t.push(ade([[i-Ea,s-Ea],[i-Ea,o+Ea],[a+Ea,o+Ea],[a+Ea,n-Ea]],30));return{type:"Polygon",coordinates:[pB(t)]}}function Yy(e,t,r){var a,n;function o(l,u){for(var f=u<0?-1:1,c=t[+(u<0)],h=0,v=c.length-1;h<v&&l>c[h][2][0];++h);var p=e(l-c[h][1][0],u);return p[0]+=e(c[h][1][0],f*u>f*c[h][0][1]?c[h][0][1]:u)[0],p}r?o.invert=r(o):e.invert&&(o.invert=function(l,u){for(var f=n[+(u<0)],c=t[+(u<0)],h=0,v=f.length;h<v;++h){var p=f[h];if(p[0][0]<=l&&l<p[1][0]&&p[0][1]<=u&&u<p[1][1]){var d=e.invert(l-e(c[h][1][0],0)[0],u);return d[0]+=c[h][1][0],Bot(o(d[0],d[1]),[l,u])?d:null}}});var i=hn(o),s=i.stream;return i.stream=function(l){var u=i.rotate(),f=s(l),c=(i.rotate([0,0]),s(l));return i.rotate(u),f.sphere=function(){gh(a,c)},f},i.lobes=function(l){return arguments.length?(a=$ot(l),t=l.map(function(u){return u.map(function(f){return[[f[0][0]*Ai,f[0][1]*Ai],[f[1][0]*Ai,f[1][1]*Ai],[f[2][0]*Ai,f[2][1]*Ai]]})}),n=t.map(function(u){return u.map(function(f){var c=e(f[0][0],f[0][1])[0],h=e(f[2][0],f[2][1])[0],v=e(f[1][0],f[0][1])[1],p=e(f[1][0],f[1][1])[1],d;return v>p&&(d=v,v=p,p=d),[[c,v],[h,p]]})}),i):t.map(function(u){return u.map(function(f){return[[f[0][0]*Ui,f[0][1]*Ui],[f[1][0]*Ui,f[1][1]*Ui],[f[2][0]*Ui,f[2][1]*Ui]]})})},t!=null&&i.lobes(t),i}var Uot=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Hot(){return Yy(aP,Uot).scale(160.857)}var Got=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Vot(){return Yy(vP,Got).scale(152.63)}var jot=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function qot(){return Yy(qy,jot).scale(169.529)}var Yot=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Wot(){return Yy(qy,Yot).scale(169.529).rotate([20,0])}var Xot=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Zot(){return Yy(hP,Xot,VB).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Kot=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Jot(){return Yy(hm,Kot).scale(152.63).rotate([-20,0])}function f$(e,t){return[3/dp*e*Hr(kr*kr/3-t*t),t]}f$.invert=function(e,t){return[dp/3*e/Hr(kr*kr/3-t*t),t]};function Qot(){return hn(f$).scale(158.837)}function nde(e){function t(r,a){if(Xr(Xr(a)-Ia)<Ea)return[0,a<0?-2:2];var n=Tr(a),o=US((1+n)/(1-n),e/2),i=.5*(o+1/o)+wr(r*=e);return[2*Tr(r)/i,(o-1/o)/i]}return t.invert=function(r,a){var n=Xr(a);if(Xr(n-2)<Ea)return r?null:[0,di(a)*Ia];if(n>2)return null;r/=2,a/=2;var o=r*r,i=a*a,s=2*a/(1+o+i);return s=US((1+s)/(1-s),1/e),[$i(2*r,1-o-i)/e,Cn((s-1)/(s+1))]},t}function est(){var e=.5,t=cu(nde),r=t(e);return r.spacing=function(a){return arguments.length?t(e=+a):e},r.scale(124.75)}var c$=kr/Co;function h$(e,t){return[e*(1+Hr(wr(t)))/2,t/(wr(t/2)*wr(e/6))]}h$.invert=function(e,t){var r=Xr(e),a=Xr(t),n=Ea,o=Ia;a<c$?o*=a/c$:n+=6*Fu(c$/a);for(var i=0;i<25;i++){var s=Tr(o),l=Hr(wr(o)),u=Tr(o/2),f=wr(o/2),c=Tr(n/6),h=wr(n/6),v=.5*n*(1+l)-r,p=o/(f*h)-a,d=l?-.25*n*s/l:0,g=.5*(1+l),m=(1+.5*o*u/f)/(f*h),y=o/f*(c/6)/(h*h),_=d*y-m*g,S=(v*y-p*g)/_,M=(p*d-v*m)/_;if(o-=S,n-=M,Xr(S)<Ea&&Xr(M)<Ea)break}return[e<0?-n:n,t<0?-o:o]};function tst(){return hn(h$).scale(97.2672)}function v$(e,t){var r=e*e,a=t*t;return[e*(.975534+a*(-.119161+r*-.0143059+a*-.0547009)),t*(1.00384+r*(.0802894+a*-.02855+r*199025e-9)+a*(.0998909+a*-.0491032))]}v$.invert=function(e,t){var r=di(e)*kr,a=t/2,n=50;do{var o=r*r,i=a*a,s=r*a,l=r*(.975534+i*(-.119161+o*-.0143059+i*-.0547009))-e,u=a*(1.00384+o*(.0802894+i*-.02855+o*199025e-9)+i*(.0998909+i*-.0491032))-t,f=.975534-i*(.119161+3*o*.0143059+i*.0547009),c=-s*(2*.119161+4*.0547009*i+2*.0143059*o),h=s*(2*.0802894+4*199025e-9*o+2*-.02855*i),v=1.00384+o*(.0802894+199025e-9*o)+i*(3*(.0998909-.02855*o)-5*.0491032*i),p=c*h-v*f,d=(u*c-l*v)/p,g=(l*h-u*f)/p;r-=d,a-=g}while((Xr(d)>Ea||Xr(g)>Ea)&&--n>0);return n&&[r,a]};function rst(){return hn(v$).scale(139.98)}function d$(e,t){return[Tr(e)/wr(t),ci(t)*wr(e)]}d$.invert=function(e,t){var r=e*e,a=t*t,n=a+1,o=r+n,i=e?Xv*Hr((o-Hr(o*o-4*r))/r):1/Hr(n);return[Cn(e*i),di(t)*Fu(i)]};function ast(){return hn(d$).scale(144.049).clipAngle(90-.001)}function ide(e){var t=wr(e),r=ci(xh+e/2);function a(n,o){var i=o-e,s=Xr(i)<Ea?n*t:Xr(s=xh+o/2)<Ea||Xr(Xr(s)-Ia)<Ea?0:n*i/hu(ci(s)/r);return[s,i]}return a.invert=function(n,o){var i,s=o+e;return[Xr(o)<Ea?n/t:Xr(i=xh+s/2)<Ea||Xr(Xr(i)-Ia)<Ea?0:n*hu(ci(i)/r)/o,s]},a}function nst(){return Sw(ide).parallel(40).scale(158.837)}function p$(e,t){return[e,1.25*hu(ci(xh+.4*t))]}p$.invert=function(e,t){return[e,2.5*Js(b0(.8*t))-.625*kr]};function ist(){return hn(p$).scale(108.318)}function ode(e){var t=e.length-1;function r(a,n){for(var o=wr(n),i=2/(1+o*wr(a)),s=i*o*Tr(a),l=i*Tr(n),u=t,f=e[u],c=f[0],h=f[1],v;--u>=0;)f=e[u],c=f[0]+s*(v=c)-l*h,h=f[1]+s*h+l*v;return c=s*(v=c)-l*h,h=s*h+l*v,[c,h]}return r.invert=function(a,n){var o=20,i=a,s=n;do{for(var l=t,u=e[l],f=u[0],c=u[1],h=0,v=0,p;--l>=0;)u=e[l],h=f+i*(p=h)-s*v,v=c+i*v+s*p,f=u[0]+i*(p=f)-s*c,c=u[1]+i*c+s*p;h=f+i*(p=h)-s*v,v=c+i*v+s*p,f=i*(p=f)-s*c-a,c=i*c+s*p-n;var d=h*h+v*v,g,m;i-=g=(f*h+c*v)/d,s-=m=(c*h-f*v)/d}while(Xr(g)+Xr(m)>Ea*Ea&&--o>0);if(o){var y=Hr(i*i+s*s),_=2*Js(y*.5),S=Tr(_);return[$i(i*S,y*wr(_)),y?Cn(s*S/y):0]}},r}var ost=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],sst=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],lst=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ust=[[.9245,0],[0,0],[.01943,0]],fst=[[.721316,0],[0,0],[-.00881625,-.00617325]];function cst(){return kw(ost,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function hst(){return kw(sst,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function vst(){return kw(lst,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function dst(){return kw(ust,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function pst(){return kw(fst,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function kw(e,t){var r=hn(ode(e)).rotate(t).clipAngle(90),a=yw(t),n=r.center;return delete r.rotate,r.center=function(o){return arguments.length?n(a(o)):a.invert(n())},r}var dP=Hr(6),pP=Hr(7);function g$(e,t){var r=Cn(7*Tr(t)/(3*dP));return[dP*e*(2*wr(2*r/3)-1)/pP,9*Tr(r/3)/pP]}g$.invert=function(e,t){var r=3*Cn(t*pP/9);return[e*pP/(dP*(2*wr(2*r/3)-1)),Cn(Tr(r)*3*dP/7)]};function gst(){return hn(g$).scale(164.859)}function m$(e,t){for(var r=(1+Xv)*Tr(t),a=t,n=0,o;n<25&&(a-=o=(Tr(a/2)+Tr(a)-r)/(.5*wr(a/2)+wr(a)),!(Xr(o)<Ea));n++);return[e*(1+2*wr(a)/wr(a/2))/(3*Co),2*Hr(3)*Tr(a/2)/Hr(2+Co)]}m$.invert=function(e,t){var r=t*Hr(2+Co)/(2*Hr(3)),a=2*Cn(r);return[3*Co*e/(1+2*wr(a)/wr(a/2)),Cn((r+Tr(a))/(1+Xv))]};function mst(){return hn(m$).scale(188.209)}function y$(e,t){for(var r=Hr(6/(4+kr)),a=(1+kr/4)*Tr(t),n=t/2,o=0,i;o<25&&(n-=i=(n/2+Tr(n)-a)/(.5+wr(n)),!(Xr(i)<Ea));o++);return[r*(.5+wr(n))*e/1.5,r*n]}y$.invert=function(e,t){var r=Hr(6/(4+kr)),a=t/r;return Xr(Xr(a)-Ia)<Ea&&(a=a<0?-Ia:Ia),[1.5*e/(r*(.5+wr(a))),Cn((a/2+Tr(a))/(1+kr/4))]};function yst(){return hn(y$).scale(166.518)}function x$(e,t){var r=t*t,a=r*r,n=r*a;return[e*(.84719-.13063*r+n*n*(-.04515+.05494*r-.02326*a+.00331*n)),t*(1.01183+a*a*(-.02625+.01926*r-.00396*a))]}x$.invert=function(e,t){var r=t,a=25,n,o,i,s;do o=r*r,i=o*o,r-=n=(r*(1.01183+i*i*(-.02625+.01926*o-.00396*i))-t)/(1.01183+i*i*(9*-.02625+11*.01926*o+13*-.00396*i));while(Xr(n)>eb&&--a>0);return o=r*r,i=o*o,s=o*i,[e/(.84719-.13063*o+s*s*(-.04515+.05494*o-.02326*i+.00331*s)),r]};function xst(){return hn(x$).scale(175.295)}function b$(e,t){return[e*(1+wr(t))/2,2*(t-ci(t/2))]}b$.invert=function(e,t){for(var r=t/2,a=0,n=1/0;a<10&&Xr(n)>Ea;++a){var o=wr(t/2);t-=n=(t-ci(t/2)-r)/(1-.5/(o*o))}return[2*e/(1+wr(t)),t]};function bst(){return hn(b$).scale(152.63)}var _st=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function wst(){return Yy(eP(1/0),_st).rotate([20,0]).scale(152.63)}function _$(e,t){var r=Tr(t),a=wr(t),n=di(e);if(e===0||Xr(t)===Ia)return[0,t];if(t===0)return[e,0];if(Xr(e)===Ia)return[e*a,Ia*r];var o=kr/(2*e)-2*e/kr,i=2*t/kr,s=(1-i*i)/(r-i),l=o*o,u=s*s,f=1+l/u,c=1+u/l,h=(o*r/s-o/2)/f,v=(u*r/l+s/2)/c,p=h*h+a*a/f,d=v*v-(u*r*r/l+s*r-1)/c;return[Ia*(h+Hr(p)*n),Ia*(v+Hr(d<0?0:d)*di(-t*o)*n)]}_$.invert=function(e,t){e/=Ia,t/=Ia;var r=e*e,a=t*t,n=r+a,o=kr*kr;return[e?(n-1+Hr((1-n)*(1-n)+4*r))/(2*e)*Ia:0,tP(function(i){return n*(kr*Tr(i)-2*i)*kr+4*i*i*(t-Tr(i))+2*kr*i-o*t},0)]};function Tst(){return hn(_$).scale(127.267)}var w$=1.0148,T$=.23185,A$=-.14499,S$=.02406,Ast=w$,Sst=5*T$,Mst=7*A$,kst=9*S$,gP=1.790857183;function M$(e,t){var r=t*t;return[e,t*(w$+r*r*(T$+r*(A$+S$*r)))]}M$.invert=function(e,t){t>gP?t=gP:t<-gP&&(t=-gP);var r=t,a;do{var n=r*r;r-=a=(r*(w$+n*n*(T$+n*(A$+S$*n)))-t)/(Ast+n*n*(Sst+n*(Mst+kst*n)))}while(Xr(a)>Ea);return[e,r]};function Est(){return hn(M$).scale(139.319)}function k$(e,t){if(Xr(t)<Ea)return[e,0];var r=ci(t),a=e*Tr(t);return[Tr(a)/r,t+(1-wr(a))/r]}k$.invert=function(e,t){if(Xr(t)<Ea)return[e,0];var r=e*e+t*t,a=t*.5,n=10,o;do{var i=ci(a),s=1/wr(a),l=r-2*t*a+a*a;a-=o=(i*l+2*(a-t))/(2+l*s*s+2*(a-t)*i)}while(Xr(o)>Ea&&--n>0);return i=ci(a),[(Xr(t)<Xr(a+1/i)?Cn(e*i):di(t)*di(e)*(Fu(Xr(e*i))+Ia))/Tr(a),a]};function Cst(){return hn(k$).scale(103.74)}function Lst(e,t){var r=sde(e[1],e[0]),a=sde(t[1],t[0]),n=Ist(r,a),o=lde(r)/lde(a);return mP([1,0,e[0][0],0,1,e[0][1]],mP([o,0,0,0,o,0],mP([wr(n),Tr(n),0,-Tr(n),wr(n),0],[1,0,-t[0][0],0,1,-t[0][1]])))}function Pst(e){var t=1/(e[0]*e[4]-e[1]*e[3]);return[t*e[4],-t*e[1],t*(e[1]*e[5]-e[2]*e[4]),-t*e[3],t*e[0],t*(e[2]*e[3]-e[0]*e[5])]}function mP(e,t){return[e[0]*t[0]+e[1]*t[3],e[0]*t[1]+e[1]*t[4],e[0]*t[2]+e[1]*t[5]+e[2],e[3]*t[0]+e[4]*t[3],e[3]*t[1]+e[4]*t[4],e[3]*t[2]+e[4]*t[5]+e[5]]}function sde(e,t){return[e[0]-t[0],e[1]-t[1]]}function lde(e){return Hr(e[0]*e[0]+e[1]*e[1])}function Ist(e,t){return $i(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])}function yP(e,t,r){a(e,{transform:null});function a(u,f){if(u.edges=Rst(u.face),f.face){var c=u.shared=Dst(u.face,f.face),h=Lst(c.map(f.project),c.map(u.project));u.transform=f.transform?mP(f.transform,h):h;for(var v=f.edges,p=0,d=v.length;p<d;++p)Wy(c[0],v[p][1])&&Wy(c[1],v[p][0])&&(v[p]=u),Wy(c[0],v[p][0])&&Wy(c[1],v[p][1])&&(v[p]=u);for(v=u.edges,p=0,d=v.length;p<d;++p)Wy(c[0],v[p][0])&&Wy(c[1],v[p][1])&&(v[p]=f),Wy(c[0],v[p][1])&&Wy(c[1],v[p][0])&&(v[p]=f)}else u.transform=f.transform;return u.children&&u.children.forEach(function(g){a(g,u)}),u}function n(u,f){var c=t(u,f),h=c.project([u*Ui,f*Ui]),v;return(v=c.transform)?[v[0]*h[0]+v[1]*h[1]+v[2],-(v[3]*h[0]+v[4]*h[1]+v[5])]:(h[1]=-h[1],h)}fde(e)&&(n.invert=function(u,f){var c=o(e,[u,-f]);return c&&(c[0]*=Ai,c[1]*=Ai,c)});function o(u,f){var c=u.project.invert,h=u.transform,v=f;if(h&&(h=Pst(h),v=[h[0]*v[0]+h[1]*v[1]+h[2],h[3]*v[0]+h[4]*v[1]+h[5]]),c&&u===i(p=c(v)))return p;for(var p,d=u.children,g=0,m=d&&d.length;g<m;++g)if(p=o(d[g],f))return p}function i(u){return t(u[0]*Ai,u[1]*Ai)}var s=hn(n),l=s.stream;return s.stream=function(u){var f=s.rotate(),c=l(u),h=(s.rotate([0,0]),l(u));return s.rotate(f),c.sphere=function(){h.polygonStart(),h.lineStart(),ude(h,e),h.lineEnd(),h.polygonEnd()},c},s.angle(r==null?-30:r*Ui)}function ude(e,t,r){var a,n=t.edges,o=n.length,i,s={type:"MultiPoint",coordinates:t.face},l=t.face.filter(function(d){return Xr(d[1])!==90}),u=bhe({type:"MultiPoint",coordinates:l}),f=!1,c=-1,h=u[1][0]-u[0][0],v=h===180||h===360?[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]:gw(s);if(r)for(;++c<o&&n[c]!==r;);++c;for(var p=0;p<o;++p)i=n[(p+c)%o],Array.isArray(i)?(f||(e.point((a=B4(i[0],v)(Ea))[0],a[1]),f=!0),e.point((a=B4(i[1],v)(Ea))[0],a[1])):(f=!1,i!==r&&ude(e,i,t))}function Wy(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function Dst(e,t){for(var r,a,n=e.length,o=null,i=0;i<n;++i){r=e[i];for(var s=t.length;--s>=0;)if(a=t[s],r[0]===a[0]&&r[1]===a[1]){if(o)return[o,r];o=r}}}function Rst(e){for(var t=e.length,r=[],a=e[t-1],n=0;n<t;++n)r.push([a,a=e[n]]);return r}function fde(e){return e.project.invert||e.children&&e.children.some(fde)}var zst=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],xP=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(e){return e.map(function(t){return zst[t]})});function Fst(e){e=e||function(r){var a=gw({type:"MultiPoint",coordinates:r});return OB().scale(1).translate([0,0]).rotate([-a[0],-a[1]])};var t=xP.map(function(r){return{face:r,project:e(r)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,a){var n=t[r];n&&(n.children||(n.children=[])).push(t[a])}),yP(t[0],function(r,a){return t[r<-kr/2?a<0?6:4:r<0?a<0?2:0:r<kr/2?a<0?3:1:a<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var cde=2/Hr(3);function hde(e,t){var r=_0(e,t);return[r[0]*cde,r[1]]}hde.invert=function(e,t){return _0.invert(e/cde,t)};function Ost(e){e=e||function(r){var a=gw({type:"MultiPoint",coordinates:r});return hn(hde).translate([0,0]).scale(1).rotate(a[1]>0?[-a[0],0]:[180-a[0],180])};var t=xP.map(function(r){return{face:r,project:e(r)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,a){var n=t[r];n&&(n.children||(n.children=[])).push(t[a])}),yP(t[0],function(r,a){return t[r<-kr/2?a<0?6:4:r<0?a<0?2:0:r<kr/2?a<0?3:1:a<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Nst(e){e=e||function(i){var s=i.length===6?gw({type:"MultiPoint",coordinates:i}):i[0];return OB().scale(1).translate([0,0]).rotate([-s[0],-s[1]])};var t=xP.map(function(i){for(var s=i.map(C$),l=s.length,u=s[l-1],f,c=[],h=0;h<l;++h)f=s[h],c.push(vde([u[0]*.9486832980505138+f[0]*.31622776601683794,u[1]*.9486832980505138+f[1]*.31622776601683794,u[2]*.9486832980505138+f[2]*.31622776601683794]),vde([f[0]*.9486832980505138+u[0]*.31622776601683794,f[1]*.9486832980505138+u[1]*.31622776601683794,f[2]*.9486832980505138+u[2]*.31622776601683794])),u=f;return c}),r=[],a=[-1,0,0,1,0,1,4,5];t.forEach(function(i,s){for(var l=xP[s],u=l.length,f=r[s]=[],c=0;c<u;++c)t.push([l[c],i[(c*2+2)%(2*u)],i[(c*2+1)%(2*u)]]),a.push(s),f.push(Bst(C$(i[(c*2+2)%(2*u)]),C$(i[(c*2+1)%(2*u)])))});var n=t.map(function(i){return{project:e(i),face:i}});a.forEach(function(i,s){var l=n[i];l&&(l.children||(l.children=[])).push(n[s])});function o(i,s){var l=wr(s),u=[l*wr(i),l*Tr(i),Tr(s)],f=i<-kr/2?s<0?6:4:i<0?s<0?2:0:i<kr/2?s<0?3:1:s<0?7:5,c=r[f];return n[E$(c[0],u)<0?8+3*f:E$(c[1],u)<0?8+3*f+1:E$(c[2],u)<0?8+3*f+2:f]}return yP(n[0],o).angle(-30).scale(110.625).center([0,45])}function E$(e,t){for(var r=0,a=e.length,n=0;r<a;++r)n+=e[r]*t[r];return n}function Bst(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vde(e){return[$i(e[1],e[0])*Ui,Cn(cm(-1,yh(1,e[2])))*Ui]}function C$(e){var t=e[0]*Ai,r=e[1]*Ai,a=wr(r);return[a*wr(t),a*Tr(t),Tr(r)]}function bP(){}function $st(e){if((r=e.length)<4)return!1;for(var t=0,r,a=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)a+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return a<=0}function Ust(e,t){for(var r=t[0],a=t[1],n=!1,o=0,i=e.length,s=i-1;o<i;s=o++){var l=e[o],u=l[0],f=l[1],c=e[s],h=c[0],v=c[1];f>a^v>a&&r<(h-u)*(a-f)/(v-f)+u&&(n=!n)}return n}function Hst(e,t){var r=t.stream,a;if(!r)throw new Error("invalid projection");switch(e&&e.type){case"Feature":a=dde;break;case"FeatureCollection":a=Gst;break;default:a=L$;break}return a(e,r)}function Gst(e,t){return{type:"FeatureCollection",features:e.features.map(function(r){return dde(r,t)})}}function dde(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:L$(e.geometry,t)}}function Vst(e,t){return{type:"GeometryCollection",geometries:e.geometries.map(function(r){return L$(r,t)})}}function L$(e,t){if(!e)return null;if(e.type==="GeometryCollection")return Vst(e,t);var r;switch(e.type){case"Point":r=pde;break;case"MultiPoint":r=pde;break;case"LineString":r=gde;break;case"MultiLineString":r=gde;break;case"Polygon":r=P$;break;case"MultiPolygon":r=P$;break;case"Sphere":r=P$;break;default:return null}return gh(e,t(r)),r.result()}var Of=[],w0=[],pde={point:function(e,t){Of.push([e,t])},result:function(){var e=Of.length?Of.length<2?{type:"Point",coordinates:Of[0]}:{type:"MultiPoint",coordinates:Of}:null;return Of=[],e}},gde={lineStart:bP,point:function(e,t){Of.push([e,t])},lineEnd:function(){Of.length&&(w0.push(Of),Of=[])},result:function(){var e=w0.length?w0.length<2?{type:"LineString",coordinates:w0[0]}:{type:"MultiLineString",coordinates:w0}:null;return w0=[],e}},P$={polygonStart:bP,lineStart:bP,point:function(e,t){Of.push([e,t])},lineEnd:function(){var e=Of.length;if(e){do Of.push(Of[0].slice());while(++e<4);w0.push(Of),Of=[]}},polygonEnd:bP,result:function(){if(!w0.length)return null;var e=[],t=[];return w0.forEach(function(r){$st(r)?e.push([r]):t.push(r)}),t.forEach(function(r){var a=r[0];e.some(function(n){if(Ust(n[0],a))return n.push(r),!0})||e.push([r])}),w0=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}};function I$(e){var t=e(Ia,0)[0]-e(-Ia,0)[0];function r(a,n){var o=Xr(a)<Ia,i=e(o?a:a>0?a-kr:a+kr,n),s=(i[0]-i[1])*Xv,l=(i[0]+i[1])*Xv;if(o)return[s,l];var u=t*Xv,f=s>0^l>0?-1:1;return[f*s-di(l)*u,f*l-di(s)*u]}return e.invert&&(r.invert=function(a,n){var o=(a+n)*Xv,i=(n-a)*Xv,s=Xr(o)<.5*t&&Xr(i)<.5*t;if(!s){var l=t*Xv,u=o>0^i>0?-1:1,f=-u*a+(i>0?1:-1)*l,c=-u*n+(o>0?1:-1)*l;o=(-f-c)*Xv,i=(f-c)*Xv}var h=e.invert(o,i);return s||(h[0]+=o>0?kr:-kr),h}),hn(r).rotate([-90,-90,45]).clipAngle(180-.001)}function jst(){return I$(uP).scale(176.423)}function mde(){return I$(fP).scale(111.48)}function qst(e,t){if(!(0<=(t=+t)&&t<=20))throw new Error("invalid digits");function r(u){var f=u.length,c=2,h=new Array(f);for(h[0]=+u[0].toFixed(t),h[1]=+u[1].toFixed(t);c<f;)h[c]=u[c],++c;return h}function a(u){return u.map(r)}function n(u){for(var f=r(u[0]),c=[f],h=1;h<u.length;h++){var v=r(u[h]);(v.length>2||v[0]!=f[0]||v[1]!=f[1])&&(c.push(v),f=v)}return c.length===1&&u.length>1&&c.push(r(u[u.length-1])),c}function o(u){return u.map(n)}function i(u){if(u==null)return u;var f;switch(u.type){case"GeometryCollection":f={type:"GeometryCollection",geometries:u.geometries.map(i)};break;case"Point":f={type:"Point",coordinates:r(u.coordinates)};break;case"MultiPoint":f={type:u.type,coordinates:a(u.coordinates)};break;case"LineString":f={type:u.type,coordinates:n(u.coordinates)};break;case"MultiLineString":case"Polygon":f={type:u.type,coordinates:o(u.coordinates)};break;case"MultiPolygon":f={type:"MultiPolygon",coordinates:u.coordinates.map(o)};break;default:return u}return u.bbox!=null&&(f.bbox=u.bbox),f}function s(u){var f={type:"Feature",properties:u.properties,geometry:i(u.geometry)};return u.id!=null&&(f.id=u.id),u.bbox!=null&&(f.bbox=u.bbox),f}if(e!=null)switch(e.type){case"Feature":return s(e);case"FeatureCollection":{var l={type:"FeatureCollection",features:e.features.map(s)};return e.bbox!=null&&(l.bbox=e.bbox),l}default:return i(e)}return e}function yde(e){var t=Tr(e);function r(a,n){var o=t?ci(a*t/2)/t:a/2;if(!n)return[2*o,-e];var i=2*Js(o*Tr(n)),s=1/ci(n);return[Tr(i)*s,n+(1-wr(i))*s-e]}return r.invert=function(a,n){if(Xr(n+=e)<Ea)return[t?2*Js(t*a/2)/t:a,0];var o=a*a+n*n,i=0,s=10,l;do{var u=ci(i),f=1/wr(i),c=o-2*n*i+i*i;i-=l=(u*c+2*(i-n))/(2+c*f*f+2*(i-n)*u)}while(Xr(l)>Ea&&--s>0);var h=a*(u=ci(i)),v=ci(Xr(n)<Xr(i+1/u)?Cn(h)*.5:Fu(h)*.5+kr/4)/Tr(i);return[t?2*Js(t*v)/t:2*v,i]},r}function Yst(){return Sw(yde).scale(131.215)}var nv=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];nv.forEach(function(e){e[1]*=1.0144});function D$(e,t){var r=yh(18,Xr(t)*36/kr),a=Aw(r),n=r-a,o=(c=nv[a])[0],i=c[1],s=(c=nv[++a])[0],l=c[1],u=(c=nv[yh(19,++a)])[0],f=c[1],c;return[e*(s+n*(u-o)/2+n*n*(u-2*s+o)/2),(t>0?Ia:-Ia)*(l+n*(f-i)/2+n*n*(f-2*l+i)/2)]}D$.invert=function(e,t){var r=t/Ia,a=r*90,n=yh(18,Xr(a/5)),o=cm(0,Aw(n));do{var i=nv[o][1],s=nv[o+1][1],l=nv[yh(19,o+2)][1],u=l-i,f=l-2*s+i,c=2*(Xr(r)-s)/u,h=f/u,v=c*(1-h*c*(1-2*h*c));if(v>=0||o===1){a=(t>=0?5:-5)*(v+n);var p=50,d;do n=yh(18,Xr(a)/5),o=Aw(n),v=n-o,i=nv[o][1],s=nv[o+1][1],l=nv[yh(19,o+2)][1],a-=(d=(t>=0?Ia:-Ia)*(s+v*(l-i)/2+v*v*(l-2*s+i)/2)-t)*Ui;while(Xr(d)>eb&&--p>0);break}}while(--o>=0);var g=nv[o][0],m=nv[o+1][0],y=nv[yh(19,o+2)][0];return[e/(m+v*(y-g)/2+v*v*(y-2*m+g)/2),a*Ai]};function Wst(){return hn(D$).scale(152.63)}function Xst(e){function t(r,a){var n=wr(a),o=(e-1)/(e-n*wr(r));return[o*n*Tr(r),o*Tr(a)]}return t.invert=function(r,a){var n=r*r+a*a,o=Hr(n),i=(e-Hr(1-n*(e+1)/(e-1)))/((e-1)/o+o/(e-1));return[$i(r*i,o*Hr(1-i*i)),o?Cn(a*i/o):0]},t}function xde(e,t){var r=Xst(e);if(!t)return r;var a=wr(t),n=Tr(t);function o(i,s){var l=r(i,s),u=l[1],f=u*n/(e-1)+a;return[l[0]*a/f,u/f]}return o.invert=function(i,s){var l=(e-1)/(e-1-s*n);return r.invert(l*i,l*s*a)},o}function Zst(){var e=2,t=0,r=cu(xde),a=r(e,t);return a.distance=function(n){return arguments.length?r(e=+n,t):e},a.tilt=function(n){return arguments.length?r(e,t=n*Ai):t*Ui},a.scale(432.147).clipAngle(Fu(1/e)*Ui-1e-6)}var _P=1e-4,bde=1e4,R$=-180,z$=R$+_P,_de=180,F$=_de-_P,O$=-90,N$=O$+_P,B$=90,$$=B$-_P;function Kst(e){return e.length>0}function Jst(e){return Math.floor(e*bde)/bde}function wde(e){return e===O$||e===B$?[0,e]:[R$,Jst(e)]}function U$(e){var t=e[0],r=e[1],a=!1;return t<=z$?(t=R$,a=!0):t>=F$&&(t=_de,a=!0),r<=N$?(r=O$,a=!0):r>=$$&&(r=B$,a=!0),a?[t,r]:e}function Tde(e){return e.map(U$)}function Ade(e,t,r){for(var a=0,n=e.length;a<n;++a){var o=e[a].slice();r.push({index:-1,polygon:t,ring:o});for(var i=0,s=o.length;i<s;++i){var l=o[i],u=l[0],f=l[1];if(u<=z$||u>=F$||f<=N$||f>=$$){o[i]=U$(l);for(var c=i+1;c<s;++c){var h=o[c],v=h[0],p=h[1];if(v>z$&&v<F$&&p>N$&&p<$$)break}if(c===i+1)continue;if(i){var d={index:-1,polygon:t,ring:o.slice(0,i+1)};d.ring[d.ring.length-1]=wde(f),r[r.length-1]=d}else r.pop();if(c>=s)break;r.push({index:-1,polygon:t,ring:o=o.slice(c-1)}),o[0]=wde(o[0][1]),i=-1,s=o.length}}}}function Sde(e){var t,r=e.length,a={},n={},o,i,s,l,u;for(t=0;t<r;++t){if(o=e[t],i=o.ring[0],l=o.ring[o.ring.length-1],i[0]===l[0]&&i[1]===l[1]){o.polygon.push(o.ring),e[t]=null;continue}o.index=t,a[i]=n[l]=o}for(t=0;t<r;++t)if(o=e[t],o){if(i=o.ring[0],l=o.ring[o.ring.length-1],s=n[i],u=a[l],delete a[i],delete n[l],i[0]===l[0]&&i[1]===l[1]){o.polygon.push(o.ring);continue}s?(delete n[i],delete a[s.ring[0]],s.ring.pop(),e[s.index]=null,o={index:-1,polygon:s.polygon,ring:s.ring.concat(o.ring)},s===u?o.polygon.push(o.ring):(o.index=r++,e.push(a[o.ring[0]]=n[o.ring[o.ring.length-1]]=o))):u?(delete a[l],delete n[u.ring[u.ring.length-1]],o.ring.pop(),o={index:r++,polygon:u.polygon,ring:o.ring.concat(u.ring)},e[u.index]=null,e.push(a[o.ring[0]]=n[o.ring[o.ring.length-1]]=o)):(o.ring.push(o.ring[0]),o.polygon.push(o.ring))}}function Mde(e){var t={type:"Feature",geometry:H$(e.geometry)};return e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox),e.properties!=null&&(t.properties=e.properties),t}function H$(e){if(e==null)return e;var t,r,a,n;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(H$)};break;case"Point":t={type:"Point",coordinates:U$(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:Tde(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map(Tde)};break;case"Polygon":{var o=[];Ade(e.coordinates,o,r=[]),Sde(r),t={type:"Polygon",coordinates:o};break}case"MultiPolygon":{r=[],a=-1,n=e.coordinates.length;for(var i=new Array(n);++a<n;)Ade(e.coordinates[a],i[a]=[],r);Sde(r),t={type:"MultiPolygon",coordinates:i.filter(Kst)};break}default:return e}return e.bbox!=null&&(t.bbox=e.bbox),t}function Qst(e){if(e==null)return e;switch(e.type){case"Feature":return Mde(e);case"FeatureCollection":{var t={type:"FeatureCollection",features:e.features.map(Mde)};return e.bbox!=null&&(t.bbox=e.bbox),t}default:return H$(e)}}function G$(e,t){var r=ci(t/2),a=Tr(xh*r);return[e*(.74482-.34588*a*a),1.70711*r]}G$.invert=function(e,t){var r=t/1.70711,a=Tr(xh*r);return[e/(.74482-.34588*a*a),2*Js(r)]};function elt(){return hn(G$).scale(146.153)}function kde(e,t,r){var a=B4(t,r),n=a(.5),o=yw([-n[0],-n[1]])(t),i=a.distance/2,s=-Cn(Tr(o[1]*Ai)/Tr(i)),l=[-n[0],-n[1],-(o[0]>0?kr-s:s)*Ui],u=hn(e(i)).rotate(l),f=yw(l),c=u.center;return delete u.rotate,u.center=function(h){return arguments.length?c(f(h)):f.invert(c())},u.clipAngle(90)}function Ede(e){var t=wr(e);function r(a,n){var o=$S(a,n);return o[0]*=t,o}return r.invert=function(a,n){return $S.invert(a/t,n)},r}function tlt(){return Cde([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Cde(e,t){return kde(Ede,e,t)}function Lde(e){if(!(e*=2))return jy;var t=-e/2,r=-t,a=e*e,n=ci(r),o=.5/Tr(r);function i(s,l){var u=Fu(wr(l)*wr(s-t)),f=Fu(wr(l)*wr(s-r)),c=l<0?-1:1;return u*=u,f*=f,[(u-f)/(2*e),c*Hr(4*a*f-(a-u+f)*(a-u+f))/(2*e)]}return i.invert=function(s,l){var u=l*l,f=wr(Hr(u+(h=s+t)*h)),c=wr(Hr(u+(h=s+r)*h)),h,v;return[$i(v=f-c,h=(f+c)*n),(l<0?-1:1)*Fu(Hr(h*h+v*v)*o)]},i}function rlt(){return Pde([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Pde(e,t){return kde(Lde,e,t)}function V$(e,t){if(Xr(t)<Ea)return[e,0];var r=Xr(t/Ia),a=Cn(r);if(Xr(e)<Ea||Xr(Xr(t)-Ia)<Ea)return[0,di(t)*kr*ci(a/2)];var n=wr(a),o=Xr(kr/e-e/kr)/2,i=o*o,s=n/(r+n-1),l=s*(2/r-1),u=l*l,f=u+i,c=s-u,h=i+s;return[di(e)*kr*(o*c+Hr(i*c*c-f*(s*s-u)))/f,di(t)*kr*(l*h-o*Hr((i+1)*f-h*h))/f]}V$.invert=function(e,t){if(Xr(t)<Ea)return[e,0];if(Xr(e)<Ea)return[0,Ia*Tr(2*Js(t/kr))];var r=(e/=kr)*e,a=(t/=kr)*t,n=r+a,o=n*n,i=-Xr(t)*(1+n),s=i-2*a+r,l=-2*i+1+2*a+o,u=a/l+(2*s*s*s/(l*l*l)-9*i*s/(l*l))/27,f=(i-s*s/(3*l))/l,c=2*Hr(-f/3),h=Fu(3*u/(f*c))/3;return[kr*(n-1+Hr(1+2*(r-a)+o))/(2*e),di(t)*kr*(-c*wr(h+kr/3)-s/(3*l))]};function alt(){return hn(V$).scale(79.4183)}function j$(e,t){if(Xr(t)<Ea)return[e,0];var r=Xr(t/Ia),a=Cn(r);if(Xr(e)<Ea||Xr(Xr(t)-Ia)<Ea)return[0,di(t)*kr*ci(a/2)];var n=wr(a),o=Xr(kr/e-e/kr)/2,i=o*o,s=n*(Hr(1+i)-o*n)/(1+i*r*r);return[di(e)*kr*s,di(t)*kr*Hr(1-s*(2*o+s))]}j$.invert=function(e,t){if(!e)return[0,Ia*Tr(2*Js(t/kr))];var r=Xr(e/kr),a=(1-r*r-(t/=kr)*t)/(2*r),n=a*a,o=Hr(n+1);return[di(e)*kr*(o-a),di(t)*Ia*Tr(2*$i(Hr((1-2*a*r)*(a+o)-r),Hr(o+a+r)))]};function nlt(){return hn(j$).scale(79.4183)}function q$(e,t){if(Xr(t)<Ea)return[e,0];var r=t/Ia,a=Cn(r);if(Xr(e)<Ea||Xr(Xr(t)-Ia)<Ea)return[0,kr*ci(a/2)];var n=(kr/e-e/kr)/2,o=r/(1+wr(a));return[kr*(di(e)*Hr(n*n+1-o*o)-n),kr*o]}q$.invert=function(e,t){if(!t)return[e,0];var r=t/kr,a=(kr*kr*(1-r*r)-e*e)/(2*kr*e);return[e?kr*(di(e)*Hr(a*a+1)-a):0,Ia*Tr(2*Js(r))]};function ilt(){return hn(q$).scale(79.4183)}function Y$(e,t){if(!t)return[e,0];var r=Xr(t);if(!e||r===Ia)return[0,t];var a=r/Ia,n=a*a,o=(8*a-n*(n+2)-5)/(2*n*(a-1)),i=o*o,s=a*o,l=n+i+2*s,u=a+3*o,f=e/Ia,c=f+1/f,h=di(Xr(e)-Ia)*Hr(c*c-4),v=h*h,p=l*(n+i*v-1)+(1-n)*(n*(u*u+4*i)+12*s*i+4*i*i),d=(h*(l+i-1)+2*Hr(p))/(4*l+v);return[di(e)*Ia*d,di(t)*Ia*Hr(1+h*Xr(d)-d*d)]}Y$.invert=function(e,t){var r;if(!e||!t)return[e,t];t/=kr;var a=di(e)*e/Ia,n=(a*a-1+4*t*t)/Xr(a),o=n*n,i=2*t,s=50;do{var l=i*i,u=(8*i-l*(l+2)-5)/(2*l*(i-1)),f=(3*i-l*i-10)/(2*l*i),c=u*u,h=i*u,v=i+u,p=v*v,d=i+3*u,g=p*(l+c*o-1)+(1-l)*(l*(d*d+4*c)+c*(12*h+4*c)),m=-2*v*(4*h*c+(1-4*l+3*l*l)*(1+f)+c*(-6+14*l-o+(-8+8*l-2*o)*f)+h*(-8+12*l+(-10+10*l-o)*f)),y=Hr(g),_=n*(p+c-1)+2*y-a*(4*p+o),S=n*(2*u*f+2*v*(1+f))+m/y-8*v*(n*(-1+c+p)+2*y)*(1+f)/(o+4*p);i-=r=_/S}while(r>Ea&&--s>0);return[di(e)*(Hr(n*n+4)+n)*kr/4,Ia*i]};function olt(){return hn(Y$).scale(127.16)}function slt(e,t,r,a,n){function o(i,s){var l=r*Tr(a*s),u=Hr(1-l*l),f=Hr(2/(1+u*wr(i*=n)));return[e*u*f*Tr(i),t*l*f]}return o.invert=function(i,s){var l=i/e,u=s/t,f=Hr(l*l+u*u),c=2*Cn(f/2);return[$i(i*ci(c),e*f)/n,f&&Cn(s*Tr(c)/(t*r*f))/a]},o}function Ide(e,t,r,a){var n=kr/3;e=cm(e,Ea),t=cm(t,Ea),e=yh(e,Ia),t=yh(t,kr-Ea),r=cm(r,0),r=yh(r,100-Ea),a=cm(a,Ea);var o=r/100+1,i=a/100,s=Fu(o*wr(n))/n,l=Tr(e)/Tr(s*Ia),u=t/kr,f=Hr(i*Tr(e/2)/Tr(t/2)),c=f/Hr(u*l*s),h=1/(f*Hr(u*l*s));return slt(c,h,l,s,u)}function Dde(){var e=65*Ai,t=60*Ai,r=20,a=200,n=cu(Ide),o=n(e,t,r,a);return o.poleline=function(i){return arguments.length?n(e=+i*Ai,t,r,a):e*Ui},o.parallels=function(i){return arguments.length?n(e,t=+i*Ai,r,a):t*Ui},o.inflation=function(i){return arguments.length?n(e,t,r=+i,a):r},o.ratio=function(i){return arguments.length?n(e,t,r,a=+i):a},o.scale(163.775)}function llt(){return Dde().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Rde=4*kr+3*Hr(3),zde=2*Hr(2*kr*Hr(3)/Rde),Fde=jB(zde*Hr(3)/kr,zde,Rde/6);function ult(){return hn(Fde).scale(176.84)}function W$(e,t){return[e*Hr(1-3*t*t/(kr*kr)),t]}W$.invert=function(e,t){return[e/Hr(1-3*t*t/(kr*kr)),t]};function flt(){return hn(W$).scale(152.63)}function X$(e,t){var r=wr(t),a=wr(e)*r,n=1-a,o=wr(e=$i(Tr(e)*r,-Tr(t))),i=Tr(e);return r=Hr(1-a*a),[i*r-o*n,-o*r-i*n]}X$.invert=function(e,t){var r=(e*e+t*t)/-2,a=Hr(-r*(2+r)),n=t*r+e*a,o=e*r-t*a,i=Hr(o*o+n*n);return[$i(a*n,i*(1+r)),i?-Cn(a*o/i):0]};function clt(){return hn(X$).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Z$(e,t){var r=J4(e,t);return[(r[0]+e/Ia)/2,(r[1]+t)/2]}Z$.invert=function(e,t){var r=e,a=t,n=25;do{var o=wr(a),i=Tr(a),s=Tr(2*a),l=i*i,u=o*o,f=Tr(r),c=wr(r/2),h=Tr(r/2),v=h*h,p=1-u*c*c,d=p?Fu(o*c)*Hr(g=1/p):g=0,g,m=.5*(2*d*o*h+r/Ia)-e,y=.5*(d*i+a)-t,_=.5*g*(u*v+d*o*c*l)+.5/Ia,S=g*(f*s/4-d*i*h),M=.125*g*(s*h-d*i*u*f),w=.5*g*(l*c+d*v*o)+.5,A=S*M-w*_,k=(y*S-m*w)/A,T=(m*M-y*_)/A;r-=k,a-=T}while((Xr(k)>Ea||Xr(T)>Ea)&&--n>0);return[r,a]};function hlt(){return hn(Z$).scale(158.837)}var vlt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",geoAiry:Dit,geoAiryRaw:Mve,geoAitoff:Rit,geoAitoffRaw:J4,geoArmadillo:zit,geoArmadilloRaw:kve,geoAugust:Fit,geoAugustRaw:Q4,geoBaker:Nit,geoBakerRaw:GB,geoBerghaus:Bit,geoBerghausRaw:Eve,geoBertin1953:Uit,geoBertin1953Raw:Lve,geoBoggs:Git,geoBoggsRaw:aP,geoBonne:jit,geoBonneRaw:Dve,geoBottomley:qit,geoBottomleyRaw:Rve,geoBromley:Yit,geoBromleyRaw:zve,geoChamberlin:Nve,geoChamberlinRaw:Ove,geoChamberlinAfrica:Xit,geoCollignon:Zit,geoCollignonRaw:_0,geoCraig:Kit,geoCraigRaw:Bve,geoCraster:Jit,geoCrasterRaw:WB,geoCylindricalEqualArea:Qit,geoCylindricalEqualAreaRaw:XB,geoCylindricalStereographic:eot,geoCylindricalStereographicRaw:$ve,geoEckert1:tot,geoEckert1Raw:ZB,geoEckert2:rot,geoEckert2Raw:KB,geoEckert3:aot,geoEckert3Raw:JB,geoEckert4:not,geoEckert4Raw:QB,geoEckert5:iot,geoEckert5Raw:e$,geoEckert6:oot,geoEckert6Raw:t$,geoEisenlohr:sot,geoEisenlohrRaw:r$,geoFahey:lot,geoFaheyRaw:a$,geoFoucaut:uot,geoFoucautRaw:n$,geoFoucautSinusoidal:fot,geoFoucautSinusoidalRaw:Uve,geoGilbert:cot,geoGingery:hot,geoGingeryRaw:Vve,geoGinzburg4:vot,geoGinzburg4Raw:qve,geoGinzburg5:dot,geoGinzburg5Raw:Yve,geoGinzburg6:pot,geoGinzburg6Raw:Wve,geoGinzburg8:got,geoGinzburg8Raw:i$,geoGinzburg9:mot,geoGinzburg9Raw:Xve,geoGringorten:bot,geoGringortenRaw:uP,geoGuyou:Sot,geoGuyouRaw:fP,geoHammer:$it,geoHammerRaw:eP,geoHammerRetroazimuthal:Mot,geoHammerRetroazimuthalRaw:Kve,geoHealpix:Iot,geoHealpixRaw:Qve,geoHill:Dot,geoHillRaw:ede,geoHomolosine:zot,geoHomolosineRaw:vP,geoHufnagel:Fot,geoHufnagelRaw:tde,geoHyperelliptical:Not,geoHyperellipticalRaw:rde,geoInterrupt:Yy,geoInterruptedBoggs:Hot,geoInterruptedHomolosine:Vot,geoInterruptedMollweide:qot,geoInterruptedMollweideHemispheres:Wot,geoInterruptedSinuMollweide:Zot,geoInterruptedSinusoidal:Jot,geoKavrayskiy7:Qot,geoKavrayskiy7Raw:f$,geoLagrange:est,geoLagrangeRaw:nde,geoLarrivee:tst,geoLarriveeRaw:h$,geoLaskowski:rst,geoLaskowskiRaw:v$,geoLittrow:ast,geoLittrowRaw:d$,geoLoximuthal:nst,geoLoximuthalRaw:ide,geoMiller:ist,geoMillerRaw:p$,geoModifiedStereographic:kw,geoModifiedStereographicRaw:ode,geoModifiedStereographicAlaska:cst,geoModifiedStereographicGs48:hst,geoModifiedStereographicGs50:vst,geoModifiedStereographicMiller:dst,geoModifiedStereographicLee:pst,geoMollweide:Hit,geoMollweideRaw:qy,geoMtFlatPolarParabolic:gst,geoMtFlatPolarParabolicRaw:g$,geoMtFlatPolarQuartic:mst,geoMtFlatPolarQuarticRaw:m$,geoMtFlatPolarSinusoidal:yst,geoMtFlatPolarSinusoidalRaw:y$,geoNaturalEarth:Tve,geoNaturalEarthRaw:Z4,geoNaturalEarth2:xst,geoNaturalEarth2Raw:x$,geoNellHammer:bst,geoNellHammerRaw:b$,geoInterruptedQuarticAuthalic:wst,geoNicolosi:Tst,geoNicolosiRaw:_$,geoPatterson:Est,geoPattersonRaw:M$,geoPolyconic:Cst,geoPolyconicRaw:k$,geoPolyhedral:yP,geoPolyhedralButterfly:Fst,geoPolyhedralCollignon:Ost,geoPolyhedralWaterman:Nst,geoProject:Hst,geoGringortenQuincuncial:jst,geoPeirceQuincuncial:mde,geoPierceQuincuncial:mde,geoQuantize:qst,geoQuincuncial:I$,geoRectangularPolyconic:Yst,geoRectangularPolyconicRaw:yde,geoRobinson:Wst,geoRobinsonRaw:D$,geoSatellite:Zst,geoSatelliteRaw:xde,geoSinuMollweide:Rot,geoSinuMollweideRaw:hP,geoSinusoidal:Vit,geoSinusoidalRaw:hm,geoStitch:Qst,geoTimes:elt,geoTimesRaw:G$,geoTwoPointAzimuthal:Cde,geoTwoPointAzimuthalRaw:Ede,geoTwoPointAzimuthalUsa:tlt,geoTwoPointEquidistant:Pde,geoTwoPointEquidistantRaw:Lde,geoTwoPointEquidistantUsa:rlt,geoVanDerGrinten:alt,geoVanDerGrintenRaw:V$,geoVanDerGrinten2:nlt,geoVanDerGrinten2Raw:j$,geoVanDerGrinten3:ilt,geoVanDerGrinten3Raw:q$,geoVanDerGrinten4:olt,geoVanDerGrinten4Raw:Y$,geoWagner:Dde,geoWagner7:llt,geoWagnerRaw:Ide,geoWagner4:ult,geoWagner4Raw:Fde,geoWagner6:flt,geoWagner6Raw:W$,geoWiechel:clt,geoWiechelRaw:X$,geoWinkel3:hlt,geoWinkel3Raw:Z$}),dlt=qh(vlt),Dl=Ra.exports,K$=bt.exports,plt=Pa,Ew=Math.PI/180,tb=180/Math.PI,J$={cursor:"pointer"},Q$={cursor:"auto"};function glt(e,t){var r=e.projection,a;return t._isScoped?a=ylt:t._isClipped?a=blt:a=xlt,a(e,r)}var mlt=glt;function eU(e,t){return Dl.behavior.zoom().translate(t.translate()).scale(t.scale())}function tU(e,t,r){var a=e.id,n=e.graphDiv,o=n.layout,i=o[a],s=n._fullLayout,l=s[a],u={},f={};function c(h,v){u[a+"."+h]=K$.nestedProperty(i,h).get(),plt.call("_storeDirectGUIEdit",o,s._preGUI,u);var p=K$.nestedProperty(l,h);p.get()!==v&&(p.set(v),K$.nestedProperty(i,h).set(v),f[a+"."+h]=v)}r(c),c("projection.scale",t.scale()/e.fitScale),c("fitbounds",!1),n.emit("plotly_relayout",f)}function ylt(e,t){var r=eU(e,t);function a(){Dl.select(this).style(J$)}function n(){t.scale(Dl.event.scale).translate(Dl.event.translate),e.render();var s=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}function o(s){var l=t.invert(e.midPt);s("center.lon",l[0]),s("center.lat",l[1])}function i(){Dl.select(this).style(Q$),tU(e,t,o)}return r.on("zoomstart",a).on("zoom",n).on("zoomend",i),r}function xlt(e,t){var r=eU(e,t),a=2,n,o,i,s,l,u,f,c,h;function v(_){return t.invert(_)}function p(_){var S=v(_);if(!S)return!0;var M=t(S);return Math.abs(M[0]-_[0])>a||Math.abs(M[1]-_[1])>a}function d(){Dl.select(this).style(J$),n=Dl.mouse(this),o=t.rotate(),i=t.translate(),s=o,l=v(n)}function g(){if(u=Dl.mouse(this),p(n)){r.scale(t.scale()),r.translate(t.translate());return}t.scale(Dl.event.scale),t.translate([i[0],Dl.event.translate[1]]),l?v(u)&&(c=v(u),f=[s[0]+(c[0]-l[0]),o[1],o[2]],t.rotate(f),s=f):(n=u,l=v(n)),h=!0,e.render();var _=t.rotate(),S=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":S[0],"geo.center.lat":S[1],"geo.projection.rotation.lon":-_[0]})}function m(){Dl.select(this).style(Q$),h&&tU(e,t,y)}function y(_){var S=t.rotate(),M=t.invert(e.midPt);_("projection.rotation.lon",-S[0]),_("center.lon",M[0]),_("center.lat",M[1])}return r.on("zoomstart",d).on("zoom",g).on("zoomend",m),r}function blt(e,t){t.rotate(),t.scale();var r=eU(e,t),a=Elt(r,"zoomstart","zoom","zoomend"),n=0,o=r.on,i;r.on("zoomstart",function(){Dl.select(this).style(J$);var c=Dl.mouse(this),h=t.rotate(),v=h,p=t.translate(),d=_lt(h);i=wP(t,c),o.call(r,"zoom",function(){var g=Dl.mouse(this);if(t.scale(Dl.event.scale),!i)c=g,i=wP(t,c);else if(wP(t,g)){t.rotate(h).translate(p);var m=wP(t,g),y=Tlt(i,m),_=Slt(wlt(d,y)),S=Alt(_,i,v);(!isFinite(S[0])||!isFinite(S[1])||!isFinite(S[2]))&&(S=v),t.rotate(S),v=S}l(a.of(this,arguments))}),s(a.of(this,arguments))}).on("zoomend",function(){Dl.select(this).style(Q$),o.call(r,"zoom",null),u(a.of(this,arguments)),tU(e,t,f)}).on("zoom.redraw",function(){e.render();var c=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-c[0],"geo.projection.rotation.lat":-c[1]})});function s(c){n++||c({type:"zoomstart"})}function l(c){c({type:"zoom"})}function u(c){--n||c({type:"zoomend"})}function f(c){var h=t.rotate();c("projection.rotation.lon",-h[0]),c("projection.rotation.lat",-h[1])}return Dl.rebind(r,a,"on")}function wP(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&Mlt(r)}function _lt(e){var t=.5*e[0]*Ew,r=.5*e[1]*Ew,a=.5*e[2]*Ew,n=Math.sin(t),o=Math.cos(t),i=Math.sin(r),s=Math.cos(r),l=Math.sin(a),u=Math.cos(a);return[o*s*u+n*i*l,n*s*u-o*i*l,o*i*u+n*s*l,o*s*l-n*i*u]}function wlt(e,t){var r=e[0],a=e[1],n=e[2],o=e[3],i=t[0],s=t[1],l=t[2],u=t[3];return[r*i-a*s-n*l-o*u,r*s+a*i+n*u-o*l,r*l-a*u+n*i+o*s,r*u+a*l-n*s+o*i]}function Tlt(e,t){if(!(!e||!t)){var r=klt(e,t),a=Math.sqrt(Bde(r,r)),n=.5*Math.acos(Math.max(-1,Math.min(1,Bde(e,t)))),o=Math.sin(n)/a;return a&&[Math.cos(n),r[2]*o,-r[1]*o,r[0]*o]}}function Alt(e,t,r){var a=rU(t,2,e[0]);a=rU(a,1,e[1]),a=rU(a,0,e[2]-r[2]);var n=t[0],o=t[1],i=t[2],s=a[0],l=a[1],u=a[2],f=Math.atan2(o,n)*tb,c=Math.sqrt(n*n+o*o),h,v;Math.abs(l)>c?(v=(l>0?90:-90)-f,h=0):(v=Math.asin(l/c)*tb-f,h=Math.sqrt(c*c-l*l));var p=180-v-2*f,d=(Math.atan2(u,s)-Math.atan2(i,h))*tb,g=(Math.atan2(u,s)-Math.atan2(i,-h))*tb,m=Ode(r[0],r[1],v,d),y=Ode(r[0],r[1],p,g);return m<=y?[v,d,r[2]]:[p,g,r[2]]}function Ode(e,t,r,a){var n=Nde(r-e),o=Nde(a-t);return Math.sqrt(n*n+o*o)}function Nde(e){return(e%360+540)%360-180}function rU(e,t,r){var a=r*Ew,n=e.slice(),o=t===0?1:0,i=t===2?1:2,s=Math.cos(a),l=Math.sin(a);return n[o]=e[o]*s-e[i]*l,n[i]=e[i]*s+e[o]*l,n}function Slt(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*tb,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*tb,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*tb]}function Mlt(e){var t=e[0]*Ew,r=e[1]*Ew,a=Math.cos(r);return[a*Math.cos(t),a*Math.sin(t),Math.sin(r)]}function Bde(e,t){for(var r=0,a=0,n=e.length;a<n;++a)r+=e[a]*t[a];return r}function klt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Elt(e){for(var t=0,r=arguments.length,a=[];++t<r;)a.push(arguments[t]);var n=Dl.dispatch.apply(null,a);return n.of=function(o,i){return function(s){var l;try{l=s.sourceEvent=Dl.event,s.target=e,Dl.event=s,n[s.type].apply(o,i)}finally{Dl.event=l}}},n}var vm=Ra.exports,aU=Eit,Clt=aU.geoPath,Llt=aU.geoDistance,Plt=dlt,Ilt=Pa,GS=bt.exports,Dlt=GS.strTranslate,TP=Oa.exports,VS=xn.exports,$de=Rs,Rlt=Eo.exports,nU=rn.exports,Ude=Hd.getAutoRange,iU=kf.exports,zlt=lu.prepSelect,Flt=lu.clearSelect,Olt=lu.selectOnClick,Nlt=mlt,pc=ql,Blt=_S,Hde=n4.exports,$lt=Nce.feature;function Gde(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var T0=Gde.prototype,Ult=function(t){return new Gde(t)};T0.plot=function(e,t,r){var a=this,n=t[this.id],o=[],i=!1;for(var s in pc.layerNameToAdjective)if(s!=="frame"&&n["show"+s]){i=!0;break}for(var l=0;l<e.length;l++)if(e[0][0].trace.locationmode){i=!0;break}if(i){var u=Hde.getTopojsonName(n);(a.topojson===null||u!==a.topojsonName)&&(a.topojsonName=u,PlotlyGeoAssets.topojson[a.topojsonName]===void 0&&o.push(a.fetchTopojson()))}o=o.concat(Blt.fetchTraceGeoData(e)),r.push(new Promise(function(f,c){Promise.all(o).then(function(){a.topojson=PlotlyGeoAssets.topojson[a.topojsonName],a.update(e,t),f()}).catch(c)}))};T0.fetchTopojson=function(){var e=this,t=Hde.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise(function(r,a){vm.json(t,function(n,o){if(n)return n.status===404?a(new Error(["plotly.js could not find topojson file at",t,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):a(new Error(["unexpected error while fetching topojson file at",t].join(" ")));PlotlyGeoAssets.topojson[e.topojsonName]=o,r()})})};T0.update=function(e,t){var r=t[this.id];this.hasChoropleth=!1;for(var a=0;a<e.length;a++){var n=e[a],o=n[0].trace;o.type==="choropleth"&&(this.hasChoropleth=!0),o.visible===!0&&o._length>0&&o._module.calcGeoJSON(n,t)}var i=this.updateProjection(e,t);if(!i){(!this.viewInitial||this.scope!==r.scope)&&this.saveViewInitial(r),this.scope=r.scope,this.updateBaseLayers(t,r),this.updateDims(t,r),this.updateFx(t,r),Rlt.generalUpdatePerTraceModule(this.graphDiv,this,e,r);var s=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=s.selectAll(".point"),this.dataPoints.text=s.selectAll("text"),this.dataPaths.line=s.selectAll(".js-line");var l=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=l.selectAll("path"),this.render()}};T0.updateProjection=function(e,t){var r=this.graphDiv,a=t[this.id],n=t._size,o=a.domain,i=a.projection,s=a.lonaxis,l=a.lataxis,u=s._ax,f=l._ax,c=this.projection=Hlt(a),h=[[n.l+n.w*o.x[0],n.t+n.h*(1-o.y[1])],[n.l+n.w*o.x[1],n.t+n.h*(1-o.y[0])]],v=a.center||{},p=i.rotation||{},d=s.range||[],g=l.range||[];if(a.fitbounds){u._length=h[1][0]-h[0][0],f._length=h[1][1]-h[0][1],u.range=Ude(r,u),f.range=Ude(r,f);var m=(u.range[0]+u.range[1])/2,y=(f.range[0]+f.range[1])/2;if(a._isScoped)v={lon:m,lat:y};else if(a._isClipped){v={lon:m,lat:y},p={lon:m,lat:y,roll:p.roll};var _=i.type,S=pc.lonaxisSpan[_]/2||180,M=pc.lataxisSpan[_]/2||90;d=[m-S,m+S],g=[y-M,y+M]}else v={lon:m,lat:y},p={lon:m,lat:p.lat,roll:p.roll}}c.center([v.lon-p.lon,v.lat-p.lat]).rotate([-p.lon,-p.lat,p.roll]).parallels(i.parallels);var w=Vde(d,g);c.fitExtent(h,w);var A=this.bounds=c.getBounds(w),k=this.fitScale=c.scale(),T=c.translate();if(a.fitbounds){var L=c.getBounds(Vde(u.range,f.range)),C=Math.min((A[1][0]-A[0][0])/(L[1][0]-L[0][0]),(A[1][1]-A[0][1])/(L[1][1]-L[0][1]));isFinite(C)?c.scale(C*k):GS.warn("Something went wrong during"+this.id+"fitbounds computations.")}else c.scale(i.scale*k);var I=this.midPt=[(A[0][0]+A[1][0])/2,(A[0][1]+A[1][1])/2];if(c.translate([T[0]+(I[0]-T[0]),T[1]+(I[1]-T[1])]).clipExtent(A),a._isAlbersUsa){var R=c([v.lon,v.lat]),B=c.translate();c.translate([B[0]-(R[0]-B[0]),B[1]-(R[1]-B[1])])}};T0.updateBaseLayers=function(e,t){var r=this,a=r.topojson,n=r.layers,o=r.basePaths;function i(h){return h==="lonaxis"||h==="lataxis"}function s(h){return Boolean(pc.lineLayers[h])}function l(h){return Boolean(pc.fillLayers[h])}var u=this.hasChoropleth?pc.layersForChoropleth:pc.layers,f=u.filter(function(h){return s(h)||l(h)?t["show"+h]:i(h)?t[h].showgrid:!0}),c=r.framework.selectAll(".layer").data(f,String);c.exit().each(function(h){delete n[h],delete o[h],vm.select(this).remove()}),c.enter().append("g").attr("class",function(h){return"layer "+h}).each(function(h){var v=n[h]=vm.select(this);h==="bg"?r.bgRect=v.append("rect").style("pointer-events","all"):i(h)?o[h]=v.append("path").style("fill","none"):h==="backplot"?v.append("g").classed("choroplethlayer",!0):h==="frontplot"?v.append("g").classed("scatterlayer",!0):s(h)?o[h]=v.append("path").style("fill","none").style("stroke-miterlimit",2):l(h)&&(o[h]=v.append("path").style("stroke","none"))}),c.order(),c.each(function(h){var v=o[h],p=pc.layerNameToAdjective[h];h==="frame"?v.datum(pc.sphereSVG):s(h)||l(h)?v.datum($lt(a,a.objects[h])):i(h)&&v.datum(Glt(h,t,e)).call(TP.stroke,t[h].gridcolor).call(VS.dashLine,"",t[h].gridwidth),s(h)?v.call(TP.stroke,t[p+"color"]).call(VS.dashLine,"",t[p+"width"]):l(h)&&v.call(TP.fill,t[p+"color"])})};T0.updateDims=function(e,t){var r=this.bounds,a=(t.framewidth||0)/2,n=r[0][0]-a,o=r[0][1]-a,i=r[1][0]-n+a,s=r[1][1]-o+a;VS.setRect(this.clipRect,n,o,i,s),this.bgRect.call(VS.setRect,n,o,i,s).call(TP.fill,t.bgcolor),this.xaxis._offset=n,this.xaxis._length=i,this.yaxis._offset=o,this.yaxis._length=s};T0.updateFx=function(e,t){var r=this,a=r.graphDiv,n=r.bgRect,o=e.dragmode,i=e.clickmode;if(r.isStatic)return;function s(){var c=r.viewInitial,h={};for(var v in c)h[r.id+"."+v]=c[v];Ilt.call("_guiRelayout",a,h),a.emit("plotly_doubleclick",null)}function l(c){return r.projection.invert([c[0]+r.xaxis._offset,c[1]+r.yaxis._offset])}var u;o==="select"?u=function(c,h){var v=c.range={};v[r.id]=[l([h.xmin,h.ymin]),l([h.xmax,h.ymax])]}:o==="lasso"&&(u=function(c,h,v){var p=c.lassoPoints={};p[r.id]=v.filtered.map(l)});var f={element:r.bgRect.node(),gd:a,plotinfo:{id:r.id,xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:u},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(c){c===2&&Flt(a)}};o==="pan"?(n.node().onmousedown=null,n.call(Nlt(r,t)),n.on("dblclick.zoom",s),a._context._scrollZoom.geo||n.on("wheel.zoom",null)):(o==="select"||o==="lasso")&&(n.on(".zoom",null),f.prepFn=function(c,h,v){zlt(c,h,v,f,o)},iU.init(f)),n.on("mousemove",function(){var c=r.projection.invert(GS.getPositionFromD3Event());if(!c)return iU.unhover(a,vm.event);r.xaxis.p2c=function(){return c[0]},r.yaxis.p2c=function(){return c[1]},$de.hover(a,vm.event,r.id)}),n.on("mouseout",function(){a._dragging||iU.unhover(a,vm.event)}),n.on("click",function(){o!=="select"&&o!=="lasso"&&(i.indexOf("select")>-1&&Olt(vm.event,a,[r.xaxis],[r.yaxis],r.id,f),i.indexOf("event")>-1&&$de.click(a,vm.event))})};T0.makeFramework=function(){var e=this,t=e.graphDiv,r=t._fullLayout,a="clip"+r._uid+e.id;e.clipDef=r._clips.append("clipPath").attr("id",a),e.clipRect=e.clipDef.append("rect"),e.framework=vm.select(e.container).append("g").attr("class","geo "+e.id).call(VS.setClipUrl,a,t),e.project=function(n){var o=e.projection(n);return o?[o[0]-e.xaxis._offset,o[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(n){return e.project(n)[0]}},e.yaxis={_id:"y",c2p:function(n){return e.project(n)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},nU.setConvert(e.mockAxis,r)};T0.saveViewInitial=function(e){var t=e.center||{},r=e.projection,a=r.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":r.scale};var n;e._isScoped?n={"center.lon":t.lon,"center.lat":t.lat}:e._isClipped?n={"projection.rotation.lon":a.lon,"projection.rotation.lat":a.lat}:n={"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":a.lon},GS.extendFlat(this.viewInitial,n)};T0.render=function(){var e=this.projection,t=e.getPath(),r;function a(o){var i=e(o.lonlat);return i?Dlt(i[0],i[1]):null}function n(o){return e.isLonLatOverEdges(o.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",t);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(o){return t(o.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",n).attr("transform",a)};function Hlt(e){var t=e.projection,r=t.type,a=pc.projNames[r];a="geo"+GS.titleCase(a);for(var n=aU[a]||Plt[a],o=n(),i=e._isSatellite?Math.acos(1/t.distance)*180/Math.PI:e._isClipped?pc.lonaxisSpan[r]/2:null,s=["center","rotate","parallels","clipExtent"],l=function(c){return c?o:[]},u=0;u<s.length;u++){var f=s[u];typeof o[f]!="function"&&(o[f]=l)}return o.isLonLatOverEdges=function(c){if(o(c)===null)return!0;if(i){var h=o.rotate(),v=Llt(c,[-h[0],-h[1]]),p=i*Math.PI/180;return v>p}else return!1},o.getPath=function(){return Clt().projection(o)},o.getBounds=function(c){return o.getPath().bounds(c)},o.precision(pc.precision),e._isSatellite&&o.tilt(t.tilt).distance(t.distance),i&&o.clipAngle(i-pc.clipPad),o}function Glt(e,t,r){var a=1e-6,n=2.5,o=t[e],i=pc.scopeDefaults[t.scope],s,l,u;e==="lonaxis"?(s=i.lonaxisRange,l=i.lataxisRange,u=function(y,_){return[y,_]}):e==="lataxis"&&(s=i.lataxisRange,l=i.lonaxisRange,u=function(y,_){return[_,y]});var f={type:"linear",range:[s[0],s[1]-a],tick0:o.tick0,dtick:o.dtick};nU.setConvert(f,r);var c=nU.calcTicks(f);!t.isScoped&&e==="lonaxis"&&c.pop();for(var h=c.length,v=new Array(h),p=0;p<h;p++)for(var d=c[p].x,g=v[p]=[],m=l[0];m<l[1]+n;m+=n)g.push(u(d,m));return{type:"MultiLineString",coordinates:v}}function Vde(e,t){var r=pc.clipPad,a=e[0]+r,n=e[1]-r,o=t[0]+r,i=t[1]-r;a>0&&n<0&&(n+=360);var s=(n-a)/4;return{type:"Polygon",coordinates:[[[a,o],[a,i],[a+s,i],[a+2*s,i],[a+3*s,i],[n,i],[n,o],[n-s,o],[n-2*s,o],[n-3*s,o],[a,o]]]}}var oU={exports:{}},Cw=us,Vlt=Fo.attributes,Lw=ql,jlt=Jo.overrideAll,jde=L_,qde={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["Sets the range of this axis (in degrees),","sets the map's clipped coordinates."].join(" ")},showgrid:{valType:"boolean",dflt:!1,description:"Sets whether or not graticule are shown on the map."},tick0:{valType:"number",dflt:0,description:["Sets the graticule's starting tick longitude/latitude."].join(" ")},dtick:{valType:"number",description:["Sets the graticule's longitude/latitude tick step."].join(" ")},gridcolor:{valType:"color",dflt:Cw.lightLine,description:["Sets the graticule's stroke color."].join(" ")},gridwidth:{valType:"number",min:0,dflt:1,description:["Sets the graticule's stroke width (in px)."].join(" ")}},qlt=oU.exports=jlt({domain:Vlt({name:"geo"},{description:["Note that geo subplots are constrained by domain.","In general, when `projection.scale` is set to 1.","a map will fit either its x or y domain, but not both."].join(" ")}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot",description:["Determines if this subplot's view settings are auto-computed to fit trace data.","On scoped maps, setting `fitbounds` leads to `center.lon` and `center.lat` getting auto-filled.","On maps with a non-clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","and `projection.rotation.lon` getting auto-filled.","On maps with a clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","`projection.rotation.lon`, `projection.rotation.lat`, `lonaxis.range` and `lonaxis.range`","getting auto-filled.","If *locations*, only the trace's visible locations are considered in the `fitbounds` computations.","If *geojson*, the entire trace input `geojson` (if provided) is considered in the `fitbounds` computations,","Defaults to *false*."].join(" ")},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0,description:["Sets the resolution of the base layers.","The values have units of km/mm","e.g. 110 corresponds to a scale ratio of 1:110,000,000."].join(" ")},scope:{valType:"enumerated",values:jde(Lw.scopeDefaults),dflt:"world",description:"Set the scope of the map."},projection:{type:{valType:"enumerated",values:jde(Lw.projNames),description:"Sets the projection type."},rotation:{lon:{valType:"number",description:["Rotates the map along parallels","(in degrees East).","Defaults to the center of the `lonaxis.range` values."].join(" ")},lat:{valType:"number",description:["Rotates the map along meridians","(in degrees North)."].join(" ")},roll:{valType:"number",description:["Roll the map (in degrees)","For example, a roll of *180* makes the map appear upside down."].join(" ")}},tilt:{valType:"number",dflt:0,description:["For satellite projection type only.","Sets the tilt angle of perspective projection."].join(" ")},distance:{valType:"number",min:1.001,dflt:2,description:["For satellite projection type only.","Sets the distance from the center of the sphere to the point of view","as a proportion of the sphere\u2019s radius."].join(" ")},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["For conic projection types only.","Sets the parallels (tangent, secant)","where the cone intersects the sphere."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Zooms in or out on the map view.","A scale of *1* corresponds to the largest zoom level","that fits the map's lon and lat ranges. "].join(" ")}},center:{lon:{valType:"number",description:["Sets the longitude of the map's center.","By default, the map's longitude center lies at the middle of the longitude range","for scoped projection and above `projection.rotation.lon` otherwise."].join(" ")},lat:{valType:"number",description:["Sets the latitude of the map's center.","For all projection types, the map's latitude center lies","at the middle of the latitude range by default."].join(" ")}},visible:{valType:"boolean",dflt:!0,description:"Sets the default visibility of the base layers."},showcoastlines:{valType:"boolean",description:"Sets whether or not the coastlines are drawn."},coastlinecolor:{valType:"color",dflt:Cw.defaultLine,description:"Sets the coastline color."},coastlinewidth:{valType:"number",min:0,dflt:1,description:"Sets the coastline stroke width (in px)."},showland:{valType:"boolean",dflt:!1,description:"Sets whether or not land masses are filled in color."},landcolor:{valType:"color",dflt:Lw.landColor,description:"Sets the land mass color."},showocean:{valType:"boolean",dflt:!1,description:"Sets whether or not oceans are filled in color."},oceancolor:{valType:"color",dflt:Lw.waterColor,description:"Sets the ocean color"},showlakes:{valType:"boolean",dflt:!1,description:"Sets whether or not lakes are drawn."},lakecolor:{valType:"color",dflt:Lw.waterColor,description:"Sets the color of the lakes."},showrivers:{valType:"boolean",dflt:!1,description:"Sets whether or not rivers are drawn."},rivercolor:{valType:"color",dflt:Lw.waterColor,description:"Sets color of the rivers."},riverwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the rivers."},showcountries:{valType:"boolean",description:"Sets whether or not country boundaries are drawn."},countrycolor:{valType:"color",dflt:Cw.defaultLine,description:"Sets line color of the country boundaries."},countrywidth:{valType:"number",min:0,dflt:1,description:"Sets line width (in px) of the country boundaries."},showsubunits:{valType:"boolean",description:["Sets whether or not boundaries of subunits within countries","(e.g. states, provinces) are drawn."].join(" ")},subunitcolor:{valType:"color",dflt:Cw.defaultLine,description:"Sets the color of the subunits boundaries."},subunitwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the subunits boundaries."},showframe:{valType:"boolean",description:"Sets whether or not a frame is drawn around the map."},framecolor:{valType:"color",dflt:Cw.defaultLine,description:"Sets the color the frame."},framewidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the frame."},bgcolor:{valType:"color",dflt:Cw.background,description:"Set the background color of the map"},lonaxis:qde,lataxis:qde},"plot","from-root");qlt.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view","(projection and center). Defaults to `layout.uirevision`."].join(" ")};var AP=bt.exports,Ylt=R2,Wlt=Ml.getSubplotData,SP=ql,Xlt=oU.exports,Yde=SP.axesNames,Zlt=function(t,r,a){Ylt(t,r,a,{type:"geo",attributes:Xlt,handleDefaults:Klt,fullData:a,partition:"y"})};function Klt(e,t,r,a){var n=Wlt(a.fullData,"geo",a.id),o=n.map(function(ee){return ee._expandedIndex}),i=r("resolution"),s=r("scope"),l=SP.scopeDefaults[s],u=r("projection.type",l.projType),f=t._isAlbersUsa=u==="albers usa";f&&(s=t.scope="usa");var c=t._isScoped=s!=="world",h=t._isSatellite=u==="satellite",v=t._isConic=u.indexOf("conic")!==-1||u==="albers",p=t._isClipped=!!SP.lonaxisSpan[u];if(e.visible===!1){var d=AP.extendDeep({},t._template);d.showcoastlines=!1,d.showcountries=!1,d.showframe=!1,d.showlakes=!1,d.showland=!1,d.showocean=!1,d.showrivers=!1,d.showsubunits=!1,d.lonaxis&&(d.lonaxis.showgrid=!1),d.lataxis&&(d.lataxis.showgrid=!1),t._template=d}for(var g=r("visible"),m,y=0;y<Yde.length;y++){var _=Yde[y],S=[30,10][y],M;if(c)M=l[_+"Range"];else{var w=SP[_+"Span"],A=(w[u]||w["*"])/2,k=r("projection.rotation."+_.substr(0,3),l.projRotate[y]);M=[k-A,k+A]}var T=r(_+".range",M);r(_+".tick0"),r(_+".dtick",S),m=r(_+".showgrid",g?void 0:!1),m&&(r(_+".gridcolor"),r(_+".gridwidth")),t[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:o,setScale:AP.identity,c2l:AP.identity,r2l:AP.identity,autorange:!0,range:T.slice(),_m:1,_input:{}}}var L=t.lonaxis.range,C=t.lataxis.range,I=L[0],R=L[1];I>0&&R<0&&(R+=360);var B=(I+R)/2,N;if(!f){var D=c?l.projRotate:[B,0,0];N=r("projection.rotation.lon",D[0]),r("projection.rotation.lat",D[1]),r("projection.rotation.roll",D[2]),m=r("showcoastlines",!c&&g),m&&(r("coastlinecolor"),r("coastlinewidth")),m=r("showocean",g?void 0:!1),m&&r("oceancolor")}var O,$;if(f?(O=-96.6,$=38.7):(O=c?B:N,$=(C[0]+C[1])/2),r("center.lon",O),r("center.lat",$),h&&(r("projection.tilt"),r("projection.distance")),v){var Y=l.projParallels||[0,60];r("projection.parallels",Y)}r("projection.scale"),m=r("showland",g?void 0:!1),m&&r("landcolor"),m=r("showlakes",g?void 0:!1),m&&r("lakecolor"),m=r("showrivers",g?void 0:!1),m&&(r("rivercolor"),r("riverwidth")),m=r("showcountries",c&&s!=="usa"&&g),m&&(r("countrycolor"),r("countrywidth")),(s==="usa"||s==="north america"&&i===50)&&(r("showsubunits",g),r("subunitcolor"),r("subunitwidth")),c||(m=r("showframe",g),m&&(r("framecolor"),r("framewidth"))),r("bgcolor");var X=r("fitbounds");X&&(delete t.projection.scale,c?(delete t.center.lon,delete t.center.lat):p?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}var Jlt=Ml.getSubplotCalcData,Qlt=bt.exports.counterRegex,eut=Ult,A0="geo",Wde=Qlt(A0),Xde={};Xde[A0]={valType:"subplotid",dflt:A0,editType:"calc",description:["Sets a reference between this trace's geospatial coordinates and","a geographic map.","If *geo* (the default value), the geospatial coordinates refer to","`layout.geo`.","If *geo2*, the geospatial coordinates refer to `layout.geo2`,","and so on."].join(" ")};function tut(e){for(var t=e._fullLayout,r=e.calcdata,a=t._subplots[A0],n=0;n<a.length;n++){var o=a[n],i=Jlt(r,A0,o),s=t[o],l=s._subplot;l||(l=eut({id:o,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[o]._subplot=l),l.plot(i,t,e._promises)}}function rut(e,t,r,a){for(var n=a._subplots[A0]||[],o=0;o<n.length;o++){var i=n[o],s=a[i]._subplot;!t[i]&&!!s&&(s.framework.remove(),s.clipDef.remove())}}function aut(e){for(var t=e._fullLayout,r=t._subplots[A0],a=0;a<r.length;a++){var n=t[r[a]],o=n._subplot;o.updateFx(t,n)}}var Zde={attr:A0,name:A0,idRoot:A0,idRegex:Wde,attrRegex:Wde,attributes:Xde,layoutAttributes:oU.exports,supplyLayoutDefaults:Zlt,plot:tut,updateFx:aut,clean:rut},nut={attributes:xS,supplyDefaults:iat,colorbar:Pf,formatLabels:oat,calc:Cce,calcGeoJSON:the.calcGeoJSON,plot:the.plot,style:Jce,styleOnSelect:fh.styleOnSelect,hoverPoints:pnt,eventData:mnt,selectPoints:xnt,moduleType:"trace",name:"scattergeo",basePlotModule:Zde,categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}},iut=nut,out=zn.hovertemplateAttrs,Xy=xS,sut=bo,Kde=ao,lut=us.defaultLine,Zy=cn.extendFlat,Jde=Xy.marker.line,MP=Zy({locations:{valType:"data_array",editType:"calc",description:["Sets the coordinates via location IDs or names.","See `locationmode` for more info."].join(" ")},locationmode:Xy.locationmode,z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:Zy({},Xy.geojson,{description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")}),featureidkey:Xy.featureidkey,text:Zy({},Xy.text,{description:"Sets the text elements associated with each location."}),hovertext:Zy({},Xy.hovertext,{description:"Same as `text`."}),marker:{line:{color:Zy({},Jde.color,{dflt:lut}),width:Zy({},Jde.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the locations."},editType:"calc"},selected:{marker:{opacity:Xy.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:Xy.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:Zy({},Kde.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:out(),showlegend:Zy({},Kde.showlegend,{dflt:!1})},sut("",{cLetter:"z",editTypeOverride:"calc"})),kP=bt.exports,uut=su,fut=MP,cut=function(t,r,a,n){function o(h,v){return kP.coerce(t,r,fut,h,v)}var i=o("locations"),s=o("z");if(!(i&&i.length&&kP.isArrayOrTypedArray(s)&&s.length)){r.visible=!1;return}r._length=Math.min(i.length,s.length);var l=o("geojson"),u;(typeof l=="string"&&l!==""||kP.isPlainObject(l))&&(u="geojson-id");var f=o("locationmode",u);f==="geojson-id"&&o("featureidkey"),o("text"),o("hovertext"),o("hovertemplate");var c=o("marker.line.width");c&&o("marker.line.color"),o("marker.opacity"),uut(t,r,n,o,{prefix:"",cLetter:"z"}),kP.coerceSelectionMarkerOpacity(r,o)},Qde=gn,hut=Un.BADNUM,vut=ih,dut=Vg,put=Zd;function epe(e){return e&&typeof e=="string"}var tpe=function(t,r){var a=r._length,n=new Array(a),o;r.geojson?o=function(f){return epe(f)||Qde(f)}:o=epe;for(var i=0;i<a;i++){var s=n[i]={},l=r.locations[i],u=r.z[i];o(l)&&Qde(u)?(s.loc=l,s.z=u):(s.loc=null,s.z=hut),s.index=i}return dut(n,r),vut(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),put(n,r),n},gut=Ra.exports,mut=Oa.exports,sU=xn.exports,yut=Qo;function xut(e,t){t&&rpe(e,t)}function rpe(e,t){var r=t[0].trace,a=t[0].node3,n=a.selectAll(".choroplethlocation"),o=r.marker||{},i=o.line||{},s=yut.makeColorScaleFuncFromTrace(r);n.each(function(l){gut.select(this).attr("fill",s(l.z)).call(mut.stroke,l.mlc||i.color).call(sU.dashLine,"",l.mlw||i.width||0).style("opacity",o.opacity)}),sU.selectedPointStyle(n,r,e)}function but(e,t){var r=t[0].node3,a=t[0].trace;a.selectedpoints?sU.selectedPointStyle(r.selectAll(".choroplethlocation"),a,e):rpe(e,t)}var lU={style:xut,styleOnSelect:but},_ut=Ra.exports,ape=bt.exports,Pw=_S,wut=n4.exports.getTopojsonFeatures,npe=Hd.findExtremes,Tut=lU.style;function Aut(e,t,r){var a=t.layers.backplot.select(".choroplethlayer");ape.makeTraceGroups(a,r,"trace choropleth").each(function(n){var o=_ut.select(this),i=o.selectAll("path.choroplethlocation").data(ape.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),Tut(e,n)})}function Sut(e,t){for(var r=e[0].trace,a=t[r.geo],n=a._subplot,o=r.locationmode,i=r._length,s=o==="geojson-id"?Pw.extractTraceFeature(e):wut(r,n.topojson),l=[],u=[],f=0;f<i;f++){var c=e[f],h=o==="geojson-id"?c.fOut:Pw.locationToFeature(o,c.loc,s);if(h){c.geojson=h,c.ct=h.properties.ct,c._polygons=Pw.feature2polygons(h);var v=Pw.computeBbox(h);l.push(v[0],v[2]),u.push(v[1],v[3])}else c.geojson=null}if(a.fitbounds==="geojson"&&o==="geojson-id"){var p=Pw.computeBbox(Pw.getTraceGeojson(r));l=[p[0],p[2]],u=[p[1],p[3]]}var d={padded:!0};r._extremes.lon=npe(a.lonaxis._ax,l,d),r._extremes.lat=npe(a.lataxis._ax,u,d)}var ipe={calcGeoJSON:Sut,plot:Aut},Mut=rn.exports,kut=MP,Eut=bt.exports.fillText,ope=function(t,r,a){var n=t.cd,o=n[0].trace,i=t.subplot,s,l,u,f,c=[r,a],h=[r+360,a];for(l=0;l<n.length;l++)if(s=n[l],f=!1,s._polygons){for(u=0;u<s._polygons.length;u++)s._polygons[u].contains(c)&&(f=!f),s._polygons[u].contains(h)&&(f=!f);if(f)break}if(!(!f||!s))return t.x0=t.x1=t.xa.c2p(s.ct),t.y0=t.y1=t.ya.c2p(s.ct),t.index=s.index,t.location=s.loc,t.z=s.z,t.zLabel=Mut.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,t.hovertemplate=s.hovertemplate,Cut(t,o,s),[t]};function Cut(e,t,r){if(!t.hovertemplate){var a=r.hi||t.hoverinfo,n=String(r.loc),o=a==="all"?kut.hoverinfo.flags:a.split("+"),i=o.indexOf("name")!==-1,s=o.indexOf("location")!==-1,l=o.indexOf("z")!==-1,u=o.indexOf("text")!==-1,f=!i&&s,c=[];f?e.nameOverride=n:(i&&(e.nameOverride=t.name),s&&c.push(n)),l&&c.push(e.zLabel),u&&Eut(r,t,c),e.extraText=c.join("<br>")}}var spe=function(t,r,a,n,o){t.location=r.location,t.z=r.z;var i=n[o];return i.fIn&&i.fIn.properties&&(t.properties=i.fIn.properties),t.ct=i.ct,t},lpe=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s,l,u,f,c;if(r===!1)for(s=0;s<a.length;s++)a[s].selected=0;else for(s=0;s<a.length;s++)l=a[s],u=l.ct,!!u&&(f=n.c2p(u),c=o.c2p(u),r.contains([f,c],null,s,t)?(i.push({pointNumber:s,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return i},Lut={attributes:MP,supplyDefaults:cut,colorbar:k2,calc:tpe,calcGeoJSON:ipe.calcGeoJSON,plot:ipe.plot,style:lU.style,styleOnSelect:lU.styleOnSelect,hoverPoints:ope,eventData:spe,selectPoints:lpe,moduleType:"trace",name:"choropleth",basePlotModule:Zde,categories:["geo","noOpacity","showLegend"],meta:{description:["The data that describes the choropleth value-to-color mapping","is set in `z`.","The geographic locations corresponding to each value in `z`","are set in `locations`."].join(" ")}},Put=Lut,Iut=Pa,S0=bt.exports,Dut=QT;function Rut(e,t,r,a){var n=e.cd,o=n[0].t,i=n[0].trace,s=e.xa,l=e.ya,u=o.x,f=o.y,c=s.c2p(t),h=l.c2p(r),v=e.distance,p;if(o.tree){var d=s.p2c(c-v),g=s.p2c(c+v),m=l.p2c(h-v),y=l.p2c(h+v);a==="x"?p=o.tree.range(Math.min(d,g),Math.min(l._rl[0],l._rl[1]),Math.max(d,g),Math.max(l._rl[0],l._rl[1])):p=o.tree.range(Math.min(d,g),Math.min(m,y),Math.max(d,g),Math.max(m,y))}else p=o.ids;var _,S,M,w,A,k,T,L,C,I=v;if(a==="x"){var R=!!i.xperiodalignment,B=!!i.yperiodalignment;for(A=0;A<p.length;A++){if(_=p[A],M=u[_],k=Math.abs(s.c2p(M)-c),R){var N=s.c2p(i._xStarts[_]),D=s.c2p(i._xEnds[_]);k=c>=Math.min(N,D)&&c<=Math.max(N,D)?0:1/0}if(k<I){if(I=k,w=f[_],T=l.c2p(w)-h,B){var O=l.c2p(i._yStarts[_]),$=l.c2p(i._yEnds[_]);T=h>=Math.min(O,$)&&h<=Math.max(O,$)?0:1/0}C=Math.sqrt(k*k+T*T),S=p[A]}}}else for(A=p.length-1;A>-1;A--)_=p[A],M=u[_],w=f[_],k=s.c2p(M)-c,T=l.c2p(w)-h,L=Math.sqrt(k*k+T*T),L<I&&(I=C=L,S=_);return e.index=S,e.distance=I,e.dxy=C,S===void 0?[e]:[upe(e,u,f,i)]}function upe(e,t,r,a){var n=e.xa,o=e.ya,i=e.distance,s=e.dxy,l=e.index,u={pointNumber:l,x:t[l],y:r[l]};u.tx=Array.isArray(a.text)?a.text[l]:a.text,u.htx=Array.isArray(a.hovertext)?a.hovertext[l]:a.hovertext,u.data=Array.isArray(a.customdata)?a.customdata[l]:a.customdata,u.tp=Array.isArray(a.textposition)?a.textposition[l]:a.textposition;var f=a.textfont;f&&(u.ts=S0.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.tc=Array.isArray(f.color)?f.color[l]:f.color,u.tf=Array.isArray(f.family)?f.family[l]:f.family);var c=a.marker;c&&(u.ms=S0.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=S0.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=S0.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.mc=S0.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var h=c&&c.line;h&&(u.mlc=Array.isArray(h.color)?h.color[l]:h.color,u.mlw=S0.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var v=c&&c.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[l]:v.type,u.mgc=Array.isArray(v.color)?v.color[l]:v.color);var p=n.c2p(u.x,!0),d=o.c2p(u.y,!0),g=u.mrc||1,m=a.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[l]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[l]:m.bordercolor,u.hts=S0.isArrayOrTypedArray(m.font.size)?m.font.size[l]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[l]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[l]:m.font.family,u.hnl=S0.isArrayOrTypedArray(m.namelength)?m.namelength[l]:m.namelength);var y=a.hoverinfo;y&&(u.hi=Array.isArray(y)?y[l]:y);var _=a.hovertemplate;_&&(u.ht=Array.isArray(_)?_[l]:_);var S={};S[e.index]=u;var M=a._origX,w=a._origY,A=S0.extendFlat({},e,{color:Dut(a,u),x0:p-g,x1:p+g,xLabelVal:M?M[l]:u.x,y0:d-g,y1:d+g,yLabelVal:w?w[l]:u.y,cd:S,distance:i,spikeDistance:s,hovertemplate:u.ht});return u.htx?A.text=u.htx:u.tx?A.text=u.tx:a.text&&(A.text=a.text),S0.fillText(u,a,A),Iut.getComponentMethod("errorbars","hoverInfo")(u,a,A),A}var uU={hoverPoints:Rut,calcHover:upe},jS={exports:{}},fpe=20,rb={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:fpe,SYMBOL_STROKE:fpe/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},zut=ao,vs=Cl,cpe=Ss.axisHoverFormat,hpe=bo,Fut=L_,fU=cn.extendFlat,Out=Jo.overrideAll,Nut=rb.DASHES,vpe=vs.line,Ky=vs.marker,But=Ky.line,Iw=jS.exports=Out({x:vs.x,x0:vs.x0,dx:vs.dx,y:vs.y,y0:vs.y0,dy:vs.dy,xperiod:vs.xperiod,yperiod:vs.yperiod,xperiod0:vs.xperiod0,yperiod0:vs.yperiod0,xperiodalignment:vs.xperiodalignment,yperiodalignment:vs.yperiodalignment,xhoverformat:cpe("x"),yhoverformat:cpe("y"),text:vs.text,hovertext:vs.hovertext,textposition:vs.textposition,textfont:vs.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],description:["Determines the drawing mode for this scatter trace."].join(" ")},line:{color:vpe.color,width:vpe.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","The values correspond to step-wise line shapes."].join(" ")},dash:{valType:"enumerated",values:Fut(Nut),dflt:"solid",description:"Sets the style of the lines."}},marker:fU({},hpe("marker"),{symbol:Ky.symbol,size:Ky.size,sizeref:Ky.sizeref,sizemin:Ky.sizemin,sizemode:Ky.sizemode,opacity:Ky.opacity,colorbar:Ky.colorbar,line:fU({},hpe("marker.line"),{width:But.width})}),connectgaps:vs.connectgaps,fill:fU({},vs.fill,{dflt:"none"}),fillcolor:vs.fillcolor,selected:{marker:vs.selected.marker,textfont:vs.selected.textfont},unselected:{marker:vs.unselected.marker,textfont:vs.unselected.textfont},opacity:zut.opacity},"calc","nested");Iw.x.editType=Iw.y.editType=Iw.x0.editType=Iw.y0.editType="calc+clearAxisTypes";Iw.hovertemplate=vs.hovertemplate;Iw.texttemplate=vs.texttemplate;var qS={},dpe=rb;qS.isOpenSymbol=function(e){return typeof e=="string"?dpe.OPEN_RE.test(e):e%200>100};qS.isDotSymbol=function(e){return typeof e=="string"?dpe.DOT_RE.test(e):e>200};var ppe=bt.exports,$ut=Pa,Uut=qS,Hut=jS.exports,Gut=Hg,EP=Ro,Vut=YT,jut=a0,qut=Wd,Yut=n0,Wut=Gg,Xut=i0,Zut=function(t,r,a,n){function o(v,p){return ppe.coerce(t,r,Hut,v,p)}var i=t.marker?Uut.isOpenSymbol(t.marker.symbol):!1,s=EP.isBubble(t),l=Vut(t,r,n,o);if(!l){r.visible=!1;return}jut(t,r,n,o),o("xhoverformat"),o("yhoverformat");var u=l<Gut.PTS_LINESONLY?"lines+markers":"lines";o("text"),o("hovertext"),o("hovertemplate"),o("mode",u),EP.hasLines(r)&&(o("connectgaps"),Yut(t,r,a,n,o),o("line.shape")),EP.hasMarkers(r)&&(qut(t,r,a,n,o),o("marker.line.width",i||s?1:0)),EP.hasText(r)&&(o("texttemplate"),Xut(t,r,n,o));var f=(r.line||{}).color,c=(r.marker||{}).color;o("fill"),r.fill!=="none"&&Wut(t,r,a,o);var h=$ut.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||a,{axis:"y"}),h(t,r,f||c||a,{axis:"x",inherit:"y"}),ppe.coerceSelectionMarkerOpacity(r,o)},Kut=l8,Jut=function(t,r,a){var n=t.i;return"x"in t||(t.x=r._x[n]),"y"in t||(t.y=r._y[n]),Kut(t,r,a)};function Qut(e,t,r,a,n){for(var o=n+1;a<=n;){var i=a+n>>>1,s=e[i],l=r!==void 0?r(s,t):s-t;l>=0?(o=i,n=i-1):a=i+1}return o}function eft(e,t,r,a,n){for(var o=n+1;a<=n;){var i=a+n>>>1,s=e[i],l=r!==void 0?r(s,t):s-t;l>0?(o=i,n=i-1):a=i+1}return o}function tft(e,t,r,a,n){for(var o=a-1;a<=n;){var i=a+n>>>1,s=e[i],l=r!==void 0?r(s,t):s-t;l<0?(o=i,a=i+1):n=i-1}return o}function rft(e,t,r,a,n){for(var o=a-1;a<=n;){var i=a+n>>>1,s=e[i],l=r!==void 0?r(s,t):s-t;l<=0?(o=i,a=i+1):n=i-1}return o}function aft(e,t,r,a,n){for(;a<=n;){var o=a+n>>>1,i=e[o],s=r!==void 0?r(i,t):i-t;if(s===0)return o;s<=0?a=o+1:n=o-1}return-1}function YS(e,t,r,a,n,o){return typeof r=="function"?o(e,t,r,a===void 0?0:a|0,n===void 0?e.length-1:n|0):o(e,t,void 0,r===void 0?0:r|0,a===void 0?e.length-1:a|0)}var nft={ge:function(e,t,r,a,n){return YS(e,t,r,a,n,Qut)},gt:function(e,t,r,a,n){return YS(e,t,r,a,n,eft)},lt:function(e,t,r,a,n){return YS(e,t,r,a,n,tft)},le:function(e,t,r,a,n){return YS(e,t,r,a,n,rft)},eq:function(e,t,r,a,n){return YS(e,t,r,a,n,aft)}},dm=function(t,r,a){var n={},o,i;if(typeof r=="string"&&(r=gpe(r)),Array.isArray(r)){var s={};for(i=0;i<r.length;i++)s[r[i]]=!0;r=s}for(o in r)r[o]=gpe(r[o]);var l={};for(o in r){var u=r[o];if(Array.isArray(u))for(i=0;i<u.length;i++){var f=u[i];if(a&&(l[f]=!0),f in t){if(n[o]=t[f],a)for(var c=i;c<u.length;c++)l[u[c]]=!0;break}}else o in t&&(r[o]&&(n[o]=t[o]),a&&(l[o]=!0))}if(a)for(o in t)l[o]||(n[o]=t[o]);return n},cU={};function gpe(e){return cU[e]?cU[e]:(typeof e=="string"&&(e=cU[e]=e.split(/\s*,\s*|\s+/)),e)}var ift=dm,WS=oft;function oft(e){var t;return arguments.length>1&&(e=arguments),typeof e=="string"?e=e.split(/\s/).map(parseFloat):typeof e=="number"&&(e=[e]),e.length&&typeof e[0]=="number"?e.length===1?t={width:e[0],height:e[0],x:0,y:0}:e.length===2?t={width:e[0],height:e[1],x:0,y:0}:t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=ift(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),t={x:e.left||0,y:e.top||0},e.width==null?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,e.height==null?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}var Dw=sft;function sft(e,t){if(!e||e.length==null)throw Error("Argument should be an array");t==null?t=1:t=Math.floor(t);for(var r=Array(t*2),a=0;a<t;a++){for(var n=-1/0,o=1/0,i=a,s=e.length;i<s;i+=t)e[i]>n&&(n=e[i]),e[i]<o&&(o=e[i]);r[a]=o,r[t+a]=n}return r}var mpe=H9,Rw=lft;function lft(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=+(r||0)|0,Array.isArray(e)&&e[0]&&typeof e[0][0]=="number"){var a=e[0].length,n=e.length*a,o,i,s,l;(!t||typeof t=="string")&&(t=new(mpe(t||"float32"))(n+r));var u=t.length-r;if(n!==u)throw new Error("source length "+n+" ("+a+"x"+e.length+") does not match destination length "+u);for(o=0,s=r;o<e.length;o++)for(i=0;i<a;i++)t[s++]=e[o][i]===null?NaN:e[o][i]}else if(!t||typeof t=="string"){var f=mpe(t||"float32");if(Array.isArray(e)||t==="array")for(t=new f(e.length+r),o=0,s=r,l=t.length;s<l;s++,o++)t[s]=e[o]===null?NaN:e[o];else r===0?t=new f(e):(t=new f(e.length+r),t.set(e,r))}else t.set(e,r);return t}var uft=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")},fft=Math.log2||function(e){return Math.log(e)*Math.LOG2E};const ype=nft,xpe=lS,cft=WS,hft=Dw,bpe=dm,hU=tfe,vft=Rw,dft=uft,pft=H9,_pe=fft,gft=1073741824;var mft=function(t,r){r||(r={}),t=vft(t,"float64"),r=bpe(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let a=hU(r.maxDepth,255),n=hU(r.bounds,hft(t,2));n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++;let o=wpe(t,n),i=t.length>>>1,s;r.dtype||(r.dtype="array"),typeof r.dtype=="string"?s=new(pft(r.dtype))(i):r.dtype&&(s=r.dtype,Array.isArray(s)&&(s.length=i));for(let m=0;m<i;++m)s[m]=m;let l=[],u=[],f=[],c=[];v(0,0,1,s,0,1);let h=0;for(let m=0;m<l.length;m++){let y=l[m];if(s.set)s.set(y,h);else for(let S=0,M=y.length;S<M;S++)s[S+h]=y[S];let _=h+l[m].length;c[m]=[h,_],h=_}return s.range=p,s;function v(m,y,_,S,M,w){if(!S.length)return null;let A=l[M]||(l[M]=[]),k=f[M]||(f[M]=[]),T=u[M]||(u[M]=[]),L=A.length;if(M++,M>a||w>gft){for(let $=0;$<S.length;$++)A.push(S[$]),k.push(w),T.push(null,null,null,null);return L}if(A.push(S[0]),k.push(w),S.length<=1)return T.push(null,null,null,null),L;let C=_*.5,I=m+C,R=y+C,B=[],N=[],D=[],O=[];for(let $=1,Y=S.length;$<Y;$++){let X=S[$],ee=o[X*2],Q=o[X*2+1];ee<I?Q<R?B.push(X):N.push(X):Q<R?D.push(X):O.push(X)}return w<<=2,T.push(v(m,y,C,B,M,w),v(m,R,C,N,M,w+1),v(I,y,C,D,M,w+2),v(I,R,C,O,M,w+3)),L}function p(...m){let y;if(dft(m[m.length-1])){let D=m.pop();!m.length&&(D.x!=null||D.l!=null||D.left!=null)&&(m=[D],y={}),y=bpe(D,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else y={};m.length||(m=n);let _=cft(...m),[S,M,w,A]=[Math.min(_.x,_.x+_.width),Math.min(_.y,_.y+_.height),Math.max(_.x,_.x+_.width),Math.max(_.y,_.y+_.height)],[k,T,L,C]=wpe([S,M,w,A],n),I=hU(y.level,l.length);if(y.d!=null){let D;typeof y.d=="number"?D=[y.d,y.d]:y.d.length&&(D=y.d),I=Math.min(Math.max(Math.ceil(-_pe(Math.abs(D[0])/(n[2]-n[0]))),Math.ceil(-_pe(Math.abs(D[1])/(n[3]-n[1])))),I)}if(I=Math.min(I,l.length),y.lod)return d(k,T,L,C,I);let R=[];B(0,0,1,0,0,1);function B(D,O,$,Y,X,ee){if(X===null||ee===null)return;let Q=D+$,Z=O+$;if(k>Q||T>Z||L<D||C<O||Y>=I||X===ee)return;let q=l[Y];ee===void 0&&(ee=q.length);for(let re=X;re<ee;re++){let se=q[re],de=t[se*2],Me=t[se*2+1];de>=S&&de<=w&&Me>=M&&Me<=A&&R.push(se)}let ae=u[Y],ie=ae[X*4+0],we=ae[X*4+1],Te=ae[X*4+2],he=ae[X*4+3],xe=N(ae,X+1),Se=$*.5,ye=Y+1;B(D,O,Se,ye,ie,we||Te||he||xe),B(D,O+Se,Se,ye,we,Te||he||xe),B(D+Se,O,Se,ye,Te,he||xe),B(D+Se,O+Se,Se,ye,he,xe)}function N(D,O){let $=null,Y=0;for(;$===null;)if($=D[O*4+Y],Y++,Y>D.length)return null;return $}return R}function d(m,y,_,S,M){let w=[];for(let A=0;A<M;A++){let k=f[A],T=c[A][0],L=g(m,y,A),C=g(_,S,A),I=ype.ge(k,L),R=ype.gt(k,C,I,k.length-1);w[A]=[I+T,R+T]}return w}function g(m,y,_){let S=1,M=.5,w=.5,A=.5;for(let k=0;k<_;k++)S<<=2,S+=m<M?y<w?0:1:y<w?2:3,A*=.5,M+=m<M?-A:A,w+=y<w?-A:A;return S}};function wpe(e,t){let[r,a,n,o]=t,i=1/(n-r),s=1/(o-a),l=new Array(e.length);for(let u=0,f=e.length/2;u<f;u++)l[2*u]=xpe((e[2*u]-r)*i,0,1),l[2*u+1]=xpe((e[2*u+1]-a)*s,0,1);return l}var vU=mft,Tpe=yft;function yft(e){var t=0,r=0,a=0,n=0;return e.map(function(o){o=o.slice();var i=o[0],s=i.toUpperCase();if(i!=s)switch(o[0]=s,i){case"a":o[6]+=a,o[7]+=n;break;case"v":o[1]+=n;break;case"h":o[1]+=a;break;default:for(var l=1;l<o.length;)o[l++]+=a,o[l++]+=n}switch(s){case"Z":a=t,n=r;break;case"H":a=o[1];break;case"V":n=o[1];break;case"M":a=t=o[1],n=r=o[2];break;default:a=o[o.length-2],n=o[o.length-1]}return o})}var xft=function(){function e(t,r){var a=[],n=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(a.push(l.value),!(r&&a.length===r));n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return a}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),XS=Math.PI*2,dU=function(t,r,a,n,o,i,s){var l=t.x,u=t.y;l*=r,u*=a;var f=n*l-o*u,c=o*l+n*u;return{x:f+i,y:c+s}},bft=function(t,r){var a=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:4/3*Math.tan(r/4),n=Math.cos(t),o=Math.sin(t),i=Math.cos(t+r),s=Math.sin(t+r);return[{x:n-o*a,y:o+n*a},{x:i+s*a,y:s-i*a},{x:i,y:s}]},Ape=function(t,r,a,n){var o=t*n-r*a<0?-1:1,i=t*a+r*n;return i>1&&(i=1),i<-1&&(i=-1),o*Math.acos(i)},_ft=function(t,r,a,n,o,i,s,l,u,f,c,h){var v=Math.pow(o,2),p=Math.pow(i,2),d=Math.pow(c,2),g=Math.pow(h,2),m=v*p-v*g-p*d;m<0&&(m=0),m/=v*g+p*d,m=Math.sqrt(m)*(s===l?-1:1);var y=m*o/i*h,_=m*-i/o*c,S=f*y-u*_+(t+a)/2,M=u*y+f*_+(r+n)/2,w=(c-y)/o,A=(h-_)/i,k=(-c-y)/o,T=(-h-_)/i,L=Ape(1,0,w,A),C=Ape(w,A,k,T);return l===0&&C>0&&(C-=XS),l===1&&C<0&&(C+=XS),[S,M,L,C]},wft=function(t){var r=t.px,a=t.py,n=t.cx,o=t.cy,i=t.rx,s=t.ry,l=t.xAxisRotation,u=l===void 0?0:l,f=t.largeArcFlag,c=f===void 0?0:f,h=t.sweepFlag,v=h===void 0?0:h,p=[];if(i===0||s===0)return[];var d=Math.sin(u*XS/360),g=Math.cos(u*XS/360),m=g*(r-n)/2+d*(a-o)/2,y=-d*(r-n)/2+g*(a-o)/2;if(m===0&&y===0)return[];i=Math.abs(i),s=Math.abs(s);var _=Math.pow(m,2)/Math.pow(i,2)+Math.pow(y,2)/Math.pow(s,2);_>1&&(i*=Math.sqrt(_),s*=Math.sqrt(_));var S=_ft(r,a,n,o,i,s,c,v,d,g,m,y),M=xft(S,4),w=M[0],A=M[1],k=M[2],T=M[3],L=Math.abs(T)/(XS/4);Math.abs(1-L)<1e-7&&(L=1);var C=Math.max(Math.ceil(L),1);T/=C;for(var I=0;I<C;I++)p.push(bft(k,T)),k+=T;return p.map(function(R){var B=dU(R[0],i,s,g,d,w,A),N=B.x,D=B.y,O=dU(R[1],i,s,g,d,w,A),$=O.x,Y=O.y,X=dU(R[2],i,s,g,d,w,A),ee=X.x,Q=X.y;return{x1:N,y1:D,x2:$,y2:Y,x:ee,y:Q}})},Tft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wft}),Aft=qh(Tft),Sft=kft,Mft=Aft;function kft(e){for(var t,r=[],a=0,n=0,o=0,i=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],p=v[0];switch(p){case"M":o=v[1],i=v[2];break;case"A":var d=Mft({px:u,py:f,cx:v[6],cy:v[7],rx:v[1],ry:v[2],xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5]});if(!d.length)continue;for(var g=0,m;g<d.length;g++)m=d[g],v=["C",m.x1,m.y1,m.x2,m.y2,m.x,m.y],g<d.length-1&&r.push(v);break;case"S":var y=u,_=f;(t=="C"||t=="S")&&(y+=y-a,_+=_-n),v=["C",y,_,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=Spe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=Spe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=CP(u,f,v[1],v[2]);break;case"H":v=CP(u,f,v[1],f);break;case"V":v=CP(u,f,u,v[1]);break;case"Z":v=CP(u,f,o,i);break}t=p,u=v[v.length-2],f=v[v.length-1],v.length>4?(a=v[v.length-4],n=v[v.length-3]):(a=u,n=f),r.push(v)}return r}function CP(e,t,r,a){return["C",e,t,r,a,r,a]}function Spe(e,t,r,a,n,o){return["C",e/3+2/3*r,t/3+2/3*a,n/3+2/3*r,o/3+2/3*a,n,o]}var Mpe=function(t){return typeof t!="string"?!1:(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))},Eft=lF,Cft=Tpe,Lft=Sft,Pft=Mpe,Ift=Dft;function Dft(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]=="string"&&(e=e[0]),typeof e=="string"){if(!Pft(e))throw Error("String is not an SVG path.");e=Eft(e)}if(!Array.isArray(e))throw Error("Argument should be a string or an array of path segments.");if(e=Cft(e),e=Lft(e),!e.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],r=0,a=e.length;r<a;r++)for(var n=e[r].slice(1),o=0;o<n.length;o+=2)n[o+0]<t[0]&&(t[0]=n[o+0]),n[o+1]<t[1]&&(t[1]=n[o+1]),n[o+0]>t[2]&&(t[2]=n[o+0]),n[o+1]>t[3]&&(t[3]=n[o+1]);return t}var ab=Math.PI,kpe=Lpe(120),Rft=zft;function zft(e){for(var t,r=[],a=0,n=0,o=0,i=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],p=v[0];switch(p){case"M":o=v[1],i=v[2];break;case"A":v=Cpe(u,f,v[1],v[2],Lpe(v[3]),v[4],v[5],v[6],v[7]),v.unshift("C"),v.length>7&&(r.push(v.splice(0,7)),v.unshift("C"));break;case"S":var d=u,g=f;(t=="C"||t=="S")&&(d+=d-a,g+=g-n),v=["C",d,g,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=Epe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=Epe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=LP(u,f,v[1],v[2]);break;case"H":v=LP(u,f,v[1],f);break;case"V":v=LP(u,f,u,v[1]);break;case"Z":v=LP(u,f,o,i);break}t=p,u=v[v.length-2],f=v[v.length-1],v.length>4?(a=v[v.length-4],n=v[v.length-3]):(a=u,n=f),r.push(v)}return r}function LP(e,t,r,a){return["C",e,t,r,a,r,a]}function Epe(e,t,r,a,n,o){return["C",e/3+2/3*r,t/3+2/3*a,n/3+2/3*r,o/3+2/3*a,n,o]}function Cpe(e,t,r,a,n,o,i,s,l,u){if(u)_=u[0],S=u[1],m=u[2],y=u[3];else{var f=pU(e,t,-n);e=f.x,t=f.y,f=pU(s,l,-n),s=f.x,l=f.y;var c=(e-s)/2,h=(t-l)/2,v=c*c/(r*r)+h*h/(a*a);v>1&&(v=Math.sqrt(v),r=v*r,a=v*a);var p=r*r,d=a*a,g=(o==i?-1:1)*Math.sqrt(Math.abs((p*d-p*h*h-d*c*c)/(p*h*h+d*c*c)));g==1/0&&(g=1);var m=g*r*h/a+(e+s)/2,y=g*-a*c/r+(t+l)/2,_=Math.asin(((t-y)/a).toFixed(9)),S=Math.asin(((l-y)/a).toFixed(9));_=e<m?ab-_:_,S=s<m?ab-S:S,_<0&&(_=ab*2+_),S<0&&(S=ab*2+S),i&&_>S&&(_=_-ab*2),!i&&S>_&&(S=S-ab*2)}if(Math.abs(S-_)>kpe){var M=S,w=s,A=l;S=_+kpe*(i&&S>_?1:-1),s=m+r*Math.cos(S),l=y+a*Math.sin(S);var k=Cpe(s,l,r,a,n,0,i,w,A,[S,M,m,y])}var T=Math.tan((S-_)/4),L=4/3*r*T,C=4/3*a*T,I=[2*e-(e+L*Math.sin(_)),2*t-(t-C*Math.cos(_)),s+L*Math.sin(S),l-C*Math.cos(S),s,l];if(u)return I;k&&(I=I.concat(k));for(var R=0;R<I.length;){var B=pU(I[R],I[R+1],n);I[R++]=B.x,I[R++]=B.y}return I}function pU(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function Lpe(e){return e*(ab/180)}var Fft=Tpe,Oft=Rft,Nft={M:"moveTo",C:"bezierCurveTo"},Bft=function(e,t){e.beginPath(),Oft(Fft(t)).forEach(function(r){var a=r[0],n=r.slice(1);e[Nft[a]].apply(e,n)}),e.closePath()},$ft=lS,Uft=Hft,ZS=1e20;function Hft(e,t){t||(t={});var r=t.cutoff==null?.25:t.cutoff,a=t.radius==null?8:t.radius,n=t.channel||0,o,i,s,l,u,f,c,h,v,p,d;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");o=t.width,i=t.height,l=e,t.stride?f=t.stride:f=Math.floor(e.length/o/i)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=e,c=h.getContext("2d"),o=h.width,i=h.height,v=c.getImageData(0,0,o,i),l=v.data,f=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(h=e.canvas,c=e,o=h.width,i=h.height,v=c.getImageData(0,0,o,i),l=v.data,f=4):window.ImageData&&e instanceof window.ImageData&&(v=e,o=e.width,i=e.height,l=v.data,f=4);if(s=Math.max(o,i),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(u=l,l=Array(o*i),p=0,d=u.length;p<d;p++)l[p]=u[p*f+n]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var g=Array(o*i),m=Array(o*i),y=Array(s),_=Array(s),S=Array(s+1),M=Array(s);for(p=0,d=o*i;p<d;p++){var w=l[p];g[p]=w===1?0:w===0?ZS:Math.pow(Math.max(0,.5-w),2),m[p]=w===1?ZS:w===0?0:Math.pow(Math.max(0,w-.5),2)}Ppe(g,o,i,y,_,M,S),Ppe(m,o,i,y,_,M,S);var A=window.Float32Array?new Float32Array(o*i):new Array(o*i);for(p=0,d=o*i;p<d;p++)A[p]=$ft(1-((g[p]-m[p])/a+r),0,1);return A}function Ppe(e,t,r,a,n,o,i){for(var s=0;s<t;s++){for(var l=0;l<r;l++)a[l]=e[l*t+s];for(Ipe(a,n,o,i,r),l=0;l<r;l++)e[l*t+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)a[s]=e[l*t+s];for(Ipe(a,n,o,i,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(n[s])}}function Ipe(e,t,r,a,n){r[0]=0,a[0]=-ZS,a[1]=+ZS;for(var o=1,i=0;o<n;o++){for(var s=(e[o]+o*o-(e[r[i]]+r[i]*r[i]))/(2*o-2*r[i]);s<=a[i];)i--,s=(e[o]+o*o-(e[r[i]]+r[i]*r[i]))/(2*o-2*r[i]);i++,r[i]=o,a[i]=s,a[i+1]=+ZS}for(o=0,i=0;o<n;o++){for(;a[i+1]<o;)i++;t[o]=(o-r[i])*(o-r[i])+e[r[i]]}}var Gft=Ift,Vft=lF,jft=Bft,qft=Mpe,Yft=Uft,gU=document.createElement("canvas"),gc=gU.getContext("2d"),Wft=Xft;function Xft(e,t){if(!qft(e))throw Error("Argument should be valid svg path string");t||(t={});var r,a;t.shape?(r=t.shape[0],a=t.shape[1]):(r=gU.width=t.w||t.width||200,a=gU.height=t.h||t.height||200);var n=Math.min(r,a),o=t.stroke||0,i=t.viewbox||t.viewBox||Gft(e),s=[r/(i[2]-i[0]),a/(i[3]-i[1])],l=Math.min(s[0]||0,s[1]||0)/2;if(gc.fillStyle="black",gc.fillRect(0,0,r,a),gc.fillStyle="white",o&&(typeof o!="number"&&(o=1),o>0?gc.strokeStyle="white":gc.strokeStyle="black",gc.lineWidth=Math.abs(o)),gc.translate(r*.5,a*.5),gc.scale(l,l),Zft()){var u=new Path2D(e);gc.fill(u),o&&gc.stroke(u)}else{var f=Vft(e);jft(gc,f),gc.fill(),o&&gc.stroke()}gc.setTransform(1,0,0,1,0,0);var c=Yft(gc,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:n*.5});return c}var PP;function Zft(){if(PP!=null)return PP;var e=document.createElement("canvas").getContext("2d");if(e.canvas.width=e.canvas.height=1,!window.Path2D)return PP=!1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var r=e.getImageData(0,0,1,1);return PP=r&&r.data&&r.data[3]===255}var IP=gn,Kft=Wft,DP=qx,Jft=Pa,iv=bt.exports,KS=xn.exports,Dpe=As,Rpe=Oy.formatColor,zw=Ro,Qft=G5,mU=qS,JS=rb,ect=sx.DESELECTDIM,zpe={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},tct=oh.appendArrayPointValue;function rct(e,t){var r,a={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},n=e._context.plotGlPixelRatio;if(t.visible!==!0)return a;if(zw.hasText(t)&&(a.text=Fpe(e,t),a.textSel=Ope(e,t,t.selected),a.textUnsel=Ope(e,t,t.unselected)),zw.hasMarkers(t)&&(a.marker=yU(t),a.markerSel=xU(t,t.selected),a.markerUnsel=xU(t,t.unselected),!t.unselected&&iv.isArrayOrTypedArray(t.marker.opacity))){var o=t.marker.opacity;for(a.markerUnsel.opacity=new Array(o.length),r=0;r<o.length;r++)a.markerUnsel.opacity[r]=ect*o[r]}if(zw.hasLines(t)){a.line={overlay:!0,thickness:t.line.width*n,color:t.line.color,opacity:t.opacity};var i=(JS.DASHES[t.line.dash]||[1]).slice();for(r=0;r<i.length;++r)i[r]*=t.line.width*n;a.line.dashes=i}return t.error_x&&t.error_x.visible&&(a.errorX=Npe(t,t.error_x,n)),t.error_y&&t.error_y.visible&&(a.errorY=Npe(t,t.error_y,n)),!!t.fill&&t.fill!=="none"&&(a.fill={closed:!0,fill:t.fillcolor,thickness:0}),a}function Fpe(e,t){var r=e._fullLayout,a=t._length,n=t.textfont,o=t.textposition,i=Array.isArray(o)?o:[o],s=n.color,l=n.size,u=n.family,f={},c,h=e._context.plotGlPixelRatio,v=t.texttemplate;if(v){f.text=[];var p=r._d3locale,d=Array.isArray(v),g=d?Math.min(v.length,a):a,m=d?function(k){return v[k]}:function(){return v};for(c=0;c<g;c++){var y={i:c},_=t._module.formatLabels(y,t,r),S={};tct(S,t,c);var M=t._meta||{};f.text.push(iv.texttemplateString(m(c),_,p,S,y,M))}}else Array.isArray(t.text)&&t.text.length<a?f.text=t.text.slice():f.text=t.text;if(Array.isArray(f.text))for(c=f.text.length;c<a;c++)f.text[c]="";for(f.opacity=t.opacity,f.font={},f.align=[],f.baseline=[],c=0;c<i.length;c++){var w=i[c].split(/\s+/);switch(w[1]){case"left":f.align.push("right");break;case"right":f.align.push("left");break;default:f.align.push(w[1])}switch(w[0]){case"top":f.baseline.push("bottom");break;case"bottom":f.baseline.push("top");break;default:f.baseline.push(w[0])}}if(Array.isArray(s))for(f.color=new Array(a),c=0;c<a;c++)f.color[c]=s[c];else f.color=s;if(iv.isArrayOrTypedArray(l)||Array.isArray(u))for(f.font=new Array(a),c=0;c<a;c++){var A=f.font[c]={};A.size=(iv.isTypedArray(l)?l[c]:Array.isArray(l)?IP(l[c])?l[c]:0:l)*h,A.family=Array.isArray(u)?u[c]:u}else f.font={size:l*h,family:u};return f}function yU(e){var t=e._length,r=e.marker,a={},n,o=iv.isArrayOrTypedArray(r.symbol),i=iv.isArrayOrTypedArray(r.color),s=iv.isArrayOrTypedArray(r.line.color),l=iv.isArrayOrTypedArray(r.opacity),u=iv.isArrayOrTypedArray(r.size),f=iv.isArrayOrTypedArray(r.line.width),c;if(o||(c=mU.isOpenSymbol(r.symbol)),o||i||s||l){a.colors=new Array(t),a.borderColors=new Array(t);var h=Rpe(r,r.opacity,t),v=Rpe(r.line,r.opacity,t);if(!Array.isArray(v[0])){var p=v;for(v=Array(t),n=0;n<t;n++)v[n]=p}if(!Array.isArray(h[0])){var d=h;for(h=Array(t),n=0;n<t;n++)h[n]=d}for(a.colors=h,a.borderColors=v,n=0;n<t;n++){if(o){var g=r.symbol[n];c=mU.isOpenSymbol(g)}c&&(v[n]=h[n].slice(),h[n]=h[n].slice(),h[n][3]=0)}a.opacity=e.opacity}else c?(a.color=DP(r.color,"uint8"),a.color[3]=0,a.borderColor=DP(r.color,"uint8")):(a.color=DP(r.color,"uint8"),a.borderColor=DP(r.line.color,"uint8")),a.opacity=e.opacity*r.opacity;if(o)for(a.markers=new Array(t),n=0;n<t;n++)a.markers[n]=Upe(r.symbol[n]);else a.marker=Upe(r.symbol);var m=1,y=Qft(e,m),_;if(u||f){var S=a.sizes=new Array(t),M=a.borderSizes=new Array(t),w=0,A;if(u){for(n=0;n<t;n++)S[n]=y(r.size[n]),w+=S[n];A=w/t}else for(_=y(r.size),n=0;n<t;n++)S[n]=_;if(f)for(n=0;n<t;n++)M[n]=r.line.width[n];else for(_=r.line.width,n=0;n<t;n++)M[n]=_;a.sizeAvg=A}else a.size=y(r&&r.size||10),a.borderSizes=y(r.line.width);return a}function xU(e,t){var r=e.marker,a={};return t&&(t.marker&&t.marker.symbol?a=yU(iv.extendFlat({},r,t.marker)):t.marker&&(t.marker.size&&(a.size=t.marker.size),t.marker.color&&(a.colors=t.marker.color),t.marker.opacity!==void 0&&(a.opacity=t.marker.opacity))),a}function Ope(e,t,r){var a={};if(!r)return a;if(r.textfont){var n={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:iv.extendFlat({},t.textfont)};r.textfont&&iv.extendFlat(n.textfont,r.textfont),a=Fpe(e,n)}return a}function Npe(e,t,r){var a={capSize:t.width*2*r,lineWidth:t.thickness*r,color:t.color};return t.copy_ystyle&&(a=e.error_y),a}var Bpe=JS.SYMBOL_SDF_SIZE,nb=JS.SYMBOL_SIZE,$pe=JS.SYMBOL_STROKE,bU={},act=KS.symbolFuncs[0](nb*.05);function Upe(e){if(e==="circle")return null;var t,r,a=KS.symbolNumber(e),n=KS.symbolFuncs[a%100],o=!!KS.symbolNoDot[a%100],i=!!KS.symbolNoFill[a%100],s=mU.isDotSymbol(e);return bU[e]?bU[e]:(s&&!o?t=n(nb*1.1)+act:t=n(nb),r=Kft(t,{w:Bpe,h:Bpe,viewBox:[-nb,-nb,nb,nb],stroke:i?$pe:-$pe}),bU[e]=r,r||null)}function nct(e,t,r){var a=r.length,n=a/2,o,i;if(zw.hasLines(t)&&n)if(t.line.shape==="hv"){for(o=[],i=0;i<n-1;i++)isNaN(r[i*2])||isNaN(r[i*2+1])?o.push(NaN,NaN,NaN,NaN):(o.push(r[i*2],r[i*2+1]),!isNaN(r[i*2+2])&&!isNaN(r[i*2+3])?o.push(r[i*2+2],r[i*2+1]):o.push(NaN,NaN));o.push(r[a-2],r[a-1])}else if(t.line.shape==="hvh"){for(o=[],i=0;i<n-1;i++)if(isNaN(r[i*2])||isNaN(r[i*2+1])||isNaN(r[i*2+2])||isNaN(r[i*2+3]))!isNaN(r[i*2])&&!isNaN(r[i*2+1])?o.push(r[i*2],r[i*2+1]):o.push(NaN,NaN),o.push(NaN,NaN);else{var s=(r[i*2]+r[i*2+2])/2;o.push(r[i*2],r[i*2+1],s,r[i*2+1],s,r[i*2+3])}o.push(r[a-2],r[a-1])}else if(t.line.shape==="vhv"){for(o=[],i=0;i<n-1;i++)if(isNaN(r[i*2])||isNaN(r[i*2+1])||isNaN(r[i*2+2])||isNaN(r[i*2+3]))!isNaN(r[i*2])&&!isNaN(r[i*2+1])?o.push(r[i*2],r[i*2+1]):o.push(NaN,NaN),o.push(NaN,NaN);else{var l=(r[i*2+1]+r[i*2+3])/2;o.push(r[i*2],r[i*2+1],r[i*2],l,r[i*2+2],l)}o.push(r[a-2],r[a-1])}else if(t.line.shape==="vh"){for(o=[],i=0;i<n-1;i++)isNaN(r[i*2])||isNaN(r[i*2+1])?o.push(NaN,NaN,NaN,NaN):(o.push(r[i*2],r[i*2+1]),!isNaN(r[i*2+2])&&!isNaN(r[i*2+3])?o.push(r[i*2],r[i*2+3]):o.push(NaN,NaN));o.push(r[a-2],r[a-1])}else o=r;var u=!1;for(i=0;i<o.length;i++)if(isNaN(o[i])){u=!0;break}var f=u||o.length>JS.TOO_MANY_POINTS||zw.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var c=o[0],h=o[1];for(i=0;i<o.length;i+=2)isNaN(o[i])||isNaN(o[i+1])?(o[i]=c,o[i+1]=h):(c=o[i],h=o[i+1])}return{join:f,positions:o}}function ict(e,t,r,a,n){var o=Jft.getComponentMethod("errorbars","makeComputeError"),i=Dpe.getFromId(e,t.xaxis),s=Dpe.getFromId(e,t.yaxis),l=r.length/2,u={};function f(c,h){var v=h._id.charAt(0),p=t["error_"+v];if(p&&p.visible&&(h.type==="linear"||h.type==="log")){for(var d=o(p),g={x:0,y:1}[v],m={x:[0,1,2,3],y:[2,3,0,1]}[v],y=new Float64Array(4*l),_=1/0,S=-1/0,M=0,w=0;M<l;M++,w+=4){var A=c[M];if(IP(A)){var k=r[M*2+g],T=d(A,M),L=T[0],C=T[1];if(IP(L)&&IP(C)){var I=A-L,R=A+C;y[w+m[0]]=k-h.c2l(I),y[w+m[1]]=h.c2l(R)-k,y[w+m[2]]=0,y[w+m[3]]=0,_=Math.min(_,A-L),S=Math.max(S,A+C)}}}u[v]={positions:r,errors:y,_bnds:[_,S]}}}return f(a,i),f(n,s),u}function oct(e,t,r,a){var n=t._length,o={},i;if(zw.hasMarkers(t)){var s=r.font,l=r.align,u=r.baseline;for(o.offset=new Array(n),i=0;i<n;i++){var f=a.sizes?a.sizes[i]:a.size,c=Array.isArray(s)?s[i].size:s.size,h=Array.isArray(l)?l.length>1?l[i]:l[0]:l,v=Array.isArray(u)?u.length>1?u[i]:u[0]:u,p=zpe[h],d=zpe[v],g=f?f/.8+1:0,m=-d*g-d*.5;o.offset[i]=[p*g/c,m/c]}}return o}var Fw={style:rct,markerStyle:yU,markerSelection:xU,linePositions:nct,errorBarPositions:ict,textPosition:oct},RP=bt.exports,Hpe=function(t,r){var a=r._scene,n={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||(a=r._scene={},a.init=function(){RP.extendFlat(a,o,n)},a.init(),a.update=function(s){var l=RP.repeat(s,a.count);if(a.fill2d&&a.fill2d.update(l),a.scatter2d&&a.scatter2d.update(l),a.line2d&&a.line2d.update(l),a.error2d&&a.error2d.update(l.concat(l)),a.select2d&&a.select2d.update(l),a.glText)for(var u=0;u<a.count;u++)a.glText[u].update(s)},a.draw=function(){for(var s=a.count,l=a.fill2d,u=a.error2d,f=a.line2d,c=a.scatter2d,h=a.glText,v=a.select2d,p=a.selectBatch,d=a.unselectBatch,g=0;g<s;g++){if(l&&a.fillOrder[g]&&l.draw(a.fillOrder[g]),f&&a.lineOptions[g]&&f.draw(g),u&&(a.errorXOptions[g]&&u.draw(g),a.errorYOptions[g]&&u.draw(g+s)),c&&a.markerOptions[g])if(d[g].length){var m=RP.repeat([],a.count);m[g]=d[g],c.draw(m)}else p[g].length||c.draw(g);h[g]&&a.textOptions[g]&&h[g].render()}v&&v.draw(p),a.dirty=!1},a.destroy=function(){a.fill2d&&a.fill2d.destroy&&a.fill2d.destroy(),a.scatter2d&&a.scatter2d.destroy&&a.scatter2d.destroy(),a.error2d&&a.error2d.destroy&&a.error2d.destroy(),a.line2d&&a.line2d.destroy&&a.line2d.destroy(),a.select2d&&a.select2d.destroy&&a.select2d.destroy(),a.glText&&a.glText.forEach(function(s){s.destroy&&s.destroy()}),a.lineOptions=null,a.fillOptions=null,a.markerOptions=null,a.markerSelectedOptions=null,a.markerUnselectedOptions=null,a.errorXOptions=null,a.errorYOptions=null,a.textOptions=null,a.textSelectedOptions=null,a.textUnselectedOptions=null,a.selectBatch=null,a.unselectBatch=null,r._scene=null}),a.dirty||RP.extendFlat(a,n),a},sct=vU,Ow=bt.exports,Gpe=As,lct=Hd.findExtremes,Vpe=o0,_U=Kd,uct=_U.calcMarkerSize,fct=_U.calcAxisExpansion,cct=_U.setFirstScatter,hct=Xd,Nw=Fw,vct=Hpe,jpe=Un.BADNUM,dct=rb.TOO_MANY_POINTS,pct=function(t,r){var a=t._fullLayout,n=Gpe.getFromId(t,r.xaxis),o=Gpe.getFromId(t,r.yaxis),i=a._plots[r.xaxis+r.yaxis],s=r._length,l=s>=dct,u=s*2,f={},c,h=n.makeCalcdata(r,"x"),v=o.makeCalcdata(r,"y"),p=Vpe(r,n,"x",h),d=Vpe(r,o,"y",v),g=p.vals,m=d.vals;r._x=g,r._y=m,r.xperiodalignment&&(r._origX=h,r._xStarts=p.starts,r._xEnds=p.ends),r.yperiodalignment&&(r._origY=v,r._yStarts=d.starts,r._yEnds=d.ends);var y=new Array(u),_=new Array(s);for(c=0;c<s;c++)y[c*2]=g[c]===jpe?NaN:g[c],y[c*2+1]=m[c]===jpe?NaN:m[c],_[c]=c;if(n.type==="log")for(c=0;c<u;c+=2)y[c]=n.c2l(y[c]);if(o.type==="log")for(c=1;c<u;c+=2)y[c]=o.c2l(y[c]);l&&n.type!=="log"&&o.type!=="log"?f.tree=sct(y):f.ids=_,hct(t,r);var S=gct(t,i,r,y,g,m),M=vct(t,i);cct(a,r);var w;return l?S.marker&&(w=S.marker.sizeAvg||Math.max(S.marker.size,3)):w=uct(r,s),fct(t,r,n,o,g,m,w),S.errorX&&qpe(r,n,S.errorX),S.errorY&&qpe(r,o,S.errorY),S.fill&&!M.fill2d&&(M.fill2d=!0),S.marker&&!M.scatter2d&&(M.scatter2d=!0),S.line&&!M.line2d&&(M.line2d=!0),(S.errorX||S.errorY)&&!M.error2d&&(M.error2d=!0),S.text&&!M.glText&&(M.glText=!0),S.marker&&(S.marker.snap=s),M.lineOptions.push(S.line),M.errorXOptions.push(S.errorX),M.errorYOptions.push(S.errorY),M.fillOptions.push(S.fill),M.markerOptions.push(S.marker),M.markerSelectedOptions.push(S.markerSel),M.markerUnselectedOptions.push(S.markerUnsel),M.textOptions.push(S.text),M.textSelectedOptions.push(S.textSel),M.textUnselectedOptions.push(S.textUnsel),M.selectBatch.push([]),M.unselectBatch.push([]),f._scene=M,f.index=M.count,f.x=g,f.y=m,f.positions=y,M.count++,[{x:!1,y:!1,t:f,trace:r}]};function qpe(e,t,r){var a=e._extremes[t._id],n=lct(t,r._bnds,{padded:!0});a.min=a.min.concat(n.min),a.max=a.max.concat(n.max)}function gct(e,t,r,a,n,o){var i=Nw.style(e,r);if(i.marker&&(i.marker.positions=a),i.line&&a.length>1&&Ow.extendFlat(i.line,Nw.linePositions(e,r,a)),i.errorX||i.errorY){var s=Nw.errorBarPositions(e,r,a,n,o);i.errorX&&Ow.extendFlat(i.errorX,s.x),i.errorY&&Ow.extendFlat(i.errorY,s.y)}return i.text&&(Ow.extendFlat(i.text,{positions:a},Nw.textPosition(e,r,i.text,i.marker)),Ow.extendFlat(i.textSel,{positions:a},Nw.textPosition(e,r,i.text,i.markerSel)),Ow.extendFlat(i.textUnsel,{positions:a},Nw.textPosition(e,r,i.text,i.markerUnsel))),i}var zP={exports:{}},FP=lS;zP.exports=Ype;zP.exports.to=Ype;zP.exports.from=mct;function Ype(e,t){t==null&&(t=!0);var r=e[0],a=e[1],n=e[2],o=e[3];o==null&&(o=t?1:255),t&&(r*=255,a*=255,n*=255,o*=255),r=FP(r,0,255)&255,a=FP(a,0,255)&255,n=FP(n,0,255)&255,o=FP(o,0,255)&255;var i=r*16777216+(a<<16)+(n<<8)+o;return i}function mct(e,t){e=+e;var r=e>>>24,a=(e&16711680)>>>16,n=(e&65280)>>>8,o=e&255;return t===!1?[r,a,n,o]:[r/255,a/255,n/255,o/255]}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Wpe=Object.getOwnPropertySymbols,yct=Object.prototype.hasOwnProperty,xct=Object.prototype.propertyIsEnumerable;function bct(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function _ct(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var a=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(a.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Rl=_ct()?Object.assign:function(e,t){for(var r,a=bct(e),n,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var i in r)yct.call(r,i)&&(a[i]=r[i]);if(Wpe){n=Wpe(r);for(var s=0;s<n.length;s++)xct.call(r,n[s])&&(a[n[s]]=r[n[s]])}}return a},wU=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],a=0;a<e.length-1;a++)r.push(e[a],t[a]||"");return r.push(e[a]),r.join("")},Xpe=function(t,r,a){Array.isArray(a)||(a=[].slice.call(arguments,2));for(var n=0,o=a.length;n<o;n++){var i=a[n];for(var s in i)if(!(r[s]!==void 0&&!Array.isArray(r[s])&&t[s]===r[s])&&s in r){var l;if(i[s]===!0)l=r[s];else{if(i[s]===!1)continue;if(typeof i[s]=="function"&&(l=i[s](r[s],t,r),l===void 0))continue}t[s]=l}}return t},wct=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)),Jy={exports:{}};Jy.exports=QS;Jy.exports.float32=Jy.exports.float=QS;Jy.exports.fract32=Jy.exports.fract=Tct;var Zpe=new Float32Array(1);function Tct(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);t instanceof Float32Array||(t=QS(e));for(var r=0,a=t.length;r<a;r++)t[r]=e[r]-t[r];return t}return QS(e-QS(e))}function QS(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(Zpe[0]=e,Zpe[0])}function Act(e,t){return kct(e)||Cct(e,t)||Kpe(e,t)||Pct()}function Sct(e){return Mct(e)||Ect(e)||Kpe(e)||Lct()}function Mct(e){if(Array.isArray(e))return TU(e)}function kct(e){if(Array.isArray(e))return e}function Ect(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cct(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],n=!0,o=!1,i,s;try{for(r=r.call(e);!(n=(i=r.next()).done)&&(a.push(i.value),!(t&&a.length===t));n=!0);}catch(l){o=!0,s=l}finally{try{!n&&r.return!=null&&r.return()}finally{if(o)throw s}}return a}}function Kpe(e,t){if(!!e){if(typeof e=="string")return TU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TU(e,t)}}function TU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Lct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ict=qx,Dct=Dw,Rct=zP.exports,zct=vU,ib=Rl,OP=wU,Fct=dm,Oct=Xpe,Nct=Rw,Jpe=wct,NP=Jy.exports,Bct=WS,$ct=Ou;function Ou(e,t){var r=this;if(!(this instanceof Ou))return new Ou(e,t);typeof e=="function"?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t),e=t.regl;var a=e._gl,n,o=[],i={},s=[],l=[null],u=[null],f=255,c=100;this.tooManyColors=Jpe,n=e.texture({data:new Uint8Array(f*4),width:f,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),ib(this,{regl:e,gl:a,groups:s,markerCache:u,markerTextures:l,palette:o,paletteIds:i,paletteTexture:n,maxColors:f,maxSize:c,canvas:a.canvas}),this.update(t);var h={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(g,m){return[r.tooManyColors?0:f,n.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:n},attributes:{x:function(g,m){return m.xAttr||{buffer:m.positionBuffer,stride:8,offset:0}},y:function(g,m){return m.yAttr||{buffer:m.positionBuffer,stride:8,offset:4}},xFract:function(g,m){return m.xAttr?{constant:[0,0]}:{buffer:m.positionFractBuffer,stride:8,offset:0}},yFract:function(g,m){return m.yAttr?{constant:[0,0]}:{buffer:m.positionFractBuffer,stride:8,offset:4}},size:function(g,m){return m.size.length?{buffer:m.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(m.size*255/r.maxSize)]}},borderSize:function(g,m){return m.borderSize.length?{buffer:m.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(m.borderSize*255/r.maxSize)]}},colorId:function(g,m){return m.color.length?{buffer:m.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?o.slice(m.color*4,m.color*4+4):[m.color]}},borderColorId:function(g,m){return m.borderColor.length?{buffer:m.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?o.slice(m.borderColor*4,m.borderColor*4+4):[m.borderColor]}},isActive:function(g,m){return m.activation===!0?{constant:[1]}:m.activation?m.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},v=ib({},h);v.frag=OP([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),v.vert=OP([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=e(v);var p=ib({},h);p.frag=OP([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),p.vert=OP([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),Jpe&&(p.frag=p.frag.replace("smoothstep","smoothStep"),v.frag=v.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(p)}Ou.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};Ou.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this};Ou.prototype.draw=function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=this.groups;if(r.length===1&&Array.isArray(r[0])&&(r[0][0]===null||Array.isArray(r[0][0]))&&(r=r[0]),this.regl._refresh(),r.length)for(var o=0;o<r.length;o++)this.drawItem(o,r[o]);else n.forEach(function(i,s){e.drawItem(s)});return this};Ou.prototype.drawItem=function(e,t){var r=this.groups,a=r[e];if(typeof t=="number"&&(e=t,a=r[t],t=null),!!(a&&a.count&&a.opacity)){a.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,a,t));for(var n=[],o=1;o<a.activation.length;o++)!a.activation[o]||a.activation[o]!==!0&&!a.activation[o].data.length||n.push.apply(n,Sct(this.getMarkerDrawOptions(o,a,t)));n.length&&this.drawMarker(n)}};Ou.prototype.getMarkerDrawOptions=function(e,t,r){var a=t.range,n=t.tree,o=t.viewport,i=t.activation,s=t.selectionBuffer,l=t.count;if(this.regl,!n)return r?[ib({},t,{markerTexture:this.markerTextures[e],activation:i[e],count:r.length,elements:r,offset:0})]:[ib({},t,{markerTexture:this.markerTextures[e],activation:i[e],offset:0})];var u=[],f=n.range(a,{lod:!0,px:[(a[2]-a[0])/o.width,(a[3]-a[1])/o.height]});if(r){for(var c=i[e],h=c.data,v=new Uint8Array(l),p=0;p<r.length;p++){var d=r[p];v[d]=h?h[d]:1}s.subdata(v)}for(var g=f.length;g--;){var m=Act(f[g],2),y=m[0],_=m[1];u.push(ib({},t,{markerTexture:this.markerTextures[e],activation:r?s:i[e],offset:y,count:_-y}))}return u};Ou.prototype.update=function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!!r.length){r.length===1&&Array.isArray(r[0])&&(r=r[0]);var n=this.groups,o=this.gl,i=this.regl,s=this.maxSize,l=this.maxColors,u=this.palette;this.groups=n=r.map(function(f,c){var h=n[c];if(f===void 0)return h;f===null?f={positions:null}:typeof f=="function"?f={ondraw:f}:typeof f[0]=="number"&&(f={positions:f}),f=Fct(f,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),f.positions===null&&(f.positions=[]),f.tooManyColors!=null&&(e.tooManyColors=f.tooManyColors),h||(n[c]=h={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:i.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},f=ib({},Ou.defaults,f)),f.positions&&!("marker"in f)&&(f.marker=h.marker,delete h.marker),f.marker&&!("positions"in f)&&(f.positions=h.positions,delete h.positions);var v=0,p=0;if(Oct(h,f,[{snap:!0,size:function(O,$){return O==null&&(O=Ou.defaults.size),v+=O&&O.length?1:0,O},borderSize:function(O,$){return O==null&&(O=Ou.defaults.borderSize),v+=O&&O.length?1:0,O},opacity:parseFloat,color:function(O,$){return O==null&&(O=Ou.defaults.color),O=e.updateColor(O),p++,O},borderColor:function(O,$){return O==null&&(O=Ou.defaults.borderColor),O=e.updateColor(O),p++,O},bounds:function(O,$,Y){return"range"in Y||(Y.range=null),O},positions:function(O,$,Y){var X=$.snap,ee=$.positionBuffer,Q=$.positionFractBuffer,Z=$.selectionBuffer;if(O.x||O.y)return O.x.length?$.xAttr={buffer:i.buffer(O.x),offset:0,stride:4,count:O.x.length}:$.xAttr={buffer:O.x.buffer,offset:O.x.offset*4||0,stride:(O.x.stride||1)*4,count:O.x.count},O.y.length?$.yAttr={buffer:i.buffer(O.y),offset:0,stride:4,count:O.y.length}:$.yAttr={buffer:O.y.buffer,offset:O.y.offset*4||0,stride:(O.y.stride||1)*4,count:O.y.count},$.count=Math.max($.xAttr.count,$.yAttr.count),O;O=Nct(O,"float64");var q=$.count=Math.floor(O.length/2),ae=$.bounds=q?Dct(O,2):null;if(!Y.range&&!$.range&&(delete $.range,Y.range=ae),!Y.marker&&!$.marker&&(delete $.marker,Y.marker=null),X&&(X===!0||q>X)?$.tree=zct(O,{bounds:ae}):X&&X.length&&($.tree=X),$.tree){var ie={primitive:"points",usage:"static",data:$.tree,type:"uint32"};$.elements?$.elements(ie):$.elements=i.elements(ie)}var we=NP.float32(O);ee({data:we,usage:"dynamic"});var Te=NP.fract32(O,we);return Q({data:Te,usage:"dynamic"}),Z({data:new Uint8Array(q),type:"uint8",usage:"stream"}),O}},{marker:function(O,$,Y){var X=$.activation;if(X.forEach(function(Te){return Te&&Te.destroy&&Te.destroy()}),X.length=0,!O||typeof O[0]=="number"){var ee=e.addMarker(O);X[ee]=!0}else{for(var Q=[],Z=0,q=Math.min(O.length,$.count);Z<q;Z++){var ae=e.addMarker(O[Z]);Q[ae]||(Q[ae]=new Uint8Array($.count)),Q[ae][Z]=1}for(var ie=0;ie<Q.length;ie++)if(!!Q[ie]){var we={data:Q[ie],type:"uint8",usage:"static"};X[ie]?X[ie](we):X[ie]=i.buffer(we),X[ie].data=Q[ie]}}return O},range:function(O,$,Y){var X=$.bounds;if(!!X)return O||(O=X),$.scale=[1/(O[2]-O[0]),1/(O[3]-O[1])],$.translate=[-O[0],-O[1]],$.scaleFract=NP.fract($.scale),$.translateFract=NP.fract($.translate),O},viewport:function(O){var $=Bct(O||[o.drawingBufferWidth,o.drawingBufferHeight]);return $}}]),v){var d=h,g=d.count,m=d.size,y=d.borderSize,_=d.sizeBuffer,S=new Uint8Array(g*2);if(m.length||y.length)for(var M=0;M<g;M++)S[M*2]=Math.round((m[M]==null?m:m[M])*255/s),S[M*2+1]=Math.round((y[M]==null?y:y[M])*255/s);_({data:S,usage:"dynamic"})}if(p){var w=h,A=w.count,k=w.color,T=w.borderColor,L=w.colorBuffer,C;if(e.tooManyColors){if(k.length||T.length){C=new Uint8Array(A*8);for(var I=0;I<A;I++){var R=k[I];C[I*8]=u[R*4],C[I*8+1]=u[R*4+1],C[I*8+2]=u[R*4+2],C[I*8+3]=u[R*4+3];var B=T[I];C[I*8+4]=u[B*4],C[I*8+5]=u[B*4+1],C[I*8+6]=u[B*4+2],C[I*8+7]=u[B*4+3]}}}else if(k.length||T.length){C=new Uint8Array(A*4+2);for(var N=0;N<A;N++)k[N]!=null&&(C[N*4]=k[N]%l,C[N*4+1]=Math.floor(k[N]/l)),T[N]!=null&&(C[N*4+2]=T[N]%l,C[N*4+3]=Math.floor(T[N]/l))}L({data:C||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return h})}};Ou.prototype.addMarker=function(e){var t=this.markerTextures,r=this.regl,a=this.markerCache,n=e==null?0:a.indexOf(e);if(n>=0)return n;var o;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)o=e;else{o=new Uint8Array(e.length);for(var i=0,s=e.length;i<s;i++)o[i]=e[i]*255}var l=Math.floor(Math.sqrt(o.length));return n=t.length,a.push(e),t.push(r.texture({channels:1,data:o,radius:l,mag:"linear",min:"linear"})),n};Ou.prototype.updateColor=function(e){var t=this.paletteIds,r=this.palette,a=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if(typeof e[0]=="number"){var o=[];if(Array.isArray(e))for(var i=0;i<e.length;i+=4)o.push(e.slice(i,i+4));else for(var s=0;s<e.length;s+=4)o.push(e.subarray(s,s+4));e=o}for(var l=0;l<e.length;l++){var u=e[l];u=Ict(u,"uint8");var f=Rct(u,!1);if(t[f]==null){var c=r.length;t[f]=Math.floor(c/4),r[c]=u[0],r[c+1]=u[1],r[c+2]=u[2],r[c+3]=u[3]}n[l]=t[f]}return!this.tooManyColors&&r.length>a*4&&(this.tooManyColors=!0),this.updatePalette(r),n.length===1?n[0]:n};Ou.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,r=this.paletteTexture,a=Math.ceil(e.length*.25/t);if(a>1){e=e.slice();for(var n=e.length*.25%t;n<a*t;n++)e.push(0,0,0,0)}r.height<a&&r.resize(t,a),r.subimage({width:Math.min(e.length*.25,t),height:a,data:e},0,0)}};Ou.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this};var Uct=Rl,Hct=function(t,r){var a=new $ct(t,r),n=a.render.bind(a);return Uct(n,{render:n,update:a.update.bind(a),draw:a.draw.bind(a),destroy:a.destroy.bind(a),regl:a.regl,gl:a.gl,canvas:a.gl.canvas,groups:a.groups,markers:a.markerCache,palette:a.palette}),n},Qpe=Hct,AU={exports:{}};AU.exports=BP;AU.exports.default=BP;function BP(e,t,r){r=r||2;var a=t&&t.length,n=a?t[0]*r:e.length,o=e0e(e,0,n,r,!0),i=[];if(!o||o.next===o.prev)return i;var s,l,u,f,c,h,v;if(a&&(o=Yct(e,t,o,r)),e.length>80*r){s=u=e[0],l=f=e[1];for(var p=r;p<n;p+=r)c=e[p],h=e[p+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>f&&(f=h);v=Math.max(u-s,f-l),v=v!==0?1/v:0}return eM(o,i,r,s,l,v),i}function e0e(e,t,r,a,n){var o,i;if(n===kU(e,t,r,a)>0)for(o=t;o<r;o+=a)i=a0e(o,e[o],e[o+1],i);else for(o=r-a;o>=t;o-=a)i=a0e(o,e[o],e[o+1],i);return i&&$P(i,i.next)&&(rM(i),i=i.next),i}function Qy(e,t){if(!e)return e;t||(t=e);var r=e,a;do if(a=!1,!r.steiner&&($P(r,r.next)||Qs(r.prev,r,r.next)===0)){if(rM(r),r=t=r.prev,r===r.next)break;a=!0}else r=r.next;while(a||r!==t);return t}function eM(e,t,r,a,n,o,i){if(!!e){!i&&o&&Jct(e,a,n,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?Vct(e,a,n,o):Gct(e)){t.push(l.i/r),t.push(e.i/r),t.push(u.i/r),rM(e),e=u.next,s=u.next;continue}if(e=u,e===s){i?i===1?(e=jct(Qy(e),t,r),eM(e,t,r,a,n,o,2)):i===2&&qct(e,t,r,a,n,o):eM(Qy(e),t,r,a,n,o,1);break}}}}function Gct(e){var t=e.prev,r=e,a=e.next;if(Qs(t,r,a)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(Bw(t.x,t.y,r.x,r.y,a.x,a.y,n.x,n.y)&&Qs(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Vct(e,t,r,a){var n=e.prev,o=e,i=e.next;if(Qs(n,o,i)>=0)return!1;for(var s=n.x<o.x?n.x<i.x?n.x:i.x:o.x<i.x?o.x:i.x,l=n.y<o.y?n.y<i.y?n.y:i.y:o.y<i.y?o.y:i.y,u=n.x>o.x?n.x>i.x?n.x:i.x:o.x>i.x?o.x:i.x,f=n.y>o.y?n.y>i.y?n.y:i.y:o.y>i.y?o.y:i.y,c=SU(s,l,t,r,a),h=SU(u,f,t,r,a),v=e.prevZ,p=e.nextZ;v&&v.z>=c&&p&&p.z<=h;){if(v!==e.prev&&v!==e.next&&Bw(n.x,n.y,o.x,o.y,i.x,i.y,v.x,v.y)&&Qs(v.prev,v,v.next)>=0||(v=v.prevZ,p!==e.prev&&p!==e.next&&Bw(n.x,n.y,o.x,o.y,i.x,i.y,p.x,p.y)&&Qs(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;v&&v.z>=c;){if(v!==e.prev&&v!==e.next&&Bw(n.x,n.y,o.x,o.y,i.x,i.y,v.x,v.y)&&Qs(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Bw(n.x,n.y,o.x,o.y,i.x,i.y,p.x,p.y)&&Qs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function jct(e,t,r){var a=e;do{var n=a.prev,o=a.next.next;!$P(n,o)&&t0e(n,a,a.next,o)&&tM(n,o)&&tM(o,n)&&(t.push(n.i/r),t.push(a.i/r),t.push(o.i/r),rM(a),rM(a.next),a=e=o),a=a.next}while(a!==e);return Qy(a)}function qct(e,t,r,a,n,o){var i=e;do{for(var s=i.next.next;s!==i.prev;){if(i.i!==s.i&&tht(i,s)){var l=r0e(i,s);i=Qy(i,i.next),l=Qy(l,l.next),eM(i,t,r,a,n,o),eM(l,t,r,a,n,o);return}s=s.next}i=i.next}while(i!==e)}function Yct(e,t,r,a){var n=[],o,i,s,l,u;for(o=0,i=t.length;o<i;o++)s=t[o]*a,l=o<i-1?t[o+1]*a:e.length,u=e0e(e,s,l,a,!1),u===u.next&&(u.steiner=!0),n.push(eht(u));for(n.sort(Wct),o=0;o<n.length;o++)r=Xct(n[o],r),r=Qy(r,r.next);return r}function Wct(e,t){return e.x-t.x}function Xct(e,t){var r=Zct(e,t);if(!r)return t;var a=r0e(r,e),n=Qy(r,r.next);return Qy(a,a.next),t===r?n:t}function Zct(e,t){var r=t,a=e.x,n=e.y,o=-1/0,i;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(n===r.y)return r;if(n===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(a===o)return i;var l=i,u=i.x,f=i.y,c=1/0,h;r=i;do a>=r.x&&r.x>=u&&a!==r.x&&Bw(n<f?a:o,n,u,f,n<f?o:a,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(a-r.x),tM(r,e)&&(h<c||h===c&&(r.x>i.x||r.x===i.x&&Kct(i,r)))&&(i=r,c=h)),r=r.next;while(r!==l);return i}function Kct(e,t){return Qs(e.prev,e,t.prev)<0&&Qs(t.next,e,e.next)<0}function Jct(e,t,r,a){var n=e;do n.z===null&&(n.z=SU(n.x,n.y,t,r,a)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Qct(n)}function Qct(e){var t,r,a,n,o,i,s,l,u=1;do{for(r=e,e=null,o=null,i=0;r;){for(i++,a=r,s=0,t=0;t<u&&(s++,a=a.nextZ,!!a);t++);for(l=u;s>0||l>0&&a;)s!==0&&(l===0||!a||r.z<=a.z)?(n=r,r=r.nextZ,s--):(n=a,a=a.nextZ,l--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;r=a}o.nextZ=null,u*=2}while(i>1);return e}function SU(e,t,r,a,n){return e=32767*(e-r)*n,t=32767*(t-a)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function eht(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Bw(e,t,r,a,n,o,i,s){return(n-i)*(t-s)-(e-i)*(o-s)>=0&&(e-i)*(a-s)-(r-i)*(t-s)>=0&&(r-i)*(o-s)-(n-i)*(a-s)>=0}function tht(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!rht(e,t)&&(tM(e,t)&&tM(t,e)&&aht(e,t)&&(Qs(e.prev,e,t.prev)||Qs(e,t.prev,t))||$P(e,t)&&Qs(e.prev,e,e.next)>0&&Qs(t.prev,t,t.next)>0)}function Qs(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function $P(e,t){return e.x===t.x&&e.y===t.y}function t0e(e,t,r,a){var n=HP(Qs(e,t,r)),o=HP(Qs(e,t,a)),i=HP(Qs(r,a,e)),s=HP(Qs(r,a,t));return!!(n!==o&&i!==s||n===0&&UP(e,r,t)||o===0&&UP(e,a,t)||i===0&&UP(r,e,a)||s===0&&UP(r,t,a))}function UP(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function HP(e){return e>0?1:e<0?-1:0}function rht(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&t0e(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function tM(e,t){return Qs(e.prev,e,e.next)<0?Qs(e,t,e.next)>=0&&Qs(e,e.prev,t)>=0:Qs(e,t,e.prev)<0||Qs(e,e.next,t)<0}function aht(e,t){var r=e,a=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(a=!a),r=r.next;while(r!==e);return a}function r0e(e,t){var r=new MU(e.i,e.x,e.y),a=new MU(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,a.next=r,r.prev=a,o.next=a,a.prev=o,a}function a0e(e,t,r,a){var n=new MU(e,t,r);return a?(n.next=a.next,n.prev=a,a.next.prev=n,a.next=n):(n.prev=n,n.next=n),n}function rM(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function MU(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}BP.deviation=function(e,t,r,a){var n=t&&t.length,o=n?t[0]*r:e.length,i=Math.abs(kU(e,0,o,r));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,f=s<l-1?t[s+1]*r:e.length;i-=Math.abs(kU(e,u,f,r))}var c=0;for(s=0;s<a.length;s+=3){var h=a[s]*r,v=a[s+1]*r,p=a[s+2]*r;c+=Math.abs((e[h]-e[p])*(e[v+1]-e[h+1])-(e[h]-e[v])*(e[p+1]-e[h+1]))}return i===0&&c===0?0:Math.abs((c-i)/i)};function kU(e,t,r,a){for(var n=0,o=t,i=r-a;o<r;o+=a)n+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return n}BP.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},a=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var i=0;i<t;i++)r.vertices.push(e[n][o][i]);n>0&&(a+=e[n-1].length,r.holes.push(a))}return r};var nht=Dw,iht=oht;function oht(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");t==null&&(t=1),r==null&&(r=nht(e,t));for(var a=0;a<t;a++){var n=r[t+a],o=r[a],i=a,s=e.length;if(n===1/0&&o===-1/0)for(i=a;i<s;i+=t)e[i]=e[i]===n?1:e[i]===o?0:.5;else if(n===1/0)for(i=a;i<s;i+=t)e[i]=e[i]===n?1:0;else if(o===-1/0)for(i=a;i<s;i+=t)e[i]=e[i]===o?0:1;else{var l=n-o;for(i=a;i<s;i+=t)isNaN(e[i])||(e[i]=l===0?.5:(e[i]-o)/l)}}return e}var sht=function(){var e,t;if(typeof WeakMap!="function")return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(e)!=="[object WeakMap]"||typeof e.set!="function"||e.set({},1)!==e||typeof e.delete!="function"||typeof e.has!="function"||e.get(t)!=="one")},lht=function(){},uht=lht(),ob=function(e){return e!==uht&&e!==null},fht=Object.create,cht=Object.getPrototypeOf,n0e={},i0e=function(){var e=Object.setPrototypeOf,t=arguments[0]||fht;return typeof e!="function"?!1:cht(e(t(null),n0e))===n0e},hht=ob,vht={function:!0,object:!0},o0e=function(e){return hht(e)&&vht[typeof e]||!1},dht=ob,e1=function(e){if(!dht(e))throw new TypeError("Cannot use null or undefined");return e},EU=Object.create,GP;i0e()||(GP=s0e);(function(){var e,t,r;return!GP||GP.level!==1?EU:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){t[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}t[a]=r}),Object.defineProperties(e,t),Object.defineProperty(GP,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(a,n){return EU(a===null?e:a,n)})})();var pht=o0e,ght=e1,mht=Object.prototype.isPrototypeOf,yht=Object.defineProperty,xht={configurable:!0,enumerable:!1,writable:!0,value:void 0},VP;VP=function(e,t){if(ght(e),t===null||pht(t))return e;throw new TypeError("Prototype must be null or an object")};var s0e=function(e){var t,r;return e?(e.level===2?e.set?(r=e.set,t=function(a,n){return r.call(VP(a,n),n),a}):t=function(a,n){return VP(a,n).__proto__=n,a}:t=function a(n,o){var i;return VP(n,o),i=mht.call(a.nullPolyfill,n),i&&delete a.nullPolyfill.__proto__,o===null&&(o=a.nullPolyfill),n.__proto__=o,i&&yht(a.nullPolyfill,"__proto__",xht),n},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e=Object.create(null),t={},r,a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(a){try{r=a.set,r.call(e,t)}catch{}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}return e.__proto__=t,Object.getPrototypeOf(e)===t?{level:2}:(e={},e.__proto__=t,Object.getPrototypeOf(e)===t?{level:1}:!1)}()),CU=i0e()?Object.setPrototypeOf:s0e,bht=o0e,_ht=function(e){if(!bht(e))throw new TypeError(e+" is not an Object");return e},wht=Object.create(null),Tht=Math.random,Aht=function(){var e;do e=Tht().toString(36).slice(2);while(wht[e]);return e},pm={exports:{}},Sht=void 0,$w=function(e){return e!==Sht&&e!==null},Mht=$w,kht={object:!0,function:!0,undefined:!0},LU=function(e){return Mht(e)?hasOwnProperty.call(kht,typeof e):!1},Eht=LU,Cht=function(e){if(!Eht(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},Lht=Cht,Pht=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!Lht(e)},Iht=Pht,Dht=/^\s*class[\s{/}]/,Rht=Function.prototype.toString,l0e=function(e){return!(!Iht(e)||Dht.test(Rht.call(e)))},zht=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")},Fht=function(){try{return Object.keys("primitive"),!0}catch{return!1}},Oht=ob,Nht=Object.keys,Bht=function(e){return Nht(Oht(e)?Object(e):e)},$ht=Fht()?Object.keys:Bht,Uht=$ht,Hht=e1,Ght=Math.max,Vht=function(e,t){var r,a,n=Ght(arguments.length,2),o;for(e=Object(Hht(e)),o=function(i){try{e[i]=t[i]}catch(s){r||(r=s)}},a=1;a<n;++a)t=arguments[a],Uht(t).forEach(o);if(r!==void 0)throw r;return e},PU=zht()?Object.assign:Vht,jht=ob,qht=Array.prototype.forEach,Yht=Object.create,Wht=function(e,t){var r;for(r in e)t[r]=e[r]},u0e=function(e){var t=Yht(null);return qht.call(arguments,function(r){!jht(r)||Wht(Object(r),t)}),t},IU="razdwatrzy",Xht=function(){return typeof IU.contains!="function"?!1:IU.contains("dwa")===!0&&IU.contains("foo")===!1},Zht=String.prototype.indexOf,Kht=function(e){return Zht.call(this,e,arguments[1])>-1},f0e=Xht()?String.prototype.contains:Kht,jP=$w,c0e=l0e,h0e=PU,v0e=u0e,aM=f0e,Jht=pm.exports=function(e,t){var r,a,n,o,i;return arguments.length<2||typeof e!="string"?(o=t,t=e,e=null):o=arguments[2],jP(e)?(r=aM.call(e,"c"),a=aM.call(e,"e"),n=aM.call(e,"w")):(r=n=!0,a=!1),i={value:t,configurable:r,enumerable:a,writable:n},o?h0e(v0e(o),i):i};Jht.gs=function(e,t,r){var a,n,o,i;return typeof e!="string"?(o=r,r=t,t=e,e=null):o=arguments[3],jP(t)?c0e(t)?jP(r)?c0e(r)||(o=r,r=void 0):r=void 0:(o=t,t=r=void 0):t=void 0,jP(e)?(a=aM.call(e,"c"),n=aM.call(e,"e")):(a=!0,n=!1),i={get:t,set:r,configurable:a,enumerable:n},o?h0e(v0e(o),i):i};var d0e=Object.prototype.toString,Qht=d0e.call(function(){return arguments}()),qP=function(e){return d0e.call(e)===Qht},p0e=Object.prototype.toString,evt=p0e.call(""),YP=function(e){return typeof e=="string"||e&&typeof e=="object"&&(e instanceof String||p0e.call(e)===evt)||!1},g0e={exports:{}},tvt=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array},m0e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")},rvt=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m0e()}try{return __global__||m0e()}finally{delete Object.prototype.__global__}}(),WP=tvt()?globalThis:rvt,avt=WP,DU={object:!0,symbol:!0},nvt=function(){var e=avt.Symbol,t;if(typeof e!="function")return!1;t=e("test symbol");try{String(t)}catch{return!1}return!(!DU[typeof e.iterator]||!DU[typeof e.toPrimitive]||!DU[typeof e.toStringTag])},ivt=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1},ovt=ivt,y0e=function(e){if(!ovt(e))throw new TypeError(e+" is not a symbol");return e},x0e=pm.exports,svt=Object.create,b0e=Object.defineProperty,lvt=Object.prototype,_0e=svt(null),uvt=function(e){for(var t=0,r,a;_0e[e+(t||"")];)++t;return e+=t||"",_0e[e]=!0,r="@@"+e,b0e(lvt,r,x0e.gs(null,function(n){a||(a=!0,b0e(this,r,x0e(n)),a=!1)})),r},pp=pm.exports,pl=WP.Symbol,fvt=function(e){return Object.defineProperties(e,{hasInstance:pp("",pl&&pl.hasInstance||e("hasInstance")),isConcatSpreadable:pp("",pl&&pl.isConcatSpreadable||e("isConcatSpreadable")),iterator:pp("",pl&&pl.iterator||e("iterator")),match:pp("",pl&&pl.match||e("match")),replace:pp("",pl&&pl.replace||e("replace")),search:pp("",pl&&pl.search||e("search")),species:pp("",pl&&pl.species||e("species")),split:pp("",pl&&pl.split||e("split")),toPrimitive:pp("",pl&&pl.toPrimitive||e("toPrimitive")),toStringTag:pp("",pl&&pl.toStringTag||e("toStringTag")),unscopables:pp("",pl&&pl.unscopables||e("unscopables"))})},w0e=pm.exports,cvt=y0e,nM=Object.create(null),hvt=function(e){return Object.defineProperties(e,{for:w0e(function(t){return nM[t]?nM[t]:nM[t]=e(String(t))}),keyFor:w0e(function(t){var r;cvt(t);for(r in nM)if(nM[r]===t)return r})})},M0=pm.exports,RU=y0e,XP=WP.Symbol,vvt=uvt,dvt=fvt,pvt=hvt,gvt=Object.create,zU=Object.defineProperties,ZP=Object.defineProperty,Nf,Uw,T0e;if(typeof XP=="function")try{String(XP()),T0e=!0}catch{}else XP=null;Uw=function(t){if(this instanceof Uw)throw new TypeError("Symbol is not a constructor");return Nf(t)};var mvt=Nf=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return T0e?XP(t):(r=gvt(Uw.prototype),t=t===void 0?"":String(t),zU(r,{__description__:M0("",t),__name__:M0("",vvt(t))}))};dvt(Nf);pvt(Nf);zU(Uw.prototype,{constructor:M0(Nf),toString:M0("",function(){return this.__name__})});zU(Nf.prototype,{toString:M0(function(){return"Symbol ("+RU(this).__description__+")"}),valueOf:M0(function(){return RU(this)})});ZP(Nf.prototype,Nf.toPrimitive,M0("",function(){var e=RU(this);return typeof e=="symbol"?e:e.toString()}));ZP(Nf.prototype,Nf.toStringTag,M0("c","Symbol"));ZP(Uw.prototype,Nf.toStringTag,M0("c",Nf.prototype[Nf.toStringTag]));ZP(Uw.prototype,Nf.toPrimitive,M0("c",Nf.prototype[Nf.toPrimitive]));var sb=nvt()?WP.Symbol:mvt,yvt=e1,xvt=function(){return yvt(this).length=0,this},iM=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e},bvt=$w,_vt=LU,wvt=Object.prototype.toString,Tvt=function(e){if(!bvt(e))return null;if(_vt(e)){var t=e.toString;if(typeof t!="function"||t===wvt)return null}try{return""+e}catch{return null}},Avt=function(e){try{return e.toString()}catch{try{return String(e)}catch{return null}}},Svt=Avt,Mvt=/[\n\r\u2028\u2029]/g,kvt=function(e){var t=Svt(e);return t===null?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"\u2026"),t=t.replace(Mvt,function(r){switch(r){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),t)},A0e=$w,Evt=LU,Cvt=Tvt,Lvt=kvt,S0e=function(e,t){return e.replace("%v",Lvt(t))},M0e=function(e,t,r){if(!Evt(r))throw new TypeError(S0e(t,e));if(!A0e(e)){if("default"in r)return r.default;if(r.isOptional)return null}var a=Cvt(r.errorMessage);throw A0e(a)||(a=t),new TypeError(S0e(a,e))},Pvt=M0e,Ivt=$w,Dvt=function(e){return Ivt(e)?e:Pvt(e,"Cannot use %v",arguments[1])},Rvt=M0e,zvt=l0e,Fvt=function(e){return zvt(e)?e:Rvt(e,"%v is not a plain function",arguments[1])},Ovt=function(){var e=Array.from,t,r;return typeof e!="function"?!1:(t=["raz","dwa"],r=e(t),Boolean(r&&r!==t&&r[1]==="dwa"))},Nvt=Object.prototype.toString,Bvt=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/),$vt=function(e){return typeof e=="function"&&Bvt(Nvt.call(e))},Uvt=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1},Hvt=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1},Gvt=Uvt()?Math.sign:Hvt,Vvt=Gvt,jvt=Math.abs,qvt=Math.floor,Yvt=function(e){return isNaN(e)?0:(e=Number(e),e===0||!isFinite(e)?e:Vvt(e)*qvt(jvt(e)))},Wvt=Yvt,Xvt=Math.max,Zvt=function(e){return Xvt(0,Wvt(e))},Kvt=sb.iterator,Jvt=qP,Qvt=$vt,edt=Zvt,k0e=iM,tdt=e1,rdt=ob,adt=YP,E0e=Array.isArray,FU=Function.prototype.call,lb={configurable:!0,enumerable:!0,writable:!0,value:null},OU=Object.defineProperty,ndt=function(e){var t=arguments[1],r=arguments[2],a,n,o,i,s,l,u,f,c,h;if(e=Object(tdt(e)),rdt(t)&&k0e(t),!this||this===Array||!Qvt(this)){if(!t){if(Jvt(e))return s=e.length,s!==1?Array.apply(null,e):(i=new Array(1),i[0]=e[0],i);if(E0e(e)){for(i=new Array(s=e.length),n=0;n<s;++n)i[n]=e[n];return i}}i=[]}else a=this;if(!E0e(e)){if((c=e[Kvt])!==void 0){for(u=k0e(c).call(e),a&&(i=new a),f=u.next(),n=0;!f.done;)h=t?FU.call(t,r,f.value,n):f.value,a?(lb.value=h,OU(i,n,lb)):i[n]=h,f=u.next(),++n;s=n}else if(adt(e)){for(s=e.length,a&&(i=new a),n=0,o=0;n<s;++n)h=e[n],n+1<s&&(l=h.charCodeAt(0),l>=55296&&l<=56319&&(h+=e[++n])),h=t?FU.call(t,r,h,o):h,a?(lb.value=h,OU(i,o,lb)):i[o]=h,++o;s=o}}if(s===void 0)for(s=edt(e.length),a&&(i=new a(s)),n=0;n<s;++n)h=t?FU.call(t,r,e[n],n):e[n],a?(lb.value=h,OU(i,n,lb)):i[n]=h;return a&&(lb.value=null,i.length=s),i},idt=Ovt()?Array.from:ndt,odt=idt,sdt=PU,ldt=e1,udt=function(e){var t=Object(ldt(e)),r=arguments[1],a=Object(arguments[2]);if(t!==e&&!r)return t;var n={};return r?odt(r,function(o){(a.ensure||o in e)&&(n[o]=e[o])}):sdt(n,e),n},fdt=iM,cdt=e1,hdt=Function.prototype.bind,C0e=Function.prototype.call,vdt=Object.keys,ddt=Object.prototype.propertyIsEnumerable,pdt=function(e,t){return function(r,a){var n,o=arguments[2],i=arguments[3];return r=Object(cdt(r)),fdt(a),n=vdt(r),i&&n.sort(typeof i=="function"?hdt.call(i,r):void 0),typeof e!="function"&&(e=n[e]),C0e.call(e,n,function(s,l){return ddt.call(r,s)?C0e.call(a,o,r[s],s,r,l):t})}},gdt=pdt("forEach"),mdt=iM,ydt=gdt,xdt=Function.prototype.call,bdt=function(e,t){var r={},a=arguments[2];return mdt(t),ydt(e,function(n,o,i,s){r[o]=xdt.call(t,a,n,o,i,s)}),r},_dt=$w,wdt=Dvt,L0e=Fvt,Tdt=udt,Adt=u0e,Sdt=bdt,Mdt=Function.prototype.bind,kdt=Object.defineProperty,Edt=Object.prototype.hasOwnProperty,P0e;P0e=function(e,t,r){var a=wdt(t)&&L0e(t.value),n;return n=Tdt(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&Edt.call(this,e)?a:(t.value=Mdt.call(a,r.resolveContext?r.resolveContext(this):this),kdt(this,e,t),this[e])},n};var Cdt=function(e){var t=Adt(arguments[1]);return _dt(t.resolveContext)&&L0e(t.resolveContext),Sdt(e,function(r,a){return P0e(a,r,t)})},Ldt=xvt,Pdt=PU,Idt=iM,Ddt=e1,bh=pm.exports,Rdt=Cdt,I0e=sb,D0e=Object.defineProperty,R0e=Object.defineProperties,oM,z0e=oM=function(e,t){if(!(this instanceof oM))throw new TypeError("Constructor requires 'new'");R0e(this,{__list__:bh("w",Ddt(e)),__context__:bh("w",t),__nextIndex__:bh("w",0)}),!!t&&(Idt(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))};delete oM.prototype.constructor;R0e(oM.prototype,Pdt({_next:bh(function(){var e;if(!!this.__list__){if(this.__redo__&&(e=this.__redo__.shift(),e!==void 0))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:bh(function(){return this._createResult(this._next())}),_createResult:bh(function(e){return e===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:bh(function(e){return this.__list__[e]}),_unBind:bh(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:bh(function(){return"[object "+(this[I0e.toStringTag]||"Object")+"]"})},Rdt({_onAdd:bh(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){D0e(this,"__redo__",bh("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:bh(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(r,a){r>e&&(this.__redo__[a]=--r)},this)))}),_onClear:bh(function(){this.__redo__&&Ldt.call(this.__redo__),this.__nextIndex__=0})})));D0e(oM.prototype,I0e.iterator,bh(function(){return this}));var F0e=CU,O0e=f0e,NU=pm.exports,zdt=sb,BU=z0e,N0e=Object.defineProperty,Hw;Hw=g0e.exports=function(e,t){if(!(this instanceof Hw))throw new TypeError("Constructor requires 'new'");BU.call(this,e),t?O0e.call(t,"key+value")?t="key+value":O0e.call(t,"key")?t="key":t="value":t="value",N0e(this,"__kind__",NU("",t))};F0e&&F0e(Hw,BU);delete Hw.prototype.constructor;Hw.prototype=Object.create(BU.prototype,{_resolve:NU(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})});N0e(Hw.prototype,zdt.toStringTag,NU("c","Array Iterator"));var B0e={exports:{}},$0e=CU,KP=pm.exports,Fdt=sb,$U=z0e,U0e=Object.defineProperty,Gw;Gw=B0e.exports=function(e){if(!(this instanceof Gw))throw new TypeError("Constructor requires 'new'");e=String(e),$U.call(this,e),U0e(this,"__length__",KP("",e.length))};$0e&&$0e(Gw,$U);delete Gw.prototype.constructor;Gw.prototype=Object.create($U.prototype,{_next:KP(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:KP(function(e){var t=this.__list__[e],r;return this.__nextIndex__===this.__length__?t:(r=t.charCodeAt(0),r>=55296&&r<=56319?t+this.__list__[this.__nextIndex__++]:t)})});U0e(Gw.prototype,Fdt.toStringTag,KP("c","String Iterator"));var Odt=qP,Ndt=ob,Bdt=YP,$dt=sb.iterator,Udt=Array.isArray,Hdt=function(e){return Ndt(e)?Udt(e)||Bdt(e)||Odt(e)?!0:typeof e[$dt]=="function":!1},Gdt=Hdt,Vdt=function(e){if(!Gdt(e))throw new TypeError(e+" is not iterable");return e},jdt=qP,qdt=YP,H0e=g0e.exports,Ydt=B0e.exports,Wdt=Vdt,G0e=sb.iterator,V0e=function(e){return typeof Wdt(e)[G0e]=="function"?e[G0e]():jdt(e)?new H0e(e):qdt(e)?new Ydt(e):new H0e(e)},Xdt=qP,Zdt=iM,Kdt=YP,Jdt=V0e,Qdt=Array.isArray,UU=Function.prototype.call,ept=Array.prototype.some,tpt=function(e,t){var r,a=arguments[2],n,o,i,s,l,u,f;if(Qdt(e)||Xdt(e)?r="array":Kdt(e)?r="string":e=Jdt(e),Zdt(t),o=function(){i=!0},r==="array"){ept.call(e,function(c){return UU.call(t,a,c,o),i});return}if(r==="string"){for(l=e.length,s=0;s<l&&(u=e[s],s+1<l&&(f=u.charCodeAt(0),f>=55296&&f<=56319&&(u+=e[++s])),UU.call(t,a,u,o),!i);++s);return}for(n=e.next();!n.done;){if(UU.call(t,a,n.value,o),i)return;n=e.next()}},rpt=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}(),apt=ob,JP=CU,QP=_ht,npt=e1,ipt=Aht,gm=pm.exports,opt=V0e,spt=tpt,lpt=sb.toStringTag,j0e=rpt,upt=Array.isArray,HU=Object.defineProperty,GU=Object.prototype.hasOwnProperty,fpt=Object.getPrototypeOf,t1,cpt=t1=function(){var e=arguments[0],t;if(!(this instanceof t1))throw new TypeError("Constructor requires 'new'");return t=j0e&&JP&&WeakMap!==t1?JP(new WeakMap,fpt(this)):this,apt(e)&&(upt(e)||(e=opt(e))),HU(t,"__weakMapData__",gm("c","$weakMap$"+ipt())),e&&spt(e,function(r){npt(r),t.set(r[0],r[1])}),t};j0e&&(JP&&JP(t1,WeakMap),t1.prototype=Object.create(WeakMap.prototype,{constructor:gm(t1)}));Object.defineProperties(t1.prototype,{delete:gm(function(e){return GU.call(QP(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:gm(function(e){if(!!GU.call(QP(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:gm(function(e){return GU.call(QP(e),this.__weakMapData__)}),set:gm(function(e,t){return HU(QP(e),this.__weakMapData__,gm("c",t)),this}),toString:gm(function(){return"[object WeakMap]"})});HU(t1.prototype,lpt,gm("c","WeakMap"));var q0e=sht()?WeakMap:cpt,hpt=function(e,t,r){if(typeof Array.prototype.findIndex=="function")return e.findIndex(t,r);if(typeof t!="function")throw new TypeError("predicate must be a function");var a=Object(e),n=a.length;if(n===0)return-1;for(var o=0;o<n;o++)if(t.call(r,a[o],o,a))return o;return-1};const eI=qx,vpt=Dw,VU=Rl,Vw=wU,dpt=dm,ppt=Rw,Y0e=AU.exports,gpt=iht,{float32:mpt,fract32:jU}=Jy.exports,ypt=q0e,W0e=WS,xpt=hpt;var X0e=qo;function qo(e,t){if(!(this instanceof qo))return new qo(e,t);if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=qo.shaders.has(e)?qo.shaders.get(e):qo.shaders.set(e,qo.createShaders(e)).get(e),this.update(t)}qo.dashMult=2;qo.maxPatternLength=256;qo.precisionThreshold=3e6;qo.maxPoints=1e4;qo.maxLines=2048;qo.shaders=new ypt;qo.createShaders=function(e){let t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:(i,s)=>s.join==="round"?2:1,miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:(i,s)=>[s.viewport.x,s.viewport.y,i.viewportWidth,i.viewportHeight],depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(i,s)=>!s.overlay},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},a=e(VU({vert:Vw("./rect-vert.glsl"),frag:Vw("./rect-frag.glsl"),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r)),n;try{n=e(VU({cull:{enable:!0,face:"back"},vert:Vw("./miter-vert.glsl"),frag:Vw("./miter-frag.glsl"),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch{n=a}return{fill:e({primitive:"triangle",elements:(i,s)=>s.triangles,offset:0,vert:Vw("./fill-vert.glsl"),frag:Vw("./fill-frag.glsl"),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:(i,s)=>[s.viewport.x,s.viewport.y,i.viewportWidth,i.viewportHeight]},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport}),rect:a,miter:n}};qo.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};qo.prototype.render=function(...e){e.length&&this.update(...e),this.draw()};qo.prototype.draw=function(...e){return(e.length?e:this.passes).forEach((t,r)=>{if(t&&Array.isArray(t))return this.draw(...t);typeof t=="number"&&(t=this.passes[t]),!!(t&&t.count>1&&t.opacity)&&(this.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&this.shaders.fill(t),!!t.thickness&&(t.scale[0]*t.viewport.width>qo.precisionThreshold||t.scale[1]*t.viewport.height>qo.precisionThreshold?this.shaders.rect(t):t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=qo.maxPoints)?this.shaders.rect(t):this.shaders.miter(t)))}),this};qo.prototype.update=function(e){if(!e)return;e.length!=null?typeof e[0]=="number"&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);let{regl:t,gl:r}=this;if(e.forEach((n,o)=>{let i=this.passes[o];if(n!==void 0){if(n===null){this.passes[o]=null;return}if(typeof n[0]=="number"&&(n={positions:n}),n=dpt(n,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),i||(this.passes[o]=i={id:o,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},n=VU({},qo.defaults,n)),n.thickness!=null&&(i.thickness=parseFloat(n.thickness)),n.opacity!=null&&(i.opacity=parseFloat(n.opacity)),n.miterLimit!=null&&(i.miterLimit=parseFloat(n.miterLimit)),n.overlay!=null&&(i.overlay=!!n.overlay,o<qo.maxLines&&(i.depth=2*(qo.maxLines-1-o%qo.maxLines)/qo.maxLines-1)),n.join!=null&&(i.join=n.join),n.hole!=null&&(i.hole=n.hole),n.fill!=null&&(i.fill=n.fill?eI(n.fill,"uint8"):null),n.viewport!=null&&(i.viewport=W0e(n.viewport)),i.viewport||(i.viewport=W0e([r.drawingBufferWidth,r.drawingBufferHeight])),n.close!=null&&(i.close=n.close),n.positions===null&&(n.positions=[]),n.positions){let u,f;if(n.positions.x&&n.positions.y){let p=n.positions.x,d=n.positions.y;f=i.count=Math.max(p.length,d.length),u=new Float64Array(f*2);for(let g=0;g<f;g++)u[g*2]=p[g],u[g*2+1]=d[g]}else u=ppt(n.positions,"float64"),f=i.count=Math.floor(u.length/2);let c=i.bounds=vpt(u,2);if(i.fill){let p=[],d={},g=0;for(let m=0,y=0,_=i.count;m<_;m++){let S=u[m*2],M=u[m*2+1];isNaN(S)||isNaN(M)||S==null||M==null?(S=u[g*2],M=u[g*2+1],d[m]=g):g=m,p[y++]=S,p[y++]=M}if(n.splitNull){i.count-1 in d||(d[i.count]=i.count-1);let m=Object.keys(d).map(Number).sort((M,w)=>M-w),y=[],_=0,S=i.hole!=null?i.hole[0]:null;if(S!=null){let M=xpt(m,w=>w>=S);m=m.slice(0,M),m.push(S)}for(let M=0;M<m.length;M++){let w=p.slice(_*2,m[M]*2).concat(S?p.slice(S*2):[]),A=(i.hole||[]).map(T=>T-S+(m[M]-_)),k=Y0e(w,A);k=k.map(T=>T+_+(T+_<m[M]?0:S-m[M])),y.push(...k),_=m[M]+1}for(let M=0,w=y.length;M<w;M++)d[y[M]]!=null&&(y[M]=d[y[M]]);i.triangles=y}else{let m=Y0e(p,i.hole||[]);for(let y=0,_=m.length;y<_;y++)d[m[y]]!=null&&(m[y]=d[m[y]]);i.triangles=m}}let h=new Float64Array(u);gpt(h,2,c);let v=new Float64Array(f*2+6);i.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[0]=h[f*2-4],v[1]=h[f*2-3]):(v[0]=h[f*2-2],v[1]=h[f*2-1]):(v[0]=h[0],v[1]=h[1]),v.set(h,2),i.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[f*2+2]=h[2],v[f*2+3]=h[3],i.count-=1):(v[f*2+2]=h[0],v[f*2+3]=h[1],v[f*2+4]=h[2],v[f*2+5]=h[3]):(v[f*2+2]=h[f*2-2],v[f*2+3]=h[f*2-1],v[f*2+4]=h[f*2-2],v[f*2+5]=h[f*2-1]);var s=mpt(v);i.positionBuffer(s);var l=jU(v,s);i.positionFractBuffer(l)}if(n.range?i.range=n.range:i.range||(i.range=i.bounds),(n.range||n.positions)&&i.count){let u=i.bounds,f=u[2]-u[0],c=u[3]-u[1],h=i.range[2]-i.range[0],v=i.range[3]-i.range[1];i.scale=[f/h,c/v],i.translate=[-i.range[0]/h+u[0]/h||0,-i.range[1]/v+u[1]/v||0],i.scaleFract=jU(i.scale),i.translateFract=jU(i.translate)}if(n.dashes){let u=0,f;if(!n.dashes||n.dashes.length<2)u=1,f=new Uint8Array([255,255,255,255,255,255,255,255]);else{u=0;for(let v=0;v<n.dashes.length;++v)u+=n.dashes[v];f=new Uint8Array(u*qo.dashMult);let c=0,h=255;for(let v=0;v<2;v++)for(let p=0;p<n.dashes.length;++p){for(let d=0,g=n.dashes[p]*qo.dashMult*.5;d<g;++d)f[c++]=h;h^=255}}i.dashLength=u,i.dashTexture({channels:1,data:f,width:f.length,height:1,mag:"linear",min:"linear"},0,0)}if(n.color){let u=i.count,f=n.color;f||(f="transparent");let c=new Uint8Array(u*4+4);if(!Array.isArray(f)||typeof f[0]=="number"){let h=eI(f,"uint8");for(let v=0;v<u+1;v++)c.set(h,v*4)}else{for(let h=0;h<u;h++){let v=eI(f[h],"uint8");c.set(v,h*4)}c.set(eI(f[0],"uint8"),u*4)}i.colorBuffer({usage:"dynamic",type:"uint8",data:c})}}}),e.length<this.passes.length){for(let n=e.length;n<this.passes.length;n++){let o=this.passes[n];!o||(o.colorBuffer.destroy(),o.positionBuffer.destroy(),o.dashTexture.destroy())}this.passes.length=e.length}let a=[];for(let n=0;n<this.passes.length;n++)this.passes[n]!==null&&a.push(this.passes[n]);return this.passes=a,this};qo.prototype.destroy=function(){return this.passes.forEach(e=>{e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this};const bpt=Dw,_pt=qx,wpt=Xpe,Tpt=dm,Z0e=Rl,K0e=Rw,{float32:Apt,fract32:qU}=Jy.exports;var Spt=Mpt;const J0e=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function Mpt(e,t){if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let r=e._gl,a,n,o,i,s,l,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},f=[];return i=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),n=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=e.buffer({usage:"static",type:"float",data:J0e}),p(t),a=e({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:(g,m)=>[m.viewport.x,m.viewport.y,g.viewportWidth,g.viewportHeight]},attributes:{color:{buffer:i,offset:(g,m)=>m.offset*4,divisor:1},position:{buffer:n,offset:(g,m)=>m.offset*8,divisor:1},positionFract:{buffer:o,offset:(g,m)=>m.offset*8,divisor:1},error:{buffer:s,offset:(g,m)=>m.offset*16,divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:J0e.length}),Z0e(c,{update:p,draw:h,destroy:d,regl:e,gl:r,canvas:r.canvas,groups:f}),c;function c(g){g?p(g):g===null&&d(),h()}function h(g){if(typeof g=="number")return v(g);g&&!Array.isArray(g)&&(g=[g]),e._refresh(),f.forEach((m,y)=>{if(!!m){if(g&&(g[y]?m.draw=!0:m.draw=!1),!m.draw){m.draw=!0;return}v(y)}})}function v(g){typeof g=="number"&&(g=f[g]),g!=null&&(!(g&&g.count&&g.color&&g.opacity&&g.positions&&g.positions.length>1)||(g.scaleRatio=[g.scale[0]*g.viewport.width,g.scale[1]*g.viewport.height],a(g),g.after&&g.after(g)))}function p(g){if(!g)return;g.length!=null?typeof g[0]=="number"&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);let m=0,y=0;if(c.groups=f=g.map((M,w)=>{let A=f[w];if(M)typeof M=="function"?M={after:M}:typeof M[0]=="number"&&(M={positions:M});else return A;return M=Tpt(M,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),A||(f[w]=A={id:w,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},M=Z0e({},u,M)),wpt(A,M,[{lineWidth:k=>+k*.5,capSize:k=>+k*.5,opacity:parseFloat,errors:k=>(k=K0e(k),y+=k.length,k),positions:(k,T)=>(k=K0e(k,"float64"),T.count=Math.floor(k.length/2),T.bounds=bpt(k,2),T.offset=m,m+=T.count,k)},{color:(k,T)=>{let L=T.count;if(k||(k="transparent"),!Array.isArray(k)||typeof k[0]=="number"){let I=k;k=Array(L);for(let R=0;R<L;R++)k[R]=I}if(k.length<L)throw Error("Not enough colors");let C=new Uint8Array(L*4);for(let I=0;I<L;I++){let R=_pt(k[I],"uint8");C.set(R,I*4)}return C},range:(k,T,L)=>{let C=T.bounds;return k||(k=C),T.scale=[1/(k[2]-k[0]),1/(k[3]-k[1])],T.translate=[-k[0],-k[1]],T.scaleFract=qU(T.scale),T.translateFract=qU(T.translate),k},viewport:k=>{let T;return Array.isArray(k)?T={x:k[0],y:k[1],width:k[2]-k[0],height:k[3]-k[1]}:k?(T={x:k.x||k.left||0,y:k.y||k.top||0},k.right?T.width=k.right-T.x:T.width=k.w||k.width||0,k.bottom?T.height=k.bottom-T.y:T.height=k.h||k.height||0):T={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight},T}}]),A}),m||y){let M=f.reduce((T,L,C)=>T+(L?L.count:0),0),w=new Float64Array(M*2),A=new Uint8Array(M*4),k=new Float32Array(M*4);f.forEach((T,L)=>{if(!T)return;let{positions:C,count:I,offset:R,color:B,errors:N}=T;!I||(A.set(B,R*4),k.set(N,R*4),w.set(C,R*2))});var _=Apt(w);n(_);var S=qU(w,_);o(S),i(A),s(k)}}function d(){n.destroy(),o.destroy(),i.destroy(),s.destroy(),l.destroy()}}var Q0e=/[\'\"]/,kpt=function(t){return t?(Q0e.test(t.charAt(0))&&(t=t.substr(1)),Q0e.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""},ege=["inherit","initial","unset"],tge=["caption","icon","menu","message-box","small-caption","status-bar"],rge=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],age=["normal","italic","oblique"],nge=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"];function ige(e,t){if(typeof e!="string")return[e];var r=[e];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var a=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],n=t.escape||"___",o=!!t.flat;a.forEach(function(l){var u=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),f=[];function c(h,v,p){var d=r.push(h.slice(l[0].length,-l[1].length))-1;return f.push(d),n+d+n}r.forEach(function(h,v){for(var p,d=0;h!=p;)if(p=h,h=h.replace(u,c),d++>1e4)throw Error("References have circular dependency. Please, check them.");r[v]=h}),f=f.reverse(),r=r.map(function(h){return f.forEach(function(v){h=h.replace(new RegExp("(\\"+n+v+"\\"+n+")","g"),l[0]+"$1"+l[1])}),h})});var i=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(l,u,f){for(var c=[],h,v=0;h=i.exec(l);){if(v++>1e4)throw Error("Circular references in parenthesis");c.push(l.slice(0,h.index)),c.push(s(u[h[1]],u)),l=l.slice(h.index+h[0].length)}return c.push(l),c}return o?r:s(r[0],r)}function oge(e,t){if(t&&t.flat){var r=t&&t.escape||"___",a=e[0],n;if(!a)return"";for(var o=new RegExp("\\"+r+"([0-9]+)\\"+r),i=0;a!=n;){if(i++>1e4)throw Error("Circular references in "+e);n=a,a=a.replace(o,s)}return a}return e.reduce(function l(u,f){return Array.isArray(f)&&(f=f.reduce(l,"")),u+f},"");function s(l,u){if(e[u]==null)throw Error("Reference "+u+"is undefined");return e[u]}}function YU(e,t){return Array.isArray(e)?oge(e,t):ige(e,t)}YU.parse=ige;YU.stringify=oge;var Ept=YU,sge=Ept,Cpt=function(t,r,a){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");a?(typeof a=="string"||Array.isArray(a))&&(a={ignore:a}):a={},a.escape==null&&(a.escape=!0),a.ignore==null?a.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof a.ignore=="string"&&(a.ignore=[a.ignore]),a.ignore=a.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var n=sge.parse(t,{flat:!0,brackets:a.ignore}),o=n[0],i=o.split(r);if(a.escape){for(var s=[],l=0;l<i.length;l++){var u=i[l],f=i[l+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(s.push(u+r+f),l++):s.push(u)}i=s}for(var l=0;l<i.length;l++)n[0]=i[l],i[l]=sge.stringify(n,{flat:!0});return i},Lpt=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"],Ppt=Lpt,lge={isSize:function(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||Ppt.indexOf(t)!==-1}},Ipt=kpt,Dpt=ege,Rpt=tge,zpt=rge,Fpt=age,Opt=nge,WU=Cpt,Npt=lge.isSize,Bpt=uge,sM=uge.cache={};function uge(e){if(typeof e!="string")throw new Error("Font argument must be a string.");if(sM[e])return sM[e];if(e==="")throw new Error("Cannot parse an empty string.");if(Rpt.indexOf(e)!==-1)return sM[e]={system:e};for(var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=WU(e,/\s+/),a;a=r.shift();){if(Dpt.indexOf(a)!==-1)return["style","variant","weight","stretch"].forEach(function(o){t[o]=a}),sM[e]=t;if(Fpt.indexOf(a)!==-1){t.style=a;continue}if(a==="normal"||a==="small-caps"){t.variant=a;continue}if(Opt.indexOf(a)!==-1){t.stretch=a;continue}if(zpt.indexOf(a)!==-1){t.weight=a;continue}if(Npt(a)){var n=WU(a,"/");if(t.size=n[0],n[1]!=null?t.lineHeight=fge(n[1]):r[0]==="/"&&(r.shift(),t.lineHeight=fge(r.shift())),!r.length)throw new Error("Missing required font-family.");return t.family=WU(r.join(" "),/\s*,\s*/).map(Ipt),sM[e]=t}throw new Error("Unknown or unsupported font token: "+a)}throw new Error("Missing required font-size.")}function fge(e){var t=parseFloat(e);return t.toString()===e?t:e}var $pt=dm,Upt=lge.isSize,Hpt=uM(ege),Gpt=uM(tge),Vpt=uM(rge),jpt=uM(age),qpt=uM(nge),Ypt={normal:1,"small-caps":1},Wpt={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},XU={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"},cge=function(t){if(t=$pt(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),t.system)return t.system&&lM(t.system,Gpt),t.system;if(lM(t.style,jpt),lM(t.variant,Ypt),lM(t.weight,Vpt),lM(t.stretch,qpt),t.size==null&&(t.size=XU.size),typeof t.size=="number"&&(t.size+="px"),!Upt)throw Error("Bad size value `"+t.size+"`");t.family||(t.family=XU.family),Array.isArray(t.family)&&(t.family.length||(t.family=[XU.family]),t.family=t.family.map(function(a){return Wpt[a]?a:'"'+a+'"'}).join(", "));var r=[];return r.push(t.style),t.variant!==t.style&&r.push(t.variant),t.weight!==t.variant&&t.weight!==t.style&&r.push(t.weight),t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style&&r.push(t.stretch),r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""=="1"?"":"/"+t.lineHeight)),r.push(t.family),r.filter(Boolean).join(" ")};function lM(e,t){if(e&&!t[e]&&!Hpt[e])throw Error("Unknown keyword `"+e+"`");return e}function uM(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=1;return t}var Xpt={parse:Bpt,stringify:cge},ZU={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(ll,function(){var r=function(me){return me instanceof Uint8Array||me instanceof Uint16Array||me instanceof Uint32Array||me instanceof Int8Array||me instanceof Int16Array||me instanceof Int32Array||me instanceof Float32Array||me instanceof Float64Array||me instanceof Uint8ClampedArray},a=function(me,Fe){for(var He=Object.keys(Fe),et=0;et<He.length;++et)me[He[et]]=Fe[He[et]];return me},n=`
`;function o(me){return typeof atob!="undefined"?atob(me):"base64:"+me}function i(me){var Fe=new Error("(regl) "+me);throw console.error(Fe),Fe}function s(me,Fe){me||i(Fe)}function l(me){return me?": "+me:""}function u(me,Fe,He){me in Fe||i("unknown parameter ("+me+")"+l(He)+". possible values: "+Object.keys(Fe).join())}function f(me,Fe){r(me)||i("invalid parameter type"+l(Fe)+". must be a typed array")}function c(me,Fe){switch(Fe){case"number":return typeof me=="number";case"object":return typeof me=="object";case"string":return typeof me=="string";case"boolean":return typeof me=="boolean";case"function":return typeof me=="function";case"undefined":return typeof me=="undefined";case"symbol":return typeof me=="symbol"}}function h(me,Fe,He){c(me,Fe)||i("invalid parameter type"+l(He)+". expected "+Fe+", got "+typeof me)}function v(me,Fe){me>=0&&(me|0)===me||i("invalid parameter type, ("+me+")"+l(Fe)+". must be a nonnegative integer")}function p(me,Fe,He){Fe.indexOf(me)<0&&i("invalid value"+l(He)+". must be one of: "+Fe)}var d=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(me){Object.keys(me).forEach(function(Fe){d.indexOf(Fe)<0&&i('invalid regl constructor argument "'+Fe+'". must be one of '+d)})}function m(me,Fe){for(me=me+"";me.length<Fe;)me=" "+me;return me}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function _(me,Fe){this.number=me,this.line=Fe,this.errors=[]}function S(me,Fe,He){this.file=me,this.line=Fe,this.message=He}function M(){var me=new Error,Fe=(me.stack||me).toString(),He=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Fe);if(He)return He[1];var et=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Fe);return et?et[1]:"unknown"}function w(){var me=new Error,Fe=(me.stack||me).toString(),He=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Fe);if(He)return He[1];var et=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Fe);return et?et[1]:"unknown"}function A(me,Fe){var He=me.split(`
`),et=1,ht=0,ct={unknown:new y,0:new y};ct.unknown.name=ct[0].name=Fe||M(),ct.unknown.lines.push(new _(0,""));for(var At=0;At<He.length;++At){var Bt=He[At],Yt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Bt);if(Yt)switch(Yt[1]){case"line":var Qt=/(\d+)(\s+\d+)?/.exec(Yt[2]);Qt&&(et=Qt[1]|0,Qt[2]&&(ht=Qt[2]|0,ht in ct||(ct[ht]=new y)));break;case"define":var er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Yt[2]);er&&(ct[ht].name=er[1]?o(er[2]):er[2]);break}ct[ht].lines.push(new _(et++,Bt))}return Object.keys(ct).forEach(function(ir){var mr=ct[ir];mr.lines.forEach(function(or){mr.index[or.number]=or})}),ct}function k(me){var Fe=[];return me.split(`
`).forEach(function(He){if(!(He.length<5)){var et=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(He);et?Fe.push(new S(et[1]|0,et[2]|0,et[3].trim())):He.length>0&&Fe.push(new S("unknown",0,He))}}),Fe}function T(me,Fe){Fe.forEach(function(He){var et=me[He.file];if(et){var ht=et.index[He.line];if(ht){ht.errors.push(He),et.hasErrors=!0;return}}me.unknown.hasErrors=!0,me.unknown.lines[0].errors.push(He)})}function L(me,Fe,He,et,ht){if(!me.getShaderParameter(Fe,me.COMPILE_STATUS)){var ct=me.getShaderInfoLog(Fe),At=et===me.FRAGMENT_SHADER?"fragment":"vertex";O(He,"string",At+" shader source must be a string",ht);var Bt=A(He,ht),Yt=k(ct);T(Bt,Yt),Object.keys(Bt).forEach(function(Qt){var er=Bt[Qt];if(!er.hasErrors)return;var ir=[""],mr=[""];function or(dr,Rt){ir.push(dr),mr.push(Rt||"")}or("file number "+Qt+": "+er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),er.lines.forEach(function(dr){if(dr.errors.length>0){or(m(dr.number,4)+"|  ","background-color:yellow; font-weight:bold"),or(dr.line+n,"color:red; background-color:yellow; font-weight:bold");var Rt=0;dr.errors.forEach(function(tr){var Lr=tr.message,ra=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lr);if(ra){var Mr=ra[1];switch(Lr=ra[2],Mr){case"assign":Mr="=";break}Rt=Math.max(dr.line.indexOf(Mr,Rt),0)}else Rt=0;or(m("| ",6)),or(m("^^^",Rt+3)+n,"font-weight:bold"),or(m("| ",6)),or(Lr+n,"font-weight:bold")}),or(m("| ",6)+n)}else or(m(dr.number,4)+"|  "),or(dr.line+n,"color:red")}),typeof document!="undefined"&&!window.chrome?(mr[0]=ir.join("%c"),console.log.apply(console,mr)):console.log(ir.join(""))}),s.raise("Error compiling "+At+" shader, "+Bt[0].name)}}function C(me,Fe,He,et,ht){if(!me.getProgramParameter(Fe,me.LINK_STATUS)){var ct=me.getProgramInfoLog(Fe),At=A(He,ht),Bt=A(et,ht),Yt='Error linking program with vertex shader, "'+Bt[0].name+'", and fragment shader "'+At[0].name+'"';typeof document!="undefined"?console.log("%c"+Yt+n+"%c"+ct,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Yt+n+ct),s.raise(Yt)}}function I(me){me._commandRef=M()}function R(me,Fe,He,et){I(me);function ht(Yt){return Yt?et.id(Yt):0}me._fragId=ht(me.static.frag),me._vertId=ht(me.static.vert);function ct(Yt,Qt){Object.keys(Qt).forEach(function(er){Yt[et.id(er)]=!0})}var At=me._uniformSet={};ct(At,Fe.static),ct(At,Fe.dynamic);var Bt=me._attributeSet={};ct(Bt,He.static),ct(Bt,He.dynamic),me._hasCount="count"in me.static||"count"in me.dynamic||"elements"in me.static||"elements"in me.dynamic}function B(me,Fe){var He=w();i(me+" in command "+(Fe||M())+(He==="unknown"?"":" called from "+He))}function N(me,Fe,He){me||B(Fe,He||M())}function D(me,Fe,He,et){me in Fe||B("unknown parameter ("+me+")"+l(He)+". possible values: "+Object.keys(Fe).join(),et||M())}function O(me,Fe,He,et){c(me,Fe)||B("invalid parameter type"+l(He)+". expected "+Fe+", got "+typeof me,et||M())}function $(me){me()}function Y(me,Fe,He){me.texture?p(me.texture._texture.internalformat,Fe,"unsupported texture format for attachment"):p(me.renderbuffer._renderbuffer.format,He,"unsupported renderbuffer format for attachment")}var X=33071,ee=9728,Q=9984,Z=9985,q=9986,ae=9987,ie=5120,we=5121,Te=5122,he=5123,xe=5124,Se=5125,ye=5126,re=32819,se=32820,de=33635,Me=34042,Ie=36193,Ee={};Ee[ie]=Ee[we]=1,Ee[Te]=Ee[he]=Ee[Ie]=Ee[de]=Ee[re]=Ee[se]=2,Ee[xe]=Ee[Se]=Ee[ye]=Ee[Me]=4;function qe(me,Fe){return me===se||me===re||me===de?2:me===Me?4:Ee[me]*Fe}function be(me){return!(me&me-1)&&!!me}function oe(me,Fe,He){var et,ht=Fe.width,ct=Fe.height,At=Fe.channels;s(ht>0&&ht<=He.maxTextureSize&&ct>0&&ct<=He.maxTextureSize,"invalid texture shape"),(me.wrapS!==X||me.wrapT!==X)&&s(be(ht)&&be(ct),"incompatible wrap mode for texture, both width and height must be power of 2"),Fe.mipmask===1?ht!==1&&ct!==1&&s(me.minFilter!==Q&&me.minFilter!==q&&me.minFilter!==Z&&me.minFilter!==ae,"min filter requires mipmap"):(s(be(ht)&&be(ct),"texture must be a square power of 2 to support mipmapping"),s(Fe.mipmask===(ht<<1)-1,"missing or incomplete mipmap data")),Fe.type===ye&&(He.extensions.indexOf("oes_texture_float_linear")<0&&s(me.minFilter===ee&&me.magFilter===ee,"filter not supported, must enable oes_texture_float_linear"),s(!me.genMipmaps,"mipmap generation not supported with float textures"));var Bt=Fe.images;for(et=0;et<16;++et)if(Bt[et]){var Yt=ht>>et,Qt=ct>>et;s(Fe.mipmask&1<<et,"missing mipmap data");var er=Bt[et];if(s(er.width===Yt&&er.height===Qt,"invalid shape for mip images"),s(er.format===Fe.format&&er.internalformat===Fe.internalformat&&er.type===Fe.type,"incompatible type for mip image"),!er.compressed)if(er.data){var ir=Math.ceil(qe(er.type,At)*Yt/er.unpackAlignment)*er.unpackAlignment;s(er.data.byteLength===ir*Qt,"invalid data for image, buffer size is inconsistent with image format")}else er.element||er.copy}else me.genMipmaps||s((Fe.mipmask&1<<et)==0,"extra mipmap data");Fe.compressed&&s(!me.genMipmaps,"mipmap generation for compressed images not supported")}function ce(me,Fe,He,et){var ht=me.width,ct=me.height,At=me.channels;s(ht>0&&ht<=et.maxTextureSize&&ct>0&&ct<=et.maxTextureSize,"invalid texture shape"),s(ht===ct,"cube map must be square"),s(Fe.wrapS===X&&Fe.wrapT===X,"wrap mode not supported by cube map");for(var Bt=0;Bt<He.length;++Bt){var Yt=He[Bt];s(Yt.width===ht&&Yt.height===ct,"inconsistent cube map face shape"),Fe.genMipmaps&&(s(!Yt.compressed,"can not generate mipmap for compressed textures"),s(Yt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Qt=Yt.images,er=0;er<16;++er){var ir=Qt[er];if(ir){var mr=ht>>er,or=ct>>er;s(Yt.mipmask&1<<er,"missing mipmap data"),s(ir.width===mr&&ir.height===or,"invalid shape for mip images"),s(ir.format===me.format&&ir.internalformat===me.internalformat&&ir.type===me.type,"incompatible type for mip image"),ir.compressed||(ir.data?s(ir.data.byteLength===mr*or*Math.max(qe(ir.type,At),ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ir.element||ir.copy)}}}}var ue=a(s,{optional:$,raise:i,commandRaise:B,command:N,parameter:u,commandParameter:D,constructor:g,type:h,commandType:O,isTypedArray:f,nni:v,oneOf:p,shaderError:L,linkError:C,callSite:w,saveCommandRef:I,saveDrawInfo:R,framebufferFormat:Y,guessCommand:M,texture2D:oe,textureCube:ce}),Re=0,Xe=0,Ke=5,vt=6;function Ze(me,Fe){this.id=Re++,this.type=me,this.data=Fe}function Qe(me){return me.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Je(me){if(me.length===0)return[];var Fe=me.charAt(0),He=me.charAt(me.length-1);if(me.length>1&&Fe===He&&(Fe==='"'||Fe==="'"))return['"'+Qe(me.substr(1,me.length-2))+'"'];var et=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(me);if(et)return Je(me.substr(0,et.index)).concat(Je(et[1])).concat(Je(me.substr(et.index+et[0].length)));var ht=me.split(".");if(ht.length===1)return['"'+Qe(me)+'"'];for(var ct=[],At=0;At<ht.length;++At)ct=ct.concat(Je(ht[At]));return ct}function je(me){return"["+Je(me).join("][")+"]"}function $e(me,Fe){return new Ze(me,je(Fe+""))}function Ye(me){return typeof me=="function"&&!me._reglType||me instanceof Ze}function yt(me,Fe){if(typeof me=="function")return new Ze(Xe,me);if(typeof me=="number"||typeof me=="boolean")return new Ze(Ke,me);if(Array.isArray(me))return new Ze(vt,me.map(function(He,et){return yt(He,Fe+"["+et+"]")}));if(me instanceof Ze)return me;ue(!1,"invalid option type in uniform "+Fe)}var _t={DynamicVariable:Ze,define:$e,isDynamic:Ye,unbox:yt,accessor:je},Pt={next:typeof requestAnimationFrame=="function"?function(me){return requestAnimationFrame(me)}:function(me){return setTimeout(me,16)},cancel:typeof cancelAnimationFrame=="function"?function(me){return cancelAnimationFrame(me)}:clearTimeout},Tt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ot(){var me={"":0},Fe=[""];return{id:function(He){var et=me[He];return et||(et=me[He]=Fe.length,Fe.push(He),et)},str:function(He){return Fe[He]}}}function qt(me,Fe,He){var et=document.createElement("canvas");a(et.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),me.appendChild(et),me===document.body&&(et.style.position="absolute",a(me.style,{margin:0,padding:0}));function ht(){var Bt=window.innerWidth,Yt=window.innerHeight;if(me!==document.body){var Qt=et.getBoundingClientRect();Bt=Qt.right-Qt.left,Yt=Qt.bottom-Qt.top}et.width=He*Bt,et.height=He*Yt}var ct;me!==document.body&&typeof ResizeObserver=="function"?(ct=new ResizeObserver(function(){setTimeout(ht)}),ct.observe(me)):window.addEventListener("resize",ht,!1);function At(){ct?ct.disconnect():window.removeEventListener("resize",ht),me.removeChild(et)}return ht(),{canvas:et,onDestroy:At}}function Xt(me,Fe){function He(et){try{return me.getContext(et,Fe)}catch{return null}}return He("webgl")||He("experimental-webgl")||He("webgl-experimental")}function Or(me){return typeof me.nodeName=="string"&&typeof me.appendChild=="function"&&typeof me.getBoundingClientRect=="function"}function Br(me){return typeof me.drawArrays=="function"||typeof me.drawElements=="function"}function Qr(me){return typeof me=="string"?me.split():(ue(Array.isArray(me),"invalid extension array"),me)}function Sr(me){return typeof me=="string"?(ue(typeof document!="undefined","not supported outside of DOM"),document.querySelector(me)):me}function Zr(me){var Fe=me||{},He,et,ht,ct,At={},Bt=[],Yt=[],Qt=typeof window=="undefined"?1:window.devicePixelRatio,er=!1,ir=function(dr){dr&&ue.raise(dr)},mr=function(){};if(typeof Fe=="string"?(ue(typeof document!="undefined","selector queries only supported in DOM enviroments"),He=document.querySelector(Fe),ue(He,"invalid query string for element")):typeof Fe=="object"?Or(Fe)?He=Fe:Br(Fe)?(ct=Fe,ht=ct.canvas):(ue.constructor(Fe),"gl"in Fe?ct=Fe.gl:"canvas"in Fe?ht=Sr(Fe.canvas):"container"in Fe&&(et=Sr(Fe.container)),"attributes"in Fe&&(At=Fe.attributes,ue.type(At,"object","invalid context attributes")),"extensions"in Fe&&(Bt=Qr(Fe.extensions)),"optionalExtensions"in Fe&&(Yt=Qr(Fe.optionalExtensions)),"onDone"in Fe&&(ue.type(Fe.onDone,"function","invalid or missing onDone callback"),ir=Fe.onDone),"profile"in Fe&&(er=!!Fe.profile),"pixelRatio"in Fe&&(Qt=+Fe.pixelRatio,ue(Qt>0,"invalid pixel ratio"))):ue.raise("invalid arguments to regl"),He&&(He.nodeName.toLowerCase()==="canvas"?ht=He:et=He),!ct){if(!ht){ue(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var or=qt(et||document.body,ir,Qt);if(!or)return null;ht=or.canvas,mr=or.onDestroy}At.premultipliedAlpha===void 0&&(At.premultipliedAlpha=!0),ct=Xt(ht,At)}return ct?{gl:ct,canvas:ht,container:et,extensions:Bt,optionalExtensions:Yt,pixelRatio:Qt,profile:er,onDone:ir,onDestroy:mr}:(mr(),ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Oe(me,Fe){var He={};function et(At){ue.type(At,"string","extension name must be string");var Bt=At.toLowerCase(),Yt;try{Yt=He[Bt]=me.getExtension(Bt)}catch{}return!!Yt}for(var ht=0;ht<Fe.extensions.length;++ht){var ct=Fe.extensions[ht];if(!et(ct))return Fe.onDestroy(),Fe.onDone('"'+ct+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Fe.optionalExtensions.forEach(et),{extensions:He,restore:function(){Object.keys(He).forEach(function(At){if(He[At]&&!et(At))throw new Error("(regl): error restoring extension "+At)})}}}function it(me,Fe){for(var He=Array(me),et=0;et<me;++et)He[et]=Fe(et);return He}var ft=5120,pt=5121,Dt=5122,Nt=5123,hr=5124,fr=5125,vr=5126;function Ut(me){for(var Fe=16;Fe<=1<<28;Fe*=16)if(me<=Fe)return Fe;return 0}function Fr(me){var Fe,He;return Fe=(me>65535)<<4,me>>>=Fe,He=(me>255)<<3,me>>>=He,Fe|=He,He=(me>15)<<2,me>>>=He,Fe|=He,He=(me>3)<<1,me>>>=He,Fe|=He,Fe|me>>1}function sa(){var me=it(8,function(){return[]});function Fe(ct){var At=Ut(ct),Bt=me[Fr(At)>>2];return Bt.length>0?Bt.pop():new ArrayBuffer(At)}function He(ct){me[Fr(ct.byteLength)>>2].push(ct)}function et(ct,At){var Bt=null;switch(ct){case ft:Bt=new Int8Array(Fe(At),0,At);break;case pt:Bt=new Uint8Array(Fe(At),0,At);break;case Dt:Bt=new Int16Array(Fe(2*At),0,At);break;case Nt:Bt=new Uint16Array(Fe(2*At),0,At);break;case hr:Bt=new Int32Array(Fe(4*At),0,At);break;case fr:Bt=new Uint32Array(Fe(4*At),0,At);break;case vr:Bt=new Float32Array(Fe(4*At),0,At);break;default:return null}return Bt.length!==At?Bt.subarray(0,At):Bt}function ht(ct){He(ct.buffer)}return{alloc:Fe,free:He,allocType:et,freeType:ht}}var $r=sa();$r.zero=sa();var Ca=3408,on=3410,Fa=3411,jr=3412,Rn=3413,xa=3414,ia=3415,vn=33901,ka=33902,Ge=3379,Pe=3386,Ne=34921,We=36347,lt=36348,wt=35661,Mt=35660,It=34930,rr=36349,sr=34076,gr=34024,Ur=7936,Vr=7937,la=7938,Xa=35724,La=34047,en=36063,In=34852,yn=3553,On=34067,dn=34069,ni=33984,Oi=6408,No=5126,kn=5121,ds=36160,Kn=36053,_o=36064,yl=16384,xl=function(me,Fe){var He=1;Fe.ext_texture_filter_anisotropic&&(He=me.getParameter(La));var et=1,ht=1;Fe.webgl_draw_buffers&&(et=me.getParameter(In),ht=me.getParameter(en));var ct=!!Fe.oes_texture_float;if(ct){var At=me.createTexture();me.bindTexture(yn,At),me.texImage2D(yn,0,Oi,1,1,0,Oi,No,null);var Bt=me.createFramebuffer();if(me.bindFramebuffer(ds,Bt),me.framebufferTexture2D(ds,_o,yn,At,0),me.bindTexture(yn,null),me.checkFramebufferStatus(ds)!==Kn)ct=!1;else{me.viewport(0,0,1,1),me.clearColor(1,0,0,1),me.clear(yl);var Yt=$r.allocType(No,4);me.readPixels(0,0,1,1,Oi,No,Yt),me.getError()?ct=!1:(me.deleteFramebuffer(Bt),me.deleteTexture(At),ct=Yt[0]===1),$r.freeType(Yt)}}var Qt=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),er=!0;if(!Qt){var ir=me.createTexture(),mr=$r.allocType(kn,36);me.activeTexture(ni),me.bindTexture(On,ir),me.texImage2D(dn,0,Oi,3,3,0,Oi,kn,mr),$r.freeType(mr),me.bindTexture(On,null),me.deleteTexture(ir),er=!me.getError()}return{colorBits:[me.getParameter(on),me.getParameter(Fa),me.getParameter(jr),me.getParameter(Rn)],depthBits:me.getParameter(xa),stencilBits:me.getParameter(ia),subpixelBits:me.getParameter(Ca),extensions:Object.keys(Fe).filter(function(or){return!!Fe[or]}),maxAnisotropic:He,maxDrawbuffers:et,maxColorAttachments:ht,pointSizeDims:me.getParameter(vn),lineWidthDims:me.getParameter(ka),maxViewportDims:me.getParameter(Pe),maxCombinedTextureUnits:me.getParameter(wt),maxCubeMapSize:me.getParameter(sr),maxRenderbufferSize:me.getParameter(gr),maxTextureUnits:me.getParameter(It),maxTextureSize:me.getParameter(Ge),maxAttributes:me.getParameter(Ne),maxVertexUniforms:me.getParameter(We),maxVertexTextureUnits:me.getParameter(Mt),maxVaryingVectors:me.getParameter(lt),maxFragmentUniforms:me.getParameter(rr),glsl:me.getParameter(Xa),renderer:me.getParameter(Vr),vendor:me.getParameter(Ur),version:me.getParameter(la),readFloat:ct,npotTextureCube:er}};function Hi(me){return!!me&&typeof me=="object"&&Array.isArray(me.shape)&&Array.isArray(me.stride)&&typeof me.offset=="number"&&me.shape.length===me.stride.length&&(Array.isArray(me.data)||r(me.data))}var zi=function(me){return Object.keys(me).map(function(Fe){return me[Fe]})},Vn={shape:uv,flatten:Em};function nl(me,Fe,He){for(var et=0;et<Fe;++et)He[et]=me[et]}function kh(me,Fe,He,et){for(var ht=0,ct=0;ct<Fe;++ct)for(var At=me[ct],Bt=0;Bt<He;++Bt)et[ht++]=At[Bt]}function wo(me,Fe,He,et,ht,ct){for(var At=ct,Bt=0;Bt<Fe;++Bt)for(var Yt=me[Bt],Qt=0;Qt<He;++Qt)for(var er=Yt[Qt],ir=0;ir<et;++ir)ht[At++]=er[ir]}function Eh(me,Fe,He,et,ht){for(var ct=1,At=He+1;At<Fe.length;++At)ct*=Fe[At];var Bt=Fe[He];if(Fe.length-He==4){var Yt=Fe[He+1],Qt=Fe[He+2],er=Fe[He+3];for(At=0;At<Bt;++At)wo(me[At],Yt,Qt,er,et,ht),ht+=ct}else for(At=0;At<Bt;++At)Eh(me[At],Fe,He+1,et,ht),ht+=ct}function Em(me,Fe,He,et){var ht=1;if(Fe.length)for(var ct=0;ct<Fe.length;++ct)ht*=Fe[ct];else ht=0;var At=et||$r.allocType(He,ht);switch(Fe.length){case 0:break;case 1:nl(me,Fe[0],At);break;case 2:kh(me,Fe[0],Fe[1],At);break;case 3:wo(me,Fe[0],Fe[1],Fe[2],At,0);break;default:Eh(me,Fe,0,At,0)}return At}function uv(me){for(var Fe=[],He=me;He.length;He=He[0])Fe.push(He.length);return Fe}var bc={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},O0=5120,Cm=5122,ad=5124,fv=5121,N0=5123,Ch=5125,Lh=5126,uo=5126,is={int8:O0,int16:Cm,int32:ad,uint8:fv,uint16:N0,uint32:Ch,float:Lh,float32:uo},Fl=35048,nd=35040,Xl={dynamic:Fl,stream:nd,static:35044},id=Vn.flatten,Lm=Vn.shape,B0=35044,xp=35040,bp=5121,ea=5126,wa=[];wa[5120]=1,wa[5122]=2,wa[5124]=4,wa[5121]=1,wa[5123]=2,wa[5125]=4,wa[5126]=4;function _c(me){return bc[Object.prototype.toString.call(me)]|0}function wc(me,Fe){for(var He=0;He<Fe.length;++He)me[He]=Fe[He]}function Wo(me,Fe,He,et,ht,ct,At){for(var Bt=0,Yt=0;Yt<He;++Yt)for(var Qt=0;Qt<et;++Qt)me[Bt++]=Fe[ht*Yt+ct*Qt+At]}function Tc(me,Fe,He,et){var ht=0,ct={};function At(Rt){this.id=ht++,this.buffer=me.createBuffer(),this.type=Rt,this.usage=B0,this.byteLength=0,this.dimension=1,this.dtype=bp,this.persistentData=null,He.profile&&(this.stats={size:0})}At.prototype.bind=function(){me.bindBuffer(this.type,this.buffer)},At.prototype.destroy=function(){mr(this)};var Bt=[];function Yt(Rt,tr){var Lr=Bt.pop();return Lr||(Lr=new At(Rt)),Lr.bind(),ir(Lr,tr,xp,0,1,!1),Lr}function Qt(Rt){Bt.push(Rt)}function er(Rt,tr,Lr){Rt.byteLength=tr.byteLength,me.bufferData(Rt.type,tr,Lr)}function ir(Rt,tr,Lr,ra,Mr,Jr){var Dr;if(Rt.usage=Lr,Array.isArray(tr)){if(Rt.dtype=ra||ea,tr.length>0){var ga;if(Array.isArray(tr[0])){Dr=Lm(tr);for(var Pr=1,Cr=1;Cr<Dr.length;++Cr)Pr*=Dr[Cr];Rt.dimension=Pr,ga=id(tr,Dr,Rt.dtype),er(Rt,ga,Lr),Jr?Rt.persistentData=ga:$r.freeType(ga)}else if(typeof tr[0]=="number"){Rt.dimension=Mr;var oa=$r.allocType(Rt.dtype,tr.length);wc(oa,tr),er(Rt,oa,Lr),Jr?Rt.persistentData=oa:$r.freeType(oa)}else r(tr[0])?(Rt.dimension=tr[0].length,Rt.dtype=ra||_c(tr[0])||ea,ga=id(tr,[tr.length,tr[0].length],Rt.dtype),er(Rt,ga,Lr),Jr?Rt.persistentData=ga:$r.freeType(ga)):ue.raise("invalid buffer data")}}else if(r(tr))Rt.dtype=ra||_c(tr),Rt.dimension=Mr,er(Rt,tr,Lr),Jr&&(Rt.persistentData=new Uint8Array(new Uint8Array(tr.buffer)));else if(Hi(tr)){Dr=tr.shape;var ta=tr.stride,Ir=tr.offset,Wr=0,ua=0,Ja=0,nn=0;Dr.length===1?(Wr=Dr[0],ua=1,Ja=ta[0],nn=0):Dr.length===2?(Wr=Dr[0],ua=Dr[1],Ja=ta[0],nn=ta[1]):ue.raise("invalid shape"),Rt.dtype=ra||_c(tr.data)||ea,Rt.dimension=ua;var ma=$r.allocType(Rt.dtype,Wr*ua);Wo(ma,tr.data,Wr,ua,Ja,nn,Ir),er(Rt,ma,Lr),Jr?Rt.persistentData=ma:$r.freeType(ma)}else tr instanceof ArrayBuffer?(Rt.dtype=bp,Rt.dimension=Mr,er(Rt,tr,Lr),Jr&&(Rt.persistentData=new Uint8Array(new Uint8Array(tr)))):ue.raise("invalid buffer data")}function mr(Rt){Fe.bufferCount--,et(Rt);var tr=Rt.buffer;ue(tr,"buffer must not be deleted already"),me.deleteBuffer(tr),Rt.buffer=null,delete ct[Rt.id]}function or(Rt,tr,Lr,ra){Fe.bufferCount++;var Mr=new At(tr);ct[Mr.id]=Mr;function Jr(Pr){var Cr=B0,oa=null,ta=0,Ir=0,Wr=1;return Array.isArray(Pr)||r(Pr)||Hi(Pr)||Pr instanceof ArrayBuffer?oa=Pr:typeof Pr=="number"?ta=Pr|0:Pr&&(ue.type(Pr,"object","buffer arguments must be an object, a number or an array"),"data"in Pr&&(ue(oa===null||Array.isArray(oa)||r(oa)||Hi(oa),"invalid data for buffer"),oa=Pr.data),"usage"in Pr&&(ue.parameter(Pr.usage,Xl,"invalid buffer usage"),Cr=Xl[Pr.usage]),"type"in Pr&&(ue.parameter(Pr.type,is,"invalid buffer type"),Ir=is[Pr.type]),"dimension"in Pr&&(ue.type(Pr.dimension,"number","invalid dimension"),Wr=Pr.dimension|0),"length"in Pr&&(ue.nni(ta,"buffer length must be a nonnegative integer"),ta=Pr.length|0)),Mr.bind(),oa?ir(Mr,oa,Cr,Ir,Wr,ra):(ta&&me.bufferData(Mr.type,ta,Cr),Mr.dtype=Ir||bp,Mr.usage=Cr,Mr.dimension=Wr,Mr.byteLength=ta),He.profile&&(Mr.stats.size=Mr.byteLength*wa[Mr.dtype]),Jr}function Dr(Pr,Cr){ue(Cr+Pr.byteLength<=Mr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Pr.byteLength+" starting from offset "+Cr+" to a buffer of size "+Mr.byteLength),me.bufferSubData(Mr.type,Cr,Pr)}function ga(Pr,Cr){var oa=(Cr||0)|0,ta;if(Mr.bind(),r(Pr)||Pr instanceof ArrayBuffer)Dr(Pr,oa);else if(Array.isArray(Pr)){if(Pr.length>0)if(typeof Pr[0]=="number"){var Ir=$r.allocType(Mr.dtype,Pr.length);wc(Ir,Pr),Dr(Ir,oa),$r.freeType(Ir)}else if(Array.isArray(Pr[0])||r(Pr[0])){ta=Lm(Pr);var Wr=id(Pr,ta,Mr.dtype);Dr(Wr,oa),$r.freeType(Wr)}else ue.raise("invalid buffer data")}else if(Hi(Pr)){ta=Pr.shape;var ua=Pr.stride,Ja=0,nn=0,ma=0,Aa=0;ta.length===1?(Ja=ta[0],nn=1,ma=ua[0],Aa=0):ta.length===2?(Ja=ta[0],nn=ta[1],ma=ua[0],Aa=ua[1]):ue.raise("invalid shape");var an=Array.isArray(Pr.data)?Mr.dtype:_c(Pr.data),pn=$r.allocType(an,Ja*nn);Wo(pn,Pr.data,Ja,nn,ma,Aa,Pr.offset),Dr(pn,oa),$r.freeType(pn)}else ue.raise("invalid data for buffer subdata");return Jr}return Lr||Jr(Rt),Jr._reglType="buffer",Jr._buffer=Mr,Jr.subdata=ga,He.profile&&(Jr.stats=Mr.stats),Jr.destroy=function(){mr(Mr)},Jr}function dr(){zi(ct).forEach(function(Rt){Rt.buffer=me.createBuffer(),me.bindBuffer(Rt.type,Rt.buffer),me.bufferData(Rt.type,Rt.persistentData||Rt.byteLength,Rt.usage)})}return He.profile&&(Fe.getTotalBufferSize=function(){var Rt=0;return Object.keys(ct).forEach(function(tr){Rt+=ct[tr].stats.size}),Rt}),{create:or,createStream:Yt,destroyStream:Qt,clear:function(){zi(ct).forEach(mr),Bt.forEach(mr)},getBuffer:function(Rt){return Rt&&Rt._buffer instanceof At?Rt._buffer:null},restore:dr,_initBuffer:ir}}var nf=0,of=0,sf=1,Ha=1,ri=4,Hn=4,Es={points:nf,point:of,lines:sf,line:Ha,triangles:ri,triangle:Hn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Zl=0,Xn=1,lf=4,Ac=5120,il=5121,mu=5122,Po=5123,Xi=5124,Sc=5125,Vf=34963,Mc=35040,uf=35044;function I1(me,Fe,He,et){var ht={},ct=0,At={uint8:il,uint16:Po};Fe.oes_element_index_uint&&(At.uint32=Sc);function Bt(dr){this.id=ct++,ht[this.id]=this,this.buffer=dr,this.primType=lf,this.vertCount=0,this.type=0}Bt.prototype.bind=function(){this.buffer.bind()};var Yt=[];function Qt(dr){var Rt=Yt.pop();return Rt||(Rt=new Bt(He.create(null,Vf,!0,!1)._buffer)),ir(Rt,dr,Mc,-1,-1,0,0),Rt}function er(dr){Yt.push(dr)}function ir(dr,Rt,tr,Lr,ra,Mr,Jr){dr.buffer.bind();var Dr;if(Rt){var ga=Jr;!Jr&&(!r(Rt)||Hi(Rt)&&!r(Rt.data))&&(ga=Fe.oes_element_index_uint?Sc:Po),He._initBuffer(dr.buffer,Rt,tr,ga,3)}else me.bufferData(Vf,Mr,tr),dr.buffer.dtype=Dr||il,dr.buffer.usage=tr,dr.buffer.dimension=3,dr.buffer.byteLength=Mr;if(Dr=Jr,!Jr){switch(dr.buffer.dtype){case il:case Ac:Dr=il;break;case Po:case mu:Dr=Po;break;case Sc:case Xi:Dr=Sc;break;default:ue.raise("unsupported type for element array")}dr.buffer.dtype=Dr}dr.type=Dr,ue(Dr!==Sc||!!Fe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pr=ra;Pr<0&&(Pr=dr.buffer.byteLength,Dr===Po?Pr>>=1:Dr===Sc&&(Pr>>=2)),dr.vertCount=Pr;var Cr=Lr;if(Lr<0){Cr=lf;var oa=dr.buffer.dimension;oa===1&&(Cr=Zl),oa===2&&(Cr=Xn),oa===3&&(Cr=lf)}dr.primType=Cr}function mr(dr){et.elementsCount--,ue(dr.buffer!==null,"must not double destroy elements"),delete ht[dr.id],dr.buffer.destroy(),dr.buffer=null}function or(dr,Rt){var tr=He.create(null,Vf,!0),Lr=new Bt(tr._buffer);et.elementsCount++;function ra(Mr){if(!Mr)tr(),Lr.primType=lf,Lr.vertCount=0,Lr.type=il;else if(typeof Mr=="number")tr(Mr),Lr.primType=lf,Lr.vertCount=Mr|0,Lr.type=il;else{var Jr=null,Dr=uf,ga=-1,Pr=-1,Cr=0,oa=0;Array.isArray(Mr)||r(Mr)||Hi(Mr)?Jr=Mr:(ue.type(Mr,"object","invalid arguments for elements"),"data"in Mr&&(Jr=Mr.data,ue(Array.isArray(Jr)||r(Jr)||Hi(Jr),"invalid data for element buffer")),"usage"in Mr&&(ue.parameter(Mr.usage,Xl,"invalid element buffer usage"),Dr=Xl[Mr.usage]),"primitive"in Mr&&(ue.parameter(Mr.primitive,Es,"invalid element buffer primitive"),ga=Es[Mr.primitive]),"count"in Mr&&(ue(typeof Mr.count=="number"&&Mr.count>=0,"invalid vertex count for elements"),Pr=Mr.count|0),"type"in Mr&&(ue.parameter(Mr.type,At,"invalid buffer type"),oa=At[Mr.type]),"length"in Mr?Cr=Mr.length|0:(Cr=Pr,oa===Po||oa===mu?Cr*=2:(oa===Sc||oa===Xi)&&(Cr*=4))),ir(Lr,Jr,Dr,ga,Pr,Cr,oa)}return ra}return ra(dr),ra._reglType="elements",ra._elements=Lr,ra.subdata=function(Mr,Jr){return tr.subdata(Mr,Jr),ra},ra.destroy=function(){mr(Lr)},ra}return{create:or,createStream:Qt,destroyStream:er,getElements:function(dr){return typeof dr=="function"&&dr._elements instanceof Bt?dr._elements:null},clear:function(){zi(ht).forEach(mr)}}}var $0=new Float32Array(1),Si=new Uint32Array($0.buffer),cv=5123;function kc(me){for(var Fe=$r.allocType(cv,me.length),He=0;He<me.length;++He)if(isNaN(me[He]))Fe[He]=65535;else if(me[He]===1/0)Fe[He]=31744;else if(me[He]===-1/0)Fe[He]=64512;else{$0[0]=me[He];var et=Si[0],ht=et>>>31<<15,ct=(et<<1>>>24)-127,At=et>>13&(1<<10)-1;if(ct<-24)Fe[He]=ht;else if(ct<-14){var Bt=-14-ct;Fe[He]=ht+(At+(1<<10)>>Bt)}else ct>15?Fe[He]=ht+31744:Fe[He]=ht+(ct+15<<10)+At}return Fe}function Wn(me){return Array.isArray(me)||r(me)}var $s=function(me){return!(me&me-1)&&!!me},U0=34467,os=3553,Bo=34067,ff=34069,Cs=6408,fo=6406,jf=6407,ps=6409,yu=6410,qf=32854,H0=32855,Ol=36194,Pm=32819,Ec=32820,Us=33635,D1=34042,cf=6402,$u=34041,od=35904,G0=35906,hv=36193,vv=33776,V0=33777,j0=33778,q0=33779,_p=35986,Y0=35987,W0=34798,wp=35840,X0=35841,Im=35842,Z0=35843,Ph=36196,Cc=5121,Tp=5123,Ap=5125,sd=5126,K0=10242,Dm=10243,R1=10497,J0=33071,xu=33648,Sp=10240,ld=10241,dv=9728,hf=9729,vf=9984,ud=9985,fd=9986,df=9987,gs=33170,Lc=4352,cd=4353,Kl=4354,Rm=34046,zm=3317,Fm=37440,Om=37441,Ih=37443,Q0=37444,hd=33984,z1=[vf,fd,ud,df],Mp=[0,ps,yu,jf,Cs],Nl={};Nl[ps]=Nl[fo]=Nl[cf]=1,Nl[$u]=Nl[yu]=2,Nl[jf]=Nl[od]=3,Nl[Cs]=Nl[G0]=4;function pf(me){return"[object "+me+"]"}var pv=pf("HTMLCanvasElement"),kp=pf("OffscreenCanvas"),eg=pf("CanvasRenderingContext2D"),tg=pf("ImageBitmap"),Nm=pf("HTMLImageElement"),rg=pf("HTMLVideoElement"),co=Object.keys(bc).concat([pv,kp,eg,tg,Nm,rg]),gv=[];gv[Cc]=1,gv[sd]=4,gv[hv]=2,gv[Tp]=2,gv[Ap]=4;var $o=[];$o[qf]=2,$o[H0]=2,$o[Ol]=2,$o[$u]=4,$o[vv]=.5,$o[V0]=.5,$o[j0]=1,$o[q0]=1,$o[_p]=.5,$o[Y0]=1,$o[W0]=1,$o[wp]=.5,$o[X0]=.25,$o[Im]=.5,$o[Z0]=.25,$o[Ph]=.5;function Pc(me){return Array.isArray(me)&&(me.length===0||typeof me[0]=="number")}function Ic(me){if(!Array.isArray(me))return!1;var Fe=me.length;return!(Fe===0||!Wn(me[0]))}function Yf(me){return Object.prototype.toString.call(me)}function Ls(me){return Yf(me)===pv}function Ep(me){return Yf(me)===kp}function Uu(me){return Yf(me)===eg}function Wf(me){return Yf(me)===tg}function Dc(me){return Yf(me)===Nm}function Xf(me){return Yf(me)===rg}function bu(me){if(!me)return!1;var Fe=Yf(me);return co.indexOf(Fe)>=0?!0:Pc(me)||Ic(me)||Hi(me)}function Rc(me){return bc[Object.prototype.toString.call(me)]|0}function zc(me,Fe){var He=Fe.length;switch(me.type){case Cc:case Tp:case Ap:case sd:var et=$r.allocType(me.type,He);et.set(Fe),me.data=et;break;case hv:me.data=kc(Fe);break;default:ue.raise("unsupported texture type, must specify a typed array")}}function gf(me,Fe){return $r.allocType(me.type===hv?sd:me.type,Fe)}function ag(me,Fe){me.type===hv?(me.data=kc(Fe),$r.freeType(Fe)):me.data=Fe}function F1(me,Fe,He,et,ht,ct){for(var At=me.width,Bt=me.height,Yt=me.channels,Qt=At*Bt*Yt,er=gf(me,Qt),ir=0,mr=0;mr<Bt;++mr)for(var or=0;or<At;++or)for(var dr=0;dr<Yt;++dr)er[ir++]=Fe[He*or+et*mr+ht*dr+ct];ag(me,er)}function vd(me,Fe,He,et,ht,ct){var At;if(typeof $o[me]!="undefined"?At=$o[me]:At=Nl[me]*gv[Fe],ct&&(At*=6),ht){for(var Bt=0,Yt=He;Yt>=1;)Bt+=At*Yt*Yt,Yt/=2;return Bt}else return At*He*et}function Bm(me,Fe,He,et,ht,ct,At){var Bt={"don't care":Lc,"dont care":Lc,nice:Kl,fast:cd},Yt={repeat:R1,clamp:J0,mirror:xu},Qt={nearest:dv,linear:hf},er=a({mipmap:df,"nearest mipmap nearest":vf,"linear mipmap nearest":ud,"nearest mipmap linear":fd,"linear mipmap linear":df},Qt),ir={none:0,browser:Q0},mr={uint8:Cc,rgba4:Pm,rgb565:Us,"rgb5 a1":Ec},or={alpha:fo,luminance:ps,"luminance alpha":yu,rgb:jf,rgba:Cs,rgba4:qf,"rgb5 a1":H0,rgb565:Ol},dr={};Fe.ext_srgb&&(or.srgb=od,or.srgba=G0),Fe.oes_texture_float&&(mr.float32=mr.float=sd),Fe.oes_texture_half_float&&(mr.float16=mr["half float"]=hv),Fe.webgl_depth_texture&&(a(or,{depth:cf,"depth stencil":$u}),a(mr,{uint16:Tp,uint32:Ap,"depth stencil":D1})),Fe.webgl_compressed_texture_s3tc&&a(dr,{"rgb s3tc dxt1":vv,"rgba s3tc dxt1":V0,"rgba s3tc dxt3":j0,"rgba s3tc dxt5":q0}),Fe.webgl_compressed_texture_atc&&a(dr,{"rgb atc":_p,"rgba atc explicit alpha":Y0,"rgba atc interpolated alpha":W0}),Fe.webgl_compressed_texture_pvrtc&&a(dr,{"rgb pvrtc 4bppv1":wp,"rgb pvrtc 2bppv1":X0,"rgba pvrtc 4bppv1":Im,"rgba pvrtc 2bppv1":Z0}),Fe.webgl_compressed_texture_etc1&&(dr["rgb etc1"]=Ph);var Rt=Array.prototype.slice.call(me.getParameter(U0));Object.keys(dr).forEach(function(Ct){var Ar=dr[Ct];Rt.indexOf(Ar)>=0&&(or[Ct]=Ar)});var tr=Object.keys(or);He.textureFormats=tr;var Lr=[];Object.keys(or).forEach(function(Ct){var Ar=or[Ct];Lr[Ar]=Ct});var ra=[];Object.keys(mr).forEach(function(Ct){var Ar=mr[Ct];ra[Ar]=Ct});var Mr=[];Object.keys(Qt).forEach(function(Ct){var Ar=Qt[Ct];Mr[Ar]=Ct});var Jr=[];Object.keys(er).forEach(function(Ct){var Ar=er[Ct];Jr[Ar]=Ct});var Dr=[];Object.keys(Yt).forEach(function(Ct){var Ar=Yt[Ct];Dr[Ar]=Ct});var ga=tr.reduce(function(Ct,Ar){var _r=or[Ar];return _r===ps||_r===fo||_r===ps||_r===yu||_r===cf||_r===$u||Fe.ext_srgb&&(_r===od||_r===G0)?Ct[_r]=_r:_r===H0||Ar.indexOf("rgba")>=0?Ct[_r]=Cs:Ct[_r]=jf,Ct},{});function Pr(){this.internalformat=Cs,this.format=Cs,this.type=Cc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Q0,this.width=0,this.height=0,this.channels=0}function Cr(Ct,Ar){Ct.internalformat=Ar.internalformat,Ct.format=Ar.format,Ct.type=Ar.type,Ct.compressed=Ar.compressed,Ct.premultiplyAlpha=Ar.premultiplyAlpha,Ct.flipY=Ar.flipY,Ct.unpackAlignment=Ar.unpackAlignment,Ct.colorSpace=Ar.colorSpace,Ct.width=Ar.width,Ct.height=Ar.height,Ct.channels=Ar.channels}function oa(Ct,Ar){if(!(typeof Ar!="object"||!Ar)){if("premultiplyAlpha"in Ar&&(ue.type(Ar.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ct.premultiplyAlpha=Ar.premultiplyAlpha),"flipY"in Ar&&(ue.type(Ar.flipY,"boolean","invalid texture flip"),Ct.flipY=Ar.flipY),"alignment"in Ar&&(ue.oneOf(Ar.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ct.unpackAlignment=Ar.alignment),"colorSpace"in Ar&&(ue.parameter(Ar.colorSpace,ir,"invalid colorSpace"),Ct.colorSpace=ir[Ar.colorSpace]),"type"in Ar){var _r=Ar.type;ue(Fe.oes_texture_float||!(_r==="float"||_r==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ue(Fe.oes_texture_half_float||!(_r==="half float"||_r==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ue(Fe.webgl_depth_texture||!(_r==="uint16"||_r==="uint32"||_r==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ue.parameter(_r,mr,"invalid texture type"),Ct.type=mr[_r]}var Na=Ct.width,qn=Ct.height,St=Ct.channels,dt=!1;"shape"in Ar?(ue(Array.isArray(Ar.shape)&&Ar.shape.length>=2,"shape must be an array"),Na=Ar.shape[0],qn=Ar.shape[1],Ar.shape.length===3&&(St=Ar.shape[2],ue(St>0&&St<=4,"invalid number of channels"),dt=!0),ue(Na>=0&&Na<=He.maxTextureSize,"invalid width"),ue(qn>=0&&qn<=He.maxTextureSize,"invalid height")):("radius"in Ar&&(Na=qn=Ar.radius,ue(Na>=0&&Na<=He.maxTextureSize,"invalid radius")),"width"in Ar&&(Na=Ar.width,ue(Na>=0&&Na<=He.maxTextureSize,"invalid width")),"height"in Ar&&(qn=Ar.height,ue(qn>=0&&qn<=He.maxTextureSize,"invalid height")),"channels"in Ar&&(St=Ar.channels,ue(St>0&&St<=4,"invalid number of channels"),dt=!0)),Ct.width=Na|0,Ct.height=qn|0,Ct.channels=St|0;var jt=!1;if("format"in Ar){var pr=Ar.format;ue(Fe.webgl_depth_texture||!(pr==="depth"||pr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ue.parameter(pr,or,"invalid texture format");var yr=Ct.internalformat=or[pr];Ct.format=ga[yr],pr in mr&&("type"in Ar||(Ct.type=mr[pr])),pr in dr&&(Ct.compressed=!0),jt=!0}!dt&&jt?Ct.channels=Nl[Ct.format]:dt&&!jt?Ct.channels!==Mp[Ct.format]&&(Ct.format=Ct.internalformat=Mp[Ct.channels]):jt&&dt&&ue(Ct.channels===Nl[Ct.format],"number of channels inconsistent with specified format")}}function ta(Ct){me.pixelStorei(Fm,Ct.flipY),me.pixelStorei(Om,Ct.premultiplyAlpha),me.pixelStorei(Ih,Ct.colorSpace),me.pixelStorei(zm,Ct.unpackAlignment)}function Ir(){Pr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Wr(Ct,Ar){var _r=null;if(bu(Ar)?_r=Ar:Ar&&(ue.type(Ar,"object","invalid pixel data type"),oa(Ct,Ar),"x"in Ar&&(Ct.xOffset=Ar.x|0),"y"in Ar&&(Ct.yOffset=Ar.y|0),bu(Ar.data)&&(_r=Ar.data)),ue(!Ct.compressed||_r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Ar.copy){ue(!_r,"can not specify copy and data field for the same texture");var Na=ht.viewportWidth,qn=ht.viewportHeight;Ct.width=Ct.width||Na-Ct.xOffset,Ct.height=Ct.height||qn-Ct.yOffset,Ct.needsCopy=!0,ue(Ct.xOffset>=0&&Ct.xOffset<Na&&Ct.yOffset>=0&&Ct.yOffset<qn&&Ct.width>0&&Ct.width<=Na&&Ct.height>0&&Ct.height<=qn,"copy texture read out of bounds")}else if(!_r)Ct.width=Ct.width||1,Ct.height=Ct.height||1,Ct.channels=Ct.channels||4;else if(r(_r))Ct.channels=Ct.channels||4,Ct.data=_r,!("type"in Ar)&&Ct.type===Cc&&(Ct.type=Rc(_r));else if(Pc(_r))Ct.channels=Ct.channels||4,zc(Ct,_r),Ct.alignment=1,Ct.needsFree=!0;else if(Hi(_r)){var St=_r.data;!Array.isArray(St)&&Ct.type===Cc&&(Ct.type=Rc(St));var dt=_r.shape,jt=_r.stride,pr,yr,Kt,Wt,cr,Et;dt.length===3?(Kt=dt[2],Et=jt[2]):(ue(dt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Kt=1,Et=1),pr=dt[0],yr=dt[1],Wt=jt[0],cr=jt[1],Ct.alignment=1,Ct.width=pr,Ct.height=yr,Ct.channels=Kt,Ct.format=Ct.internalformat=Mp[Kt],Ct.needsFree=!0,F1(Ct,St,Wt,cr,Et,_r.offset)}else if(Ls(_r)||Ep(_r)||Uu(_r))Ls(_r)||Ep(_r)?Ct.element=_r:Ct.element=_r.canvas,Ct.width=Ct.element.width,Ct.height=Ct.element.height,Ct.channels=4;else if(Wf(_r))Ct.element=_r,Ct.width=_r.width,Ct.height=_r.height,Ct.channels=4;else if(Dc(_r))Ct.element=_r,Ct.width=_r.naturalWidth,Ct.height=_r.naturalHeight,Ct.channels=4;else if(Xf(_r))Ct.element=_r,Ct.width=_r.videoWidth,Ct.height=_r.videoHeight,Ct.channels=4;else if(Ic(_r)){var zt=Ct.width||_r[0].length,Lt=Ct.height||_r.length,Er=Ct.channels;Wn(_r[0][0])?Er=Er||_r[0][0].length:Er=Er||1;for(var br=Vn.shape(_r),qr=1,Kr=0;Kr<br.length;++Kr)qr*=br[Kr];var Sa=gf(Ct,qr);Vn.flatten(_r,br,"",Sa),ag(Ct,Sa),Ct.alignment=1,Ct.width=zt,Ct.height=Lt,Ct.channels=Er,Ct.format=Ct.internalformat=Mp[Er],Ct.needsFree=!0}Ct.type===sd?ue(He.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ct.type===hv&&ue(He.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ua(Ct,Ar,_r){var Na=Ct.element,qn=Ct.data,St=Ct.internalformat,dt=Ct.format,jt=Ct.type,pr=Ct.width,yr=Ct.height;ta(Ct),Na?me.texImage2D(Ar,_r,dt,dt,jt,Na):Ct.compressed?me.compressedTexImage2D(Ar,_r,St,pr,yr,0,qn):Ct.needsCopy?(et(),me.copyTexImage2D(Ar,_r,dt,Ct.xOffset,Ct.yOffset,pr,yr,0)):me.texImage2D(Ar,_r,dt,pr,yr,0,dt,jt,qn||null)}function Ja(Ct,Ar,_r,Na,qn){var St=Ct.element,dt=Ct.data,jt=Ct.internalformat,pr=Ct.format,yr=Ct.type,Kt=Ct.width,Wt=Ct.height;ta(Ct),St?me.texSubImage2D(Ar,qn,_r,Na,pr,yr,St):Ct.compressed?me.compressedTexSubImage2D(Ar,qn,_r,Na,jt,Kt,Wt,dt):Ct.needsCopy?(et(),me.copyTexSubImage2D(Ar,qn,_r,Na,Ct.xOffset,Ct.yOffset,Kt,Wt)):me.texSubImage2D(Ar,qn,_r,Na,Kt,Wt,pr,yr,dt)}var nn=[];function ma(){return nn.pop()||new Ir}function Aa(Ct){Ct.needsFree&&$r.freeType(Ct.data),Ir.call(Ct),nn.push(Ct)}function an(){Pr.call(this),this.genMipmaps=!1,this.mipmapHint=Lc,this.mipmask=0,this.images=Array(16)}function pn(Ct,Ar,_r){var Na=Ct.images[0]=ma();Ct.mipmask=1,Na.width=Ct.width=Ar,Na.height=Ct.height=_r,Na.channels=Ct.channels=4}function Pn(Ct,Ar){var _r=null;if(bu(Ar))_r=Ct.images[0]=ma(),Cr(_r,Ct),Wr(_r,Ar),Ct.mipmask=1;else if(oa(Ct,Ar),Array.isArray(Ar.mipmap))for(var Na=Ar.mipmap,qn=0;qn<Na.length;++qn)_r=Ct.images[qn]=ma(),Cr(_r,Ct),_r.width>>=qn,_r.height>>=qn,Wr(_r,Na[qn]),Ct.mipmask|=1<<qn;else _r=Ct.images[0]=ma(),Cr(_r,Ct),Wr(_r,Ar),Ct.mipmask=1;Cr(Ct,Ct.images[0]),Ct.compressed&&(Ct.internalformat===vv||Ct.internalformat===V0||Ct.internalformat===j0||Ct.internalformat===q0)&&ue(Ct.width%4==0&&Ct.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function oi(Ct,Ar){for(var _r=Ct.images,Na=0;Na<_r.length;++Na){if(!_r[Na])return;ua(_r[Na],Ar,Na)}}var Vi=[];function bn(){var Ct=Vi.pop()||new an;Pr.call(Ct),Ct.mipmask=0;for(var Ar=0;Ar<16;++Ar)Ct.images[Ar]=null;return Ct}function Ni(Ct){for(var Ar=Ct.images,_r=0;_r<Ar.length;++_r)Ar[_r]&&Aa(Ar[_r]),Ar[_r]=null;Vi.push(Ct)}function gi(){this.minFilter=dv,this.magFilter=dv,this.wrapS=J0,this.wrapT=J0,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lc}function ji(Ct,Ar){if("min"in Ar){var _r=Ar.min;ue.parameter(_r,er),Ct.minFilter=er[_r],z1.indexOf(Ct.minFilter)>=0&&!("faces"in Ar)&&(Ct.genMipmaps=!0)}if("mag"in Ar){var Na=Ar.mag;ue.parameter(Na,Qt),Ct.magFilter=Qt[Na]}var qn=Ct.wrapS,St=Ct.wrapT;if("wrap"in Ar){var dt=Ar.wrap;typeof dt=="string"?(ue.parameter(dt,Yt),qn=St=Yt[dt]):Array.isArray(dt)&&(ue.parameter(dt[0],Yt),ue.parameter(dt[1],Yt),qn=Yt[dt[0]],St=Yt[dt[1]])}else{if("wrapS"in Ar){var jt=Ar.wrapS;ue.parameter(jt,Yt),qn=Yt[jt]}if("wrapT"in Ar){var pr=Ar.wrapT;ue.parameter(pr,Yt),St=Yt[pr]}}if(Ct.wrapS=qn,Ct.wrapT=St,"anisotropic"in Ar){var yr=Ar.anisotropic;ue(typeof yr=="number"&&yr>=1&&yr<=He.maxAnisotropic,"aniso samples must be between 1 and "),Ct.anisotropic=Ar.anisotropic}if("mipmap"in Ar){var Kt=!1;switch(typeof Ar.mipmap){case"string":ue.parameter(Ar.mipmap,Bt,"invalid mipmap hint"),Ct.mipmapHint=Bt[Ar.mipmap],Ct.genMipmaps=!0,Kt=!0;break;case"boolean":Kt=Ct.genMipmaps=Ar.mipmap;break;case"object":ue(Array.isArray(Ar.mipmap),"invalid mipmap type"),Ct.genMipmaps=!1,Kt=!0;break;default:ue.raise("invalid mipmap type")}Kt&&!("min"in Ar)&&(Ct.minFilter=vf)}}function eo(Ct,Ar){me.texParameteri(Ar,ld,Ct.minFilter),me.texParameteri(Ar,Sp,Ct.magFilter),me.texParameteri(Ar,K0,Ct.wrapS),me.texParameteri(Ar,Dm,Ct.wrapT),Fe.ext_texture_filter_anisotropic&&me.texParameteri(Ar,Rm,Ct.anisotropic),Ct.genMipmaps&&(me.hint(gs,Ct.mipmapHint),me.generateMipmap(Ar))}var Xo=0,Vo={},ki=He.maxTextureUnits,So=Array(ki).map(function(){return null});function fn(Ct){Pr.call(this),this.mipmask=0,this.internalformat=Cs,this.id=Xo++,this.refCount=1,this.target=Ct,this.texture=me.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new gi,At.profile&&(this.stats={size:0})}function xs(Ct){me.activeTexture(hd),me.bindTexture(Ct.target,Ct.texture)}function fi(){var Ct=So[0];Ct?me.bindTexture(Ct.target,Ct.texture):me.bindTexture(os,null)}function sn(Ct){var Ar=Ct.texture;ue(Ar,"must not double destroy texture");var _r=Ct.unit,Na=Ct.target;_r>=0&&(me.activeTexture(hd+_r),me.bindTexture(Na,null),So[_r]=null),me.deleteTexture(Ar),Ct.texture=null,Ct.params=null,Ct.pixels=null,Ct.refCount=0,delete Vo[Ct.id],ct.textureCount--}a(fn.prototype,{bind:function(){var Ct=this;Ct.bindCount+=1;var Ar=Ct.unit;if(Ar<0){for(var _r=0;_r<ki;++_r){var Na=So[_r];if(Na){if(Na.bindCount>0)continue;Na.unit=-1}So[_r]=Ct,Ar=_r;break}Ar>=ki&&ue.raise("insufficient number of texture units"),At.profile&&ct.maxTextureUnits<Ar+1&&(ct.maxTextureUnits=Ar+1),Ct.unit=Ar,me.activeTexture(hd+Ar),me.bindTexture(Ct.target,Ct.texture)}return Ar},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&sn(this)}});function jn(Ct,Ar){var _r=new fn(os);Vo[_r.id]=_r,ct.textureCount++;function Na(dt,jt){var pr=_r.texInfo;gi.call(pr);var yr=bn();return typeof dt=="number"?typeof jt=="number"?pn(yr,dt|0,jt|0):pn(yr,dt|0,dt|0):dt?(ue.type(dt,"object","invalid arguments to regl.texture"),ji(pr,dt),Pn(yr,dt)):pn(yr,1,1),pr.genMipmaps&&(yr.mipmask=(yr.width<<1)-1),_r.mipmask=yr.mipmask,Cr(_r,yr),ue.texture2D(pr,yr,He),_r.internalformat=yr.internalformat,Na.width=yr.width,Na.height=yr.height,xs(_r),oi(yr,os),eo(pr,os),fi(),Ni(yr),At.profile&&(_r.stats.size=vd(_r.internalformat,_r.type,yr.width,yr.height,pr.genMipmaps,!1)),Na.format=Lr[_r.internalformat],Na.type=ra[_r.type],Na.mag=Mr[pr.magFilter],Na.min=Jr[pr.minFilter],Na.wrapS=Dr[pr.wrapS],Na.wrapT=Dr[pr.wrapT],Na}function qn(dt,jt,pr,yr){ue(!!dt,"must specify image data");var Kt=jt|0,Wt=pr|0,cr=yr|0,Et=ma();return Cr(Et,_r),Et.width=0,Et.height=0,Wr(Et,dt),Et.width=Et.width||(_r.width>>cr)-Kt,Et.height=Et.height||(_r.height>>cr)-Wt,ue(_r.type===Et.type&&_r.format===Et.format&&_r.internalformat===Et.internalformat,"incompatible format for texture.subimage"),ue(Kt>=0&&Wt>=0&&Kt+Et.width<=_r.width&&Wt+Et.height<=_r.height,"texture.subimage write out of bounds"),ue(_r.mipmask&1<<cr,"missing mipmap data"),ue(Et.data||Et.element||Et.needsCopy,"missing image data"),xs(_r),Ja(Et,os,Kt,Wt,cr),fi(),Aa(Et),Na}function St(dt,jt){var pr=dt|0,yr=jt|0||pr;if(pr===_r.width&&yr===_r.height)return Na;Na.width=_r.width=pr,Na.height=_r.height=yr,xs(_r);for(var Kt=0;_r.mipmask>>Kt;++Kt){var Wt=pr>>Kt,cr=yr>>Kt;if(!Wt||!cr)break;me.texImage2D(os,Kt,_r.format,Wt,cr,0,_r.format,_r.type,null)}return fi(),At.profile&&(_r.stats.size=vd(_r.internalformat,_r.type,pr,yr,!1,!1)),Na}return Na(Ct,Ar),Na.subimage=qn,Na.resize=St,Na._reglType="texture2d",Na._texture=_r,At.profile&&(Na.stats=_r.stats),Na.destroy=function(){_r.decRef()},Na}function Qn(Ct,Ar,_r,Na,qn,St){var dt=new fn(Bo);Vo[dt.id]=dt,ct.cubeCount++;var jt=new Array(6);function pr(Wt,cr,Et,zt,Lt,Er){var br,qr=dt.texInfo;for(gi.call(qr),br=0;br<6;++br)jt[br]=bn();if(typeof Wt=="number"||!Wt){var Kr=Wt|0||1;for(br=0;br<6;++br)pn(jt[br],Kr,Kr)}else if(typeof Wt=="object")if(cr)Pn(jt[0],Wt),Pn(jt[1],cr),Pn(jt[2],Et),Pn(jt[3],zt),Pn(jt[4],Lt),Pn(jt[5],Er);else if(ji(qr,Wt),oa(dt,Wt),"faces"in Wt){var Sa=Wt.faces;for(ue(Array.isArray(Sa)&&Sa.length===6,"cube faces must be a length 6 array"),br=0;br<6;++br)ue(typeof Sa[br]=="object"&&!!Sa[br],"invalid input for cube map face"),Cr(jt[br],dt),Pn(jt[br],Sa[br])}else for(br=0;br<6;++br)Pn(jt[br],Wt);else ue.raise("invalid arguments to cube map");for(Cr(dt,jt[0]),ue.optional(function(){He.npotTextureCube||ue($s(dt.width)&&$s(dt.height),"your browser does not support non power or two texture dimensions")}),qr.genMipmaps?dt.mipmask=(jt[0].width<<1)-1:dt.mipmask=jt[0].mipmask,ue.textureCube(dt,qr,jt,He),dt.internalformat=jt[0].internalformat,pr.width=jt[0].width,pr.height=jt[0].height,xs(dt),br=0;br<6;++br)oi(jt[br],ff+br);for(eo(qr,Bo),fi(),At.profile&&(dt.stats.size=vd(dt.internalformat,dt.type,pr.width,pr.height,qr.genMipmaps,!0)),pr.format=Lr[dt.internalformat],pr.type=ra[dt.type],pr.mag=Mr[qr.magFilter],pr.min=Jr[qr.minFilter],pr.wrapS=Dr[qr.wrapS],pr.wrapT=Dr[qr.wrapT],br=0;br<6;++br)Ni(jt[br]);return pr}function yr(Wt,cr,Et,zt,Lt){ue(!!cr,"must specify image data"),ue(typeof Wt=="number"&&Wt===(Wt|0)&&Wt>=0&&Wt<6,"invalid face");var Er=Et|0,br=zt|0,qr=Lt|0,Kr=ma();return Cr(Kr,dt),Kr.width=0,Kr.height=0,Wr(Kr,cr),Kr.width=Kr.width||(dt.width>>qr)-Er,Kr.height=Kr.height||(dt.height>>qr)-br,ue(dt.type===Kr.type&&dt.format===Kr.format&&dt.internalformat===Kr.internalformat,"incompatible format for texture.subimage"),ue(Er>=0&&br>=0&&Er+Kr.width<=dt.width&&br+Kr.height<=dt.height,"texture.subimage write out of bounds"),ue(dt.mipmask&1<<qr,"missing mipmap data"),ue(Kr.data||Kr.element||Kr.needsCopy,"missing image data"),xs(dt),Ja(Kr,ff+Wt,Er,br,qr),fi(),Aa(Kr),pr}function Kt(Wt){var cr=Wt|0;if(cr!==dt.width){pr.width=dt.width=cr,pr.height=dt.height=cr,xs(dt);for(var Et=0;Et<6;++Et)for(var zt=0;dt.mipmask>>zt;++zt)me.texImage2D(ff+Et,zt,dt.format,cr>>zt,cr>>zt,0,dt.format,dt.type,null);return fi(),At.profile&&(dt.stats.size=vd(dt.internalformat,dt.type,pr.width,pr.height,!1,!0)),pr}}return pr(Ct,Ar,_r,Na,qn,St),pr.subimage=yr,pr.resize=Kt,pr._reglType="textureCube",pr._texture=dt,At.profile&&(pr.stats=dt.stats),pr.destroy=function(){dt.decRef()},pr}function po(){for(var Ct=0;Ct<ki;++Ct)me.activeTexture(hd+Ct),me.bindTexture(os,null),So[Ct]=null;zi(Vo).forEach(sn),ct.cubeCount=0,ct.textureCount=0}At.profile&&(ct.getTotalTextureSize=function(){var Ct=0;return Object.keys(Vo).forEach(function(Ar){Ct+=Vo[Ar].stats.size}),Ct});function au(){for(var Ct=0;Ct<ki;++Ct){var Ar=So[Ct];Ar&&(Ar.bindCount=0,Ar.unit=-1,So[Ct]=null)}zi(Vo).forEach(function(_r){_r.texture=me.createTexture(),me.bindTexture(_r.target,_r.texture);for(var Na=0;Na<32;++Na)if((_r.mipmask&1<<Na)!=0)if(_r.target===os)me.texImage2D(os,Na,_r.internalformat,_r.width>>Na,_r.height>>Na,0,_r.internalformat,_r.type,null);else for(var qn=0;qn<6;++qn)me.texImage2D(ff+qn,Na,_r.internalformat,_r.width>>Na,_r.height>>Na,0,_r.internalformat,_r.type,null);eo(_r.texInfo,_r.target)})}function io(){for(var Ct=0;Ct<ki;++Ct){var Ar=So[Ct];Ar&&(Ar.bindCount=0,Ar.unit=-1,So[Ct]=null),me.activeTexture(hd+Ct),me.bindTexture(os,null),me.bindTexture(Bo,null)}}return{create2D:jn,createCube:Qn,clear:po,getTexture:function(Ct){return null},restore:au,refresh:io}}var mf=36161,dd=32854,pd=32855,mv=36194,$m=33189,gd=36168,ng=34041,ig=35907,Um=34836,Fc=34842,og=34843,_u=[];_u[dd]=2,_u[pd]=2,_u[mv]=2,_u[$m]=2,_u[gd]=1,_u[ng]=4,_u[ig]=4,_u[Um]=16,_u[Fc]=8,_u[og]=6;function Cp(me,Fe,He){return _u[me]*Fe*He}var sg=function(me,Fe,He,et,ht){var ct={rgba4:dd,rgb565:mv,"rgb5 a1":pd,depth:$m,stencil:gd,"depth stencil":ng};Fe.ext_srgb&&(ct.srgba=ig),Fe.ext_color_buffer_half_float&&(ct.rgba16f=Fc,ct.rgb16f=og),Fe.webgl_color_buffer_float&&(ct.rgba32f=Um);var At=[];Object.keys(ct).forEach(function(or){var dr=ct[or];At[dr]=or});var Bt=0,Yt={};function Qt(or){this.id=Bt++,this.refCount=1,this.renderbuffer=or,this.format=dd,this.width=0,this.height=0,ht.profile&&(this.stats={size:0})}Qt.prototype.decRef=function(){--this.refCount<=0&&er(this)};function er(or){var dr=or.renderbuffer;ue(dr,"must not double destroy renderbuffer"),me.bindRenderbuffer(mf,null),me.deleteRenderbuffer(dr),or.renderbuffer=null,or.refCount=0,delete Yt[or.id],et.renderbufferCount--}function ir(or,dr){var Rt=new Qt(me.createRenderbuffer());Yt[Rt.id]=Rt,et.renderbufferCount++;function tr(ra,Mr){var Jr=0,Dr=0,ga=dd;if(typeof ra=="object"&&ra){var Pr=ra;if("shape"in Pr){var Cr=Pr.shape;ue(Array.isArray(Cr)&&Cr.length>=2,"invalid renderbuffer shape"),Jr=Cr[0]|0,Dr=Cr[1]|0}else"radius"in Pr&&(Jr=Dr=Pr.radius|0),"width"in Pr&&(Jr=Pr.width|0),"height"in Pr&&(Dr=Pr.height|0);"format"in Pr&&(ue.parameter(Pr.format,ct,"invalid renderbuffer format"),ga=ct[Pr.format])}else typeof ra=="number"?(Jr=ra|0,typeof Mr=="number"?Dr=Mr|0:Dr=Jr):ra?ue.raise("invalid arguments to renderbuffer constructor"):Jr=Dr=1;if(ue(Jr>0&&Dr>0&&Jr<=He.maxRenderbufferSize&&Dr<=He.maxRenderbufferSize,"invalid renderbuffer size"),!(Jr===Rt.width&&Dr===Rt.height&&ga===Rt.format))return tr.width=Rt.width=Jr,tr.height=Rt.height=Dr,Rt.format=ga,me.bindRenderbuffer(mf,Rt.renderbuffer),me.renderbufferStorage(mf,ga,Jr,Dr),ue(me.getError()===0,"invalid render buffer format"),ht.profile&&(Rt.stats.size=Cp(Rt.format,Rt.width,Rt.height)),tr.format=At[Rt.format],tr}function Lr(ra,Mr){var Jr=ra|0,Dr=Mr|0||Jr;return Jr===Rt.width&&Dr===Rt.height||(ue(Jr>0&&Dr>0&&Jr<=He.maxRenderbufferSize&&Dr<=He.maxRenderbufferSize,"invalid renderbuffer size"),tr.width=Rt.width=Jr,tr.height=Rt.height=Dr,me.bindRenderbuffer(mf,Rt.renderbuffer),me.renderbufferStorage(mf,Rt.format,Jr,Dr),ue(me.getError()===0,"invalid render buffer format"),ht.profile&&(Rt.stats.size=Cp(Rt.format,Rt.width,Rt.height))),tr}return tr(or,dr),tr.resize=Lr,tr._reglType="renderbuffer",tr._renderbuffer=Rt,ht.profile&&(tr.stats=Rt.stats),tr.destroy=function(){Rt.decRef()},tr}ht.profile&&(et.getTotalRenderbufferSize=function(){var or=0;return Object.keys(Yt).forEach(function(dr){or+=Yt[dr].stats.size}),or});function mr(){zi(Yt).forEach(function(or){or.renderbuffer=me.createRenderbuffer(),me.bindRenderbuffer(mf,or.renderbuffer),me.renderbufferStorage(mf,or.format,or.width,or.height)}),me.bindRenderbuffer(mf,null)}return{create:ir,clear:function(){zi(Yt).forEach(er)},restore:mr}},yf=36160,lg=36161,Bl=3553,Jl=34069,Oc=36064,ug=36096,fg=36128,yv=33306,Hm=36053,Nc=36054,Lp=36055,Bc=36057,$c=36061,Gm=36193,xv=5121,Zi=5126,md=6407,cg=6408,hg=6402,yd=[md,cg],bv=[];bv[cg]=4,bv[md]=3;var Uc=[];Uc[xv]=1,Uc[Zi]=4,Uc[Gm]=2;var Pp=32854,Vm=32855,vg=36194,bl=33189,xd=36168,bd=34041,Hc=35907,wu=34836,dg=34842,_d=34843,O1=[Pp,Vm,vg,Hc,dg,_d,wu],Tu={};Tu[Hm]="complete",Tu[Nc]="incomplete attachment",Tu[Bc]="incomplete dimensions",Tu[Lp]="incomplete, missing attachment",Tu[$c]="unsupported";function pg(me,Fe,He,et,ht,ct){var At={cur:null,next:null,dirty:!1,setFBO:null},Bt=["rgba"],Yt=["rgba4","rgb565","rgb5 a1"];Fe.ext_srgb&&Yt.push("srgba"),Fe.ext_color_buffer_half_float&&Yt.push("rgba16f","rgb16f"),Fe.webgl_color_buffer_float&&Yt.push("rgba32f");var Qt=["uint8"];Fe.oes_texture_half_float&&Qt.push("half float","float16"),Fe.oes_texture_float&&Qt.push("float","float32");function er(Ir,Wr,ua){this.target=Ir,this.texture=Wr,this.renderbuffer=ua;var Ja=0,nn=0;Wr?(Ja=Wr.width,nn=Wr.height):ua&&(Ja=ua.width,nn=ua.height),this.width=Ja,this.height=nn}function ir(Ir){Ir&&(Ir.texture&&Ir.texture._texture.decRef(),Ir.renderbuffer&&Ir.renderbuffer._renderbuffer.decRef())}function mr(Ir,Wr,ua){if(!!Ir)if(Ir.texture){var Ja=Ir.texture._texture,nn=Math.max(1,Ja.width),ma=Math.max(1,Ja.height);ue(nn===Wr&&ma===ua,"inconsistent width/height for supplied texture"),Ja.refCount+=1}else{var Aa=Ir.renderbuffer._renderbuffer;ue(Aa.width===Wr&&Aa.height===ua,"inconsistent width/height for renderbuffer"),Aa.refCount+=1}}function or(Ir,Wr){Wr&&(Wr.texture?me.framebufferTexture2D(yf,Ir,Wr.target,Wr.texture._texture.texture,0):me.framebufferRenderbuffer(yf,Ir,lg,Wr.renderbuffer._renderbuffer.renderbuffer))}function dr(Ir){var Wr=Bl,ua=null,Ja=null,nn=Ir;typeof Ir=="object"&&(nn=Ir.data,"target"in Ir&&(Wr=Ir.target|0)),ue.type(nn,"function","invalid attachment data");var ma=nn._reglType;return ma==="texture2d"?(ua=nn,ue(Wr===Bl)):ma==="textureCube"?(ua=nn,ue(Wr>=Jl&&Wr<Jl+6,"invalid cube map target")):ma==="renderbuffer"?(Ja=nn,Wr=lg):ue.raise("invalid regl object for attachment"),new er(Wr,ua,Ja)}function Rt(Ir,Wr,ua,Ja,nn){if(ua){var ma=et.create2D({width:Ir,height:Wr,format:Ja,type:nn});return ma._texture.refCount=0,new er(Bl,ma,null)}else{var Aa=ht.create({width:Ir,height:Wr,format:Ja});return Aa._renderbuffer.refCount=0,new er(lg,null,Aa)}}function tr(Ir){return Ir&&(Ir.texture||Ir.renderbuffer)}function Lr(Ir,Wr,ua){Ir&&(Ir.texture?Ir.texture.resize(Wr,ua):Ir.renderbuffer&&Ir.renderbuffer.resize(Wr,ua),Ir.width=Wr,Ir.height=ua)}var ra=0,Mr={};function Jr(){this.id=ra++,Mr[this.id]=this,this.framebuffer=me.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Dr(Ir){Ir.colorAttachments.forEach(ir),ir(Ir.depthAttachment),ir(Ir.stencilAttachment),ir(Ir.depthStencilAttachment)}function ga(Ir){var Wr=Ir.framebuffer;ue(Wr,"must not double destroy framebuffer"),me.deleteFramebuffer(Wr),Ir.framebuffer=null,ct.framebufferCount--,delete Mr[Ir.id]}function Pr(Ir){var Wr;me.bindFramebuffer(yf,Ir.framebuffer);var ua=Ir.colorAttachments;for(Wr=0;Wr<ua.length;++Wr)or(Oc+Wr,ua[Wr]);for(Wr=ua.length;Wr<He.maxColorAttachments;++Wr)me.framebufferTexture2D(yf,Oc+Wr,Bl,null,0);me.framebufferTexture2D(yf,yv,Bl,null,0),me.framebufferTexture2D(yf,ug,Bl,null,0),me.framebufferTexture2D(yf,fg,Bl,null,0),or(ug,Ir.depthAttachment),or(fg,Ir.stencilAttachment),or(yv,Ir.depthStencilAttachment);var Ja=me.checkFramebufferStatus(yf);!me.isContextLost()&&Ja!==Hm&&ue.raise("framebuffer configuration not supported, status = "+Tu[Ja]),me.bindFramebuffer(yf,At.next?At.next.framebuffer:null),At.cur=At.next,me.getError()}function Cr(Ir,Wr){var ua=new Jr;ct.framebufferCount++;function Ja(ma,Aa){var an;ue(At.next!==ua,"can not update framebuffer which is currently in use");var pn=0,Pn=0,oi=!0,Vi=!0,bn=null,Ni=!0,gi="rgba",ji="uint8",eo=1,Xo=null,Vo=null,ki=null,So=!1;if(typeof ma=="number")pn=ma|0,Pn=Aa|0||pn;else if(!ma)pn=Pn=1;else{ue.type(ma,"object","invalid arguments for framebuffer");var fn=ma;if("shape"in fn){var xs=fn.shape;ue(Array.isArray(xs)&&xs.length>=2,"invalid shape for framebuffer"),pn=xs[0],Pn=xs[1]}else"radius"in fn&&(pn=Pn=fn.radius),"width"in fn&&(pn=fn.width),"height"in fn&&(Pn=fn.height);("color"in fn||"colors"in fn)&&(bn=fn.color||fn.colors,Array.isArray(bn)&&ue(bn.length===1||Fe.webgl_draw_buffers,"multiple render targets not supported")),bn||("colorCount"in fn&&(eo=fn.colorCount|0,ue(eo>0,"invalid color buffer count")),"colorTexture"in fn&&(Ni=!!fn.colorTexture,gi="rgba4"),"colorType"in fn&&(ji=fn.colorType,Ni?(ue(Fe.oes_texture_float||!(ji==="float"||ji==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ue(Fe.oes_texture_half_float||!(ji==="half float"||ji==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ji==="half float"||ji==="float16"?(ue(Fe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),gi="rgba16f"):(ji==="float"||ji==="float32")&&(ue(Fe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),gi="rgba32f"),ue.oneOf(ji,Qt,"invalid color type")),"colorFormat"in fn&&(gi=fn.colorFormat,Bt.indexOf(gi)>=0?Ni=!0:Yt.indexOf(gi)>=0?Ni=!1:ue.optional(function(){Ni?ue.oneOf(fn.colorFormat,Bt,"invalid color format for texture"):ue.oneOf(fn.colorFormat,Yt,"invalid color format for renderbuffer")}))),("depthTexture"in fn||"depthStencilTexture"in fn)&&(So=!!(fn.depthTexture||fn.depthStencilTexture),ue(!So||Fe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in fn&&(typeof fn.depth=="boolean"?oi=fn.depth:(Xo=fn.depth,Vi=!1)),"stencil"in fn&&(typeof fn.stencil=="boolean"?Vi=fn.stencil:(Vo=fn.stencil,oi=!1)),"depthStencil"in fn&&(typeof fn.depthStencil=="boolean"?oi=Vi=fn.depthStencil:(ki=fn.depthStencil,oi=!1,Vi=!1))}var fi=null,sn=null,jn=null,Qn=null;if(Array.isArray(bn))fi=bn.map(dr);else if(bn)fi=[dr(bn)];else for(fi=new Array(eo),an=0;an<eo;++an)fi[an]=Rt(pn,Pn,Ni,gi,ji);ue(Fe.webgl_draw_buffers||fi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ue(fi.length<=He.maxColorAttachments,"too many color attachments, not supported"),pn=pn||fi[0].width,Pn=Pn||fi[0].height,Xo?sn=dr(Xo):oi&&!Vi&&(sn=Rt(pn,Pn,So,"depth","uint32")),Vo?jn=dr(Vo):Vi&&!oi&&(jn=Rt(pn,Pn,!1,"stencil","uint8")),ki?Qn=dr(ki):!Xo&&!Vo&&Vi&&oi&&(Qn=Rt(pn,Pn,So,"depth stencil","depth stencil")),ue(!!Xo+!!Vo+!!ki<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var po=null;for(an=0;an<fi.length;++an)if(mr(fi[an],pn,Pn),ue(!fi[an]||fi[an].texture&&yd.indexOf(fi[an].texture._texture.format)>=0||fi[an].renderbuffer&&O1.indexOf(fi[an].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+an+" is invalid"),fi[an]&&fi[an].texture){var au=bv[fi[an].texture._texture.format]*Uc[fi[an].texture._texture.type];po===null?po=au:ue(po===au,"all color attachments much have the same number of bits per pixel.")}return mr(sn,pn,Pn),ue(!sn||sn.texture&&sn.texture._texture.format===hg||sn.renderbuffer&&sn.renderbuffer._renderbuffer.format===bl,"invalid depth attachment for framebuffer object"),mr(jn,pn,Pn),ue(!jn||jn.renderbuffer&&jn.renderbuffer._renderbuffer.format===xd,"invalid stencil attachment for framebuffer object"),mr(Qn,pn,Pn),ue(!Qn||Qn.texture&&Qn.texture._texture.format===bd||Qn.renderbuffer&&Qn.renderbuffer._renderbuffer.format===bd,"invalid depth-stencil attachment for framebuffer object"),Dr(ua),ua.width=pn,ua.height=Pn,ua.colorAttachments=fi,ua.depthAttachment=sn,ua.stencilAttachment=jn,ua.depthStencilAttachment=Qn,Ja.color=fi.map(tr),Ja.depth=tr(sn),Ja.stencil=tr(jn),Ja.depthStencil=tr(Qn),Ja.width=ua.width,Ja.height=ua.height,Pr(ua),Ja}function nn(ma,Aa){ue(At.next!==ua,"can not resize a framebuffer which is currently in use");var an=Math.max(ma|0,1),pn=Math.max(Aa|0||an,1);if(an===ua.width&&pn===ua.height)return Ja;for(var Pn=ua.colorAttachments,oi=0;oi<Pn.length;++oi)Lr(Pn[oi],an,pn);return Lr(ua.depthAttachment,an,pn),Lr(ua.stencilAttachment,an,pn),Lr(ua.depthStencilAttachment,an,pn),ua.width=Ja.width=an,ua.height=Ja.height=pn,Pr(ua),Ja}return Ja(Ir,Wr),a(Ja,{resize:nn,_reglType:"framebuffer",_framebuffer:ua,destroy:function(){ga(ua),Dr(ua)},use:function(ma){At.setFBO({framebuffer:Ja},ma)}})}function oa(Ir){var Wr=Array(6);function ua(nn){var ma;ue(Wr.indexOf(At.next)<0,"can not update framebuffer which is currently in use");var Aa={color:null},an=0,pn=null,Pn="rgba",oi="uint8",Vi=1;if(typeof nn=="number")an=nn|0;else if(!nn)an=1;else{ue.type(nn,"object","invalid arguments for framebuffer");var bn=nn;if("shape"in bn){var Ni=bn.shape;ue(Array.isArray(Ni)&&Ni.length>=2,"invalid shape for framebuffer"),ue(Ni[0]===Ni[1],"cube framebuffer must be square"),an=Ni[0]}else"radius"in bn&&(an=bn.radius|0),"width"in bn?(an=bn.width|0,"height"in bn&&ue(bn.height===an,"must be square")):"height"in bn&&(an=bn.height|0);("color"in bn||"colors"in bn)&&(pn=bn.color||bn.colors,Array.isArray(pn)&&ue(pn.length===1||Fe.webgl_draw_buffers,"multiple render targets not supported")),pn||("colorCount"in bn&&(Vi=bn.colorCount|0,ue(Vi>0,"invalid color buffer count")),"colorType"in bn&&(ue.oneOf(bn.colorType,Qt,"invalid color type"),oi=bn.colorType),"colorFormat"in bn&&(Pn=bn.colorFormat,ue.oneOf(bn.colorFormat,Bt,"invalid color format for texture"))),"depth"in bn&&(Aa.depth=bn.depth),"stencil"in bn&&(Aa.stencil=bn.stencil),"depthStencil"in bn&&(Aa.depthStencil=bn.depthStencil)}var gi;if(pn)if(Array.isArray(pn))for(gi=[],ma=0;ma<pn.length;++ma)gi[ma]=pn[ma];else gi=[pn];else{gi=Array(Vi);var ji={radius:an,format:Pn,type:oi};for(ma=0;ma<Vi;++ma)gi[ma]=et.createCube(ji)}for(Aa.color=Array(gi.length),ma=0;ma<gi.length;++ma){var eo=gi[ma];ue(typeof eo=="function"&&eo._reglType==="textureCube","invalid cube map"),an=an||eo.width,ue(eo.width===an&&eo.height===an,"invalid cube map shape"),Aa.color[ma]={target:Jl,data:gi[ma]}}for(ma=0;ma<6;++ma){for(var Xo=0;Xo<gi.length;++Xo)Aa.color[Xo].target=Jl+ma;ma>0&&(Aa.depth=Wr[0].depth,Aa.stencil=Wr[0].stencil,Aa.depthStencil=Wr[0].depthStencil),Wr[ma]?Wr[ma](Aa):Wr[ma]=Cr(Aa)}return a(ua,{width:an,height:an,color:gi})}function Ja(nn){var ma,Aa=nn|0;if(ue(Aa>0&&Aa<=He.maxCubeMapSize,"invalid radius for cube fbo"),Aa===ua.width)return ua;var an=ua.color;for(ma=0;ma<an.length;++ma)an[ma].resize(Aa);for(ma=0;ma<6;++ma)Wr[ma].resize(Aa);return ua.width=ua.height=Aa,ua}return ua(Ir),a(ua,{faces:Wr,resize:Ja,_reglType:"framebufferCube",destroy:function(){Wr.forEach(function(nn){nn.destroy()})}})}function ta(){At.cur=null,At.next=null,At.dirty=!0,zi(Mr).forEach(function(Ir){Ir.framebuffer=me.createFramebuffer(),Pr(Ir)})}return a(At,{getFramebuffer:function(Ir){if(typeof Ir=="function"&&Ir._reglType==="framebuffer"){var Wr=Ir._framebuffer;if(Wr instanceof Jr)return Wr}return null},create:Cr,createCube:oa,clear:function(){zi(Mr).forEach(ga)},restore:ta})}var jm=5126,Au=34962,wd=34963,Ip=["attributes","elements","offset","count","primitive","instances"];function ol(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=jm,this.offset=0,this.stride=0,this.divisor=0}function Dh(me,Fe,He,et,ht,ct,At){for(var Bt=He.maxAttributes,Yt=new Array(Bt),Qt=0;Qt<Bt;++Qt)Yt[Qt]=new ol;var er=0,ir={},mr={Record:ol,scope:{},state:Yt,currentVAO:null,targetVAO:null,restore:dr()?Dr:function(){},createVAO:ga,getVAO:tr,destroyBuffer:or,setVAO:dr()?Lr:ra,clear:dr()?Mr:function(){}};function or(Pr){for(var Cr=0;Cr<Yt.length;++Cr){var oa=Yt[Cr];oa.buffer===Pr&&(me.disableVertexAttribArray(Cr),oa.buffer=null)}}function dr(){return Fe.oes_vertex_array_object}function Rt(){return Fe.angle_instanced_arrays}function tr(Pr){return typeof Pr=="function"&&Pr._vao?Pr._vao:null}function Lr(Pr){if(Pr!==mr.currentVAO){var Cr=dr();Pr?Cr.bindVertexArrayOES(Pr.vao):Cr.bindVertexArrayOES(null),mr.currentVAO=Pr}}function ra(Pr){if(Pr!==mr.currentVAO){if(Pr)Pr.bindAttrs();else{for(var Cr=Rt(),oa=0;oa<Yt.length;++oa){var ta=Yt[oa];ta.buffer?(me.enableVertexAttribArray(oa),ta.buffer.bind(),me.vertexAttribPointer(oa,ta.size,ta.type,ta.normalized,ta.stride,ta.offfset),Cr&&ta.divisor&&Cr.vertexAttribDivisorANGLE(oa,ta.divisor)):(me.disableVertexAttribArray(oa),me.vertexAttrib4f(oa,ta.x,ta.y,ta.z,ta.w))}At.elements?me.bindBuffer(wd,At.elements.buffer.buffer):me.bindBuffer(wd,null)}mr.currentVAO=Pr}}function Mr(){zi(ir).forEach(function(Pr){Pr.destroy()})}function Jr(){this.id=++er,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Pr=dr();Pr?this.vao=Pr.createVertexArrayOES():this.vao=null,ir[this.id]=this,this.buffers=[]}Jr.prototype.bindAttrs=function(){for(var Pr=Rt(),Cr=this.attributes,oa=0;oa<Cr.length;++oa){var ta=Cr[oa];ta.buffer?(me.enableVertexAttribArray(oa),me.bindBuffer(Au,ta.buffer.buffer),me.vertexAttribPointer(oa,ta.size,ta.type,ta.normalized,ta.stride,ta.offset),Pr&&ta.divisor&&Pr.vertexAttribDivisorANGLE(oa,ta.divisor)):(me.disableVertexAttribArray(oa),me.vertexAttrib4f(oa,ta.x,ta.y,ta.z,ta.w))}for(var Ir=Cr.length;Ir<Bt;++Ir)me.disableVertexAttribArray(Ir);var Wr=ct.getElements(this.elements);Wr?me.bindBuffer(wd,Wr.buffer.buffer):me.bindBuffer(wd,null)},Jr.prototype.refresh=function(){var Pr=dr();Pr&&(Pr.bindVertexArrayOES(this.vao),this.bindAttrs(),mr.currentVAO=null,Pr.bindVertexArrayOES(null))},Jr.prototype.destroy=function(){if(this.vao){var Pr=dr();this===mr.currentVAO&&(mr.currentVAO=null,Pr.bindVertexArrayOES(null)),Pr.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ir[this.id]&&(delete ir[this.id],et.vaoCount-=1)};function Dr(){var Pr=dr();Pr&&zi(ir).forEach(function(Cr){Cr.refresh()})}function ga(Pr){var Cr=new Jr;et.vaoCount+=1;function oa(ta){var Ir;if(Array.isArray(ta))Ir=ta,Cr.elements&&Cr.ownsElements&&Cr.elements.destroy(),Cr.elements=null,Cr.ownsElements=!1,Cr.offset=0,Cr.count=0,Cr.instances=-1,Cr.primitive=4;else{if(ue(typeof ta=="object","invalid arguments for create vao"),ue("attributes"in ta,"must specify attributes for vao"),ta.elements){var Wr=ta.elements;Cr.ownsElements?typeof Wr=="function"&&Wr._reglType==="elements"?(Cr.elements.destroy(),Cr.ownsElements=!1):(Cr.elements(Wr),Cr.ownsElements=!1):ct.getElements(ta.elements)?(Cr.elements=ta.elements,Cr.ownsElements=!1):(Cr.elements=ct.create(ta.elements),Cr.ownsElements=!0)}else Cr.elements=null,Cr.ownsElements=!1;Ir=ta.attributes,Cr.offset=0,Cr.count=-1,Cr.instances=-1,Cr.primitive=4,Cr.elements&&(Cr.count=Cr.elements._elements.vertCount,Cr.primitive=Cr.elements._elements.primType),"offset"in ta&&(Cr.offset=ta.offset|0),"count"in ta&&(Cr.count=ta.count|0),"instances"in ta&&(Cr.instances=ta.instances|0),"primitive"in ta&&(ue(ta.primitive in Es,"bad primitive type: "+ta.primitive),Cr.primitive=Es[ta.primitive]),ue.optional(()=>{for(var oi=Object.keys(ta),Vi=0;Vi<oi.length;++Vi)ue(Ip.indexOf(oi[Vi])>=0,'invalid option for vao: "'+oi[Vi]+'" valid options are '+Ip)}),ue(Array.isArray(Ir),"attributes must be an array")}ue(Ir.length<Bt,"too many attributes"),ue(Ir.length>0,"must specify at least one attribute");var ua={},Ja=Cr.attributes;Ja.length=Ir.length;for(var nn=0;nn<Ir.length;++nn){var ma=Ir[nn],Aa=Ja[nn]=new ol,an=ma.data||ma;if(Array.isArray(an)||r(an)||Hi(an)){var pn;Cr.buffers[nn]&&(pn=Cr.buffers[nn],r(an)&&pn._buffer.byteLength>=an.byteLength?pn.subdata(an):(pn.destroy(),Cr.buffers[nn]=null)),Cr.buffers[nn]||(pn=Cr.buffers[nn]=ht.create(ma,Au,!1,!0)),Aa.buffer=ht.getBuffer(pn),Aa.size=Aa.buffer.dimension|0,Aa.normalized=!1,Aa.type=Aa.buffer.dtype,Aa.offset=0,Aa.stride=0,Aa.divisor=0,Aa.state=1,ua[nn]=1}else ht.getBuffer(ma)?(Aa.buffer=ht.getBuffer(ma),Aa.size=Aa.buffer.dimension|0,Aa.normalized=!1,Aa.type=Aa.buffer.dtype,Aa.offset=0,Aa.stride=0,Aa.divisor=0,Aa.state=1):ht.getBuffer(ma.buffer)?(Aa.buffer=ht.getBuffer(ma.buffer),Aa.size=(+ma.size||Aa.buffer.dimension)|0,Aa.normalized=!!ma.normalized||!1,"type"in ma?(ue.parameter(ma.type,is,"invalid buffer type"),Aa.type=is[ma.type]):Aa.type=Aa.buffer.dtype,Aa.offset=(ma.offset||0)|0,Aa.stride=(ma.stride||0)|0,Aa.divisor=(ma.divisor||0)|0,Aa.state=1,ue(Aa.size>=1&&Aa.size<=4,"size must be between 1 and 4"),ue(Aa.offset>=0,"invalid offset"),ue(Aa.stride>=0&&Aa.stride<=255,"stride must be between 0 and 255"),ue(Aa.divisor>=0,"divisor must be positive"),ue(!Aa.divisor||!!Fe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ma?(ue(nn>0,"first attribute must not be a constant"),Aa.x=+ma.x||0,Aa.y=+ma.y||0,Aa.z=+ma.z||0,Aa.w=+ma.w||0,Aa.state=2):ue(!1,"invalid attribute spec for location "+nn)}for(var Pn=0;Pn<Cr.buffers.length;++Pn)!ua[Pn]&&Cr.buffers[Pn]&&(Cr.buffers[Pn].destroy(),Cr.buffers[Pn]=null);return Cr.refresh(),oa}return oa.destroy=function(){for(var ta=0;ta<Cr.buffers.length;++ta)Cr.buffers[ta]&&Cr.buffers[ta].destroy();Cr.buffers.length=0,Cr.ownsElements&&(Cr.elements.destroy(),Cr.elements=null,Cr.ownsElements=!1),Cr.destroy()},oa._vao=Cr,oa._reglType="vao",oa(Pr)}return mr}var gg=35632,Gc=35633,_v=35718,Td=35721;function N1(me,Fe,He,et){var ht={},ct={};function At(Rt,tr,Lr,ra){this.name=Rt,this.id=tr,this.location=Lr,this.info=ra}function Bt(Rt,tr){for(var Lr=0;Lr<Rt.length;++Lr)if(Rt[Lr].id===tr.id){Rt[Lr].location=tr.location;return}Rt.push(tr)}function Yt(Rt,tr,Lr){var ra=Rt===gg?ht:ct,Mr=ra[tr];if(!Mr){var Jr=Fe.str(tr);Mr=me.createShader(Rt),me.shaderSource(Mr,Jr),me.compileShader(Mr),ue.shaderError(me,Mr,Jr,Rt,Lr),ra[tr]=Mr}return Mr}var Qt={},er=[],ir=0;function mr(Rt,tr){this.id=ir++,this.fragId=Rt,this.vertId=tr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,et.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function or(Rt,tr,Lr){var ra,Mr,Jr=Yt(gg,Rt.fragId),Dr=Yt(Gc,Rt.vertId),ga=Rt.program=me.createProgram();if(me.attachShader(ga,Jr),me.attachShader(ga,Dr),Lr)for(ra=0;ra<Lr.length;++ra){var Pr=Lr[ra];me.bindAttribLocation(ga,Pr[0],Pr[1])}me.linkProgram(ga),ue.linkError(me,ga,Fe.str(Rt.fragId),Fe.str(Rt.vertId),tr);var Cr=me.getProgramParameter(ga,_v);et.profile&&(Rt.stats.uniformsCount=Cr);var oa=Rt.uniforms;for(ra=0;ra<Cr;++ra)if(Mr=me.getActiveUniform(ga,ra),Mr){if(Mr.size>1)for(var ta=0;ta<Mr.size;++ta){var Ir=Mr.name.replace("[0]","["+ta+"]");Bt(oa,new At(Ir,Fe.id(Ir),me.getUniformLocation(ga,Ir),Mr))}var Wr=Mr.name;Mr.size>1&&(Wr=Wr.replace("[0]","")),Bt(oa,new At(Wr,Fe.id(Wr),me.getUniformLocation(ga,Wr),Mr))}var ua=me.getProgramParameter(ga,Td);et.profile&&(Rt.stats.attributesCount=ua);var Ja=Rt.attributes;for(ra=0;ra<ua;++ra)Mr=me.getActiveAttrib(ga,ra),Mr&&Bt(Ja,new At(Mr.name,Fe.id(Mr.name),me.getAttribLocation(ga,Mr.name),Mr))}et.profile&&(He.getMaxUniformsCount=function(){var Rt=0;return er.forEach(function(tr){tr.stats.uniformsCount>Rt&&(Rt=tr.stats.uniformsCount)}),Rt},He.getMaxAttributesCount=function(){var Rt=0;return er.forEach(function(tr){tr.stats.attributesCount>Rt&&(Rt=tr.stats.attributesCount)}),Rt});function dr(){ht={},ct={};for(var Rt=0;Rt<er.length;++Rt)or(er[Rt],null,er[Rt].attributes.map(function(tr){return[tr.location,tr.name]}))}return{clear:function(){var Rt=me.deleteShader.bind(me);zi(ht).forEach(Rt),ht={},zi(ct).forEach(Rt),ct={},er.forEach(function(tr){me.deleteProgram(tr.program)}),er.length=0,Qt={},He.shaderCount=0},program:function(Rt,tr,Lr,ra){ue.command(Rt>=0,"missing vertex shader",Lr),ue.command(tr>=0,"missing fragment shader",Lr);var Mr=Qt[tr];Mr||(Mr=Qt[tr]={});var Jr=Mr[Rt];if(Jr&&(Jr.refCount++,!ra))return Jr;var Dr=new mr(tr,Rt);return He.shaderCount++,or(Dr,Lr,ra),Jr||(Mr[Rt]=Dr),er.push(Dr),a(Dr,{destroy:function(){if(Dr.refCount--,Dr.refCount<=0){me.deleteProgram(Dr.program);var ga=er.indexOf(Dr);er.splice(ga,1),He.shaderCount--}Mr[Dr.vertId].refCount<=0&&(me.deleteShader(ct[Dr.vertId]),delete ct[Dr.vertId],delete Qt[Dr.fragId][Dr.vertId]),Object.keys(Qt[Dr.fragId]).length||(me.deleteShader(ht[Dr.fragId]),delete ht[Dr.fragId],delete Qt[Dr.fragId])}})},restore:dr,shader:Yt,frag:-1,vert:-1}}var Dp=6408,wv=5121,mg=3333,xf=5126;function Rp(me,Fe,He,et,ht,ct,At){function Bt(er){var ir;Fe.next===null?(ue(ht.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ir=wv):(ue(Fe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ir=Fe.next.colorAttachments[0].texture._texture.type,ue.optional(function(){ct.oes_texture_float?(ue(ir===wv||ir===xf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ir===xf&&ue(At.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ue(ir===wv,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var mr=0,or=0,dr=et.framebufferWidth,Rt=et.framebufferHeight,tr=null;r(er)?tr=er:er&&(ue.type(er,"object","invalid arguments to regl.read()"),mr=er.x|0,or=er.y|0,ue(mr>=0&&mr<et.framebufferWidth,"invalid x offset for regl.read"),ue(or>=0&&or<et.framebufferHeight,"invalid y offset for regl.read"),dr=(er.width||et.framebufferWidth-mr)|0,Rt=(er.height||et.framebufferHeight-or)|0,tr=er.data||null),tr&&(ir===wv?ue(tr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ir===xf&&ue(tr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ue(dr>0&&dr+mr<=et.framebufferWidth,"invalid width for read pixels"),ue(Rt>0&&Rt+or<=et.framebufferHeight,"invalid height for read pixels"),He();var Lr=dr*Rt*4;return tr||(ir===wv?tr=new Uint8Array(Lr):ir===xf&&(tr=tr||new Float32Array(Lr))),ue.isTypedArray(tr,"data buffer for regl.read() must be a typedarray"),ue(tr.byteLength>=Lr,"data buffer for regl.read() too small"),me.pixelStorei(mg,4),me.readPixels(mr,or,dr,Rt,Dp,ir,tr),tr}function Yt(er){var ir;return Fe.setFBO({framebuffer:er.framebuffer},function(){ir=Bt(er)}),ir}function Qt(er){return!er||!("framebuffer"in er)?Bt(er):Yt(er)}return Qt}function Rh(me){return Array.prototype.slice.call(me)}function zh(me){return Rh(me).join("")}function yg(){var me=0,Fe=[],He=[];function et(ir){for(var mr=0;mr<He.length;++mr)if(He[mr]===ir)return Fe[mr];var or="g"+me++;return Fe.push(or),He.push(ir),or}function ht(){var ir=[];function mr(){ir.push.apply(ir,Rh(arguments))}var or=[];function dr(){var Rt="v"+me++;return or.push(Rt),arguments.length>0&&(ir.push(Rt,"="),ir.push.apply(ir,Rh(arguments)),ir.push(";")),Rt}return a(mr,{def:dr,toString:function(){return zh([or.length>0?"var "+or.join(",")+";":"",zh(ir)])}})}function ct(){var ir=ht(),mr=ht(),or=ir.toString,dr=mr.toString;function Rt(tr,Lr){mr(tr,Lr,"=",ir.def(tr,Lr),";")}return a(function(){ir.apply(ir,Rh(arguments))},{def:ir.def,entry:ir,exit:mr,save:Rt,set:function(tr,Lr,ra){Rt(tr,Lr),ir(tr,Lr,"=",ra,";")},toString:function(){return or()+dr()}})}function At(){var ir=zh(arguments),mr=ct(),or=ct(),dr=mr.toString,Rt=or.toString;return a(mr,{then:function(){return mr.apply(mr,Rh(arguments)),this},else:function(){return or.apply(or,Rh(arguments)),this},toString:function(){var tr=Rt();return tr&&(tr="else{"+tr+"}"),zh(["if(",ir,"){",dr(),"}",tr])}})}var Bt=ht(),Yt={};function Qt(ir,mr){var or=[];function dr(){var Mr="a"+or.length;return or.push(Mr),Mr}mr=mr||0;for(var Rt=0;Rt<mr;++Rt)dr();var tr=ct(),Lr=tr.toString,ra=Yt[ir]=a(tr,{arg:dr,toString:function(){return zh(["function(",or.join(),"){",Lr(),"}"])}});return ra}function er(){var ir=['"use strict";',Bt,"return {"];Object.keys(Yt).forEach(function(dr){ir.push('"',dr,'":',Yt[dr].toString(),",")}),ir.push("}");var mr=zh(ir).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),or=Function.apply(null,Fe.concat(mr));return or.apply(null,He)}return{global:Bt,link:et,block:ht,proc:Qt,scope:ct,cond:At,compile:er}}var Zf="xyzw".split(""),zp=5121,Fh=1,Ad=2,Sd=0,Oh=1,Md=2,Hu=3,Tv=4,Vc=5,Uo=6,Nh="dither",jc="blend.enable",kd="blend.color",Av="blend.equation",Ql="blend.func",Ed="depth.enable",hi="depth.func",Sv="depth.range",Su="depth.mask",eu="colorMask",Fi="cull.enable",Gi="cull.face",Cd="frontFace",bf="lineWidth",_f="polygonOffset.enable",U="polygonOffset.offset",K="sample.alpha",ne="sample.enable",ve="sample.coverage",ge="stencil.enable",pe="stencil.mask",ze="stencil.func",Le="stencil.opFront",Ue="stencil.opBack",nt="scissor.enable",tt="scissor.box",xt="viewport",st="profile",Vt="framebuffer",lr="vert",kt="frag",$t="elements",Ht="primitive",ar="count",nr="offset",Gt="instances",Yr="vao",ya="Width",va="Height",ba=Vt+ya,Ma=Vt+va,Ba=xt+ya,Ya=xt+va,Ta="drawingBuffer",un=Ta+ya,ai=Ta+va,ho=[Ql,Av,ze,Le,Ue,ve,xt,tt,U],Jn=34962,pa=34963,Sn=35632,Dn=35633,Ln=3553,To=34067,Nn=2884,Ho=3042,vo=3024,Go=2960,Ps=2929,Hs=3089,ss=32823,no=32926,Ao=32928,tn=5126,Wa=35664,Mi=35665,Io=35666,ms=5124,Ti=35667,_l=35668,Is=35669,Mu=35670,Qi=35671,Ld=35672,wf=35673,ui=35674,Do=35675,xg=35676,Mv=35678,Bh=35680,qc=4,Yc=1028,Wc=1029,$l=2304,Xc=2305,B1=32775,$1=32776,bg=519,Kf=7680,Zc=0,tu=1,Kc=32774,_g=513,wg=36160,Fp=36064,Tf={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$h=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Gu={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Uh={frag:Sn,vert:Dn},Tg={cw:$l,ccw:Xc};function Ag(me){return Array.isArray(me)||r(me)||Hi(me)}function Hh(me){return me.sort(function(Fe,He){return Fe===xt?-1:He===xt?1:Fe<He?-1:1})}function ys(me,Fe,He,et){this.thisDep=me,this.contextDep=Fe,this.propDep=He,this.append=et}function Vu(me){return me&&!(me.thisDep||me.contextDep||me.propDep)}function ls(me){return new ys(!1,!1,!1,me)}function ru(me,Fe){var He=me.type;if(He===Sd){var et=me.data.length;return new ys(!0,et>=1,et>=2,Fe)}else if(He===Tv){var ht=me.data;return new ys(ht.thisDep,ht.contextDep,ht.propDep,Fe)}else{if(He===Vc)return new ys(!1,!1,!1,Fe);if(He===Uo){for(var ct=!1,At=!1,Bt=!1,Yt=0;Yt<me.data.length;++Yt){var Qt=me.data[Yt];if(Qt.type===Oh)Bt=!0;else if(Qt.type===Md)At=!0;else if(Qt.type===Hu)ct=!0;else if(Qt.type===Sd){ct=!0;var er=Qt.data;er>=1&&(At=!0),er>=2&&(Bt=!0)}else Qt.type===Tv&&(ct=ct||Qt.data.thisDep,At=At||Qt.data.contextDep,Bt=Bt||Qt.data.propDep)}return new ys(ct,At,Bt,Fe)}else return new ys(He===Hu,He===Md,He===Oh,Fe)}}var Af=new ys(!1,!1,!1,function(){});function Ub(me,Fe,He,et,ht,ct,At,Bt,Yt,Qt,er,ir,mr,or,dr){var Rt=Qt.Record,tr={add:32774,subtract:32778,"reverse subtract":32779};He.ext_blend_minmax&&(tr.min=B1,tr.max=$1);var Lr=He.angle_instanced_arrays,ra=He.webgl_draw_buffers,Mr=He.oes_vertex_array_object,Jr={dirty:!0,profile:dr.profile},Dr={},ga=[],Pr={},Cr={};function oa(St){return St.replace(".","_")}function ta(St,dt,jt){var pr=oa(St);ga.push(St),Dr[pr]=Jr[pr]=!!jt,Pr[pr]=dt}function Ir(St,dt,jt){var pr=oa(St);ga.push(St),Array.isArray(jt)?(Jr[pr]=jt.slice(),Dr[pr]=jt.slice()):Jr[pr]=Dr[pr]=jt,Cr[pr]=dt}ta(Nh,vo),ta(jc,Ho),Ir(kd,"blendColor",[0,0,0,0]),Ir(Av,"blendEquationSeparate",[Kc,Kc]),Ir(Ql,"blendFuncSeparate",[tu,Zc,tu,Zc]),ta(Ed,Ps,!0),Ir(hi,"depthFunc",_g),Ir(Sv,"depthRange",[0,1]),Ir(Su,"depthMask",!0),Ir(eu,eu,[!0,!0,!0,!0]),ta(Fi,Nn),Ir(Gi,"cullFace",Wc),Ir(Cd,Cd,Xc),Ir(bf,bf,1),ta(_f,ss),Ir(U,"polygonOffset",[0,0]),ta(K,no),ta(ne,Ao),Ir(ve,"sampleCoverage",[1,!1]),ta(ge,Go),Ir(pe,"stencilMask",-1),Ir(ze,"stencilFunc",[bg,0,-1]),Ir(Le,"stencilOpSeparate",[Yc,Kf,Kf,Kf]),Ir(Ue,"stencilOpSeparate",[Wc,Kf,Kf,Kf]),ta(nt,Hs),Ir(tt,"scissor",[0,0,me.drawingBufferWidth,me.drawingBufferHeight]),Ir(xt,xt,[0,0,me.drawingBufferWidth,me.drawingBufferHeight]);var Wr={gl:me,context:mr,strings:Fe,next:Dr,current:Jr,draw:ir,elements:ct,buffer:ht,shader:er,attributes:Qt.state,vao:Qt,uniforms:Yt,framebuffer:Bt,extensions:He,timer:or,isBufferArgs:Ag},ua={primTypes:Es,compareFuncs:Jc,blendFuncs:Tf,blendEquations:tr,stencilOps:Gu,glTypes:is,orientationType:Tg};ue.optional(function(){Wr.isArrayLike=Wn}),ra&&(ua.backBuffer=[Wc],ua.drawBuffer=it(et.maxDrawbuffers,function(St){return St===0?[0]:it(St,function(dt){return Fp+dt})}));var Ja=0;function nn(){var St=yg(),dt=St.link,jt=St.global;St.id=Ja++,St.batchId="0";var pr=dt(Wr),yr=St.shared={props:"a0"};Object.keys(Wr).forEach(function(zt){yr[zt]=jt.def(pr,".",zt)}),ue.optional(function(){St.CHECK=dt(ue),St.commandStr=ue.guessCommand(),St.command=dt(St.commandStr),St.assert=function(zt,Lt,Er){zt("if(!(",Lt,"))",this.CHECK,".commandRaise(",dt(Er),",",this.command,");")},ua.invalidBlendCombinations=$h});var Kt=St.next={},Wt=St.current={};Object.keys(Cr).forEach(function(zt){Array.isArray(Jr[zt])&&(Kt[zt]=jt.def(yr.next,".",zt),Wt[zt]=jt.def(yr.current,".",zt))});var cr=St.constants={};Object.keys(ua).forEach(function(zt){cr[zt]=jt.def(JSON.stringify(ua[zt]))}),St.invoke=function(zt,Lt){switch(Lt.type){case Sd:var Er=["this",yr.context,yr.props,St.batchId];return zt.def(dt(Lt.data),".call(",Er.slice(0,Math.max(Lt.data.length+1,4)),")");case Oh:return zt.def(yr.props,Lt.data);case Md:return zt.def(yr.context,Lt.data);case Hu:return zt.def("this",Lt.data);case Tv:return Lt.data.append(St,zt),Lt.data.ref;case Vc:return Lt.data.toString();case Uo:return Lt.data.map(function(br){return St.invoke(zt,br)})}},St.attribCache={};var Et={};return St.scopeAttrib=function(zt){var Lt=Fe.id(zt);if(Lt in Et)return Et[Lt];var Er=Qt.scope[Lt];Er||(Er=Qt.scope[Lt]=new Rt);var br=Et[Lt]=dt(Er);return br},St}function ma(St){var dt=St.static,jt=St.dynamic,pr;if(st in dt){var yr=!!dt[st];pr=ls(function(Wt,cr){return yr}),pr.enable=yr}else if(st in jt){var Kt=jt[st];pr=ru(Kt,function(Wt,cr){return Wt.invoke(cr,Kt)})}return pr}function Aa(St,dt){var jt=St.static,pr=St.dynamic;if(Vt in jt){var yr=jt[Vt];return yr?(yr=Bt.getFramebuffer(yr),ue.command(yr,"invalid framebuffer object"),ls(function(Wt,cr){var Et=Wt.link(yr),zt=Wt.shared;cr.set(zt.framebuffer,".next",Et);var Lt=zt.context;return cr.set(Lt,"."+ba,Et+".width"),cr.set(Lt,"."+Ma,Et+".height"),Et})):ls(function(Wt,cr){var Et=Wt.shared;cr.set(Et.framebuffer,".next","null");var zt=Et.context;return cr.set(zt,"."+ba,zt+"."+un),cr.set(zt,"."+Ma,zt+"."+ai),"null"})}else if(Vt in pr){var Kt=pr[Vt];return ru(Kt,function(Wt,cr){var Et=Wt.invoke(cr,Kt),zt=Wt.shared,Lt=zt.framebuffer,Er=cr.def(Lt,".getFramebuffer(",Et,")");ue.optional(function(){Wt.assert(cr,"!"+Et+"||"+Er,"invalid framebuffer object")}),cr.set(Lt,".next",Er);var br=zt.context;return cr.set(br,"."+ba,Er+"?"+Er+".width:"+br+"."+un),cr.set(br,"."+Ma,Er+"?"+Er+".height:"+br+"."+ai),Er})}else return null}function an(St,dt,jt){var pr=St.static,yr=St.dynamic;function Kt(Et){if(Et in pr){var zt=pr[Et];ue.commandType(zt,"object","invalid "+Et,jt.commandStr);var Lt=!0,Er=zt.x|0,br=zt.y|0,qr,Kr;return"width"in zt?(qr=zt.width|0,ue.command(qr>=0,"invalid "+Et,jt.commandStr)):Lt=!1,"height"in zt?(Kr=zt.height|0,ue.command(Kr>=0,"invalid "+Et,jt.commandStr)):Lt=!1,new ys(!Lt&&dt&&dt.thisDep,!Lt&&dt&&dt.contextDep,!Lt&&dt&&dt.propDep,function(ln,Ga){var aa=ln.shared.context,Gr=qr;"width"in zt||(Gr=Ga.def(aa,".",ba,"-",Er));var Qa=Kr;return"height"in zt||(Qa=Ga.def(aa,".",Ma,"-",br)),[Er,br,Gr,Qa]})}else if(Et in yr){var Sa=yr[Et],Tn=ru(Sa,function(ln,Ga){var aa=ln.invoke(Ga,Sa);ue.optional(function(){ln.assert(Ga,aa+"&&typeof "+aa+'==="object"',"invalid "+Et)});var Gr=ln.shared.context,Qa=Ga.def(aa,".x|0"),qa=Ga.def(aa,".y|0"),_n=Ga.def('"width" in ',aa,"?",aa,".width|0:","(",Gr,".",ba,"-",Qa,")"),Ei=Ga.def('"height" in ',aa,"?",aa,".height|0:","(",Gr,".",Ma,"-",qa,")");return ue.optional(function(){ln.assert(Ga,_n+">=0&&"+Ei+">=0","invalid "+Et)}),[Qa,qa,_n,Ei]});return dt&&(Tn.thisDep=Tn.thisDep||dt.thisDep,Tn.contextDep=Tn.contextDep||dt.contextDep,Tn.propDep=Tn.propDep||dt.propDep),Tn}else return dt?new ys(dt.thisDep,dt.contextDep,dt.propDep,function(ln,Ga){var aa=ln.shared.context;return[0,0,Ga.def(aa,".",ba),Ga.def(aa,".",Ma)]}):null}var Wt=Kt(xt);if(Wt){var cr=Wt;Wt=new ys(Wt.thisDep,Wt.contextDep,Wt.propDep,function(Et,zt){var Lt=cr.append(Et,zt),Er=Et.shared.context;return zt.set(Er,"."+Ba,Lt[2]),zt.set(Er,"."+Ya,Lt[3]),Lt})}return{viewport:Wt,scissor_box:Kt(tt)}}function pn(St,dt){var jt=St.static,pr=typeof jt[kt]=="string"&&typeof jt[lr]=="string";if(pr){if(Object.keys(dt.dynamic).length>0)return null;var yr=dt.static,Kt=Object.keys(yr);if(Kt.length>0&&typeof yr[Kt[0]]=="number"){for(var Wt=[],cr=0;cr<Kt.length;++cr)ue(typeof yr[Kt[cr]]=="number","must specify all vertex attribute locations when using vaos"),Wt.push([yr[Kt[cr]]|0,Kt[cr]]);return Wt}}return null}function Pn(St,dt,jt){var pr=St.static,yr=St.dynamic;function Kt(Lt){if(Lt in pr){var Er=Fe.id(pr[Lt]);ue.optional(function(){er.shader(Uh[Lt],Er,ue.guessCommand())});var br=ls(function(){return Er});return br.id=Er,br}else if(Lt in yr){var qr=yr[Lt];return ru(qr,function(Kr,Sa){var Tn=Kr.invoke(Sa,qr),ln=Sa.def(Kr.shared.strings,".id(",Tn,")");return ue.optional(function(){Sa(Kr.shared.shader,".shader(",Uh[Lt],",",ln,",",Kr.command,");")}),ln})}return null}var Wt=Kt(kt),cr=Kt(lr),Et=null,zt;return Vu(Wt)&&Vu(cr)?(Et=er.program(cr.id,Wt.id,null,jt),zt=ls(function(Lt,Er){return Lt.link(Et)})):zt=new ys(Wt&&Wt.thisDep||cr&&cr.thisDep,Wt&&Wt.contextDep||cr&&cr.contextDep,Wt&&Wt.propDep||cr&&cr.propDep,function(Lt,Er){var br=Lt.shared.shader,qr;Wt?qr=Wt.append(Lt,Er):qr=Er.def(br,".",kt);var Kr;cr?Kr=cr.append(Lt,Er):Kr=Er.def(br,".",lr);var Sa=br+".program("+Kr+","+qr;return ue.optional(function(){Sa+=","+Lt.command}),Er.def(Sa+")")}),{frag:Wt,vert:cr,progVar:zt,program:Et}}function oi(St,dt){var jt=St.static,pr=St.dynamic,yr={},Kt=!1;function Wt(){if(Yr in jt){var Ga=jt[Yr];return Ga!==null&&Qt.getVAO(Ga)===null&&(Ga=Qt.createVAO(Ga)),Kt=!0,yr.vao=Ga,ls(function(Gr){var Qa=Qt.getVAO(Ga);return Qa?Gr.link(Qa):"null"})}else if(Yr in pr){Kt=!0;var aa=pr[Yr];return ru(aa,function(Gr,Qa){var qa=Gr.invoke(Qa,aa);return Qa.def(Gr.shared.vao+".getVAO("+qa+")")})}return null}var cr=Wt(),Et=!1;function zt(){if($t in jt){var Ga=jt[$t];if(yr.elements=Ga,Ag(Ga)){var aa=yr.elements=ct.create(Ga,!0);Ga=ct.getElements(aa),Et=!0}else Ga&&(Ga=ct.getElements(Ga),Et=!0,ue.command(Ga,"invalid elements",dt.commandStr));var Gr=ls(function(qa,_n){if(Ga){var Ei=qa.link(Ga);return qa.ELEMENTS=Ei,Ei}return qa.ELEMENTS=null,null});return Gr.value=Ga,Gr}else if($t in pr){Et=!0;var Qa=pr[$t];return ru(Qa,function(qa,_n){var Ei=qa.shared,bs=Ei.isBufferArgs,zs=Ei.elements,Pd=qa.invoke(_n,Qa),kv=_n.def("null"),Id=_n.def(bs,"(",Pd,")"),Sg=qa.cond(Id).then(kv,"=",zs,".createStream(",Pd,");").else(kv,"=",zs,".getElements(",Pd,");");return ue.optional(function(){qa.assert(Sg.else,"!"+Pd+"||"+kv,"invalid elements")}),_n.entry(Sg),_n.exit(qa.cond(Id).then(zs,".destroyStream(",kv,");")),qa.ELEMENTS=kv,kv})}else if(Kt)return new ys(cr.thisDep,cr.contextDep,cr.propDep,function(qa,_n){return _n.def(qa.shared.vao+".currentVAO?"+qa.shared.elements+".getElements("+qa.shared.vao+".currentVAO.elements):null")});return null}var Lt=zt();function Er(){if(Ht in jt){var Ga=jt[Ht];return yr.primitive=Ga,ue.commandParameter(Ga,Es,"invalid primitve",dt.commandStr),ls(function(Gr,Qa){return Es[Ga]})}else if(Ht in pr){var aa=pr[Ht];return ru(aa,function(Gr,Qa){var qa=Gr.constants.primTypes,_n=Gr.invoke(Qa,aa);return ue.optional(function(){Gr.assert(Qa,_n+" in "+qa,"invalid primitive, must be one of "+Object.keys(Es))}),Qa.def(qa,"[",_n,"]")})}else{if(Et)return Vu(Lt)?Lt.value?ls(function(Gr,Qa){return Qa.def(Gr.ELEMENTS,".primType")}):ls(function(){return qc}):new ys(Lt.thisDep,Lt.contextDep,Lt.propDep,function(Gr,Qa){var qa=Gr.ELEMENTS;return Qa.def(qa,"?",qa,".primType:",qc)});if(Kt)return new ys(cr.thisDep,cr.contextDep,cr.propDep,function(Gr,Qa){return Qa.def(Gr.shared.vao+".currentVAO?"+Gr.shared.vao+".currentVAO.primitive:"+qc)})}return null}function br(Ga,aa){if(Ga in jt){var Gr=jt[Ga]|0;return aa?yr.offset=Gr:yr.instances=Gr,ue.command(!aa||Gr>=0,"invalid "+Ga,dt.commandStr),ls(function(qa,_n){return aa&&(qa.OFFSET=Gr),Gr})}else if(Ga in pr){var Qa=pr[Ga];return ru(Qa,function(qa,_n){var Ei=qa.invoke(_n,Qa);return aa&&(qa.OFFSET=Ei,ue.optional(function(){qa.assert(_n,Ei+">=0","invalid "+Ga)})),Ei})}else if(aa){if(Et)return ls(function(qa,_n){return qa.OFFSET=0,0});if(Kt)return new ys(cr.thisDep,cr.contextDep,cr.propDep,function(qa,_n){return _n.def(qa.shared.vao+".currentVAO?"+qa.shared.vao+".currentVAO.offset:0")})}else if(Kt)return new ys(cr.thisDep,cr.contextDep,cr.propDep,function(qa,_n){return _n.def(qa.shared.vao+".currentVAO?"+qa.shared.vao+".currentVAO.instances:-1")});return null}var qr=br(nr,!0);function Kr(){if(ar in jt){var Ga=jt[ar]|0;return yr.count=Ga,ue.command(typeof Ga=="number"&&Ga>=0,"invalid vertex count",dt.commandStr),ls(function(){return Ga})}else if(ar in pr){var aa=pr[ar];return ru(aa,function(_n,Ei){var bs=_n.invoke(Ei,aa);return ue.optional(function(){_n.assert(Ei,"typeof "+bs+'==="number"&&'+bs+">=0&&"+bs+"===("+bs+"|0)","invalid vertex count")}),bs})}else if(Et)if(Vu(Lt)){if(Lt)return qr?new ys(qr.thisDep,qr.contextDep,qr.propDep,function(_n,Ei){var bs=Ei.def(_n.ELEMENTS,".vertCount-",_n.OFFSET);return ue.optional(function(){_n.assert(Ei,bs+">=0","invalid vertex offset/element buffer too small")}),bs}):ls(function(_n,Ei){return Ei.def(_n.ELEMENTS,".vertCount")});var Gr=ls(function(){return-1});return ue.optional(function(){Gr.MISSING=!0}),Gr}else{var Qa=new ys(Lt.thisDep||qr.thisDep,Lt.contextDep||qr.contextDep,Lt.propDep||qr.propDep,function(_n,Ei){var bs=_n.ELEMENTS;return _n.OFFSET?Ei.def(bs,"?",bs,".vertCount-",_n.OFFSET,":-1"):Ei.def(bs,"?",bs,".vertCount:-1")});return ue.optional(function(){Qa.DYNAMIC=!0}),Qa}else if(Kt){var qa=new ys(cr.thisDep,cr.contextDep,cr.propDep,function(_n,Ei){return Ei.def(_n.shared.vao,".currentVAO?",_n.shared.vao,".currentVAO.count:-1")});return qa}return null}var Sa=Er(),Tn=Kr(),ln=br(Gt,!1);return{elements:Lt,primitive:Sa,count:Tn,instances:ln,offset:qr,vao:cr,vaoActive:Kt,elementsActive:Et,static:yr}}function Vi(St,dt){var jt=St.static,pr=St.dynamic,yr={};return ga.forEach(function(Kt){var Wt=oa(Kt);function cr(Et,zt){if(Kt in jt){var Lt=Et(jt[Kt]);yr[Wt]=ls(function(){return Lt})}else if(Kt in pr){var Er=pr[Kt];yr[Wt]=ru(Er,function(br,qr){return zt(br,qr,br.invoke(qr,Er))})}}switch(Kt){case Fi:case jc:case Nh:case ge:case Ed:case nt:case _f:case K:case ne:case Su:return cr(function(Et){return ue.commandType(Et,"boolean",Kt,dt.commandStr),Et},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,"typeof "+Lt+'==="boolean"',"invalid flag "+Kt,Et.commandStr)}),Lt});case hi:return cr(function(Et){return ue.commandParameter(Et,Jc,"invalid "+Kt,dt.commandStr),Jc[Et]},function(Et,zt,Lt){var Er=Et.constants.compareFuncs;return ue.optional(function(){Et.assert(zt,Lt+" in "+Er,"invalid "+Kt+", must be one of "+Object.keys(Jc))}),zt.def(Er,"[",Lt,"]")});case Sv:return cr(function(Et){return ue.command(Wn(Et)&&Et.length===2&&typeof Et[0]=="number"&&typeof Et[1]=="number"&&Et[0]<=Et[1],"depth range is 2d array",dt.commandStr),Et},function(Et,zt,Lt){ue.optional(function(){Et.assert(zt,Et.shared.isArrayLike+"("+Lt+")&&"+Lt+".length===2&&typeof "+Lt+'[0]==="number"&&typeof '+Lt+'[1]==="number"&&'+Lt+"[0]<="+Lt+"[1]","depth range must be a 2d array")});var Er=zt.def("+",Lt,"[0]"),br=zt.def("+",Lt,"[1]");return[Er,br]});case Ql:return cr(function(Et){ue.commandType(Et,"object","blend.func",dt.commandStr);var zt="srcRGB"in Et?Et.srcRGB:Et.src,Lt="srcAlpha"in Et?Et.srcAlpha:Et.src,Er="dstRGB"in Et?Et.dstRGB:Et.dst,br="dstAlpha"in Et?Et.dstAlpha:Et.dst;return ue.commandParameter(zt,Tf,Wt+".srcRGB",dt.commandStr),ue.commandParameter(Lt,Tf,Wt+".srcAlpha",dt.commandStr),ue.commandParameter(Er,Tf,Wt+".dstRGB",dt.commandStr),ue.commandParameter(br,Tf,Wt+".dstAlpha",dt.commandStr),ue.command($h.indexOf(zt+", "+Er)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+zt+", "+Er+")",dt.commandStr),[Tf[zt],Tf[Er],Tf[Lt],Tf[br]]},function(Et,zt,Lt){var Er=Et.constants.blendFuncs;ue.optional(function(){Et.assert(zt,Lt+"&&typeof "+Lt+'==="object"',"invalid blend func, must be an object")});function br(aa,Gr){var Qa=zt.def('"',aa,Gr,'" in ',Lt,"?",Lt,".",aa,Gr,":",Lt,".",aa);return ue.optional(function(){Et.assert(zt,Qa+" in "+Er,"invalid "+Kt+"."+aa+Gr+", must be one of "+Object.keys(Tf))}),Qa}var qr=br("src","RGB"),Kr=br("dst","RGB");ue.optional(function(){var aa=Et.constants.invalidBlendCombinations;Et.assert(zt,aa+".indexOf("+qr+'+", "+'+Kr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Sa=zt.def(Er,"[",qr,"]"),Tn=zt.def(Er,"[",br("src","Alpha"),"]"),ln=zt.def(Er,"[",Kr,"]"),Ga=zt.def(Er,"[",br("dst","Alpha"),"]");return[Sa,ln,Tn,Ga]});case Av:return cr(function(Et){if(typeof Et=="string")return ue.commandParameter(Et,tr,"invalid "+Kt,dt.commandStr),[tr[Et],tr[Et]];if(typeof Et=="object")return ue.commandParameter(Et.rgb,tr,Kt+".rgb",dt.commandStr),ue.commandParameter(Et.alpha,tr,Kt+".alpha",dt.commandStr),[tr[Et.rgb],tr[Et.alpha]];ue.commandRaise("invalid blend.equation",dt.commandStr)},function(Et,zt,Lt){var Er=Et.constants.blendEquations,br=zt.def(),qr=zt.def(),Kr=Et.cond("typeof ",Lt,'==="string"');return ue.optional(function(){function Sa(Tn,ln,Ga){Et.assert(Tn,Ga+" in "+Er,"invalid "+ln+", must be one of "+Object.keys(tr))}Sa(Kr.then,Kt,Lt),Et.assert(Kr.else,Lt+"&&typeof "+Lt+'==="object"',"invalid "+Kt),Sa(Kr.else,Kt+".rgb",Lt+".rgb"),Sa(Kr.else,Kt+".alpha",Lt+".alpha")}),Kr.then(br,"=",qr,"=",Er,"[",Lt,"];"),Kr.else(br,"=",Er,"[",Lt,".rgb];",qr,"=",Er,"[",Lt,".alpha];"),zt(Kr),[br,qr]});case kd:return cr(function(Et){return ue.command(Wn(Et)&&Et.length===4,"blend.color must be a 4d array",dt.commandStr),it(4,function(zt){return+Et[zt]})},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,Et.shared.isArrayLike+"("+Lt+")&&"+Lt+".length===4","blend.color must be a 4d array")}),it(4,function(Er){return zt.def("+",Lt,"[",Er,"]")})});case pe:return cr(function(Et){return ue.commandType(Et,"number",Wt,dt.commandStr),Et|0},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,"typeof "+Lt+'==="number"',"invalid stencil.mask")}),zt.def(Lt,"|0")});case ze:return cr(function(Et){ue.commandType(Et,"object",Wt,dt.commandStr);var zt=Et.cmp||"keep",Lt=Et.ref||0,Er="mask"in Et?Et.mask:-1;return ue.commandParameter(zt,Jc,Kt+".cmp",dt.commandStr),ue.commandType(Lt,"number",Kt+".ref",dt.commandStr),ue.commandType(Er,"number",Kt+".mask",dt.commandStr),[Jc[zt],Lt,Er]},function(Et,zt,Lt){var Er=Et.constants.compareFuncs;ue.optional(function(){function Sa(){Et.assert(zt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Sa(Lt+"&&typeof ",Lt,'==="object"'),Sa('!("cmp" in ',Lt,")||(",Lt,".cmp in ",Er,")")});var br=zt.def('"cmp" in ',Lt,"?",Er,"[",Lt,".cmp]",":",Kf),qr=zt.def(Lt,".ref|0"),Kr=zt.def('"mask" in ',Lt,"?",Lt,".mask|0:-1");return[br,qr,Kr]});case Le:case Ue:return cr(function(Et){ue.commandType(Et,"object",Wt,dt.commandStr);var zt=Et.fail||"keep",Lt=Et.zfail||"keep",Er=Et.zpass||"keep";return ue.commandParameter(zt,Gu,Kt+".fail",dt.commandStr),ue.commandParameter(Lt,Gu,Kt+".zfail",dt.commandStr),ue.commandParameter(Er,Gu,Kt+".zpass",dt.commandStr),[Kt===Ue?Wc:Yc,Gu[zt],Gu[Lt],Gu[Er]]},function(Et,zt,Lt){var Er=Et.constants.stencilOps;ue.optional(function(){Et.assert(zt,Lt+"&&typeof "+Lt+'==="object"',"invalid "+Kt)});function br(qr){return ue.optional(function(){Et.assert(zt,'!("'+qr+'" in '+Lt+")||("+Lt+"."+qr+" in "+Er+")","invalid "+Kt+"."+qr+", must be one of "+Object.keys(Gu))}),zt.def('"',qr,'" in ',Lt,"?",Er,"[",Lt,".",qr,"]:",Kf)}return[Kt===Ue?Wc:Yc,br("fail"),br("zfail"),br("zpass")]});case U:return cr(function(Et){ue.commandType(Et,"object",Wt,dt.commandStr);var zt=Et.factor|0,Lt=Et.units|0;return ue.commandType(zt,"number",Wt+".factor",dt.commandStr),ue.commandType(Lt,"number",Wt+".units",dt.commandStr),[zt,Lt]},function(Et,zt,Lt){ue.optional(function(){Et.assert(zt,Lt+"&&typeof "+Lt+'==="object"',"invalid "+Kt)});var Er=zt.def(Lt,".factor|0"),br=zt.def(Lt,".units|0");return[Er,br]});case Gi:return cr(function(Et){var zt=0;return Et==="front"?zt=Yc:Et==="back"&&(zt=Wc),ue.command(!!zt,Wt,dt.commandStr),zt},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,Lt+'==="front"||'+Lt+'==="back"',"invalid cull.face")}),zt.def(Lt,'==="front"?',Yc,":",Wc)});case bf:return cr(function(Et){return ue.command(typeof Et=="number"&&Et>=et.lineWidthDims[0]&&Et<=et.lineWidthDims[1],"invalid line width, must be a positive number between "+et.lineWidthDims[0]+" and "+et.lineWidthDims[1],dt.commandStr),Et},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,"typeof "+Lt+'==="number"&&'+Lt+">="+et.lineWidthDims[0]+"&&"+Lt+"<="+et.lineWidthDims[1],"invalid line width")}),Lt});case Cd:return cr(function(Et){return ue.commandParameter(Et,Tg,Wt,dt.commandStr),Tg[Et]},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,Lt+'==="cw"||'+Lt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),zt.def(Lt+'==="cw"?'+$l+":"+Xc)});case eu:return cr(function(Et){return ue.command(Wn(Et)&&Et.length===4,"color.mask must be length 4 array",dt.commandStr),Et.map(function(zt){return!!zt})},function(Et,zt,Lt){return ue.optional(function(){Et.assert(zt,Et.shared.isArrayLike+"("+Lt+")&&"+Lt+".length===4","invalid color.mask")}),it(4,function(Er){return"!!"+Lt+"["+Er+"]"})});case ve:return cr(function(Et){ue.command(typeof Et=="object"&&Et,Wt,dt.commandStr);var zt="value"in Et?Et.value:1,Lt=!!Et.invert;return ue.command(typeof zt=="number"&&zt>=0&&zt<=1,"sample.coverage.value must be a number between 0 and 1",dt.commandStr),[zt,Lt]},function(Et,zt,Lt){ue.optional(function(){Et.assert(zt,Lt+"&&typeof "+Lt+'==="object"',"invalid sample.coverage")});var Er=zt.def('"value" in ',Lt,"?+",Lt,".value:1"),br=zt.def("!!",Lt,".invert");return[Er,br]})}}),yr}function bn(St,dt){var jt=St.static,pr=St.dynamic,yr={};return Object.keys(jt).forEach(function(Kt){var Wt=jt[Kt],cr;if(typeof Wt=="number"||typeof Wt=="boolean")cr=ls(function(){return Wt});else if(typeof Wt=="function"){var Et=Wt._reglType;Et==="texture2d"||Et==="textureCube"?cr=ls(function(zt){return zt.link(Wt)}):Et==="framebuffer"||Et==="framebufferCube"?(ue.command(Wt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Kt+'"',dt.commandStr),cr=ls(function(zt){return zt.link(Wt.color[0])})):ue.commandRaise('invalid data for uniform "'+Kt+'"',dt.commandStr)}else Wn(Wt)?cr=ls(function(zt){var Lt=zt.global.def("[",it(Wt.length,function(Er){return ue.command(typeof Wt[Er]=="number"||typeof Wt[Er]=="boolean","invalid uniform "+Kt,zt.commandStr),Wt[Er]}),"]");return Lt}):ue.commandRaise('invalid or missing data for uniform "'+Kt+'"',dt.commandStr);cr.value=Wt,yr[Kt]=cr}),Object.keys(pr).forEach(function(Kt){var Wt=pr[Kt];yr[Kt]=ru(Wt,function(cr,Et){return cr.invoke(Et,Wt)})}),yr}function Ni(St,dt){var jt=St.static,pr=St.dynamic,yr={};return Object.keys(jt).forEach(function(Kt){var Wt=jt[Kt],cr=Fe.id(Kt),Et=new Rt;if(Ag(Wt))Et.state=Fh,Et.buffer=ht.getBuffer(ht.create(Wt,Jn,!1,!0)),Et.type=0;else{var zt=ht.getBuffer(Wt);if(zt)Et.state=Fh,Et.buffer=zt,Et.type=0;else if(ue.command(typeof Wt=="object"&&Wt,"invalid data for attribute "+Kt,dt.commandStr),"constant"in Wt){var Lt=Wt.constant;Et.buffer="null",Et.state=Ad,typeof Lt=="number"?Et.x=Lt:(ue.command(Wn(Lt)&&Lt.length>0&&Lt.length<=4,"invalid constant for attribute "+Kt,dt.commandStr),Zf.forEach(function(ln,Ga){Ga<Lt.length&&(Et[ln]=Lt[Ga])}))}else{Ag(Wt.buffer)?zt=ht.getBuffer(ht.create(Wt.buffer,Jn,!1,!0)):zt=ht.getBuffer(Wt.buffer),ue.command(!!zt,'missing buffer for attribute "'+Kt+'"',dt.commandStr);var Er=Wt.offset|0;ue.command(Er>=0,'invalid offset for attribute "'+Kt+'"',dt.commandStr);var br=Wt.stride|0;ue.command(br>=0&&br<256,'invalid stride for attribute "'+Kt+'", must be integer betweeen [0, 255]',dt.commandStr);var qr=Wt.size|0;ue.command(!("size"in Wt)||qr>0&&qr<=4,'invalid size for attribute "'+Kt+'", must be 1,2,3,4',dt.commandStr);var Kr=!!Wt.normalized,Sa=0;"type"in Wt&&(ue.commandParameter(Wt.type,is,"invalid type for attribute "+Kt,dt.commandStr),Sa=is[Wt.type]);var Tn=Wt.divisor|0;ue.optional(function(){"divisor"in Wt&&(ue.command(Tn===0||Lr,'cannot specify divisor for attribute "'+Kt+'", instancing not supported',dt.commandStr),ue.command(Tn>=0,'invalid divisor for attribute "'+Kt+'"',dt.commandStr));var ln=dt.commandStr,Ga=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Wt).forEach(function(aa){ue.command(Ga.indexOf(aa)>=0,'unknown parameter "'+aa+'" for attribute pointer "'+Kt+'" (valid parameters are '+Ga+")",ln)})}),Et.buffer=zt,Et.state=Fh,Et.size=qr,Et.normalized=Kr,Et.type=Sa||zt.dtype,Et.offset=Er,Et.stride=br,Et.divisor=Tn}}yr[Kt]=ls(function(ln,Ga){var aa=ln.attribCache;if(cr in aa)return aa[cr];var Gr={isStream:!1};return Object.keys(Et).forEach(function(Qa){Gr[Qa]=Et[Qa]}),Et.buffer&&(Gr.buffer=ln.link(Et.buffer),Gr.type=Gr.type||Gr.buffer+".dtype"),aa[cr]=Gr,Gr})}),Object.keys(pr).forEach(function(Kt){var Wt=pr[Kt];function cr(Et,zt){var Lt=Et.invoke(zt,Wt),Er=Et.shared,br=Et.constants,qr=Er.isBufferArgs,Kr=Er.buffer;ue.optional(function(){Et.assert(zt,Lt+"&&(typeof "+Lt+'==="object"||typeof '+Lt+'==="function")&&('+qr+"("+Lt+")||"+Kr+".getBuffer("+Lt+")||"+Kr+".getBuffer("+Lt+".buffer)||"+qr+"("+Lt+'.buffer)||("constant" in '+Lt+"&&(typeof "+Lt+'.constant==="number"||'+Er.isArrayLike+"("+Lt+".constant))))",'invalid dynamic attribute "'+Kt+'"')});var Sa={isStream:zt.def(!1)},Tn=new Rt;Tn.state=Fh,Object.keys(Tn).forEach(function(Gr){Sa[Gr]=zt.def(""+Tn[Gr])});var ln=Sa.buffer,Ga=Sa.type;zt("if(",qr,"(",Lt,")){",Sa.isStream,"=true;",ln,"=",Kr,".createStream(",Jn,",",Lt,");",Ga,"=",ln,".dtype;","}else{",ln,"=",Kr,".getBuffer(",Lt,");","if(",ln,"){",Ga,"=",ln,".dtype;",'}else if("constant" in ',Lt,"){",Sa.state,"=",Ad,";","if(typeof "+Lt+'.constant === "number"){',Sa[Zf[0]],"=",Lt,".constant;",Zf.slice(1).map(function(Gr){return Sa[Gr]}).join("="),"=0;","}else{",Zf.map(function(Gr,Qa){return Sa[Gr]+"="+Lt+".constant.length>"+Qa+"?"+Lt+".constant["+Qa+"]:0;"}).join(""),"}}else{","if(",qr,"(",Lt,".buffer)){",ln,"=",Kr,".createStream(",Jn,",",Lt,".buffer);","}else{",ln,"=",Kr,".getBuffer(",Lt,".buffer);","}",Ga,'="type" in ',Lt,"?",br.glTypes,"[",Lt,".type]:",ln,".dtype;",Sa.normalized,"=!!",Lt,".normalized;");function aa(Gr){zt(Sa[Gr],"=",Lt,".",Gr,"|0;")}return aa("size"),aa("offset"),aa("stride"),aa("divisor"),zt("}}"),zt.exit("if(",Sa.isStream,"){",Kr,".destroyStream(",ln,");","}"),Sa}yr[Kt]=ru(Wt,cr)}),yr}function gi(St){var dt=St.static,jt=St.dynamic,pr={};return Object.keys(dt).forEach(function(yr){var Kt=dt[yr];pr[yr]=ls(function(Wt,cr){return typeof Kt=="number"||typeof Kt=="boolean"?""+Kt:Wt.link(Kt)})}),Object.keys(jt).forEach(function(yr){var Kt=jt[yr];pr[yr]=ru(Kt,function(Wt,cr){return Wt.invoke(cr,Kt)})}),pr}function ji(St,dt,jt,pr,yr){var Kt=St.static,Wt=St.dynamic;ue.optional(function(){var aa=[Vt,lr,kt,$t,Ht,nr,ar,Gt,st,Yr].concat(ga);function Gr(Qa){Object.keys(Qa).forEach(function(qa){ue.command(aa.indexOf(qa)>=0,'unknown parameter "'+qa+'"',yr.commandStr)})}Gr(Kt),Gr(Wt)});var cr=pn(St,dt),Et=Aa(St),zt=an(St,Et,yr),Lt=oi(St,yr),Er=Vi(St,yr),br=Pn(St,yr,cr);function qr(aa){var Gr=zt[aa];Gr&&(Er[aa]=Gr)}qr(xt),qr(oa(tt));var Kr=Object.keys(Er).length>0,Sa={framebuffer:Et,draw:Lt,shader:br,state:Er,dirty:Kr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Sa.profile=ma(St),Sa.uniforms=bn(jt,yr),Sa.drawVAO=Sa.scopeVAO=Lt.vao,!Sa.drawVAO&&br.program&&!cr&&He.angle_instanced_arrays&&Lt.static.elements){var Tn=!0,ln=br.program.attributes.map(function(aa){var Gr=dt.static[aa];return Tn=Tn&&!!Gr,Gr});if(Tn&&ln.length>0){var Ga=Qt.getVAO(Qt.createVAO({attributes:ln,elements:Lt.static.elements}));Sa.drawVAO=new ys(null,null,null,function(aa,Gr){return aa.link(Ga)}),Sa.useVAO=!0}}return cr?Sa.useVAO=!0:Sa.attributes=Ni(dt,yr),Sa.context=gi(pr),Sa}function eo(St,dt,jt){var pr=St.shared,yr=pr.context,Kt=St.scope();Object.keys(jt).forEach(function(Wt){dt.save(yr,"."+Wt);var cr=jt[Wt],Et=cr.append(St,dt);Array.isArray(Et)?Kt(yr,".",Wt,"=[",Et.join(),"];"):Kt(yr,".",Wt,"=",Et,";")}),dt(Kt)}function Xo(St,dt,jt,pr){var yr=St.shared,Kt=yr.gl,Wt=yr.framebuffer,cr;ra&&(cr=dt.def(yr.extensions,".webgl_draw_buffers"));var Et=St.constants,zt=Et.drawBuffer,Lt=Et.backBuffer,Er;jt?Er=jt.append(St,dt):Er=dt.def(Wt,".next"),pr||dt("if(",Er,"!==",Wt,".cur){"),dt("if(",Er,"){",Kt,".bindFramebuffer(",wg,",",Er,".framebuffer);"),ra&&dt(cr,".drawBuffersWEBGL(",zt,"[",Er,".colorAttachments.length]);"),dt("}else{",Kt,".bindFramebuffer(",wg,",null);"),ra&&dt(cr,".drawBuffersWEBGL(",Lt,");"),dt("}",Wt,".cur=",Er,";"),pr||dt("}")}function Vo(St,dt,jt){var pr=St.shared,yr=pr.gl,Kt=St.current,Wt=St.next,cr=pr.current,Et=pr.next,zt=St.cond(cr,".dirty");ga.forEach(function(Lt){var Er=oa(Lt);if(!(Er in jt.state)){var br,qr;if(Er in Wt){br=Wt[Er],qr=Kt[Er];var Kr=it(Jr[Er].length,function(Tn){return zt.def(br,"[",Tn,"]")});zt(St.cond(Kr.map(function(Tn,ln){return Tn+"!=="+qr+"["+ln+"]"}).join("||")).then(yr,".",Cr[Er],"(",Kr,");",Kr.map(function(Tn,ln){return qr+"["+ln+"]="+Tn}).join(";"),";"))}else{br=zt.def(Et,".",Er);var Sa=St.cond(br,"!==",cr,".",Er);zt(Sa),Er in Pr?Sa(St.cond(br).then(yr,".enable(",Pr[Er],");").else(yr,".disable(",Pr[Er],");"),cr,".",Er,"=",br,";"):Sa(yr,".",Cr[Er],"(",br,");",cr,".",Er,"=",br,";")}}}),Object.keys(jt.state).length===0&&zt(cr,".dirty=false;"),dt(zt)}function ki(St,dt,jt,pr){var yr=St.shared,Kt=St.current,Wt=yr.current,cr=yr.gl;Hh(Object.keys(jt)).forEach(function(Et){var zt=jt[Et];if(!(pr&&!pr(zt))){var Lt=zt.append(St,dt);if(Pr[Et]){var Er=Pr[Et];Vu(zt)?Lt?dt(cr,".enable(",Er,");"):dt(cr,".disable(",Er,");"):dt(St.cond(Lt).then(cr,".enable(",Er,");").else(cr,".disable(",Er,");")),dt(Wt,".",Et,"=",Lt,";")}else if(Wn(Lt)){var br=Kt[Et];dt(cr,".",Cr[Et],"(",Lt,");",Lt.map(function(qr,Kr){return br+"["+Kr+"]="+qr}).join(";"),";")}else dt(cr,".",Cr[Et],"(",Lt,");",Wt,".",Et,"=",Lt,";")}})}function So(St,dt){Lr&&(St.instancing=dt.def(St.shared.extensions,".angle_instanced_arrays"))}function fn(St,dt,jt,pr,yr){var Kt=St.shared,Wt=St.stats,cr=Kt.current,Et=Kt.timer,zt=jt.profile;function Lt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Er,br;function qr(aa){Er=dt.def(),aa(Er,"=",Lt(),";"),typeof yr=="string"?aa(Wt,".count+=",yr,";"):aa(Wt,".count++;"),or&&(pr?(br=dt.def(),aa(br,"=",Et,".getNumPendingQueries();")):aa(Et,".beginQuery(",Wt,");"))}function Kr(aa){aa(Wt,".cpuTime+=",Lt(),"-",Er,";"),or&&(pr?aa(Et,".pushScopeStats(",br,",",Et,".getNumPendingQueries(),",Wt,");"):aa(Et,".endQuery();"))}function Sa(aa){var Gr=dt.def(cr,".profile");dt(cr,".profile=",aa,";"),dt.exit(cr,".profile=",Gr,";")}var Tn;if(zt){if(Vu(zt)){zt.enable?(qr(dt),Kr(dt.exit),Sa("true")):Sa("false");return}Tn=zt.append(St,dt),Sa(Tn)}else Tn=dt.def(cr,".profile");var ln=St.block();qr(ln),dt("if(",Tn,"){",ln,"}");var Ga=St.block();Kr(Ga),dt.exit("if(",Tn,"){",Ga,"}")}function xs(St,dt,jt,pr,yr){var Kt=St.shared;function Wt(Et){switch(Et){case Wa:case Ti:case Qi:return 2;case Mi:case _l:case Ld:return 3;case Io:case Is:case wf:return 4;default:return 1}}function cr(Et,zt,Lt){var Er=Kt.gl,br=dt.def(Et,".location"),qr=dt.def(Kt.attributes,"[",br,"]"),Kr=Lt.state,Sa=Lt.buffer,Tn=[Lt.x,Lt.y,Lt.z,Lt.w],ln=["buffer","normalized","offset","stride"];function Ga(){dt("if(!",qr,".buffer){",Er,".enableVertexAttribArray(",br,");}");var Gr=Lt.type,Qa;if(Lt.size?Qa=dt.def(Lt.size,"||",zt):Qa=zt,dt("if(",qr,".type!==",Gr,"||",qr,".size!==",Qa,"||",ln.map(function(_n){return qr+"."+_n+"!=="+Lt[_n]}).join("||"),"){",Er,".bindBuffer(",Jn,",",Sa,".buffer);",Er,".vertexAttribPointer(",[br,Qa,Gr,Lt.normalized,Lt.stride,Lt.offset],");",qr,".type=",Gr,";",qr,".size=",Qa,";",ln.map(function(_n){return qr+"."+_n+"="+Lt[_n]+";"}).join(""),"}"),Lr){var qa=Lt.divisor;dt("if(",qr,".divisor!==",qa,"){",St.instancing,".vertexAttribDivisorANGLE(",[br,qa],");",qr,".divisor=",qa,";}")}}function aa(){dt("if(",qr,".buffer){",Er,".disableVertexAttribArray(",br,");",qr,".buffer=null;","}if(",Zf.map(function(Gr,Qa){return qr+"."+Gr+"!=="+Tn[Qa]}).join("||"),"){",Er,".vertexAttrib4f(",br,",",Tn,");",Zf.map(function(Gr,Qa){return qr+"."+Gr+"="+Tn[Qa]+";"}).join(""),"}")}Kr===Fh?Ga():Kr===Ad?aa():(dt("if(",Kr,"===",Fh,"){"),Ga(),dt("}else{"),aa(),dt("}"))}pr.forEach(function(Et){var zt=Et.name,Lt=jt.attributes[zt],Er;if(Lt){if(!yr(Lt))return;Er=Lt.append(St,dt)}else{if(!yr(Af))return;var br=St.scopeAttrib(zt);ue.optional(function(){St.assert(dt,br+".state","missing attribute "+zt)}),Er={},Object.keys(new Rt).forEach(function(qr){Er[qr]=dt.def(br,".",qr)})}cr(St.link(Et),Wt(Et.info.type),Er)})}function fi(St,dt,jt,pr,yr,Kt){for(var Wt=St.shared,cr=Wt.gl,Et={},zt,Lt=0;Lt<pr.length;++Lt){var Er=pr[Lt],br=Er.name,qr=Er.info.type,Kr=Er.info.size,Sa=jt.uniforms[br];if(Kr>1){if(!Sa)continue;var Tn=br.replace("[0]","");if(Et[Tn])continue;Et[Tn]=1}var ln=St.link(Er),Ga=ln+".location",aa;if(Sa){if(!yr(Sa))continue;if(Vu(Sa)){var Gr=Sa.value;if(ue.command(Gr!==null&&typeof Gr!="undefined",'missing uniform "'+br+'"',St.commandStr),qr===Mv||qr===Bh){ue.command(typeof Gr=="function"&&(qr===Mv&&(Gr._reglType==="texture2d"||Gr._reglType==="framebuffer")||qr===Bh&&(Gr._reglType==="textureCube"||Gr._reglType==="framebufferCube")),"invalid texture for uniform "+br,St.commandStr);var Qa=St.link(Gr._texture||Gr.color[0]._texture);dt(cr,".uniform1i(",Ga,",",Qa+".bind());"),dt.exit(Qa,".unbind();")}else if(qr===ui||qr===Do||qr===xg){ue.optional(function(){ue.command(Wn(Gr),"invalid matrix for uniform "+br,St.commandStr),ue.command(qr===ui&&Gr.length===4||qr===Do&&Gr.length===9||qr===xg&&Gr.length===16,"invalid length for matrix uniform "+br,St.commandStr)});var qa=St.global.def("new Float32Array(["+Array.prototype.slice.call(Gr)+"])"),_n=2;qr===Do?_n=3:qr===xg&&(_n=4),dt(cr,".uniformMatrix",_n,"fv(",Ga,",false,",qa,");")}else{switch(qr){case tn:Kr===1?ue.commandType(Gr,"number","uniform "+br,St.commandStr):ue.command(Wn(Gr)&&Gr.length===Kr,"uniform "+br,St.commandStr),zt="1f";break;case Wa:ue.command(Wn(Gr)&&Gr.length&&Gr.length%2==0&&Gr.length<=Kr*2,"uniform "+br,St.commandStr),zt="2f";break;case Mi:ue.command(Wn(Gr)&&Gr.length&&Gr.length%3==0&&Gr.length<=Kr*3,"uniform "+br,St.commandStr),zt="3f";break;case Io:ue.command(Wn(Gr)&&Gr.length&&Gr.length%4==0&&Gr.length<=Kr*4,"uniform "+br,St.commandStr),zt="4f";break;case Mu:Kr===1?ue.commandType(Gr,"boolean","uniform "+br,St.commandStr):ue.command(Wn(Gr)&&Gr.length===Kr,"uniform "+br,St.commandStr),zt="1i";break;case ms:Kr===1?ue.commandType(Gr,"number","uniform "+br,St.commandStr):ue.command(Wn(Gr)&&Gr.length===Kr,"uniform "+br,St.commandStr),zt="1i";break;case Qi:ue.command(Wn(Gr)&&Gr.length&&Gr.length%2==0&&Gr.length<=Kr*2,"uniform "+br,St.commandStr),zt="2i";break;case Ti:ue.command(Wn(Gr)&&Gr.length&&Gr.length%2==0&&Gr.length<=Kr*2,"uniform "+br,St.commandStr),zt="2i";break;case Ld:ue.command(Wn(Gr)&&Gr.length&&Gr.length%3==0&&Gr.length<=Kr*3,"uniform "+br,St.commandStr),zt="3i";break;case _l:ue.command(Wn(Gr)&&Gr.length&&Gr.length%3==0&&Gr.length<=Kr*3,"uniform "+br,St.commandStr),zt="3i";break;case wf:ue.command(Wn(Gr)&&Gr.length&&Gr.length%4==0&&Gr.length<=Kr*4,"uniform "+br,St.commandStr),zt="4i";break;case Is:ue.command(Wn(Gr)&&Gr.length&&Gr.length%4==0&&Gr.length<=Kr*4,"uniform "+br,St.commandStr),zt="4i";break}Kr>1?(zt+="v",Gr=St.global.def("["+Array.prototype.slice.call(Gr)+"]")):Gr=Wn(Gr)?Array.prototype.slice.call(Gr):Gr,dt(cr,".uniform",zt,"(",Ga,",",Gr,");")}continue}else aa=Sa.append(St,dt)}else{if(!yr(Af))continue;aa=dt.def(Wt.uniforms,"[",Fe.id(br),"]")}qr===Mv?(ue(!Array.isArray(aa),"must specify a scalar prop for textures"),dt("if(",aa,"&&",aa,'._reglType==="framebuffer"){',aa,"=",aa,".color[0];","}")):qr===Bh&&(ue(!Array.isArray(aa),"must specify a scalar prop for cube maps"),dt("if(",aa,"&&",aa,'._reglType==="framebufferCube"){',aa,"=",aa,".color[0];","}")),ue.optional(function(){function Jf(ku,Vb){St.assert(dt,ku,'bad data or missing for uniform "'+br+'".  '+Vb)}function Mg(ku,Vb){Vb===1&&ue(!Array.isArray(aa),"must not specify an array type for uniform"),Jf("Array.isArray("+aa+") && typeof "+aa+'[0]===" '+ku+'" || typeof '+aa+'==="'+ku+'"',"invalid type, expected "+ku)}function Qc(ku,Vb,kg){Array.isArray(aa)?ue(aa.length&&aa.length%ku==0&&aa.length<=ku*kg,"must have length of "+(kg===1?"":"n * ")+ku):Jf(Wt.isArrayLike+"("+aa+")&&"+aa+".length && "+aa+".length % "+ku+" === 0 && "+aa+".length<="+ku*kg,"invalid vector, should have length of "+(kg===1?"":"n * ")+ku,St.commandStr)}function w3(ku){ue(!Array.isArray(aa),"must not specify a value type"),Jf("typeof "+aa+'==="function"&&'+aa+'._reglType==="texture'+(ku===Ln?"2d":"Cube")+'"',"invalid texture type",St.commandStr)}switch(qr){case ms:Mg("number",Kr);break;case Ti:Qc(2,"number",Kr);break;case _l:Qc(3,"number",Kr);break;case Is:Qc(4,"number",Kr);break;case tn:Mg("number",Kr);break;case Wa:Qc(2,"number",Kr);break;case Mi:Qc(3,"number",Kr);break;case Io:Qc(4,"number",Kr);break;case Mu:Mg("boolean",Kr);break;case Qi:Qc(2,"boolean",Kr);break;case Ld:Qc(3,"boolean",Kr);break;case wf:Qc(4,"boolean",Kr);break;case ui:Qc(4,"number",Kr);break;case Do:Qc(9,"number",Kr);break;case xg:Qc(16,"number",Kr);break;case Mv:w3(Ln);break;case Bh:w3(To);break}});var Ei=1;switch(qr){case Mv:case Bh:var bs=dt.def(aa,"._texture");dt(cr,".uniform1i(",Ga,",",bs,".bind());"),dt.exit(bs,".unbind();");continue;case ms:case Mu:zt="1i";break;case Ti:case Qi:zt="2i",Ei=2;break;case _l:case Ld:zt="3i",Ei=3;break;case Is:case wf:zt="4i",Ei=4;break;case tn:zt="1f";break;case Wa:zt="2f",Ei=2;break;case Mi:zt="3f",Ei=3;break;case Io:zt="4f",Ei=4;break;case ui:zt="Matrix2fv";break;case Do:zt="Matrix3fv";break;case xg:zt="Matrix4fv";break}if(zt.indexOf("Matrix")===-1&&Kr>1&&(zt+="v",Ei=1),zt.charAt(0)==="M"){dt(cr,".uniform",zt,"(",Ga,",");var zs=Math.pow(qr-ui+2,2),Pd=St.global.def("new Float32Array(",zs,")");Array.isArray(aa)?dt("false,(",it(zs,function(Jf){return Pd+"["+Jf+"]="+aa[Jf]}),",",Pd,")"):dt("false,(Array.isArray(",aa,")||",aa," instanceof Float32Array)?",aa,":(",it(zs,function(Jf){return Pd+"["+Jf+"]="+aa+"["+Jf+"]"}),",",Pd,")"),dt(");")}else if(Ei>1){for(var kv=[],Id=[],Sg=0;Sg<Ei;++Sg)Array.isArray(aa)?Id.push(aa[Sg]):Id.push(dt.def(aa+"["+Sg+"]")),Kt&&kv.push(dt.def());Kt&&dt("if(!",St.batchId,"||",kv.map(function(Jf,Mg){return Jf+"!=="+Id[Mg]}).join("||"),"){",kv.map(function(Jf,Mg){return Jf+"="+Id[Mg]+";"}).join("")),dt(cr,".uniform",zt,"(",Ga,",",Id.join(","),");"),Kt&&dt("}")}else{if(ue(!Array.isArray(aa),"uniform value must not be an array"),Kt){var uk=dt.def();dt("if(!",St.batchId,"||",uk,"!==",aa,"){",uk,"=",aa,";")}dt(cr,".uniform",zt,"(",Ga,",",aa,");"),Kt&&dt("}")}}}function sn(St,dt,jt,pr){var yr=St.shared,Kt=yr.gl,Wt=yr.draw,cr=pr.draw;function Et(){var Qa=cr.elements,qa,_n=dt;return Qa?((Qa.contextDep&&pr.contextDynamic||Qa.propDep)&&(_n=jt),qa=Qa.append(St,_n),cr.elementsActive&&_n("if("+qa+")"+Kt+".bindBuffer("+pa+","+qa+".buffer.buffer);")):(qa=_n.def(),_n(qa,"=",Wt,".",$t,";","if(",qa,"){",Kt,".bindBuffer(",pa,",",qa,".buffer.buffer);}","else if(",yr.vao,".currentVAO){",qa,"=",St.shared.elements+".getElements("+yr.vao,".currentVAO.elements);",Mr?"":"if("+qa+")"+Kt+".bindBuffer("+pa+","+qa+".buffer.buffer);","}")),qa}function zt(){var Qa=cr.count,qa,_n=dt;return Qa?((Qa.contextDep&&pr.contextDynamic||Qa.propDep)&&(_n=jt),qa=Qa.append(St,_n),ue.optional(function(){Qa.MISSING&&St.assert(dt,"false","missing vertex count"),Qa.DYNAMIC&&St.assert(_n,qa+">=0","missing vertex count")})):(qa=_n.def(Wt,".",ar),ue.optional(function(){St.assert(_n,qa+">=0","missing vertex count")})),qa}var Lt=Et();function Er(Qa){var qa=cr[Qa];return qa?qa.contextDep&&pr.contextDynamic||qa.propDep?qa.append(St,jt):qa.append(St,dt):dt.def(Wt,".",Qa)}var br=Er(Ht),qr=Er(nr),Kr=zt();if(typeof Kr=="number"){if(Kr===0)return}else jt("if(",Kr,"){"),jt.exit("}");var Sa,Tn;Lr&&(Sa=Er(Gt),Tn=St.instancing);var ln=Lt+".type",Ga=cr.elements&&Vu(cr.elements)&&!cr.vaoActive;function aa(){function Qa(){jt(Tn,".drawElementsInstancedANGLE(",[br,Kr,ln,qr+"<<(("+ln+"-"+zp+")>>1)",Sa],");")}function qa(){jt(Tn,".drawArraysInstancedANGLE(",[br,qr,Kr,Sa],");")}Lt&&Lt!=="null"?Ga?Qa():(jt("if(",Lt,"){"),Qa(),jt("}else{"),qa(),jt("}")):qa()}function Gr(){function Qa(){jt(Kt+".drawElements("+[br,Kr,ln,qr+"<<(("+ln+"-"+zp+")>>1)"]+");")}function qa(){jt(Kt+".drawArrays("+[br,qr,Kr]+");")}Lt&&Lt!=="null"?Ga?Qa():(jt("if(",Lt,"){"),Qa(),jt("}else{"),qa(),jt("}")):qa()}Lr&&(typeof Sa!="number"||Sa>=0)?typeof Sa=="string"?(jt("if(",Sa,">0){"),aa(),jt("}else if(",Sa,"<0){"),Gr(),jt("}")):aa():Gr()}function jn(St,dt,jt,pr,yr){var Kt=nn(),Wt=Kt.proc("body",yr);return ue.optional(function(){Kt.commandStr=dt.commandStr,Kt.command=Kt.link(dt.commandStr)}),Lr&&(Kt.instancing=Wt.def(Kt.shared.extensions,".angle_instanced_arrays")),St(Kt,Wt,jt,pr),Kt.compile().body}function Qn(St,dt,jt,pr){So(St,dt),jt.useVAO?jt.drawVAO?dt(St.shared.vao,".setVAO(",jt.drawVAO.append(St,dt),");"):dt(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):(dt(St.shared.vao,".setVAO(null);"),xs(St,dt,jt,pr.attributes,function(){return!0})),fi(St,dt,jt,pr.uniforms,function(){return!0},!1),sn(St,dt,dt,jt)}function po(St,dt){var jt=St.proc("draw",1);So(St,jt),eo(St,jt,dt.context),Xo(St,jt,dt.framebuffer),Vo(St,jt,dt),ki(St,jt,dt.state),fn(St,jt,dt,!1,!0);var pr=dt.shader.progVar.append(St,jt);if(jt(St.shared.gl,".useProgram(",pr,".program);"),dt.shader.program)Qn(St,jt,dt,dt.shader.program);else{jt(St.shared.vao,".setVAO(null);");var yr=St.global.def("{}"),Kt=jt.def(pr,".id"),Wt=jt.def(yr,"[",Kt,"]");jt(St.cond(Wt).then(Wt,".call(this,a0);").else(Wt,"=",yr,"[",Kt,"]=",St.link(function(cr){return jn(Qn,St,dt,cr,1)}),"(",pr,");",Wt,".call(this,a0);"))}Object.keys(dt.state).length>0&&jt(St.shared.current,".dirty=true;"),St.shared.vao&&jt(St.shared.vao,".setVAO(null);")}function au(St,dt,jt,pr){St.batchId="a1",So(St,dt);function yr(){return!0}xs(St,dt,jt,pr.attributes,yr),fi(St,dt,jt,pr.uniforms,yr,!1),sn(St,dt,dt,jt)}function io(St,dt,jt,pr){So(St,dt);var yr=jt.contextDep,Kt=dt.def(),Wt="a0",cr="a1",Et=dt.def();St.shared.props=Et,St.batchId=Kt;var zt=St.scope(),Lt=St.scope();dt(zt.entry,"for(",Kt,"=0;",Kt,"<",cr,";++",Kt,"){",Et,"=",Wt,"[",Kt,"];",Lt,"}",zt.exit);function Er(ln){return ln.contextDep&&yr||ln.propDep}function br(ln){return!Er(ln)}if(jt.needsContext&&eo(St,Lt,jt.context),jt.needsFramebuffer&&Xo(St,Lt,jt.framebuffer),ki(St,Lt,jt.state,Er),jt.profile&&Er(jt.profile)&&fn(St,Lt,jt,!1,!0),pr)jt.useVAO?jt.drawVAO?Er(jt.drawVAO)?Lt(St.shared.vao,".setVAO(",jt.drawVAO.append(St,Lt),");"):zt(St.shared.vao,".setVAO(",jt.drawVAO.append(St,zt),");"):zt(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):(zt(St.shared.vao,".setVAO(null);"),xs(St,zt,jt,pr.attributes,br),xs(St,Lt,jt,pr.attributes,Er)),fi(St,zt,jt,pr.uniforms,br,!1),fi(St,Lt,jt,pr.uniforms,Er,!0),sn(St,zt,Lt,jt);else{var qr=St.global.def("{}"),Kr=jt.shader.progVar.append(St,Lt),Sa=Lt.def(Kr,".id"),Tn=Lt.def(qr,"[",Sa,"]");Lt(St.shared.gl,".useProgram(",Kr,".program);","if(!",Tn,"){",Tn,"=",qr,"[",Sa,"]=",St.link(function(ln){return jn(au,St,jt,ln,2)}),"(",Kr,");}",Tn,".call(this,a0[",Kt,"],",Kt,");")}}function Ct(St,dt){var jt=St.proc("batch",2);St.batchId="0",So(St,jt);var pr=!1,yr=!0;Object.keys(dt.context).forEach(function(qr){pr=pr||dt.context[qr].propDep}),pr||(eo(St,jt,dt.context),yr=!1);var Kt=dt.framebuffer,Wt=!1;Kt?(Kt.propDep?pr=Wt=!0:Kt.contextDep&&pr&&(Wt=!0),Wt||Xo(St,jt,Kt)):Xo(St,jt,null),dt.state.viewport&&dt.state.viewport.propDep&&(pr=!0);function cr(qr){return qr.contextDep&&pr||qr.propDep}Vo(St,jt,dt),ki(St,jt,dt.state,function(qr){return!cr(qr)}),(!dt.profile||!cr(dt.profile))&&fn(St,jt,dt,!1,"a1"),dt.contextDep=pr,dt.needsContext=yr,dt.needsFramebuffer=Wt;var Et=dt.shader.progVar;if(Et.contextDep&&pr||Et.propDep)io(St,jt,dt,null);else{var zt=Et.append(St,jt);if(jt(St.shared.gl,".useProgram(",zt,".program);"),dt.shader.program)io(St,jt,dt,dt.shader.program);else{jt(St.shared.vao,".setVAO(null);");var Lt=St.global.def("{}"),Er=jt.def(zt,".id"),br=jt.def(Lt,"[",Er,"]");jt(St.cond(br).then(br,".call(this,a0,a1);").else(br,"=",Lt,"[",Er,"]=",St.link(function(qr){return jn(io,St,dt,qr,2)}),"(",zt,");",br,".call(this,a0,a1);"))}}Object.keys(dt.state).length>0&&jt(St.shared.current,".dirty=true;"),St.shared.vao&&jt(St.shared.vao,".setVAO(null);")}function Ar(St,dt){var jt=St.proc("scope",3);St.batchId="a2";var pr=St.shared,yr=pr.current;eo(St,jt,dt.context),dt.framebuffer&&dt.framebuffer.append(St,jt),Hh(Object.keys(dt.state)).forEach(function(Wt){var cr=dt.state[Wt],Et=cr.append(St,jt);Wn(Et)?Et.forEach(function(zt,Lt){jt.set(St.next[Wt],"["+Lt+"]",zt)}):jt.set(pr.next,"."+Wt,Et)}),fn(St,jt,dt,!0,!0),[$t,nr,ar,Gt,Ht].forEach(function(Wt){var cr=dt.draw[Wt];!cr||jt.set(pr.draw,"."+Wt,""+cr.append(St,jt))}),Object.keys(dt.uniforms).forEach(function(Wt){var cr=dt.uniforms[Wt].append(St,jt);Array.isArray(cr)&&(cr="["+cr.join()+"]"),jt.set(pr.uniforms,"["+Fe.id(Wt)+"]",cr)}),Object.keys(dt.attributes).forEach(function(Wt){var cr=dt.attributes[Wt].append(St,jt),Et=St.scopeAttrib(Wt);Object.keys(new Rt).forEach(function(zt){jt.set(Et,"."+zt,cr[zt])})}),dt.scopeVAO&&jt.set(pr.vao,".targetVAO",dt.scopeVAO.append(St,jt));function Kt(Wt){var cr=dt.shader[Wt];cr&&jt.set(pr.shader,"."+Wt,cr.append(St,jt))}Kt(lr),Kt(kt),Object.keys(dt.state).length>0&&(jt(yr,".dirty=true;"),jt.exit(yr,".dirty=true;")),jt("a1(",St.shared.context,",a0,",St.batchId,");")}function _r(St){if(!(typeof St!="object"||Wn(St))){for(var dt=Object.keys(St),jt=0;jt<dt.length;++jt)if(_t.isDynamic(St[dt[jt]]))return!0;return!1}}function Na(St,dt,jt){var pr=dt.static[jt];if(!pr||!_r(pr))return;var yr=St.global,Kt=Object.keys(pr),Wt=!1,cr=!1,Et=!1,zt=St.global.def("{}");Kt.forEach(function(Er){var br=pr[Er];if(_t.isDynamic(br)){typeof br=="function"&&(br=pr[Er]=_t.unbox(br));var qr=ru(br,null);Wt=Wt||qr.thisDep,Et=Et||qr.propDep,cr=cr||qr.contextDep}else{switch(yr(zt,".",Er,"="),typeof br){case"number":yr(br);break;case"string":yr('"',br,'"');break;case"object":Array.isArray(br)&&yr("[",br.join(),"]");break;default:yr(St.link(br));break}yr(";")}});function Lt(Er,br){Kt.forEach(function(qr){var Kr=pr[qr];if(!!_t.isDynamic(Kr)){var Sa=Er.invoke(br,Kr);br(zt,".",qr,"=",Sa,";")}})}dt.dynamic[jt]=new _t.DynamicVariable(Tv,{thisDep:Wt,contextDep:cr,propDep:Et,ref:zt,append:Lt}),delete dt.static[jt]}function qn(St,dt,jt,pr,yr){var Kt=nn();Kt.stats=Kt.link(yr),Object.keys(dt.static).forEach(function(cr){Na(Kt,dt,cr)}),ho.forEach(function(cr){Na(Kt,St,cr)});var Wt=ji(St,dt,jt,pr,Kt);return po(Kt,Wt),Ar(Kt,Wt),Ct(Kt,Wt),a(Kt.compile(),{destroy:function(){Wt.shader.program.destroy()}})}return{next:Dr,current:Jr,procs:function(){var St=nn(),dt=St.proc("poll"),jt=St.proc("refresh"),pr=St.block();dt(pr),jt(pr);var yr=St.shared,Kt=yr.gl,Wt=yr.next,cr=yr.current;pr(cr,".dirty=false;"),Xo(St,dt),Xo(St,jt,null,!0);var Et;Lr&&(Et=St.link(Lr)),He.oes_vertex_array_object&&jt(St.link(He.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var zt=0;zt<et.maxAttributes;++zt){var Lt=jt.def(yr.attributes,"[",zt,"]"),Er=St.cond(Lt,".buffer");Er.then(Kt,".enableVertexAttribArray(",zt,");",Kt,".bindBuffer(",Jn,",",Lt,".buffer.buffer);",Kt,".vertexAttribPointer(",zt,",",Lt,".size,",Lt,".type,",Lt,".normalized,",Lt,".stride,",Lt,".offset);").else(Kt,".disableVertexAttribArray(",zt,");",Kt,".vertexAttrib4f(",zt,",",Lt,".x,",Lt,".y,",Lt,".z,",Lt,".w);",Lt,".buffer=null;"),jt(Er),Lr&&jt(Et,".vertexAttribDivisorANGLE(",zt,",",Lt,".divisor);")}return jt(St.shared.vao,".currentVAO=null;",St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"),Object.keys(Pr).forEach(function(br){var qr=Pr[br],Kr=pr.def(Wt,".",br),Sa=St.block();Sa("if(",Kr,"){",Kt,".enable(",qr,")}else{",Kt,".disable(",qr,")}",cr,".",br,"=",Kr,";"),jt(Sa),dt("if(",Kr,"!==",cr,".",br,"){",Sa,"}")}),Object.keys(Cr).forEach(function(br){var qr=Cr[br],Kr=Jr[br],Sa,Tn,ln=St.block();if(ln(Kt,".",qr,"("),Wn(Kr)){var Ga=Kr.length;Sa=St.global.def(Wt,".",br),Tn=St.global.def(cr,".",br),ln(it(Ga,function(aa){return Sa+"["+aa+"]"}),");",it(Ga,function(aa){return Tn+"["+aa+"]="+Sa+"["+aa+"];"}).join("")),dt("if(",it(Ga,function(aa){return Sa+"["+aa+"]!=="+Tn+"["+aa+"]"}).join("||"),"){",ln,"}")}else Sa=pr.def(Wt,".",br),Tn=pr.def(cr,".",br),ln(Sa,");",cr,".",br,"=",Sa,";"),dt("if(",Sa,"!==",Tn,"){",ln,"}");jt(ln)}),St.compile()}(),compile:qn}}function Hb(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var U1=34918,Gb=34919,H=35007,P=function(me,Fe){if(!Fe.ext_disjoint_timer_query)return null;var He=[];function et(){return He.pop()||Fe.ext_disjoint_timer_query.createQueryEXT()}function ht(Lr){He.push(Lr)}var ct=[];function At(Lr){var ra=et();Fe.ext_disjoint_timer_query.beginQueryEXT(H,ra),ct.push(ra),or(ct.length-1,ct.length,Lr)}function Bt(){Fe.ext_disjoint_timer_query.endQueryEXT(H)}function Yt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Qt=[];function er(){return Qt.pop()||new Yt}function ir(Lr){Qt.push(Lr)}var mr=[];function or(Lr,ra,Mr){var Jr=er();Jr.startQueryIndex=Lr,Jr.endQueryIndex=ra,Jr.sum=0,Jr.stats=Mr,mr.push(Jr)}var dr=[],Rt=[];function tr(){var Lr,ra,Mr=ct.length;if(Mr!==0){Rt.length=Math.max(Rt.length,Mr+1),dr.length=Math.max(dr.length,Mr+1),dr[0]=0,Rt[0]=0;var Jr=0;for(Lr=0,ra=0;ra<ct.length;++ra){var Dr=ct[ra];Fe.ext_disjoint_timer_query.getQueryObjectEXT(Dr,Gb)?(Jr+=Fe.ext_disjoint_timer_query.getQueryObjectEXT(Dr,U1),ht(Dr)):ct[Lr++]=Dr,dr[ra+1]=Jr,Rt[ra+1]=Lr}for(ct.length=Lr,Lr=0,ra=0;ra<mr.length;++ra){var ga=mr[ra],Pr=ga.startQueryIndex,Cr=ga.endQueryIndex;ga.sum+=dr[Cr]-dr[Pr];var oa=Rt[Pr],ta=Rt[Cr];ta===oa?(ga.stats.gpuTime+=ga.sum/1e6,ir(ga)):(ga.startQueryIndex=oa,ga.endQueryIndex=ta,mr[Lr++]=ga)}mr.length=Lr}}return{beginQuery:At,endQuery:Bt,pushScopeStats:or,update:tr,getNumPendingQueries:function(){return ct.length},clear:function(){He.push.apply(He,ct);for(var Lr=0;Lr<He.length;Lr++)Fe.ext_disjoint_timer_query.deleteQueryEXT(He[Lr]);ct.length=0,He.length=0},restore:function(){ct.length=0,He.length=0}}},V=16384,z=256,j=1024,te=34962,le="webglcontextlost",_e="webglcontextrestored",ke=1,Be=2,rt=3;function ut(me,Fe){for(var He=0;He<me.length;++He)if(me[He]===Fe)return He;return-1}function gt(me){var Fe=Zr(me);if(!Fe)return null;var He=Fe.gl,et=He.getContextAttributes(),ht=He.isContextLost(),ct=Oe(He,Fe);if(!ct)return null;var At=Ot(),Bt=Hb(),Yt=ct.extensions,Qt=P(He,Yt),er=Tt(),ir=He.drawingBufferWidth,mr=He.drawingBufferHeight,or={tick:0,time:0,viewportWidth:ir,viewportHeight:mr,framebufferWidth:ir,framebufferHeight:mr,drawingBufferWidth:ir,drawingBufferHeight:mr,pixelRatio:Fe.pixelRatio},dr={},Rt={elements:null,primitive:4,count:-1,offset:0,instances:-1},tr=xl(He,Yt),Lr=Tc(He,Bt,Fe,Jr),ra=I1(He,Yt,Lr,Bt),Mr=Dh(He,Yt,tr,Bt,Lr,ra,Rt);function Jr(sn){return Mr.destroyBuffer(sn)}var Dr=N1(He,At,Bt,Fe),ga=Bm(He,Yt,tr,function(){oa.procs.poll()},or,Bt,Fe),Pr=sg(He,Yt,tr,Bt,Fe),Cr=pg(He,Yt,tr,ga,Pr,Bt),oa=Ub(He,At,Yt,tr,Lr,ra,ga,Cr,dr,Mr,Dr,Rt,or,Qt,Fe),ta=Rp(He,Cr,oa.procs.poll,or,et,Yt,tr),Ir=oa.next,Wr=He.canvas,ua=[],Ja=[],nn=[],ma=[Fe.onDestroy],Aa=null;function an(){if(ua.length===0){Qt&&Qt.update(),Aa=null;return}Aa=Pt.next(an),ki();for(var sn=ua.length-1;sn>=0;--sn){var jn=ua[sn];jn&&jn(or,null,0)}He.flush(),Qt&&Qt.update()}function pn(){!Aa&&ua.length>0&&(Aa=Pt.next(an))}function Pn(){Aa&&(Pt.cancel(an),Aa=null)}function oi(sn){sn.preventDefault(),ht=!0,Pn(),Ja.forEach(function(jn){jn()})}function Vi(sn){He.getError(),ht=!1,ct.restore(),Dr.restore(),Lr.restore(),ga.restore(),Pr.restore(),Cr.restore(),Mr.restore(),Qt&&Qt.restore(),oa.procs.refresh(),pn(),nn.forEach(function(jn){jn()})}Wr&&(Wr.addEventListener(le,oi,!1),Wr.addEventListener(_e,Vi,!1));function bn(){ua.length=0,Pn(),Wr&&(Wr.removeEventListener(le,oi),Wr.removeEventListener(_e,Vi)),Dr.clear(),Cr.clear(),Pr.clear(),Mr.clear(),ga.clear(),ra.clear(),Lr.clear(),Qt&&Qt.clear(),ma.forEach(function(sn){sn()})}function Ni(sn){ue(!!sn,"invalid args to regl({...})"),ue.type(sn,"object","invalid args to regl({...})");function jn(yr){var Kt=a({},yr);delete Kt.uniforms,delete Kt.attributes,delete Kt.context,delete Kt.vao,"stencil"in Kt&&Kt.stencil.op&&(Kt.stencil.opBack=Kt.stencil.opFront=Kt.stencil.op,delete Kt.stencil.op);function Wt(cr){if(cr in Kt){var Et=Kt[cr];delete Kt[cr],Object.keys(Et).forEach(function(zt){Kt[cr+"."+zt]=Et[zt]})}}return Wt("blend"),Wt("depth"),Wt("cull"),Wt("stencil"),Wt("polygonOffset"),Wt("scissor"),Wt("sample"),"vao"in yr&&(Kt.vao=yr.vao),Kt}function Qn(yr,Kt){var Wt={},cr={};return Object.keys(yr).forEach(function(Et){var zt=yr[Et];if(_t.isDynamic(zt)){cr[Et]=_t.unbox(zt,Et);return}else if(Kt&&Array.isArray(zt)){for(var Lt=0;Lt<zt.length;++Lt)if(_t.isDynamic(zt[Lt])){cr[Et]=_t.unbox(zt,Et);return}}Wt[Et]=zt}),{dynamic:cr,static:Wt}}var po=Qn(sn.context||{},!0),au=Qn(sn.uniforms||{},!0),io=Qn(sn.attributes||{},!1),Ct=Qn(jn(sn),!1),Ar={gpuTime:0,cpuTime:0,count:0},_r=oa.compile(Ct,io,au,po,Ar),Na=_r.draw,qn=_r.batch,St=_r.scope,dt=[];function jt(yr){for(;dt.length<yr;)dt.push(null);return dt}function pr(yr,Kt){var Wt;if(ht&&ue.raise("context lost"),typeof yr=="function")return St.call(this,null,yr,0);if(typeof Kt=="function")if(typeof yr=="number")for(Wt=0;Wt<yr;++Wt)St.call(this,null,Kt,Wt);else if(Array.isArray(yr))for(Wt=0;Wt<yr.length;++Wt)St.call(this,yr[Wt],Kt,Wt);else return St.call(this,yr,Kt,0);else if(typeof yr=="number"){if(yr>0)return qn.call(this,jt(yr|0),yr|0)}else if(Array.isArray(yr)){if(yr.length)return qn.call(this,yr,yr.length)}else return Na.call(this,yr)}return a(pr,{stats:Ar,destroy:function(){_r.destroy()}})}var gi=Cr.setFBO=Ni({framebuffer:_t.define.call(null,ke,"framebuffer")});function ji(sn,jn){var Qn=0;oa.procs.poll();var po=jn.color;po&&(He.clearColor(+po[0]||0,+po[1]||0,+po[2]||0,+po[3]||0),Qn|=V),"depth"in jn&&(He.clearDepth(+jn.depth),Qn|=z),"stencil"in jn&&(He.clearStencil(jn.stencil|0),Qn|=j),ue(!!Qn,"called regl.clear with no buffer specified"),He.clear(Qn)}function eo(sn){if(ue(typeof sn=="object"&&sn,"regl.clear() takes an object as input"),"framebuffer"in sn)if(sn.framebuffer&&sn.framebuffer_reglType==="framebufferCube")for(var jn=0;jn<6;++jn)gi(a({framebuffer:sn.framebuffer.faces[jn]},sn),ji);else gi(sn,ji);else ji(null,sn)}function Xo(sn){ue.type(sn,"function","regl.frame() callback must be a function"),ua.push(sn);function jn(){var Qn=ut(ua,sn);ue(Qn>=0,"cannot cancel a frame twice");function po(){var au=ut(ua,po);ua[au]=ua[ua.length-1],ua.length-=1,ua.length<=0&&Pn()}ua[Qn]=po}return pn(),{cancel:jn}}function Vo(){var sn=Ir.viewport,jn=Ir.scissor_box;sn[0]=sn[1]=jn[0]=jn[1]=0,or.viewportWidth=or.framebufferWidth=or.drawingBufferWidth=sn[2]=jn[2]=He.drawingBufferWidth,or.viewportHeight=or.framebufferHeight=or.drawingBufferHeight=sn[3]=jn[3]=He.drawingBufferHeight}function ki(){or.tick+=1,or.time=fn(),Vo(),oa.procs.poll()}function So(){ga.refresh(),Vo(),oa.procs.refresh(),Qt&&Qt.update()}function fn(){return(Tt()-er)/1e3}So();function xs(sn,jn){ue.type(jn,"function","listener callback must be a function");var Qn;switch(sn){case"frame":return Xo(jn);case"lost":Qn=Ja;break;case"restore":Qn=nn;break;case"destroy":Qn=ma;break;default:ue.raise("invalid event, must be one of frame,lost,restore,destroy")}return Qn.push(jn),{cancel:function(){for(var po=0;po<Qn.length;++po)if(Qn[po]===jn){Qn[po]=Qn[Qn.length-1],Qn.pop();return}}}}var fi=a(Ni,{clear:eo,prop:_t.define.bind(null,ke),context:_t.define.bind(null,Be),this:_t.define.bind(null,rt),draw:Ni({}),buffer:function(sn){return Lr.create(sn,te,!1,!1)},elements:function(sn){return ra.create(sn,!1)},texture:ga.create2D,cube:ga.createCube,renderbuffer:Pr.create,framebuffer:Cr.create,framebufferCube:Cr.createCube,vao:Mr.createVAO,attributes:et,frame:Xo,on:xs,limits:tr,hasExtension:function(sn){return tr.extensions.indexOf(sn.toLowerCase())>=0},read:ta,destroy:bn,_gl:He,_refresh:So,poll:function(){ki(),Qt&&Qt.update()},now:fn,stats:Bt});return Fe.onDone(null,fi),fi}return gt})})(ZU);var Zpt=dm,Kpt=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},vge(t)?t={container:t}:Jpt(t)?t={container:t}:Qpt(t)?t={gl:t}:t=Zpt(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=ll.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var r=document.querySelector(t.container);if(!r)throw Error("Element "+t.container+" is not found");t.container=r}vge(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=dge(),t.container.appendChild(t.canvas),hge(t))}else if(!t.canvas)if(typeof document!="undefined")t.container=document.body||document.documentElement,t.canvas=dge(),t.container.appendChild(t.canvas),hge(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(a){try{t.gl=t.canvas.getContext(a,t.attrs)}catch{}return t.gl}),t.gl};function hge(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*ll.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*ll.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function vge(e){return typeof e.getContext=="function"&&"width"in e&&"height"in e}function Jpt(e){return typeof e.nodeName=="string"&&typeof e.appendChild=="function"&&typeof e.getBoundingClientRect=="function"}function Qpt(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}function dge(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}var e0t=cge,t0t=[32,126],r0t=a0t;function a0t(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],r=e.canvas||document.createElement("canvas"),a=e.font,n=typeof e.step=="number"?[e.step,e.step]:e.step||[32,32],o=e.chars||t0t;if(a&&typeof a!="string"&&(a=e0t(a)),!Array.isArray(o))o=String(o).split("");else if(o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number"){for(var i=[],s=o[0],l=0;s<=o[1];s++)i[l++]=String.fromCharCode(s);o=i}t=t.slice(),r.width=t[0],r.height=t[1];var u=r.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,r.width,r.height),u.font=a,u.textAlign="center",u.textBaseline="middle",u.fillStyle="#fff";for(var f=n[0]/2,c=n[1]/2,s=0;s<o.length;s++)u.fillText(o[s],f,c),(f+=n[0])>t[0]-n[0]/2&&(f=n[0]/2,c+=n[1]);return r}var Wi={},el={},KU=32;el.INT_BITS=KU;el.INT_MAX=2147483647;el.INT_MIN=-1<<KU-1;el.sign=function(e){return(e>0)-(e<0)};el.abs=function(e){var t=e>>KU-1;return(e^t)-t};el.min=function(e,t){return t^(e^t)&-(e<t)};el.max=function(e,t){return e^(e^t)&-(e<t)};el.isPow2=function(e){return!(e&e-1)&&!!e};el.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1};el.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};el.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function pge(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}el.countTrailingZeros=pge;el.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};el.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};el.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var fM=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,a=t,n=7;for(r>>>=1;r;r>>>=1)a<<=1,a|=r&1,--n;e[t]=a<<n&255}})(fM);el.reverse=function(e){return fM[e&255]<<24|fM[e>>>8&255]<<16|fM[e>>>16&255]<<8|fM[e>>>24&255]};el.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};el.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};el.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};el.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};el.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>pge(e)+1};function gge(e,t,r){var a=e[r]|0;if(a<=0)return[];var n=new Array(a),o;if(r===e.length-1)for(o=0;o<a;++o)n[o]=t;else for(o=0;o<a;++o)n[o]=gge(e,t,r+1);return n}function n0t(e,t){var r,a;for(r=new Array(e),a=0;a<e;++a)r[a]=t;return r}function i0t(e,t){switch(typeof t=="undefined"&&(t=0),typeof e){case"number":if(e>0)return n0t(e|0,t);break;case"object":if(typeof e.length=="number")return gge(e,t,0);break}return[]}var o0t=i0t,r1=el,rf=o0t,mge=NO.Buffer;ll.__TYPEDARRAY_POOL||(ll.__TYPEDARRAY_POOL={UINT8:rf([32,0]),UINT16:rf([32,0]),UINT32:rf([32,0]),BIGUINT64:rf([32,0]),INT8:rf([32,0]),INT16:rf([32,0]),INT32:rf([32,0]),BIGINT64:rf([32,0]),FLOAT:rf([32,0]),DOUBLE:rf([32,0]),DATA:rf([32,0]),UINT8C:rf([32,0]),BUFFER:rf([32,0])});var s0t=typeof Uint8ClampedArray!="undefined",l0t=typeof BigUint64Array!="undefined",u0t=typeof BigInt64Array!="undefined",zl=ll.__TYPEDARRAY_POOL;zl.UINT8C||(zl.UINT8C=rf([32,0]));zl.BIGUINT64||(zl.BIGUINT64=rf([32,0]));zl.BIGINT64||(zl.BIGINT64=rf([32,0]));zl.BUFFER||(zl.BUFFER=rf([32,0]));var tI=zl.DATA,rI=zl.BUFFER;Wi.free=function(t){if(mge.isBuffer(t))rI[r1.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,a=r1.log2(r)|0;tI[a].push(t)}};function yge(e){if(!!e){var t=e.length||e.byteLength,r=r1.log2(t);tI[r].push(e)}}function f0t(e){yge(e.buffer)}Wi.freeUint8=Wi.freeUint16=Wi.freeUint32=Wi.freeBigUint64=Wi.freeInt8=Wi.freeInt16=Wi.freeInt32=Wi.freeBigInt64=Wi.freeFloat32=Wi.freeFloat=Wi.freeFloat64=Wi.freeDouble=Wi.freeUint8Clamped=Wi.freeDataView=f0t;Wi.freeArrayBuffer=yge;Wi.freeBuffer=function(t){rI[r1.log2(t.length)].push(t)};Wi.malloc=function(t,r){if(r===void 0||r==="arraybuffer")return _h(t);switch(r){case"uint8":return JU(t);case"uint16":return xge(t);case"uint32":return bge(t);case"int8":return _ge(t);case"int16":return wge(t);case"int32":return Tge(t);case"float":case"float32":return Age(t);case"double":case"float64":return Sge(t);case"uint8_clamped":return Mge(t);case"bigint64":return Ege(t);case"biguint64":return kge(t);case"buffer":return Lge(t);case"data":case"dataview":return Cge(t);default:return null}return null};function _h(e){var e=r1.nextPow2(e),t=r1.log2(e),r=tI[t];return r.length>0?r.pop():new ArrayBuffer(e)}Wi.mallocArrayBuffer=_h;function JU(e){return new Uint8Array(_h(e),0,e)}Wi.mallocUint8=JU;function xge(e){return new Uint16Array(_h(2*e),0,e)}Wi.mallocUint16=xge;function bge(e){return new Uint32Array(_h(4*e),0,e)}Wi.mallocUint32=bge;function _ge(e){return new Int8Array(_h(e),0,e)}Wi.mallocInt8=_ge;function wge(e){return new Int16Array(_h(2*e),0,e)}Wi.mallocInt16=wge;function Tge(e){return new Int32Array(_h(4*e),0,e)}Wi.mallocInt32=Tge;function Age(e){return new Float32Array(_h(4*e),0,e)}Wi.mallocFloat32=Wi.mallocFloat=Age;function Sge(e){return new Float64Array(_h(8*e),0,e)}Wi.mallocFloat64=Wi.mallocDouble=Sge;function Mge(e){return s0t?new Uint8ClampedArray(_h(e),0,e):JU(e)}Wi.mallocUint8Clamped=Mge;function kge(e){return l0t?new BigUint64Array(_h(8*e),0,e):null}Wi.mallocBigUint64=kge;function Ege(e){return u0t?new BigInt64Array(_h(8*e),0,e):null}Wi.mallocBigInt64=Ege;function Cge(e){return new DataView(_h(e),0,e)}Wi.mallocDataView=Cge;function Lge(e){e=r1.nextPow2(e);var t=r1.log2(e),r=rI[t];return r.length>0?r.pop():new mge(e)}Wi.mallocBuffer=Lge;Wi.clearCache=function(){for(var t=0;t<32;++t)zl.UINT8[t].length=0,zl.UINT16[t].length=0,zl.UINT32[t].length=0,zl.INT8[t].length=0,zl.INT16[t].length=0,zl.INT32[t].length=0,zl.FLOAT[t].length=0,zl.DOUBLE[t].length=0,zl.BIGUINT64[t].length=0,zl.BIGINT64[t].length=0,zl.UINT8C[t].length=0,tI[t].length=0,rI[t].length=0};var Pge=function(t,r){r||(r=[0,""]),t=String(t);var a=parseFloat(t,10);return r[0]=a,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r},c0t=Pge,Ige=Dge,cM=96;function QU(e,t){var r=c0t(getComputedStyle(e).getPropertyValue(t));return r[0]*Dge(r[1],e)}function h0t(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var a=QU(r,"font-size")/128;return t.removeChild(r),a}function Dge(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return h0t(e,t);case"em":return QU(t,"font-size");case"rem":return QU(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return cM;case"cm":return cM/2.54;case"mm":return cM/25.4;case"pt":return cM/72;case"pc":return cM/6}return 1}var v0t=nI,d0t=nI.canvas=document.createElement("canvas"),aI=d0t.getContext("2d"),Rge=iI([32,126]);nI.createPairs=iI;nI.ascii=Rge;function nI(e,t){Array.isArray(e)&&(e=e.join(", "));var r={},a,n=16,o=.05;t&&(t.length===2&&typeof t[0]=="number"?a=iI(t):Array.isArray(t)?a=t:(t.o?a=iI(t.o):t.pairs&&(a=t.pairs),t.fontSize&&(n=t.fontSize),t.threshold!=null&&(o=t.threshold))),a||(a=Rge),aI.font=n+"px "+e;for(var i=0;i<a.length;i++){var s=a[i],l=aI.measureText(s[0]).width+aI.measureText(s[1]).width,u=aI.measureText(s).width;if(Math.abs(l-u)>n*o){var f=(u-l)/n;r[s]=f*1e3}}return r}function iI(e){for(var t=[],r=e[0];r<=e[1];r++)for(var a=String.fromCharCode(r),n=e[0];n<e[1];n++){var o=String.fromCharCode(n),i=a+o;t.push(i)}return t}var p0t=a1;a1.canvas=document.createElement("canvas");a1.cache={};function a1(e,t){t||(t={}),(typeof e=="string"||Array.isArray(e))&&(t.family=e);var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var a=t.size||t.fontSize||t.em||48,n=t.weight||t.fontWeight||"",o=t.style||t.fontStyle||"",e=[o,n,a].join(" ")+"px "+r,i=t.origin||"top";if(a1.cache[r]&&a<=a1.cache[r].em)return zge(a1.cache[r],i);var s=t.canvas||a1.canvas,l=s.getContext("2d"),u={upper:t.upper!==void 0?t.upper:"H",lower:t.lower!==void 0?t.lower:"x",descent:t.descent!==void 0?t.descent:"p",ascent:t.ascent!==void 0?t.ascent:"h",tittle:t.tittle!==void 0?t.tittle:"i",overshoot:t.overshoot!==void 0?t.overshoot:"O"},f=Math.ceil(a*1.5);s.height=f,s.width=f*.5,l.font=e;var c="H",h={top:0};l.clearRect(0,0,f,f),l.textBaseline="top",l.fillStyle="black",l.fillText(c,0,0);var v=k0(l.getImageData(0,0,f,f));l.clearRect(0,0,f,f),l.textBaseline="bottom",l.fillText(c,0,f);var p=k0(l.getImageData(0,0,f,f));h.lineHeight=h.bottom=f-p+v,l.clearRect(0,0,f,f),l.textBaseline="alphabetic",l.fillText(c,0,f);var d=k0(l.getImageData(0,0,f,f)),g=f-d-1+v;h.baseline=h.alphabetic=g,l.clearRect(0,0,f,f),l.textBaseline="middle",l.fillText(c,0,f*.5);var m=k0(l.getImageData(0,0,f,f));h.median=h.middle=f-m-1+v-f*.5,l.clearRect(0,0,f,f),l.textBaseline="hanging",l.fillText(c,0,f*.5);var y=k0(l.getImageData(0,0,f,f));h.hanging=f-y-1+v-f*.5,l.clearRect(0,0,f,f),l.textBaseline="ideographic",l.fillText(c,0,f);var _=k0(l.getImageData(0,0,f,f));if(h.ideographic=f-_-1+v,u.upper&&(l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.upper,0,0),h.upper=k0(l.getImageData(0,0,f,f)),h.capHeight=h.baseline-h.upper),u.lower&&(l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.lower,0,0),h.lower=k0(l.getImageData(0,0,f,f)),h.xHeight=h.baseline-h.lower),u.tittle&&(l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.tittle,0,0),h.tittle=k0(l.getImageData(0,0,f,f))),u.ascent&&(l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.ascent,0,0),h.ascent=k0(l.getImageData(0,0,f,f))),u.descent&&(l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.descent,0,0),h.descent=Fge(l.getImageData(0,0,f,f))),u.overshoot){l.clearRect(0,0,f,f),l.textBaseline="top",l.fillText(u.overshoot,0,0);var S=Fge(l.getImageData(0,0,f,f));h.overshoot=S-g}for(var M in h)h[M]/=a;return h.em=a,a1.cache[r]=h,zge(h,i)}function zge(e,t){var r={};typeof t=="string"&&(t=e[t]);for(var a in e)a!=="em"&&(r[a]=e[a]-t);return r}function k0(e){for(var t=e.height,r=e.data,a=3;a<r.length;a+=4)if(r[a]!==0)return Math.floor((a-3)*.25/t)}function Fge(e){for(var t=e.height,r=e.data,a=r.length-1;a>0;a-=4)if(r[a]!==0)return Math.floor((a-3)*.25/t)}var jw=Xpt,g0t=dm,m0t=ZU.exports,y0t=Kpt,x0t=q0e,eH=qx,b0t=r0t,n1=Wi,_0t=WS,w0t=efe,T0t=Pge,A0t=Ige,S0t=v0t,M0t=Rl,k0t=p0t,E0t=Rw,C0t=el,Oge=C0t.nextPow2,Nge=new x0t,oI=!1;if(document.body){var tH=document.body.appendChild(document.createElement("div"));tH.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(tH).fontStretch&&(oI=!0),document.body.removeChild(tH)}var Lo=function(t){L0t(t)?(t={regl:t},this.gl=t.regl._gl):this.gl=y0t(t),this.shader=Nge.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=t.regl||m0t({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),Nge.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(w0t(t)?t:{})};Lo.prototype.createShader=function(){var t=this.regl,r=t({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(n,o){return[o.atlas.width,o.atlas.height]},atlasDim:function(n,o){return[o.atlas.cols,o.atlas.rows]},atlas:function(n,o){return o.atlas.texture},charStep:function(n,o){return o.atlas.step},em:function(n,o){return o.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),a={};return{regl:t,draw:r,atlas:a}};Lo.prototype.update=function(t){var r=this;if(typeof t=="string")t={text:t};else if(!t)return;t=g0t(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),t.opacity!=null&&(Array.isArray(t.opacity)?this.opacity=t.opacity.map(function(q){return parseFloat(q)}):this.opacity=parseFloat(t.opacity)),t.viewport!=null&&(this.viewport=_0t(t.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),t.kerning!=null&&(this.kerning=t.kerning),t.offset!=null&&(typeof t.offset=="number"&&(t.offset=[t.offset,0]),this.positionOffset=E0t(t.offset)),t.direction&&(this.direction=t.direction),t.range&&(this.range=t.range,this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])],this.translate=[-t.range[0],-t.range[1]]),t.scale&&(this.scale=t.scale),t.translate&&(this.translate=t.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!t.font&&(t.font=Lo.baseFontSize+"px sans-serif");var a=!1,n=!1;if(t.font&&(Array.isArray(t.font)?t.font:[t.font]).forEach(function(q,ae){if(typeof q=="string")try{q=jw.parse(q)}catch{q=jw.parse(Lo.baseFontSize+"px "+q)}else q=jw.parse(jw.stringify(q));var ie=jw.stringify({size:Lo.baseFontSize,family:q.family,stretch:oI?q.stretch:void 0,variant:q.variant,weight:q.weight,style:q.style}),we=T0t(q.size),Te=Math.round(we[0]*A0t(we[1]));if(Te!==r.fontSize[ae]&&(n=!0,r.fontSize[ae]=Te),(!r.font[ae]||ie!=r.font[ae].baseString)&&(a=!0,r.font[ae]=Lo.fonts[ie],!r.font[ae])){var he=q.family.join(", "),xe=[q.style];q.style!=q.variant&&xe.push(q.variant),q.variant!=q.weight&&xe.push(q.weight),oI&&q.weight!=q.stretch&&xe.push(q.stretch),r.font[ae]={baseString:ie,family:he,weight:q.weight,stretch:q.stretch,style:q.style,variant:q.variant,width:{},kerning:{},metrics:k0t(he,{origin:"top",fontSize:Lo.baseFontSize,fontStyle:xe.join(" ")})},Lo.fonts[ie]=r.font[ae]}}),(a||n)&&this.font.forEach(function(q,ae){var ie=jw.stringify({size:r.fontSize[ae],family:q.family,stretch:oI?q.stretch:void 0,variant:q.variant,weight:q.weight,style:q.style});if(r.fontAtlas[ae]=r.shader.atlas[ie],!r.fontAtlas[ae]){var we=q.metrics;r.shader.atlas[ie]=r.fontAtlas[ae]={fontString:ie,step:Math.ceil(r.fontSize[ae]*we.bottom*.5)*2,em:r.fontSize[ae],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}t.text==null&&(t.text=r.text)}),typeof t.text=="string"&&t.position&&t.position.length>2){for(var o=Array(t.position.length*.5),i=0;i<o.length;i++)o[i]=t.text;t.text=o}var s;if(t.text!=null||a){if(this.textOffsets=[0],Array.isArray(t.text)){this.count=t.text[0].length,this.counts=[this.count];for(var l=1;l<t.text.length;l++)this.textOffsets[l]=this.textOffsets[l-1]+t.text[l-1].length,this.count+=t.text[l].length,this.counts.push(t.text[l].length);this.text=t.text.join("")}else this.text=t.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(q,ae){Lo.atlasContext.font=q.baseString;for(var ie=r.fontAtlas[ae],we=0;we<r.text.length;we++){var Te=r.text.charAt(we);if(ie.ids[Te]==null&&(ie.ids[Te]=ie.chars.length,ie.chars.push(Te),s.push(Te)),q.width[Te]==null&&(q.width[Te]=Lo.atlasContext.measureText(Te).width/Lo.baseFontSize,r.kerning)){var he=[];for(var xe in q.width)he.push(xe+Te,Te+xe);M0t(q.kerning,S0t(q.family,{pairs:he}))}}})}if(t.position)if(t.position.length>2){for(var u=!t.position[0].length,f=n1.mallocFloat(this.count*2),c=0,h=0;c<this.counts.length;c++){var v=this.counts[c];if(u)for(var p=0;p<v;p++)f[h++]=t.position[c*2],f[h++]=t.position[c*2+1];else for(var d=0;d<v;d++)f[h++]=t.position[c][0],f[h++]=t.position[c][1]}this.position.call?this.position({type:"float",data:f}):this.position=this.regl.buffer({type:"float",data:f}),n1.freeFloat(f)}else this.position.destroy&&this.position.destroy(),this.position={constant:t.position};if(t.text||a){var g=n1.mallocUint8(this.count),m=n1.mallocFloat(this.count*2);this.textWidth=[];for(var y=0,_=0;y<this.counts.length;y++){for(var S=this.counts[y],M=this.font[y]||this.font[0],w=this.fontAtlas[y]||this.fontAtlas[0],A=0;A<S;A++){var k=this.text.charAt(_),T=this.text.charAt(_-1);if(g[_]=w.ids[k],m[_*2]=M.width[k],A){var L=m[_*2-2],C=m[_*2],I=m[_*2-1],R=I+L*.5+C*.5;if(this.kerning){var B=M.kerning[T+k];B&&(R+=B*.001)}m[_*2+1]=R}else m[_*2+1]=m[_*2]*.5;_++}this.textWidth.push(m.length?m[_*2-2]*.5+m[_*2-1]:0)}t.align||(t.align=this.align),this.charBuffer({data:g,type:"uint8",usage:"stream"}),this.sizeBuffer({data:m,type:"float",usage:"stream"}),n1.freeUint8(g),n1.freeFloat(m),s.length&&this.font.forEach(function(q,ae){var ie=r.fontAtlas[ae],we=ie.step,Te=Math.floor(Lo.maxAtlasSize/we),he=Math.min(Te,ie.chars.length),xe=Math.ceil(ie.chars.length/he),Se=Oge(he*we),ye=Oge(xe*we);ie.width=Se,ie.height=ye,ie.rows=xe,ie.cols=he,!!ie.em&&ie.texture({data:b0t({canvas:Lo.atlasCanvas,font:ie.fontString,chars:ie.chars,shape:[Se,ye],step:[we,we]})})})}if(t.align&&(this.align=t.align,this.alignOffset=this.textWidth.map(function(q,ae){var ie=Array.isArray(r.align)?r.align.length>1?r.align[ae]:r.align[0]:r.align;if(typeof ie=="number")return ie;switch(ie){case"right":case"end":return-q;case"center":case"centre":case"middle":return-q*.5}return 0})),this.baseline==null&&t.baseline==null&&(t.baseline=0),t.baseline!=null&&(this.baseline=t.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(q,ae){var ie=(r.font[ae]||r.font[0]).metrics,we=0;return we+=ie.bottom*.5,typeof q=="number"?we+=q-ie.baseline:we+=-ie[q],we*=-1,we})),t.color!=null)if(t.color||(t.color="transparent"),typeof t.color=="string"||!isNaN(t.color))this.color=eH(t.color,"uint8");else{var N;if(typeof t.color[0]=="number"&&t.color.length>this.counts.length){var D=t.color.length;N=n1.mallocUint8(D);for(var O=(t.color.subarray||t.color.slice).bind(t.color),$=0;$<D;$+=4)N.set(eH(O($,$+4),"uint8"),$)}else{var Y=t.color.length;N=n1.mallocUint8(Y*4);for(var X=0;X<Y;X++)N.set(eH(t.color[X]||0,"uint8"),X*4)}this.color=N}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var ee=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(ee){var Q=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Q);for(var Z=0;Z<this.batch.length;Z++)this.batch[Z]={count:this.counts.length>1?this.counts[Z]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Z]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Z*4,Z*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Z]:this.opacity,baseline:this.baselineOffset[Z]!=null?this.baselineOffset[Z]:this.baselineOffset[0],align:this.align?this.alignOffset[Z]!=null?this.alignOffset[Z]:this.alignOffset[0]:0,atlas:this.fontAtlas[Z]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Z*2,Z*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}};Lo.prototype.destroy=function(){};Lo.prototype.kerning=!0;Lo.prototype.position={constant:new Float32Array(2)};Lo.prototype.translate=null;Lo.prototype.scale=null;Lo.prototype.font=null;Lo.prototype.text="";Lo.prototype.positionOffset=[0,0];Lo.prototype.opacity=1;Lo.prototype.color=new Uint8Array([0,0,0,255]);Lo.prototype.alignOffset=[0,0];Lo.maxAtlasSize=1024;Lo.atlasCanvas=document.createElement("canvas");Lo.atlasContext=Lo.atlasCanvas.getContext("2d",{alpha:!1});Lo.baseFontSize=64;Lo.fonts={};function L0t(e){return typeof e=="function"&&e._gl&&e.prop&&e.texture&&e.buffer}var P0t=Lo,I0t=tN,D0t=ZU.exports,rH=function(t,r){var a=t._fullLayout,n=!0;return a._glcanvas.each(function(o){if(!o.regl&&!(o.pick&&!a._has("parcoords"))){try{o.regl=D0t({canvas:this,attributes:{antialias:!o.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||ll.devicePixelRatio,extensions:r||[]})}catch{n=!1}o.regl||(n=!1),n&&this.addEventListener("webglcontextlost",function(i){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:i,layer:o.key})},!1)}}),n||I0t({container:a._glcontainer.node()}),n},R0t=bt.exports,z0t=Oa.exports,F0t=sx.DESELECTDIM;function O0t(e){var t=e[0],r=t.trace,a=t.t,n=a._scene,o=a.index,i=n.selectBatch[o],s=n.unselectBatch[o],l=n.textOptions[o],u=n.textSelectedOptions[o]||{},f=n.textUnselectedOptions[o]||{},c=R0t.extendFlat({},l),h,v;if(i.length||s.length){var p=u.color,d=f.color,g=l.color,m=Array.isArray(g);for(c.color=new Array(r._length),h=0;h<i.length;h++)v=i[h],c.color[v]=p||(m?g[v]:g);for(h=0;h<s.length;h++){v=s[h];var y=m?g[v]:g;c.color[v]=d||(p?y:z0t.addOpacity(y,F0t))}}n.glText[o].update(c)}var Bge={styleTextSelection:O0t},$ge=Qpe,Uge=X0e,N0t=Spt,Hge=P0t,aH=bt.exports,B0t=Jp.selectMode,$0t=rH,U0t=Ro,H0t=wee,G0t=Bge.styleTextSelection;function V0t(e,t,r,a){var n=e._size,o=e.width*a,i=e.height*a,s=n.l*a,l=n.b*a,u=n.r*a,f=n.t*a,c=n.w*a,h=n.h*a;return[s+t.domain[0]*c,l+r.domain[0]*h,o-u-(1-t.domain[1])*c,i-f-(1-r.domain[1])*h]}var Gge=function(t,r,a){if(!!a.length){var n=t._fullLayout,o=r._scene,i=r.xaxis,s=r.yaxis,l,u;if(!!o){var f=$0t(t,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!f){o.init();return}var c=o.count,h=n._glcanvas.data()[0].regl;if(H0t(t,r,a),o.dirty){if(o.error2d===!0&&(o.error2d=N0t(h)),o.line2d===!0&&(o.line2d=Uge(h)),o.scatter2d===!0&&(o.scatter2d=$ge(h)),o.fill2d===!0&&(o.fill2d=Uge(h)),o.glText===!0)for(o.glText=new Array(c),l=0;l<c;l++)o.glText[l]=new Hge(h);if(o.glText){if(c>o.glText.length){var v=c-o.glText.length;for(l=0;l<v;l++)o.glText.push(new Hge(h))}else if(c<o.glText.length){var p=o.glText.length-c,d=o.glText.splice(c,p);d.forEach(function(Y){Y.destroy()})}for(l=0;l<c;l++)o.glText[l].update(o.textOptions[l])}if(o.line2d&&(o.line2d.update(o.lineOptions),o.lineOptions=o.lineOptions.map(function(Y){if(Y&&Y.positions){for(var X=Y.positions,ee=0;ee<X.length&&(isNaN(X[ee])||isNaN(X[ee+1]));)ee+=2;for(var Q=X.length-2;Q>ee&&(isNaN(X[Q])||isNaN(X[Q+1]));)Q-=2;Y.positions=X.slice(ee,Q+2)}return Y}),o.line2d.update(o.lineOptions)),o.error2d){var g=(o.errorXOptions||[]).concat(o.errorYOptions||[]);o.error2d.update(g)}o.scatter2d&&o.scatter2d.update(o.markerOptions),o.fillOrder=aH.repeat(null,c),o.fill2d&&(o.fillOptions=o.fillOptions.map(function(Y,X){var ee=a[X];if(!(!Y||!ee||!ee[0]||!ee[0].trace)){var Q=ee[0],Z=Q.trace,q=Q.t,ae=o.lineOptions[X],ie,we,Te=[];Z._ownfill&&Te.push(X),Z._nexttrace&&Te.push(X+1),Te.length&&(o.fillOrder[X]=Te);var he=[],xe=ae&&ae.positions||q.positions,Se,ye;if(Z.fill==="tozeroy"){for(Se=0;Se<xe.length&&isNaN(xe[Se+1]);)Se+=2;for(ye=xe.length-2;ye>Se&&isNaN(xe[ye+1]);)ye-=2;xe[Se+1]!==0&&(he=[xe[Se],0]),he=he.concat(xe.slice(Se,ye+2)),xe[ye+1]!==0&&(he=he.concat([xe[ye],0]))}else if(Z.fill==="tozerox"){for(Se=0;Se<xe.length&&isNaN(xe[Se]);)Se+=2;for(ye=xe.length-2;ye>Se&&isNaN(xe[ye]);)ye-=2;xe[Se]!==0&&(he=[0,xe[Se+1]]),he=he.concat(xe.slice(Se,ye+2)),xe[ye]!==0&&(he=he.concat([0,xe[ye+1]]))}else if(Z.fill==="toself"||Z.fill==="tonext"){for(he=[],ie=0,Y.splitNull=!0,we=0;we<xe.length;we+=2)(isNaN(xe[we])||isNaN(xe[we+1]))&&(he=he.concat(xe.slice(ie,we)),he.push(xe[ie],xe[ie+1]),he.push(null,null),ie=we+2);he=he.concat(xe.slice(ie)),ie&&he.push(xe[ie],xe[ie+1])}else{var re=Z._nexttrace;if(re){var se=o.lineOptions[X+1];if(se){var de=se.positions;if(Z.fill==="tonexty"){for(he=xe.slice(),X=Math.floor(de.length/2);X--;){var Me=de[X*2],Ie=de[X*2+1];isNaN(Me)||isNaN(Ie)||he.push(Me,Ie)}Y.fill=re.fillcolor}}}}if(Z._prevtrace&&Z._prevtrace.fill==="tonext"){var Ee=o.lineOptions[X-1].positions,qe=he.length/2;ie=qe;var be=[ie];for(we=0;we<Ee.length;we+=2)(isNaN(Ee[we])||isNaN(Ee[we+1]))&&(be.push(we/2+qe+1),ie=we+2);he=he.concat(Ee),Y.hole=be}return Y.fillmode=Z.fill,Y.opacity=Z.opacity,Y.positions=he,Y}}),o.fill2d.update(o.fillOptions))}var m=n.dragmode,y=B0t(m),_=n.clickmode.indexOf("select")>-1;for(l=0;l<c;l++){var S=a[l][0],M=S.trace,w=S.t,A=w.index,k=M._length,T=w.x,L=w.y;if(M.selectedpoints||y||_){if(y||(y=!0),M.selectedpoints){var C=o.selectBatch[A]=aH.selIndices2selPoints(M),I={};for(u=0;u<C.length;u++)I[C[u]]=1;var R=[];for(u=0;u<k;u++)I[u]||R.push(u);o.unselectBatch[A]=R}var B=w.xpx=new Array(k),N=w.ypx=new Array(k);for(u=0;u<k;u++)B[u]=i.c2p(T[u]),N[u]=s.c2p(L[u])}else w.xpx=w.ypx=null}if(y){if(o.select2d||(o.select2d=$ge(n._glcanvas.data()[1].regl)),o.scatter2d){var D=new Array(c);for(l=0;l<c;l++)D[l]=o.selectBatch[l].length||o.unselectBatch[l].length?o.markerUnselectedOptions[l]:{};o.scatter2d.update(D)}o.select2d&&(o.select2d.update(o.markerOptions),o.select2d.update(o.markerSelectedOptions)),o.glText&&a.forEach(function(Y){var X=((Y||[])[0]||{}).trace||{};U0t.hasText(X)&&G0t(Y)})}else o.scatter2d&&o.scatter2d.update(o.markerOptions);var O={viewport:V0t(n,i,s,t._context.plotGlPixelRatio),range:[(i._rl||i.range)[0],(s._rl||s.range)[0],(i._rl||i.range)[1],(s._rl||s.range)[1]]},$=aH.repeat(O,o.count);o.fill2d&&o.fill2d.update($),o.line2d&&o.line2d.update($),o.error2d&&o.error2d.update($.concat($)),o.scatter2d&&o.scatter2d.update($),o.select2d&&o.select2d.update($),o.glText&&o.glText.forEach(function(Y){Y.update(O)})}}},Vge=Ro,j0t=Bge.styleTextSelection,jge=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s=a[0].trace,l=a[0].t,u=s._length,f=l.x,c=l.y,h=l._scene,v=l.index;if(!h)return i;var p=Vge.hasText(s),d=Vge.hasMarkers(s),g=!d&&!p;if(s.visible!==!0||g)return i;var m=[],y=[];if(r!==!1&&!r.degenerate)for(var _=0;_<u;_++)r.contains([l.xpx[_],l.ypx[_]],!1,_,t)?(m.push(_),i.push({pointNumber:_,x:n.c2d(f[_]),y:o.c2d(c[_])})):y.push(_);if(d){var S=h.scatter2d;if(!m.length&&!y.length){var M=new Array(h.count);M[v]=h.markerOptions[v],S.update.apply(S,M)}else if(!h.selectBatch[v].length&&!h.unselectBatch[v].length){var w=new Array(h.count);w[v]=h.markerUnselectedOptions[v],S.update.apply(S,w)}}return h.selectBatch[v]=m,h.unselectBatch[v]=y,p&&j0t(a),i},q0t=uU,Y0t={moduleType:"trace",name:"scattergl",basePlotModule:Ii,categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:jS.exports,supplyDefaults:Zut,crossTraceDefaults:nee,colorbar:Pf,formatLabels:Jut,calc:pct,plot:Gge,hoverPoints:q0t.hoverPoints,selectPoints:jge,meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}},W0t=Y0t,X0t=X0e,Z0t=Pa,K0t=rH,J0t=Ml.getModuleCalcData,i1=Ii,qge=As.getFromId,Yge=rn.exports.shouldShowZeroLine,Wge="splom";function Q0t(e){var t=e._fullLayout,r=Z0t.getModule(Wge),a=J0t(e.calcdata,r)[0],n=K0t(e,["ANGLE_instanced_arrays","OES_element_index_uint"]);!n||(t._hasOnlyLargeSploms&&nH(e),r.plot(e,{},a))}function egt(e){var t=e.calcdata,r=e._fullLayout;r._hasOnlyLargeSploms&&nH(e);for(var a=0;a<t.length;a++){var n=t[a][0],o=n.trace,i=r._splomScenes[o.uid];o.type==="splom"&&i&&i.matrix&&tgt(e,o,i)}}function tgt(e,t,r){for(var a=r.matrixOptions.data.length,n=t._visibleDims,o=r.viewOpts.ranges=new Array(a),i=0;i<n.length;i++){var s=n[i],l=o[i]=new Array(4),u=qge(e,t._diag[s][0]);u&&(l[0]=u.r2l(u.range[0]),l[2]=u.r2l(u.range[1]));var f=qge(e,t._diag[s][1]);f&&(l[1]=f.r2l(f.range[0]),l[3]=f.r2l(f.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:o},{ranges:o}):r.matrix.update({ranges:o})}function nH(e){var t=e._fullLayout,r=t._glcanvas.data()[0].regl,a=t._splomGrid;a||(a=t._splomGrid=X0t(r)),a.update(rgt(e))}function rgt(e){var t=e._context.plotGlPixelRatio,r=e._fullLayout,a=r._size,n=[0,0,r.width*t,r.height*t],o={},i;function s(w,A,k,T,L,C){k*=t,T*=t,L*=t,C*=t;var I=A[w+"color"],R=A[w+"width"],B=String(I+R);B in o?o[B].data.push(NaN,NaN,k,T,L,C):o[B]={data:[k,T,L,C],join:"rect",thickness:R*t,color:I,viewport:n,range:n,overlay:!1}}for(i in r._splomSubplots){var l=r._plots[i],u=l.xaxis,f=l.yaxis,c=u._gridVals,h=f._gridVals,v=u._offset,p=u._length,d=f._length,g=a.b+f.domain[0]*a.h,m=-f._m,y=-m*f.r2l(f.range[0],f.calendar),_,S;if(u.showgrid)for(i=0;i<c.length;i++)_=v+u.l2p(c[i].x),s("grid",u,_,g,_,g+d);if(f.showgrid)for(i=0;i<h.length;i++)S=g+y+m*h[i].x,s("grid",f,v,S,v+p,S);Yge(e,u,f)&&(_=v+u.l2p(0),s("zeroline",u,_,g,_,g+d)),Yge(e,f,u)&&(S=g+y+0,s("zeroline",f,v,S,v+p,S))}var M=[];for(i in o)M.push(o[i]);return M}function agt(e,t,r,a){var n={},o;if(a._splomScenes){for(o=0;o<e.length;o++){var i=e[o];i.type==="splom"&&(n[i.uid]=1)}for(o=0;o<r.length;o++){var s=r[o];if(!n[s.uid]){var l=a._splomScenes[s.uid];l&&l.destroy&&l.destroy(),a._splomScenes[s.uid]=null,delete a._splomScenes[s.uid]}}}Object.keys(a._splomScenes||{}).length===0&&delete a._splomScenes,a._splomGrid&&!t._hasOnlyLargeSploms&&a._hasOnlyLargeSploms&&(a._splomGrid.destroy(),a._splomGrid=null,delete a._splomGrid),i1.clean(e,t,r,a)}var ngt={name:Wge,attr:i1.attr,attrRegex:i1.attrRegex,layoutAttributes:i1.layoutAttributes,supplyLayoutDefaults:i1.supplyLayoutDefaults,drawFramework:i1.drawFramework,plot:Q0t,drag:egt,updateGrid:nH,clean:agt,updateFx:i1.updateFx,toSVG:i1.toSVG},igt=Cl,Xge=bo,Zge=Ss.axisHoverFormat,ogt=zn.hovertemplateAttrs,hM=jS.exports,sgt=Sl.idRegex,lgt=si.templatedArray,qw=cn.extendFlat,o1=igt.marker,ugt=o1.line,fgt=qw(Xge("marker.line",{editTypeOverride:"calc"}),{width:qw({},ugt.width,{editType:"calc"}),editType:"calc"}),sI=qw(Xge("marker"),{symbol:o1.symbol,size:qw({},o1.size,{editType:"markerSize"}),sizeref:o1.sizeref,sizemin:o1.sizemin,sizemode:o1.sizemode,opacity:o1.opacity,colorbar:o1.colorbar,line:fgt,editType:"calc"});sI.color.editType=sI.cmin.editType=sI.cmax.editType="style";function Kge(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:sgt[e],editType:"plot"},description:["Sets the list of "+e+" axes","corresponding to dimensions of this splom trace.","By default, a splom will match the first N "+e+"axes","where N is the number of input dimensions.","Note that, in case where `diagonal.visible` is false and `showupperhalf`","or `showlowerhalf` is false, this splom trace will generate","one less x-axis and one less y-axis."].join(" ")}}var Jge={dimensions:lgt("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not this dimension is shown on the graph.","Note that even visible false dimension contribute to the","default grid generate by this splom trace."].join(" ")},label:{valType:"string",editType:"calc",description:"Sets the label corresponding to this splom dimension."},values:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the dimension values to be plotted."},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes",description:["Sets the axis type for this dimension's generated","x and y axes.","Note that the axis `type` values set in layout take","precedence over this attribute."].join(" ")},matches:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not the x & y axes generated by this","dimension match.","Equivalent to setting the `matches` axis attribute in the layout","with the correct axis id."].join(" ")},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:qw({},hM.text,{description:["Sets text elements associated with each (x,y) pair to appear on hover.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates."].join(" ")}),hovertext:qw({},hM.hovertext,{description:"Same as `text`."}),hovertemplate:ogt(),xhoverformat:Zge("x"),yhoverformat:Zge("y"),marker:sI,xaxes:Kge("x"),yaxes:Kge("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the diagonal are displayed."].join(" ")},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the upper half","from the diagonal are displayed."].join(" ")},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the lower half","from the diagonal are displayed."].join(" ")},selected:{marker:hM.selected.marker,editType:"calc"},unselected:{marker:hM.unselected.marker,editType:"calc"},opacity:hM.opacity},iH=function(e,t,r,a){a||(a=1/0);var n,o;for(n=0;n<t.length;n++)o=t[n],o.visible&&(a=Math.min(a,o[r].length));for(a===1/0&&(a=0),e._length=a,n=0;n<t.length;n++)o=t[n],o.visible&&(o._length=a);return a},oH=bt.exports,cgt=nc,Qge=Jge,hgt=Ro,vgt=Wd,dgt=iH,pgt=qS.isOpenSymbol,ggt=function(t,r,a,n){function o(v,p){return oH.coerce(t,r,Qge,v,p)}var i=cgt(t,r,{name:"dimensions",handleItemDefaults:mgt}),s=o("diagonal.visible"),l=o("showupperhalf"),u=o("showlowerhalf"),f=dgt(r,i,"values");if(!f||!s&&!l&&!u){r.visible=!1;return}o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),vgt(t,r,a,n,o);var c=pgt(r.marker.symbol),h=hgt.isBubble(r);o("marker.line.width",c||h?1:0),ygt(t,r,n,o),oH.coerceSelectionMarkerOpacity(r,o)};function mgt(e,t){function r(n,o){return oH.coerce(e,t,Qge.dimensions,n,o)}r("label");var a=r("values");a&&a.length?r("visible"):t.visible=!1,r("axis.type"),r("axis.matches")}function ygt(e,t,r,a){var n=t.dimensions,o=n.length,i=t.showupperhalf,s=t.showlowerhalf,l=t.diagonal.visible,u,f,c=new Array(o),h=new Array(o);for(u=0;u<o;u++){var v=u?u+1:"";c[u]="x"+v,h[u]="y"+v}var p=a("xaxes",c),d=a("yaxes",h),g=t._diag=new Array(o);t._xaxes={},t._yaxes={};var m=[],y=[];function _(I,R,B,N){if(!!I){var D=I.charAt(0),O=r._splomAxes[D];if(t["_"+D+"axes"][I]=1,N.push(I),!(I in O)){var $=O[I]={};B&&($.label=B.label||"",B.visible&&B.axis&&(B.axis.type&&($.type=B.axis.type),B.axis.matches&&($.matches=R)))}}}var S=!l&&!s,M=!l&&!i;for(t._axesDim={},u=0;u<o;u++){var w=n[u],A=u===0,k=u===o-1,T=A&&S||k&&M?void 0:p[u],L=A&&M||k&&S?void 0:d[u];_(T,L,w,m),_(L,T,w,y),g[u]=[T,L],t._axesDim[T]=u,t._axesDim[L]=u}for(u=0;u<m.length;u++)for(f=0;f<y.length;f++){var C=m[u]+y[f];(u>f&&i||u<f&&s||u===f&&(l||!s||!i))&&(r._splomSubplots[C]=1)}(!s||!l&&i&&s)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}var eme=bt.exports,xgt=function(t,r){var a=t._fullLayout,n=r.uid,o=a._splomScenes;o||(o=a._splomScenes={});var i={dirty:!0,selectBatch:[],unselectBatch:[]},s={matrix:!1,selectBatch:[],unselectBatch:[]},l=o[r.uid];return l||(l=o[n]=eme.extendFlat({},i,s),l.draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||eme.extendFlat(l,i),l},sH=bt.exports,lI=As,bgt=Kd.calcMarkerSize,_gt=Kd.calcAxisExpansion,wgt=Xd,tme=Fw.markerSelection,Tgt=Fw.markerStyle,Agt=xgt,Sgt=Un.BADNUM,Mgt=rb.TOO_MANY_POINTS,kgt=function(t,r){var a=r.dimensions,n=r._length,o={},i=o.cdata=[],s=o.data=[],l=r._visibleDims=[],u,f,c,h,v;function p(_,S){for(var M=_.makeCalcdata({v:S.values,vcalendar:r.calendar},"v"),w=0;w<M.length;w++)M[w]=M[w]===Sgt?NaN:M[w];i.push(M),s.push(_.type==="log"?sH.simpleMap(M,_.c2l):M)}for(u=0;u<a.length;u++)if(c=a[u],c.visible){if(h=lI.getFromId(t,r._diag[u][0]),v=lI.getFromId(t,r._diag[u][1]),h&&v&&h.type!==v.type){sH.log("Skipping splom dimension "+u+" with conflicting axis types");continue}h?(p(h,c),v&&v.type==="category"&&(v._categories=h._categories.slice())):p(v,c),l.push(u)}wgt(t,r),sH.extendFlat(o,Tgt(r));var d=i.length,g=d*n>Mgt,m;for(g?m=o.sizeAvg||Math.max(o.size,3):m=bgt(r,n),f=0;f<l.length;f++)u=l[f],c=a[u],h=lI.getFromId(t,r._diag[u][0])||{},v=lI.getFromId(t,r._diag[u][1])||{},_gt(t,r,h,v,i[f],i[f],m);var y=Agt(t,r);return y.matrix||(y.matrix=!0),y.matrixOptions=o,y.selectedOptions=tme(r,r.selected),y.unselectedOptions=tme(r,r.unselected),[{x:!1,y:!1,t:{},trace:r}]},uI={exports:{}},vM={exports:{}};(function(){var e,t,r,a,n,o;typeof performance!="undefined"&&performance!==null&&performance.now?vM.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(vM.exports=function(){return(e()-n)/1e6},t=process.hrtime,e=function(){var i;return i=t(),i[0]*1e9+i[1]},a=e(),o=process.uptime()*1e9,n=a-o):Date.now?(vM.exports=function(){return Date.now()-r},r=Date.now()):(vM.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(ll);var Egt=vM.exports,mm=typeof window=="undefined"?ll:window,fI=["moz","webkit"],Yw="AnimationFrame",Ww=mm["request"+Yw],dM=mm["cancel"+Yw]||mm["cancelRequest"+Yw];for(var pM=0;!Ww&&pM<fI.length;pM++)Ww=mm[fI[pM]+"Request"+Yw],dM=mm[fI[pM]+"Cancel"+Yw]||mm[fI[pM]+"CancelRequest"+Yw];if(!Ww||!dM){var lH=0,rme=0,ub=[],Cgt=1e3/60;Ww=function(e){if(ub.length===0){var t=Egt(),r=Math.max(0,Cgt-(t-lH));lH=r+t,setTimeout(function(){var a=ub.slice(0);ub.length=0;for(var n=0;n<a.length;n++)if(!a[n].cancelled)try{a[n].callback(lH)}catch(o){setTimeout(function(){throw o},0)}},Math.round(r))}return ub.push({handle:++rme,callback:e,cancelled:!1}),rme},dM=function(e){for(var t=0;t<ub.length;t++)ub[t].handle===e&&(ub[t].cancelled=!0)}}uI.exports=function(e){return Ww.call(mm,e)};uI.exports.cancel=function(){dM.apply(mm,arguments)};uI.exports.polyfill=function(e){e||(e=mm),e.requestAnimationFrame=Ww,e.cancelAnimationFrame=dM};var Lgt=function(t,r){var a=typeof t=="number",n=typeof r=="number";a&&!n?(r=t,t=0):!a&&!n&&(t=0,r=0),t=t|0,r=r|0;var o=r-t;if(o<0)throw new Error("array length must be positive");for(var i=new Array(o),s=0,l=t;s<o;s++,l++)i[s]=l;return i};const Pgt=Qpe,Igt=dm,Dgt=Dw,ame=uI.exports,Rgt=Lgt,uH=WS,zgt=Rw;var Fgt=s1;function s1(e,t){if(!(this instanceof s1))return new s1(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=Pgt(e),this.canvas=this.scatter.canvas}s1.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=ame(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,ame(()=>{this.dirty=!1})),this)};s1.prototype.update=function(...e){if(!e.length)return;for(let a=0;a<e.length;a++)this.updateItem(a,e[a]);this.traces=this.traces.filter(Boolean);let t=[],r=0;for(let a=0;a<this.traces.length;a++){let n=this.traces[a],o=this.traces[a].passes;for(let i=0;i<o.length;i++)t.push(this.passes[o[i]]);n.passOffset=r,r+=n.passes.length}return this.scatter.update(...t),this};s1.prototype.updateItem=function(e,t){let{regl:r}=this;if(t===null)return this.traces[e]=null,this;if(!t)return this;let a=Igt(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:uH([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(a.color!=null&&(n.color=a.color),a.size!=null&&(n.size=a.size),a.marker!=null&&(n.marker=a.marker),a.borderColor!=null&&(n.borderColor=a.borderColor),a.borderSize!=null&&(n.borderSize=a.borderSize),a.opacity!=null&&(n.opacity=a.opacity),a.viewport&&(n.viewport=uH(a.viewport)),a.diagonal!=null&&(n.diagonal=a.diagonal),a.upper!=null&&(n.upper=a.upper),a.lower!=null&&(n.lower=a.lower),a.data){n.buffer(zgt(a.data)),n.columns=a.data.length,n.count=a.data[0].length,n.bounds=[];for(let d=0;d<n.columns;d++)n.bounds[d]=Dgt(a.data[d],1)}let o;a.range&&(n.range=a.range,o=n.range&&typeof n.range[0]!="number"),a.domain&&(n.domain=a.domain);let i=!1;a.padding!=null&&(Array.isArray(a.padding)&&a.padding.length===n.columns&&typeof a.padding[a.padding.length-1]=="number"?(n.padding=a.padding.map(nme),i=!0):n.padding=nme(a.padding));let s=n.columns,l=n.count,u=n.viewport.width,f=n.viewport.height,c=n.viewport.x,h=n.viewport.y,v=u/s,p=f/s;n.passes=[];for(let d=0;d<s;d++)for(let g=0;g<s;g++){if(!n.diagonal&&g===d||!n.upper&&d>g||!n.lower&&d<g)continue;let m=Ogt(n.id,d,g),y=this.passes[m]||(this.passes[m]={});if(a.data&&(a.transpose?y.positions={x:{buffer:n.buffer,offset:g,count:l,stride:s},y:{buffer:n.buffer,offset:d,count:l,stride:s}}:y.positions={x:{buffer:n.buffer,offset:g*l,count:l},y:{buffer:n.buffer,offset:d*l,count:l}},y.bounds=cI(n.bounds,d,g)),a.domain||a.viewport||a.data){let _=i?cI(n.padding,d,g):n.padding;if(n.domain){let[S,M,w,A]=cI(n.domain,d,g);y.viewport=[c+S*u+_[0],h+M*f+_[1],c+w*u-_[2],h+A*f-_[3]]}else y.viewport=[c+g*v+v*_[0],h+d*p+p*_[1],c+(g+1)*v-v*_[2],h+(d+1)*p-p*_[3]]}a.color&&(y.color=n.color),a.size&&(y.size=n.size),a.marker&&(y.marker=n.marker),a.borderSize&&(y.borderSize=n.borderSize),a.borderColor&&(y.borderColor=n.borderColor),a.opacity&&(y.opacity=n.opacity),a.range&&(y.range=o?cI(n.range,d,g):n.range||y.bounds),n.passes.push(m)}return this};s1.prototype.draw=function(...e){if(!e.length)this.scatter.draw();else{let t=[];for(let r=0;r<e.length;r++)if(typeof e[r]=="number"){let{passes:a,passOffset:n}=this.traces[e[r]];t.push(...Rgt(n,n+a.length))}else if(e[r].length){let a=e[r],{passes:n,passOffset:o}=this.traces[r];n=n.map((i,s)=>{t[o+s]=a})}this.scatter.draw(...t)}return this};s1.prototype.destroy=function(){return this.traces.forEach(e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function Ogt(e,t,r){let a=e.id!=null?e.id:e,n=t,o=r;return a<<16|(n&255)<<8|o&255}function cI(e,t,r){let a,n,o,i,s=e[t],l=e[r];return s.length>2?(a=s[1],n=s[3]):s.length?(a=s[0],n=s[1]):(a=s.y,s.x+s.width,n=s.y+s.height),l.length>2?(o=l[0],i=l[2]):l.length?(o=l[0],i=l[1]):(o=l.x,i=l.x+l.width,l.y+l.height),[o,a,i,n]}function nme(e){if(typeof e=="number")return[e,e,e,e];if(e.length===2)return[e[0],e[1],e[0],e[1]];{let t=uH(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}var Ngt=Fgt,fH=bt.exports,hI=As,Bgt=Jp.selectMode,$gt=function(t,r,a){if(!!a.length)for(var n=0;n<a.length;n++)Ugt(t,a[n][0])};function Ugt(e,t){var r=e._fullLayout,a=r._size,n=t.trace,o=t.t,i=r._splomScenes[n.uid],s=i.matrixOptions,l=s.cdata,u=r._glcanvas.data()[0].regl,f=r.dragmode,c,h,v,p,d;if(l.length!==0){s.lower=n.showupperhalf,s.upper=n.showlowerhalf,s.diagonal=n.diagonal.visible;var g=n._visibleDims,m=l.length,y=i.viewOpts={};for(y.ranges=new Array(m),y.domains=new Array(m),d=0;d<g.length;d++){v=g[d];var _=y.ranges[d]=new Array(4),S=y.domains[d]=new Array(4);c=hI.getFromId(e,n._diag[v][0]),c&&(_[0]=c._rl[0],_[2]=c._rl[1],S[0]=c.domain[0],S[2]=c.domain[1]),h=hI.getFromId(e,n._diag[v][1]),h&&(_[1]=h._rl[0],_[3]=h._rl[1],S[1]=h.domain[0],S[3]=h.domain[1])}var M=e._context.plotGlPixelRatio,w=a.l*M,A=a.b*M,k=a.w*M,T=a.h*M;y.viewport=[w,A,k+w,T+A],i.matrix===!0&&(i.matrix=Ngt(u));var L=r.clickmode.indexOf("select")>-1,C=Bgt(f)||!!n.selectedpoints||L,I=!0;if(C){var R=n._length;if(n.selectedpoints){i.selectBatch=n.selectedpoints;var B=n.selectedpoints,N={};for(v=0;v<B.length;v++)N[B[v]]=!0;var D=[];for(v=0;v<R;v++)N[v]||D.push(v);i.unselectBatch=D}var O=o.xpx=new Array(m),$=o.ypx=new Array(m);for(d=0;d<g.length;d++){if(v=g[d],c=hI.getFromId(e,n._diag[v][0]),c)for(O[d]=new Array(R),p=0;p<R;p++)O[d][p]=c.c2p(l[d][p]);if(h=hI.getFromId(e,n._diag[v][1]),h)for($[d]=new Array(R),p=0;p<R;p++)$[d][p]=h.c2p(l[d][p])}if(i.selectBatch.length||i.unselectBatch.length){var Y=fH.extendFlat({},s,i.unselectedOptions,y),X=fH.extendFlat({},s,i.selectedOptions,y);i.matrix.update(Y,X),I=!1}}else o.xpx=o.ypx=null;if(I){var ee=fH.extendFlat({},s,y);i.matrix.update(ee,null)}}}var cH={};cH.getDimIndex=function(t,r){for(var a=r._id,n=a.charAt(0),o={x:0,y:1}[n],i=t._visibleDims,s=0;s<i.length;s++){var l=i[s];if(t._diag[l][o]===a)return s}return!1};var ime=cH,Hgt=uU.calcHover;function Ggt(e,t,r){var a=e.cd,n=a[0].trace,o=e.scene,i=o.matrixOptions.cdata,s=e.xa,l=e.ya,u=s.c2p(t),f=l.c2p(r),c=e.distance,h=ime.getDimIndex(n,s),v=ime.getDimIndex(n,l);if(h===!1||v===!1)return[e];for(var p=i[h],d=i[v],g,m,y=c,_=0;_<p.length;_++){var S=p[_],M=d[_],w=s.c2p(S)-u,A=l.c2p(M)-f,k=Math.sqrt(w*w+A*A);k<y&&(y=m=k,g=_)}return e.index=g,e.distance=y,e.dxy=m,g===void 0?[e]:[Hgt(e,p,d,n)]}var Vgt={hoverPoints:Ggt},jgt=bt.exports,ome=Ro,sme=cH,qgt=function(t,r){var a=t.cd,n=a[0].trace,o=a[0].t,i=t.scene,s=i.matrixOptions.cdata,l=t.xaxis,u=t.yaxis,f=[];if(!i)return f;var c=!ome.hasMarkers(n)&&!ome.hasText(n);if(n.visible!==!0||c)return f;var h=sme.getDimIndex(n,l),v=sme.getDimIndex(n,u);if(h===!1||v===!1)return f;var p=o.xpx[h],d=o.ypx[v],g=s[h],m=s[v],y=[],_=[];if(r!==!1&&!r.degenerate)for(var S=0;S<g.length;S++)r.contains([p[S],d[S]],null,S,t)?(y.push(S),f.push({pointNumber:S,x:g[S],y:m[S]})):_.push(S);var M=i.matrixOptions;return!y.length&&!_.length?i.matrix.update(M,null):!i.selectBatch.length&&!i.unselectBatch.length&&i.matrix.update(i.unselectedOptions,jgt.extendFlat({},M,i.selectedOptions,i.viewOpts)),i.selectBatch=y,i.unselectBatch=_,f},lme=bt.exports,Ygt=Xd,Wgt=Fw.markerStyle,Xgt=function(t,r){var a=r.trace,n=t._fullLayout._splomScenes[a.uid];if(n){Ygt(t,a),lme.extendFlat(n.matrixOptions,Wgt(a));var o=lme.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(o,null)}},Zgt=Pa,Kgt=Mre,Jgt={moduleType:"trace",name:"splom",basePlotModule:ngt,categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:Jge,supplyDefaults:ggt,colorbar:Pf,calc:kgt,plot:$gt,hoverPoints:Vgt.hoverPoints,selectPoints:qgt,editStyle:Xgt,meta:{description:["Splom traces generate scatter plot matrix visualizations.","Each splom `dimensions` items correspond to a generated axis.","Values for each of those dimensions are set in `dimensions[i].values`.","Splom traces support all `scattergl` marker style attributes.","Specify `layout.grid` attributes and/or layout x-axis and y-axis attributes","for more control over the axis positioning and style. "].join(" ")}};Zgt.register(Kgt);var Qgt=Jgt,hH=Cl,ume={x:hH.x,y:hH.y,xy:{valType:"data_array",editType:"calc",description:["Faster alternative to specifying `x` and `y` separately.","If supplied, it must be a typed `Float32Array` array that","represents points such that `xy[i * 2] = x[i]` and `xy[i * 2 + 1] = y[i]`"].join(" ")},indices:{valType:"data_array",editType:"calc",description:["A sequential value, 0..n, supply it to avoid creating this array inside plotting.","If specified, it must be a typed `Int32Array` array.","Its length must be equal to or greater than the number of points.","For the best performance and memory use, create one large `indices` typed array","that is guaranteed to be at least as long as the largest number of points during","use, and reuse it on each `Plotly.restyle()` call."].join(" ")},xbounds:{valType:"data_array",editType:"calc",description:["Specify `xbounds` in the shape of `[xMin, xMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `ybounds` for the performance benefits."].join(" ")},ybounds:{valType:"data_array",editType:"calc",description:["Specify `ybounds` in the shape of `[yMin, yMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `xbounds` for the performance benefits."].join(" ")},text:hH.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the marker fill color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join("")},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc",description:["Sets the marker opacity. The default value is `1` (fully opaque).","If the markers are not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning.","Opacity fades the color even if `blend` is left on `false` even if there","is no translucency effect in that case."].join(" ")},blend:{valType:"boolean",dflt:null,editType:"calc",description:["Determines if colors are blended together for a translucency effect","in case `opacity` is specified as a value less then `1`.","Setting `blend` to `true` reduces zoom/pan","speed if used with large numbers of points."].join(" ")},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc",description:["Sets the minimum size (in px) of the rendered marker points, effective when","the `pointcloud` shows a million or more points."].join(" ")},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc",description:["Sets the maximum size (in px) of the rendered marker points.","Effective when the `pointcloud` shows only few points."].join(" ")},border:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the stroke color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Specifies what fraction of the marker area is covered with the","border."].join(" ")},editType:"calc"},editType:"calc"},transforms:void 0},emt=bt.exports,tmt=ume,rmt=function(t,r,a){function n(o,i){return emt.coerce(t,r,tmt,o,i)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(r.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(r.indices=t.indices),n("text"),n("marker.color",a),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",a),n("marker.border.arearatio"),r._length=null},amt=Ns.exports.gl_pointcloud2d,fme=lp,cme=Hd.findExtremes,nmt=QT;function hme(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=amt(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var vI=hme.prototype;vI.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};vI.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=nmt(e,{})};vI.updateFast=function(e){var t=this.xData=this.pickXData=e.x,r=this.yData=this.pickYData=e.y,a=this.pickXYData=e.xy,n=e.xbounds&&e.ybounds,o=e.indices,i,s,l,u=this.bounds,f,c,h;if(a){if(l=a,i=a.length>>>1,n)u[0]=e.xbounds[0],u[2]=e.xbounds[1],u[1]=e.ybounds[0],u[3]=e.ybounds[1];else for(h=0;h<i;h++)f=l[h*2],c=l[h*2+1],f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);if(o)s=o;else for(s=new Int32Array(i),h=0;h<i;h++)s[h]=h}else for(i=t.length,l=new Float32Array(2*i),s=new Int32Array(i),h=0;h<i;h++)f=t[h],c=r[h],s[h]=h,l[h*2]=f,l[h*2+1]=c,f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=l;var v=fme(e.marker.color),p=fme(e.marker.border.color),d=e.opacity*e.marker.opacity;v[3]*=d,this.pointcloudOptions.color=v;var g=e.marker.blend;if(g===null){var m=100;g=t.length<m||r.length<m}this.pointcloudOptions.blend=g,p[3]*=d,this.pointcloudOptions.borderColor=p;var y=e.marker.sizemin,_=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=y,this.pointcloudOptions.sizeMax=_,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,M=this.scene.yaxis,w=_/2||.5;e._extremes[S._id]=cme(S,[u[0],u[2]],{ppad:w}),e._extremes[M._id]=cme(M,[u[1],u[3]],{ppad:w})};vI.dispose=function(){this.pointcloud.dispose()};function imt(e,t){var r=new hme(e,t.uid);return r.update(t),r}var omt=imt,Bf={},smt=rn.exports,fb=lp;function vme(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var cb=vme.prototype,lmt=["xaxis","yaxis"];cb.merge=function(e){this.titleEnable=!1,this.backgroundColor=fb(e.plot_bgcolor);var t,r,a,n,o,i,s,l,u,f,c;for(f=0;f<2;++f){t=lmt[f];var h=t.charAt(0);for(r=e[this.scene[t]._name],a=r.title.text===this.scene.fullLayout._dfltTitle[h]?"":r.title.text,c=0;c<=2;c+=2)this.labelEnable[f+c]=!1,this.labels[f+c]=a,this.labelColor[f+c]=fb(r.title.font.color),this.labelFont[f+c]=r.title.font.family,this.labelSize[f+c]=r.title.font.size,this.labelPad[f+c]=this.getLabelPad(t,r),this.tickEnable[f+c]=!1,this.tickColor[f+c]=fb((r.tickfont||{}).color),this.tickAngle[f+c]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[f+c]=this.getTickPad(r),this.tickMarkLength[f+c]=0,this.tickMarkWidth[f+c]=r.tickwidth||0,this.tickMarkColor[f+c]=fb(r.tickcolor),this.borderLineEnable[f+c]=!1,this.borderLineColor[f+c]=fb(r.linecolor),this.borderLineWidth[f+c]=r.linewidth||0;s=this.hasSharedAxis(r),o=this.hasAxisInDfltPos(t,r)&&!s,i=this.hasAxisInAltrPos(t,r)&&!s,n=r.mirror||!1,l=s?String(n).indexOf("all")!==-1:!!n,u=s?n==="allticks":String(n).indexOf("ticks")!==-1,o?this.labelEnable[f]=!0:i&&(this.labelEnable[f+2]=!0),o?this.tickEnable[f]=r.showticklabels:i&&(this.tickEnable[f+2]=r.showticklabels),(o||l)&&(this.borderLineEnable[f]=r.showline),(i||l)&&(this.borderLineEnable[f+2]=r.showline),(o||u)&&(this.tickMarkLength[f]=this.getTickMarkLength(r)),(i||u)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(r)),this.gridLineEnable[f]=r.showgrid,this.gridLineColor[f]=fb(r.gridcolor),this.gridLineWidth[f]=r.gridwidth,this.zeroLineEnable[f]=r.zeroline,this.zeroLineColor[f]=fb(r.zerolinecolor),this.zeroLineWidth[f]=r.zerolinewidth}};cb.hasSharedAxis=function(e){var t=this.scene,r=t.fullLayout._subplots.gl2d,a=smt.findSubplotsWithAxis(r,e);return a.indexOf(t.id)!==0};cb.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";if(e==="yaxis")return r==="left"};cb.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";if(e==="yaxis")return r==="right"};cb.getLabelPad=function(e,t){var r=1.5,a=t.title.font.size,n=t.showticklabels;if(e==="xaxis")return t.side==="top"?-10+a*(r+(n?1:0)):-10+a*(r+(n?.5:0));if(e==="yaxis")return t.side==="right"?10+a*(r+(n?1:.5)):10+a*(r+(n?.5:0))};cb.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};cb.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function umt(e){return new vme(e)}var fmt=umt,gM={};function cmt(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(t===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(t===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0}gM.buttons=cmt;function vH(e){return e.target||e.srcElement||window}gM.element=vH;function hmt(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var t=vH(e),r=t.getBoundingClientRect();return e.clientX-r.left}return 0}gM.x=hmt;function vmt(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var t=vH(e),r=t.getBoundingClientRect();return e.clientY-r.top}return 0}gM.y=vmt;var dmt=pmt,mM=gM;function pmt(e,t){t||(t=e,e=window);var r=0,a=0,n=0,o={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function s(y){var _=!1;return"altKey"in y&&(_=_||y.altKey!==o.alt,o.alt=!!y.altKey),"shiftKey"in y&&(_=_||y.shiftKey!==o.shift,o.shift=!!y.shiftKey),"ctrlKey"in y&&(_=_||y.ctrlKey!==o.control,o.control=!!y.ctrlKey),"metaKey"in y&&(_=_||y.metaKey!==o.meta,o.meta=!!y.metaKey),_}function l(y,_){var S=mM.x(_),M=mM.y(_);"buttons"in _&&(y=_.buttons|0),(y!==r||S!==a||M!==n||s(_))&&(r=y|0,a=S||0,n=M||0,t&&t(r,a,n,o))}function u(y){l(0,y)}function f(){(r||a||n||o.shift||o.alt||o.meta||o.control)&&(a=n=0,r=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function c(y){s(y)&&t&&t(r,a,n,o)}function h(y){mM.buttons(y)===0?l(0,y):l(r,y)}function v(y){l(r|mM.buttons(y),y)}function p(y){l(r&~mM.buttons(y),y)}function d(){i||(i=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",v),e.addEventListener("mouseup",p),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",f),e.addEventListener("keyup",c),e.addEventListener("keydown",c),e.addEventListener("keypress",c),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}function g(){!i||(i=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",p),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",f),e.removeEventListener("keyup",c),e.removeEventListener("keydown",c),e.removeEventListener("keypress",c),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))}d();var m={element:e};return Object.defineProperties(m,{enabled:{get:function(){return i},set:function(y){y?d():g()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),m}var gmt=Ige,mmt=ymt;function ymt(e,t,r){typeof e=="function"&&(r=!!t,t=e,e=window);var a=gmt("ex",e),n=function(o){r&&o.preventDefault();var i=o.deltaX||0,s=o.deltaY||0,l=o.deltaZ||0,u=o.deltaMode,f=1;switch(u){case 1:f=a;break;case 2:f=window.innerHeight;break}if(i*=f,s*=f,l*=f,i||s||l)return t(i,s,l,o)};return e.addEventListener("wheel",n),n}var xmt=dmt,bmt=mmt,dme=hK,pme=Sl,dH=vE,_mt=Tmt;function wmt(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function Tmt(e){var t=e.mouseContainer,r=e.glplot,a=new wmt(t,r);function n(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function o(){for(var s=e.graphDiv._fullLayout._axisConstraintGroups,l=e.xaxis._id,u=e.yaxis._id,f=0;f<s.length;f++)if(s[f][l]!==-1){if(s[f][u]!==-1)return!0;break}return!1}a.mouseListener=xmt(t,i),t.addEventListener("touchstart",function(s){var l=dme(s.changedTouches[0],t);i(0,l[0],l[1]),i(1,l[0],l[1]),s.preventDefault()},dH?{passive:!1}:!1),t.addEventListener("touchmove",function(s){s.preventDefault();var l=dme(s.changedTouches[0],t);i(1,l[0],l[1]),s.preventDefault()},dH?{passive:!1}:!1),t.addEventListener("touchend",function(s){i(0,a.lastPos[0],a.lastPos[1]),s.preventDefault()},dH?{passive:!1}:!1);function i(s,l,u){var f=e.calcDataBox(),c=r.viewBox,h=a.lastPos[0],v=a.lastPos[1],p=pme.MINDRAG*r.pixelRatio,d=pme.MINZOOM*r.pixelRatio,g,m;l*=r.pixelRatio,u*=r.pixelRatio,u=c[3]-c[1]-u;function y(k,T,L){var C=Math.min(T,L),I=Math.max(T,L);C!==I?(f[k]=C,f[k+2]=I,a.dataBox=f,e.setRanges(f)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(e.fullLayout.dragmode){case"zoom":if(s){var _=l/(c[2]-c[0])*(f[2]-f[0])+f[0],S=u/(c[3]-c[1])*(f[3]-f[1])+f[1];a.boxInited||(a.boxStart[0]=_,a.boxStart[1]=S,a.dragStart[0]=l,a.dragStart[1]=u),a.boxEnd[0]=_,a.boxEnd[1]=S,a.boxInited=!0,!a.boxEnabled&&(a.boxStart[0]!==a.boxEnd[0]||a.boxStart[1]!==a.boxEnd[1])&&(a.boxEnabled=!0);var M=Math.abs(a.dragStart[0]-l)<d,w=Math.abs(a.dragStart[1]-u)<d;if(o()&&!(M&&w)){g=a.boxEnd[0]-a.boxStart[0],m=a.boxEnd[1]-a.boxStart[1];var A=(f[3]-f[1])/(f[2]-f[0]);Math.abs(g*A)>Math.abs(m)?(a.boxEnd[1]=a.boxStart[1]+Math.abs(g)*A*(m>=0?1:-1),a.boxEnd[1]<f[1]?(a.boxEnd[1]=f[1],a.boxEnd[0]=a.boxStart[0]+(f[1]-a.boxStart[1])/Math.abs(A)):a.boxEnd[1]>f[3]&&(a.boxEnd[1]=f[3],a.boxEnd[0]=a.boxStart[0]+(f[3]-a.boxStart[1])/Math.abs(A))):(a.boxEnd[0]=a.boxStart[0]+Math.abs(m)/A*(g>=0?1:-1),a.boxEnd[0]<f[0]?(a.boxEnd[0]=f[0],a.boxEnd[1]=a.boxStart[1]+(f[0]-a.boxStart[0])*Math.abs(A)):a.boxEnd[0]>f[2]&&(a.boxEnd[0]=f[2],a.boxEnd[1]=a.boxStart[1]+(f[2]-a.boxStart[0])*Math.abs(A)))}else M&&(a.boxEnd[0]=a.boxStart[0]),w&&(a.boxEnd[1]=a.boxStart[1])}else a.boxEnabled?(g=a.boxStart[0]!==a.boxEnd[0],m=a.boxStart[1]!==a.boxEnd[1],g||m?(g&&(y(0,a.boxStart[0],a.boxEnd[0]),e.xaxis.autorange=!1),m&&(y(1,a.boxStart[1],a.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),a.boxEnabled=!1,a.boxInited=!1):a.boxInited&&(a.boxInited=!1);break;case"pan":a.boxEnabled=!1,a.boxInited=!1,s?(a.panning||(a.dragStart[0]=l,a.dragStart[1]=u),Math.abs(a.dragStart[0]-l)<p&&(l=a.dragStart[0]),Math.abs(a.dragStart[1]-u)<p&&(u=a.dragStart[1]),g=(h-l)*(f[2]-f[0])/(r.viewBox[2]-r.viewBox[0]),m=(v-u)*(f[3]-f[1])/(r.viewBox[3]-r.viewBox[1]),f[0]+=g,f[2]+=g,f[1]+=m,f[3]+=m,e.setRanges(f),a.panning=!0,a.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations()):a.panning&&(a.panning=!1,e.relayoutCallback());break}a.lastPos[0]=l,a.lastPos[1]=u}return a.wheelListener=bmt(t,function(s,l){if(!e.scrollZoom)return!1;var u=e.calcDataBox(),f=r.viewBox,c=a.lastPos[0],h=a.lastPos[1],v=Math.exp(5*l/(f[3]-f[1])),p=c/(f[2]-f[0])*(u[2]-u[0])+u[0],d=h/(f[3]-f[1])*(u[3]-u[1])+u[1];return u[0]=(u[0]-p)*v+p,u[2]=(u[2]-p)*v+p,u[1]=(u[1]-d)*v+d,u[3]=(u[3]-d)*v+d,e.setRanges(u),a.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),a}var gme=Pa,pH=rn.exports,gp=Rs,Amt=Ns.exports.gl_plot2d,Smt=Ns.exports.gl_spikes2d,Mmt=Ns.exports.gl_select_box,mme=Tfe,kmt=fmt,Emt=_mt,Cmt=tN,yme=qd,Lmt=yme.enforce,xme=yme.clean,Pmt=Hd.doAutoRange,bme=Jp,Imt=bme.drawMode,Dmt=bme.selectMode,Rmt=["xaxis","yaxis"],yM,dI,zmt=Sl.SUBPLOT_PATTERN;function _me(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(t),this.makeFramework(),!this.stopped&&(this.glplotOptions=kmt(this),this.glplotOptions.merge(t),this.glplot=Amt(this.glplotOptions),this.camera=Emt(this),this.traces={},this.spikes=Smt(this.glplot),this.selectBox=Mmt(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var Fmt=_me,Nu=_me.prototype;Nu.makeFramework=function(){if(this.staticPlot){if(!dI&&(yM=document.createElement("canvas"),dI=mme({canvas:yM,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!dI))throw new Error("Error creating static canvas/context for image server");this.canvas=yM,this.gl=dI}else{var e=this.container.querySelector(".gl-canvas-focus"),t=mme({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!t){Cmt(this),this.stopped=!0;return}this.canvas=e,this.gl=t}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r);var a=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute",a.style.top=a.style.left="0px",a.style.width=a.style.height="100%",a.style["z-index"]=20,a.style["pointer-events"]="none";var n=this.mouseContainer=document.createElement("div");n.style.position="absolute",n.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var o=this.container;o.appendChild(a),o.appendChild(n);var i=this;n.addEventListener("mouseout",function(){i.isMouseOver=!1,i.unhover()}),n.addEventListener("mouseover",function(){i.isMouseOver=!0})};Nu.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(yM),this.updateSize(this.canvas);var t=this.glplot.gl,r=t.drawingBufferWidth,a=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new Uint8Array(r*a*4);t.readPixels(0,0,r,a,t.RGBA,t.UNSIGNED_BYTE,n);for(var o=0,i=a-1;o<i;++o,--i)for(var s=0;s<r;++s)for(var l=0;l<4;++l){var u=n[4*(r*o+s)+l];n[4*(r*o+s)+l]=n[4*(r*i+s)+l],n[4*(r*i+s)+l]=u}var f=document.createElement("canvas");f.width=r,f.height=a;var c=f.getContext("2d"),h=c.createImageData(r,a);h.data.set(n),c.putImageData(h,0,0);var v;switch(e){case"jpeg":v=f.toDataURL("image/jpeg");break;case"webp":v=f.toDataURL("image/webp");break;default:v=f.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(yM),v};Nu.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,r=this.fullLayout,a=r.width,n=r.height,o=Math.ceil(t*a)|0,i=Math.ceil(t*n)|0;return(e.width!==o||e.height!==i)&&(e.width=o,e.height=i),e};Nu.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[pH.calcTicks(this.xaxis),pH.calcTicks(this.yaxis)],t=0;t<2;++t)for(var r=0;r<e[t].length;++r)e[t][r].text=e[t][r].text+"";return e};function Omt(e,t){for(var r=0;r<2;++r){var a=e[r],n=t[r];if(a.length!==n.length)return!0;for(var o=0;o<a.length;++o)if(a[o].x!==n[o].x)return!0}return!1}Nu.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(zmt),r="xaxis"+t[1],a="yaxis"+t[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[a]};Nu.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,r=this.yaxis,a=e.layout,n={},o=n[t._name+".range"]=t.range.slice(),i=n[r._name+".range"]=r.range.slice();n[t._name+".autorange"]=t.autorange,n[r._name+".autorange"]=r.autorange,gme.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);var s=a[t._name];s.range=o,s.autorange=t.autorange;var l=a[r._name];l.range=i,l.autorange=r.autorange,n.lastInputTime=this.camera.lastInputTime,e.emit("plotly_relayout",n)};Nu.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),r=this.glplotOptions.ticks;Omt(t,r)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};Nu.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,r=0;r<t.length;r++){var a=t[r];a.xref===this.xaxis._id&&a.yref===this.yaxis._id&&gme.getComponentMethod("annotations","drawOne")(e,r)}};Nu.destroy=function(){if(!!this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}};Nu.plot=function(e,t,r){var a=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(r.dragmode);var n=r.width,o=r.height;this.updateSize(this.canvas);var i=this.glplotOptions;i.merge(r),i.screenBox=[0,0,n,o];var s={_fullLayout:{_axisConstraintGroups:r._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:r._size}};xme(s,this.xaxis),xme(s,this.yaxis);var l=r._size,u=this.xaxis.domain,f=this.yaxis.domain;i.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,n-l.r-(1-u[1])*l.w,o-l.t-(1-f[1])*l.h],this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px",this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px",this.mouseContainer.height=l.h*(f[1]-f[0]),this.mouseContainer.style.left=l.l+u[0]*l.w+"px",this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,h;for(h=0;h<2;++h)c=this[Rmt[h]],c._length=i.viewBox[h+2]-i.viewBox[h],Pmt(this.graphDiv,c),c.setScale();Lmt(s),i.ticks=this.computeTickMarks(),i.dataBox=this.calcDataBox(),i.merge(r),a.update(i),this.glplot.draw()};Nu.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,r=e.range,a=t.range,n=e.r2l,o=t.r2l;return[n(r[0]),o(a[0]),n(r[1]),o(a[1])]};Nu.setRanges=function(e){var t=this.xaxis,r=this.yaxis,a=t.l2r,n=r.l2r;t.range=[a(e[0]),a(e[2])],r.range=[n(e[1]),n(e[3])]};Nu.updateTraces=function(e,t){var r=Object.keys(this.traces),a,n,o;this.fullData=e;e:for(a=0;a<r.length;a++){var i=r[a],s=this.traces[i];for(n=0;n<e.length;n++)if(o=e[n],o.uid===i&&o.type===s.type)continue e;s.dispose(),delete this.traces[i]}for(a=0;a<e.length;a++){o=e[a];var l=t[a],u=this.traces[o.uid];u?u.update(o,l):(u=o._module.plot(this,o,l),this.traces[o.uid]=u)}this.glplot.objects.sort(function(f,c){return f._trace.index-c._trace.index})};Nu.updateFx=function(e){Dmt(e)||Imt(e)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),e==="pan"?this.mouseContainer.style.cursor="move":e==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null};Nu.emitPointAction=function(e,t){for(var r=e.trace.uid,a=e.pointIndex,n,o=0;o<this.fullData.length;o++)this.fullData[o].uid===r&&(n=this.fullData[o]);var i={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:a,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};gp.appendArrayPointValue(i,n,a),this.graphDiv.emit(t,{points:[i]})};Nu.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,r=t.mouseListener,a=this.lastButtonState===1&&r.buttons===0,n=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var o=r.x*e.pixelRatio,i=this.canvas.height-e.pixelRatio*r.y,s;if(t.boxEnabled&&n.dragmode==="zoom"){this.selectBox.enabled=!0;for(var l=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],u=0;u<2;u++)t.boxStart[u]===t.boxEnd[u]&&(l[u]=e.dataBox[u],l[u+2]=e.dataBox[u+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var f=n._size,c=this.xaxis.domain,h=this.yaxis.domain;s=e.pick(o/e.pixelRatio+f.l+c[0]*f.w,i/e.pixelRatio-(f.t+(1-h[1])*f.h));var v=s&&s.object._trace.handlePick(s);if(v&&a&&this.emitPointAction(v,"plotly_click"),s&&s.object._trace.hoverinfo!=="skip"&&n.hovermode&&v&&(!this.lastPickResult||this.lastPickResult.traceUid!==v.trace.uid||this.lastPickResult.dataCoord[0]!==v.dataCoord[0]||this.lastPickResult.dataCoord[1]!==v.dataCoord[1])){var p=v;this.lastPickResult={traceUid:v.trace?v.trace.uid:null,dataCoord:v.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),p.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(s.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(s.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(v,"plotly_hover");var d=this.fullData[p.trace.index]||{},g=p.pointIndex,m=gp.castHoverinfo(d,n,g);if(m&&m!=="all"){var y=m.split("+");y.indexOf("x")===-1&&(p.traceCoord[0]=void 0),y.indexOf("y")===-1&&(p.traceCoord[1]=void 0),y.indexOf("z")===-1&&(p.traceCoord[2]=void 0),y.indexOf("text")===-1&&(p.textLabel=void 0),y.indexOf("name")===-1&&(p.name=void 0)}gp.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:gp.castHoverOption(d,g,"bgcolor")||p.color,borderColor:gp.castHoverOption(d,g,"bordercolor"),fontFamily:gp.castHoverOption(d,g,"font.family"),fontSize:gp.castHoverOption(d,g,"font.size"),fontColor:gp.castHoverOption(d,g,"font.color"),nameLength:gp.castHoverOption(d,g,"namelength"),textAlign:gp.castHoverOption(d,g,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),e.draw()}};Nu.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),gp.loneUnhover(this.svgContainer))};Nu.hoverFormatter=function(e,t){if(t!==void 0){var r=this[e];return pH.tickText(r,r.c2l(t),"hover").text}};var wme=Jo.overrideAll,Nmt=Fmt,Bmt=C_,$mt=Xh,Tme=Sl,pI=Ii,Umt=ay,Ame=Ml.getSubplotData;Bf.name="gl2d";Bf.attr=["xaxis","yaxis"];Bf.idRoot=["x","y"];Bf.idRegex=Tme.idRegex;Bf.attrRegex=Tme.attrRegex;Bf.attributes=kee;Bf.supplyLayoutDefaults=function(e,t,r){t._has("cartesian")||pI.supplyLayoutDefaults(e,t,r)};Bf.layoutAttrOverrides=wme(pI.layoutAttributes,"plot","from-root");Bf.baseLayoutAttrOverrides=wme({plot_bgcolor:Bmt.plot_bgcolor,hoverlabel:Umt.hoverlabel},"plot","nested");Bf.plot=function(t){for(var r=t._fullLayout,a=t._fullData,n=r._subplots.gl2d,o=0;o<n.length;o++){var i=n[o],s=r._plots[i],l=Ame(a,"gl2d",i),u=s._scene2d;u===void 0&&(u=new Nmt({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r),s._scene2d=u),u.plot(l,t.calcdata,r,t.layout)}};Bf.clean=function(e,t,r,a){for(var n=a._subplots.gl2d||[],o=0;o<n.length;o++){var i=n[o],s=a._plots[i];if(!!s._scene2d){var l=Ame(e,"gl2d",i);l.length===0&&(s._scene2d.destroy(),delete a._plots[i])}}pI.clean.apply(this,arguments)};Bf.drawFramework=function(e){e._context.staticPlot||pI.drawFramework(e)};Bf.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,a=0;a<r.length;a++){var n=t._plots[r[a]],o=n._scene2d,i=o.toImage("png"),s=t._glimages.append("svg:image");s.attr({xmlns:$mt.svg,"xlink:href":i,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),o.destroy()}};Bf.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,a=0;a<r.length;a++){var n=t._plots[r[a]]._scene2d;n.updateFx(t.dragmode)}};var Hmt=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),Gmt={attributes:ume,supplyDefaults:rmt,calc:wfe,plot:omt,moduleType:"trace",name:"pointcloud",basePlotModule:Bf,categories:["gl","gl2d","showLegend"],meta:{description:[Hmt,"The data visualized as a point cloud set in `x` and `y`","using the WebGl plotting engine."].join(" ")}},Vmt=Gmt,jmt=T2,qmt=bo,Ymt=cn.extendFlat,Wmt=Jo.overrideAll,Sme=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],gI={};for(var gH=0;gH<Sme.length;gH++){var Mme=Sme[gH];gI[Mme]=jmt[Mme]}gI.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc",description:"Picks a smoothing algorithm use to smooth `z` data."};Ymt(gI,qmt("",{cLetter:"z",autoColorDflt:!1}));var kme=Wmt(gI,"calc","nested"),Xmt=bt.exports,Zmt=DC,Kmt=su,Jmt=kme,Qmt=function(t,r,a,n){function o(s,l){return Xmt.coerce(t,r,Jmt,s,l)}var i=Zmt(t,r,o,n);if(!i){r.visible=!1;return}o("text"),o("zsmooth"),Kmt(t,r,n,o,{prefix:"",cLetter:"z"})},eyt=Ns.exports.gl_heatmap2d,Eme=rn.exports,tyt=lp;function Cme(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=eyt(e.glplot,this.options),this.heatmap._trace=this}var mH=Cme.prototype;mH.handlePick=function(e){var t=this.options,r=t.shape,a=e.pointId,n=a%r[0],o=Math.floor(a/r[0]),i=a;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[n],t.y[o],t.z[i]],textLabel:this.textLabels[a],name:this.name,pointIndex:[o,n],hoverinfo:this.hoverinfo}};mH.update=function(e,t){var r=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var a=r.z;this.options.z=[].concat.apply([],a);var n=a[0].length,o=a.length;this.options.shape=[n,o],this.options.x=r.x,this.options.y=r.y,this.options.zsmooth=e.zsmooth;var i=ryt(e);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var s=this.scene.xaxis,l=this.scene.yaxis,u,f;e.zsmooth===!1&&(u={ppad:r.x[1]-r.x[0]},f={ppad:r.y[1]-r.y[0]}),e._extremes[s._id]=Eme.findExtremes(s,r.x,u),e._extremes[l._id]=Eme.findExtremes(l,r.y,f)};mH.dispose=function(){this.heatmap.dispose()};function ryt(e){for(var t=e.colorscale,r=e.zmin,a=e.zmax,n=t.length,o=new Array(n),i=new Array(4*n),s=0;s<n;s++){var l=t[s],u=tyt(l[1]);o[s]=r+l[0]*(a-r);for(var f=0;f<4;f++)i[4*s+f]=u[f]}return{colorLevels:o,colorValues:i}}function ayt(e,t,r){var a=new Cme(e,t.uid);return a.update(t,r),a}var nyt=ayt,iyt=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),oyt={attributes:kme,supplyDefaults:Qmt,colorbar:k2,calc:$C,plot:nyt,moduleType:"trace",name:"heatmapgl",basePlotModule:Bf,categories:["gl","gl2d","2dMap"],meta:{description:[iyt,"WebGL version of the heatmap trace type."].join(" ")}},syt=oyt,lyt=bo,yH=Zu,xH=Ts,uyt=Fo.attributes,mI=cn.extendFlat,fyt=si.templatedArray,Lme={domain:uyt({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot",description:["Sets the angle of the labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the labels vertically.","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Specifies the location of the `label`.","*top* positions labels above, next to the title","*bottom* positions labels below the graph","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelfont:xH({editType:"plot",description:"Sets the font for the `dimension` labels."}),tickfont:xH({editType:"plot",description:"Sets the font for the `dimension` tick values."}),rangefont:xH({editType:"plot",description:"Sets the font for the `dimension` range values."}),dimensions:fyt("dimension",{label:{valType:"string",editType:"plot",description:"The shown name of the dimension."},tickvals:mI({},yH.tickvals,{editType:"plot",description:["Sets the values at which ticks on this axis appear."].join(" ")}),ticktext:mI({},yH.ticktext,{editType:"plot",description:["Sets the text displayed at the ticks position via `tickvals`."].join(" ")}),tickformat:mI({},yH.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["The domain range that represents the full, shown axis extent. Defaults to the `values` extent.","Must be an array of `[fromValue, toValue]` with finite numbers as elements."].join(" ")},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["The domain range to which the filter on the dimension is constrained. Must be an array","of `[fromValue, toValue]` with `fromValue <= toValue`, or if `multiselect` is not","disabled, you may give an array of arrays, where each inner array is `[fromValue, toValue]`."].join(" ")},multiselect:{valType:"boolean",dflt:!0,editType:"plot",description:"Do we allow multiple selection ranges or just a single range?"},values:{valType:"data_array",editType:"calc",description:["Dimension values. `values[n]` represents the value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated). Each value must be a finite number."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel coordinates chart. 2..60 dimensions are supported."}),line:mI({editType:"calc"},lyt("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))},yI={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}},cyt=A5;function Pme(e){return[e]}var ym={keyFun:function(e){return e.key},repeat:Pme,descend:cyt,wrap:Pme,unwrap:function(e){return e[0]}},tl=yI,mp=Ra.exports,hyt=ym.keyFun,xI=ym.repeat,Xw=bt.exports.sorterAsc,vyt=bt.exports.strTranslate,Ime=tl.bar.snapRatio;function Dme(e,t){return e*(1-Ime)+t*Ime}var Rme=tl.bar.snapClose;function dyt(e,t){return e*(1-Rme)+t*Rme}function bI(e,t,r,a){if(pyt(r,a))return r;var n=e?-1:1,o=0,i=t.length-1;if(n<0){var s=o;o=i,i=s}for(var l=t[o],u=l,f=o;n*f<n*i;f+=n){var c=f+n,h=t[c];if(n*r<n*dyt(l,h))return Dme(l,u);if(n*r<n*h||c===i)return Dme(h,l);u=l,l=h}}function pyt(e,t){for(var r=0;r<t.length;r++)if(e>=t[r][0]&&e<=t[r][1])return!0;return!1}function gyt(e){e.attr("x",-tl.bar.captureWidth/2).attr("width",tl.bar.captureWidth)}function myt(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function yyt(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var t=zme(e.brush.filter.getConsolidated(),e.height),r=[0],a,n,o,i=t.length?t[0][0]:null,s=0;s<t.length;s++)a=t[s],n=a[1]-a[0],r.push(i),r.push(n),o=s+1,o<t.length&&(i=t[o][0]-a[1]);return r.push(e.height),r}function zme(e,t){return e.map(function(r){return r.map(function(a){return Math.max(0,a*t)}).sort(Xw)})}function xyt(e,t){var r=tl.bar.handleHeight;if(!(t>e[1]+r||t<e[0]-r))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}function Fme(){mp.select(document.body).style("cursor",null)}function bH(e){e.attr("stroke-dasharray",yyt)}function _I(e,t){var r=mp.select(e).selectAll(".highlight, .highlight-shadow"),a=t?r.transition().duration(tl.bar.snapDuration).each("end",t):r;bH(a)}function Ome(e,t){var r=e.brush,a=r.filterSpecified,n=NaN,o={},i;if(a){var s=e.height,l=r.filter.getConsolidated(),u=zme(l,s),f=NaN,c=NaN,h=NaN;for(i=0;i<=u.length;i++){var v=u[i];if(v&&v[0]<=t&&t<=v[1]){f=i;break}else if(c=i?i-1:NaN,v&&v[0]>t){h=i;break}}if(n=f,isNaN(n)&&(isNaN(c)||isNaN(h)?n=isNaN(c)?h:c:n=t-u[c][1]<u[h][0]-t?c:h),!isNaN(n)){var p=u[n],d=xyt(p,t);d&&(o.interval=l[n],o.intervalPix=p,o.region=d)}}if(e.ordinal&&!o.region){var g=e.unitTickvals,m=e.unitToPaddedPx.invert(t);for(i=0;i<g.length;i++){var y=[g[Math.max(i-1,0)]*.25+g[i]*.75,g[Math.min(i+1,g.length-1)]*.25+g[i]*.75];if(m>=y[0]&&m<=y[1]){o.clickableOrdinalRange=y;break}}}return o}function byt(e,t){mp.event.sourceEvent.stopPropagation();var r=t.height-mp.mouse(e)[1]-2*tl.verticalPadding,a=t.unitToPaddedPx.invert(r),n=t.brush,o=Ome(t,r),i=o.interval,s=n.svgBrush;if(s.wasDragged=!1,s.grabbingBar=o.region==="ns",s.grabbingBar){var l=i.map(t.unitToPaddedPx);s.grabPoint=r-l[0]-tl.verticalPadding,s.barLength=l[1]-l[0]}s.clickableOrdinalRange=o.clickableOrdinalRange,s.stayingIntervals=t.multiselect&&n.filterSpecified?n.filter.getConsolidated():[],i&&(s.stayingIntervals=s.stayingIntervals.filter(function(u){return u[0]!==i[0]&&u[1]!==i[1]})),s.startExtent=o.region?i[o.region==="s"?1:0]:a,t.parent.inBrushDrag=!0,s.brushStartCallback()}function Nme(e,t){mp.event.sourceEvent.stopPropagation();var r=t.height-mp.mouse(e)[1]-2*tl.verticalPadding,a=t.brush.svgBrush;a.wasDragged=!0,a._dragging=!0,a.grabbingBar?a.newExtent=[r-a.grabPoint,r+a.barLength-a.grabPoint].map(t.unitToPaddedPx.invert):a.newExtent=[a.startExtent,t.unitToPaddedPx.invert(r)].sort(Xw),t.brush.filterSpecified=!0,a.extent=a.stayingIntervals.concat([a.newExtent]),a.brushCallback(t),_I(e.parentNode)}function _yt(e,t){var r=t.brush,a=r.filter,n=r.svgBrush;n._dragging||(Bme(e,t),Nme(e,t),t.brush.svgBrush.wasDragged=!1),n._dragging=!1;var o=mp.event;o.sourceEvent.stopPropagation();var i=n.grabbingBar;if(n.grabbingBar=!1,n.grabLocation=void 0,t.parent.inBrushDrag=!1,Fme(),!n.wasDragged){n.wasDragged=void 0,n.clickableOrdinalRange?r.filterSpecified&&t.multiselect?n.extent.push(n.clickableOrdinalRange):(n.extent=[n.clickableOrdinalRange],r.filterSpecified=!0):i?(n.extent=n.stayingIntervals,n.extent.length===0&&_H(r)):_H(r),n.brushCallback(t),_I(e.parentNode),n.brushEndCallback(r.filterSpecified?a.getConsolidated():[]);return}var s=function(){a.set(a.getConsolidated())};if(t.ordinal){var l=t.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),n.newExtent=[bI(0,l,n.newExtent[0],n.stayingIntervals),bI(1,l,n.newExtent[1],n.stayingIntervals)];var u=n.newExtent[1]>n.newExtent[0];n.extent=n.stayingIntervals.concat(u?[n.newExtent]:[]),n.extent.length||_H(r),n.brushCallback(t),u?_I(e.parentNode,s):(s(),_I(e.parentNode))}else s();n.brushEndCallback(r.filterSpecified?a.getConsolidated():[])}function Bme(e,t){var r=t.height-mp.mouse(e)[1]-2*tl.verticalPadding,a=Ome(t,r),n="crosshair";a.clickableOrdinalRange?n="pointer":a.region&&(n=a.region+"-resize"),mp.select(document.body).style("cursor",n)}function wyt(e){e.on("mousemove",function(t){mp.event.preventDefault(),t.parent.inBrushDrag||Bme(this,t)}).on("mouseleave",function(t){t.parent.inBrushDrag||Fme()}).call(mp.behavior.drag().on("dragstart",function(t){byt(this,t)}).on("drag",function(t){Nme(this,t)}).on("dragend",function(t){_yt(this,t)}))}function $me(e,t){return e[0]-t[0]}function Tyt(e,t){var r=e.selectAll(".background").data(xI);r.enter().append("rect").classed("background",!0).call(gyt).call(myt).style("pointer-events","auto").attr("transform",vyt(0,tl.verticalPadding)),r.call(wyt).attr("height",function(o){return o.height-tl.verticalPadding});var a=e.selectAll(".highlight-shadow").data(xI);a.enter().append("line").classed("highlight-shadow",!0).attr("x",-tl.bar.width/2).attr("stroke-width",tl.bar.width+tl.bar.strokeWidth).attr("stroke",t).attr("opacity",tl.bar.strokeOpacity).attr("stroke-linecap","butt"),a.attr("y1",function(o){return o.height}).call(bH);var n=e.selectAll(".highlight").data(xI);n.enter().append("line").classed("highlight",!0).attr("x",-tl.bar.width/2).attr("stroke-width",tl.bar.width-tl.bar.strokeWidth).attr("stroke",tl.bar.fillColor).attr("opacity",tl.bar.fillOpacity).attr("stroke-linecap","butt"),n.attr("y1",function(o){return o.height}).call(bH)}function Ayt(e,t){var r=e.selectAll("."+tl.cn.axisBrush).data(xI,hyt);r.enter().append("g").classed(tl.cn.axisBrush,!0),Tyt(r,t)}function Syt(e){return e.svgBrush.extent.map(function(t){return t.slice()})}function _H(e){e.filterSpecified=!1,e.svgBrush.extent=[[-1/0,1/0]]}function Myt(e){return function(r){var a=r.brush,n=Syt(a),o=n.slice();a.filter.set(o),e()}}function Ume(e){for(var t=e.slice(),r=[],a,n=t.shift();n;){for(a=n.slice();(n=t.shift())&&n[0]<=a[1];)a[1]=Math.max(a[1],n[1]);r.push(a)}return r.length===1&&r[0][0]>r[0][1]&&(r=[]),r}function kyt(){var e=[],t,r;return{set:function(a){e=a.map(function(n){return n.slice().sort(Xw)}).sort($me),e.length===1&&e[0][0]===-1/0&&e[0][1]===1/0&&(e=[[0,-1]]),t=Ume(e),r=e.reduce(function(n,o){return[Math.min(n[0],o[0]),Math.max(n[1],o[1])]},[1/0,-1/0])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function Eyt(e,t,r,a,n,o){var i=kyt();return i.set(r),{filter:i,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:a,brushCallback:Myt(n),brushEndCallback:o}}}function Cyt(e,t){if(Array.isArray(e[0])?(e=e.map(function(a){return a.sort(Xw)}),t.multiselect?e=Ume(e.sort($me)):e=[e[0]]):e=[e.sort(Xw)],t.tickvals){var r=t.tickvals.slice().sort(Xw);if(e=e.map(function(a){var n=[bI(0,r,a[0],[]),bI(1,r,a[1],[])];if(n[1]>n[0])return n}).filter(function(a){return a}),!e.length)return}return e.length>1?e:e[0]}var Hme={makeBrush:Eyt,ensureAxisBrush:Ayt,cleanRanges:Cyt},hb=bt.exports,Lyt=ac.hasColorscale,Pyt=su,Iyt=Fo.defaults,Dyt=nc,Ryt=rn.exports,Gme=Lme,zyt=Hme,wH=yI.maxDimensionCount,Fyt=iH;function Oyt(e,t,r,a,n){var o=n("line.color",r);if(Lyt(e,"line")&&hb.isArrayOrTypedArray(o)){if(o.length)return n("line.colorscale"),Pyt(e,t,a,n,{prefix:"line.",cLetter:"c"}),o.length;t.line.color=r}return 1/0}function Nyt(e,t,r,a){function n(u,f){return hb.coerce(e,t,Gme.dimensions,u,f)}var o=n("values"),i=n("visible");if(o&&o.length||(i=t.visible=!1),i){n("label"),n("tickvals"),n("ticktext"),n("tickformat");var s=n("range");t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},Ryt.setConvert(t._ax,a.layout),n("multiselect");var l=n("constraintrange");l&&(t.constraintrange=zyt.cleanRanges(l,t))}}var Byt=function(t,r,a,n){function o(f,c){return hb.coerce(t,r,Gme,f,c)}var i=t.dimensions;Array.isArray(i)&&i.length>wH&&(hb.log("parcoords traces support up to "+wH+" dimensions at the moment"),i.splice(wH));var s=Dyt(t,r,{name:"dimensions",layout:n,handleItemDefaults:Nyt}),l=Oyt(t,r,a,n,o);Iyt(r,n,o),(!Array.isArray(s)||!s.length)&&(r.visible=!1),Fyt(r,s,"values",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};hb.coerceFont(o,"labelfont",u),hb.coerceFont(o,"tickfont",u),hb.coerceFont(o,"rangefont",u),o("labelangle"),o("labelside")},$yt=bt.exports.isArrayOrTypedArray,TH=Qo,Uyt=ym.wrap,Hyt=function(t,r){var a,n;return TH.hasColorscale(r,"line")&&$yt(r.line.color)?(a=r.line.color,n=TH.extractOpts(r.line).colorscale,TH.calc(t,r,{vals:a,containerStr:"line",cLetter:"c"})):(a=Gyt(r._length),n=[[0,r.line.color],[1,r.line.color]]),Uyt({lineColor:a,cscale:n})};function Gyt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=.5;return t}var xM={},Vyt=bt.exports.isTypedArray;xM.convertTypedArray=function(e){return Vyt(e)?Array.prototype.slice.call(e):e};xM.isOrdinal=function(e){return!!e.tickvals};xM.isVisible=function(e){return e.visible||!("visible"in e)};var Vme=wU,jyt=Vme("./shaders/vertex.glsl"),qyt=Vme("./shaders/fragment.glsl"),bM=yI.maxDimensionCount,jme=bt.exports,qme=1e-6,wI=2048,Yyt=new Uint8Array(4),Yme=new Uint8Array(4),Wme={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function Wyt(e){e.read({x:0,y:0,width:1,height:1,data:Yyt})}function Xme(e,t,r,a,n){var o=e._gl;o.enable(o.SCISSOR_TEST),o.scissor(t,r,a,n),e.clear({color:[0,0,0,0],depth:1})}function Xyt(e,t,r,a,n,o){var i=o.key;function s(l){var u=Math.min(a,n-l*a);l===0&&(window.cancelAnimationFrame(r.currentRafs[i]),delete r.currentRafs[i],Xme(e,o.scissorX,o.scissorY,o.scissorWidth,o.viewBoxSize[1])),!r.clearOnly&&(o.count=2*u,o.offset=2*l*a,t(o),l*a+u<n&&(r.currentRafs[i]=window.requestAnimationFrame(function(){s(l+1)})),r.drawCompleted=!1)}r.drawCompleted||(Wyt(e),r.drawCompleted=!0),s(0)}function Zyt(e){return Math.max(qme,Math.min(1-qme,e))}function Kyt(e,t){for(var r=new Array(256),a=0;a<256;a++)r[a]=e(a/255).concat(t);return r}function AH(e,t){return(e>>>8*t)%256/255}function Jyt(e,t,r){for(var a=new Array(e*(bM+4)),n=0,o=0;o<e;o++){for(var i=0;i<bM;i++)a[n++]=i<t.length?t[i].paddedUnitValues[o]:.5;a[n++]=AH(o,2),a[n++]=AH(o,1),a[n++]=AH(o,0),a[n++]=Zyt(r[o])}return a}function Qyt(e,t,r){for(var a=new Array(t*8),n=0,o=0;o<t;o++)for(var i=0;i<2;i++)for(var s=0;s<4;s++){var l=e*4+s,u=r[o*64+l];l===63&&i===0&&(u*=-1),a[n++]=u}return a}function Zme(e){var t="0"+e;return t.substr(t.length-2)}function Kme(e){return e<bM?"p"+Zme(e+1)+"_"+Zme(e+4):"colors"}function e1t(e,t,r){for(var a=0;a<=bM;a+=4)e[Kme(a)](Qyt(a/4,t,r))}function t1t(e){for(var t={},r=0;r<=bM;r+=4)t[Kme(r)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return t}function r1t(e,t,r,a,n,o,i,s,l,u,f,c,h,v){for(var p=[[],[]],d=0;d<64;d++)p[0][d]=d===n?1:0,p[1][d]=d===o?1:0;i*=v,s*=v,l*=v,u*=v;var g=e.lines.canvasOverdrag*v,m=e.domain,y=e.canvasWidth*v,_=e.canvasHeight*v,S=e.pad.l*v,M=e.pad.b*v,w=e.layoutHeight*v,A=e.layoutWidth*v,k=e.deselectedLines.color,T=jme.extendFlat({key:f,resolution:[y,_],viewBoxPos:[i+g,s],viewBoxSize:[l,u],i0:n,i1:o,dim0A:p[0].slice(0,16),dim0B:p[0].slice(16,32),dim0C:p[0].slice(32,48),dim0D:p[0].slice(48,64),dim1A:p[1].slice(0,16),dim1B:p[1].slice(16,32),dim1C:p[1].slice(32,48),dim1D:p[1].slice(48,64),drwLayer:c,contextColor:[k[0]/255,k[1]/255,k[2]/255,k[3]<1?k[3]:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(a===t?0:i+g)+(S-g)+A*m.x[0],scissorWidth:(a===r?y-i+g:l+.5)+(a===t?i+g:0),scissorY:s+M+w*m.y[0],scissorHeight:u,viewportX:S-g+A*m.x[0],viewportY:M+w*m.y[0],viewportWidth:y,viewportHeight:_},h);return T}function Jme(e){var t=wI-1,r=Math.max(0,Math.floor(e[0]*t),0),a=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(r,a),Math.max(r,a)]}var a1t=function(e,t){var r=t.context,a=t.pick,n=t.regl,o=n._gl,i=o.getParameter(o.ALIASED_LINE_WIDTH_RANGE),s=Math.max(i[0],Math.min(i[1],t.viewModel.plotGlPixelRatio)),l={currentRafs:{},drawCompleted:!0,clearOnly:!1},u,f,c,h,v=t1t(n),p,d=n.texture(Wme),g=[];y(t);var m=n({profile:!1,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:n.prop("scissorX"),y:n.prop("scissorY"),width:n.prop("scissorWidth"),height:n.prop("scissorHeight")}},viewport:{x:n.prop("viewportX"),y:n.prop("viewportY"),width:n.prop("viewportWidth"),height:n.prop("viewportHeight")},dither:!1,vert:jyt,frag:qyt,primitive:"lines",lineWidth:s,attributes:v,uniforms:{resolution:n.prop("resolution"),viewBoxPos:n.prop("viewBoxPos"),viewBoxSize:n.prop("viewBoxSize"),dim0A:n.prop("dim0A"),dim1A:n.prop("dim1A"),dim0B:n.prop("dim0B"),dim1B:n.prop("dim1B"),dim0C:n.prop("dim0C"),dim1C:n.prop("dim1C"),dim0D:n.prop("dim0D"),dim1D:n.prop("dim1D"),loA:n.prop("loA"),hiA:n.prop("hiA"),loB:n.prop("loB"),hiB:n.prop("hiB"),loC:n.prop("loC"),hiC:n.prop("hiC"),loD:n.prop("loD"),hiD:n.prop("hiD"),palette:d,contextColor:n.prop("contextColor"),maskTexture:n.prop("maskTexture"),drwLayer:n.prop("drwLayer"),maskHeight:n.prop("maskHeight")},offset:n.prop("offset"),count:n.prop("count")});function y(k){u=k.model,f=k.viewModel,c=f.dimensions.slice(),h=c[0]?c[0].values.length:0;var T=u.lines,L=a?T.color.map(function(I,R){return R/T.color.length}):T.color,C=Jyt(h,c,L);e1t(v,h,C),!r&&!a&&(d=n.texture(jme.extendFlat({data:Kyt(u.unitToColor,255)},Wme)))}function _(k){var T,L,C,I=[[],[]];for(C=0;C<64;C++){var R=!k&&C<c.length?c[C].brush.filter.getBounds():[-1/0,1/0];I[0][C]=R[0],I[1][C]=R[1]}var B=wI*8,N=new Array(B);for(T=0;T<B;T++)N[T]=255;if(!k)for(T=0;T<c.length;T++){var D=T%8,O=(T-D)/8,$=Math.pow(2,D),Y=c[T],X=Y.brush.filter.get();if(!(X.length<2)){var ee=Jme(X[0])[1];for(L=1;L<X.length;L++){var Q=Jme(X[L]);for(C=ee+1;C<Q[0];C++)N[C*8+O]&=~$;ee=Math.max(ee,Q[1])}}}var Z={shape:[8,wI],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:N};return p?p(Z):p=n.texture(Z),{maskTexture:p,maskHeight:wI,loA:I[0].slice(0,16),loB:I[0].slice(16,32),loC:I[0].slice(32,48),loD:I[0].slice(48,64),hiA:I[1].slice(0,16),hiB:I[1].slice(16,32),hiC:I[1].slice(32,48),hiD:I[1].slice(48,64)}}function S(k,T,L){var C=k.length,I,R,B,N=1/0,D=-1/0;for(I=0;I<C;I++)k[I].dim0.canvasX<N&&(N=k[I].dim0.canvasX,R=I),k[I].dim1.canvasX>D&&(D=k[I].dim1.canvasX,B=I);C===0&&Xme(n,0,0,u.canvasWidth,u.canvasHeight);var O=_(r);for(I=0;I<C;I++){var $=k[I],Y=$.dim0.crossfilterDimensionIndex,X=$.dim1.crossfilterDimensionIndex,ee=$.canvasX,Q=$.canvasY,Z=ee+$.panelSizeX,q=$.plotGlPixelRatio;if(T||!g[Y]||g[Y][0]!==ee||g[Y][1]!==Z){g[Y]=[ee,Z];var ae=r1t(u,R,B,I,Y,X,ee,Q,$.panelSizeX,$.panelSizeY,$.dim0.crossfilterDimensionIndex,r?0:a?2:1,O,q);l.clearOnly=L;var ie=T?u.lines.blockLineCount:h;Xyt(n,m,l,ie,h,ae)}}}function M(k,T){return n.read({x:k,y:T,width:1,height:1,data:Yme}),Yme}function w(k,T,L,C){var I=new Uint8Array(4*L*C);return n.read({x:k,y:T,width:L,height:C,data:I}),I}function A(){e.style["pointer-events"]="none",d.destroy(),p&&p.destroy();for(var k in v)v[k].destroy()}return{render:S,readPixel:M,readPixels:w,destroy:A,update:y}},vu=Ra.exports,vb=bt.exports,Qme=vb.numberFormat,eye=nfe,tye=rn.exports,n1t=vb.strRotate,E0=vb.strTranslate,rye=xo,TI=xn.exports,aye=Qo,SH=ym,Kv=SH.keyFun,C0=SH.repeat,nye=SH.unwrap,Zw=xM,pi=yI,iye=Hme,i1t=a1t;function oye(e,t,r){return vb.aggNums(e,null,t,r)}function sye(e,t){return MH(oye(Math.min,e,t),oye(Math.max,e,t))}function AI(e){var t=e.range;return t?MH(t[0],t[1]):sye(e.values,e._length)}function MH(e,t){return(isNaN(e)||!isFinite(e))&&(e=0),(isNaN(t)||!isFinite(t))&&(t=0),e===t&&(e===0?(e-=1,t+=1):(e*=.9,t*=1.1)),[e,t]}function o1t(e,t){return t?function(r,a){var n=t[a];return n==null?e(r):n}:e}function s1t(e,t,r,a,n){var o=AI(r);return a?vu.scale.ordinal().domain(a.map(o1t(Qme(r.tickformat),n))).range(a.map(function(i){var s=(i-o[0])/(o[1]-o[0]);return e-t+s*(2*t-e)})):vu.scale.linear().domain(o).range([e-t,t])}function l1t(e,t){return vu.scale.linear().range([t,e-t])}function u1t(e,t){return vu.scale.linear().domain(AI(e)).range([t,1-t])}function f1t(e){if(!!e.tickvals){var t=AI(e);return vu.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(r){return(r-t[0])/(t[1]-t[0])}))}}function c1t(e){var t=e.map(function(o){return o[0]}),r=e.map(function(o){var i=eye(o[1]);return vu.rgb("rgb("+i[0]+","+i[1]+","+i[2]+")")}),a=function(o){return function(i){return i[o]}},n="rgb".split("").map(function(o){return vu.scale.linear().clamp(!0).domain(t).range(r.map(a(o)))});return function(o){return n.map(function(i){return i(o)})}}function kH(e){return e.dimensions.some(function(t){return t.brush.filterSpecified})}function h1t(e,t,r){var a=nye(t),n=a.trace,o=Zw.convertTypedArray(a.lineColor),i=n.line,s={color:eye(pi.deselectedLineColor)},l=aye.extractOpts(i),u=l.reversescale?aye.flipScale(a.cscale):a.cscale,f=n.domain,c=n.dimensions,h=e.width,v=n.labelangle,p=n.labelside,d=n.labelfont,g=n.tickfont,m=n.rangefont,y=vb.extendDeepNoArrays({},i,{color:o.map(vu.scale.linear().domain(AI({values:o,range:[l.min,l.max],_length:n._length}))),blockLineCount:pi.blockLineCount,canvasOverdrag:pi.overdrag*pi.canvasPixelRatio}),_=Math.floor(h*(f.x[1]-f.x[0])),S=Math.floor(e.height*(f.y[1]-f.y[0])),M=e.margin||{l:80,r:80,t:100,b:80},w=_,A=S;return{key:r,colCount:c.filter(Zw.isVisible).length,dimensions:c,tickDistance:pi.tickDistance,unitToColor:c1t(u),lines:y,deselectedLines:s,labelAngle:v,labelSide:p,labelFont:d,tickFont:g,rangeFont:m,layoutWidth:h,layoutHeight:e.height,domain:f,translateX:f.x[0]*h,translateY:e.height-f.y[1]*e.height,pad:M,canvasWidth:w*pi.canvasPixelRatio+2*y.canvasOverdrag,canvasHeight:A*pi.canvasPixelRatio,width:w,height:A,canvasPixelRatio:pi.canvasPixelRatio}}function v1t(e,t,r){var a=r.width,n=r.height,o=r.dimensions,i=r.canvasPixelRatio,s=function(h){return a*h/Math.max(1,r.colCount-1)},l=pi.verticalPadding/n,u=l1t(n,pi.verticalPadding),f={key:r.key,xScale:s,model:r,inBrushDrag:!1},c={};return f.dimensions=o.filter(Zw.isVisible).map(function(h,v){var p=u1t(h,l),d=c[h.label];c[h.label]=(d||0)+1;var g=h.label+(d?"__"+d:""),m=h.constraintrange,y=m&&m.length;y&&!Array.isArray(m[0])&&(m=[m]);var _=y?m.map(function(R){return R.map(p)}):[[-1/0,1/0]],S=function(){var R=f;R.focusLayer&&R.focusLayer.render(R.panels,!0);var B=kH(R);!e.contextShown()&&B?(R.contextLayer&&R.contextLayer.render(R.panels,!0),e.contextShown(!0)):e.contextShown()&&!B&&(R.contextLayer&&R.contextLayer.render(R.panels,!0,!0),e.contextShown(!1))},M=h.values;M.length>h._length&&(M=M.slice(0,h._length));var w=h.tickvals,A;function k(R,B){return{val:R,text:A[B]}}function T(R,B){return R.val-B.val}if(Array.isArray(w)&&w.length){A=h.ticktext,!Array.isArray(A)||!A.length?A=w.map(Qme(h.tickformat)):A.length>w.length?A=A.slice(0,w.length):w.length>A.length&&(w=w.slice(0,A.length));for(var L=1;L<w.length;L++)if(w[L]<w[L-1]){for(var C=w.map(k).sort(T),I=0;I<w.length;I++)w[I]=C[I].val,A[I]=C[I].text;break}}else w=void 0;return M=Zw.convertTypedArray(M),{key:g,label:h.label,tickFormat:h.tickformat,tickvals:w,ticktext:A,ordinal:Zw.isOrdinal(h),multiselect:h.multiselect,xIndex:v,crossfilterDimensionIndex:v,visibleIndex:h._index,height:n,values:M,paddedUnitValues:M.map(p),unitTickvals:w&&w.map(p),xScale:s,x:s(v),canvasX:s(v)*i,unitToPaddedPx:u,domainScale:s1t(n,pi.verticalPadding,h,w,A),ordinalScale:f1t(h),parent:f,model:r,brush:iye.makeBrush(e,y,_,function(){e.linePickActive(!1)},S,function(R){if(f.focusLayer.render(f.panels,!0),f.pickLayer&&f.pickLayer.render(f.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var B=p.invert,N=R.map(function(D){return D.map(B).sort(vb.sorterAsc)}).sort(function(D,O){return D[0]-O[0]});t.filterChanged(f.key,h._index,N)}})}}),f}function lye(e){e.classed(pi.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function d1t(){var e=!0,t=!1;return{linePickActive:function(r){return arguments.length?e=!!r:e},contextShown:function(r){return arguments.length?t=!!r:t}}}function uye(e,t){var r=t==="top"?1:-1,a=e*Math.PI/180,n=Math.sin(a),o=Math.cos(a);return{dir:r,dx:n,dy:o,degrees:e}}function EH(e,t,r){for(var a=t.panels||(t.panels=[]),n=e.data(),o=0;o<n.length-1;o++){var i=a[o]||(a[o]={}),s=n[o],l=n[o+1];i.dim0=s,i.dim1=l,i.canvasX=s.canvasX,i.panelSizeX=l.canvasX-s.canvasX,i.panelSizeY=t.model.canvasHeight,i.y=0,i.canvasY=0,i.plotGlPixelRatio=r}}function p1t(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)for(var a=e[t][r].trace,n=a.dimensions,o=0;o<n.length;o++){var i=n[o].values,s=n[o]._ax;s&&(s.range?s.range=MH(s.range[0],s.range[1]):s.range=sye(i,a._length),s.dtick||(s.dtick=.01*(Math.abs(s.range[1]-s.range[0])||1)),s.tickformat=n[o].tickformat,tye.calcTicks(s),s.cleanRange())}}function fye(e,t){return tye.tickText(e._ax,t,!1).text}function cye(e,t){if(e.ordinal)return"";var r=e.domainScale.domain(),a=r[t?r.length-1:0];return fye(e.model.dimensions[e.visibleIndex],a)}var g1t=function(t,r,a,n){var o=t._fullLayout,i=o._toppaper,s=o._glcontainer,l=t._context.plotGlPixelRatio,u=t._fullLayout.paper_bgcolor;p1t(r);var f=d1t(),c=r.filter(function(C){return nye(C).trace.visible}).map(h1t.bind(0,a)).map(v1t.bind(0,f,n));s.each(function(C,I){return vb.extendFlat(C,c[I])});var h=s.selectAll(".gl-canvas").each(function(C){C.viewModel=c[0],C.viewModel.plotGlPixelRatio=l,C.viewModel.paperColor=u,C.model=C.viewModel?C.viewModel.model:null}),v=null,p=h.filter(function(C){return C.pick});p.style("pointer-events","auto").on("mousemove",function(C){if(f.linePickActive()&&C.lineLayer&&n&&n.hover){var I=vu.event,R=this.width,B=this.height,N=vu.mouse(this),D=N[0],O=N[1];if(D<0||O<0||D>=R||O>=B)return;var $=C.lineLayer.readPixel(D,B-1-O),Y=$[3]!==0,X=Y?$[2]+256*($[1]+256*$[0]):null,ee={x:D,y:O,clientX:I.clientX,clientY:I.clientY,dataIndex:C.model.key,curveNumber:X};X!==v&&(Y?n.hover(ee):n.unhover&&n.unhover(ee),v=X)}}),h.style("opacity",function(C){return C.pick?0:1}),i.style("background","rgba(255, 255, 255, 0)");var d=i.selectAll("."+pi.cn.parcoords).data(c,Kv);d.exit().remove(),d.enter().append("g").classed(pi.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),d.attr("transform",function(C){return E0(C.model.translateX,C.model.translateY)});var g=d.selectAll("."+pi.cn.parcoordsControlView).data(C0,Kv);g.enter().append("g").classed(pi.cn.parcoordsControlView,!0),g.attr("transform",function(C){return E0(C.model.pad.l,C.model.pad.t)});var m=g.selectAll("."+pi.cn.yAxis).data(function(C){return C.dimensions},Kv);m.enter().append("g").classed(pi.cn.yAxis,!0),g.each(function(C){EH(m,C,l)}),h.each(function(C){if(C.viewModel){!C.lineLayer||n?C.lineLayer=i1t(this,C):C.lineLayer.update(C),(C.key||C.key===0)&&(C.viewModel[C.key]=C.lineLayer);var I=!C.context||n;C.lineLayer.render(C.viewModel.panels,I)}}),m.attr("transform",function(C){return E0(C.xScale(C.xIndex),0)}),m.call(vu.behavior.drag().origin(function(C){return C}).on("drag",function(C){var I=C.parent;f.linePickActive(!1),C.x=Math.max(-pi.overdrag,Math.min(C.model.width+pi.overdrag,vu.event.x)),C.canvasX=C.x*C.model.canvasPixelRatio,m.sort(function(R,B){return R.x-B.x}).each(function(R,B){R.xIndex=B,R.x=C===R?R.x:R.xScale(R.xIndex),R.canvasX=R.x*R.model.canvasPixelRatio}),EH(m,I,l),m.filter(function(R){return Math.abs(C.xIndex-R.xIndex)!==0}).attr("transform",function(R){return E0(R.xScale(R.xIndex),0)}),vu.select(this).attr("transform",E0(C.x,0)),m.each(function(R,B,N){N===C.parent.key&&(I.dimensions[B]=R)}),I.contextLayer&&I.contextLayer.render(I.panels,!1,!kH(I)),I.focusLayer.render&&I.focusLayer.render(I.panels)}).on("dragend",function(C){var I=C.parent;C.x=C.xScale(C.xIndex),C.canvasX=C.x*C.model.canvasPixelRatio,EH(m,I,l),vu.select(this).attr("transform",function(R){return E0(R.x,0)}),I.contextLayer&&I.contextLayer.render(I.panels,!1,!kH(I)),I.focusLayer&&I.focusLayer.render(I.panels),I.pickLayer&&I.pickLayer.render(I.panels,!0),f.linePickActive(!0),n&&n.axesMoved&&n.axesMoved(I.key,I.dimensions.map(function(R){return R.crossfilterDimensionIndex}))})),m.exit().remove();var y=m.selectAll("."+pi.cn.axisOverlays).data(C0,Kv);y.enter().append("g").classed(pi.cn.axisOverlays,!0),y.selectAll("."+pi.cn.axis).remove();var _=y.selectAll("."+pi.cn.axis).data(C0,Kv);_.enter().append("g").classed(pi.cn.axis,!0),_.each(function(C){var I=C.model.height/C.model.tickDistance,R=C.domainScale,B=R.domain();vu.select(this).call(vu.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(I,C.tickFormat).tickValues(C.ordinal?B:null).tickFormat(function(N){return Zw.isOrdinal(C)?N:fye(C.model.dimensions[C.visibleIndex],N)}).scale(R)),TI.font(_.selectAll("text"),C.model.tickFont)}),_.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),_.selectAll("text").style("text-shadow",rye.makeTextShadow(u)).style("cursor","default");var S=y.selectAll("."+pi.cn.axisHeading).data(C0,Kv);S.enter().append("g").classed(pi.cn.axisHeading,!0);var M=S.selectAll("."+pi.cn.axisTitle).data(C0,Kv);M.enter().append("text").classed(pi.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),M.text(function(C){return C.label}).each(function(C){var I=vu.select(this);TI.font(I,C.model.labelFont),rye.convertToTspans(I,t)}).attr("transform",function(C){var I=uye(C.model.labelAngle,C.model.labelSide),R=pi.axisTitleOffset;return(I.dir>0?"":E0(0,2*R+C.model.height))+n1t(I.degrees)+E0(-R*I.dx,-R*I.dy)}).attr("text-anchor",function(C){var I=uye(C.model.labelAngle,C.model.labelSide),R=Math.abs(I.dx),B=Math.abs(I.dy);return 2*R>B?I.dir*I.dx<0?"start":"end":"middle"});var w=y.selectAll("."+pi.cn.axisExtent).data(C0,Kv);w.enter().append("g").classed(pi.cn.axisExtent,!0);var A=w.selectAll("."+pi.cn.axisExtentTop).data(C0,Kv);A.enter().append("g").classed(pi.cn.axisExtentTop,!0),A.attr("transform",E0(0,-pi.axisExtentOffset));var k=A.selectAll("."+pi.cn.axisExtentTopText).data(C0,Kv);k.enter().append("text").classed(pi.cn.axisExtentTopText,!0).call(lye),k.text(function(C){return cye(C,!0)}).each(function(C){TI.font(vu.select(this),C.model.rangeFont)});var T=w.selectAll("."+pi.cn.axisExtentBottom).data(C0,Kv);T.enter().append("g").classed(pi.cn.axisExtentBottom,!0),T.attr("transform",function(C){return E0(0,C.model.height+pi.axisExtentOffset)});var L=T.selectAll("."+pi.cn.axisExtentBottomText).data(C0,Kv);L.enter().append("text").classed(pi.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(lye),L.text(function(C){return cye(C,!1)}).each(function(C){TI.font(vu.select(this),C.model.rangeFont)}),iye.ensureAxisBrush(y,u)},m1t=g1t,y1t=rH,hye=xM.isVisible;function vye(e,t,r){var a=t.indexOf(r),n=e.indexOf(a);return n===-1&&(n+=t.length),n}function x1t(e,t){return function(a,n){return vye(e,t,a)-vye(e,t,n)}}var dye=function(t,r){var a=t._fullLayout,n=y1t(t);if(!!n){var o={},i={},s={},l={},u=a._size;r.forEach(function(p,d){var g=p[0].trace;s[d]=g.index;var m=l[d]=g._fullInput.index;o[d]=t.data[m].dimensions,i[d]=t.data[m].dimensions.slice()});var f=function(p,d,g){var m=i[p][d],y=g.map(function(k){return k.slice()}),_="dimensions["+d+"].constraintrange",S=a._tracePreGUI[t._fullData[s[p]]._fullInput.uid];if(S[_]===void 0){var M=m.constraintrange;S[_]=M||null}var w=t._fullData[s[p]].dimensions[d];y.length?(y.length===1&&(y=y[0]),m.constraintrange=y,w.constraintrange=y.slice(),y=[y]):(delete m.constraintrange,delete w.constraintrange,y=null);var A={};A[_]=y,t.emit("plotly_restyle",[A,[l[p]]])},c=function(p){t.emit("plotly_hover",p)},h=function(p){t.emit("plotly_unhover",p)},v=function(p,d){var g=x1t(d,i[p].filter(hye));o[p].sort(g),i[p].filter(function(m){return!hye(m)}).sort(function(m){return i[p].indexOf(m)}).forEach(function(m){o[p].splice(o[p].indexOf(m),1),o[p].splice(i[p].indexOf(m),0,m)}),t.emit("plotly_restyle",[{dimensions:[o[p]]},[l[p]]])};m1t(t,r,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:f,hover:c,unhover:h,axesMoved:v})}},_M={},pye=Ra.exports,b1t=Ml.getModuleCalcData,_1t=dye,w1t=Xh;_M.name="parcoords";_M.plot=function(e){var t=b1t(e.calcdata,"parcoords")[0];t.length&&_1t(e,t)};_M.clean=function(e,t,r,a){var n=a._has&&a._has("parcoords"),o=t._has&&t._has("parcoords");n&&!o&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())};_M.toSVG=function(e){var t=e._fullLayout._glimages,r=pye.select(e).selectAll(".svg-container"),a=r.filter(function(o,i){return i===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var o=this,i=o.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:w1t.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:o.style.width,height:o.style.height})}a.each(n),window.setTimeout(function(){pye.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)};var T1t={attributes:Lme,supplyDefaults:Byt,calc:Hyt,plot:dye,colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:_M,categories:["gl","regl","noOpacity","noHover"],meta:{description:["Parallel coordinates for multidimensional exploratory data analysis.","The samples are specified in `dimensions`.","The colors are set in `line.color`."].join(" ")}},A1t=T1t,gye=cn.extendFlat,S1t=ao,mye=Ts,M1t=bo,yye=zn.hovertemplateAttrs,k1t=Fo.attributes,E1t=gye({editType:"calc"},M1t("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot",description:["Sets the shape of the paths.","If `linear`, paths are composed of straight lines.","If `hspline`, paths are composed of horizontal curved splines"].join(" ")},hovertemplate:yye({editType:"plot",arrayOk:!1},{keys:["count","probability"],description:["This value here applies when hovering over lines."].join(" ")})}),xye={domain:k1t({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:gye({},S1t.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot",description:["Sets the hover interaction mode for the parcats diagram.","If `category`, hover interaction take place per category.","If `color`, hover interactions take place per color per category.","If `dimension`, hover interactions take place across all categories per dimension."].join(" ")},hovertemplate:yye({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"],description:["This value here applies when hovering over dimensions.","Note that `*categorycount`, *colorcount* and *bandcolorcount*","are only available when `hoveron` contains the *color* flag"].join(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot",description:["Sets the drag interaction mode for categories and dimensions.","If `perpendicular`, the categories can only move along a line perpendicular to the paths.","If `freeform`, the categories can freely move on the plane.","If `fixed`, the categories and dimensions are stationary."].join(" ")},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot",description:"Sort paths so that like colors are bundled together within each category."},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot",description:["Sets the path sorting algorithm.","If `forward`, sort paths based on dimension categories from left to right.","If `backward`, sort paths based on dimensions categories from right to left."].join(" ")},labelfont:mye({editType:"calc",description:"Sets the font for the `dimension` labels."}),tickfont:mye({editType:"calc",description:"Sets the font for the `category` labels."}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc",description:"The shown name of the dimension."},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the categories in the dimension.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories in this dimension appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets alternative tick labels for the categories in this dimension.","Only has an effect if `categoryorder` is set to *array*.","Should be an array the same length as `categoryarray`","Used with `categoryorder`."].join(" ")},values:{valType:"data_array",dflt:[],editType:"calc",description:["Dimension values. `values[n]` represents the category value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated)."].join(" ")},displayindex:{valType:"integer",editType:"calc",description:["The display index of dimension, from left to right, zero indexed, defaults to dimension","index."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel categories diagram.",visible:{valType:"boolean",dflt:!0,editType:"calc",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."}},line:E1t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc",description:["The number of observations represented by each state. Defaults to 1 so that each state represents","one observation"].join(" ")},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0},wM=bt.exports,C1t=ac.hasColorscale,L1t=su,P1t=Fo.defaults,I1t=nc,bye=xye,D1t=iH;function R1t(e,t,r,a,n){n("line.shape"),n("line.hovertemplate");var o=n("line.color",a.colorway[0]);if(C1t(e,"line")&&wM.isArrayOrTypedArray(o)){if(o.length)return n("line.colorscale"),L1t(e,t,a,n,{prefix:"line.",cLetter:"c"}),o.length;t.line.color=r}return 1/0}function z1t(e,t){function r(u,f){return wM.coerce(e,t,bye.dimensions,u,f)}var a=r("values"),n=r("visible");if(a&&a.length||(n=t.visible=!1),n){r("label"),r("displayindex",t._index);var o=e.categoryarray,i=Array.isArray(o)&&o.length>0,s;i&&(s="array");var l=r("categoryorder",s);l==="array"?(r("categoryarray"),r("ticktext")):(delete e.categoryarray,delete e.ticktext),!i&&l==="array"&&(t.categoryorder="trace")}}var F1t=function(t,r,a,n){function o(f,c){return wM.coerce(t,r,bye,f,c)}var i=I1t(t,r,{name:"dimensions",handleItemDefaults:z1t}),s=R1t(t,r,a,n,o);P1t(r,n,o),(!Array.isArray(i)||!i.length)&&(r.visible=!1),D1t(r,i,"values",s),o("hoveron"),o("hovertemplate"),o("arrangement"),o("bundlecolors"),o("sortpaths"),o("counts");var l={family:n.font.family,size:Math.round(n.font.size),color:n.font.color};wM.coerceFont(o,"labelfont",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};wM.coerceFont(o,"tickfont",u)},O1t=ym.wrap,N1t=ac.hasColorscale,B1t=ih,$1t=qW,U1t=xn.exports,TM=bt.exports,H1t=gn,G1t=function(t,r){var a=TM.filterVisible(r.dimensions);if(a.length===0)return[];var n=a.map(function(T){var L;if(T.categoryorder==="trace")L=null;else if(T.categoryorder==="array")L=T.categoryarray;else{L=$1t(T.values);for(var C=!0,I=0;I<L.length;I++)if(!H1t(L[I])){C=!1;break}L.sort(C?TM.sorterAsc:void 0),T.categoryorder==="category descending"&&(L=L.reverse())}return Z1t(T.values,L)}),o,i,s;TM.isArrayOrTypedArray(r.counts)?o=r.counts:o=[r.counts],K1t(a),a.forEach(function(T,L){J1t(T,n[L])});var l=r.line,u;l?(N1t(r,"line")&&B1t(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),u=U1t.tryColorscale(l)):u=TM.identity;function f(T){var L,C;return TM.isArrayOrTypedArray(l.color)?(L=l.color[T%l.color.length],C=L):L=l.color,{color:u(L),rawColor:C}}var c=a[0].values.length,h={},v=n.map(function(T){return T.inds});s=0;var p,d;for(p=0;p<c;p++){var g=[];for(d=0;d<v.length;d++)g.push(v[d][p]);i=o[p%o.length],s+=i;var m=f(p),y=g+"-"+m.rawColor;h[y]===void 0&&(h[y]=W1t(g,m.color,m.rawColor)),X1t(h[y],p,i)}var _=a.map(function(T,L){return j1t(L,T._index,T._displayindex,T.label,s)});for(p=0;p<c;p++)for(i=o[p%o.length],d=0;d<_.length;d++){var S=_[d].containerInd,M=n[d].inds[p],w=_[d].categories;if(w[M]===void 0){var A=r.dimensions[S]._categoryarray[M],k=r.dimensions[S]._ticktext[M];w[M]=q1t(d,M,A,k)}Y1t(w[M],p,i)}return O1t(V1t(_,h,s))};function V1t(e,t,r){var a=e.map(function(n){return n.categories.length}).reduce(function(n,o){return Math.max(n,o)});return{dimensions:e,paths:t,trace:void 0,maxCats:a,count:r}}function j1t(e,t,r,a,n){return{dimensionInd:e,containerInd:t,displayInd:r,dimensionLabel:a,count:n,categories:[],dragX:null}}function q1t(e,t,r,a){return{dimensionInd:e,categoryInd:t,categoryValue:r,displayInd:t,categoryLabel:a,valueInds:[],count:0,dragY:null}}function Y1t(e,t,r){e.valueInds.push(t),e.count+=r}function W1t(e,t,r){return{categoryInds:e,color:t,rawColor:r,valueInds:[],count:0}}function X1t(e,t,r){e.valueInds.push(t),e.count+=r}function Z1t(e,t){t==null?t=[]:t=t.map(function(u){return u});var r={},a={},n=[];t.forEach(function(u,f){r[u]=0,a[u]=f});for(var o=0;o<e.length;o++){var i=e[o],s;r[i]===void 0?(r[i]=1,s=t.push(i)-1,a[i]=s):(r[i]++,s=a[i]),n.push(s)}var l=t.map(function(u){return r[u]});return{uniqueValues:t,uniqueCounts:l,inds:n}}function K1t(e){var t=e.map(function(a){return a.displayindex}),r;if(Q1t(t))for(r=0;r<e.length;r++)e[r]._displayindex=e[r].displayindex;else for(r=0;r<e.length;r++)e[r]._displayindex=r}function J1t(e,t){e._categoryarray=t.uniqueValues,e.ticktext===null||e.ticktext===void 0?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var r=e._ticktext.length;r<t.uniqueValues.length;r++)e._ticktext.push(t.uniqueValues[r])}function Q1t(e){for(var t=new Array(e.length),r=0;r<e.length;r++){if(e[r]<0||e[r]>=e.length||t[e[r]]!==void 0)return!1;t[e[r]]=!0}return!0}var wi=Ra.exports,ext=J2.interpolateNumber,txt=P5,AM=Rs,l1=bt.exports,SM=l1.strTranslate,_ye=xn.exports,CH=Hl.exports,wye=xo;function rxt(e,t,r,a){var n=e.map(yxt.bind(0,t,r)),o=a.selectAll("g.parcatslayer").data([null]);o.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var i=o.selectAll("g.trace.parcats").data(n,xm),s=i.enter().append("g").attr("class","trace parcats");i.attr("transform",function(y){return SM(y.x,y.y)}),s.append("g").attr("class","paths");var l=i.select("g.paths"),u=l.selectAll("path.path").data(function(y){return y.paths},xm);u.attr("fill",function(y){return y.model.color});var f=u.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(y){return y.model.color}).attr("fill-opacity",0);IH(f),u.attr("d",function(y){return y.svgD}),f.empty()||u.sort(LH),u.exit().remove(),u.on("mouseover",nxt).on("mouseout",ixt).on("click",oxt),s.append("g").attr("class","dimensions");var c=i.select("g.dimensions"),h=c.selectAll("g.dimension").data(function(y){return y.dimensions},xm);h.enter().append("g").attr("class","dimension"),h.attr("transform",function(y){return SM(y.x,0)}),h.exit().remove();var v=h.selectAll("g.category").data(function(y){return y.categories},xm),p=v.enter().append("g").attr("class","category");v.attr("transform",function(y){return SM(0,y.y)}),p.append("rect").attr("class","catrect").attr("pointer-events","none"),v.select("rect.catrect").attr("fill","none").attr("width",function(y){return y.width}).attr("height",function(y){return y.height}),Tye(p);var d=v.selectAll("rect.bandrect").data(function(y){return y.bands},xm);d.each(function(){l1.raiseToTop(this)}),d.attr("fill",function(y){return y.color});var g=d.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(y){return y.color}).attr("fill-opacity",0);d.attr("fill",function(y){return y.color}).attr("width",function(y){return y.width}).attr("height",function(y){return y.height}).attr("y",function(y){return y.y}).attr("cursor",function(y){return y.parcatsViewModel.arrangement==="fixed"?"default":y.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),RH(g),d.exit().remove(),p.append("text").attr("class","catlabel").attr("pointer-events","none");var m=t._fullLayout.paper_bgcolor;v.select("text.catlabel").attr("text-anchor",function(y){return MM(y)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",wye.makeTextShadow(m)).style("fill","rgb(0, 0, 0)").attr("x",function(y){return MM(y)?y.width+5:-5}).attr("y",function(y){return y.height/2}).text(function(y){return y.model.categoryLabel}).each(function(y){_ye.font(wi.select(this),y.parcatsViewModel.categorylabelfont),wye.convertToTspans(wi.select(this),t)}),p.append("text").attr("class","dimlabel"),v.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(y){return y.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(y){return y.width/2}).attr("y",-5).text(function(y,_){return _===0?y.parcatsViewModel.model.dimensions[y.model.dimensionInd].dimensionLabel:null}).each(function(y){_ye.font(wi.select(this),y.parcatsViewModel.labelfont)}),v.selectAll("rect.bandrect").on("mouseover",vxt).on("mouseout",dxt),v.exit().remove(),h.call(wi.behavior.drag().origin(function(y){return{x:y.x,y:0}}).on("dragstart",pxt).on("drag",gxt).on("dragend",mxt)),i.each(function(y){y.traceSelection=wi.select(this),y.pathSelection=wi.select(this).selectAll("g.paths").selectAll("path.path"),y.dimensionSelection=wi.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),i.exit().remove()}var axt=function(e,t,r,a){rxt(r,e,a,t)};function xm(e){return e.key}function MM(e){var t=e.parcatsViewModel.dimensions.length,r=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===r}function LH(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function nxt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){l1.raiseToTop(this),DH(wi.select(this));var t=kM(e),r=PH(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:wi.event,constraints:r}),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var a=wi.mouse(this)[0],n=e.parcatsViewModel.graphDiv,o=e.parcatsViewModel.trace,i=n._fullLayout,s=i._paperdiv.node().getBoundingClientRect(),l=e.parcatsViewModel.graphDiv.getBoundingClientRect(),u,f,c;for(c=0;c<e.leftXs.length-1;c++)if(e.leftXs[c]+e.dimWidths[c]-2<=a&&a<=e.leftXs[c+1]+2){var h=e.parcatsViewModel.dimensions[c],v=e.parcatsViewModel.dimensions[c+1];u=(h.x+h.width+v.x)/2,f=(e.topYs[c]+e.topYs[c+1]+e.height)/2;break}var p=e.parcatsViewModel.x+u,d=e.parcatsViewModel.y+f,g=CH.mostReadable(e.model.color,["black","white"]),m=e.model.count,y=m/e.parcatsViewModel.model.count,_={countLabel:m,probabilityLabel:y.toFixed(3)},S=[];e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&S.push(["Count:",_.countLabel].join(" ")),e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&S.push(["P:",_.probabilityLabel].join(" "));var M=S.join("<br>"),w=wi.mouse(n)[0];AM.loneHover({trace:o,x:p-s.left+l.left,y:d-s.top+l.top,text:M,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:g,idealAlign:w<p?"right":"left",hovertemplate:(o.line||{}).hovertemplate,hovertemplateLabels:_,eventData:[{data:o._input,fullData:o,count:m,probability:y}]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:n})}}}function ixt(e){if(!e.parcatsViewModel.dragDimension&&(IH(wi.select(this)),AM.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(LH),e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var t=kM(e),r=PH(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:wi.event,constraints:r})}}function kM(e){for(var t=[],r=Sye(e.parcatsViewModel),a=0;a<e.model.valueInds.length;a++){var n=e.model.valueInds[a];t.push({curveNumber:r,pointNumber:n})}return t}function PH(e){for(var t={},r=e.parcatsViewModel.model.dimensions,a=0;a<r.length;a++){var n=r[a],o=n.categories[e.model.categoryInds[a]];t[n.containerInd]=o.categoryValue}return e.model.rawColor!==void 0&&(t.color=e.model.rawColor),t}function oxt(e){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=kM(e),r=PH(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:wi.event,constraints:r})}}function IH(e){e.attr("fill",function(t){return t.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function DH(e){e.attr("fill-opacity",.8).attr("stroke",function(t){return CH.mostReadable(t.model.color,["black","white"])}).attr("stroke-width",.3)}function sxt(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function Tye(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function lxt(e){e.attr("stroke","black").attr("stroke-width",1.5)}function RH(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function SI(e){var t=e.parcatsViewModel.pathSelection,r=e.categoryViewModel.model.dimensionInd,a=e.categoryViewModel.model.categoryInd;return t.filter(function(n){return n.model.categoryInds[r]===a&&n.model.color===e.color})}function uxt(e){var t=wi.select(e.parentNode).selectAll("rect.bandrect");t.each(function(r){var a=SI(r);DH(a),a.each(function(){l1.raiseToTop(this)})}),sxt(wi.select(e.parentNode))}function fxt(e){var t=wi.select(e).datum(),r=SI(t);DH(r),r.each(function(){l1.raiseToTop(this)}),wi.select(e.parentNode).selectAll("rect.bandrect").filter(function(a){return a.color===t.color}).each(function(){l1.raiseToTop(this),lxt(wi.select(this))})}function zH(e,t,r){var a=wi.select(e).datum(),n=a.categoryViewModel.model,o=a.parcatsViewModel.graphDiv,i=wi.select(e.parentNode).selectAll("rect.bandrect"),s=[];i.each(function(u){var f=SI(u);f.each(function(c){Array.prototype.push.apply(s,kM(c))})});var l={};l[n.dimensionInd]=n.categoryValue,o.emit(t,{points:s,event:r,constraints:l})}function FH(e,t,r){var a=wi.select(e).datum(),n=a.categoryViewModel.model,o=a.parcatsViewModel.graphDiv,i=SI(a),s=[];i.each(function(u){Array.prototype.push.apply(s,kM(u))});var l={};l[n.dimensionInd]=n.categoryValue,a.rawColor!==void 0&&(l.color=a.rawColor),o.emit(t,{points:s,event:r,constraints:l})}function Aye(e,t,r){e._fullLayout._calcInverseTransform(e);var a=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,o=wi.select(r.parentNode).select("rect.catrect"),i=o.node().getBoundingClientRect(),s=o.datum(),l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=i.top+i.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=i.left,v="left"):(h=i.left+i.width,v="right");var p=s.model.count,d=s.model.categoryLabel,g=p/s.parcatsViewModel.model.count,m={countLabel:p,categoryLabel:d,probabilityLabel:g.toFixed(3)},y=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&y.push(["Count:",m.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&y.push(["P("+m.categoryLabel+"):",m.probabilityLabel].join(" "));var _=y.join("<br>");return{trace:f,x:a*(h-t.left),y:n*(c-t.top),text:_,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:m,eventData:[{data:f._input,fullData:f,count:p,category:d,probability:g}]}}function cxt(e,t,r){var a=[];return wi.select(r.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var n=this;a.push(Aye(e,t,n))}),a}function hxt(e,t,r){e._fullLayout._calcInverseTransform(e);var a=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,o=r.getBoundingClientRect(),i=wi.select(r).datum(),s=i.categoryViewModel,l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=o.y+o.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=o.left,v="left"):(h=o.left+o.width,v="right");var p=s.model.categoryLabel,d=i.parcatsViewModel.model.count,g=0;i.categoryViewModel.bands.forEach(function(L){L.color===i.color&&(g+=L.count)});var m=s.model.count,y=0;l.pathSelection.each(function(L){L.model.color===i.color&&(y+=L.model.count)});var _=g/d,S=g/y,M=g/m,w={countLabel:d,categoryLabel:p,probabilityLabel:_.toFixed(3)},A=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&A.push(["Count:",w.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(A.push("P(color \u2229 "+p+"): "+w.probabilityLabel),A.push("P("+p+" | color): "+S.toFixed(3)),A.push("P(color | "+p+"): "+M.toFixed(3)));var k=A.join("<br>"),T=CH.mostReadable(i.color,["black","white"]);return{trace:f,x:a*(h-t.left),y:n*(c-t.top),text:k,color:i.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:T,fontSize:10,idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:w,eventData:[{data:f._input,fullData:f,category:p,count:d,probability:_,categorycount:m,colorcount:y,bandcolorcount:g}]}}function vxt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=wi.mouse(this)[1];if(t<-1)return;var r=e.parcatsViewModel.graphDiv,a=r._fullLayout,n=a._paperdiv.node().getBoundingClientRect(),o=e.parcatsViewModel.hoveron,i=this;if(o==="color"?(fxt(i),FH(i,"plotly_hover",wi.event)):(uxt(i),zH(i,"plotly_hover",wi.event)),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var s;o==="category"?s=Aye(r,n,i):o==="color"?s=hxt(r,n,i):o==="dimension"&&(s=cxt(r,n,i)),s&&AM.loneHover(s,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:r})}}}function dxt(e){var t=e.parcatsViewModel;if(!t.dragDimension&&(IH(t.pathSelection),Tye(t.dimensionSelection.selectAll("g.category")),RH(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),AM.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(LH),t.hoverinfoItems.indexOf("skip")===-1)){var r=e.parcatsViewModel.hoveron,a=this;r==="color"?FH(a,"plotly_unhover",wi.event):zH(a,"plotly_unhover",wi.event)}}function pxt(e){e.parcatsViewModel.arrangement!=="fixed"&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(t){return t.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,wi.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var r=wi.mouse(this)[0],a=wi.mouse(this)[1];-2<=r&&r<=t.width+2&&-2<=a&&a<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(n){return n.displayInd}),t.model.dragY=t.y,l1.raiseToTop(this.parentNode),wi.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<a&&a<=n.y+n.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,AM.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function gxt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&(e.dragHasMoved=!0,e.dragDimensionDisplayInd!==null)){var t=e.dragDimensionDisplayInd,r=t-1,a=t+1,n=e.parcatsViewModel.dimensions[t];if(e.dragCategoryDisplayInd!==null){var o=n.categories[e.dragCategoryDisplayInd];o.model.dragY+=wi.event.dy;var i=o.model.dragY,s=o.model.displayInd,l=n.categories,u=l[s-1],f=l[s+1];u!==void 0&&i<u.y+u.height/2&&(o.model.displayInd=u.model.displayInd,u.model.displayInd=s),f!==void 0&&i+o.height>f.y+f.height/2&&(o.model.displayInd=f.model.displayInd,f.model.displayInd=s),e.dragCategoryDisplayInd=o.model.displayInd}if(e.dragCategoryDisplayInd===null||e.parcatsViewModel.arrangement==="freeform"){n.model.dragX=wi.event.x;var c=e.parcatsViewModel.dimensions[r],h=e.parcatsViewModel.dimensions[a];c!==void 0&&n.model.dragX<c.x+c.width&&(n.model.displayInd=c.model.displayInd,c.model.displayInd=t),h!==void 0&&n.model.dragX+n.width>h.x&&(n.model.displayInd=h.model.displayInd,h.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=n.model.displayInd}NH(e.parcatsViewModel),OH(e.parcatsViewModel),kye(e.parcatsViewModel),Mye(e.parcatsViewModel)}}function mxt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&e.dragDimensionDisplayInd!==null){wi.select(this).selectAll("text").attr("font-weight","normal");var t={},r=Sye(e.parcatsViewModel),a=e.parcatsViewModel.model.dimensions.map(function(h){return h.displayInd}),n=e.initialDragDimensionDisplayInds.some(function(h,v){return h!==a[v]});n&&a.forEach(function(h,v){var p=e.parcatsViewModel.model.dimensions[v].containerInd;t["dimensions["+p+"].displayindex"]=h});var o=!1;if(e.dragCategoryDisplayInd!==null){var i=e.model.categories.map(function(h){return h.displayInd});if(o=e.initialDragCategoryDisplayInds.some(function(h,v){return h!==i[v]}),o){var s=e.model.categories.slice().sort(function(h,v){return h.displayInd-v.displayInd}),l=s.map(function(h){return h.categoryValue}),u=s.map(function(h){return h.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[l],t["dimensions["+e.model.containerInd+"].ticktext"]=[u],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!e.dragHasMoved&&e.potentialClickBand&&(e.parcatsViewModel.hoveron==="color"?FH(e.potentialClickBand,"plotly_click",wi.event.sourceEvent):zH(e.potentialClickBand,"plotly_click",wi.event.sourceEvent)),e.model.dragX=null,e.dragCategoryDisplayInd!==null){var f=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];f.model.dragY=null,e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,NH(e.parcatsViewModel),OH(e.parcatsViewModel);var c=wi.transition().duration(300).ease("cubic-in-out");c.each(function(){kye(e.parcatsViewModel,!0),Mye(e.parcatsViewModel,!0)}).each("end",function(){(n||o)&&txt.restyle(e.parcatsViewModel.graphDiv,t,[r])})}}function Sye(e){for(var t,r=e.graphDiv._fullData,a=0;a<r.length;a++)if(e.key===r[a].uid){t=a;break}return t}function Mye(e,t){t===void 0&&(t=!1);function r(a){return t?a.transition():a}e.pathSelection.data(function(a){return a.paths},xm),r(e.pathSelection).attr("d",function(a){return a.svgD})}function kye(e,t){t===void 0&&(t=!1);function r(l){return t?l.transition():l}e.dimensionSelection.data(function(l){return l.dimensions},xm);var a=e.dimensionSelection.selectAll("g.category").data(function(l){return l.categories},xm);r(e.dimensionSelection).attr("transform",function(l){return SM(l.x,0)}),r(a).attr("transform",function(l){return SM(0,l.y)});var n=a.select(".dimlabel");n.text(function(l,u){return u===0?l.parcatsViewModel.model.dimensions[l.model.dimensionInd].dimensionLabel:null});var o=a.select(".catlabel");o.attr("text-anchor",function(l){return MM(l)?"start":"end"}).attr("x",function(l){return MM(l)?l.width+5:-5}).each(function(l){var u,f;MM(l)?(u=l.width+5,f="start"):(u=-5,f="end"),wi.select(this).selectAll("tspan").attr("x",u).attr("text-anchor",f)});var i=a.selectAll("rect.bandrect").data(function(l){return l.bands},xm),s=i.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(l){return l.color}).attr("fill-opacity",0);i.attr("fill",function(l){return l.color}).attr("width",function(l){return l.width}).attr("height",function(l){return l.height}).attr("y",function(l){return l.y}),RH(s),i.each(function(){l1.raiseToTop(this)}),i.exit().remove()}function yxt(e,t,r){var a=r[0],n=t.margin||{l:80,r:80,t:100,b:80},o=a.trace,i=o.domain,s=t.width,l=t.height,u=Math.floor(s*(i.x[1]-i.x[0])),f=Math.floor(l*(i.y[1]-i.y[0])),c=i.x[0]*s+n.l,h=t.height-i.y[1]*t.height+n.t,v=o.line.shape,p;o.hoverinfo==="all"?p=["count","probability"]:p=(o.hoverinfo||"").split("+");var d={trace:o,key:o.uid,model:a,x:c,y:h,width:u,height:f,hoveron:o.hoveron,hoverinfoItems:p,arrangement:o.arrangement,bundlecolors:o.bundlecolors,sortpaths:o.sortpaths,labelfont:o.labelfont,categorylabelfont:o.tickfont,pathShape:v,dragDimension:null,margin:n,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return a.dimensions&&(NH(d),OH(d)),d}function Eye(e,t,r,a,n){var o=[],i=[],s,l;for(l=0;l<r.length-1;l++)s=ext(r[l]+e[l],e[l+1]),o.push(s(n)),i.push(s(1-n));var u="M "+e[0]+","+t[0];for(u+="l"+r[0]+",0 ",l=1;l<r.length;l++)u+="C"+o[l-1]+","+t[l-1]+" "+i[l-1]+","+t[l]+" "+e[l]+","+t[l],u+="l"+r[l]+",0 ";for(u+="l0,"+a+" ",u+="l -"+r[r.length-1]+",0 ",l=r.length-2;l>=0;l--)u+="C"+i[l]+","+(t[l+1]+a)+" "+o[l]+","+(t[l]+a)+" "+(e[l]+r[l])+","+(t[l]+a),u+="l-"+r[l]+",0 ";return u+="Z",u}function OH(e){var t=e.dimensions,r=e.model,a=t.map(function(R){return R.categories.map(function(B){return B.y})}),n=e.model.dimensions.map(function(R){return R.categories.map(function(B){return B.displayInd})}),o=e.model.dimensions.map(function(R){return R.displayInd}),i=e.dimensions.map(function(R){return R.model.dimensionInd}),s=t.map(function(R){return R.x}),l=t.map(function(R){return R.width}),u=[];for(var f in r.paths)r.paths.hasOwnProperty(f)&&u.push(r.paths[f]);function c(R){var B=R.categoryInds.map(function(D,O){return n[O][D]}),N=i.map(function(D){return B[D]});return N}u.sort(function(R,B){var N=c(R),D=c(B);return e.sortpaths==="backward"&&(N.reverse(),D.reverse()),N.push(R.valueInds[0]),D.push(B.valueInds[0]),e.bundlecolors&&(N.unshift(R.rawColor),D.unshift(B.rawColor)),N<D?-1:N>D?1:0});for(var h=new Array(u.length),v=t[0].model.count,p=t[0].categories.map(function(R){return R.height}).reduce(function(R,B){return R+B}),d=0;d<u.length;d++){var g=u[d],m;v>0?m=p*(g.count/v):m=0;for(var y=new Array(a.length),_=0;_<g.categoryInds.length;_++){var S=g.categoryInds[_],M=n[_][S],w=o[_];y[w]=a[w][M],a[w][M]+=m;var A=e.dimensions[w].categories[M],k=A.bands.length,T=A.bands[k-1];if(T===void 0||g.rawColor!==T.rawColor){var L=T===void 0?0:T.y+T.height;A.bands.push({key:L,color:g.color,rawColor:g.rawColor,height:m,width:A.width,count:g.count,y:L,categoryViewModel:A,parcatsViewModel:e})}else{var C=A.bands[k-1];C.height+=m,C.count+=g.count}}var I;e.pathShape==="hspline"?I=Eye(s,y,l,m,.5):I=Eye(s,y,l,m,0),h[d]={key:g.valueInds[0],model:g,height:m,leftXs:s,topYs:y,dimWidths:l,svgD:I,parcatsViewModel:e}}e.paths=h}function NH(e){var t=e.model.dimensions.map(function(i){return{displayInd:i.displayInd,dimensionInd:i.dimensionInd}});t.sort(function(i,s){return i.displayInd-s.displayInd});var r=[];for(var a in t){var n=t[a].dimensionInd,o=e.model.dimensions[n];r.push(xxt(e,o))}e.dimensions=r}function xxt(e,t){var r=40,a=16,n=e.model.dimensions.length,o=t.displayInd,i,s,l;n>1?i=(e.width-2*r-a)/(n-1):i=0,s=r,l=s+i*o;var u=[],f=e.model.maxCats,c=t.categories.length,h=8,v=t.count,p=e.height-h*(f-1),d,g,m,y,_,S=(f-c)*h/2,M=t.categories.map(function(w){return{displayInd:w.displayInd,categoryInd:w.categoryInd}});for(M.sort(function(w,A){return w.displayInd-A.displayInd}),_=0;_<c;_++)y=M[_].categoryInd,g=t.categories[y],v>0?d=g.count/v*p:d=0,m={key:g.valueInds[0],model:g,width:a,height:d,y:g.dragY!==null?g.dragY:S,bands:[],parcatsViewModel:e},S=S+d+h,u.push(m);return{key:t.dimensionInd,x:t.dragX!==null?t.dragX:l,y:0,width:a,model:t,categories:u,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var bxt=axt,Cye=function(t,r,a,n){var o=t._fullLayout,i=o._paper,s=o._size;bxt(t,i,r,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}})},MI={},_xt=Ml.getModuleCalcData,wxt=Cye,Lye="parcats";MI.name=Lye;MI.plot=function(e,t,r,a){var n=_xt(e.calcdata,Lye);if(n.length){var o=n[0];wxt(e,o)}};MI.clean=function(e,t,r,a){var n=a._has&&a._has("parcats"),o=t._has&&t._has("parcats");n&&!o&&a._paperdiv.selectAll(".parcats").remove()};var Txt={attributes:xye,supplyDefaults:F1t,calc:G1t,plot:Cye,colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:MI,categories:["noOpacity"],meta:{description:["Parallel categories diagram for multidimensional categorical data."].join(" ")}},Axt=Txt,kI={exports:{}},Sxt=L_,Pye="1.10.1",Iye='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',Dye=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',Iye].join(" "),Rye=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),Mxt=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),zye={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:Iye,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:Dye,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:Dye,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:Rye,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:Rye,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:Mxt,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},Fye=Sxt(zye),db={requiredVersion:Pye,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:zye,styleValuesNonMapbox:Fye,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+Pye+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",Fye.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}},Oye=bt.exports,Nye=Oa.exports.defaultLine,kxt=Fo.attributes,Ext=Ts,Cxt=Cl.textposition,Lxt=Jo.overrideAll,Pxt=si.templatedArray,Kw=db,Bye=Ext({description:["Sets the icon text font (color=mapbox.layer.paint.text-color, size=mapbox.layer.layout.text-size).","Has an effect only when `type` is set to *symbol*."].join(" ")});Bye.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var Ixt=kI.exports=Lxt({_arrayAttrRegexps:[Oye.counterRegex("mapbox",".layers",!0)],domain:kxt({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0,description:["Sets the mapbox access token to be used for this mapbox map.","Alternatively, the mapbox access token can be set in the","configuration options under `mapboxAccessToken`.","Note that accessToken are only required when `style`","(e.g with values :",Kw.styleValuesMapbox.join(", "),")","and/or a layout layer references the Mapbox server."].join(" ")},style:{valType:"any",values:Kw.styleValuesMapbox.concat(Kw.styleValuesNonMapbox),dflt:Kw.styleValueDflt,description:["Defines the map layers that are rendered by default below the trace layers defined in `data`,","which are themselves by default rendered below the layers defined in `layout.mapbox.layers`.","","These layers can be defined either explicitly as a Mapbox Style object which can contain multiple","layer definitions that load data from any public or private Tile Map Service (TMS or XYZ) or Web Map Service (WMS)","or implicitly by using one of the built-in style objects which use WMSes which do not require any","access tokens, or by using a default Mapbox style or custom Mapbox style URL, both of","which require a Mapbox access token","","Note that Mapbox access token can be set in the `accesstoken` attribute","or in the `mapboxAccessToken` config option.","","Mapbox Style objects are of the form described in the Mapbox GL JS documentation available at","https://docs.mapbox.com/mapbox-gl-js/style-spec","","The built-in plotly.js styles objects are:",Kw.styleValuesNonMapbox.join(", "),"","The built-in Mapbox styles are:",Kw.styleValuesMapbox.join(", "),"","Mapbox style URLs are of the form: mapbox://mapbox.mapbox-<name>-<version>"].join(" ")},center:{lon:{valType:"number",dflt:0,description:"Sets the longitude of the center of the map (in degrees East)."},lat:{valType:"number",dflt:0,description:"Sets the latitude of the center of the map (in degrees North)."}},zoom:{valType:"number",dflt:1,description:"Sets the zoom level of the map (mapbox.zoom)."},bearing:{valType:"number",dflt:0,description:"Sets the bearing angle of the map in degrees counter-clockwise from North (mapbox.bearing)."},pitch:{valType:"number",dflt:0,description:["Sets the pitch angle of the map","(in degrees, where *0* means perpendicular to the surface of the map) (mapbox.pitch)."].join(" ")},layers:Pxt("layer",{visible:{valType:"boolean",dflt:!0,description:["Determines whether this layer is displayed"].join(" ")},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson",description:["Sets the source type for this layer,","that is the type of the layer data."].join(" ")},source:{valType:"any",description:["Sets the source data for this layer (mapbox.layer.source).","When `sourcetype` is set to *geojson*, `source` can be a URL to a GeoJSON","or a GeoJSON object.","When `sourcetype` is set to *vector* or *raster*, `source` can be a URL or","an array of tile URLs.","When `sourcetype` is set to *image*, `source` can be a URL to an image."].join(" ")},sourcelayer:{valType:"string",dflt:"",description:["Specifies the layer to use from a vector tile source (mapbox.layer.source-layer).","Required for *vector* source type that supports multiple layers."].join(" ")},sourceattribution:{valType:"string",description:["Sets the attribution for this source."].join(" ")},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle",description:["Sets the layer type,","that is the how the layer data set in `source` will be rendered","With `sourcetype` set to *geojson*, the following values are allowed:","*circle*, *line*, *fill* and *symbol*.","but note that *line* and *fill* are not compatible with Point","GeoJSON geometries.","With `sourcetype` set to *vector*, the following values are allowed:"," *circle*, *line*, *fill* and *symbol*.","With `sourcetype` set to *raster* or `*image*`, only the *raster* value is allowed."].join(" ")},coordinates:{valType:"any",description:["Sets the coordinates array contains [longitude, latitude] pairs","for the image corners listed in clockwise order:","top left, top right, bottom right, bottom left.","Only has an effect for *image* `sourcetype`."].join(" ")},below:{valType:"string",description:["Determines if the layer will be inserted","before the layer with the specified ID.","If omitted or set to '',","the layer will be inserted above every existing layer."].join(" ")},color:{valType:"color",dflt:Nye,description:["Sets the primary layer color.","If `type` is *circle*, color corresponds to the circle color (mapbox.layer.paint.circle-color)","If `type` is *line*, color corresponds to the line color (mapbox.layer.paint.line-color)","If `type` is *fill*, color corresponds to the fill color (mapbox.layer.paint.fill-color)","If `type` is *symbol*, color corresponds to the icon color (mapbox.layer.paint.icon-color)"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the layer.","If `type` is *circle*, opacity corresponds to the circle opacity (mapbox.layer.paint.circle-opacity)","If `type` is *line*, opacity corresponds to the line opacity (mapbox.layer.paint.line-opacity)","If `type` is *fill*, opacity corresponds to the fill opacity (mapbox.layer.paint.fill-opacity)","If `type` is *symbol*, opacity corresponds to the icon/text opacity (mapbox.layer.paint.text-opacity)"].join(" ")},minzoom:{valType:"number",min:0,max:24,dflt:0,description:["Sets the minimum zoom level (mapbox.layer.minzoom).","At zoom levels less than the minzoom, the layer will be hidden."].join(" ")},maxzoom:{valType:"number",min:0,max:24,dflt:24,description:["Sets the maximum zoom level (mapbox.layer.maxzoom).","At zoom levels equal to or greater than the maxzoom, the layer will be hidden."].join(" ")},circle:{radius:{valType:"number",dflt:15,description:["Sets the circle radius (mapbox.layer.paint.circle-radius).","Has an effect only when `type` is set to *circle*."].join(" ")}},line:{width:{valType:"number",dflt:2,description:["Sets the line width (mapbox.layer.paint.line-width).","Has an effect only when `type` is set to *line*."].join(" ")},dash:{valType:"data_array",description:["Sets the length of dashes and gaps (mapbox.layer.paint.line-dasharray).","Has an effect only when `type` is set to *line*."].join(" ")}},fill:{outlinecolor:{valType:"color",dflt:Nye,description:["Sets the fill outline color (mapbox.layer.paint.fill-outline-color).","Has an effect only when `type` is set to *fill*."].join(" ")}},symbol:{icon:{valType:"string",dflt:"marker",description:["Sets the symbol icon image (mapbox.layer.layout.icon-image).","Full list: https://www.mapbox.com/maki-icons/"].join(" ")},iconsize:{valType:"number",dflt:10,description:["Sets the symbol icon size (mapbox.layer.layout.icon-size).","Has an effect only when `type` is set to *symbol*."].join(" ")},text:{valType:"string",dflt:"",description:["Sets the symbol text (mapbox.layer.layout.text-field)."].join(" ")},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point",description:["Sets the symbol and/or text placement (mapbox.layer.layout.symbol-placement).","If `placement` is *point*, the label is placed where the geometry is located","If `placement` is *line*, the label is placed along the line of the geometry","If `placement` is *line-center*, the label is placed on the center of the geometry"].join(" ")},textfont:Bye,textposition:Oye.extendFlat({},Cxt,{arrayOk:!1})}})},"plot","from-root");Ixt.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view:","`center`, `zoom`, `bearing`, `pitch`. Defaults to `layout.uirevision`."].join(" ")};var Dxt=zn.hovertemplateAttrs,Rxt=zn.texttemplateAttrs,EM=xS,pb=Cl,$ye=kI.exports,zxt=ao,Fxt=bo,CM=cn.extendFlat,Oxt=Jo.overrideAll,Uye=EM.line,LM=EM.marker,BH=Oxt({lon:EM.lon,lat:EM.lat,mode:CM({},pb.mode,{dflt:"markers",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover."].join(" ")}),text:CM({},pb.text,{description:["Sets text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:Rxt({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:CM({},pb.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:Uye.color,width:Uye.width},connectgaps:pb.connectgaps,marker:CM({symbol:{valType:"string",dflt:"circle",arrayOk:!0,description:["Sets the marker symbol.","Full list: https://www.mapbox.com/maki-icons/","Note that the array `marker.color` and `marker.size`","are only available for *circle* symbols."].join(" ")},angle:{valType:"number",dflt:"auto",arrayOk:!0,description:["Sets the marker orientation from true North, in degrees clockwise.","When using the *auto* default, no rotation would be applied","in perspective views which is different from using a zero angle."].join(" ")},allowoverlap:{valType:"boolean",dflt:!1,description:["Flag to draw all symbols, even if they overlap."].join(" ")},opacity:LM.opacity,size:LM.size,sizeref:LM.sizeref,sizemin:LM.sizemin,sizemode:LM.sizemode},Fxt("marker")),fill:EM.fill,fillcolor:pb.fillcolor,textfont:$ye.layers.symbol.textfont,textposition:$ye.layers.symbol.textposition,below:{valType:"string",description:["Determines if this scattermapbox trace's layers are to be inserted","before the layer with the specified ID.","By default, scattermapbox layers are inserted","above all the base layers.","To place the scattermapbox layers above every other layer, set `below` to *''*."].join(" ")},selected:{marker:pb.selected.marker},unselected:{marker:pb.unselected.marker},hoverinfo:CM({},zxt.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:Dxt()},"calc","nested"),EI=bt.exports,$H=Ro,Nxt=Wd,Bxt=n0,$xt=i0,Uxt=Gg,Hxt=BH,Gxt=function(t,r,a,n){function o(l,u){return EI.coerce(t,r,Hxt,l,u)}var i=Vxt(t,r,o);if(!i){r.visible=!1;return}if(o("text"),o("texttemplate"),o("hovertext"),o("hovertemplate"),o("mode"),o("below"),$H.hasLines(r)&&(Bxt(t,r,a,n,o,{noDash:!0}),o("connectgaps")),$H.hasMarkers(r)){Nxt(t,r,a,n,o,{noLine:!0}),o("marker.allowoverlap"),o("marker.angle");var s=r.marker;s.symbol!=="circle"&&(EI.isArrayOrTypedArray(s.size)&&(s.size=s.size[0]),EI.isArrayOrTypedArray(s.color)&&(s.color=s.color[0]))}$H.hasText(r)&&$xt(t,r,n,o,{noSelect:!0}),o("fill"),r.fill!=="none"&&Uxt(t,r,a,o),EI.coerceSelectionMarkerOpacity(r,o)};function Vxt(e,t,r){var a=r("lon")||[],n=r("lat")||[],o=Math.min(a.length,n.length);return t._length=o,o}var Hye=rn.exports,Gye=function(t,r,a){var n={},o=a[r.subplot]._subplot,i=o.mockAxis,s=t.lonlat;return n.lonLabel=Hye.tickText(i,i.c2l(s[0]),!0).text,n.latLabel=Hye.tickText(i,i.c2l(s[1]),!0).text,n},Vye=bt.exports,jye=function(t,r){var a=t.split(" "),n=a[0],o=a[1],i=Vye.isArrayOrTypedArray(r)?Vye.mean(r):r,s=.5+i/100,l=1.5+i/100,u=["",""],f=[0,0];switch(n){case"top":u[0]="top",f[1]=-l;break;case"bottom":u[0]="bottom",f[1]=l;break}switch(o){case"left":u[1]="right",f[0]=-s;break;case"right":u[1]="left",f[0]=s;break}var c;return u[0]&&u[1]?c=u.join("-"):u[0]?c=u[0]:u[1]?c=u[1]:c="center",{anchor:c,offset:f}},qye=gn,$f=bt.exports,jxt=Un.BADNUM,CI=$y,Yye=Qo,qxt=xn.exports,Yxt=G5,LI=Ro,Wxt=jye,Xxt=oh.appendArrayPointValue,Zxt=xo.NEWLINES,Kxt=xo.BR_TAG_ALL,Jxt=function(t,r){var a=r[0].trace,n=a.visible===!0&&a._length!==0,o=a.fill!=="none",i=LI.hasLines(a),s=LI.hasMarkers(a),l=LI.hasText(a),u=s&&a.marker.symbol==="circle",f=s&&a.marker.symbol!=="circle",c=PI(),h=PI(),v=PI(),p=PI(),d={fill:c,line:h,circle:v,symbol:p};if(!n)return d;var g;if((o||i)&&(g=CI.calcTraceToLineCoords(r)),o&&(c.geojson=CI.makePolygon(g),c.layout.visibility="visible",$f.extendFlat(c.paint,{"fill-color":a.fillcolor})),i&&(h.geojson=CI.makeLine(g),h.layout.visibility="visible",$f.extendFlat(h.paint,{"line-width":a.line.width,"line-color":a.line.color,"line-opacity":a.opacity})),u){var m=Qxt(r);v.geojson=m.geojson,v.layout.visibility="visible",$f.extendFlat(v.paint,{"circle-color":m.mcc,"circle-radius":m.mrc,"circle-opacity":m.mo})}if((f||l)&&(p.geojson=ebt(r,t),$f.extendFlat(p.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),f&&($f.extendFlat(p.layout,{"icon-size":a.marker.size/10}),"angle"in a.marker&&a.marker.angle!=="auto"&&$f.extendFlat(p.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),p.layout["icon-allow-overlap"]=a.marker.allowoverlap,$f.extendFlat(p.paint,{"icon-opacity":a.opacity*a.marker.opacity,"icon-color":a.marker.color})),l)){var y=(a.marker||{}).size,_=Wxt(a.textposition,y);$f.extendFlat(p.layout,{"text-size":a.textfont.size,"text-anchor":_.anchor,"text-offset":_.offset}),$f.extendFlat(p.paint,{"text-color":a.textfont.color,"text-opacity":a.opacity})}return d};function PI(){return{geojson:CI.makeBlank(),layout:{visibility:"none"},paint:{}}}function Qxt(e){var t=e[0].trace,r=t.marker,a=t.selectedpoints,n=$f.isArrayOrTypedArray(r.color),o=$f.isArrayOrTypedArray(r.size),i=$f.isArrayOrTypedArray(r.opacity),s;function l(_){return t.opacity*_}function u(_){return _/2}var f;n&&(Yye.hasColorscale(t,"marker")?f=Yye.makeColorScaleFuncFromTrace(r):f=$f.identity);var c;o&&(c=Yxt(t));var h;i&&(h=function(_){var S=qye(_)?+$f.constrain(_,0,1):0;return l(S)});var v=[];for(s=0;s<e.length;s++){var p=e[s],d=p.lonlat;if(!Wye(d)){var g={};f&&(g.mcc=p.mcc=f(p.mc)),c&&(g.mrc=p.mrc=c(p.ms)),h&&(g.mo=h(p.mo)),a&&(g.selected=p.selected||0),v.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:g})}}var m;if(a)for(m=qxt.makeSelectedPointStyleFns(t),s=0;s<v.length;s++){var y=v[s].properties;m.selectedOpacityFn&&(y.mo=l(m.selectedOpacityFn(y))),m.selectedColorFn&&(y.mcc=m.selectedColorFn(y)),m.selectedSizeFn&&(y.mrc=m.selectedSizeFn(y))}return{geojson:{type:"FeatureCollection",features:v},mcc:n||m&&m.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:o||m&&m.selectedSizeFn?{type:"identity",property:"mrc"}:u(r.size),mo:i||m&&m.selectedOpacityFn?{type:"identity",property:"mo"}:l(r.opacity)}}function ebt(e,t){for(var r=t._fullLayout,a=e[0].trace,n=a.marker||{},o=n.symbol,i=n.angle,s=o!=="circle"?UH(o):II,l=i!=="auto"?UH(i,!0):II,u=LI.hasText(a)?UH(a.text):II,f=[],c=0;c<e.length;c++){var h=e[c];if(!Wye(h.lonlat)){var v=a.texttemplate,p;if(v){var d=Array.isArray(v)?v[c]||"":v,g=a._module.formatLabels(h,a,r),m={};Xxt(m,a,h.i);var y=a._meta||{};p=$f.texttemplateString(d,g,r._d3locale,m,h,y)}else p=u(c);p&&(p=p.replace(Zxt,"").replace(Kxt,`
`)),f.push({type:"Feature",geometry:{type:"Point",coordinates:h.lonlat},properties:{symbol:s(c),angle:l(c),text:p}})}}return{type:"FeatureCollection",features:f}}function UH(e,t){return $f.isArrayOrTypedArray(e)?t?function(r){return qye(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:II}function II(){return""}function Wye(e){return e[0]===jxt}var Xye=Jxt,DI=db.traceLayerPrefix,L0=["fill","line","circle","symbol"];function Zye(e,t){this.type="scattermapbox",this.subplot=e,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:DI+t+"-fill",line:DI+t+"-line",circle:DI+t+"-circle",symbol:DI+t+"-symbol"},this.below=null}var PM=Zye.prototype;PM.addSource=function(e,t){this.subplot.map.addSource(this.sourceIds[e],{type:"geojson",data:t.geojson})};PM.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};PM.addLayer=function(e,t,r){this.subplot.addLayer({type:e,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint},r)};PM.update=function(t){var r=this.subplot,a=r.map,n=Xye(r.gd,t),o=r.belowLookup["trace-"+this.uid],i,s,l;if(o!==this.below){for(i=L0.length-1;i>=0;i--)s=L0[i],a.removeLayer(this.layerIds[s]);for(i=0;i<L0.length;i++)s=L0[i],l=n[s],this.addLayer(s,l,o);this.below=o}for(i=0;i<L0.length;i++)s=L0[i],l=n[s],r.setOptions(this.layerIds[s],"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&(this.setSourceData(s,l),r.setOptions(this.layerIds[s],"setPaintProperty",l.paint));t[0].trace._glTrace=this};PM.dispose=function(){for(var t=this.subplot.map,r=L0.length-1;r>=0;r--){var a=L0[r];t.removeLayer(this.layerIds[a]),t.removeSource(this.sourceIds[a])}};var tbt=function(t,r){for(var a=r[0].trace,n=new Zye(t,a.uid),o=Xye(t.gd,r),i=n.below=t.belowLookup["trace-"+a.uid],s=0;s<L0.length;s++){var l=L0[s],u=o[l];n.addSource(l,u),n.addLayer(l,u,i)}return r[0].trace._glTrace=n,n},rbt=Rs,HH=bt.exports,abt=QT,nbt=HH.fillText,ibt=Un.BADNUM;function obt(e,t,r){var a=e.cd,n=a[0].trace,o=e.xa,i=e.ya,s=e.subplot,l=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),u=l*360,f=t-u;function c(S){var M=S.lonlat;if(M[0]===ibt)return 1/0;var w=HH.modHalf(M[0],360),A=M[1],k=s.project([w,A]),T=k.x-o.c2p([f,A]),L=k.y-i.c2p([w,r]),C=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(T*T+L*L)-C,1-3/C)}if(rbt.getClosest(a,c,e),e.index!==!1){var h=a[e.index],v=h.lonlat,p=[HH.modHalf(v[0],360)+u,v[1]],d=o.c2p(p),g=i.c2p(p),m=h.mrc||1;e.x0=d-m,e.x1=d+m,e.y0=g-m,e.y1=g+m;var y={};y[n.subplot]={_subplot:s};var _=n._module.formatLabels(h,n,y);return e.lonLabel=_.lonLabel,e.latLabel=_.latLabel,e.color=abt(n,h),e.extraText=Kye(n,h,a[0].t.labels),e.hovertemplate=n.hovertemplate,[e]}}function Kye(e,t,r){if(e.hovertemplate)return;var a=t.hi||e.hoverinfo,n=a.split("+"),o=n.indexOf("all")!==-1,i=n.indexOf("lon")!==-1,s=n.indexOf("lat")!==-1,l=t.lonlat,u=[];function f(c){return c+"\xB0"}return o||i&&s?u.push("("+f(l[1])+", "+f(l[0])+")"):i?u.push(r.lon+f(l[0])):s&&u.push(r.lat+f(l[1])),(o||n.indexOf("text")!==-1)&&nbt(t,e,u),u.join("<br>")}var GH={hoverPoints:obt,getExtraText:Kye},sbt=function(t,r){return t.lon=r.lon,t.lat=r.lat,t},lbt=bt.exports,ubt=Ro,fbt=Un.BADNUM,cbt=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s=a[0].trace,l;if(!ubt.hasMarkers(s))return[];if(r===!1)for(l=0;l<a.length;l++)a[l].selected=0;else for(l=0;l<a.length;l++){var u=a[l],f=u.lonlat;if(f[0]!==fbt){var c=[lbt.modHalf(f[0],360),f[1]],h=[n.c2p(c),o.c2p(c)];r.contains(h,null,l,t)?(i.push({pointNumber:l,lon:f[0],lat:f[1]}),u.selected=1):u.selected=0}}return i},Uf={},VH={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(ll,function(){var r,a,n;function o(i,s){if(!r)r=s;else if(!a)a=s;else{var l="var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk);",u={};r(u),n=s(u),n.workerUrl=window.URL.createObjectURL(new Blob([l],{type:"text/javascript"}))}}return o(["exports"],function(i){function s(x,b){return b={exports:{}},x(b,b.exports),b.exports}var l="1.10.1",u=f;function f(x,b,E,F){this.cx=3*x,this.bx=3*(E-x)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(F-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=x,this.p1y=F,this.p2x=E,this.p2y=F}f.prototype.sampleCurveX=function(x){return((this.ax*x+this.bx)*x+this.cx)*x},f.prototype.sampleCurveY=function(x){return((this.ay*x+this.by)*x+this.cy)*x},f.prototype.sampleCurveDerivativeX=function(x){return(3*this.ax*x+2*this.bx)*x+this.cx},f.prototype.solveCurveX=function(x,b){typeof b=="undefined"&&(b=1e-6);var E,F,G,W,J;for(G=x,J=0;J<8;J++){if(W=this.sampleCurveX(G)-x,Math.abs(W)<b)return G;var fe=this.sampleCurveDerivativeX(G);if(Math.abs(fe)<1e-6)break;G=G-W/fe}if(E=0,F=1,G=x,G<E)return E;if(G>F)return F;for(;E<F;){if(W=this.sampleCurveX(G),Math.abs(W-x)<b)return G;x>W?E=G:F=G,G=(F-E)*.5+E}return G},f.prototype.solve=function(x,b){return this.sampleCurveY(this.solveCurveX(x,b))};var c=h;function h(x,b){this.x=x,this.y=b}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(x){return this.clone()._add(x)},sub:function(x){return this.clone()._sub(x)},multByPoint:function(x){return this.clone()._multByPoint(x)},divByPoint:function(x){return this.clone()._divByPoint(x)},mult:function(x){return this.clone()._mult(x)},div:function(x){return this.clone()._div(x)},rotate:function(x){return this.clone()._rotate(x)},rotateAround:function(x,b){return this.clone()._rotateAround(x,b)},matMult:function(x){return this.clone()._matMult(x)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(x){return this.x===x.x&&this.y===x.y},dist:function(x){return Math.sqrt(this.distSqr(x))},distSqr:function(x){var b=x.x-this.x,E=x.y-this.y;return b*b+E*E},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(x){return Math.atan2(this.y-x.y,this.x-x.x)},angleWith:function(x){return this.angleWithSep(x.x,x.y)},angleWithSep:function(x,b){return Math.atan2(this.x*b-this.y*x,this.x*x+this.y*b)},_matMult:function(x){var b=x[0]*this.x+x[1]*this.y,E=x[2]*this.x+x[3]*this.y;return this.x=b,this.y=E,this},_add:function(x){return this.x+=x.x,this.y+=x.y,this},_sub:function(x){return this.x-=x.x,this.y-=x.y,this},_mult:function(x){return this.x*=x,this.y*=x,this},_div:function(x){return this.x/=x,this.y/=x,this},_multByPoint:function(x){return this.x*=x.x,this.y*=x.y,this},_divByPoint:function(x){return this.x/=x.x,this.y/=x.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var x=this.y;return this.y=this.x,this.x=-x,this},_rotate:function(x){var b=Math.cos(x),E=Math.sin(x),F=b*this.x-E*this.y,G=E*this.x+b*this.y;return this.x=F,this.y=G,this},_rotateAround:function(x,b){var E=Math.cos(x),F=Math.sin(x),G=b.x+E*(this.x-b.x)-F*(this.y-b.y),W=b.y+F*(this.x-b.x)+E*(this.y-b.y);return this.x=G,this.y=W,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(x){return x instanceof h?x:Array.isArray(x)?new h(x[0],x[1]):x};function v(x,b){if(Array.isArray(x)){if(!Array.isArray(b)||x.length!==b.length)return!1;for(var E=0;E<x.length;E++)if(!v(x[E],b[E]))return!1;return!0}if(typeof x=="object"&&x!==null&&b!==null){if(typeof b!="object")return!1;var F=Object.keys(x);if(F.length!==Object.keys(b).length)return!1;for(var G in x)if(!v(x[G],b[G]))return!1;return!0}return x===b}function p(x){if(x<=0)return 0;if(x>=1)return 1;var b=x*x,E=b*x;return 4*(x<.5?E:3*(x-b)+E-.75)}function d(x,b,E,F){var G=new u(x,b,E,F);return function(W){return G.solve(W)}}var g=d(.25,.1,.25,1);function m(x,b,E){return Math.min(E,Math.max(b,x))}function y(x,b,E){var F=E-b,G=((x-b)%F+F)%F+b;return G===b?E:G}function _(x,b,E){if(!x.length)return E(null,[]);var F=x.length,G=new Array(x.length),W=null;x.forEach(function(J,fe){b(J,function(Ae,Ce){Ae&&(W=Ae),G[fe]=Ce,--F==0&&E(W,G)})})}function S(x){var b=[];for(var E in x)b.push(x[E]);return b}function M(x,b){var E=[];for(var F in x)F in b||E.push(F);return E}function w(x){for(var b=[],E=arguments.length-1;E-- >0;)b[E]=arguments[E+1];for(var F=0,G=b;F<G.length;F+=1){var W=G[F];for(var J in W)x[J]=W[J]}return x}function A(x,b){for(var E={},F=0;F<b.length;F++){var G=b[F];G in x&&(E[G]=x[G])}return E}var k=1;function T(){return k++}function L(){function x(b){return b?(b^Math.random()*16>>b/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,x)}return x()}function C(x){return x?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x):!1}function I(x,b){x.forEach(function(E){!b[E]||(b[E]=b[E].bind(b))})}function R(x,b){return x.indexOf(b,x.length-b.length)!==-1}function B(x,b,E){var F={};for(var G in x)F[G]=b.call(E||this,x[G],G,x);return F}function N(x,b,E){var F={};for(var G in x)b.call(E||this,x[G],G,x)&&(F[G]=x[G]);return F}function D(x){return Array.isArray(x)?x.map(D):typeof x=="object"&&x?B(x,D):x}function O(x,b){for(var E=0;E<x.length;E++)if(b.indexOf(x[E])>=0)return!0;return!1}var $={};function Y(x){$[x]||(typeof console!="undefined"&&console.warn(x),$[x]=!0)}function X(x,b,E){return(E.y-x.y)*(b.x-x.x)>(b.y-x.y)*(E.x-x.x)}function ee(x){for(var b=0,E=0,F=x.length,G=F-1,W=void 0,J=void 0;E<F;G=E++)W=x[E],J=x[G],b+=(J.x-W.x)*(W.y+J.y);return b}function Q(x){var b=x[0],E=x[1],F=x[2];return E+=90,E*=Math.PI/180,F*=Math.PI/180,{x:b*Math.cos(E)*Math.sin(F),y:b*Math.sin(E)*Math.sin(F),z:b*Math.cos(F)}}function Z(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function q(x){var b=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,E={};if(x.replace(b,function(G,W,J,fe){var Ae=J||fe;return E[W]=Ae?Ae.toLowerCase():!0,""}),E["max-age"]){var F=parseInt(E["max-age"],10);isNaN(F)?delete E["max-age"]:E["max-age"]=F}return E}var ae=null;function ie(x){if(ae==null){var b=x.navigator?x.navigator.userAgent:null;ae=!!x.safari||!!(b&&(/\b(iPad|iPhone|iPod)\b/.test(b)||!!b.match("Safari")&&!b.match("Chrome")))}return ae}function we(x){try{var b=self[x];return b.setItem("_mapbox_test_",1),b.removeItem("_mapbox_test_"),!0}catch{return!1}}function Te(x){return self.btoa(encodeURIComponent(x).replace(/%([0-9A-F]{2})/g,function(b,E){return String.fromCharCode(Number("0x"+E))}))}function he(x){return decodeURIComponent(self.atob(x).split("").map(function(b){return"%"+("00"+b.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var xe=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Se=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ye=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,re,se,de={now:xe,frame:function(b){var E=Se(b);return{cancel:function(){return ye(E)}}},getImageData:function(b,E){E===void 0&&(E=0);var F=self.document.createElement("canvas"),G=F.getContext("2d");if(!G)throw new Error("failed to create canvas 2d context");return F.width=b.width,F.height=b.height,G.drawImage(b,0,0,b.width,b.height),G.getImageData(-E,-E,b.width+2*E,b.height+2*E)},resolveURL:function(b){return re||(re=self.document.createElement("a")),re.href=b,re.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(se==null&&(se=self.matchMedia("(prefers-reduced-motion: reduce)")),se.matches):!1}},Me={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ie={supported:!1,testSupport:ce},Ee,qe=!1,be,oe=!1;self.document&&(be=self.document.createElement("img"),be.onload=function(){Ee&&ue(Ee),Ee=null,oe=!0},be.onerror=function(){qe=!0,Ee=null},be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ce(x){qe||!be||(oe?ue(x):Ee=x)}function ue(x){var b=x.createTexture();x.bindTexture(x.TEXTURE_2D,b);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,be),x.isContextLost())return;Ie.supported=!0}catch{}x.deleteTexture(b),qe=!0}var Re="01";function Xe(){for(var x="1",b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",E="",F=0;F<10;F++)E+=b[Math.floor(Math.random()*62)];var G=12*60*60*1e3,W=[x,Re,E].join(""),J=Date.now()+G;return{token:W,tokenExpiresAt:J}}var Ke=function(b,E){this._transformRequestFn=b,this._customAccessToken=E,this._createSkuToken()};Ke.prototype._createSkuToken=function(){var b=Xe();this._skuToken=b.token,this._skuTokenExpiresAt=b.tokenExpiresAt},Ke.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ke.prototype.transformRequest=function(b,E){return this._transformRequestFn?this._transformRequestFn(b,E)||{url:b}:{url:b}},Ke.prototype.normalizeStyleURL=function(b,E){if(!vt(b))return b;var F=Ye(b);return F.path="/styles/v1"+F.path,this._makeAPIURL(F,this._customAccessToken||E)},Ke.prototype.normalizeGlyphsURL=function(b,E){if(!vt(b))return b;var F=Ye(b);return F.path="/fonts/v1"+F.path,this._makeAPIURL(F,this._customAccessToken||E)},Ke.prototype.normalizeSourceURL=function(b,E){if(!vt(b))return b;var F=Ye(b);return F.path="/v4/"+F.authority+".json",F.params.push("secure"),this._makeAPIURL(F,this._customAccessToken||E)},Ke.prototype.normalizeSpriteURL=function(b,E,F,G){var W=Ye(b);return vt(b)?(W.path="/styles/v1"+W.path+"/sprite"+E+F,this._makeAPIURL(W,this._customAccessToken||G)):(W.path+=""+E+F,yt(W))},Ke.prototype.normalizeTileURL=function(b,E){if(this._isSkuTokenExpired()&&this._createSkuToken(),b&&!vt(b))return b;var F=Ye(b),G=/(\.(png|jpg)\d*)(?=$)/,W=/^.+\/v4\//,J=de.devicePixelRatio>=2||E===512?"@2x":"",fe=Ie.supported?".webp":"$1";F.path=F.path.replace(G,""+J+fe),F.path=F.path.replace(W,"/"),F.path="/v4"+F.path;var Ae=this._customAccessToken||je(F.params)||Me.ACCESS_TOKEN;return Me.REQUIRE_ACCESS_TOKEN&&Ae&&this._skuToken&&F.params.push("sku="+this._skuToken),this._makeAPIURL(F,Ae)},Ke.prototype.canonicalizeTileURL=function(b,E){var F="/v4/",G=/\.[\w]+$/,W=Ye(b);if(!W.path.match(/(^\/v4\/)/)||!W.path.match(G))return b;var J="mapbox://tiles/";J+=W.path.replace(F,"");var fe=W.params;return E&&(fe=fe.filter(function(Ae){return!Ae.match(/^access_token=/)})),fe.length&&(J+="?"+fe.join("&")),J},Ke.prototype.canonicalizeTileset=function(b,E){for(var F=E?vt(E):!1,G=[],W=0,J=b.tiles||[];W<J.length;W+=1){var fe=J[W];Qe(fe)?G.push(this.canonicalizeTileURL(fe,F)):G.push(fe)}return G},Ke.prototype._makeAPIURL=function(b,E){var F="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",G=Ye(Me.API_URL);if(b.protocol=G.protocol,b.authority=G.authority,G.path!=="/"&&(b.path=""+G.path+b.path),!Me.REQUIRE_ACCESS_TOKEN)return yt(b);if(E=E||Me.ACCESS_TOKEN,!E)throw new Error("An API access token is required to use Mapbox GL. "+F);if(E[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+F);return b.params=b.params.filter(function(W){return W.indexOf("access_token")===-1}),b.params.push("access_token="+E),yt(b)};function vt(x){return x.indexOf("mapbox:")===0}var Ze=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qe(x){return Ze.test(x)}function Je(x){return x.indexOf("sku=")>0&&Qe(x)}function je(x){for(var b=0,E=x;b<E.length;b+=1){var F=E[b],G=F.match(/^access_token=(.*)$/);if(G)return G[1]}return null}var $e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ye(x){var b=x.match($e);if(!b)throw new Error("Unable to parse URL object");return{protocol:b[1],authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("&"):[]}}function yt(x){var b=x.params.length?"?"+x.params.join("&"):"";return x.protocol+"://"+x.authority+x.path+b}var _t="mapbox.eventData";function Pt(x){if(!x)return null;var b=x.split(".");if(!b||b.length!==3)return null;try{var E=JSON.parse(he(b[1]));return E}catch{return null}}var Tt=function(b){this.type=b,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Tt.prototype.getStorageKey=function(b){var E=Pt(Me.ACCESS_TOKEN),F="";return E&&E.u?F=Te(E.u):F=Me.ACCESS_TOKEN||"",b?_t+"."+b+":"+F:_t+":"+F},Tt.prototype.fetchEventData=function(){var b=we("localStorage"),E=this.getStorageKey(),F=this.getStorageKey("uuid");if(b)try{var G=self.localStorage.getItem(E);G&&(this.eventData=JSON.parse(G));var W=self.localStorage.getItem(F);W&&(this.anonId=W)}catch{Y("Unable to read from LocalStorage")}},Tt.prototype.saveEventData=function(){var b=we("localStorage"),E=this.getStorageKey(),F=this.getStorageKey("uuid");if(b)try{self.localStorage.setItem(F,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(E,JSON.stringify(this.eventData))}catch{Y("Unable to write to LocalStorage")}},Tt.prototype.processRequests=function(b){},Tt.prototype.postEvent=function(b,E,F,G){var W=this;if(!!Me.EVENTS_URL){var J=Ye(Me.EVENTS_URL);J.params.push("access_token="+(G||Me.ACCESS_TOKEN||""));var fe={event:this.type,created:new Date(b).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:l,skuId:Re,userId:this.anonId},Ae=E?w(fe,E):fe,Ce={url:yt(J),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ae])};this.pendingRequest=lt(Ce,function(De){W.pendingRequest=null,F(De),W.saveEventData(),W.processRequests(G)})}},Tt.prototype.queueRequest=function(b,E){this.queue.push(b),this.processRequests(E)};var Ot=function(x){function b(){x.call(this,"map.load"),this.success={},this.skuToken=""}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.postMapLoadEvent=function(F,G,W,J){this.skuToken=W,(Me.EVENTS_URL&&J||Me.ACCESS_TOKEN&&Array.isArray(F)&&F.some(function(fe){return vt(fe)||Qe(fe)}))&&this.queueRequest({id:G,timestamp:Date.now()},J)},b.prototype.processRequests=function(F){var G=this;if(!(this.pendingRequest||this.queue.length===0)){var W=this.queue.shift(),J=W.id,fe=W.timestamp;J&&this.success[J]||(this.anonId||this.fetchEventData(),C(this.anonId)||(this.anonId=L()),this.postEvent(fe,{skuToken:this.skuToken},function(Ae){Ae||J&&(G.success[J]=!0)},F))}},b}(Tt),qt=function(x){function b(E){x.call(this,"appUserTurnstile"),this._customAccessToken=E}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.postTurnstileEvent=function(F,G){Me.EVENTS_URL&&Me.ACCESS_TOKEN&&Array.isArray(F)&&F.some(function(W){return vt(W)||Qe(W)})&&this.queueRequest(Date.now(),G)},b.prototype.processRequests=function(F){var G=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var W=Pt(Me.ACCESS_TOKEN),J=W?W.u:Me.ACCESS_TOKEN,fe=J!==this.eventData.tokenU;C(this.anonId)||(this.anonId=L(),fe=!0);var Ae=this.queue.shift();if(this.eventData.lastSuccess){var Ce=new Date(this.eventData.lastSuccess),De=new Date(Ae),Ve=(Ae-this.eventData.lastSuccess)/(24*60*60*1e3);fe=fe||Ve>=1||Ve<-1||Ce.getDate()!==De.getDate()}else fe=!0;if(!fe)return this.processRequests();this.postEvent(Ae,{"enabled.telemetry":!1},function(ot){ot||(G.eventData.lastSuccess=Ae,G.eventData.tokenU=J)},F)}},b}(Tt),Xt=new qt,Or=Xt.postTurnstileEvent.bind(Xt),Br=new Ot,Qr=Br.postMapLoadEvent.bind(Br),Sr="mapbox-tiles",Zr=500,Oe=50,it=1e3*60*7,ft;function pt(){self.caches&&!ft&&(ft=self.caches.open(Sr))}var Dt;function Nt(x,b){if(Dt===void 0)try{new Response(new ReadableStream),Dt=!0}catch{Dt=!1}Dt?b(x.body):x.blob().then(b)}function hr(x,b,E){if(pt(),!!ft){var F={status:b.status,statusText:b.statusText,headers:new self.Headers};b.headers.forEach(function(J,fe){return F.headers.set(fe,J)});var G=q(b.headers.get("Cache-Control")||"");if(!G["no-store"]){G["max-age"]&&F.headers.set("Expires",new Date(E+G["max-age"]*1e3).toUTCString());var W=new Date(F.headers.get("Expires")).getTime()-E;W<it||Nt(b,function(J){var fe=new self.Response(J,F);pt(),!!ft&&ft.then(function(Ae){return Ae.put(fr(x.url),fe)}).catch(function(Ae){return Y(Ae.message)})})}}}function fr(x){var b=x.indexOf("?");return b<0?x:x.slice(0,b)}function vr(x,b){if(pt(),!ft)return b(null);var E=fr(x.url);ft.then(function(F){F.match(E).then(function(G){var W=Ut(G);F.delete(E),W&&F.put(E,G.clone()),b(null,G,W)}).catch(b)}).catch(b)}function Ut(x){if(!x)return!1;var b=new Date(x.headers.get("Expires")||0),E=q(x.headers.get("Cache-Control")||"");return b>Date.now()&&!E["no-cache"]}var Fr=1/0;function sa(x){Fr++,Fr>Oe&&(x.getActor().send("enforceCacheSizeLimit",Zr),Fr=0)}function $r(x){pt(),!!ft&&ft.then(function(b){b.keys().then(function(E){for(var F=0;F<E.length-x;F++)b.delete(E[F])})})}function Ca(x){var b=self.caches.delete(Sr);x&&b.catch(x).then(function(){return x()})}function on(x,b){Zr=x,Oe=b}var Fa;function jr(){return Fa==null&&(Fa=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Fa}var Rn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Rn);var xa=function(x){function b(E,F,G){F===401&&Qe(G)&&(E+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),x.call(this,E),this.status=F,this.url=G,this.name=this.constructor.name,this.message=E}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},b}(Error),ia=Z()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},vn=function(x){return/^file:/.test(x)||/^file:/.test(ia())&&!/^\w+:/.test(x)};function ka(x,b){var E=new self.AbortController,F=new self.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:ia(),signal:E.signal}),G=!1,W=!1,J=Je(F.url);x.type==="json"&&F.headers.set("Accept","application/json");var fe=function(Ce,De,Ve){if(!W){if(Ce&&Ce.message!=="SecurityError"&&Y(Ce),De&&Ve)return Ae(De);var ot=Date.now();self.fetch(F).then(function(at){if(at.ok){var mt=J?at.clone():null;return Ae(at,mt,ot)}else return b(new xa(at.statusText,at.status,x.url))}).catch(function(at){at.code!==20&&b(new Error(at.message))})}},Ae=function(Ce,De,Ve){(x.type==="arrayBuffer"?Ce.arrayBuffer():x.type==="json"?Ce.json():Ce.text()).then(function(ot){W||(De&&Ve&&hr(F,De,Ve),G=!0,b(null,ot,Ce.headers.get("Cache-Control"),Ce.headers.get("Expires")))}).catch(function(ot){W||b(new Error(ot.message))})};return J?vr(F,fe):fe(null,null),{cancel:function(){W=!0,G||E.abort()}}}function Ge(x,b){var E=new self.XMLHttpRequest;E.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(E.responseType="arraybuffer");for(var F in x.headers)E.setRequestHeader(F,x.headers[F]);return x.type==="json"&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials=x.credentials==="include",E.onerror=function(){b(new Error(E.statusText))},E.onload=function(){if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){var G=E.response;if(x.type==="json")try{G=JSON.parse(E.response)}catch(W){return b(W)}b(null,G,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else b(new xa(E.statusText,E.status,x.url))},E.send(x.body),{cancel:function(){return E.abort()}}}var Pe=function(x,b){if(!vn(x.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ka(x,b);if(Z()&&self.worker&&self.worker.actor){var E=!0;return self.worker.actor.send("getResource",x,b,void 0,E)}}return Ge(x,b)},Ne=function(x,b){return Pe(w(x,{type:"json"}),b)},We=function(x,b){return Pe(w(x,{type:"arrayBuffer"}),b)},lt=function(x,b){return Pe(w(x,{method:"POST"}),b)};function wt(x){var b=self.document.createElement("a");return b.href=x,b.protocol===self.document.location.protocol&&b.host===self.document.location.host}var Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function It(x,b,E,F){var G=new self.Image,W=self.URL;G.onload=function(){b(null,G),W.revokeObjectURL(G.src)},G.onerror=function(){return b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var J=new self.Blob([new Uint8Array(x)],{type:"image/png"});G.cacheControl=E,G.expires=F,G.src=x.byteLength?W.createObjectURL(J):Mt}function rr(x,b){var E=new self.Blob([new Uint8Array(x)],{type:"image/png"});self.createImageBitmap(E).then(function(F){b(null,F)}).catch(function(F){b(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var sr,gr,Ur=function(){sr=[],gr=0};Ur();var Vr=function(x,b){if(Ie.supported&&(x.headers||(x.headers={}),x.headers.accept="image/webp,*/*"),gr>=Me.MAX_PARALLEL_IMAGE_REQUESTS){var E={requestParameters:x,callback:b,cancelled:!1,cancel:function(){this.cancelled=!0}};return sr.push(E),E}gr++;var F=!1,G=function(){if(!F)for(F=!0,gr--;sr.length&&gr<Me.MAX_PARALLEL_IMAGE_REQUESTS;){var J=sr.shift(),fe=J.requestParameters,Ae=J.callback,Ce=J.cancelled;Ce||(J.cancel=Vr(fe,Ae).cancel)}},W=We(x,function(J,fe,Ae,Ce){G(),J?b(J):fe&&(jr()?rr(fe,b):It(fe,b,Ae,Ce))});return{cancel:function(){W.cancel(),G()}}},la=function(x,b){var E=self.document.createElement("video");E.muted=!0,E.onloadstart=function(){b(null,E)};for(var F=0;F<x.length;F++){var G=self.document.createElement("source");wt(x[F])||(E.crossOrigin="Anonymous"),G.src=x[F],E.appendChild(G)}return{cancel:function(){}}};function Xa(x,b,E){var F=E[x]&&E[x].indexOf(b)!==-1;F||(E[x]=E[x]||[],E[x].push(b))}function La(x,b,E){if(E&&E[x]){var F=E[x].indexOf(b);F!==-1&&E[x].splice(F,1)}}var en=function(b,E){E===void 0&&(E={}),w(this,E),this.type=b},In=function(x){function b(E,F){F===void 0&&(F={}),x.call(this,"error",w({error:E},F))}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b}(en),yn=function(){};yn.prototype.on=function(b,E){return this._listeners=this._listeners||{},Xa(b,E,this._listeners),this},yn.prototype.off=function(b,E){return La(b,E,this._listeners),La(b,E,this._oneTimeListeners),this},yn.prototype.once=function(b,E){return this._oneTimeListeners=this._oneTimeListeners||{},Xa(b,E,this._oneTimeListeners),this},yn.prototype.fire=function(b,E){typeof b=="string"&&(b=new en(b,E||{}));var F=b.type;if(this.listens(F)){b.target=this;for(var G=this._listeners&&this._listeners[F]?this._listeners[F].slice():[],W=0,J=G;W<J.length;W+=1){var fe=J[W];fe.call(this,b)}for(var Ae=this._oneTimeListeners&&this._oneTimeListeners[F]?this._oneTimeListeners[F].slice():[],Ce=0,De=Ae;Ce<De.length;Ce+=1){var Ve=De[Ce];La(F,Ve,this._oneTimeListeners),Ve.call(this,b)}var ot=this._eventedParent;ot&&(w(b,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ot.fire(b))}else b instanceof In&&console.error(b.error);return this},yn.prototype.listens=function(b){return this._listeners&&this._listeners[b]&&this._listeners[b].length>0||this._oneTimeListeners&&this._oneTimeListeners[b]&&this._oneTimeListeners[b].length>0||this._eventedParent&&this._eventedParent.listens(b)},yn.prototype.setEventedParent=function(b,E){return this._eventedParent=b,this._eventedParentData=E,this};var On=8,dn={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},ni={"*":{type:"source"}},Oi=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],No={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},kn={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},ds={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Kn={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},_o={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},yl={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},xl={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Hi=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],zi={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vn={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nl={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kh={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wo={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Eh={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Em={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},uv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bc={type:"array",value:"*"},O0={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Cm={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},ad={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},fv={type:"array",value:"*",minimum:1},N0={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},Ch={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Lh=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],uo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},is={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Fl={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},nd={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xl={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},id={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lm={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},B0={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xp={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},bp={"*":{type:"string"}},ea={$version:On,$root:dn,sources:ni,source:Oi,source_vector:No,source_raster:kn,source_raster_dem:ds,source_geojson:Kn,source_video:_o,source_image:yl,layer:xl,layout:Hi,layout_background:zi,layout_fill:Vn,layout_circle:nl,layout_heatmap:kh,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:wo,layout_symbol:Eh,layout_raster:Em,layout_hillshade:uv,filter:bc,filter_operator:O0,geometry_type:Cm,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:ad,expression:fv,expression_name:N0,light:Ch,paint:Lh,paint_fill:uo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:is,paint_circle:Fl,paint_heatmap:nd,paint_symbol:Xl,paint_raster:id,paint_hillshade:Lm,paint_background:B0,transition:xp,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:bp},wa=function(b,E,F,G){this.message=(b?b+": ":"")+F,G&&(this.identifier=G),E!=null&&E.__line__&&(this.line=E.__line__)};function _c(x){var b=x.key,E=x.value;return E?[new wa(b,E,"constants have been deprecated as of v8")]:[]}function wc(x){for(var b=[],E=arguments.length-1;E-- >0;)b[E]=arguments[E+1];for(var F=0,G=b;F<G.length;F+=1){var W=G[F];for(var J in W)x[J]=W[J]}return x}function Wo(x){return x instanceof Number||x instanceof String||x instanceof Boolean?x.valueOf():x}function Tc(x){if(Array.isArray(x))return x.map(Tc);if(x instanceof Object&&!(x instanceof Number||x instanceof String||x instanceof Boolean)){var b={};for(var E in x)b[E]=Tc(x[E]);return b}return Wo(x)}var nf=function(x){function b(E,F){x.call(this,F),this.message=F,this.key=E}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b}(Error),of=function(b,E){E===void 0&&(E=[]),this.parent=b,this.bindings={};for(var F=0,G=E;F<G.length;F+=1){var W=G[F],J=W[0],fe=W[1];this.bindings[J]=fe}};of.prototype.concat=function(b){return new of(this,b)},of.prototype.get=function(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw new Error(b+" not found in scope.")},of.prototype.has=function(b){return this.bindings[b]?!0:this.parent?this.parent.has(b):!1};var sf={kind:"null"},Ha={kind:"number"},ri={kind:"string"},Hn={kind:"boolean"},Es={kind:"color"},Zl={kind:"object"},Xn={kind:"value"},lf={kind:"error"},Ac={kind:"collator"},il={kind:"formatted"},mu={kind:"resolvedImage"};function Po(x,b){return{kind:"array",itemType:x,N:b}}function Xi(x){if(x.kind==="array"){var b=Xi(x.itemType);return typeof x.N=="number"?"array<"+b+", "+x.N+">":x.itemType.kind==="value"?"array":"array<"+b+">"}else return x.kind}var Sc=[sf,Ha,ri,Hn,Es,il,Zl,Po(Xn),mu];function Vf(x,b){if(b.kind==="error")return null;if(x.kind==="array"){if(b.kind==="array"&&(b.N===0&&b.itemType.kind==="value"||!Vf(x.itemType,b.itemType))&&(typeof x.N!="number"||x.N===b.N))return null}else{if(x.kind===b.kind)return null;if(x.kind==="value")for(var E=0,F=Sc;E<F.length;E+=1){var G=F[E];if(!Vf(G,b))return null}}return"Expected "+Xi(x)+" but found "+Xi(b)+" instead."}function Mc(x,b){return b.some(function(E){return E.kind===x.kind})}function uf(x,b){return b.some(function(E){return E==="null"?x===null:E==="array"?Array.isArray(x):E==="object"?x&&!Array.isArray(x)&&typeof x=="object":E===typeof x})}var I1=s(function(x,b){var E={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function F(Ce){return Ce=Math.round(Ce),Ce<0?0:Ce>255?255:Ce}function G(Ce){return Ce<0?0:Ce>1?1:Ce}function W(Ce){return Ce[Ce.length-1]==="%"?F(parseFloat(Ce)/100*255):F(parseInt(Ce))}function J(Ce){return Ce[Ce.length-1]==="%"?G(parseFloat(Ce)/100):G(parseFloat(Ce))}function fe(Ce,De,Ve){return Ve<0?Ve+=1:Ve>1&&(Ve-=1),Ve*6<1?Ce+(De-Ce)*Ve*6:Ve*2<1?De:Ve*3<2?Ce+(De-Ce)*(2/3-Ve)*6:Ce}function Ae(Ce){var De=Ce.replace(/ /g,"").toLowerCase();if(De in E)return E[De].slice();if(De[0]==="#"){if(De.length===4){var Ve=parseInt(De.substr(1),16);return Ve>=0&&Ve<=4095?[(Ve&3840)>>4|(Ve&3840)>>8,Ve&240|(Ve&240)>>4,Ve&15|(Ve&15)<<4,1]:null}else if(De.length===7){var Ve=parseInt(De.substr(1),16);return Ve>=0&&Ve<=16777215?[(Ve&16711680)>>16,(Ve&65280)>>8,Ve&255,1]:null}return null}var ot=De.indexOf("("),at=De.indexOf(")");if(ot!==-1&&at+1===De.length){var mt=De.substr(0,ot),Ft=De.substr(ot+1,at-(ot+1)).split(","),ur=1;switch(mt){case"rgba":if(Ft.length!==4)return null;ur=J(Ft.pop());case"rgb":return Ft.length!==3?null:[W(Ft[0]),W(Ft[1]),W(Ft[2]),ur];case"hsla":if(Ft.length!==4)return null;ur=J(Ft.pop());case"hsl":if(Ft.length!==3)return null;var Zt=(parseFloat(Ft[0])%360+360)%360/360,zr=J(Ft[1]),xr=J(Ft[2]),Rr=xr<=.5?xr*(zr+1):xr+zr-xr*zr,Nr=xr*2-Rr;return[F(fe(Nr,Rr,Zt+1/3)*255),F(fe(Nr,Rr,Zt)*255),F(fe(Nr,Rr,Zt-1/3)*255),ur];default:return null}}return null}try{b.parseCSSColor=Ae}catch{}}),$0=I1.parseCSSColor,Si=function(b,E,F,G){G===void 0&&(G=1),this.r=b,this.g=E,this.b=F,this.a=G};Si.parse=function(b){if(!!b){if(b instanceof Si)return b;if(typeof b=="string"){var E=$0(b);if(!!E)return new Si(E[0]/255*E[3],E[1]/255*E[3],E[2]/255*E[3],E[3])}}},Si.prototype.toString=function(){var b=this.toArray(),E=b[0],F=b[1],G=b[2],W=b[3];return"rgba("+Math.round(E)+","+Math.round(F)+","+Math.round(G)+","+W+")"},Si.prototype.toArray=function(){var b=this,E=b.r,F=b.g,G=b.b,W=b.a;return W===0?[0,0,0,0]:[E*255/W,F*255/W,G*255/W,W]},Si.black=new Si(0,0,0,1),Si.white=new Si(1,1,1,1),Si.transparent=new Si(0,0,0,0),Si.red=new Si(1,0,0,1);var cv=function(b,E,F){b?this.sensitivity=E?"variant":"case":this.sensitivity=E?"accent":"base",this.locale=F,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};cv.prototype.compare=function(b,E){return this.collator.compare(b,E)},cv.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kc=function(b,E,F,G,W){this.text=b,this.image=E,this.scale=F,this.fontStack=G,this.textColor=W},Wn=function(b){this.sections=b};Wn.fromString=function(b){return new Wn([new kc(b,null,null,null,null)])},Wn.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(b){return b.text.length!==0||b.image&&b.image.name.length!==0})},Wn.factory=function(b){return b instanceof Wn?b:Wn.fromString(b)},Wn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(b){return b.text}).join("")},Wn.prototype.serialize=function(){for(var b=["format"],E=0,F=this.sections;E<F.length;E+=1){var G=F[E];if(G.image){b.push(["image",G.image.name]);continue}b.push(G.text);var W={};G.fontStack&&(W["text-font"]=["literal",G.fontStack.split(",")]),G.scale&&(W["font-scale"]=G.scale),G.textColor&&(W["text-color"]=["rgba"].concat(G.textColor.toArray())),b.push(W)}return b};var $s=function(b){this.name=b.name,this.available=b.available};$s.prototype.toString=function(){return this.name},$s.fromString=function(b){return b?new $s({name:b,available:!1}):null},$s.prototype.serialize=function(){return["image",this.name]};function U0(x,b,E,F){if(!(typeof x=="number"&&x>=0&&x<=255&&typeof b=="number"&&b>=0&&b<=255&&typeof E=="number"&&E>=0&&E<=255)){var G=typeof F=="number"?[x,b,E,F]:[x,b,E];return"Invalid rgba value ["+G.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof F=="undefined"||typeof F=="number"&&F>=0&&F<=1?null:"Invalid rgba value ["+[x,b,E,F].join(", ")+"]: 'a' must be between 0 and 1."}function os(x){if(x===null)return!0;if(typeof x=="string")return!0;if(typeof x=="boolean")return!0;if(typeof x=="number")return!0;if(x instanceof Si)return!0;if(x instanceof cv)return!0;if(x instanceof Wn)return!0;if(x instanceof $s)return!0;if(Array.isArray(x)){for(var b=0,E=x;b<E.length;b+=1){var F=E[b];if(!os(F))return!1}return!0}else if(typeof x=="object"){for(var G in x)if(!os(x[G]))return!1;return!0}else return!1}function Bo(x){if(x===null)return sf;if(typeof x=="string")return ri;if(typeof x=="boolean")return Hn;if(typeof x=="number")return Ha;if(x instanceof Si)return Es;if(x instanceof cv)return Ac;if(x instanceof Wn)return il;if(x instanceof $s)return mu;if(Array.isArray(x)){for(var b=x.length,E,F=0,G=x;F<G.length;F+=1){var W=G[F],J=Bo(W);if(!E)E=J;else{if(E===J)continue;E=Xn;break}}return Po(E||Xn,b)}else return Zl}function ff(x){var b=typeof x;return x===null?"":b==="string"||b==="number"||b==="boolean"?String(x):x instanceof Si||x instanceof Wn||x instanceof $s?x.toString():JSON.stringify(x)}var Cs=function(b,E){this.type=b,this.value=E};Cs.parse=function(b,E){if(b.length!==2)return E.error("'literal' expression requires exactly one argument, but found "+(b.length-1)+" instead.");if(!os(b[1]))return E.error("invalid value");var F=b[1],G=Bo(F),W=E.expectedType;return G.kind==="array"&&G.N===0&&W&&W.kind==="array"&&(typeof W.N!="number"||W.N===0)&&(G=W),new Cs(G,F)},Cs.prototype.evaluate=function(){return this.value},Cs.prototype.eachChild=function(){},Cs.prototype.outputDefined=function(){return!0},Cs.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Si?["rgba"].concat(this.value.toArray()):this.value instanceof Wn?this.value.serialize():this.value};var fo=function(b){this.name="ExpressionEvaluationError",this.message=b};fo.prototype.toJSON=function(){return this.message};var jf={string:ri,number:Ha,boolean:Hn,object:Zl},ps=function(b,E){this.type=b,this.args=E};ps.parse=function(b,E){if(b.length<2)return E.error("Expected at least one argument.");var F=1,G,W=b[0];if(W==="array"){var J;if(b.length>2){var fe=b[1];if(typeof fe!="string"||!(fe in jf)||fe==="object")return E.error('The item type argument of "array" must be one of string, number, boolean',1);J=jf[fe],F++}else J=Xn;var Ae;if(b.length>3){if(b[2]!==null&&(typeof b[2]!="number"||b[2]<0||b[2]!==Math.floor(b[2])))return E.error('The length argument to "array" must be a positive integer literal',2);Ae=b[2],F++}G=Po(J,Ae)}else G=jf[W];for(var Ce=[];F<b.length;F++){var De=E.parse(b[F],F,Xn);if(!De)return null;Ce.push(De)}return new ps(G,Ce)},ps.prototype.evaluate=function(b){for(var E=0;E<this.args.length;E++){var F=this.args[E].evaluate(b),G=Vf(this.type,Bo(F));if(G){if(E===this.args.length-1)throw new fo("Expected value to be of type "+Xi(this.type)+", but found "+Xi(Bo(F))+" instead.")}else return F}return null},ps.prototype.eachChild=function(b){this.args.forEach(b)},ps.prototype.outputDefined=function(){return this.args.every(function(b){return b.outputDefined()})},ps.prototype.serialize=function(){var b=this.type,E=[b.kind];if(b.kind==="array"){var F=b.itemType;if(F.kind==="string"||F.kind==="number"||F.kind==="boolean"){E.push(F.kind);var G=b.N;(typeof G=="number"||this.args.length>1)&&E.push(G)}}return E.concat(this.args.map(function(W){return W.serialize()}))};var yu=function(b){this.type=il,this.sections=b};yu.parse=function(b,E){if(b.length<2)return E.error("Expected at least one argument.");var F=b[1];if(!Array.isArray(F)&&typeof F=="object")return E.error("First argument must be an image or text section.");for(var G=[],W=!1,J=1;J<=b.length-1;++J){var fe=b[J];if(W&&typeof fe=="object"&&!Array.isArray(fe)){W=!1;var Ae=null;if(fe["font-scale"]&&(Ae=E.parse(fe["font-scale"],1,Ha),!Ae))return null;var Ce=null;if(fe["text-font"]&&(Ce=E.parse(fe["text-font"],1,Po(ri)),!Ce))return null;var De=null;if(fe["text-color"]&&(De=E.parse(fe["text-color"],1,Es),!De))return null;var Ve=G[G.length-1];Ve.scale=Ae,Ve.font=Ce,Ve.textColor=De}else{var ot=E.parse(b[J],1,Xn);if(!ot)return null;var at=ot.type.kind;if(at!=="string"&&at!=="value"&&at!=="null"&&at!=="resolvedImage")return E.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");W=!0,G.push({content:ot,scale:null,font:null,textColor:null})}}return new yu(G)},yu.prototype.evaluate=function(b){var E=function(F){var G=F.content.evaluate(b);return Bo(G)===mu?new kc("",G,null,null,null):new kc(ff(G),null,F.scale?F.scale.evaluate(b):null,F.font?F.font.evaluate(b).join(","):null,F.textColor?F.textColor.evaluate(b):null)};return new Wn(this.sections.map(E))},yu.prototype.eachChild=function(b){for(var E=0,F=this.sections;E<F.length;E+=1){var G=F[E];b(G.content),G.scale&&b(G.scale),G.font&&b(G.font),G.textColor&&b(G.textColor)}},yu.prototype.outputDefined=function(){return!1},yu.prototype.serialize=function(){for(var b=["format"],E=0,F=this.sections;E<F.length;E+=1){var G=F[E];b.push(G.content.serialize());var W={};G.scale&&(W["font-scale"]=G.scale.serialize()),G.font&&(W["text-font"]=G.font.serialize()),G.textColor&&(W["text-color"]=G.textColor.serialize()),b.push(W)}return b};var qf=function(b){this.type=mu,this.input=b};qf.parse=function(b,E){if(b.length!==2)return E.error("Expected two arguments.");var F=E.parse(b[1],1,ri);return F?new qf(F):E.error("No image name provided.")},qf.prototype.evaluate=function(b){var E=this.input.evaluate(b),F=$s.fromString(E);return F&&b.availableImages&&(F.available=b.availableImages.indexOf(E)>-1),F},qf.prototype.eachChild=function(b){b(this.input)},qf.prototype.outputDefined=function(){return!1},qf.prototype.serialize=function(){return["image",this.input.serialize()]};var H0={"to-boolean":Hn,"to-color":Es,"to-number":Ha,"to-string":ri},Ol=function(b,E){this.type=b,this.args=E};Ol.parse=function(b,E){if(b.length<2)return E.error("Expected at least one argument.");var F=b[0];if((F==="to-boolean"||F==="to-string")&&b.length!==2)return E.error("Expected one argument.");for(var G=H0[F],W=[],J=1;J<b.length;J++){var fe=E.parse(b[J],J,Xn);if(!fe)return null;W.push(fe)}return new Ol(G,W)},Ol.prototype.evaluate=function(b){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(b));if(this.type.kind==="color"){for(var E,F,G=0,W=this.args;G<W.length;G+=1){var J=W[G];if(E=J.evaluate(b),F=null,E instanceof Si)return E;if(typeof E=="string"){var fe=b.parseColor(E);if(fe)return fe}else if(Array.isArray(E)&&(E.length<3||E.length>4?F="Invalid rbga value "+JSON.stringify(E)+": expected an array containing either three or four numeric values.":F=U0(E[0],E[1],E[2],E[3]),!F))return new Si(E[0]/255,E[1]/255,E[2]/255,E[3])}throw new fo(F||"Could not parse color from value '"+(typeof E=="string"?E:String(JSON.stringify(E)))+"'")}else if(this.type.kind==="number"){for(var Ae=null,Ce=0,De=this.args;Ce<De.length;Ce+=1){var Ve=De[Ce];if(Ae=Ve.evaluate(b),Ae===null)return 0;var ot=Number(Ae);if(!isNaN(ot))return ot}throw new fo("Could not convert "+JSON.stringify(Ae)+" to number.")}else return this.type.kind==="formatted"?Wn.fromString(ff(this.args[0].evaluate(b))):this.type.kind==="resolvedImage"?$s.fromString(ff(this.args[0].evaluate(b))):ff(this.args[0].evaluate(b))},Ol.prototype.eachChild=function(b){this.args.forEach(b)},Ol.prototype.outputDefined=function(){return this.args.every(function(b){return b.outputDefined()})},Ol.prototype.serialize=function(){if(this.type.kind==="formatted")return new yu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new qf(this.args[0]).serialize();var b=["to-"+this.type.kind];return this.eachChild(function(E){b.push(E.serialize())}),b};var Pm=["Unknown","Point","LineString","Polygon"],Ec=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ec.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ec.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Pm[this.feature.type]:this.feature.type:null},Ec.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ec.prototype.canonicalID=function(){return this.canonical},Ec.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ec.prototype.parseColor=function(b){var E=this._parseColorCache[b];return E||(E=this._parseColorCache[b]=Si.parse(b)),E};var Us=function(b,E,F,G){this.name=b,this.type=E,this._evaluate=F,this.args=G};Us.prototype.evaluate=function(b){return this._evaluate(b,this.args)},Us.prototype.eachChild=function(b){this.args.forEach(b)},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){return[this.name].concat(this.args.map(function(b){return b.serialize()}))},Us.parse=function(b,E){var F,G=b[0],W=Us.definitions[G];if(!W)return E.error('Unknown expression "'+G+'". If you wanted a literal array, use ["literal", [...]].',0);for(var J=Array.isArray(W)?W[0]:W.type,fe=Array.isArray(W)?[[W[1],W[2]]]:W.overloads,Ae=fe.filter(function(ja){var Za=ja[0];return!Array.isArray(Za)||Za.length===b.length-1}),Ce=null,De=0,Ve=Ae;De<Ve.length;De+=1){var ot=Ve[De],at=ot[0],mt=ot[1];Ce=new vf(E.registry,E.path,null,E.scope);for(var Ft=[],ur=!1,Zt=1;Zt<b.length;Zt++){var zr=b[Zt],xr=Array.isArray(at)?at[Zt-1]:at.type,Rr=Ce.parse(zr,1+Ft.length,xr);if(!Rr){ur=!0;break}Ft.push(Rr)}if(!ur){if(Array.isArray(at)&&at.length!==Ft.length){Ce.error("Expected "+at.length+" arguments, but found "+Ft.length+" instead.");continue}for(var Nr=0;Nr<Ft.length;Nr++){var na=Array.isArray(at)?at[Nr]:at.type,da=Ft[Nr];Ce.concat(Nr+1).checkSubtype(na,da.type)}if(Ce.errors.length===0)return new Us(G,J,mt,Ft)}}if(Ae.length===1)(F=E.errors).push.apply(F,Ce.errors);else{for(var ha=Ae.length?Ae:fe,Ka=ha.map(function(ja){var Za=ja[0];return D1(Za)}).join(" | "),Da=[],$a=1;$a<b.length;$a++){var An=E.parse(b[$a],1+Da.length);if(!An)return null;Da.push(Xi(An.type))}E.error("Expected arguments of type "+Ka+", but found ("+Da.join(", ")+") instead.")}return null},Us.register=function(b,E){Us.definitions=E;for(var F in E)b[F]=Us};function D1(x){return Array.isArray(x)?"("+x.map(Xi).join(", ")+")":"("+Xi(x.type)+"...)"}var cf=function(b,E,F){this.type=Ac,this.locale=F,this.caseSensitive=b,this.diacriticSensitive=E};cf.parse=function(b,E){if(b.length!==2)return E.error("Expected one argument.");var F=b[1];if(typeof F!="object"||Array.isArray(F))return E.error("Collator options argument must be an object.");var G=E.parse(F["case-sensitive"]===void 0?!1:F["case-sensitive"],1,Hn);if(!G)return null;var W=E.parse(F["diacritic-sensitive"]===void 0?!1:F["diacritic-sensitive"],1,Hn);if(!W)return null;var J=null;return F.locale&&(J=E.parse(F.locale,1,ri),!J)?null:new cf(G,W,J)},cf.prototype.evaluate=function(b){return new cv(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)},cf.prototype.eachChild=function(b){b(this.caseSensitive),b(this.diacriticSensitive),this.locale&&b(this.locale)},cf.prototype.outputDefined=function(){return!1},cf.prototype.serialize=function(){var b={};return b["case-sensitive"]=this.caseSensitive.serialize(),b["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(b.locale=this.locale.serialize()),["collator",b]};var $u=8192;function od(x,b){x[0]=Math.min(x[0],b[0]),x[1]=Math.min(x[1],b[1]),x[2]=Math.max(x[2],b[0]),x[3]=Math.max(x[3],b[1])}function G0(x){return(180+x)/360}function hv(x){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+x*Math.PI/360)))/360}function vv(x,b){return!(x[0]<=b[0]||x[2]>=b[2]||x[1]<=b[1]||x[3]>=b[3])}function V0(x,b){var E=G0(x[0]),F=hv(x[1]),G=Math.pow(2,b.z);return[Math.round(E*G*$u),Math.round(F*G*$u)]}function j0(x,b,E){var F=x[0]-b[0],G=x[1]-b[1],W=x[0]-E[0],J=x[1]-E[1];return F*J-W*G==0&&F*W<=0&&G*J<=0}function q0(x,b,E){return b[1]>x[1]!=E[1]>x[1]&&x[0]<(E[0]-b[0])*(x[1]-b[1])/(E[1]-b[1])+b[0]}function _p(x,b){for(var E=!1,F=0,G=b.length;F<G;F++)for(var W=b[F],J=0,fe=W.length;J<fe-1;J++){if(j0(x,W[J],W[J+1]))return!1;q0(x,W[J],W[J+1])&&(E=!E)}return E}function Y0(x,b){for(var E=0;E<b.length;E++)if(_p(x,b[E]))return!0;return!1}function W0(x,b){return x[0]*b[1]-x[1]*b[0]}function wp(x,b,E,F){var G=x[0]-E[0],W=x[1]-E[1],J=b[0]-E[0],fe=b[1]-E[1],Ae=F[0]-E[0],Ce=F[1]-E[1],De=G*Ce-Ae*W,Ve=J*Ce-Ae*fe;return De>0&&Ve<0||De<0&&Ve>0}function X0(x,b,E,F){var G=[b[0]-x[0],b[1]-x[1]],W=[F[0]-E[0],F[1]-E[1]];return W0(W,G)===0?!1:!!(wp(x,b,E,F)&&wp(E,F,x,b))}function Im(x,b,E){for(var F=0,G=E;F<G.length;F+=1)for(var W=G[F],J=0;J<W.length-1;++J)if(X0(x,b,W[J],W[J+1]))return!0;return!1}function Z0(x,b){for(var E=0;E<x.length;++E)if(!_p(x[E],b))return!1;for(var F=0;F<x.length-1;++F)if(Im(x[F],x[F+1],b))return!1;return!0}function Ph(x,b){for(var E=0;E<b.length;E++)if(Z0(x,b[E]))return!0;return!1}function Cc(x,b,E){for(var F=[],G=0;G<x.length;G++){for(var W=[],J=0;J<x[G].length;J++){var fe=V0(x[G][J],E);od(b,fe),W.push(fe)}F.push(W)}return F}function Tp(x,b,E){for(var F=[],G=0;G<x.length;G++){var W=Cc(x[G],b,E);F.push(W)}return F}function Ap(x,b,E,F){if(x[0]<E[0]||x[0]>E[2]){var G=F*.5,W=x[0]-E[0]>G?-F:E[0]-x[0]>G?F:0;W===0&&(W=x[0]-E[2]>G?-F:E[2]-x[0]>G?F:0),x[0]+=W}od(b,x)}function sd(x){x[0]=x[1]=1/0,x[2]=x[3]=-1/0}function K0(x,b,E,F){for(var G=Math.pow(2,F.z)*$u,W=[F.x*$u,F.y*$u],J=[],fe=0,Ae=x;fe<Ae.length;fe+=1)for(var Ce=Ae[fe],De=0,Ve=Ce;De<Ve.length;De+=1){var ot=Ve[De],at=[ot.x+W[0],ot.y+W[1]];Ap(at,b,E,G),J.push(at)}return J}function Dm(x,b,E,F){for(var G=Math.pow(2,F.z)*$u,W=[F.x*$u,F.y*$u],J=[],fe=0,Ae=x;fe<Ae.length;fe+=1){for(var Ce=Ae[fe],De=[],Ve=0,ot=Ce;Ve<ot.length;Ve+=1){var at=ot[Ve],mt=[at.x+W[0],at.y+W[1]];od(b,mt),De.push(mt)}J.push(De)}if(b[2]-b[0]<=G/2){sd(b);for(var Ft=0,ur=J;Ft<ur.length;Ft+=1)for(var Zt=ur[Ft],zr=0,xr=Zt;zr<xr.length;zr+=1){var Rr=xr[zr];Ap(Rr,b,E,G)}}return J}function R1(x,b){var E=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],G=x.canonicalID();if(b.type==="Polygon"){var W=Cc(b.coordinates,F,G),J=K0(x.geometry(),E,F,G);if(!vv(E,F))return!1;for(var fe=0,Ae=J;fe<Ae.length;fe+=1){var Ce=Ae[fe];if(!_p(Ce,W))return!1}}if(b.type==="MultiPolygon"){var De=Tp(b.coordinates,F,G),Ve=K0(x.geometry(),E,F,G);if(!vv(E,F))return!1;for(var ot=0,at=Ve;ot<at.length;ot+=1){var mt=at[ot];if(!Y0(mt,De))return!1}}return!0}function J0(x,b){var E=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],G=x.canonicalID();if(b.type==="Polygon"){var W=Cc(b.coordinates,F,G),J=Dm(x.geometry(),E,F,G);if(!vv(E,F))return!1;for(var fe=0,Ae=J;fe<Ae.length;fe+=1){var Ce=Ae[fe];if(!Z0(Ce,W))return!1}}if(b.type==="MultiPolygon"){var De=Tp(b.coordinates,F,G),Ve=Dm(x.geometry(),E,F,G);if(!vv(E,F))return!1;for(var ot=0,at=Ve;ot<at.length;ot+=1){var mt=at[ot];if(!Ph(mt,De))return!1}}return!0}var xu=function(b,E){this.type=Hn,this.geojson=b,this.geometries=E};xu.parse=function(b,E){if(b.length!==2)return E.error("'within' expression requires exactly one argument, but found "+(b.length-1)+" instead.");if(os(b[1])){var F=b[1];if(F.type==="FeatureCollection")for(var G=0;G<F.features.length;++G){var W=F.features[G].geometry.type;if(W==="Polygon"||W==="MultiPolygon")return new xu(F,F.features[G].geometry)}else if(F.type==="Feature"){var J=F.geometry.type;if(J==="Polygon"||J==="MultiPolygon")return new xu(F,F.geometry)}else if(F.type==="Polygon"||F.type==="MultiPolygon")return new xu(F,F)}return E.error("'within' expression requires valid geojson object that contains polygon geometry type.")},xu.prototype.evaluate=function(b){if(b.geometry()!=null&&b.canonicalID()!=null){if(b.geometryType()==="Point")return R1(b,this.geometries);if(b.geometryType()==="LineString")return J0(b,this.geometries)}return!1},xu.prototype.eachChild=function(){},xu.prototype.outputDefined=function(){return!0},xu.prototype.serialize=function(){return["within",this.geojson]};function Sp(x){if(x instanceof Us){if(x.name==="get"&&x.args.length===1)return!1;if(x.name==="feature-state")return!1;if(x.name==="has"&&x.args.length===1)return!1;if(x.name==="properties"||x.name==="geometry-type"||x.name==="id")return!1;if(/^filter-/.test(x.name))return!1}if(x instanceof xu)return!1;var b=!0;return x.eachChild(function(E){b&&!Sp(E)&&(b=!1)}),b}function ld(x){if(x instanceof Us&&x.name==="feature-state")return!1;var b=!0;return x.eachChild(function(E){b&&!ld(E)&&(b=!1)}),b}function dv(x,b){if(x instanceof Us&&b.indexOf(x.name)>=0)return!1;var E=!0;return x.eachChild(function(F){E&&!dv(F,b)&&(E=!1)}),E}var hf=function(b,E){this.type=E.type,this.name=b,this.boundExpression=E};hf.parse=function(b,E){if(b.length!==2||typeof b[1]!="string")return E.error("'var' expression requires exactly one string literal argument.");var F=b[1];return E.scope.has(F)?new hf(F,E.scope.get(F)):E.error('Unknown variable "'+F+'". Make sure "'+F+'" has been bound in an enclosing "let" expression before using it.',1)},hf.prototype.evaluate=function(b){return this.boundExpression.evaluate(b)},hf.prototype.eachChild=function(){},hf.prototype.outputDefined=function(){return!1},hf.prototype.serialize=function(){return["var",this.name]};var vf=function(b,E,F,G,W){E===void 0&&(E=[]),G===void 0&&(G=new of),W===void 0&&(W=[]),this.registry=b,this.path=E,this.key=E.map(function(J){return"["+J+"]"}).join(""),this.scope=G,this.errors=W,this.expectedType=F};vf.prototype.parse=function(b,E,F,G,W){return W===void 0&&(W={}),E?this.concat(E,F,G)._parse(b,W):this._parse(b,W)},vf.prototype._parse=function(b,E){(b===null||typeof b=="string"||typeof b=="boolean"||typeof b=="number")&&(b=["literal",b]);function F(De,Ve,ot){return ot==="assert"?new ps(Ve,[De]):ot==="coerce"?new Ol(Ve,[De]):De}if(Array.isArray(b)){if(b.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var G=b[0];if(typeof G!="string")return this.error("Expression name must be a string, but found "+typeof G+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var W=this.registry[G];if(W){var J=W.parse(b,this);if(!J)return null;if(this.expectedType){var fe=this.expectedType,Ae=J.type;if((fe.kind==="string"||fe.kind==="number"||fe.kind==="boolean"||fe.kind==="object"||fe.kind==="array")&&Ae.kind==="value")J=F(J,fe,E.typeAnnotation||"assert");else if((fe.kind==="color"||fe.kind==="formatted"||fe.kind==="resolvedImage")&&(Ae.kind==="value"||Ae.kind==="string"))J=F(J,fe,E.typeAnnotation||"coerce");else if(this.checkSubtype(fe,Ae))return null}if(!(J instanceof Cs)&&J.type.kind!=="resolvedImage"&&ud(J)){var Ce=new Ec;try{J=new Cs(J.type,J.evaluate(Ce))}catch(De){return this.error(De.message),null}}return J}return this.error('Unknown expression "'+G+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof b=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof b=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof b+" instead.")},vf.prototype.concat=function(b,E,F){var G=typeof b=="number"?this.path.concat(b):this.path,W=F?this.scope.concat(F):this.scope;return new vf(this.registry,G,E||null,W,this.errors)},vf.prototype.error=function(b){for(var E=[],F=arguments.length-1;F-- >0;)E[F]=arguments[F+1];var G=""+this.key+E.map(function(W){return"["+W+"]"}).join("");this.errors.push(new nf(G,b))},vf.prototype.checkSubtype=function(b,E){var F=Vf(b,E);return F&&this.error(F),F};function ud(x){if(x instanceof hf)return ud(x.boundExpression);if(x instanceof Us&&x.name==="error")return!1;if(x instanceof cf)return!1;if(x instanceof xu)return!1;var b=x instanceof Ol||x instanceof ps,E=!0;return x.eachChild(function(F){b?E=E&&ud(F):E=E&&F instanceof Cs}),E?Sp(x)&&dv(x,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function fd(x,b){for(var E=x.length-1,F=0,G=E,W=0,J,fe;F<=G;)if(W=Math.floor((F+G)/2),J=x[W],fe=x[W+1],J<=b){if(W===E||b<fe)return W;F=W+1}else if(J>b)G=W-1;else throw new fo("Input is not a number.");return 0}var df=function(b,E,F){this.type=b,this.input=E,this.labels=[],this.outputs=[];for(var G=0,W=F;G<W.length;G+=1){var J=W[G],fe=J[0],Ae=J[1];this.labels.push(fe),this.outputs.push(Ae)}};df.parse=function(b,E){if(b.length-1<4)return E.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if((b.length-1)%2!=0)return E.error("Expected an even number of arguments.");var F=E.parse(b[1],1,Ha);if(!F)return null;var G=[],W=null;E.expectedType&&E.expectedType.kind!=="value"&&(W=E.expectedType);for(var J=1;J<b.length;J+=2){var fe=J===1?-1/0:b[J],Ae=b[J+1],Ce=J,De=J+1;if(typeof fe!="number")return E.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ce);if(G.length&&G[G.length-1][0]>=fe)return E.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ce);var Ve=E.parse(Ae,De,W);if(!Ve)return null;W=W||Ve.type,G.push([fe,Ve])}return new df(W,F,G)},df.prototype.evaluate=function(b){var E=this.labels,F=this.outputs;if(E.length===1)return F[0].evaluate(b);var G=this.input.evaluate(b);if(G<=E[0])return F[0].evaluate(b);var W=E.length;if(G>=E[W-1])return F[W-1].evaluate(b);var J=fd(E,G);return F[J].evaluate(b)},df.prototype.eachChild=function(b){b(this.input);for(var E=0,F=this.outputs;E<F.length;E+=1){var G=F[E];b(G)}},df.prototype.outputDefined=function(){return this.outputs.every(function(b){return b.outputDefined()})},df.prototype.serialize=function(){for(var b=["step",this.input.serialize()],E=0;E<this.labels.length;E++)E>0&&b.push(this.labels[E]),b.push(this.outputs[E].serialize());return b};function gs(x,b,E){return x*(1-E)+b*E}function Lc(x,b,E){return new Si(gs(x.r,b.r,E),gs(x.g,b.g,E),gs(x.b,b.b,E),gs(x.a,b.a,E))}function cd(x,b,E){return x.map(function(F,G){return gs(F,b[G],E)})}var Kl=Object.freeze({__proto__:null,number:gs,color:Lc,array:cd}),Rm=.95047,zm=1,Fm=1.08883,Om=4/29,Ih=6/29,Q0=3*Ih*Ih,hd=Ih*Ih*Ih,z1=Math.PI/180,Mp=180/Math.PI;function Nl(x){return x>hd?Math.pow(x,1/3):x/Q0+Om}function pf(x){return x>Ih?x*x*x:Q0*(x-Om)}function pv(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function kp(x){return x/=255,x<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function eg(x){var b=kp(x.r),E=kp(x.g),F=kp(x.b),G=Nl((.4124564*b+.3575761*E+.1804375*F)/Rm),W=Nl((.2126729*b+.7151522*E+.072175*F)/zm),J=Nl((.0193339*b+.119192*E+.9503041*F)/Fm);return{l:116*W-16,a:500*(G-W),b:200*(W-J),alpha:x.a}}function tg(x){var b=(x.l+16)/116,E=isNaN(x.a)?b:b+x.a/500,F=isNaN(x.b)?b:b-x.b/200;return b=zm*pf(b),E=Rm*pf(E),F=Fm*pf(F),new Si(pv(3.2404542*E-1.5371385*b-.4985314*F),pv(-.969266*E+1.8760108*b+.041556*F),pv(.0556434*E-.2040259*b+1.0572252*F),x.alpha)}function Nm(x,b,E){return{l:gs(x.l,b.l,E),a:gs(x.a,b.a,E),b:gs(x.b,b.b,E),alpha:gs(x.alpha,b.alpha,E)}}function rg(x){var b=eg(x),E=b.l,F=b.a,G=b.b,W=Math.atan2(G,F)*Mp;return{h:W<0?W+360:W,c:Math.sqrt(F*F+G*G),l:E,alpha:x.a}}function co(x){var b=x.h*z1,E=x.c,F=x.l;return tg({l:F,a:Math.cos(b)*E,b:Math.sin(b)*E,alpha:x.alpha})}function gv(x,b,E){var F=b-x;return x+E*(F>180||F<-180?F-360*Math.round(F/360):F)}function $o(x,b,E){return{h:gv(x.h,b.h,E),c:gs(x.c,b.c,E),l:gs(x.l,b.l,E),alpha:gs(x.alpha,b.alpha,E)}}var Pc={forward:eg,reverse:tg,interpolate:Nm},Ic={forward:rg,reverse:co,interpolate:$o},Yf=Object.freeze({__proto__:null,lab:Pc,hcl:Ic}),Ls=function(b,E,F,G,W){this.type=b,this.operator=E,this.interpolation=F,this.input=G,this.labels=[],this.outputs=[];for(var J=0,fe=W;J<fe.length;J+=1){var Ae=fe[J],Ce=Ae[0],De=Ae[1];this.labels.push(Ce),this.outputs.push(De)}};Ls.interpolationFactor=function(b,E,F,G){var W=0;if(b.name==="exponential")W=Ep(E,b.base,F,G);else if(b.name==="linear")W=Ep(E,1,F,G);else if(b.name==="cubic-bezier"){var J=b.controlPoints,fe=new u(J[0],J[1],J[2],J[3]);W=fe.solve(Ep(E,1,F,G))}return W},Ls.parse=function(b,E){var F=b[0],G=b[1],W=b[2],J=b.slice(3);if(!Array.isArray(G)||G.length===0)return E.error("Expected an interpolation type expression.",1);if(G[0]==="linear")G={name:"linear"};else if(G[0]==="exponential"){var fe=G[1];if(typeof fe!="number")return E.error("Exponential interpolation requires a numeric base.",1,1);G={name:"exponential",base:fe}}else if(G[0]==="cubic-bezier"){var Ae=G.slice(1);if(Ae.length!==4||Ae.some(function(Zt){return typeof Zt!="number"||Zt<0||Zt>1}))return E.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);G={name:"cubic-bezier",controlPoints:Ae}}else return E.error("Unknown interpolation type "+String(G[0]),1,0);if(b.length-1<4)return E.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if((b.length-1)%2!=0)return E.error("Expected an even number of arguments.");if(W=E.parse(W,2,Ha),!W)return null;var Ce=[],De=null;F==="interpolate-hcl"||F==="interpolate-lab"?De=Es:E.expectedType&&E.expectedType.kind!=="value"&&(De=E.expectedType);for(var Ve=0;Ve<J.length;Ve+=2){var ot=J[Ve],at=J[Ve+1],mt=Ve+3,Ft=Ve+4;if(typeof ot!="number")return E.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',mt);if(Ce.length&&Ce[Ce.length-1][0]>=ot)return E.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',mt);var ur=E.parse(at,Ft,De);if(!ur)return null;De=De||ur.type,Ce.push([ot,ur])}return De.kind!=="number"&&De.kind!=="color"&&!(De.kind==="array"&&De.itemType.kind==="number"&&typeof De.N=="number")?E.error("Type "+Xi(De)+" is not interpolatable."):new Ls(De,F,G,W,Ce)},Ls.prototype.evaluate=function(b){var E=this.labels,F=this.outputs;if(E.length===1)return F[0].evaluate(b);var G=this.input.evaluate(b);if(G<=E[0])return F[0].evaluate(b);var W=E.length;if(G>=E[W-1])return F[W-1].evaluate(b);var J=fd(E,G),fe=E[J],Ae=E[J+1],Ce=Ls.interpolationFactor(this.interpolation,G,fe,Ae),De=F[J].evaluate(b),Ve=F[J+1].evaluate(b);return this.operator==="interpolate"?Kl[this.type.kind.toLowerCase()](De,Ve,Ce):this.operator==="interpolate-hcl"?Ic.reverse(Ic.interpolate(Ic.forward(De),Ic.forward(Ve),Ce)):Pc.reverse(Pc.interpolate(Pc.forward(De),Pc.forward(Ve),Ce))},Ls.prototype.eachChild=function(b){b(this.input);for(var E=0,F=this.outputs;E<F.length;E+=1){var G=F[E];b(G)}},Ls.prototype.outputDefined=function(){return this.outputs.every(function(b){return b.outputDefined()})},Ls.prototype.serialize=function(){var b;this.interpolation.name==="linear"?b=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?b=["linear"]:b=["exponential",this.interpolation.base]:b=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var E=[this.operator,b,this.input.serialize()],F=0;F<this.labels.length;F++)E.push(this.labels[F],this.outputs[F].serialize());return E};function Ep(x,b,E,F){var G=F-E,W=x-E;return G===0?0:b===1?W/G:(Math.pow(b,W)-1)/(Math.pow(b,G)-1)}var Uu=function(b,E){this.type=b,this.args=E};Uu.parse=function(b,E){if(b.length<2)return E.error("Expectected at least one argument.");var F=null,G=E.expectedType;G&&G.kind!=="value"&&(F=G);for(var W=[],J=0,fe=b.slice(1);J<fe.length;J+=1){var Ae=fe[J],Ce=E.parse(Ae,1+W.length,F,void 0,{typeAnnotation:"omit"});if(!Ce)return null;F=F||Ce.type,W.push(Ce)}var De=G&&W.some(function(Ve){return Vf(G,Ve.type)});return De?new Uu(Xn,W):new Uu(F,W)},Uu.prototype.evaluate=function(b){for(var E=null,F=0,G,W=0,J=this.args;W<J.length;W+=1){var fe=J[W];if(F++,E=fe.evaluate(b),E&&E instanceof $s&&!E.available&&(G||(G=E.name),E=null,F===this.args.length&&(E=G)),E!==null)break}return E},Uu.prototype.eachChild=function(b){this.args.forEach(b)},Uu.prototype.outputDefined=function(){return this.args.every(function(b){return b.outputDefined()})},Uu.prototype.serialize=function(){var b=["coalesce"];return this.eachChild(function(E){b.push(E.serialize())}),b};var Wf=function(b,E){this.type=E.type,this.bindings=[].concat(b),this.result=E};Wf.prototype.evaluate=function(b){return this.result.evaluate(b)},Wf.prototype.eachChild=function(b){for(var E=0,F=this.bindings;E<F.length;E+=1){var G=F[E];b(G[1])}b(this.result)},Wf.parse=function(b,E){if(b.length<4)return E.error("Expected at least 3 arguments, but found "+(b.length-1)+" instead.");for(var F=[],G=1;G<b.length-1;G+=2){var W=b[G];if(typeof W!="string")return E.error("Expected string, but found "+typeof W+" instead.",G);if(/[^a-zA-Z0-9_]/.test(W))return E.error("Variable names must contain only alphanumeric characters or '_'.",G);var J=E.parse(b[G+1],G+1);if(!J)return null;F.push([W,J])}var fe=E.parse(b[b.length-1],b.length-1,E.expectedType,F);return fe?new Wf(F,fe):null},Wf.prototype.outputDefined=function(){return this.result.outputDefined()},Wf.prototype.serialize=function(){for(var b=["let"],E=0,F=this.bindings;E<F.length;E+=1){var G=F[E],W=G[0],J=G[1];b.push(W,J.serialize())}return b.push(this.result.serialize()),b};var Dc=function(b,E,F){this.type=b,this.index=E,this.input=F};Dc.parse=function(b,E){if(b.length!==3)return E.error("Expected 2 arguments, but found "+(b.length-1)+" instead.");var F=E.parse(b[1],1,Ha),G=E.parse(b[2],2,Po(E.expectedType||Xn));if(!F||!G)return null;var W=G.type;return new Dc(W.itemType,F,G)},Dc.prototype.evaluate=function(b){var E=this.index.evaluate(b),F=this.input.evaluate(b);if(E<0)throw new fo("Array index out of bounds: "+E+" < 0.");if(E>=F.length)throw new fo("Array index out of bounds: "+E+" > "+(F.length-1)+".");if(E!==Math.floor(E))throw new fo("Array index must be an integer, but found "+E+" instead.");return F[E]},Dc.prototype.eachChild=function(b){b(this.index),b(this.input)},Dc.prototype.outputDefined=function(){return!1},Dc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Xf=function(b,E){this.type=Hn,this.needle=b,this.haystack=E};Xf.parse=function(b,E){if(b.length!==3)return E.error("Expected 2 arguments, but found "+(b.length-1)+" instead.");var F=E.parse(b[1],1,Xn),G=E.parse(b[2],2,Xn);return!F||!G?null:Mc(F.type,[Hn,ri,Ha,sf,Xn])?new Xf(F,G):E.error("Expected first argument to be of type boolean, string, number or null, but found "+Xi(F.type)+" instead")},Xf.prototype.evaluate=function(b){var E=this.needle.evaluate(b),F=this.haystack.evaluate(b);if(!F)return!1;if(!uf(E,["boolean","string","number","null"]))throw new fo("Expected first argument to be of type boolean, string, number or null, but found "+Xi(Bo(E))+" instead.");if(!uf(F,["string","array"]))throw new fo("Expected second argument to be of type array or string, but found "+Xi(Bo(F))+" instead.");return F.indexOf(E)>=0},Xf.prototype.eachChild=function(b){b(this.needle),b(this.haystack)},Xf.prototype.outputDefined=function(){return!0},Xf.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var bu=function(b,E,F){this.type=Ha,this.needle=b,this.haystack=E,this.fromIndex=F};bu.parse=function(b,E){if(b.length<=2||b.length>=5)return E.error("Expected 3 or 4 arguments, but found "+(b.length-1)+" instead.");var F=E.parse(b[1],1,Xn),G=E.parse(b[2],2,Xn);if(!F||!G)return null;if(!Mc(F.type,[Hn,ri,Ha,sf,Xn]))return E.error("Expected first argument to be of type boolean, string, number or null, but found "+Xi(F.type)+" instead");if(b.length===4){var W=E.parse(b[3],3,Ha);return W?new bu(F,G,W):null}else return new bu(F,G)},bu.prototype.evaluate=function(b){var E=this.needle.evaluate(b),F=this.haystack.evaluate(b);if(!uf(E,["boolean","string","number","null"]))throw new fo("Expected first argument to be of type boolean, string, number or null, but found "+Xi(Bo(E))+" instead.");if(!uf(F,["string","array"]))throw new fo("Expected second argument to be of type array or string, but found "+Xi(Bo(F))+" instead.");if(this.fromIndex){var G=this.fromIndex.evaluate(b);return F.indexOf(E,G)}return F.indexOf(E)},bu.prototype.eachChild=function(b){b(this.needle),b(this.haystack),this.fromIndex&&b(this.fromIndex)},bu.prototype.outputDefined=function(){return!1},bu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var b=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),b]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Rc=function(b,E,F,G,W,J){this.inputType=b,this.type=E,this.input=F,this.cases=G,this.outputs=W,this.otherwise=J};Rc.parse=function(b,E){if(b.length<5)return E.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(b.length%2!=1)return E.error("Expected an even number of arguments.");var F,G;E.expectedType&&E.expectedType.kind!=="value"&&(G=E.expectedType);for(var W={},J=[],fe=2;fe<b.length-1;fe+=2){var Ae=b[fe],Ce=b[fe+1];Array.isArray(Ae)||(Ae=[Ae]);var De=E.concat(fe);if(Ae.length===0)return De.error("Expected at least one branch label.");for(var Ve=0,ot=Ae;Ve<ot.length;Ve+=1){var at=ot[Ve];if(typeof at!="number"&&typeof at!="string")return De.error("Branch labels must be numbers or strings.");if(typeof at=="number"&&Math.abs(at)>Number.MAX_SAFE_INTEGER)return De.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof at=="number"&&Math.floor(at)!==at)return De.error("Numeric branch labels must be integer values.");if(!F)F=Bo(at);else if(De.checkSubtype(F,Bo(at)))return null;if(typeof W[String(at)]!="undefined")return De.error("Branch labels must be unique.");W[String(at)]=J.length}var mt=E.parse(Ce,fe,G);if(!mt)return null;G=G||mt.type,J.push(mt)}var Ft=E.parse(b[1],1,Xn);if(!Ft)return null;var ur=E.parse(b[b.length-1],b.length-1,G);return!ur||Ft.type.kind!=="value"&&E.concat(1).checkSubtype(F,Ft.type)?null:new Rc(F,G,Ft,W,J,ur)},Rc.prototype.evaluate=function(b){var E=this.input.evaluate(b),F=Bo(E)===this.inputType&&this.outputs[this.cases[E]]||this.otherwise;return F.evaluate(b)},Rc.prototype.eachChild=function(b){b(this.input),this.outputs.forEach(b),b(this.otherwise)},Rc.prototype.outputDefined=function(){return this.outputs.every(function(b){return b.outputDefined()})&&this.otherwise.outputDefined()},Rc.prototype.serialize=function(){for(var b=this,E=["match",this.input.serialize()],F=Object.keys(this.cases).sort(),G=[],W={},J=0,fe=F;J<fe.length;J+=1){var Ae=fe[J],Ce=W[this.cases[Ae]];Ce===void 0?(W[this.cases[Ae]]=G.length,G.push([this.cases[Ae],[Ae]])):G[Ce][1].push(Ae)}for(var De=function(Ft){return b.inputType.kind==="number"?Number(Ft):Ft},Ve=0,ot=G;Ve<ot.length;Ve+=1){var at=ot[Ve],Ce=at[0],mt=at[1];mt.length===1?E.push(De(mt[0])):E.push(mt.map(De)),E.push(this.outputs[outputIndex$1].serialize())}return E.push(this.otherwise.serialize()),E};var zc=function(b,E,F){this.type=b,this.branches=E,this.otherwise=F};zc.parse=function(b,E){if(b.length<4)return E.error("Expected at least 3 arguments, but found only "+(b.length-1)+".");if(b.length%2!=0)return E.error("Expected an odd number of arguments.");var F;E.expectedType&&E.expectedType.kind!=="value"&&(F=E.expectedType);for(var G=[],W=1;W<b.length-1;W+=2){var J=E.parse(b[W],W,Hn);if(!J)return null;var fe=E.parse(b[W+1],W+1,F);if(!fe)return null;G.push([J,fe]),F=F||fe.type}var Ae=E.parse(b[b.length-1],b.length-1,F);return Ae?new zc(F,G,Ae):null},zc.prototype.evaluate=function(b){for(var E=0,F=this.branches;E<F.length;E+=1){var G=F[E],W=G[0],J=G[1];if(W.evaluate(b))return J.evaluate(b)}return this.otherwise.evaluate(b)},zc.prototype.eachChild=function(b){for(var E=0,F=this.branches;E<F.length;E+=1){var G=F[E],W=G[0],J=G[1];b(W),b(J)}b(this.otherwise)},zc.prototype.outputDefined=function(){return this.branches.every(function(b){b[0];var E=b[1];return E.outputDefined()})&&this.otherwise.outputDefined()},zc.prototype.serialize=function(){var b=["case"];return this.eachChild(function(E){b.push(E.serialize())}),b};var gf=function(b,E,F,G){this.type=b,this.input=E,this.beginIndex=F,this.endIndex=G};gf.parse=function(b,E){if(b.length<=2||b.length>=5)return E.error("Expected 3 or 4 arguments, but found "+(b.length-1)+" instead.");var F=E.parse(b[1],1,Xn),G=E.parse(b[2],2,Ha);if(!F||!G)return null;if(!Mc(F.type,[Po(Xn),ri,Xn]))return E.error("Expected first argument to be of type array or string, but found "+Xi(F.type)+" instead");if(b.length===4){var W=E.parse(b[3],3,Ha);return W?new gf(F.type,F,G,W):null}else return new gf(F.type,F,G)},gf.prototype.evaluate=function(b){var E=this.input.evaluate(b),F=this.beginIndex.evaluate(b);if(!uf(E,["string","array"]))throw new fo("Expected first argument to be of type array or string, but found "+Xi(Bo(E))+" instead.");if(this.endIndex){var G=this.endIndex.evaluate(b);return E.slice(F,G)}return E.slice(F)},gf.prototype.eachChild=function(b){b(this.input),b(this.beginIndex),this.endIndex&&b(this.endIndex)},gf.prototype.outputDefined=function(){return!1},gf.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var b=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),b]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function ag(x,b){return x==="=="||x==="!="?b.kind==="boolean"||b.kind==="string"||b.kind==="number"||b.kind==="null"||b.kind==="value":b.kind==="string"||b.kind==="number"||b.kind==="value"}function F1(x,b,E){return b===E}function vd(x,b,E){return b!==E}function Bm(x,b,E){return b<E}function mf(x,b,E){return b>E}function dd(x,b,E){return b<=E}function pd(x,b,E){return b>=E}function mv(x,b,E,F){return F.compare(b,E)===0}function $m(x,b,E,F){return!mv(x,b,E,F)}function gd(x,b,E,F){return F.compare(b,E)<0}function ng(x,b,E,F){return F.compare(b,E)>0}function ig(x,b,E,F){return F.compare(b,E)<=0}function Um(x,b,E,F){return F.compare(b,E)>=0}function Fc(x,b,E){var F=x!=="=="&&x!=="!=";return function(){function G(W,J,fe){this.type=Hn,this.lhs=W,this.rhs=J,this.collator=fe,this.hasUntypedArgument=W.type.kind==="value"||J.type.kind==="value"}return G.parse=function(J,fe){if(J.length!==3&&J.length!==4)return fe.error("Expected two or three arguments.");var Ae=J[0],Ce=fe.parse(J[1],1,Xn);if(!Ce)return null;if(!ag(Ae,Ce.type))return fe.concat(1).error('"'+Ae+`" comparisons are not supported for type '`+Xi(Ce.type)+"'.");var De=fe.parse(J[2],2,Xn);if(!De)return null;if(!ag(Ae,De.type))return fe.concat(2).error('"'+Ae+`" comparisons are not supported for type '`+Xi(De.type)+"'.");if(Ce.type.kind!==De.type.kind&&Ce.type.kind!=="value"&&De.type.kind!=="value")return fe.error("Cannot compare types '"+Xi(Ce.type)+"' and '"+Xi(De.type)+"'.");F&&(Ce.type.kind==="value"&&De.type.kind!=="value"?Ce=new ps(De.type,[Ce]):Ce.type.kind!=="value"&&De.type.kind==="value"&&(De=new ps(Ce.type,[De])));var Ve=null;if(J.length===4){if(Ce.type.kind!=="string"&&De.type.kind!=="string"&&Ce.type.kind!=="value"&&De.type.kind!=="value")return fe.error("Cannot use collator to compare non-string types.");if(Ve=fe.parse(J[3],3,Ac),!Ve)return null}return new G(Ce,De,Ve)},G.prototype.evaluate=function(J){var fe=this.lhs.evaluate(J),Ae=this.rhs.evaluate(J);if(F&&this.hasUntypedArgument){var Ce=Bo(fe),De=Bo(Ae);if(Ce.kind!==De.kind||!(Ce.kind==="string"||Ce.kind==="number"))throw new fo('Expected arguments for "'+x+'" to be (string, string) or (number, number), but found ('+Ce.kind+", "+De.kind+") instead.")}if(this.collator&&!F&&this.hasUntypedArgument){var Ve=Bo(fe),ot=Bo(Ae);if(Ve.kind!=="string"||ot.kind!=="string")return b(J,fe,Ae)}return this.collator?E(J,fe,Ae,this.collator.evaluate(J)):b(J,fe,Ae)},G.prototype.eachChild=function(J){J(this.lhs),J(this.rhs),this.collator&&J(this.collator)},G.prototype.outputDefined=function(){return!0},G.prototype.serialize=function(){var J=[x];return this.eachChild(function(fe){J.push(fe.serialize())}),J},G}()}var og=Fc("==",F1,mv),_u=Fc("!=",vd,$m),Cp=Fc("<",Bm,gd),sg=Fc(">",mf,ng),yf=Fc("<=",dd,ig),lg=Fc(">=",pd,Um),Bl=function(b,E,F,G,W){this.type=ri,this.number=b,this.locale=E,this.currency=F,this.minFractionDigits=G,this.maxFractionDigits=W};Bl.parse=function(b,E){if(b.length!==3)return E.error("Expected two arguments.");var F=E.parse(b[1],1,Ha);if(!F)return null;var G=b[2];if(typeof G!="object"||Array.isArray(G))return E.error("NumberFormat options argument must be an object.");var W=null;if(G.locale&&(W=E.parse(G.locale,1,ri),!W))return null;var J=null;if(G.currency&&(J=E.parse(G.currency,1,ri),!J))return null;var fe=null;if(G["min-fraction-digits"]&&(fe=E.parse(G["min-fraction-digits"],1,Ha),!fe))return null;var Ae=null;return G["max-fraction-digits"]&&(Ae=E.parse(G["max-fraction-digits"],1,Ha),!Ae)?null:new Bl(F,W,J,fe,Ae)},Bl.prototype.evaluate=function(b){return new Intl.NumberFormat(this.locale?this.locale.evaluate(b):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(b):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(b):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(b):void 0}).format(this.number.evaluate(b))},Bl.prototype.eachChild=function(b){b(this.number),this.locale&&b(this.locale),this.currency&&b(this.currency),this.minFractionDigits&&b(this.minFractionDigits),this.maxFractionDigits&&b(this.maxFractionDigits)},Bl.prototype.outputDefined=function(){return!1},Bl.prototype.serialize=function(){var b={};return this.locale&&(b.locale=this.locale.serialize()),this.currency&&(b.currency=this.currency.serialize()),this.minFractionDigits&&(b["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(b["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),b]};var Jl=function(b){this.type=Ha,this.input=b};Jl.parse=function(b,E){if(b.length!==2)return E.error("Expected 1 argument, but found "+(b.length-1)+" instead.");var F=E.parse(b[1],1);return F?F.type.kind!=="array"&&F.type.kind!=="string"&&F.type.kind!=="value"?E.error("Expected argument of type string or array, but found "+Xi(F.type)+" instead."):new Jl(F):null},Jl.prototype.evaluate=function(b){var E=this.input.evaluate(b);if(typeof E=="string")return E.length;if(Array.isArray(E))return E.length;throw new fo("Expected value to be of type string or array, but found "+Xi(Bo(E))+" instead.")},Jl.prototype.eachChild=function(b){b(this.input)},Jl.prototype.outputDefined=function(){return!1},Jl.prototype.serialize=function(){var b=["length"];return this.eachChild(function(E){b.push(E.serialize())}),b};var Oc={"==":og,"!=":_u,">":sg,"<":Cp,">=":lg,"<=":yf,array:ps,at:Dc,boolean:ps,case:zc,coalesce:Uu,collator:cf,format:yu,image:qf,in:Xf,"index-of":bu,interpolate:Ls,"interpolate-hcl":Ls,"interpolate-lab":Ls,length:Jl,let:Wf,literal:Cs,match:Rc,number:ps,"number-format":Bl,object:ps,slice:gf,step:df,string:ps,"to-boolean":Ol,"to-color":Ol,"to-number":Ol,"to-string":Ol,var:hf,within:xu};function ug(x,b){var E=b[0],F=b[1],G=b[2],W=b[3];E=E.evaluate(x),F=F.evaluate(x),G=G.evaluate(x);var J=W?W.evaluate(x):1,fe=U0(E,F,G,J);if(fe)throw new fo(fe);return new Si(E/255*J,F/255*J,G/255*J,J)}function fg(x,b){return x in b}function yv(x,b){var E=b[x];return typeof E=="undefined"?null:E}function Hm(x,b,E,F){for(;E<=F;){var G=E+F>>1;if(b[G]===x)return!0;b[G]>x?F=G-1:E=G+1}return!1}function Nc(x){return{type:x}}Us.register(Oc,{error:[lf,[ri],function(x,b){var E=b[0];throw new fo(E.evaluate(x))}],typeof:[ri,[Xn],function(x,b){var E=b[0];return Xi(Bo(E.evaluate(x)))}],"to-rgba":[Po(Ha,4),[Es],function(x,b){var E=b[0];return E.evaluate(x).toArray()}],rgb:[Es,[Ha,Ha,Ha],ug],rgba:[Es,[Ha,Ha,Ha,Ha],ug],has:{type:Hn,overloads:[[[ri],function(x,b){var E=b[0];return fg(E.evaluate(x),x.properties())}],[[ri,Zl],function(x,b){var E=b[0],F=b[1];return fg(E.evaluate(x),F.evaluate(x))}]]},get:{type:Xn,overloads:[[[ri],function(x,b){var E=b[0];return yv(E.evaluate(x),x.properties())}],[[ri,Zl],function(x,b){var E=b[0],F=b[1];return yv(E.evaluate(x),F.evaluate(x))}]]},"feature-state":[Xn,[ri],function(x,b){var E=b[0];return yv(E.evaluate(x),x.featureState||{})}],properties:[Zl,[],function(x){return x.properties()}],"geometry-type":[ri,[],function(x){return x.geometryType()}],id:[Xn,[],function(x){return x.id()}],zoom:[Ha,[],function(x){return x.globals.zoom}],"heatmap-density":[Ha,[],function(x){return x.globals.heatmapDensity||0}],"line-progress":[Ha,[],function(x){return x.globals.lineProgress||0}],accumulated:[Xn,[],function(x){return x.globals.accumulated===void 0?null:x.globals.accumulated}],"+":[Ha,Nc(Ha),function(x,b){for(var E=0,F=0,G=b;F<G.length;F+=1){var W=G[F];E+=W.evaluate(x)}return E}],"*":[Ha,Nc(Ha),function(x,b){for(var E=1,F=0,G=b;F<G.length;F+=1){var W=G[F];E*=W.evaluate(x)}return E}],"-":{type:Ha,overloads:[[[Ha,Ha],function(x,b){var E=b[0],F=b[1];return E.evaluate(x)-F.evaluate(x)}],[[Ha],function(x,b){var E=b[0];return-E.evaluate(x)}]]},"/":[Ha,[Ha,Ha],function(x,b){var E=b[0],F=b[1];return E.evaluate(x)/F.evaluate(x)}],"%":[Ha,[Ha,Ha],function(x,b){var E=b[0],F=b[1];return E.evaluate(x)%F.evaluate(x)}],ln2:[Ha,[],function(){return Math.LN2}],pi:[Ha,[],function(){return Math.PI}],e:[Ha,[],function(){return Math.E}],"^":[Ha,[Ha,Ha],function(x,b){var E=b[0],F=b[1];return Math.pow(E.evaluate(x),F.evaluate(x))}],sqrt:[Ha,[Ha],function(x,b){var E=b[0];return Math.sqrt(E.evaluate(x))}],log10:[Ha,[Ha],function(x,b){var E=b[0];return Math.log(E.evaluate(x))/Math.LN10}],ln:[Ha,[Ha],function(x,b){var E=b[0];return Math.log(E.evaluate(x))}],log2:[Ha,[Ha],function(x,b){var E=b[0];return Math.log(E.evaluate(x))/Math.LN2}],sin:[Ha,[Ha],function(x,b){var E=b[0];return Math.sin(E.evaluate(x))}],cos:[Ha,[Ha],function(x,b){var E=b[0];return Math.cos(E.evaluate(x))}],tan:[Ha,[Ha],function(x,b){var E=b[0];return Math.tan(E.evaluate(x))}],asin:[Ha,[Ha],function(x,b){var E=b[0];return Math.asin(E.evaluate(x))}],acos:[Ha,[Ha],function(x,b){var E=b[0];return Math.acos(E.evaluate(x))}],atan:[Ha,[Ha],function(x,b){var E=b[0];return Math.atan(E.evaluate(x))}],min:[Ha,Nc(Ha),function(x,b){return Math.min.apply(Math,b.map(function(E){return E.evaluate(x)}))}],max:[Ha,Nc(Ha),function(x,b){return Math.max.apply(Math,b.map(function(E){return E.evaluate(x)}))}],abs:[Ha,[Ha],function(x,b){var E=b[0];return Math.abs(E.evaluate(x))}],round:[Ha,[Ha],function(x,b){var E=b[0],F=E.evaluate(x);return F<0?-Math.round(-F):Math.round(F)}],floor:[Ha,[Ha],function(x,b){var E=b[0];return Math.floor(E.evaluate(x))}],ceil:[Ha,[Ha],function(x,b){var E=b[0];return Math.ceil(E.evaluate(x))}],"filter-==":[Hn,[ri,Xn],function(x,b){var E=b[0],F=b[1];return x.properties()[E.value]===F.value}],"filter-id-==":[Hn,[Xn],function(x,b){var E=b[0];return x.id()===E.value}],"filter-type-==":[Hn,[ri],function(x,b){var E=b[0];return x.geometryType()===E.value}],"filter-<":[Hn,[ri,Xn],function(x,b){var E=b[0],F=b[1],G=x.properties()[E.value],W=F.value;return typeof G==typeof W&&G<W}],"filter-id-<":[Hn,[Xn],function(x,b){var E=b[0],F=x.id(),G=E.value;return typeof F==typeof G&&F<G}],"filter->":[Hn,[ri,Xn],function(x,b){var E=b[0],F=b[1],G=x.properties()[E.value],W=F.value;return typeof G==typeof W&&G>W}],"filter-id->":[Hn,[Xn],function(x,b){var E=b[0],F=x.id(),G=E.value;return typeof F==typeof G&&F>G}],"filter-<=":[Hn,[ri,Xn],function(x,b){var E=b[0],F=b[1],G=x.properties()[E.value],W=F.value;return typeof G==typeof W&&G<=W}],"filter-id-<=":[Hn,[Xn],function(x,b){var E=b[0],F=x.id(),G=E.value;return typeof F==typeof G&&F<=G}],"filter->=":[Hn,[ri,Xn],function(x,b){var E=b[0],F=b[1],G=x.properties()[E.value],W=F.value;return typeof G==typeof W&&G>=W}],"filter-id->=":[Hn,[Xn],function(x,b){var E=b[0],F=x.id(),G=E.value;return typeof F==typeof G&&F>=G}],"filter-has":[Hn,[Xn],function(x,b){var E=b[0];return E.value in x.properties()}],"filter-has-id":[Hn,[],function(x){return x.id()!==null&&x.id()!==void 0}],"filter-type-in":[Hn,[Po(ri)],function(x,b){var E=b[0];return E.value.indexOf(x.geometryType())>=0}],"filter-id-in":[Hn,[Po(Xn)],function(x,b){var E=b[0];return E.value.indexOf(x.id())>=0}],"filter-in-small":[Hn,[ri,Po(Xn)],function(x,b){var E=b[0],F=b[1];return F.value.indexOf(x.properties()[E.value])>=0}],"filter-in-large":[Hn,[ri,Po(Xn)],function(x,b){var E=b[0],F=b[1];return Hm(x.properties()[E.value],F.value,0,F.value.length-1)}],all:{type:Hn,overloads:[[[Hn,Hn],function(x,b){var E=b[0],F=b[1];return E.evaluate(x)&&F.evaluate(x)}],[Nc(Hn),function(x,b){for(var E=0,F=b;E<F.length;E+=1){var G=F[E];if(!G.evaluate(x))return!1}return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],function(x,b){var E=b[0],F=b[1];return E.evaluate(x)||F.evaluate(x)}],[Nc(Hn),function(x,b){for(var E=0,F=b;E<F.length;E+=1){var G=F[E];if(G.evaluate(x))return!0}return!1}]]},"!":[Hn,[Hn],function(x,b){var E=b[0];return!E.evaluate(x)}],"is-supported-script":[Hn,[ri],function(x,b){var E=b[0],F=x.globals&&x.globals.isSupportedScript;return F?F(E.evaluate(x)):!0}],upcase:[ri,[ri],function(x,b){var E=b[0];return E.evaluate(x).toUpperCase()}],downcase:[ri,[ri],function(x,b){var E=b[0];return E.evaluate(x).toLowerCase()}],concat:[ri,Nc(Xn),function(x,b){return b.map(function(E){return ff(E.evaluate(x))}).join("")}],"resolved-locale":[ri,[Ac],function(x,b){var E=b[0];return E.evaluate(x).resolvedLocale()}]});function Lp(x){return{result:"success",value:x}}function Bc(x){return{result:"error",value:x}}function $c(x){return x["property-type"]==="data-driven"||x["property-type"]==="cross-faded-data-driven"}function Gm(x){return!!x.expression&&x.expression.parameters.indexOf("zoom")>-1}function xv(x){return!!x.expression&&x.expression.interpolated}function Zi(x){return x instanceof Number?"number":x instanceof String?"string":x instanceof Boolean?"boolean":Array.isArray(x)?"array":x===null?"null":typeof x}function md(x){return typeof x=="object"&&x!==null&&!Array.isArray(x)}function cg(x){return x}function hg(x,b){var E=b.type==="color",F=x.stops&&typeof x.stops[0][0]=="object",G=F||x.property!==void 0,W=F||!G,J=x.type||(xv(b)?"exponential":"interval");if(E&&(x=wc({},x),x.stops&&(x.stops=x.stops.map(function(ha){return[ha[0],Si.parse(ha[1])]})),x.default?x.default=Si.parse(x.default):x.default=Si.parse(b.default)),x.colorSpace&&x.colorSpace!=="rgb"&&!Yf[x.colorSpace])throw new Error("Unknown color space: "+x.colorSpace);var fe,Ae,Ce;if(J==="exponential")fe=Pp;else if(J==="interval")fe=Uc;else if(J==="categorical"){fe=bv,Ae=Object.create(null);for(var De=0,Ve=x.stops;De<Ve.length;De+=1){var ot=Ve[De];Ae[ot[0]]=ot[1]}Ce=typeof x.stops[0][0]}else if(J==="identity")fe=Vm;else throw new Error('Unknown function type "'+J+'"');if(F){for(var at={},mt=[],Ft=0;Ft<x.stops.length;Ft++){var ur=x.stops[Ft],Zt=ur[0].zoom;at[Zt]===void 0&&(at[Zt]={zoom:Zt,type:x.type,property:x.property,default:x.default,stops:[]},mt.push(Zt)),at[Zt].stops.push([ur[0].value,ur[1]])}for(var zr=[],xr=0,Rr=mt;xr<Rr.length;xr+=1){var Nr=Rr[xr];zr.push([at[Nr].zoom,hg(at[Nr],b)])}var na={name:"linear"};return{kind:"composite",interpolationType:na,interpolationFactor:Ls.interpolationFactor.bind(void 0,na),zoomStops:zr.map(function(ha){return ha[0]}),evaluate:function(Ka,Da){var $a=Ka.zoom;return Pp({stops:zr,base:x.base},b,$a).evaluate($a,Da)}}}else if(W){var da=J==="exponential"?{name:"exponential",base:x.base!==void 0?x.base:1}:null;return{kind:"camera",interpolationType:da,interpolationFactor:Ls.interpolationFactor.bind(void 0,da),zoomStops:x.stops.map(function(ha){return ha[0]}),evaluate:function(ha){var Ka=ha.zoom;return fe(x,b,Ka,Ae,Ce)}}}else return{kind:"source",evaluate:function(Ka,Da){var $a=Da&&Da.properties?Da.properties[x.property]:void 0;return $a===void 0?yd(x.default,b.default):fe(x,b,$a,Ae,Ce)}}}function yd(x,b,E){if(x!==void 0)return x;if(b!==void 0)return b;if(E!==void 0)return E}function bv(x,b,E,F,G){var W=typeof E===G?F[E]:void 0;return yd(W,x.default,b.default)}function Uc(x,b,E){if(Zi(E)!=="number")return yd(x.default,b.default);var F=x.stops.length;if(F===1||E<=x.stops[0][0])return x.stops[0][1];if(E>=x.stops[F-1][0])return x.stops[F-1][1];var G=fd(x.stops.map(function(W){return W[0]}),E);return x.stops[G][1]}function Pp(x,b,E){var F=x.base!==void 0?x.base:1;if(Zi(E)!=="number")return yd(x.default,b.default);var G=x.stops.length;if(G===1||E<=x.stops[0][0])return x.stops[0][1];if(E>=x.stops[G-1][0])return x.stops[G-1][1];var W=fd(x.stops.map(function(Ve){return Ve[0]}),E),J=vg(E,F,x.stops[W][0],x.stops[W+1][0]),fe=x.stops[W][1],Ae=x.stops[W+1][1],Ce=Kl[b.type]||cg;if(x.colorSpace&&x.colorSpace!=="rgb"){var De=Yf[x.colorSpace];Ce=function(Ve,ot){return De.reverse(De.interpolate(De.forward(Ve),De.forward(ot),J))}}return typeof fe.evaluate=="function"?{evaluate:function(){for(var ot=[],at=arguments.length;at--;)ot[at]=arguments[at];var mt=fe.evaluate.apply(void 0,ot),Ft=Ae.evaluate.apply(void 0,ot);if(!(mt===void 0||Ft===void 0))return Ce(mt,Ft,J)}}:Ce(fe,Ae,J)}function Vm(x,b,E){return b.type==="color"?E=Si.parse(E):b.type==="formatted"?E=Wn.fromString(E.toString()):b.type==="resolvedImage"?E=$s.fromString(E.toString()):Zi(E)!==b.type&&(b.type!=="enum"||!b.values[E])&&(E=void 0),yd(E,x.default,b.default)}function vg(x,b,E,F){var G=F-E,W=x-E;return G===0?0:b===1?W/G:(Math.pow(b,W)-1)/(Math.pow(b,G)-1)}var bl=function(b,E){this.expression=b,this._warningHistory={},this._evaluator=new Ec,this._defaultValue=E?jm(E):null,this._enumValues=E&&E.type==="enum"?E.values:null};bl.prototype.evaluateWithoutErrorHandling=function(b,E,F,G,W,J){return this._evaluator.globals=b,this._evaluator.feature=E,this._evaluator.featureState=F,this._evaluator.canonical=G,this._evaluator.availableImages=W||null,this._evaluator.formattedSection=J,this.expression.evaluate(this._evaluator)},bl.prototype.evaluate=function(b,E,F,G,W,J){this._evaluator.globals=b,this._evaluator.feature=E||null,this._evaluator.featureState=F||null,this._evaluator.canonical=G,this._evaluator.availableImages=W||null,this._evaluator.formattedSection=J||null;try{var fe=this.expression.evaluate(this._evaluator);if(fe==null||typeof fe=="number"&&fe!==fe)return this._defaultValue;if(this._enumValues&&!(fe in this._enumValues))throw new fo("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ae){return JSON.stringify(Ae)}).join(", ")+", but found "+JSON.stringify(fe)+" instead.");return fe}catch(Ae){return this._warningHistory[Ae.message]||(this._warningHistory[Ae.message]=!0,typeof console!="undefined"&&console.warn(Ae.message)),this._defaultValue}};function xd(x){return Array.isArray(x)&&x.length>0&&typeof x[0]=="string"&&x[0]in Oc}function bd(x,b){var E=new vf(Oc,[],b?pg(b):void 0),F=E.parse(x,void 0,void 0,void 0,b&&b.type==="string"?{typeAnnotation:"coerce"}:void 0);return F?Lp(new bl(F,b)):Bc(E.errors)}var Hc=function(b,E){this.kind=b,this._styleExpression=E,this.isStateDependent=b!=="constant"&&!ld(E.expression)};Hc.prototype.evaluateWithoutErrorHandling=function(b,E,F,G,W,J){return this._styleExpression.evaluateWithoutErrorHandling(b,E,F,G,W,J)},Hc.prototype.evaluate=function(b,E,F,G,W,J){return this._styleExpression.evaluate(b,E,F,G,W,J)};var wu=function(b,E,F,G){this.kind=b,this.zoomStops=F,this._styleExpression=E,this.isStateDependent=b!=="camera"&&!ld(E.expression),this.interpolationType=G};wu.prototype.evaluateWithoutErrorHandling=function(b,E,F,G,W,J){return this._styleExpression.evaluateWithoutErrorHandling(b,E,F,G,W,J)},wu.prototype.evaluate=function(b,E,F,G,W,J){return this._styleExpression.evaluate(b,E,F,G,W,J)},wu.prototype.interpolationFactor=function(b,E,F){return this.interpolationType?Ls.interpolationFactor(this.interpolationType,b,E,F):0};function dg(x,b){if(x=bd(x,b),x.result==="error")return x;var E=x.value.expression,F=Sp(E);if(!F&&!$c(b))return Bc([new nf("","data expressions not supported")]);var G=dv(E,["zoom"]);if(!G&&!Gm(b))return Bc([new nf("","zoom expressions not supported")]);var W=Tu(E);if(!W&&!G)return Bc([new nf("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(W instanceof nf)return Bc([W]);if(W instanceof Ls&&!xv(b))return Bc([new nf("",'"interpolate" expressions cannot be used with this property')]);if(!W)return Lp(F?new Hc("constant",x.value):new Hc("source",x.value));var J=W instanceof Ls?W.interpolation:void 0;return Lp(F?new wu("camera",x.value,W.labels,J):new wu("composite",x.value,W.labels,J))}var _d=function(b,E){this._parameters=b,this._specification=E,wc(this,hg(this._parameters,this._specification))};_d.deserialize=function(b){return new _d(b._parameters,b._specification)},_d.serialize=function(b){return{_parameters:b._parameters,_specification:b._specification}};function O1(x,b){if(md(x))return new _d(x,b);if(xd(x)){var E=dg(x,b);if(E.result==="error")throw new Error(E.value.map(function(G){return G.key+": "+G.message}).join(", "));return E.value}else{var F=x;return typeof x=="string"&&b.type==="color"&&(F=Si.parse(x)),{kind:"constant",evaluate:function(){return F}}}}function Tu(x){var b=null;if(x instanceof Wf)b=Tu(x.result);else if(x instanceof Uu)for(var E=0,F=x.args;E<F.length;E+=1){var G=F[E];if(b=Tu(G),b)break}else(x instanceof df||x instanceof Ls)&&x.input instanceof Us&&x.input.name==="zoom"&&(b=x);return b instanceof nf||x.eachChild(function(W){var J=Tu(W);J instanceof nf?b=J:!b&&J?b=new nf("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):b&&J&&b!==J&&(b=new nf("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),b}function pg(x){var b={color:Es,string:ri,number:Ha,enum:ri,boolean:Hn,formatted:il,resolvedImage:mu};return x.type==="array"?Po(b[x.value]||Xn,x.length):b[x.type]}function jm(x){return x.type==="color"&&md(x.default)?new Si(0,0,0,0):x.type==="color"?Si.parse(x.default)||null:x.default===void 0?null:x.default}function Au(x){var b=x.key,E=x.value,F=x.valueSpec||{},G=x.objectElementValidators||{},W=x.style,J=x.styleSpec,fe=[],Ae=Zi(E);if(Ae!=="object")return[new wa(b,E,"object expected, "+Ae+" found")];for(var Ce in E){var De=Ce.split(".")[0],Ve=F[De]||F["*"],ot=void 0;if(G[De])ot=G[De];else if(F[De])ot=Ql;else if(G["*"])ot=G["*"];else if(F["*"])ot=Ql;else{fe.push(new wa(b,E[Ce],'unknown property "'+Ce+'"'));continue}fe=fe.concat(ot({key:(b&&b+".")+Ce,value:E[Ce],valueSpec:Ve,style:W,styleSpec:J,object:E,objectKey:Ce},E))}for(var at in F)G[at]||F[at].required&&F[at].default===void 0&&E[at]===void 0&&fe.push(new wa(b,E,'missing required property "'+at+'"'));return fe}function wd(x){var b=x.value,E=x.valueSpec,F=x.style,G=x.styleSpec,W=x.key,J=x.arrayElementValidator||Ql;if(Zi(b)!=="array")return[new wa(W,b,"array expected, "+Zi(b)+" found")];if(E.length&&b.length!==E.length)return[new wa(W,b,"array length "+E.length+" expected, length "+b.length+" found")];if(E["min-length"]&&b.length<E["min-length"])return[new wa(W,b,"array length at least "+E["min-length"]+" expected, length "+b.length+" found")];var fe={type:E.value,values:E.values};G.$version<7&&(fe.function=E.function),Zi(E.value)==="object"&&(fe=E.value);for(var Ae=[],Ce=0;Ce<b.length;Ce++)Ae=Ae.concat(J({array:b,arrayIndex:Ce,value:b[Ce],valueSpec:fe,style:F,styleSpec:G,key:W+"["+Ce+"]"}));return Ae}function Ip(x){var b=x.key,E=x.value,F=x.valueSpec,G=Zi(E);return G==="number"&&E!==E&&(G="NaN"),G!=="number"?[new wa(b,E,"number expected, "+G+" found")]:"minimum"in F&&E<F.minimum?[new wa(b,E,E+" is less than the minimum value "+F.minimum)]:"maximum"in F&&E>F.maximum?[new wa(b,E,E+" is greater than the maximum value "+F.maximum)]:[]}function ol(x){var b=x.valueSpec,E=Wo(x.value.type),F,G={},W,J,fe=E!=="categorical"&&x.value.property===void 0,Ae=!fe,Ce=Zi(x.value.stops)==="array"&&Zi(x.value.stops[0])==="array"&&Zi(x.value.stops[0][0])==="object",De=Au({key:x.key,value:x.value,valueSpec:x.styleSpec.function,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{stops:Ve,default:mt}});return E==="identity"&&fe&&De.push(new wa(x.key,x.value,'missing required property "property"')),E!=="identity"&&!x.value.stops&&De.push(new wa(x.key,x.value,'missing required property "stops"')),E==="exponential"&&x.valueSpec.expression&&!xv(x.valueSpec)&&De.push(new wa(x.key,x.value,"exponential functions not supported")),x.styleSpec.$version>=8&&(Ae&&!$c(x.valueSpec)?De.push(new wa(x.key,x.value,"property functions not supported")):fe&&!Gm(x.valueSpec)&&De.push(new wa(x.key,x.value,"zoom functions not supported"))),(E==="categorical"||Ce)&&x.value.property===void 0&&De.push(new wa(x.key,x.value,'"property" property is required')),De;function Ve(Ft){if(E==="identity")return[new wa(Ft.key,Ft.value,'identity function may not have a "stops" property')];var ur=[],Zt=Ft.value;return ur=ur.concat(wd({key:Ft.key,value:Zt,valueSpec:Ft.valueSpec,style:Ft.style,styleSpec:Ft.styleSpec,arrayElementValidator:ot})),Zi(Zt)==="array"&&Zt.length===0&&ur.push(new wa(Ft.key,Zt,"array must have at least one stop")),ur}function ot(Ft){var ur=[],Zt=Ft.value,zr=Ft.key;if(Zi(Zt)!=="array")return[new wa(zr,Zt,"array expected, "+Zi(Zt)+" found")];if(Zt.length!==2)return[new wa(zr,Zt,"array length 2 expected, length "+Zt.length+" found")];if(Ce){if(Zi(Zt[0])!=="object")return[new wa(zr,Zt,"object expected, "+Zi(Zt[0])+" found")];if(Zt[0].zoom===void 0)return[new wa(zr,Zt,"object stop key must have zoom")];if(Zt[0].value===void 0)return[new wa(zr,Zt,"object stop key must have value")];if(J&&J>Wo(Zt[0].zoom))return[new wa(zr,Zt[0].zoom,"stop zoom values must appear in ascending order")];Wo(Zt[0].zoom)!==J&&(J=Wo(Zt[0].zoom),W=void 0,G={}),ur=ur.concat(Au({key:zr+"[0]",value:Zt[0],valueSpec:{zoom:{}},style:Ft.style,styleSpec:Ft.styleSpec,objectElementValidators:{zoom:Ip,value:at}}))}else ur=ur.concat(at({key:zr+"[0]",value:Zt[0],valueSpec:{},style:Ft.style,styleSpec:Ft.styleSpec},Zt));return xd(Tc(Zt[1]))?ur.concat([new wa(zr+"[1]",Zt[1],"expressions are not allowed in function stops.")]):ur.concat(Ql({key:zr+"[1]",value:Zt[1],valueSpec:b,style:Ft.style,styleSpec:Ft.styleSpec}))}function at(Ft,ur){var Zt=Zi(Ft.value),zr=Wo(Ft.value),xr=Ft.value!==null?Ft.value:ur;if(!F)F=Zt;else if(Zt!==F)return[new wa(Ft.key,xr,Zt+" stop domain type must match previous stop domain type "+F)];if(Zt!=="number"&&Zt!=="string"&&Zt!=="boolean")return[new wa(Ft.key,xr,"stop domain value must be a number, string, or boolean")];if(Zt!=="number"&&E!=="categorical"){var Rr="number expected, "+Zt+" found";return $c(b)&&E===void 0&&(Rr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wa(Ft.key,xr,Rr)]}return E==="categorical"&&Zt==="number"&&(!isFinite(zr)||Math.floor(zr)!==zr)?[new wa(Ft.key,xr,"integer expected, found "+zr)]:E!=="categorical"&&Zt==="number"&&W!==void 0&&zr<W?[new wa(Ft.key,xr,"stop domain values must appear in ascending order")]:(W=zr,E==="categorical"&&zr in G?[new wa(Ft.key,xr,"stop domain values must be unique")]:(G[zr]=!0,[]))}function mt(Ft){return Ql({key:Ft.key,value:Ft.value,valueSpec:b,style:Ft.style,styleSpec:Ft.styleSpec})}}function Dh(x){var b=(x.expressionContext==="property"?dg:bd)(Tc(x.value),x.valueSpec);if(b.result==="error")return b.value.map(function(F){return new wa(""+x.key+F.key,x.value,F.message)});var E=b.value.expression||b.value._styleExpression.expression;if(x.expressionContext==="property"&&x.propertyKey==="text-font"&&!E.outputDefined())return[new wa(x.key,x.value,'Invalid data expression for "'+x.propertyKey+'". Output values must be contained as literals within the expression.')];if(x.expressionContext==="property"&&x.propertyType==="layout"&&!ld(E))return[new wa(x.key,x.value,'"feature-state" data expressions are not supported with layout properties.')];if(x.expressionContext==="filter"&&!ld(E))return[new wa(x.key,x.value,'"feature-state" data expressions are not supported with filters.')];if(x.expressionContext&&x.expressionContext.indexOf("cluster")===0){if(!dv(E,["zoom","feature-state"]))return[new wa(x.key,x.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(x.expressionContext==="cluster-initial"&&!Sp(E))return[new wa(x.key,x.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gg(x){var b=x.value,E=x.key,F=Zi(b);return F!=="boolean"?[new wa(E,b,"boolean expected, "+F+" found")]:[]}function Gc(x){var b=x.key,E=x.value,F=Zi(E);return F!=="string"?[new wa(b,E,"color expected, "+F+" found")]:$0(E)===null?[new wa(b,E,'color expected, "'+E+'" found')]:[]}function _v(x){var b=x.key,E=x.value,F=x.valueSpec,G=[];return Array.isArray(F.values)?F.values.indexOf(Wo(E))===-1&&G.push(new wa(b,E,"expected one of ["+F.values.join(", ")+"], "+JSON.stringify(E)+" found")):Object.keys(F.values).indexOf(Wo(E))===-1&&G.push(new wa(b,E,"expected one of ["+Object.keys(F.values).join(", ")+"], "+JSON.stringify(E)+" found")),G}function Td(x){if(x===!0||x===!1)return!0;if(!Array.isArray(x)||x.length===0)return!1;switch(x[0]){case"has":return x.length>=2&&x[1]!=="$id"&&x[1]!=="$type";case"in":return x.length>=3&&(typeof x[1]!="string"||Array.isArray(x[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return x.length!==3||Array.isArray(x[1])||Array.isArray(x[2]);case"any":case"all":for(var b=0,E=x.slice(1);b<E.length;b+=1){var F=E[b];if(!Td(F)&&typeof F!="boolean")return!1}return!0;default:return!0}}var N1={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dp(x){if(x==null)return{filter:function(){return!0},needGeometry:!1};Td(x)||(x=xf(x));var b=bd(x,N1);if(b.result==="error")throw new Error(b.value.map(function(F){return F.key+": "+F.message}).join(", "));var E=mg(x);return{filter:function(F,G,W){return b.value.evaluate(F,G,{},W)},needGeometry:E}}function wv(x,b){return x<b?-1:x>b?1:0}function mg(x){if(!Array.isArray(x))return!1;if(x[0]==="within")return!0;for(var b=1;b<x.length;b++)if(mg(x[b]))return!0;return!1}function xf(x){if(!x)return!0;var b=x[0];if(x.length<=1)return b!=="any";var E=b==="=="?Rp(x[1],x[2],"=="):b==="!="?Zf(Rp(x[1],x[2],"==")):b==="<"||b===">"||b==="<="||b===">="?Rp(x[1],x[2],b):b==="any"?Rh(x.slice(1)):b==="all"?["all"].concat(x.slice(1).map(xf)):b==="none"?["all"].concat(x.slice(1).map(xf).map(Zf)):b==="in"?zh(x[1],x.slice(2)):b==="!in"?Zf(zh(x[1],x.slice(2))):b==="has"?yg(x[1]):b==="!has"?Zf(yg(x[1])):b==="within"?x:!0;return E}function Rp(x,b,E){switch(x){case"$type":return["filter-type-"+E,b];case"$id":return["filter-id-"+E,b];default:return["filter-"+E,x,b]}}function Rh(x){return["any"].concat(x.map(xf))}function zh(x,b){if(b.length===0)return!1;switch(x){case"$type":return["filter-type-in",["literal",b]];case"$id":return["filter-id-in",["literal",b]];default:return b.length>200&&!b.some(function(E){return typeof E!=typeof b[0]})?["filter-in-large",x,["literal",b.sort(wv)]]:["filter-in-small",x,["literal",b]]}}function yg(x){switch(x){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",x]}}function Zf(x){return["!",x]}function zp(x){return Td(Tc(x.value))?Dh(wc({},x,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fh(x)}function Fh(x){var b=x.value,E=x.key;if(Zi(b)!=="array")return[new wa(E,b,"array expected, "+Zi(b)+" found")];var F=x.styleSpec,G,W=[];if(b.length<1)return[new wa(E,b,"filter array must have at least 1 element")];switch(W=W.concat(_v({key:E+"[0]",value:b[0],valueSpec:F.filter_operator,style:x.style,styleSpec:x.styleSpec})),Wo(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&Wo(b[1])==="$type"&&W.push(new wa(E,b,'"$type" cannot be use with operator "'+b[0]+'"'));case"==":case"!=":b.length!==3&&W.push(new wa(E,b,'filter array for operator "'+b[0]+'" must have 3 elements'));case"in":case"!in":b.length>=2&&(G=Zi(b[1]),G!=="string"&&W.push(new wa(E+"[1]",b[1],"string expected, "+G+" found")));for(var J=2;J<b.length;J++)G=Zi(b[J]),Wo(b[1])==="$type"?W=W.concat(_v({key:E+"["+J+"]",value:b[J],valueSpec:F.geometry_type,style:x.style,styleSpec:x.styleSpec})):G!=="string"&&G!=="number"&&G!=="boolean"&&W.push(new wa(E+"["+J+"]",b[J],"string, number, or boolean expected, "+G+" found"));break;case"any":case"all":case"none":for(var fe=1;fe<b.length;fe++)W=W.concat(Fh({key:E+"["+fe+"]",value:b[fe],style:x.style,styleSpec:x.styleSpec}));break;case"has":case"!has":G=Zi(b[1]),b.length!==2?W.push(new wa(E,b,'filter array for "'+b[0]+'" operator must have 2 elements')):G!=="string"&&W.push(new wa(E+"[1]",b[1],"string expected, "+G+" found"));break;case"within":G=Zi(b[1]),b.length!==2?W.push(new wa(E,b,'filter array for "'+b[0]+'" operator must have 2 elements')):G!=="object"&&W.push(new wa(E+"[1]",b[1],"object expected, "+G+" found"));break}return W}function Ad(x,b){var E=x.key,F=x.style,G=x.styleSpec,W=x.value,J=x.objectKey,fe=G[b+"_"+x.layerType];if(!fe)return[];var Ae=J.match(/^(.*)-transition$/);if(b==="paint"&&Ae&&fe[Ae[1]]&&fe[Ae[1]].transition)return Ql({key:E,value:W,valueSpec:G.transition,style:F,styleSpec:G});var Ce=x.valueSpec||fe[J];if(!Ce)return[new wa(E,W,'unknown property "'+J+'"')];var De;if(Zi(W)==="string"&&$c(Ce)&&!Ce.tokens&&(De=/^{([^}]+)}$/.exec(W)))return[new wa(E,W,'"'+J+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(De[1])+" }`.")];var Ve=[];return x.layerType==="symbol"&&(J==="text-field"&&F&&!F.glyphs&&Ve.push(new wa(E,W,'use of "text-field" requires a style "glyphs" property')),J==="text-font"&&md(Tc(W))&&Wo(W.type)==="identity"&&Ve.push(new wa(E,W,'"text-font" does not support identity functions'))),Ve.concat(Ql({key:x.key,value:W,valueSpec:Ce,style:F,styleSpec:G,expressionContext:"property",propertyType:b,propertyKey:J}))}function Sd(x){return Ad(x,"paint")}function Oh(x){return Ad(x,"layout")}function Md(x){var b=[],E=x.value,F=x.key,G=x.style,W=x.styleSpec;!E.type&&!E.ref&&b.push(new wa(F,E,'either "type" or "ref" is required'));var J=Wo(E.type),fe=Wo(E.ref);if(E.id)for(var Ae=Wo(E.id),Ce=0;Ce<x.arrayIndex;Ce++){var De=G.layers[Ce];Wo(De.id)===Ae&&b.push(new wa(F,E.id,'duplicate layer id "'+E.id+'", previously used at line '+De.id.__line__))}if("ref"in E){["type","source","source-layer","filter","layout"].forEach(function(mt){mt in E&&b.push(new wa(F,E[mt],'"'+mt+'" is prohibited for ref layers'))});var Ve;G.layers.forEach(function(mt){Wo(mt.id)===fe&&(Ve=mt)}),Ve?Ve.ref?b.push(new wa(F,E.ref,"ref cannot reference another ref layer")):J=Wo(Ve.type):b.push(new wa(F,E.ref,'ref layer "'+fe+'" not found'))}else if(J!=="background")if(!E.source)b.push(new wa(F,E,'missing required property "source"'));else{var ot=G.sources&&G.sources[E.source],at=ot&&Wo(ot.type);ot?at==="vector"&&J==="raster"?b.push(new wa(F,E.source,'layer "'+E.id+'" requires a raster source')):at==="raster"&&J!=="raster"?b.push(new wa(F,E.source,'layer "'+E.id+'" requires a vector source')):at==="vector"&&!E["source-layer"]?b.push(new wa(F,E,'layer "'+E.id+'" must specify a "source-layer"')):at==="raster-dem"&&J!=="hillshade"?b.push(new wa(F,E.source,"raster-dem source can only be used with layer type 'hillshade'.")):J==="line"&&E.paint&&E.paint["line-gradient"]&&(at!=="geojson"||!ot.lineMetrics)&&b.push(new wa(F,E,'layer "'+E.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):b.push(new wa(F,E.source,'source "'+E.source+'" not found'))}return b=b.concat(Au({key:F,value:E,valueSpec:W.layer,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ql({key:F+".type",value:E.type,valueSpec:W.layer.type,style:x.style,styleSpec:x.styleSpec,object:E,objectKey:"type"})},filter:zp,layout:function(Ft){return Au({layer:E,key:Ft.key,value:Ft.value,style:Ft.style,styleSpec:Ft.styleSpec,objectElementValidators:{"*":function(Zt){return Oh(wc({layerType:J},Zt))}}})},paint:function(Ft){return Au({layer:E,key:Ft.key,value:Ft.value,style:Ft.style,styleSpec:Ft.styleSpec,objectElementValidators:{"*":function(Zt){return Sd(wc({layerType:J},Zt))}}})}}})),b}function Hu(x){var b=x.value,E=x.key,F=Zi(b);return F!=="string"?[new wa(E,b,"string expected, "+F+" found")]:[]}var Tv={promoteId:Uo};function Vc(x){var b=x.value,E=x.key,F=x.styleSpec,G=x.style;if(!b.type)return[new wa(E,b,'"type" is required')];var W=Wo(b.type),J;switch(W){case"vector":case"raster":case"raster-dem":return J=Au({key:E,value:b,valueSpec:F["source_"+W.replace("-","_")],style:x.style,styleSpec:F,objectElementValidators:Tv}),J;case"geojson":if(J=Au({key:E,value:b,valueSpec:F.source_geojson,style:G,styleSpec:F,objectElementValidators:Tv}),b.cluster)for(var fe in b.clusterProperties){var Ae=b.clusterProperties[fe],Ce=Ae[0],De=Ae[1],Ve=typeof Ce=="string"?[Ce,["accumulated"],["get",fe]]:Ce;J.push.apply(J,Dh({key:E+"."+fe+".map",value:De,expressionContext:"cluster-map"})),J.push.apply(J,Dh({key:E+"."+fe+".reduce",value:Ve,expressionContext:"cluster-reduce"}))}return J;case"video":return Au({key:E,value:b,valueSpec:F.source_video,style:G,styleSpec:F});case"image":return Au({key:E,value:b,valueSpec:F.source_image,style:G,styleSpec:F});case"canvas":return[new wa(E,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _v({key:E+".type",value:b.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:G,styleSpec:F})}}function Uo(x){var b=x.key,E=x.value;if(Zi(E)==="string")return Hu({key:b,value:E});var F=[];for(var G in E)F.push.apply(F,Hu({key:b+"."+G,value:E[G]}));return F}function Nh(x){var b=x.value,E=x.styleSpec,F=E.light,G=x.style,W=[],J=Zi(b);if(b===void 0)return W;if(J!=="object")return W=W.concat([new wa("light",b,"object expected, "+J+" found")]),W;for(var fe in b){var Ae=fe.match(/^(.*)-transition$/);Ae&&F[Ae[1]]&&F[Ae[1]].transition?W=W.concat(Ql({key:fe,value:b[fe],valueSpec:E.transition,style:G,styleSpec:E})):F[fe]?W=W.concat(Ql({key:fe,value:b[fe],valueSpec:F[fe],style:G,styleSpec:E})):W=W.concat([new wa(fe,b[fe],'unknown property "'+fe+'"')])}return W}function jc(x){return Hu(x).length===0?[]:Dh(x)}function kd(x){return Hu(x).length===0?[]:Dh(x)}var Av={"*":function(){return[]},array:wd,boolean:gg,number:Ip,color:Gc,constants:_c,enum:_v,filter:zp,function:ol,layer:Md,object:Au,source:Vc,light:Nh,string:Hu,formatted:jc,resolvedImage:kd};function Ql(x){var b=x.value,E=x.valueSpec,F=x.styleSpec;if(E.expression&&md(Wo(b)))return ol(x);if(E.expression&&xd(Tc(b)))return Dh(x);if(E.type&&Av[E.type])return Av[E.type](x);var G=Au(wc({},x,{valueSpec:E.type?F[E.type]:E}));return G}function Ed(x){var b=x.value,E=x.key,F=Hu(x);return F.length||(b.indexOf("{fontstack}")===-1&&F.push(new wa(E,b,'"glyphs" url must include a "{fontstack}" token')),b.indexOf("{range}")===-1&&F.push(new wa(E,b,'"glyphs" url must include a "{range}" token'))),F}function hi(x,b){b===void 0&&(b=ea);var E=[];return E=E.concat(Ql({key:"",value:x,valueSpec:b.$root,styleSpec:b,style:x,objectElementValidators:{glyphs:Ed,"*":function(){return[]}}})),x.constants&&(E=E.concat(_c({key:"constants",value:x.constants,style:x,styleSpec:b}))),Sv(E)}hi.source=Su(Vc),hi.light=Su(Nh),hi.layer=Su(Md),hi.filter=Su(zp),hi.paintProperty=Su(Sd),hi.layoutProperty=Su(Oh);function Sv(x){return[].concat(x).sort(function(b,E){return b.line-E.line})}function Su(x){return function(){for(var b=[],E=arguments.length;E--;)b[E]=arguments[E];return Sv(x.apply(this,b))}}var eu=hi,Fi=eu.light,Gi=eu.paintProperty,Cd=eu.layoutProperty;function bf(x,b){var E=!1;if(b&&b.length)for(var F=0,G=b;F<G.length;F+=1){var W=G[F];x.fire(new In(new Error(W.message))),E=!0}return E}var _f=K,U=3;function K(x,b,E){var F=this.cells=[];if(x instanceof ArrayBuffer){this.arrayBuffer=x;var G=new Int32Array(this.arrayBuffer);x=G[0],b=G[1],E=G[2],this.d=b+2*E;for(var W=0;W<this.d*this.d;W++){var J=G[U+W],fe=G[U+W+1];F.push(J===fe?null:G.subarray(J,fe))}var Ae=G[U+F.length],Ce=G[U+F.length+1];this.keys=G.subarray(Ae,Ce),this.bboxes=G.subarray(Ce),this.insert=this._insertReadonly}else{this.d=b+2*E;for(var De=0;De<this.d*this.d;De++)F.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=x,this.padding=E,this.scale=b/x,this.uid=0;var Ve=E/b*x;this.min=-Ve,this.max=x+Ve}K.prototype.insert=function(x,b,E,F,G){this._forEachCell(b,E,F,G,this._insertCell,this.uid++),this.keys.push(x),this.bboxes.push(b),this.bboxes.push(E),this.bboxes.push(F),this.bboxes.push(G)},K.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},K.prototype._insertCell=function(x,b,E,F,G,W){this.cells[G].push(W)},K.prototype.query=function(x,b,E,F,G){var W=this.min,J=this.max;if(x<=W&&b<=W&&J<=E&&J<=F&&!G)return Array.prototype.slice.call(this.keys);var fe=[],Ae={};return this._forEachCell(x,b,E,F,this._queryCell,fe,Ae,G),fe},K.prototype._queryCell=function(x,b,E,F,G,W,J,fe){var Ae=this.cells[G];if(Ae!==null)for(var Ce=this.keys,De=this.bboxes,Ve=0;Ve<Ae.length;Ve++){var ot=Ae[Ve];if(J[ot]===void 0){var at=ot*4;(fe?fe(De[at+0],De[at+1],De[at+2],De[at+3]):x<=De[at+2]&&b<=De[at+3]&&E>=De[at+0]&&F>=De[at+1])?(J[ot]=!0,W.push(Ce[ot])):J[ot]=!1}}},K.prototype._forEachCell=function(x,b,E,F,G,W,J,fe){for(var Ae=this._convertToCellCoord(x),Ce=this._convertToCellCoord(b),De=this._convertToCellCoord(E),Ve=this._convertToCellCoord(F),ot=Ae;ot<=De;ot++)for(var at=Ce;at<=Ve;at++){var mt=this.d*at+ot;if(!(fe&&!fe(this._convertFromCellCoord(ot),this._convertFromCellCoord(at),this._convertFromCellCoord(ot+1),this._convertFromCellCoord(at+1)))&&G.call(this,x,b,E,F,mt,W,J,fe))return}},K.prototype._convertFromCellCoord=function(x){return(x-this.padding)/this.scale},K.prototype._convertToCellCoord=function(x){return Math.max(0,Math.min(this.d-1,Math.floor(x*this.scale)+this.padding))},K.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var x=this.cells,b=U+this.cells.length+1+1,E=0,F=0;F<this.cells.length;F++)E+=this.cells[F].length;var G=new Int32Array(b+E+this.keys.length+this.bboxes.length);G[0]=this.extent,G[1]=this.n,G[2]=this.padding;for(var W=b,J=0;J<x.length;J++){var fe=x[J];G[U+J]=W,G.set(fe,W),W+=fe.length}return G[U+x.length]=W,G.set(this.keys,W),W+=this.keys.length,G[U+x.length+1]=W,G.set(this.bboxes,W),W+=this.bboxes.length,G.buffer};var ne=self.ImageData,ve=self.ImageBitmap,ge={};function pe(x,b,E){E===void 0&&(E={}),Object.defineProperty(b,"_classRegistryKey",{value:x,writeable:!1}),ge[x]={klass:b,omit:E.omit||[],shallow:E.shallow||[]}}pe("Object",Object),_f.serialize=function(b,E){var F=b.toArrayBuffer();return E&&E.push(F),{buffer:F}},_f.deserialize=function(b){return new _f(b.buffer)},pe("Grid",_f),pe("Color",Si),pe("Error",Error),pe("ResolvedImage",$s),pe("StylePropertyFunction",_d),pe("StyleExpression",bl,{omit:["_evaluator"]}),pe("ZoomDependentExpression",wu),pe("ZoomConstantExpression",Hc),pe("CompoundExpression",Us,{omit:["_evaluate"]});for(var ze in Oc)Oc[ze]._classRegistryKey||pe("Expression_"+ze,Oc[ze]);function Le(x){return x&&typeof ArrayBuffer!="undefined"&&(x instanceof ArrayBuffer||x.constructor&&x.constructor.name==="ArrayBuffer")}function Ue(x){return ve&&x instanceof ve}function nt(x,b){if(x==null||typeof x=="boolean"||typeof x=="number"||typeof x=="string"||x instanceof Boolean||x instanceof Number||x instanceof String||x instanceof Date||x instanceof RegExp)return x;if(Le(x)||Ue(x))return b&&b.push(x),x;if(ArrayBuffer.isView(x)){var E=x;return b&&b.push(E.buffer),E}if(x instanceof ne)return b&&b.push(x.data.buffer),x;if(Array.isArray(x)){for(var F=[],G=0,W=x;G<W.length;G+=1){var J=W[G];F.push(nt(J,b))}return F}if(typeof x=="object"){var fe=x.constructor,Ae=fe._classRegistryKey;if(!Ae)throw new Error("can't serialize object of unregistered class");var Ce=fe.serialize?fe.serialize(x,b):{};if(!fe.serialize){for(var De in x)if(!!x.hasOwnProperty(De)&&!(ge[Ae].omit.indexOf(De)>=0)){var Ve=x[De];Ce[De]=ge[Ae].shallow.indexOf(De)>=0?Ve:nt(Ve,b)}x instanceof Error&&(Ce.message=x.message)}if(Ce.$name)throw new Error("$name property is reserved for worker serialization logic.");return Ae!=="Object"&&(Ce.$name=Ae),Ce}throw new Error("can't serialize object of type "+typeof x)}function tt(x){if(x==null||typeof x=="boolean"||typeof x=="number"||typeof x=="string"||x instanceof Boolean||x instanceof Number||x instanceof String||x instanceof Date||x instanceof RegExp||Le(x)||Ue(x)||ArrayBuffer.isView(x)||x instanceof ne)return x;if(Array.isArray(x))return x.map(tt);if(typeof x=="object"){var b=x.$name||"Object",E=ge[b],F=E.klass;if(!F)throw new Error("can't deserialize unregistered class "+b);if(F.deserialize)return F.deserialize(x);for(var G=Object.create(F.prototype),W=0,J=Object.keys(x);W<J.length;W+=1){var fe=J[W];if(fe!=="$name"){var Ae=x[fe];G[fe]=ge[b].shallow.indexOf(fe)>=0?Ae:tt(Ae)}}return G}throw new Error("can't deserialize object of type "+typeof x)}var xt=function(){this.first=!0};xt.prototype.update=function(b,E){var F=Math.floor(b);return this.first?(this.first=!1,this.lastIntegerZoom=F,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=F,!0):(this.lastFloorZoom>F?(this.lastIntegerZoom=F+1,this.lastIntegerZoomTime=E):this.lastFloorZoom<F&&(this.lastIntegerZoom=F,this.lastIntegerZoomTime=E),b!==this.lastZoom?(this.lastZoom=b,this.lastFloorZoom=F,!0):!1)};var st={"Latin-1 Supplement":function(x){return x>=128&&x<=255},Arabic:function(x){return x>=1536&&x<=1791},"Arabic Supplement":function(x){return x>=1872&&x<=1919},"Arabic Extended-A":function(x){return x>=2208&&x<=2303},"Hangul Jamo":function(x){return x>=4352&&x<=4607},"Unified Canadian Aboriginal Syllabics":function(x){return x>=5120&&x<=5759},Khmer:function(x){return x>=6016&&x<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(x){return x>=6320&&x<=6399},"General Punctuation":function(x){return x>=8192&&x<=8303},"Letterlike Symbols":function(x){return x>=8448&&x<=8527},"Number Forms":function(x){return x>=8528&&x<=8591},"Miscellaneous Technical":function(x){return x>=8960&&x<=9215},"Control Pictures":function(x){return x>=9216&&x<=9279},"Optical Character Recognition":function(x){return x>=9280&&x<=9311},"Enclosed Alphanumerics":function(x){return x>=9312&&x<=9471},"Geometric Shapes":function(x){return x>=9632&&x<=9727},"Miscellaneous Symbols":function(x){return x>=9728&&x<=9983},"Miscellaneous Symbols and Arrows":function(x){return x>=11008&&x<=11263},"CJK Radicals Supplement":function(x){return x>=11904&&x<=12031},"Kangxi Radicals":function(x){return x>=12032&&x<=12255},"Ideographic Description Characters":function(x){return x>=12272&&x<=12287},"CJK Symbols and Punctuation":function(x){return x>=12288&&x<=12351},Hiragana:function(x){return x>=12352&&x<=12447},Katakana:function(x){return x>=12448&&x<=12543},Bopomofo:function(x){return x>=12544&&x<=12591},"Hangul Compatibility Jamo":function(x){return x>=12592&&x<=12687},Kanbun:function(x){return x>=12688&&x<=12703},"Bopomofo Extended":function(x){return x>=12704&&x<=12735},"CJK Strokes":function(x){return x>=12736&&x<=12783},"Katakana Phonetic Extensions":function(x){return x>=12784&&x<=12799},"Enclosed CJK Letters and Months":function(x){return x>=12800&&x<=13055},"CJK Compatibility":function(x){return x>=13056&&x<=13311},"CJK Unified Ideographs Extension A":function(x){return x>=13312&&x<=19903},"Yijing Hexagram Symbols":function(x){return x>=19904&&x<=19967},"CJK Unified Ideographs":function(x){return x>=19968&&x<=40959},"Yi Syllables":function(x){return x>=40960&&x<=42127},"Yi Radicals":function(x){return x>=42128&&x<=42191},"Hangul Jamo Extended-A":function(x){return x>=43360&&x<=43391},"Hangul Syllables":function(x){return x>=44032&&x<=55215},"Hangul Jamo Extended-B":function(x){return x>=55216&&x<=55295},"Private Use Area":function(x){return x>=57344&&x<=63743},"CJK Compatibility Ideographs":function(x){return x>=63744&&x<=64255},"Arabic Presentation Forms-A":function(x){return x>=64336&&x<=65023},"Vertical Forms":function(x){return x>=65040&&x<=65055},"CJK Compatibility Forms":function(x){return x>=65072&&x<=65103},"Small Form Variants":function(x){return x>=65104&&x<=65135},"Arabic Presentation Forms-B":function(x){return x>=65136&&x<=65279},"Halfwidth and Fullwidth Forms":function(x){return x>=65280&&x<=65519}};function Vt(x){for(var b=0,E=x;b<E.length;b+=1){var F=E[b];if(Ht(F.charCodeAt(0)))return!0}return!1}function lr(x){for(var b=0,E=x;b<E.length;b+=1){var F=E[b];if(!kt(F.charCodeAt(0)))return!1}return!0}function kt(x){return!(st.Arabic(x)||st["Arabic Supplement"](x)||st["Arabic Extended-A"](x)||st["Arabic Presentation Forms-A"](x)||st["Arabic Presentation Forms-B"](x))}function $t(x){return x<11904?!1:!!(st["Bopomofo Extended"](x)||st.Bopomofo(x)||st["CJK Compatibility Forms"](x)||st["CJK Compatibility Ideographs"](x)||st["CJK Compatibility"](x)||st["CJK Radicals Supplement"](x)||st["CJK Strokes"](x)||st["CJK Symbols and Punctuation"](x)||st["CJK Unified Ideographs Extension A"](x)||st["CJK Unified Ideographs"](x)||st["Enclosed CJK Letters and Months"](x)||st["Halfwidth and Fullwidth Forms"](x)||st.Hiragana(x)||st["Ideographic Description Characters"](x)||st["Kangxi Radicals"](x)||st["Katakana Phonetic Extensions"](x)||st.Katakana(x)||st["Vertical Forms"](x)||st["Yi Radicals"](x)||st["Yi Syllables"](x))}function Ht(x){return x===746||x===747?!0:x<4352?!1:!!(st["Bopomofo Extended"](x)||st.Bopomofo(x)||st["CJK Compatibility Forms"](x)&&!(x>=65097&&x<=65103)||st["CJK Compatibility Ideographs"](x)||st["CJK Compatibility"](x)||st["CJK Radicals Supplement"](x)||st["CJK Strokes"](x)||st["CJK Symbols and Punctuation"](x)&&!(x>=12296&&x<=12305)&&!(x>=12308&&x<=12319)&&x!==12336||st["CJK Unified Ideographs Extension A"](x)||st["CJK Unified Ideographs"](x)||st["Enclosed CJK Letters and Months"](x)||st["Hangul Compatibility Jamo"](x)||st["Hangul Jamo Extended-A"](x)||st["Hangul Jamo Extended-B"](x)||st["Hangul Jamo"](x)||st["Hangul Syllables"](x)||st.Hiragana(x)||st["Ideographic Description Characters"](x)||st.Kanbun(x)||st["Kangxi Radicals"](x)||st["Katakana Phonetic Extensions"](x)||st.Katakana(x)&&x!==12540||st["Halfwidth and Fullwidth Forms"](x)&&x!==65288&&x!==65289&&x!==65293&&!(x>=65306&&x<=65310)&&x!==65339&&x!==65341&&x!==65343&&!(x>=65371&&x<=65503)&&x!==65507&&!(x>=65512&&x<=65519)||st["Small Form Variants"](x)&&!(x>=65112&&x<=65118)&&!(x>=65123&&x<=65126)||st["Unified Canadian Aboriginal Syllabics"](x)||st["Unified Canadian Aboriginal Syllabics Extended"](x)||st["Vertical Forms"](x)||st["Yijing Hexagram Symbols"](x)||st["Yi Syllables"](x)||st["Yi Radicals"](x))}function ar(x){return!!(st["Latin-1 Supplement"](x)&&(x===167||x===169||x===174||x===177||x===188||x===189||x===190||x===215||x===247)||st["General Punctuation"](x)&&(x===8214||x===8224||x===8225||x===8240||x===8241||x===8251||x===8252||x===8258||x===8263||x===8264||x===8265||x===8273)||st["Letterlike Symbols"](x)||st["Number Forms"](x)||st["Miscellaneous Technical"](x)&&(x>=8960&&x<=8967||x>=8972&&x<=8991||x>=8996&&x<=9e3||x===9003||x>=9085&&x<=9114||x>=9150&&x<=9165||x===9167||x>=9169&&x<=9179||x>=9186&&x<=9215)||st["Control Pictures"](x)&&x!==9251||st["Optical Character Recognition"](x)||st["Enclosed Alphanumerics"](x)||st["Geometric Shapes"](x)||st["Miscellaneous Symbols"](x)&&!(x>=9754&&x<=9759)||st["Miscellaneous Symbols and Arrows"](x)&&(x>=11026&&x<=11055||x>=11088&&x<=11097||x>=11192&&x<=11243)||st["CJK Symbols and Punctuation"](x)||st.Katakana(x)||st["Private Use Area"](x)||st["CJK Compatibility Forms"](x)||st["Small Form Variants"](x)||st["Halfwidth and Fullwidth Forms"](x)||x===8734||x===8756||x===8757||x>=9984&&x<=10087||x>=10102&&x<=10131||x===65532||x===65533)}function nr(x){return!(Ht(x)||ar(x))}function Gt(x){return st.Arabic(x)||st["Arabic Supplement"](x)||st["Arabic Extended-A"](x)||st["Arabic Presentation Forms-A"](x)||st["Arabic Presentation Forms-B"](x)}function Yr(x){return x>=1424&&x<=2303||st["Arabic Presentation Forms-A"](x)||st["Arabic Presentation Forms-B"](x)}function ya(x,b){return!(!b&&Yr(x)||x>=2304&&x<=3583||x>=3840&&x<=4255||st.Khmer(x))}function va(x){for(var b=0,E=x;b<E.length;b+=1){var F=E[b];if(Yr(F.charCodeAt(0)))return!0}return!1}function ba(x,b){for(var E=0,F=x;E<F.length;E+=1){var G=F[E];if(!ya(G.charCodeAt(0),b))return!1}return!0}var Ma={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ba=null,Ya=Ma.unavailable,Ta=null,un=function(x){x&&typeof x=="string"&&x.indexOf("NetworkError")>-1&&(Ya=Ma.error),Ba&&Ba(x)};function ai(){ho.fire(new en("pluginStateChange",{pluginStatus:Ya,pluginURL:Ta}))}var ho=new yn,Jn=function(){return Ya},pa=function(x){return x({pluginStatus:Ya,pluginURL:Ta}),ho.on("pluginStateChange",x),x},Sn=function(x,b,E){if(E===void 0&&(E=!1),Ya===Ma.deferred||Ya===Ma.loading||Ya===Ma.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ta=de.resolveURL(x),Ya=Ma.deferred,Ba=b,ai(),E||Dn()},Dn=function(){if(Ya!==Ma.deferred||!Ta)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ya=Ma.loading,ai(),Ta&&We({url:Ta},function(x){x?un(x):(Ya=Ma.loaded,ai())})},Ln={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ya===Ma.loaded||Ln.applyArabicShaping!=null},isLoading:function(){return Ya===Ma.loading},setState:function(b){Ya=b.pluginStatus,Ta=b.pluginURL},isParsed:function(){return Ln.applyArabicShaping!=null&&Ln.processBidirectionalText!=null&&Ln.processStyledBidirectionalText!=null},getPluginURL:function(){return Ta}},To=function(){!Ln.isLoading()&&!Ln.isLoaded()&&Jn()==="deferred"&&Dn()},Nn=function(b,E){this.zoom=b,E?(this.now=E.now,this.fadeDuration=E.fadeDuration,this.zoomHistory=E.zoomHistory,this.transition=E.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xt,this.transition={})};Nn.prototype.isSupportedScript=function(b){return ba(b,Ln.isLoaded())},Nn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Nn.prototype.getCrossfadeParameters=function(){var b=this.zoom,E=b-Math.floor(b),F=this.crossFadingFactor();return b>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:E+(1-E)*F}:{fromScale:.5,toScale:1,t:1-(1-F)*E}};var Ho=function(b,E){this.property=b,this.value=E,this.expression=O1(E===void 0?b.specification.default:E,b.specification)};Ho.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ho.prototype.possiblyEvaluate=function(b,E,F){return this.property.possiblyEvaluate(this,b,E,F)};var vo=function(b){this.property=b,this.value=new Ho(b,void 0)};vo.prototype.transitioned=function(b,E){return new Ps(this.property,this.value,E,w({},b.transition,this.transition),b.now)},vo.prototype.untransitioned=function(){return new Ps(this.property,this.value,null,{},0)};var Go=function(b){this._properties=b,this._values=Object.create(b.defaultTransitionablePropertyValues)};Go.prototype.getValue=function(b){return D(this._values[b].value.value)},Go.prototype.setValue=function(b,E){this._values.hasOwnProperty(b)||(this._values[b]=new vo(this._values[b].property)),this._values[b].value=new Ho(this._values[b].property,E===null?void 0:D(E))},Go.prototype.getTransition=function(b){return D(this._values[b].transition)},Go.prototype.setTransition=function(b,E){this._values.hasOwnProperty(b)||(this._values[b]=new vo(this._values[b].property)),this._values[b].transition=D(E)||void 0},Go.prototype.serialize=function(){for(var b={},E=0,F=Object.keys(this._values);E<F.length;E+=1){var G=F[E],W=this.getValue(G);W!==void 0&&(b[G]=W);var J=this.getTransition(G);J!==void 0&&(b[G+"-transition"]=J)}return b},Go.prototype.transitioned=function(b,E){for(var F=new Hs(this._properties),G=0,W=Object.keys(this._values);G<W.length;G+=1){var J=W[G];F._values[J]=this._values[J].transitioned(b,E._values[J])}return F},Go.prototype.untransitioned=function(){for(var b=new Hs(this._properties),E=0,F=Object.keys(this._values);E<F.length;E+=1){var G=F[E];b._values[G]=this._values[G].untransitioned()}return b};var Ps=function(b,E,F,G,W){this.property=b,this.value=E,this.begin=W+G.delay||0,this.end=this.begin+G.duration||0,b.specification.transition&&(G.delay||G.duration)&&(this.prior=F)};Ps.prototype.possiblyEvaluate=function(b,E,F){var G=b.now||0,W=this.value.possiblyEvaluate(b,E,F),J=this.prior;if(J){if(G>this.end)return this.prior=null,W;if(this.value.isDataDriven())return this.prior=null,W;if(G<this.begin)return J.possiblyEvaluate(b,E,F);var fe=(G-this.begin)/(this.end-this.begin);return this.property.interpolate(J.possiblyEvaluate(b,E,F),W,p(fe))}else return W};var Hs=function(b){this._properties=b,this._values=Object.create(b.defaultTransitioningPropertyValues)};Hs.prototype.possiblyEvaluate=function(b,E,F){for(var G=new Ao(this._properties),W=0,J=Object.keys(this._values);W<J.length;W+=1){var fe=J[W];G._values[fe]=this._values[fe].possiblyEvaluate(b,E,F)}return G},Hs.prototype.hasTransition=function(){for(var b=0,E=Object.keys(this._values);b<E.length;b+=1){var F=E[b];if(this._values[F].prior)return!0}return!1};var ss=function(b){this._properties=b,this._values=Object.create(b.defaultPropertyValues)};ss.prototype.getValue=function(b){return D(this._values[b].value)},ss.prototype.setValue=function(b,E){this._values[b]=new Ho(this._values[b].property,E===null?void 0:D(E))},ss.prototype.serialize=function(){for(var b={},E=0,F=Object.keys(this._values);E<F.length;E+=1){var G=F[E],W=this.getValue(G);W!==void 0&&(b[G]=W)}return b},ss.prototype.possiblyEvaluate=function(b,E,F){for(var G=new Ao(this._properties),W=0,J=Object.keys(this._values);W<J.length;W+=1){var fe=J[W];G._values[fe]=this._values[fe].possiblyEvaluate(b,E,F)}return G};var no=function(b,E,F){this.property=b,this.value=E,this.parameters=F};no.prototype.isConstant=function(){return this.value.kind==="constant"},no.prototype.constantOr=function(b){return this.value.kind==="constant"?this.value.value:b},no.prototype.evaluate=function(b,E,F,G){return this.property.evaluate(this.value,this.parameters,b,E,F,G)};var Ao=function(b){this._properties=b,this._values=Object.create(b.defaultPossiblyEvaluatedValues)};Ao.prototype.get=function(b){return this._values[b]};var tn=function(b){this.specification=b};tn.prototype.possiblyEvaluate=function(b,E){return b.expression.evaluate(E)},tn.prototype.interpolate=function(b,E,F){var G=Kl[this.specification.type];return G?G(b,E,F):b};var Wa=function(b,E){this.specification=b,this.overrides=E};Wa.prototype.possiblyEvaluate=function(b,E,F,G){return b.expression.kind==="constant"||b.expression.kind==="camera"?new no(this,{kind:"constant",value:b.expression.evaluate(E,null,{},F,G)},E):new no(this,b.expression,E)},Wa.prototype.interpolate=function(b,E,F){if(b.value.kind!=="constant"||E.value.kind!=="constant")return b;if(b.value.value===void 0||E.value.value===void 0)return new no(this,{kind:"constant",value:void 0},b.parameters);var G=Kl[this.specification.type];return G?new no(this,{kind:"constant",value:G(b.value.value,E.value.value,F)},b.parameters):b},Wa.prototype.evaluate=function(b,E,F,G,W,J){return b.kind==="constant"?b.value:b.evaluate(E,F,G,W,J)};var Mi=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.possiblyEvaluate=function(F,G,W,J){if(F.value===void 0)return new no(this,{kind:"constant",value:void 0},G);if(F.expression.kind==="constant"){var fe=F.expression.evaluate(G,null,{},W,J),Ae=F.property.specification.type==="resolvedImage",Ce=Ae&&typeof fe!="string"?fe.name:fe,De=this._calculate(Ce,Ce,Ce,G);return new no(this,{kind:"constant",value:De},G)}else if(F.expression.kind==="camera"){var Ve=this._calculate(F.expression.evaluate({zoom:G.zoom-1}),F.expression.evaluate({zoom:G.zoom}),F.expression.evaluate({zoom:G.zoom+1}),G);return new no(this,{kind:"constant",value:Ve},G)}else return new no(this,F.expression,G)},b.prototype.evaluate=function(F,G,W,J,fe,Ae){if(F.kind==="source"){var Ce=F.evaluate(G,W,J,fe,Ae);return this._calculate(Ce,Ce,Ce,G)}else return F.kind==="composite"?this._calculate(F.evaluate({zoom:Math.floor(G.zoom)-1},W,J),F.evaluate({zoom:Math.floor(G.zoom)},W,J),F.evaluate({zoom:Math.floor(G.zoom)+1},W,J),G):F.value},b.prototype._calculate=function(F,G,W,J){var fe=J.zoom;return fe>J.zoomHistory.lastIntegerZoom?{from:F,to:G}:{from:W,to:G}},b.prototype.interpolate=function(F){return F},b}(Wa),Io=function(b){this.specification=b};Io.prototype.possiblyEvaluate=function(b,E,F,G){if(b.value!==void 0)if(b.expression.kind==="constant"){var W=b.expression.evaluate(E,null,{},F,G);return this._calculate(W,W,W,E)}else return this._calculate(b.expression.evaluate(new Nn(Math.floor(E.zoom-1),E)),b.expression.evaluate(new Nn(Math.floor(E.zoom),E)),b.expression.evaluate(new Nn(Math.floor(E.zoom+1),E)),E)},Io.prototype._calculate=function(b,E,F,G){var W=G.zoom;return W>G.zoomHistory.lastIntegerZoom?{from:b,to:E}:{from:F,to:E}},Io.prototype.interpolate=function(b){return b};var ms=function(b){this.specification=b};ms.prototype.possiblyEvaluate=function(b,E,F,G){return!!b.expression.evaluate(E,null,{},F,G)},ms.prototype.interpolate=function(){return!1};var Ti=function(b){this.properties=b,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var E in b){var F=b[E];F.specification.overridable&&this.overridableProperties.push(E);var G=this.defaultPropertyValues[E]=new Ho(F,void 0),W=this.defaultTransitionablePropertyValues[E]=new vo(F);this.defaultTransitioningPropertyValues[E]=W.untransitioned(),this.defaultPossiblyEvaluatedValues[E]=G.possiblyEvaluate({})}};pe("DataDrivenProperty",Wa),pe("DataConstantProperty",tn),pe("CrossFadedDataDrivenProperty",Mi),pe("CrossFadedProperty",Io),pe("ColorRampProperty",ms);var _l="-transition",Is=function(x){function b(E,F){if(x.call(this),this.id=E.id,this.type=E.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},E.type!=="custom"&&(E=E,this.metadata=E.metadata,this.minzoom=E.minzoom,this.maxzoom=E.maxzoom,E.type!=="background"&&(this.source=E.source,this.sourceLayer=E["source-layer"],this.filter=E.filter),F.layout&&(this._unevaluatedLayout=new ss(F.layout)),F.paint)){this._transitionablePaint=new Go(F.paint);for(var G in E.paint)this.setPaintProperty(G,E.paint[G],{validate:!1});for(var W in E.layout)this.setLayoutProperty(W,E.layout[W],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ao(F.paint)}}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},b.prototype.getLayoutProperty=function(F){return F==="visibility"?this.visibility:this._unevaluatedLayout.getValue(F)},b.prototype.setLayoutProperty=function(F,G,W){if(W===void 0&&(W={}),G!=null){var J="layers."+this.id+".layout."+F;if(this._validate(Cd,J,F,G,W))return}if(F==="visibility"){this.visibility=G;return}this._unevaluatedLayout.setValue(F,G)},b.prototype.getPaintProperty=function(F){return R(F,_l)?this._transitionablePaint.getTransition(F.slice(0,-_l.length)):this._transitionablePaint.getValue(F)},b.prototype.setPaintProperty=function(F,G,W){if(W===void 0&&(W={}),G!=null){var J="layers."+this.id+".paint."+F;if(this._validate(Gi,J,F,G,W))return!1}if(R(F,_l))return this._transitionablePaint.setTransition(F.slice(0,-_l.length),G||void 0),!1;var fe=this._transitionablePaint._values[F],Ae=fe.property.specification["property-type"]==="cross-faded-data-driven",Ce=fe.value.isDataDriven(),De=fe.value;this._transitionablePaint.setValue(F,G),this._handleSpecialPaintPropertyUpdate(F);var Ve=this._transitionablePaint._values[F].value,ot=Ve.isDataDriven();return ot||Ce||Ae||this._handleOverridablePaintPropertyUpdate(F,De,Ve)},b.prototype._handleSpecialPaintPropertyUpdate=function(F){},b.prototype._handleOverridablePaintPropertyUpdate=function(F,G,W){return!1},b.prototype.isHidden=function(F){return this.minzoom&&F<this.minzoom||this.maxzoom&&F>=this.maxzoom?!0:this.visibility==="none"},b.prototype.updateTransitions=function(F){this._transitioningPaint=this._transitionablePaint.transitioned(F,this._transitioningPaint)},b.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},b.prototype.recalculate=function(F,G){F.getCrossfadeParameters&&(this._crossfadeParameters=F.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(F,void 0,G)),this.paint=this._transitioningPaint.possiblyEvaluate(F,void 0,G)},b.prototype.serialize=function(){var F={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(F.layout=F.layout||{},F.layout.visibility=this.visibility),N(F,function(G,W){return G!==void 0&&!(W==="layout"&&!Object.keys(G).length)&&!(W==="paint"&&!Object.keys(G).length)})},b.prototype._validate=function(F,G,W,J,fe){return fe===void 0&&(fe={}),fe&&fe.validate===!1?!1:bf(this,F.call(eu,{key:G,layerType:this.type,objectKey:W,value:J,styleSpec:ea,style:{glyphs:!0,sprite:!0}}))},b.prototype.is3D=function(){return!1},b.prototype.isTileClipped=function(){return!1},b.prototype.hasOffscreenPass=function(){return!1},b.prototype.resize=function(){},b.prototype.isStateDependent=function(){for(var F in this.paint._values){var G=this.paint.get(F);if(!(!(G instanceof no)||!$c(G.property.specification))&&(G.value.kind==="source"||G.value.kind==="composite")&&G.value.isStateDependent)return!0}return!1},b}(yn),Mu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Qi=function(b,E){this._structArray=b,this._pos1=E*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ld=128,wf=5,ui=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};ui.serialize=function(b,E){return b._trim(),E&&(b.isTransferred=!0,E.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}},ui.deserialize=function(b){var E=Object.create(this.prototype);return E.arrayBuffer=b.arrayBuffer,E.length=b.length,E.capacity=b.arrayBuffer.byteLength/E.bytesPerElement,E._refreshViews(),E},ui.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ui.prototype.clear=function(){this.length=0},ui.prototype.resize=function(b){this.reserve(b),this.length=b},ui.prototype.reserve=function(b){if(b>this.capacity){this.capacity=Math.max(b,Math.floor(this.capacity*wf),Ld),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var E=this.uint8;this._refreshViews(),E&&this.uint8.set(E)}},ui.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Do(x,b){b===void 0&&(b=1);var E=0,F=0,G=x.map(function(J){var fe=xg(J.type),Ae=E=Mv(E,Math.max(b,fe)),Ce=J.components||1;return F=Math.max(F,fe),E+=fe*Ce,{name:J.name,type:J.type,components:Ce,offset:Ae}}),W=Mv(E,Math.max(F,b));return{members:G,size:W,alignment:b}}function xg(x){return Mu[x].BYTES_PER_ELEMENT}function Mv(x,b){return Math.ceil(x/b)*b}var Bh=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G){var W=this.length;return this.resize(W+1),this.emplace(W,F,G)},b.prototype.emplace=function(F,G,W){var J=F*2;return this.int16[J+0]=G,this.int16[J+1]=W,F},b}(ui);Bh.prototype.bytesPerElement=4,pe("StructArrayLayout2i4",Bh);var qc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J){var fe=this.length;return this.resize(fe+1),this.emplace(fe,F,G,W,J)},b.prototype.emplace=function(F,G,W,J,fe){var Ae=F*4;return this.int16[Ae+0]=G,this.int16[Ae+1]=W,this.int16[Ae+2]=J,this.int16[Ae+3]=fe,F},b}(ui);qc.prototype.bytesPerElement=8,pe("StructArrayLayout4i8",qc);var Yc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,F,G,W,J,fe,Ae)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce){var De=F*6;return this.int16[De+0]=G,this.int16[De+1]=W,this.int16[De+2]=J,this.int16[De+3]=fe,this.int16[De+4]=Ae,this.int16[De+5]=Ce,F},b}(ui);Yc.prototype.bytesPerElement=12,pe("StructArrayLayout2i4i12",Yc);var Wc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,F,G,W,J,fe,Ae)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce){var De=F*4,Ve=F*8;return this.int16[De+0]=G,this.int16[De+1]=W,this.uint8[Ve+4]=J,this.uint8[Ve+5]=fe,this.uint8[Ve+6]=Ae,this.uint8[Ve+7]=Ce,F},b}(ui);Wc.prototype.bytesPerElement=8,pe("StructArrayLayout2i4ub8",Wc);var $l=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot){var at=this.length;return this.resize(at+1),this.emplace(at,F,G,W,J,fe,Ae,Ce,De,Ve,ot)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at){var mt=F*9,Ft=F*18;return this.uint16[mt+0]=G,this.uint16[mt+1]=W,this.uint16[mt+2]=J,this.uint16[mt+3]=fe,this.uint16[mt+4]=Ae,this.uint16[mt+5]=Ce,this.uint16[mt+6]=De,this.uint16[mt+7]=Ve,this.uint8[Ft+16]=ot,this.uint8[Ft+17]=at,F},b}(ui);$l.prototype.bytesPerElement=18,pe("StructArrayLayout8ui2ub18",$l);var Xc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt){var Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft){var ur=F*12;return this.int16[ur+0]=G,this.int16[ur+1]=W,this.int16[ur+2]=J,this.int16[ur+3]=fe,this.uint16[ur+4]=Ae,this.uint16[ur+5]=Ce,this.uint16[ur+6]=De,this.uint16[ur+7]=Ve,this.int16[ur+8]=ot,this.int16[ur+9]=at,this.int16[ur+10]=mt,this.int16[ur+11]=Ft,F},b}(ui);Xc.prototype.bytesPerElement=24,pe("StructArrayLayout4i4ui4i24",Xc);var B1=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W){var J=this.length;return this.resize(J+1),this.emplace(J,F,G,W)},b.prototype.emplace=function(F,G,W,J){var fe=F*3;return this.float32[fe+0]=G,this.float32[fe+1]=W,this.float32[fe+2]=J,F},b}(ui);B1.prototype.bytesPerElement=12,pe("StructArrayLayout3f12",B1);var $1=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F){var G=this.length;return this.resize(G+1),this.emplace(G,F)},b.prototype.emplace=function(F,G){var W=F*1;return this.uint32[W+0]=G,F},b}(ui);$1.prototype.bytesPerElement=4,pe("StructArrayLayout1ul4",$1);var bg=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae,Ce,De,Ve){var ot=this.length;return this.resize(ot+1),this.emplace(ot,F,G,W,J,fe,Ae,Ce,De,Ve)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot){var at=F*10,mt=F*5;return this.int16[at+0]=G,this.int16[at+1]=W,this.int16[at+2]=J,this.int16[at+3]=fe,this.int16[at+4]=Ae,this.int16[at+5]=Ce,this.uint32[mt+3]=De,this.uint16[at+8]=Ve,this.uint16[at+9]=ot,F},b}(ui);bg.prototype.bytesPerElement=20,pe("StructArrayLayout6i1ul2ui20",bg);var Kf=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,F,G,W,J,fe,Ae)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce){var De=F*6;return this.int16[De+0]=G,this.int16[De+1]=W,this.int16[De+2]=J,this.int16[De+3]=fe,this.int16[De+4]=Ae,this.int16[De+5]=Ce,F},b}(ui);Kf.prototype.bytesPerElement=12,pe("StructArrayLayout2i2i2i12",Kf);var Zc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,F,G,W,J,fe)},b.prototype.emplace=function(F,G,W,J,fe,Ae){var Ce=F*4,De=F*8;return this.float32[Ce+0]=G,this.float32[Ce+1]=W,this.float32[Ce+2]=J,this.int16[De+6]=fe,this.int16[De+7]=Ae,F},b}(ui);Zc.prototype.bytesPerElement=16,pe("StructArrayLayout2f1f2i16",Zc);var tu=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J){var fe=this.length;return this.resize(fe+1),this.emplace(fe,F,G,W,J)},b.prototype.emplace=function(F,G,W,J,fe){var Ae=F*12,Ce=F*3;return this.uint8[Ae+0]=G,this.uint8[Ae+1]=W,this.float32[Ce+1]=J,this.float32[Ce+2]=fe,F},b}(ui);tu.prototype.bytesPerElement=12,pe("StructArrayLayout2ub2f12",tu);var Kc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W){var J=this.length;return this.resize(J+1),this.emplace(J,F,G,W)},b.prototype.emplace=function(F,G,W,J){var fe=F*3;return this.uint16[fe+0]=G,this.uint16[fe+1]=W,this.uint16[fe+2]=J,F},b}(ui);Kc.prototype.bytesPerElement=6,pe("StructArrayLayout3ui6",Kc);var _g=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr){var Rr=this.length;return this.resize(Rr+1),this.emplace(Rr,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr,Rr){var Nr=F*24,na=F*12,da=F*48;return this.int16[Nr+0]=G,this.int16[Nr+1]=W,this.uint16[Nr+2]=J,this.uint16[Nr+3]=fe,this.uint32[na+2]=Ae,this.uint32[na+3]=Ce,this.uint32[na+4]=De,this.uint16[Nr+10]=Ve,this.uint16[Nr+11]=ot,this.uint16[Nr+12]=at,this.float32[na+7]=mt,this.float32[na+8]=Ft,this.uint8[da+36]=ur,this.uint8[da+37]=Zt,this.uint8[da+38]=zr,this.uint32[na+10]=xr,this.int16[Nr+22]=Rr,F},b}(ui);_g.prototype.bytesPerElement=48,pe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_g);var wg=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr,Rr,Nr,na,da,ha,Ka,Da,$a,An,ja,Za){var Bn=this.length;return this.resize(Bn+1),this.emplace(Bn,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr,Rr,Nr,na,da,ha,Ka,Da,$a,An,ja,Za)},b.prototype.emplace=function(F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr,Rr,Nr,na,da,ha,Ka,Da,$a,An,ja,Za,Bn){var wn=F*34,mi=F*17;return this.int16[wn+0]=G,this.int16[wn+1]=W,this.int16[wn+2]=J,this.int16[wn+3]=fe,this.int16[wn+4]=Ae,this.int16[wn+5]=Ce,this.int16[wn+6]=De,this.int16[wn+7]=Ve,this.uint16[wn+8]=ot,this.uint16[wn+9]=at,this.uint16[wn+10]=mt,this.uint16[wn+11]=Ft,this.uint16[wn+12]=ur,this.uint16[wn+13]=Zt,this.uint16[wn+14]=zr,this.uint16[wn+15]=xr,this.uint16[wn+16]=Rr,this.uint16[wn+17]=Nr,this.uint16[wn+18]=na,this.uint16[wn+19]=da,this.uint16[wn+20]=ha,this.uint16[wn+21]=Ka,this.uint16[wn+22]=Da,this.uint32[mi+12]=$a,this.float32[mi+13]=An,this.float32[mi+14]=ja,this.float32[mi+15]=Za,this.float32[mi+16]=Bn,F},b}(ui);wg.prototype.bytesPerElement=68,pe("StructArrayLayout8i15ui1ul4f68",wg);var Fp=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F){var G=this.length;return this.resize(G+1),this.emplace(G,F)},b.prototype.emplace=function(F,G){var W=F*1;return this.float32[W+0]=G,F},b}(ui);Fp.prototype.bytesPerElement=4,pe("StructArrayLayout1f4",Fp);var Tf=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W){var J=this.length;return this.resize(J+1),this.emplace(J,F,G,W)},b.prototype.emplace=function(F,G,W,J){var fe=F*3;return this.int16[fe+0]=G,this.int16[fe+1]=W,this.int16[fe+2]=J,F},b}(ui);Tf.prototype.bytesPerElement=6,pe("StructArrayLayout3i6",Tf);var $h=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W){var J=this.length;return this.resize(J+1),this.emplace(J,F,G,W)},b.prototype.emplace=function(F,G,W,J){var fe=F*2,Ae=F*4;return this.uint32[fe+0]=G,this.uint16[Ae+2]=W,this.uint16[Ae+3]=J,F},b}(ui);$h.prototype.bytesPerElement=8,pe("StructArrayLayout1ul2ui8",$h);var Jc=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G){var W=this.length;return this.resize(W+1),this.emplace(W,F,G)},b.prototype.emplace=function(F,G,W){var J=F*2;return this.uint16[J+0]=G,this.uint16[J+1]=W,F},b}(ui);Jc.prototype.bytesPerElement=4,pe("StructArrayLayout2ui4",Jc);var Gu=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F){var G=this.length;return this.resize(G+1),this.emplace(G,F)},b.prototype.emplace=function(F,G){var W=F*1;return this.uint16[W+0]=G,F},b}(ui);Gu.prototype.bytesPerElement=2,pe("StructArrayLayout1ui2",Gu);var Uh=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G){var W=this.length;return this.resize(W+1),this.emplace(W,F,G)},b.prototype.emplace=function(F,G,W){var J=F*2;return this.float32[J+0]=G,this.float32[J+1]=W,F},b}(ui);Uh.prototype.bytesPerElement=8,pe("StructArrayLayout2f8",Uh);var Tg=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(F,G,W,J){var fe=this.length;return this.resize(fe+1),this.emplace(fe,F,G,W,J)},b.prototype.emplace=function(F,G,W,J,fe){var Ae=F*4;return this.float32[Ae+0]=G,this.float32[Ae+1]=W,this.float32[Ae+2]=J,this.float32[Ae+3]=fe,F},b}(ui);Tg.prototype.bytesPerElement=16,pe("StructArrayLayout4f16",Tg);var Ag=function(x){function b(){x.apply(this,arguments)}x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b;var E={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return E.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},E.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},E.x1.get=function(){return this._structArray.int16[this._pos2+2]},E.y1.get=function(){return this._structArray.int16[this._pos2+3]},E.x2.get=function(){return this._structArray.int16[this._pos2+4]},E.y2.get=function(){return this._structArray.int16[this._pos2+5]},E.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},E.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},E.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},E.anchorPoint.get=function(){return new c(this.anchorPointX,this.anchorPointY)},Object.defineProperties(b.prototype,E),b}(Qi);Ag.prototype.size=20;var Hh=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.get=function(F){return new Ag(this,F)},b}(bg);pe("CollisionBoxArray",Hh);var ys=function(x){function b(){x.apply(this,arguments)}x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b;var E={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return E.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},E.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},E.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},E.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},E.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},E.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},E.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},E.segment.get=function(){return this._structArray.uint16[this._pos2+10]},E.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},E.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},E.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},E.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},E.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},E.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},E.placedOrientation.set=function(F){this._structArray.uint8[this._pos1+37]=F},E.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},E.hidden.set=function(F){this._structArray.uint8[this._pos1+38]=F},E.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},E.crossTileID.set=function(F){this._structArray.uint32[this._pos4+10]=F},E.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(b.prototype,E),b}(Qi);ys.prototype.size=48;var Vu=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.get=function(F){return new ys(this,F)},b}(_g);pe("PlacedSymbolArray",Vu);var ls=function(x){function b(){x.apply(this,arguments)}x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b;var E={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return E.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},E.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},E.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},E.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},E.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},E.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},E.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},E.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},E.key.get=function(){return this._structArray.uint16[this._pos2+8]},E.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},E.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},E.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},E.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},E.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},E.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},E.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},E.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},E.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},E.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},E.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},E.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},E.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},E.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},E.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},E.crossTileID.set=function(F){this._structArray.uint32[this._pos4+12]=F},E.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},E.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},E.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},E.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(b.prototype,E),b}(Qi);ls.prototype.size=68;var ru=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.get=function(F){return new ls(this,F)},b}(wg);pe("SymbolInstanceArray",ru);var Af=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.getoffsetX=function(F){return this.float32[F*1+0]},b}(Fp);pe("GlyphOffsetArray",Af);var Ub=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.getx=function(F){return this.int16[F*3+0]},b.prototype.gety=function(F){return this.int16[F*3+1]},b.prototype.gettileUnitDistanceFromAnchor=function(F){return this.int16[F*3+2]},b}(Tf);pe("SymbolLineVertexArray",Ub);var Hb=function(x){function b(){x.apply(this,arguments)}x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b;var E={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return E.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},E.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},E.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(b.prototype,E),b}(Qi);Hb.prototype.size=8;var U1=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.get=function(F){return new Hb(this,F)},b}($h);pe("FeatureIndexArray",U1);var Gb=Do([{name:"a_pos",components:2,type:"Int16"}],4),H=Gb.members,P=function(b){b===void 0&&(b=[]),this.segments=b};P.prototype.prepareSegment=function(b,E,F,G){var W=this.segments[this.segments.length-1];return b>P.MAX_VERTEX_ARRAY_LENGTH&&Y("Max vertices per segment is "+P.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+b),(!W||W.vertexLength+b>P.MAX_VERTEX_ARRAY_LENGTH||W.sortKey!==G)&&(W={vertexOffset:E.length,primitiveOffset:F.length,vertexLength:0,primitiveLength:0},G!==void 0&&(W.sortKey=G),this.segments.push(W)),W},P.prototype.get=function(){return this.segments},P.prototype.destroy=function(){for(var b=0,E=this.segments;b<E.length;b+=1){var F=E[b];for(var G in F.vaos)F.vaos[G].destroy()}},P.simpleSegment=function(b,E,F,G){return new P([{vertexOffset:b,primitiveOffset:E,vertexLength:F,primitiveLength:G,vaos:{},sortKey:0}])},P.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,pe("SegmentVector",P);function V(x,b){return x=m(Math.floor(x),0,255),b=m(Math.floor(b),0,255),256*x+b}var z=Do([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),j=s(function(x){function b(E,F){var G,W,J,fe,Ae,Ce,De,Ve;for(G=E.length&3,W=E.length-G,J=F,Ae=3432918353,Ce=461845907,Ve=0;Ve<W;)De=E.charCodeAt(Ve)&255|(E.charCodeAt(++Ve)&255)<<8|(E.charCodeAt(++Ve)&255)<<16|(E.charCodeAt(++Ve)&255)<<24,++Ve,De=(De&65535)*Ae+(((De>>>16)*Ae&65535)<<16)&4294967295,De=De<<15|De>>>17,De=(De&65535)*Ce+(((De>>>16)*Ce&65535)<<16)&4294967295,J^=De,J=J<<13|J>>>19,fe=(J&65535)*5+(((J>>>16)*5&65535)<<16)&4294967295,J=(fe&65535)+27492+(((fe>>>16)+58964&65535)<<16);switch(De=0,G){case 3:De^=(E.charCodeAt(Ve+2)&255)<<16;case 2:De^=(E.charCodeAt(Ve+1)&255)<<8;case 1:De^=E.charCodeAt(Ve)&255,De=(De&65535)*Ae+(((De>>>16)*Ae&65535)<<16)&4294967295,De=De<<15|De>>>17,De=(De&65535)*Ce+(((De>>>16)*Ce&65535)<<16)&4294967295,J^=De}return J^=E.length,J^=J>>>16,J=(J&65535)*2246822507+(((J>>>16)*2246822507&65535)<<16)&4294967295,J^=J>>>13,J=(J&65535)*3266489909+(((J>>>16)*3266489909&65535)<<16)&4294967295,J^=J>>>16,J>>>0}x.exports=b}),te=s(function(x){function b(E,F){for(var G=E.length,W=F^G,J=0,fe;G>=4;)fe=E.charCodeAt(J)&255|(E.charCodeAt(++J)&255)<<8|(E.charCodeAt(++J)&255)<<16|(E.charCodeAt(++J)&255)<<24,fe=(fe&65535)*1540483477+(((fe>>>16)*1540483477&65535)<<16),fe^=fe>>>24,fe=(fe&65535)*1540483477+(((fe>>>16)*1540483477&65535)<<16),W=(W&65535)*1540483477+(((W>>>16)*1540483477&65535)<<16)^fe,G-=4,++J;switch(G){case 3:W^=(E.charCodeAt(J+2)&255)<<16;case 2:W^=(E.charCodeAt(J+1)&255)<<8;case 1:W^=E.charCodeAt(J)&255,W=(W&65535)*1540483477+(((W>>>16)*1540483477&65535)<<16)}return W^=W>>>13,W=(W&65535)*1540483477+(((W>>>16)*1540483477&65535)<<16),W^=W>>>15,W>>>0}x.exports=b}),le=j,_e=j,ke=te;le.murmur3=_e,le.murmur2=ke;var Be=function(){this.ids=[],this.positions=[],this.indexed=!1};Be.prototype.add=function(b,E,F,G){this.ids.push(ut(b)),this.positions.push(E,F,G)},Be.prototype.getPositions=function(b){for(var E=ut(b),F=0,G=this.ids.length-1;F<G;){var W=F+G>>1;this.ids[W]>=E?G=W:F=W+1}for(var J=[];this.ids[F]===E;){var fe=this.positions[3*F],Ae=this.positions[3*F+1],Ce=this.positions[3*F+2];J.push({index:fe,start:Ae,end:Ce}),F++}return J},Be.serialize=function(b,E){var F=new Float64Array(b.ids),G=new Uint32Array(b.positions);return gt(F,G,0,F.length-1),E&&E.push(F.buffer,G.buffer),{ids:F,positions:G}},Be.deserialize=function(b){var E=new Be;return E.ids=b.ids,E.positions=b.positions,E.indexed=!0,E};var rt=Math.pow(2,53)-1;function ut(x){var b=+x;return!isNaN(b)&&b<=rt?b:le(String(x))}function gt(x,b,E,F){for(;E<F;){for(var G=x[E+F>>1],W=E-1,J=F+1;;){do W++;while(x[W]<G);do J--;while(x[J]>G);if(W>=J)break;me(x,W,J),me(b,3*W,3*J),me(b,3*W+1,3*J+1),me(b,3*W+2,3*J+2)}J-E<F-J?(gt(x,b,E,J),E=J+1):(gt(x,b,J+1,F),F=J)}}function me(x,b,E){var F=x[b];x[b]=x[E],x[E]=F}pe("FeaturePositionMap",Be);var Fe=function(b,E){this.gl=b.gl,this.location=E},He=function(x){function b(E,F){x.call(this,E,F),this.current=0}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){this.current!==F&&(this.current=F,this.gl.uniform1i(this.location,F))},b}(Fe),et=function(x){function b(E,F){x.call(this,E,F),this.current=0}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){this.current!==F&&(this.current=F,this.gl.uniform1f(this.location,F))},b}(Fe),ht=function(x){function b(E,F){x.call(this,E,F),this.current=[0,0]}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){(F[0]!==this.current[0]||F[1]!==this.current[1])&&(this.current=F,this.gl.uniform2f(this.location,F[0],F[1]))},b}(Fe),ct=function(x){function b(E,F){x.call(this,E,F),this.current=[0,0,0]}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){(F[0]!==this.current[0]||F[1]!==this.current[1]||F[2]!==this.current[2])&&(this.current=F,this.gl.uniform3f(this.location,F[0],F[1],F[2]))},b}(Fe),At=function(x){function b(E,F){x.call(this,E,F),this.current=[0,0,0,0]}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){(F[0]!==this.current[0]||F[1]!==this.current[1]||F[2]!==this.current[2]||F[3]!==this.current[3])&&(this.current=F,this.gl.uniform4f(this.location,F[0],F[1],F[2],F[3]))},b}(Fe),Bt=function(x){function b(E,F){x.call(this,E,F),this.current=Si.transparent}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){(F.r!==this.current.r||F.g!==this.current.g||F.b!==this.current.b||F.a!==this.current.a)&&(this.current=F,this.gl.uniform4f(this.location,F.r,F.g,F.b,F.a))},b}(Fe),Yt=new Float32Array(16),Qt=function(x){function b(E,F){x.call(this,E,F),this.current=Yt}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.set=function(F){if(F[12]!==this.current[12]||F[0]!==this.current[0]){this.current=F,this.gl.uniformMatrix4fv(this.location,!1,F);return}for(var G=1;G<16;G++)if(F[G]!==this.current[G]){this.current=F,this.gl.uniformMatrix4fv(this.location,!1,F);break}},b}(Fe);function er(x){return[V(255*x.r,255*x.g),V(255*x.b,255*x.a)]}var ir=function(b,E,F){this.value=b,this.uniformNames=E.map(function(G){return"u_"+G}),this.type=F};ir.prototype.setUniform=function(b,E,F){b.set(F.constantOr(this.value))},ir.prototype.getBinding=function(b,E,F){return this.type==="color"?new Bt(b,E):new et(b,E)};var mr=function(b,E){this.uniformNames=E.map(function(F){return"u_"+F}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};mr.prototype.setConstantPatternPositions=function(b,E){this.pixelRatioFrom=E.pixelRatio,this.pixelRatioTo=b.pixelRatio,this.patternFrom=E.tlbr,this.patternTo=b.tlbr},mr.prototype.setUniform=function(b,E,F,G){var W=G==="u_pattern_to"?this.patternTo:G==="u_pattern_from"?this.patternFrom:G==="u_pixel_ratio_to"?this.pixelRatioTo:G==="u_pixel_ratio_from"?this.pixelRatioFrom:null;W&&b.set(W)},mr.prototype.getBinding=function(b,E,F){return F.substr(0,9)==="u_pattern"?new At(b,E):new et(b,E)};var or=function(b,E,F,G){this.expression=b,this.type=F,this.maxValue=0,this.paintVertexAttributes=E.map(function(W){return{name:"a_"+W,type:"Float32",components:F==="color"?2:1,offset:0}}),this.paintVertexArray=new G};or.prototype.populatePaintArray=function(b,E,F,G,W){var J=this.paintVertexArray.length,fe=this.expression.evaluate(new Nn(0),E,{},G,[],W);this.paintVertexArray.resize(b),this._setPaintValue(J,b,fe)},or.prototype.updatePaintArray=function(b,E,F,G){var W=this.expression.evaluate({zoom:0},F,G);this._setPaintValue(b,E,W)},or.prototype._setPaintValue=function(b,E,F){if(this.type==="color")for(var G=er(F),W=b;W<E;W++)this.paintVertexArray.emplace(W,G[0],G[1]);else{for(var J=b;J<E;J++)this.paintVertexArray.emplace(J,F);this.maxValue=Math.max(this.maxValue,Math.abs(F))}},or.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},or.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var dr=function(b,E,F,G,W,J){this.expression=b,this.uniformNames=E.map(function(fe){return"u_"+fe+"_t"}),this.type=F,this.useIntegerZoom=G,this.zoom=W,this.maxValue=0,this.paintVertexAttributes=E.map(function(fe){return{name:"a_"+fe,type:"Float32",components:F==="color"?4:2,offset:0}}),this.paintVertexArray=new J};dr.prototype.populatePaintArray=function(b,E,F,G,W){var J=this.expression.evaluate(new Nn(this.zoom),E,{},G,[],W),fe=this.expression.evaluate(new Nn(this.zoom+1),E,{},G,[],W),Ae=this.paintVertexArray.length;this.paintVertexArray.resize(b),this._setPaintValue(Ae,b,J,fe)},dr.prototype.updatePaintArray=function(b,E,F,G){var W=this.expression.evaluate({zoom:this.zoom},F,G),J=this.expression.evaluate({zoom:this.zoom+1},F,G);this._setPaintValue(b,E,W,J)},dr.prototype._setPaintValue=function(b,E,F,G){if(this.type==="color")for(var W=er(F),J=er(G),fe=b;fe<E;fe++)this.paintVertexArray.emplace(fe,W[0],W[1],J[0],J[1]);else{for(var Ae=b;Ae<E;Ae++)this.paintVertexArray.emplace(Ae,F,G);this.maxValue=Math.max(this.maxValue,Math.abs(F),Math.abs(G))}},dr.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},dr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},dr.prototype.setUniform=function(b,E){var F=this.useIntegerZoom?Math.floor(E.zoom):E.zoom,G=m(this.expression.interpolationFactor(F,this.zoom,this.zoom+1),0,1);b.set(G)},dr.prototype.getBinding=function(b,E,F){return new et(b,E)};var Rt=function(b,E,F,G,W,J){this.expression=b,this.type=E,this.useIntegerZoom=F,this.zoom=G,this.layerId=J,this.zoomInPaintVertexArray=new W,this.zoomOutPaintVertexArray=new W};Rt.prototype.populatePaintArray=function(b,E,F){var G=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(b),this.zoomOutPaintVertexArray.resize(b),this._setPaintValues(G,b,E.patterns&&E.patterns[this.layerId],F)},Rt.prototype.updatePaintArray=function(b,E,F,G,W){this._setPaintValues(b,E,F.patterns&&F.patterns[this.layerId],W)},Rt.prototype._setPaintValues=function(b,E,F,G){if(!(!G||!F)){var W=F.min,J=F.mid,fe=F.max,Ae=G[W],Ce=G[J],De=G[fe];if(!(!Ae||!Ce||!De))for(var Ve=b;Ve<E;Ve++)this.zoomInPaintVertexArray.emplace(Ve,Ce.tl[0],Ce.tl[1],Ce.br[0],Ce.br[1],Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],Ce.pixelRatio,Ae.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,Ce.tl[0],Ce.tl[1],Ce.br[0],Ce.br[1],De.tl[0],De.tl[1],De.br[0],De.br[1],Ce.pixelRatio,De.pixelRatio)}},Rt.prototype.upload=function(b){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=b.createVertexBuffer(this.zoomInPaintVertexArray,z.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=b.createVertexBuffer(this.zoomOutPaintVertexArray,z.members,this.expression.isStateDependent))},Rt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var tr=function(b,E,F,G){this.binders={},this.layoutAttributes=G,this._buffers=[];var W=[];for(var J in b.paint._values)if(!!F(J)){var fe=b.paint.get(J);if(!(!(fe instanceof no)||!$c(fe.property.specification))){var Ae=ra(J,b.type),Ce=fe.value,De=fe.property.specification.type,Ve=fe.property.useIntegerZoom,ot=fe.property.specification["property-type"],at=ot==="cross-faded"||ot==="cross-faded-data-driven";if(Ce.kind==="constant")this.binders[J]=at?new mr(Ce.value,Ae):new ir(Ce.value,Ae,De),W.push("/u_"+J);else if(Ce.kind==="source"||at){var mt=Jr(J,De,"source");this.binders[J]=at?new Rt(Ce,De,Ve,E,mt,b.id):new or(Ce,Ae,De,mt),W.push("/a_"+J)}else{var Ft=Jr(J,De,"composite");this.binders[J]=new dr(Ce,Ae,De,Ve,E,Ft),W.push("/z_"+J)}}}this.cacheKey=W.sort().join("")};tr.prototype.getMaxValue=function(b){var E=this.binders[b];return E instanceof or||E instanceof dr?E.maxValue:0},tr.prototype.populatePaintArrays=function(b,E,F,G,W){for(var J in this.binders){var fe=this.binders[J];(fe instanceof or||fe instanceof dr||fe instanceof Rt)&&fe.populatePaintArray(b,E,F,G,W)}},tr.prototype.setConstantPatternPositions=function(b,E){for(var F in this.binders){var G=this.binders[F];G instanceof mr&&G.setConstantPatternPositions(b,E)}},tr.prototype.updatePaintArrays=function(b,E,F,G,W){var J=!1;for(var fe in b)for(var Ae=E.getPositions(fe),Ce=0,De=Ae;Ce<De.length;Ce+=1){var Ve=De[Ce],ot=F.feature(Ve.index);for(var at in this.binders){var mt=this.binders[at];if((mt instanceof or||mt instanceof dr||mt instanceof Rt)&&mt.expression.isStateDependent===!0){var Ft=G.paint.get(at);mt.expression=Ft.value,mt.updatePaintArray(Ve.start,Ve.end,ot,b[fe],W),J=!0}}}return J},tr.prototype.defines=function(){var b=[];for(var E in this.binders){var F=this.binders[E];(F instanceof ir||F instanceof mr)&&b.push.apply(b,F.uniformNames.map(function(G){return"#define HAS_UNIFORM_"+G}))}return b},tr.prototype.getPaintVertexBuffers=function(){return this._buffers},tr.prototype.getUniforms=function(b,E){var F=[];for(var G in this.binders){var W=this.binders[G];if(W instanceof ir||W instanceof mr||W instanceof dr)for(var J=0,fe=W.uniformNames;J<fe.length;J+=1){var Ae=fe[J];if(E[Ae]){var Ce=W.getBinding(b,E[Ae],Ae);F.push({name:Ae,property:G,binding:Ce})}}}return F},tr.prototype.setUniforms=function(b,E,F,G){for(var W=0,J=E;W<J.length;W+=1){var fe=J[W],Ae=fe.name,Ce=fe.property,De=fe.binding;this.binders[Ce].setUniform(De,G,F.get(Ce),Ae)}},tr.prototype.updatePaintBuffers=function(b){this._buffers=[];for(var E in this.binders){var F=this.binders[E];if(b&&F instanceof Rt){var G=b.fromScale===2?F.zoomInPaintVertexBuffer:F.zoomOutPaintVertexBuffer;G&&this._buffers.push(G)}else(F instanceof or||F instanceof dr)&&F.paintVertexBuffer&&this._buffers.push(F.paintVertexBuffer)}},tr.prototype.upload=function(b){for(var E in this.binders){var F=this.binders[E];(F instanceof or||F instanceof dr||F instanceof Rt)&&F.upload(b)}this.updatePaintBuffers()},tr.prototype.destroy=function(){for(var b in this.binders){var E=this.binders[b];(E instanceof or||E instanceof dr||E instanceof Rt)&&E.destroy()}};var Lr=function(b,E,F,G){G===void 0&&(G=function(){return!0}),this.programConfigurations={};for(var W=0,J=E;W<J.length;W+=1){var fe=J[W];this.programConfigurations[fe.id]=new tr(fe,F,G,b)}this.needsUpload=!1,this._featureMap=new Be,this._bufferOffset=0};Lr.prototype.populatePaintArrays=function(b,E,F,G,W,J){for(var fe in this.programConfigurations)this.programConfigurations[fe].populatePaintArrays(b,E,G,W,J);E.id!==void 0&&this._featureMap.add(E.id,F,this._bufferOffset,b),this._bufferOffset=b,this.needsUpload=!0},Lr.prototype.updatePaintArrays=function(b,E,F,G){for(var W=0,J=F;W<J.length;W+=1){var fe=J[W];this.needsUpload=this.programConfigurations[fe.id].updatePaintArrays(b,this._featureMap,E,fe,G)||this.needsUpload}},Lr.prototype.get=function(b){return this.programConfigurations[b]},Lr.prototype.upload=function(b){if(!!this.needsUpload){for(var E in this.programConfigurations)this.programConfigurations[E].upload(b);this.needsUpload=!1}},Lr.prototype.destroy=function(){for(var b in this.programConfigurations)this.programConfigurations[b].destroy()};function ra(x,b){var E={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return E[x]||[x.replace(b+"-","").replace(/-/g,"_")]}function Mr(x){var b={"line-pattern":{source:$l,composite:$l},"fill-pattern":{source:$l,composite:$l},"fill-extrusion-pattern":{source:$l,composite:$l}};return b[x]}function Jr(x,b,E){var F={color:{source:Uh,composite:Tg},number:{source:Fp,composite:Uh}},G=Mr(x);return G&&G[E]||F[b][E]}pe("ConstantBinder",ir),pe("CrossFadedConstantBinder",mr),pe("SourceExpressionBinder",or),pe("CrossFadedCompositeBinder",Rt),pe("CompositeExpressionBinder",dr),pe("ProgramConfiguration",tr,{omit:["_buffers"]}),pe("ProgramConfigurationSet",Lr);var Dr=8192;function ga(x){return{min:-1*Math.pow(2,x-1),max:Math.pow(2,x-1)-1}}var Pr=ga(15);function Cr(x){for(var b=Dr/x.extent,E=x.loadGeometry(),F=0;F<E.length;F++)for(var G=E[F],W=0;W<G.length;W++){var J=G[W];J.x=Math.round(J.x*b),J.y=Math.round(J.y*b),(J.x<Pr.min||J.x>Pr.max||J.y<Pr.min||J.y>Pr.max)&&(Y("Geometry exceeds allowed extent, reduce your vector tile buffer size"),J.x=m(J.x,Pr.min,Pr.max),J.y=m(J.y,Pr.min,Pr.max))}return E}function oa(x,b,E,F,G){x.emplaceBack(b*2+(F+1)/2,E*2+(G+1)/2)}var ta=function(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new Bh,this.indexArray=new Kc,this.segments=new P,this.programConfigurations=new Lr(H,b.layers,b.zoom),this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};ta.prototype.populate=function(b,E,F){var G=this.layers[0],W=[],J=null;G.type==="circle"&&(J=G.layout.get("circle-sort-key"));for(var fe=0,Ae=b;fe<Ae.length;fe+=1){var Ce=Ae[fe],De=Ce.feature,Ve=Ce.id,ot=Ce.index,at=Ce.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,Ft={type:De.type,id:Ve,properties:De.properties,geometry:mt?Cr(De):[]};if(!!this.layers[0]._featureFilter.filter(new Nn(this.zoom),Ft,F)){mt||(Ft.geometry=Cr(De));var ur=J?J.evaluate(Ft,{},F):void 0,Zt={id:Ve,properties:De.properties,type:De.type,sourceLayerIndex:at,index:ot,geometry:Ft.geometry,patterns:{},sortKey:ur};W.push(Zt)}}J&&W.sort(function(Da,$a){return Da.sortKey-$a.sortKey});for(var zr=0,xr=W;zr<xr.length;zr+=1){var Rr=xr[zr],Nr=Rr,na=Nr.geometry,da=Nr.index,ha=Nr.sourceLayerIndex,Ka=b[da].feature;this.addFeature(Rr,na,da,F),E.featureIndex.insert(Ka,na,da,ha,this.index)}},ta.prototype.update=function(b,E,F){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(b,E,this.stateDependentLayers,F)},ta.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ta.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,H),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0},ta.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ta.prototype.addFeature=function(b,E,F,G){for(var W=0,J=E;W<J.length;W+=1)for(var fe=J[W],Ae=0,Ce=fe;Ae<Ce.length;Ae+=1){var De=Ce[Ae],Ve=De.x,ot=De.y;if(!(Ve<0||Ve>=Dr||ot<0||ot>=Dr)){var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,b.sortKey),mt=at.vertexLength;oa(this.layoutVertexArray,Ve,ot,-1,-1),oa(this.layoutVertexArray,Ve,ot,1,-1),oa(this.layoutVertexArray,Ve,ot,1,1),oa(this.layoutVertexArray,Ve,ot,-1,1),this.indexArray.emplaceBack(mt,mt+1,mt+2),this.indexArray.emplaceBack(mt,mt+3,mt+2),at.vertexLength+=4,at.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,F,{},G)},pe("CircleBucket",ta,{omit:["layers"]});function Ir(x,b){for(var E=0;E<x.length;E++)if(oi(b,x[E]))return!0;for(var F=0;F<b.length;F++)if(oi(x,b[F]))return!0;return!!ma(x,b)}function Wr(x,b,E){return!!(oi(x,b)||an(b,x,E))}function ua(x,b){if(x.length===1)return Pn(b,x[0]);for(var E=0;E<b.length;E++)for(var F=b[E],G=0;G<F.length;G++)if(oi(x,F[G]))return!0;for(var W=0;W<x.length;W++)if(Pn(b,x[W]))return!0;for(var J=0;J<b.length;J++)if(ma(x,b[J]))return!0;return!1}function Ja(x,b,E){for(var F=0;F<b.length;F++){var G=b[F];if(x.length>=3){for(var W=0;W<G.length;W++)if(oi(x,G[W]))return!0}if(nn(x,G,E))return!0}return!1}function nn(x,b,E){if(x.length>1){if(ma(x,b))return!0;for(var F=0;F<b.length;F++)if(an(b[F],x,E))return!0}for(var G=0;G<x.length;G++)if(an(x[G],b,E))return!0;return!1}function ma(x,b){if(x.length===0||b.length===0)return!1;for(var E=0;E<x.length-1;E++)for(var F=x[E],G=x[E+1],W=0;W<b.length-1;W++){var J=b[W],fe=b[W+1];if(Aa(F,G,J,fe))return!0}return!1}function Aa(x,b,E,F){return X(x,E,F)!==X(b,E,F)&&X(x,b,E)!==X(x,b,F)}function an(x,b,E){var F=E*E;if(b.length===1)return x.distSqr(b[0])<F;for(var G=1;G<b.length;G++){var W=b[G-1],J=b[G];if(pn(x,W,J)<F)return!0}return!1}function pn(x,b,E){var F=b.distSqr(E);if(F===0)return x.distSqr(b);var G=((x.x-b.x)*(E.x-b.x)+(x.y-b.y)*(E.y-b.y))/F;return G<0?x.distSqr(b):G>1?x.distSqr(E):x.distSqr(E.sub(b)._mult(G)._add(b))}function Pn(x,b){for(var E=!1,F,G,W,J=0;J<x.length;J++){F=x[J];for(var fe=0,Ae=F.length-1;fe<F.length;Ae=fe++)G=F[fe],W=F[Ae],G.y>b.y!=W.y>b.y&&b.x<(W.x-G.x)*(b.y-G.y)/(W.y-G.y)+G.x&&(E=!E)}return E}function oi(x,b){for(var E=!1,F=0,G=x.length-1;F<x.length;G=F++){var W=x[F],J=x[G];W.y>b.y!=J.y>b.y&&b.x<(J.x-W.x)*(b.y-W.y)/(J.y-W.y)+W.x&&(E=!E)}return E}function Vi(x,b,E,F,G){for(var W=0,J=x;W<J.length;W+=1){var fe=J[W];if(b<=fe.x&&E<=fe.y&&F>=fe.x&&G>=fe.y)return!0}var Ae=[new c(b,E),new c(b,G),new c(F,G),new c(F,E)];if(x.length>2)for(var Ce=0,De=Ae;Ce<De.length;Ce+=1){var Ve=De[Ce];if(oi(x,Ve))return!0}for(var ot=0;ot<x.length-1;ot++){var at=x[ot],mt=x[ot+1];if(bn(at,mt,Ae))return!0}return!1}function bn(x,b,E){var F=E[0],G=E[2];if(x.x<F.x&&b.x<F.x||x.x>G.x&&b.x>G.x||x.y<F.y&&b.y<F.y||x.y>G.y&&b.y>G.y)return!1;var W=X(x,b,E[0]);return W!==X(x,b,E[1])||W!==X(x,b,E[2])||W!==X(x,b,E[3])}function Ni(x,b,E){var F=b.paint.get(x).value;return F.kind==="constant"?F.value:E.programConfigurations.get(b.id).getMaxValue(x)}function gi(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])}function ji(x,b,E,F,G){if(!b[0]&&!b[1])return x;var W=c.convert(b)._mult(G);E==="viewport"&&W._rotate(-F);for(var J=[],fe=0;fe<x.length;fe++){var Ae=x[fe];J.push(Ae.sub(W))}return J}var eo=new Ti({"circle-sort-key":new Wa(ea.layout_circle["circle-sort-key"])}),Xo=new Ti({"circle-radius":new Wa(ea.paint_circle["circle-radius"]),"circle-color":new Wa(ea.paint_circle["circle-color"]),"circle-blur":new Wa(ea.paint_circle["circle-blur"]),"circle-opacity":new Wa(ea.paint_circle["circle-opacity"]),"circle-translate":new tn(ea.paint_circle["circle-translate"]),"circle-translate-anchor":new tn(ea.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tn(ea.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tn(ea.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wa(ea.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wa(ea.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wa(ea.paint_circle["circle-stroke-opacity"])}),Vo={paint:Xo,layout:eo},ki=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var x=arguments,b=0,E=arguments.length;E--;)b+=x[E]*x[E];return Math.sqrt(b)});function So(){var x=new ki(4);return ki!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}function fn(x,b,E){var F=b[0],G=b[1],W=b[2],J=b[3],fe=Math.sin(E),Ae=Math.cos(E);return x[0]=F*Ae+W*fe,x[1]=G*Ae+J*fe,x[2]=F*-fe+W*Ae,x[3]=G*-fe+J*Ae,x}function xs(){var x=new ki(9);return ki!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[5]=0,x[6]=0,x[7]=0),x[0]=1,x[4]=1,x[8]=1,x}function fi(x,b){var E=Math.sin(b),F=Math.cos(b);return x[0]=F,x[1]=E,x[2]=0,x[3]=-E,x[4]=F,x[5]=0,x[6]=0,x[7]=0,x[8]=1,x}function sn(){var x=new ki(16);return ki!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=0,x[12]=0,x[13]=0,x[14]=0),x[0]=1,x[5]=1,x[10]=1,x[15]=1,x}function jn(x){var b=new ki(16);return b[0]=x[0],b[1]=x[1],b[2]=x[2],b[3]=x[3],b[4]=x[4],b[5]=x[5],b[6]=x[6],b[7]=x[7],b[8]=x[8],b[9]=x[9],b[10]=x[10],b[11]=x[11],b[12]=x[12],b[13]=x[13],b[14]=x[14],b[15]=x[15],b}function Qn(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}function po(x,b){var E=b[0],F=b[1],G=b[2],W=b[3],J=b[4],fe=b[5],Ae=b[6],Ce=b[7],De=b[8],Ve=b[9],ot=b[10],at=b[11],mt=b[12],Ft=b[13],ur=b[14],Zt=b[15],zr=E*fe-F*J,xr=E*Ae-G*J,Rr=E*Ce-W*J,Nr=F*Ae-G*fe,na=F*Ce-W*fe,da=G*Ce-W*Ae,ha=De*Ft-Ve*mt,Ka=De*ur-ot*mt,Da=De*Zt-at*mt,$a=Ve*ur-ot*Ft,An=Ve*Zt-at*Ft,ja=ot*Zt-at*ur,Za=zr*ja-xr*An+Rr*$a+Nr*Da-na*Ka+da*ha;return Za?(Za=1/Za,x[0]=(fe*ja-Ae*An+Ce*$a)*Za,x[1]=(G*An-F*ja-W*$a)*Za,x[2]=(Ft*da-ur*na+Zt*Nr)*Za,x[3]=(ot*na-Ve*da-at*Nr)*Za,x[4]=(Ae*Da-J*ja-Ce*Ka)*Za,x[5]=(E*ja-G*Da+W*Ka)*Za,x[6]=(ur*Rr-mt*da-Zt*xr)*Za,x[7]=(De*da-ot*Rr+at*xr)*Za,x[8]=(J*An-fe*Da+Ce*ha)*Za,x[9]=(F*Da-E*An-W*ha)*Za,x[10]=(mt*na-Ft*Rr+Zt*zr)*Za,x[11]=(Ve*Rr-De*na-at*zr)*Za,x[12]=(fe*Ka-J*$a-Ae*ha)*Za,x[13]=(E*$a-F*Ka+G*ha)*Za,x[14]=(Ft*xr-mt*Nr-ur*zr)*Za,x[15]=(De*Nr-Ve*xr+ot*zr)*Za,x):null}function au(x,b,E){var F=b[0],G=b[1],W=b[2],J=b[3],fe=b[4],Ae=b[5],Ce=b[6],De=b[7],Ve=b[8],ot=b[9],at=b[10],mt=b[11],Ft=b[12],ur=b[13],Zt=b[14],zr=b[15],xr=E[0],Rr=E[1],Nr=E[2],na=E[3];return x[0]=xr*F+Rr*fe+Nr*Ve+na*Ft,x[1]=xr*G+Rr*Ae+Nr*ot+na*ur,x[2]=xr*W+Rr*Ce+Nr*at+na*Zt,x[3]=xr*J+Rr*De+Nr*mt+na*zr,xr=E[4],Rr=E[5],Nr=E[6],na=E[7],x[4]=xr*F+Rr*fe+Nr*Ve+na*Ft,x[5]=xr*G+Rr*Ae+Nr*ot+na*ur,x[6]=xr*W+Rr*Ce+Nr*at+na*Zt,x[7]=xr*J+Rr*De+Nr*mt+na*zr,xr=E[8],Rr=E[9],Nr=E[10],na=E[11],x[8]=xr*F+Rr*fe+Nr*Ve+na*Ft,x[9]=xr*G+Rr*Ae+Nr*ot+na*ur,x[10]=xr*W+Rr*Ce+Nr*at+na*Zt,x[11]=xr*J+Rr*De+Nr*mt+na*zr,xr=E[12],Rr=E[13],Nr=E[14],na=E[15],x[12]=xr*F+Rr*fe+Nr*Ve+na*Ft,x[13]=xr*G+Rr*Ae+Nr*ot+na*ur,x[14]=xr*W+Rr*Ce+Nr*at+na*Zt,x[15]=xr*J+Rr*De+Nr*mt+na*zr,x}function io(x,b,E){var F=E[0],G=E[1],W=E[2],J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt;return b===x?(x[12]=b[0]*F+b[4]*G+b[8]*W+b[12],x[13]=b[1]*F+b[5]*G+b[9]*W+b[13],x[14]=b[2]*F+b[6]*G+b[10]*W+b[14],x[15]=b[3]*F+b[7]*G+b[11]*W+b[15]):(J=b[0],fe=b[1],Ae=b[2],Ce=b[3],De=b[4],Ve=b[5],ot=b[6],at=b[7],mt=b[8],Ft=b[9],ur=b[10],Zt=b[11],x[0]=J,x[1]=fe,x[2]=Ae,x[3]=Ce,x[4]=De,x[5]=Ve,x[6]=ot,x[7]=at,x[8]=mt,x[9]=Ft,x[10]=ur,x[11]=Zt,x[12]=J*F+De*G+mt*W+b[12],x[13]=fe*F+Ve*G+Ft*W+b[13],x[14]=Ae*F+ot*G+ur*W+b[14],x[15]=Ce*F+at*G+Zt*W+b[15]),x}function Ct(x,b,E){var F=E[0],G=E[1],W=E[2];return x[0]=b[0]*F,x[1]=b[1]*F,x[2]=b[2]*F,x[3]=b[3]*F,x[4]=b[4]*G,x[5]=b[5]*G,x[6]=b[6]*G,x[7]=b[7]*G,x[8]=b[8]*W,x[9]=b[9]*W,x[10]=b[10]*W,x[11]=b[11]*W,x[12]=b[12],x[13]=b[13],x[14]=b[14],x[15]=b[15],x}function Ar(x,b,E){var F=Math.sin(E),G=Math.cos(E),W=b[4],J=b[5],fe=b[6],Ae=b[7],Ce=b[8],De=b[9],Ve=b[10],ot=b[11];return b!==x&&(x[0]=b[0],x[1]=b[1],x[2]=b[2],x[3]=b[3],x[12]=b[12],x[13]=b[13],x[14]=b[14],x[15]=b[15]),x[4]=W*G+Ce*F,x[5]=J*G+De*F,x[6]=fe*G+Ve*F,x[7]=Ae*G+ot*F,x[8]=Ce*G-W*F,x[9]=De*G-J*F,x[10]=Ve*G-fe*F,x[11]=ot*G-Ae*F,x}function _r(x,b,E){var F=Math.sin(E),G=Math.cos(E),W=b[0],J=b[1],fe=b[2],Ae=b[3],Ce=b[4],De=b[5],Ve=b[6],ot=b[7];return b!==x&&(x[8]=b[8],x[9]=b[9],x[10]=b[10],x[11]=b[11],x[12]=b[12],x[13]=b[13],x[14]=b[14],x[15]=b[15]),x[0]=W*G+Ce*F,x[1]=J*G+De*F,x[2]=fe*G+Ve*F,x[3]=Ae*G+ot*F,x[4]=Ce*G-W*F,x[5]=De*G-J*F,x[6]=Ve*G-fe*F,x[7]=ot*G-Ae*F,x}function Na(x,b,E,F,G){var W=1/Math.tan(b/2),J;return x[0]=W/E,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=W,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=-1,x[12]=0,x[13]=0,x[15]=0,G!=null&&G!==1/0?(J=1/(F-G),x[10]=(G+F)*J,x[14]=2*G*F*J):(x[10]=-1,x[14]=-2*F),x}function qn(x,b,E,F,G,W,J){var fe=1/(b-E),Ae=1/(F-G),Ce=1/(W-J);return x[0]=-2*fe,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=-2*Ae,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=2*Ce,x[11]=0,x[12]=(b+E)*fe,x[13]=(G+F)*Ae,x[14]=(J+W)*Ce,x[15]=1,x}var St=au;function dt(){var x=new ki(3);return ki!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0),x}function jt(x){var b=new ki(3);return b[0]=x[0],b[1]=x[1],b[2]=x[2],b}function pr(x,b,E){return x[0]=b[0]+E[0],x[1]=b[1]+E[1],x[2]=b[2]+E[2],x}function yr(x,b,E){return x[0]=b[0]-E[0],x[1]=b[1]-E[1],x[2]=b[2]-E[2],x}function Kt(x,b,E){return x[0]=b[0]*E,x[1]=b[1]*E,x[2]=b[2]*E,x}function Wt(x,b){var E=b[0],F=b[1],G=b[2],W=E*E+F*F+G*G;return W>0&&(W=1/Math.sqrt(W)),x[0]=b[0]*W,x[1]=b[1]*W,x[2]=b[2]*W,x}function cr(x,b){return x[0]*b[0]+x[1]*b[1]+x[2]*b[2]}function Et(x,b,E){var F=b[0],G=b[1],W=b[2],J=E[0],fe=E[1],Ae=E[2];return x[0]=G*Ae-W*fe,x[1]=W*J-F*Ae,x[2]=F*fe-G*J,x}function zt(x,b,E){var F=b[0],G=b[1],W=b[2];return x[0]=F*E[0]+G*E[3]+W*E[6],x[1]=F*E[1]+G*E[4]+W*E[7],x[2]=F*E[2]+G*E[5]+W*E[8],x}var Lt=yr;(function(){var x=dt();return function(b,E,F,G,W,J){var fe,Ae;for(E||(E=3),F||(F=0),G?Ae=Math.min(G*E+F,b.length):Ae=b.length,fe=F;fe<Ae;fe+=E)x[0]=b[fe],x[1]=b[fe+1],x[2]=b[fe+2],W(x,x,J),b[fe]=x[0],b[fe+1]=x[1],b[fe+2]=x[2];return b}})();function Er(){var x=new ki(4);return ki!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0,x[3]=0),x}function br(x,b,E){return x[0]=b[0]*E,x[1]=b[1]*E,x[2]=b[2]*E,x[3]=b[3]*E,x}function qr(x,b){return x[0]*b[0]+x[1]*b[1]+x[2]*b[2]+x[3]*b[3]}function Kr(x,b,E){var F=b[0],G=b[1],W=b[2],J=b[3];return x[0]=E[0]*F+E[4]*G+E[8]*W+E[12]*J,x[1]=E[1]*F+E[5]*G+E[9]*W+E[13]*J,x[2]=E[2]*F+E[6]*G+E[10]*W+E[14]*J,x[3]=E[3]*F+E[7]*G+E[11]*W+E[15]*J,x}(function(){var x=Er();return function(b,E,F,G,W,J){var fe,Ae;for(E||(E=4),F||(F=0),G?Ae=Math.min(G*E+F,b.length):Ae=b.length,fe=F;fe<Ae;fe+=E)x[0]=b[fe],x[1]=b[fe+1],x[2]=b[fe+2],x[3]=b[fe+3],W(x,x,J),b[fe]=x[0],b[fe+1]=x[1],b[fe+2]=x[2],b[fe+3]=x[3];return b}})();function Sa(){var x=new ki(2);return ki!=Float32Array&&(x[0]=0,x[1]=0),x}function Tn(x){var b=x[0],E=x[1];return b*b+E*E}var ln=Tn;(function(){var x=Sa();return function(b,E,F,G,W,J){var fe,Ae;for(E||(E=2),F||(F=0),G?Ae=Math.min(G*E+F,b.length):Ae=b.length,fe=F;fe<Ae;fe+=E)x[0]=b[fe],x[1]=b[fe+1],W(x,x,J),b[fe]=x[0],b[fe+1]=x[1];return b}})();var Ga=function(x){function b(E){x.call(this,E,Vo)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(F){return new ta(F)},b.prototype.queryRadius=function(F){var G=F;return Ni("circle-radius",this,G)+Ni("circle-stroke-width",this,G)+gi(this.paint.get("circle-translate"))},b.prototype.queryIntersectsFeature=function(F,G,W,J,fe,Ae,Ce,De){for(var Ve=ji(F,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ae.angle,Ce),ot=this.paint.get("circle-radius").evaluate(G,W),at=this.paint.get("circle-stroke-width").evaluate(G,W),mt=ot+at,Ft=this.paint.get("circle-pitch-alignment")==="map",ur=Ft?Ve:Gr(Ve,De),Zt=Ft?mt*Ce:mt,zr=0,xr=J;zr<xr.length;zr+=1)for(var Rr=xr[zr],Nr=0,na=Rr;Nr<na.length;Nr+=1){var da=na[Nr],ha=Ft?da:aa(da,De),Ka=Zt,Da=Kr([],[da.x,da.y,0,1],De);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ka*=Da[3]/Ae.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ka*=Ae.cameraToCenterDistance/Da[3]),Wr(ur,ha,Ka))return!0}return!1},b}(Is);function aa(x,b){var E=Kr([],[x.x,x.y,0,1],b);return new c(E[0]/E[3],E[1]/E[3])}function Gr(x,b){return x.map(function(E){return aa(E,b)})}var Qa=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b}(ta);pe("HeatmapBucket",Qa,{omit:["layers"]});function qa(x,b,E,F){var G=b.width,W=b.height;if(!F)F=new Uint8Array(G*W*E);else if(F instanceof Uint8ClampedArray)F=new Uint8Array(F.buffer);else if(F.length!==G*W*E)throw new RangeError("mismatched image size");return x.width=G,x.height=W,x.data=F,x}function _n(x,b,E){var F=b.width,G=b.height;if(!(F===x.width&&G===x.height)){var W=qa({},{width:F,height:G},E);Ei(x,W,{x:0,y:0},{x:0,y:0},{width:Math.min(x.width,F),height:Math.min(x.height,G)},E),x.width=F,x.height=G,x.data=W.data}}function Ei(x,b,E,F,G,W){if(G.width===0||G.height===0)return b;if(G.width>x.width||G.height>x.height||E.x>x.width-G.width||E.y>x.height-G.height)throw new RangeError("out of range source coordinates for image copy");if(G.width>b.width||G.height>b.height||F.x>b.width-G.width||F.y>b.height-G.height)throw new RangeError("out of range destination coordinates for image copy");for(var J=x.data,fe=b.data,Ae=0;Ae<G.height;Ae++)for(var Ce=((E.y+Ae)*x.width+E.x)*W,De=((F.y+Ae)*b.width+F.x)*W,Ve=0;Ve<G.width*W;Ve++)fe[De+Ve]=J[Ce+Ve];return b}var bs=function(b,E){qa(this,b,1,E)};bs.prototype.resize=function(b){_n(this,b,1)},bs.prototype.clone=function(){return new bs({width:this.width,height:this.height},new Uint8Array(this.data))},bs.copy=function(b,E,F,G,W){Ei(b,E,F,G,W,1)};var zs=function(b,E){qa(this,b,4,E)};zs.prototype.resize=function(b){_n(this,b,4)},zs.prototype.replace=function(b,E){E?this.data.set(b):b instanceof Uint8ClampedArray?this.data=new Uint8Array(b.buffer):this.data=b},zs.prototype.clone=function(){return new zs({width:this.width,height:this.height},new Uint8Array(this.data))},zs.copy=function(b,E,F,G,W){Ei(b,E,F,G,W,4)},pe("AlphaImage",bs),pe("RGBAImage",zs);var Pd=new Ti({"heatmap-radius":new Wa(ea.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wa(ea.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tn(ea.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ms(ea.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tn(ea.paint_heatmap["heatmap-opacity"])}),kv={paint:Pd};function Id(x,b){for(var E=new Uint8Array(256*4),F={},G=0,W=0;G<256;G++,W+=4){F[b]=G/255;var J=x.evaluate(F);E[W+0]=Math.floor(J.r*255/J.a),E[W+1]=Math.floor(J.g*255/J.a),E[W+2]=Math.floor(J.b*255/J.a),E[W+3]=Math.floor(J.a*255)}return new zs({width:256,height:1},E)}var Sg=function(x){function b(E){x.call(this,E,kv),this._updateColorRamp()}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(F){return new Qa(F)},b.prototype._handleSpecialPaintPropertyUpdate=function(F){F==="heatmap-color"&&this._updateColorRamp()},b.prototype._updateColorRamp=function(){var F=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Id(F,"heatmapDensity"),this.colorRampTexture=null},b.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},b.prototype.queryRadius=function(){return 0},b.prototype.queryIntersectsFeature=function(){return!1},b.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},b}(Is),uk=new Ti({"hillshade-illumination-direction":new tn(ea.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tn(ea.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tn(ea.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tn(ea.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tn(ea.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tn(ea.paint_hillshade["hillshade-accent-color"])}),Jf={paint:uk},Mg=function(x){function b(E){x.call(this,E,Jf)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},b}(Is),Qc=Do([{name:"a_pos",components:2,type:"Int16"}],4),w3=Qc.members,ku=kg,Vb=kg;function kg(x,b,E){E=E||2;var F=b&&b.length,G=F?b[0]*E:x.length,W=RV(x,0,G,E,!0),J=[];if(!W||W.next===W.prev)return J;var fe,Ae,Ce,De,Ve,ot,at;if(F&&(W=ewe(x,b,W,E)),x.length>80*E){fe=Ce=x[0],Ae=De=x[1];for(var mt=E;mt<G;mt+=E)Ve=x[mt],ot=x[mt+1],Ve<fe&&(fe=Ve),ot<Ae&&(Ae=ot),Ve>Ce&&(Ce=Ve),ot>De&&(De=ot);at=Math.max(Ce-fe,De-Ae),at=at!==0?1/at:0}return T3(W,J,E,fe,Ae,at),J}function RV(x,b,E,F,G){var W,J;if(G===QD(x,b,E,F)>0)for(W=b;W<E;W+=F)J=OV(W,x[W],x[W+1],J);else for(W=E-F;W>=b;W-=F)J=OV(W,x[W],x[W+1],J);return J&&fk(J,J.next)&&(S3(J),J=J.next),J}function qm(x,b){if(!x)return x;b||(b=x);var E=x,F;do if(F=!1,!E.steiner&&(fk(E,E.next)||Gs(E.prev,E,E.next)===0)){if(S3(E),E=b=E.prev,E===E.next)break;F=!0}else E=E.next;while(F||E!==b);return b}function T3(x,b,E,F,G,W,J){if(!!x){!J&&W&&iwe(x,F,G,W);for(var fe=x,Ae,Ce;x.prev!==x.next;){if(Ae=x.prev,Ce=x.next,W?K2e(x,F,G,W):Z2e(x)){b.push(Ae.i/E),b.push(x.i/E),b.push(Ce.i/E),S3(x),x=Ce.next,fe=Ce.next;continue}if(x=Ce,x===fe){J?J===1?(x=J2e(qm(x),b,E),T3(x,b,E,F,G,W,2)):J===2&&Q2e(x,b,E,F,G,W):T3(qm(x),b,E,F,G,W,1);break}}}}function Z2e(x){var b=x.prev,E=x,F=x.next;if(Gs(b,E,F)>=0)return!1;for(var G=x.next.next;G!==x.prev;){if(jb(b.x,b.y,E.x,E.y,F.x,F.y,G.x,G.y)&&Gs(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function K2e(x,b,E,F){var G=x.prev,W=x,J=x.next;if(Gs(G,W,J)>=0)return!1;for(var fe=G.x<W.x?G.x<J.x?G.x:J.x:W.x<J.x?W.x:J.x,Ae=G.y<W.y?G.y<J.y?G.y:J.y:W.y<J.y?W.y:J.y,Ce=G.x>W.x?G.x>J.x?G.x:J.x:W.x>J.x?W.x:J.x,De=G.y>W.y?G.y>J.y?G.y:J.y:W.y>J.y?W.y:J.y,Ve=KD(fe,Ae,b,E,F),ot=KD(Ce,De,b,E,F),at=x.prevZ,mt=x.nextZ;at&&at.z>=Ve&&mt&&mt.z<=ot;){if(at!==x.prev&&at!==x.next&&jb(G.x,G.y,W.x,W.y,J.x,J.y,at.x,at.y)&&Gs(at.prev,at,at.next)>=0||(at=at.prevZ,mt!==x.prev&&mt!==x.next&&jb(G.x,G.y,W.x,W.y,J.x,J.y,mt.x,mt.y)&&Gs(mt.prev,mt,mt.next)>=0))return!1;mt=mt.nextZ}for(;at&&at.z>=Ve;){if(at!==x.prev&&at!==x.next&&jb(G.x,G.y,W.x,W.y,J.x,J.y,at.x,at.y)&&Gs(at.prev,at,at.next)>=0)return!1;at=at.prevZ}for(;mt&&mt.z<=ot;){if(mt!==x.prev&&mt!==x.next&&jb(G.x,G.y,W.x,W.y,J.x,J.y,mt.x,mt.y)&&Gs(mt.prev,mt,mt.next)>=0)return!1;mt=mt.nextZ}return!0}function J2e(x,b,E){var F=x;do{var G=F.prev,W=F.next.next;!fk(G,W)&&zV(G,F,F.next,W)&&A3(G,W)&&A3(W,G)&&(b.push(G.i/E),b.push(F.i/E),b.push(W.i/E),S3(F),S3(F.next),F=x=W),F=F.next}while(F!==x);return qm(F)}function Q2e(x,b,E,F,G,W){var J=x;do{for(var fe=J.next.next;fe!==J.prev;){if(J.i!==fe.i&&lwe(J,fe)){var Ae=FV(J,fe);J=qm(J,J.next),Ae=qm(Ae,Ae.next),T3(J,b,E,F,G,W),T3(Ae,b,E,F,G,W);return}fe=fe.next}J=J.next}while(J!==x)}function ewe(x,b,E,F){var G=[],W,J,fe,Ae,Ce;for(W=0,J=b.length;W<J;W++)fe=b[W]*F,Ae=W<J-1?b[W+1]*F:x.length,Ce=RV(x,fe,Ae,F,!1),Ce===Ce.next&&(Ce.steiner=!0),G.push(swe(Ce));for(G.sort(twe),W=0;W<G.length;W++)rwe(G[W],E),E=qm(E,E.next);return E}function twe(x,b){return x.x-b.x}function rwe(x,b){if(b=awe(x,b),b){var E=FV(b,x);qm(b,b.next),qm(E,E.next)}}function awe(x,b){var E=b,F=x.x,G=x.y,W=-1/0,J;do{if(G<=E.y&&G>=E.next.y&&E.next.y!==E.y){var fe=E.x+(G-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(fe<=F&&fe>W){if(W=fe,fe===F){if(G===E.y)return E;if(G===E.next.y)return E.next}J=E.x<E.next.x?E:E.next}}E=E.next}while(E!==b);if(!J)return null;if(F===W)return J;var Ae=J,Ce=J.x,De=J.y,Ve=1/0,ot;E=J;do F>=E.x&&E.x>=Ce&&F!==E.x&&jb(G<De?F:W,G,Ce,De,G<De?W:F,G,E.x,E.y)&&(ot=Math.abs(G-E.y)/(F-E.x),A3(E,x)&&(ot<Ve||ot===Ve&&(E.x>J.x||E.x===J.x&&nwe(J,E)))&&(J=E,Ve=ot)),E=E.next;while(E!==Ae);return J}function nwe(x,b){return Gs(x.prev,x,b.prev)<0&&Gs(b.next,x,x.next)<0}function iwe(x,b,E,F){var G=x;do G.z===null&&(G.z=KD(G.x,G.y,b,E,F)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==x);G.prevZ.nextZ=null,G.prevZ=null,owe(G)}function owe(x){var b,E,F,G,W,J,fe,Ae,Ce=1;do{for(E=x,x=null,W=null,J=0;E;){for(J++,F=E,fe=0,b=0;b<Ce&&(fe++,F=F.nextZ,!!F);b++);for(Ae=Ce;fe>0||Ae>0&&F;)fe!==0&&(Ae===0||!F||E.z<=F.z)?(G=E,E=E.nextZ,fe--):(G=F,F=F.nextZ,Ae--),W?W.nextZ=G:x=G,G.prevZ=W,W=G;E=F}W.nextZ=null,Ce*=2}while(J>1);return x}function KD(x,b,E,F,G){return x=32767*(x-E)*G,b=32767*(b-F)*G,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,x|b<<1}function swe(x){var b=x,E=x;do(b.x<E.x||b.x===E.x&&b.y<E.y)&&(E=b),b=b.next;while(b!==x);return E}function jb(x,b,E,F,G,W,J,fe){return(G-J)*(b-fe)-(x-J)*(W-fe)>=0&&(x-J)*(F-fe)-(E-J)*(b-fe)>=0&&(E-J)*(W-fe)-(G-J)*(F-fe)>=0}function lwe(x,b){return x.next.i!==b.i&&x.prev.i!==b.i&&!uwe(x,b)&&(A3(x,b)&&A3(b,x)&&fwe(x,b)&&(Gs(x.prev,x,b.prev)||Gs(x,b.prev,b))||fk(x,b)&&Gs(x.prev,x,x.next)>0&&Gs(b.prev,b,b.next)>0)}function Gs(x,b,E){return(b.y-x.y)*(E.x-b.x)-(b.x-x.x)*(E.y-b.y)}function fk(x,b){return x.x===b.x&&x.y===b.y}function zV(x,b,E,F){var G=hk(Gs(x,b,E)),W=hk(Gs(x,b,F)),J=hk(Gs(E,F,x)),fe=hk(Gs(E,F,b));return!!(G!==W&&J!==fe||G===0&&ck(x,E,b)||W===0&&ck(x,F,b)||J===0&&ck(E,x,F)||fe===0&&ck(E,b,F))}function ck(x,b,E){return b.x<=Math.max(x.x,E.x)&&b.x>=Math.min(x.x,E.x)&&b.y<=Math.max(x.y,E.y)&&b.y>=Math.min(x.y,E.y)}function hk(x){return x>0?1:x<0?-1:0}function uwe(x,b){var E=x;do{if(E.i!==x.i&&E.next.i!==x.i&&E.i!==b.i&&E.next.i!==b.i&&zV(E,E.next,x,b))return!0;E=E.next}while(E!==x);return!1}function A3(x,b){return Gs(x.prev,x,x.next)<0?Gs(x,b,x.next)>=0&&Gs(x,x.prev,b)>=0:Gs(x,b,x.prev)<0||Gs(x,x.next,b)<0}function fwe(x,b){var E=x,F=!1,G=(x.x+b.x)/2,W=(x.y+b.y)/2;do E.y>W!=E.next.y>W&&E.next.y!==E.y&&G<(E.next.x-E.x)*(W-E.y)/(E.next.y-E.y)+E.x&&(F=!F),E=E.next;while(E!==x);return F}function FV(x,b){var E=new JD(x.i,x.x,x.y),F=new JD(b.i,b.x,b.y),G=x.next,W=b.prev;return x.next=b,b.prev=x,E.next=G,G.prev=E,F.next=E,E.prev=F,W.next=F,F.prev=W,F}function OV(x,b,E,F){var G=new JD(x,b,E);return F?(G.next=F.next,G.prev=F,F.next.prev=G,F.next=G):(G.prev=G,G.next=G),G}function S3(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function JD(x,b,E){this.i=x,this.x=b,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}kg.deviation=function(x,b,E,F){var G=b&&b.length,W=G?b[0]*E:x.length,J=Math.abs(QD(x,0,W,E));if(G)for(var fe=0,Ae=b.length;fe<Ae;fe++){var Ce=b[fe]*E,De=fe<Ae-1?b[fe+1]*E:x.length;J-=Math.abs(QD(x,Ce,De,E))}var Ve=0;for(fe=0;fe<F.length;fe+=3){var ot=F[fe]*E,at=F[fe+1]*E,mt=F[fe+2]*E;Ve+=Math.abs((x[ot]-x[mt])*(x[at+1]-x[ot+1])-(x[ot]-x[at])*(x[mt+1]-x[ot+1]))}return J===0&&Ve===0?0:Math.abs((Ve-J)/J)};function QD(x,b,E,F){for(var G=0,W=b,J=E-F;W<E;W+=F)G+=(x[J]-x[W])*(x[W+1]+x[J+1]),J=W;return G}kg.flatten=function(x){for(var b=x[0][0].length,E={vertices:[],holes:[],dimensions:b},F=0,G=0;G<x.length;G++){for(var W=0;W<x[G].length;W++)for(var J=0;J<b;J++)E.vertices.push(x[G][W][J]);G>0&&(F+=x[G-1].length,E.holes.push(F))}return E},ku.default=Vb;function cwe(x,b,E,F,G){NV(x,b,E||0,F||x.length-1,G||hwe)}function NV(x,b,E,F,G){for(;F>E;){if(F-E>600){var W=F-E+1,J=b-E+1,fe=Math.log(W),Ae=.5*Math.exp(2*fe/3),Ce=.5*Math.sqrt(fe*Ae*(W-Ae)/W)*(J-W/2<0?-1:1),De=Math.max(E,Math.floor(b-J*Ae/W+Ce)),Ve=Math.min(F,Math.floor(b+(W-J)*Ae/W+Ce));NV(x,b,De,Ve,G)}var ot=x[b],at=E,mt=F;for(M3(x,E,b),G(x[F],ot)>0&&M3(x,E,F);at<mt;){for(M3(x,at,mt),at++,mt--;G(x[at],ot)<0;)at++;for(;G(x[mt],ot)>0;)mt--}G(x[E],ot)===0?M3(x,E,mt):(mt++,M3(x,mt,F)),mt<=b&&(E=mt+1),b<=mt&&(F=mt-1)}}function M3(x,b,E){var F=x[b];x[b]=x[E],x[E]=F}function hwe(x,b){return x<b?-1:x>b?1:0}function e6(x,b){var E=x.length;if(E<=1)return[x];for(var F=[],G,W,J=0;J<E;J++){var fe=ee(x[J]);fe!==0&&(x[J].area=Math.abs(fe),W===void 0&&(W=fe<0),W===fe<0?(G&&F.push(G),G=[x[J]]):G.push(x[J]))}if(G&&F.push(G),b>1)for(var Ae=0;Ae<F.length;Ae++)F[Ae].length<=b||(cwe(F[Ae],b,1,F[Ae].length-1,vwe),F[Ae]=F[Ae].slice(0,b));return F}function vwe(x,b){return b.area-x.area}function t6(x,b,E){for(var F=E.patternDependencies,G=!1,W=0,J=b;W<J.length;W+=1){var fe=J[W],Ae=fe.paint.get(x+"-pattern");Ae.isConstant()||(G=!0);var Ce=Ae.constantOr(null);Ce&&(G=!0,F[Ce.to]=!0,F[Ce.from]=!0)}return G}function r6(x,b,E,F,G){for(var W=G.patternDependencies,J=0,fe=b;J<fe.length;J+=1){var Ae=fe[J],Ce=Ae.paint.get(x+"-pattern"),De=Ce.value;if(De.kind!=="constant"){var Ve=De.evaluate({zoom:F-1},E,{},G.availableImages),ot=De.evaluate({zoom:F},E,{},G.availableImages),at=De.evaluate({zoom:F+1},E,{},G.availableImages);Ve=Ve&&Ve.name?Ve.name:Ve,ot=ot&&ot.name?ot.name:ot,at=at&&at.name?at.name:at,W[Ve]=!0,W[ot]=!0,W[at]=!0,E.patterns[Ae.id]={min:Ve,mid:ot,max:at}}}return E}var dwe=500,Dd=function(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bh,this.indexArray=new Kc,this.indexArray2=new Jc,this.programConfigurations=new Lr(w3,b.layers,b.zoom),this.segments=new P,this.segments2=new P,this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Dd.prototype.populate=function(b,E,F){this.hasPattern=t6("fill",this.layers,E);for(var G=this.layers[0].layout.get("fill-sort-key"),W=[],J=0,fe=b;J<fe.length;J+=1){var Ae=fe[J],Ce=Ae.feature,De=Ae.id,Ve=Ae.index,ot=Ae.sourceLayerIndex,at=this.layers[0]._featureFilter.needGeometry,mt={type:Ce.type,id:De,properties:Ce.properties,geometry:at?Cr(Ce):[]};if(!!this.layers[0]._featureFilter.filter(new Nn(this.zoom),mt,F)){at||(mt.geometry=Cr(Ce));var Ft=G?G.evaluate(mt,{},F,E.availableImages):void 0,ur={id:De,properties:Ce.properties,type:Ce.type,sourceLayerIndex:ot,index:Ve,geometry:mt.geometry,patterns:{},sortKey:Ft};W.push(ur)}}G&&W.sort(function(Da,$a){return Da.sortKey-$a.sortKey});for(var Zt=0,zr=W;Zt<zr.length;Zt+=1){var xr=zr[Zt],Rr=xr,Nr=Rr.geometry,na=Rr.index,da=Rr.sourceLayerIndex;if(this.hasPattern){var ha=r6("fill",this.layers,xr,this.zoom,E);this.patternFeatures.push(ha)}else this.addFeature(xr,Nr,na,F,{});var Ka=b[na].feature;E.featureIndex.insert(Ka,Nr,na,da,this.index)}},Dd.prototype.update=function(b,E,F){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(b,E,this.stateDependentLayers,F)},Dd.prototype.addFeatures=function(b,E,F){for(var G=0,W=this.patternFeatures;G<W.length;G+=1){var J=W[G];this.addFeature(J,J.geometry,J.index,E,F)}},Dd.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Dd.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Dd.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,w3),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.indexBuffer2=b.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(b),this.uploaded=!0},Dd.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Dd.prototype.addFeature=function(b,E,F,G,W){for(var J=0,fe=e6(E,dwe);J<fe.length;J+=1){for(var Ae=fe[J],Ce=0,De=0,Ve=Ae;De<Ve.length;De+=1){var ot=Ve[De];Ce+=ot.length}for(var at=this.segments.prepareSegment(Ce,this.layoutVertexArray,this.indexArray),mt=at.vertexLength,Ft=[],ur=[],Zt=0,zr=Ae;Zt<zr.length;Zt+=1){var xr=zr[Zt];if(xr.length!==0){xr!==Ae[0]&&ur.push(Ft.length/2);var Rr=this.segments2.prepareSegment(xr.length,this.layoutVertexArray,this.indexArray2),Nr=Rr.vertexLength;this.layoutVertexArray.emplaceBack(xr[0].x,xr[0].y),this.indexArray2.emplaceBack(Nr+xr.length-1,Nr),Ft.push(xr[0].x),Ft.push(xr[0].y);for(var na=1;na<xr.length;na++)this.layoutVertexArray.emplaceBack(xr[na].x,xr[na].y),this.indexArray2.emplaceBack(Nr+na-1,Nr+na),Ft.push(xr[na].x),Ft.push(xr[na].y);Rr.vertexLength+=xr.length,Rr.primitiveLength+=xr.length}}for(var da=ku(Ft,ur),ha=0;ha<da.length;ha+=3)this.indexArray.emplaceBack(mt+da[ha],mt+da[ha+1],mt+da[ha+2]);at.vertexLength+=Ce,at.primitiveLength+=da.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,F,W,G)},pe("FillBucket",Dd,{omit:["layers","patternFeatures"]});var pwe=new Ti({"fill-sort-key":new Wa(ea.layout_fill["fill-sort-key"])}),gwe=new Ti({"fill-antialias":new tn(ea.paint_fill["fill-antialias"]),"fill-opacity":new Wa(ea.paint_fill["fill-opacity"]),"fill-color":new Wa(ea.paint_fill["fill-color"]),"fill-outline-color":new Wa(ea.paint_fill["fill-outline-color"]),"fill-translate":new tn(ea.paint_fill["fill-translate"]),"fill-translate-anchor":new tn(ea.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mi(ea.paint_fill["fill-pattern"])}),mwe={paint:gwe,layout:pwe},ywe=function(x){function b(E){x.call(this,E,mwe)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.recalculate=function(F,G){x.prototype.recalculate.call(this,F,G);var W=this.paint._values["fill-outline-color"];W.value.kind==="constant"&&W.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},b.prototype.createBucket=function(F){return new Dd(F)},b.prototype.queryRadius=function(){return gi(this.paint.get("fill-translate"))},b.prototype.queryIntersectsFeature=function(F,G,W,J,fe,Ae,Ce){var De=ji(F,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ae.angle,Ce);return ua(De,J)},b.prototype.isTileClipped=function(){return!0},b}(Is),xwe=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),BV=xwe.members,$V=qb;function qb(x,b,E,F,G){this.properties={},this.extent=E,this.type=0,this._pbf=x,this._geometry=-1,this._keys=F,this._values=G,x.readFields(bwe,this,b)}function bwe(x,b,E){x==1?b.id=E.readVarint():x==2?_we(E,b):x==3?b.type=E.readVarint():x==4&&(b._geometry=E.pos)}function _we(x,b){for(var E=x.readVarint()+x.pos;x.pos<E;){var F=b._keys[x.readVarint()],G=b._values[x.readVarint()];b.properties[F]=G}}qb.types=["Unknown","Point","LineString","Polygon"],qb.prototype.loadGeometry=function(){var x=this._pbf;x.pos=this._geometry;for(var b=x.readVarint()+x.pos,E=1,F=0,G=0,W=0,J=[],fe;x.pos<b;){if(F<=0){var Ae=x.readVarint();E=Ae&7,F=Ae>>3}if(F--,E===1||E===2)G+=x.readSVarint(),W+=x.readSVarint(),E===1&&(fe&&J.push(fe),fe=[]),fe.push(new c(G,W));else if(E===7)fe&&fe.push(fe[0].clone());else throw new Error("unknown command "+E)}return fe&&J.push(fe),J},qb.prototype.bbox=function(){var x=this._pbf;x.pos=this._geometry;for(var b=x.readVarint()+x.pos,E=1,F=0,G=0,W=0,J=1/0,fe=-1/0,Ae=1/0,Ce=-1/0;x.pos<b;){if(F<=0){var De=x.readVarint();E=De&7,F=De>>3}if(F--,E===1||E===2)G+=x.readSVarint(),W+=x.readSVarint(),G<J&&(J=G),G>fe&&(fe=G),W<Ae&&(Ae=W),W>Ce&&(Ce=W);else if(E!==7)throw new Error("unknown command "+E)}return[J,Ae,fe,Ce]},qb.prototype.toGeoJSON=function(x,b,E){var F=this.extent*Math.pow(2,E),G=this.extent*x,W=this.extent*b,J=this.loadGeometry(),fe=qb.types[this.type],Ae,Ce;function De(at){for(var mt=0;mt<at.length;mt++){var Ft=at[mt],ur=180-(Ft.y+W)*360/F;at[mt]=[(Ft.x+G)*360/F-180,360/Math.PI*Math.atan(Math.exp(ur*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(Ae=0;Ae<J.length;Ae++)Ve[Ae]=J[Ae][0];J=Ve,De(J);break;case 2:for(Ae=0;Ae<J.length;Ae++)De(J[Ae]);break;case 3:for(J=wwe(J),Ae=0;Ae<J.length;Ae++)for(Ce=0;Ce<J[Ae].length;Ce++)De(J[Ae][Ce]);break}J.length===1?J=J[0]:fe="Multi"+fe;var ot={type:"Feature",geometry:{type:fe,coordinates:J},properties:this.properties};return"id"in this&&(ot.id=this.id),ot};function wwe(x){var b=x.length;if(b<=1)return[x];for(var E=[],F,G,W=0;W<b;W++){var J=Twe(x[W]);J!==0&&(G===void 0&&(G=J<0),G===J<0?(F&&E.push(F),F=[x[W]]):F.push(x[W]))}return F&&E.push(F),E}function Twe(x){for(var b=0,E=0,F=x.length,G=F-1,W,J;E<F;G=E++)W=x[E],J=x[G],b+=(J.x-W.x)*(W.y+J.y);return b}var UV=HV;function HV(x,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=x,this._keys=[],this._values=[],this._features=[],x.readFields(Awe,this,b),this.length=this._features.length}function Awe(x,b,E){x===15?b.version=E.readVarint():x===1?b.name=E.readString():x===5?b.extent=E.readVarint():x===2?b._features.push(E.pos):x===3?b._keys.push(E.readString()):x===4&&b._values.push(Swe(E))}function Swe(x){for(var b=null,E=x.readVarint()+x.pos;x.pos<E;){var F=x.readVarint()>>3;b=F===1?x.readString():F===2?x.readFloat():F===3?x.readDouble():F===4?x.readVarint64():F===5?x.readVarint():F===6?x.readSVarint():F===7?x.readBoolean():null}return b}HV.prototype.feature=function(x){if(x<0||x>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[x];var b=this._pbf.readVarint()+this._pbf.pos;return new $V(this._pbf,b,this.extent,this._keys,this._values)};var Mwe=kwe;function kwe(x,b){this.layers=x.readFields(Ewe,{},b)}function Ewe(x,b,E){if(x===3){var F=new UV(E,E.readVarint()+E.pos);F.length&&(b[F.name]=F)}}var Cwe=Mwe,Lwe=$V,Pwe=UV,Yb={VectorTile:Cwe,VectorTileFeature:Lwe,VectorTileLayer:Pwe},Iwe=Yb.VectorTileFeature.types,Dwe=500,a6=Math.pow(2,13);function k3(x,b,E,F,G,W,J,fe){x.emplaceBack(b,E,Math.floor(F*a6)*2+J,G*a6*2,W*a6*2,Math.round(fe))}var Rd=function(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new Yc,this.indexArray=new Kc,this.programConfigurations=new Lr(BV,b.layers,b.zoom),this.segments=new P,this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Rd.prototype.populate=function(b,E,F){this.features=[],this.hasPattern=t6("fill-extrusion",this.layers,E);for(var G=0,W=b;G<W.length;G+=1){var J=W[G],fe=J.feature,Ae=J.id,Ce=J.index,De=J.sourceLayerIndex,Ve=this.layers[0]._featureFilter.needGeometry,ot={type:fe.type,id:Ae,properties:fe.properties,geometry:Ve?Cr(fe):[]};if(!!this.layers[0]._featureFilter.filter(new Nn(this.zoom),ot,F)){var at={id:Ae,sourceLayerIndex:De,index:Ce,geometry:Ve?ot.geometry:Cr(fe),properties:fe.properties,type:fe.type,patterns:{}};typeof fe.id!="undefined"&&(at.id=fe.id),this.hasPattern?this.features.push(r6("fill-extrusion",this.layers,at,this.zoom,E)):this.addFeature(at,at.geometry,Ce,F,{}),E.featureIndex.insert(fe,at.geometry,Ce,De,this.index,!0)}}},Rd.prototype.addFeatures=function(b,E,F){for(var G=0,W=this.features;G<W.length;G+=1){var J=W[G],fe=J.geometry;this.addFeature(J,fe,J.index,E,F)}},Rd.prototype.update=function(b,E,F){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(b,E,this.stateDependentLayers,F)},Rd.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Rd.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rd.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,BV),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0},Rd.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rd.prototype.addFeature=function(b,E,F,G,W){for(var J=0,fe=e6(E,Dwe);J<fe.length;J+=1){for(var Ae=fe[J],Ce=0,De=0,Ve=Ae;De<Ve.length;De+=1){var ot=Ve[De];Ce+=ot.length}for(var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),mt=0,Ft=Ae;mt<Ft.length;mt+=1){var ur=Ft[mt];if(ur.length!==0&&!zwe(ur))for(var Zt=0,zr=0;zr<ur.length;zr++){var xr=ur[zr];if(zr>=1){var Rr=ur[zr-1];if(!Rwe(xr,Rr)){at.vertexLength+4>P.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nr=xr.sub(Rr)._perp()._unit(),na=Rr.dist(xr);Zt+na>32768&&(Zt=0),k3(this.layoutVertexArray,xr.x,xr.y,Nr.x,Nr.y,0,0,Zt),k3(this.layoutVertexArray,xr.x,xr.y,Nr.x,Nr.y,0,1,Zt),Zt+=na,k3(this.layoutVertexArray,Rr.x,Rr.y,Nr.x,Nr.y,0,0,Zt),k3(this.layoutVertexArray,Rr.x,Rr.y,Nr.x,Nr.y,0,1,Zt);var da=at.vertexLength;this.indexArray.emplaceBack(da,da+2,da+1),this.indexArray.emplaceBack(da+1,da+2,da+3),at.vertexLength+=4,at.primitiveLength+=2}}}}if(at.vertexLength+Ce>P.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(Ce,this.layoutVertexArray,this.indexArray)),Iwe[b.type]==="Polygon"){for(var ha=[],Ka=[],Da=at.vertexLength,$a=0,An=Ae;$a<An.length;$a+=1){var ja=An[$a];if(ja.length!==0){ja!==Ae[0]&&Ka.push(ha.length/2);for(var Za=0;Za<ja.length;Za++){var Bn=ja[Za];k3(this.layoutVertexArray,Bn.x,Bn.y,0,0,1,1,0),ha.push(Bn.x),ha.push(Bn.y)}}}for(var wn=ku(ha,Ka),mi=0;mi<wn.length;mi+=3)this.indexArray.emplaceBack(Da+wn[mi],Da+wn[mi+2],Da+wn[mi+1]);at.primitiveLength+=wn.length/3,at.vertexLength+=Ce}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,F,W,G)},pe("FillExtrusionBucket",Rd,{omit:["layers","features"]});function Rwe(x,b){return x.x===b.x&&(x.x<0||x.x>Dr)||x.y===b.y&&(x.y<0||x.y>Dr)}function zwe(x){return x.every(function(b){return b.x<0})||x.every(function(b){return b.x>Dr})||x.every(function(b){return b.y<0})||x.every(function(b){return b.y>Dr})}var Fwe=new Ti({"fill-extrusion-opacity":new tn(ea["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wa(ea["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tn(ea["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tn(ea["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mi(ea["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wa(ea["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wa(ea["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new tn(ea["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Owe={paint:Fwe},Nwe=function(x){function b(E){x.call(this,E,Owe)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(F){return new Rd(F)},b.prototype.queryRadius=function(){return gi(this.paint.get("fill-extrusion-translate"))},b.prototype.is3D=function(){return!0},b.prototype.queryIntersectsFeature=function(F,G,W,J,fe,Ae,Ce,De){var Ve=ji(F,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ae.angle,Ce),ot=this.paint.get("fill-extrusion-height").evaluate(G,W),at=this.paint.get("fill-extrusion-base").evaluate(G,W),mt=Uwe(Ve,De,Ae,0),Ft=$we(J,at,ot,De),ur=Ft[0],Zt=Ft[1];return Bwe(ur,Zt,mt)},b}(Is);function E3(x,b){return x.x*b.x+x.y*b.y}function GV(x,b){if(x.length===1){for(var E=0,F=b[E++],G;!G||F.equals(G);)if(G=b[E++],!G)return 1/0;for(;E<b.length;E++){var W=b[E],J=x[0],fe=G.sub(F),Ae=W.sub(F),Ce=J.sub(F),De=E3(fe,fe),Ve=E3(fe,Ae),ot=E3(Ae,Ae),at=E3(Ce,fe),mt=E3(Ce,Ae),Ft=De*ot-Ve*Ve,ur=(ot*at-Ve*mt)/Ft,Zt=(De*mt-Ve*at)/Ft,zr=1-ur-Zt,xr=F.z*zr+G.z*ur+W.z*Zt;if(isFinite(xr))return xr}return 1/0}else{for(var Rr=1/0,Nr=0,na=b;Nr<na.length;Nr+=1){var da=na[Nr];Rr=Math.min(Rr,da.z)}return Rr}}function Bwe(x,b,E){var F=1/0;ua(E,b)&&(F=GV(E,b[0]));for(var G=0;G<b.length;G++)for(var W=b[G],J=x[G],fe=0;fe<W.length-1;fe++){var Ae=W[fe],Ce=W[fe+1],De=J[fe],Ve=J[fe+1],ot=[Ae,Ce,Ve,De,Ae];Ir(E,ot)&&(F=Math.min(F,GV(E,ot)))}return F===1/0?!1:F}function $we(x,b,E,F){for(var G=[],W=[],J=F[8]*b,fe=F[9]*b,Ae=F[10]*b,Ce=F[11]*b,De=F[8]*E,Ve=F[9]*E,ot=F[10]*E,at=F[11]*E,mt=0,Ft=x;mt<Ft.length;mt+=1){for(var ur=Ft[mt],Zt=[],zr=[],xr=0,Rr=ur;xr<Rr.length;xr+=1){var Nr=Rr[xr],na=Nr.x,da=Nr.y,ha=F[0]*na+F[4]*da+F[12],Ka=F[1]*na+F[5]*da+F[13],Da=F[2]*na+F[6]*da+F[14],$a=F[3]*na+F[7]*da+F[15],An=ha+J,ja=Ka+fe,Za=Da+Ae,Bn=$a+Ce,wn=ha+De,mi=Ka+Ve,ro=Da+ot,yi=$a+at,xi=new c(An/Bn,ja/Bn);xi.z=Za/Bn,Zt.push(xi);var vi=new c(wn/yi,mi/yi);vi.z=ro/yi,zr.push(vi)}G.push(Zt),W.push(zr)}return[G,W]}function Uwe(x,b,E,F){for(var G=[],W=0,J=x;W<J.length;W+=1){var fe=J[W],Ae=[fe.x,fe.y,F,1];Kr(Ae,Ae,b),G.push(new c(Ae[0]/Ae[3],Ae[1]/Ae[3]))}return G}var Hwe=Do([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),VV=Hwe.members,Gwe=Yb.VectorTileFeature.types,jV=63,Vwe=Math.cos(75/2*(Math.PI/180)),jwe=15,qwe=20,Ywe=15,qV=1/2,YV=Math.pow(2,Ywe-1)/qV,Sf=function(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wc,this.indexArray=new Kc,this.programConfigurations=new Lr(VV,b.layers,b.zoom),this.segments=new P,this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Sf.prototype.populate=function(b,E,F){this.hasPattern=t6("line",this.layers,E);for(var G=this.layers[0].layout.get("line-sort-key"),W=[],J=0,fe=b;J<fe.length;J+=1){var Ae=fe[J],Ce=Ae.feature,De=Ae.id,Ve=Ae.index,ot=Ae.sourceLayerIndex,at=this.layers[0]._featureFilter.needGeometry,mt={type:Ce.type,id:De,properties:Ce.properties,geometry:at?Cr(Ce):[]};if(!!this.layers[0]._featureFilter.filter(new Nn(this.zoom),mt,F)){at||(mt.geometry=Cr(Ce));var Ft=G?G.evaluate(mt,{},F):void 0,ur={id:De,properties:Ce.properties,type:Ce.type,sourceLayerIndex:ot,index:Ve,geometry:mt.geometry,patterns:{},sortKey:Ft};W.push(ur)}}G&&W.sort(function(Da,$a){return Da.sortKey-$a.sortKey});for(var Zt=0,zr=W;Zt<zr.length;Zt+=1){var xr=zr[Zt],Rr=xr,Nr=Rr.geometry,na=Rr.index,da=Rr.sourceLayerIndex;if(this.hasPattern){var ha=r6("line",this.layers,xr,this.zoom,E);this.patternFeatures.push(ha)}else this.addFeature(xr,Nr,na,F,{});var Ka=b[na].feature;E.featureIndex.insert(Ka,Nr,na,da,this.index)}},Sf.prototype.update=function(b,E,F){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(b,E,this.stateDependentLayers,F)},Sf.prototype.addFeatures=function(b,E,F){for(var G=0,W=this.patternFeatures;G<W.length;G+=1){var J=W[G];this.addFeature(J,J.geometry,J.index,E,F)}},Sf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Sf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sf.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,VV),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0},Sf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sf.prototype.addFeature=function(b,E,F,G,W){for(var J=this.layers[0].layout,fe=J.get("line-join").evaluate(b,{}),Ae=J.get("line-cap"),Ce=J.get("line-miter-limit"),De=J.get("line-round-limit"),Ve=0,ot=E;Ve<ot.length;Ve+=1){var at=ot[Ve];this.addLine(at,b,fe,Ae,Ce,De)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,F,W,G)},Sf.prototype.addLine=function(b,E,F,G,W,J){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!E.properties&&E.properties.hasOwnProperty("mapbox_clip_start")&&E.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+E.properties.mapbox_clip_start,this.clipEnd=+E.properties.mapbox_clip_end;for(var fe=0;fe<b.length-1;fe++)this.totalDistance+=b[fe].dist(b[fe+1]);this.updateScaledDistance()}for(var Ae=Gwe[E.type]==="Polygon",Ce=b.length;Ce>=2&&b[Ce-1].equals(b[Ce-2]);)Ce--;for(var De=0;De<Ce-1&&b[De].equals(b[De+1]);)De++;if(!(Ce<(Ae?3:2))){F==="bevel"&&(W=1.05);var Ve=this.overscaling<=16?jwe*Dr/(512*this.overscaling):0,ot=this.segments.prepareSegment(Ce*10,this.layoutVertexArray,this.indexArray),at,mt=void 0,Ft=void 0,ur=void 0,Zt=void 0;this.e1=this.e2=-1,Ae&&(at=b[Ce-2],Zt=b[De].sub(at)._unit()._perp());for(var zr=De;zr<Ce;zr++)if(Ft=zr===Ce-1?Ae?b[De+1]:void 0:b[zr+1],!(Ft&&b[zr].equals(Ft))){Zt&&(ur=Zt),at&&(mt=at),at=b[zr],Zt=Ft?Ft.sub(at)._unit()._perp():ur,ur=ur||Zt;var xr=ur.add(Zt);(xr.x!==0||xr.y!==0)&&xr._unit();var Rr=ur.x*Zt.x+ur.y*Zt.y,Nr=xr.x*Zt.x+xr.y*Zt.y,na=Nr!==0?1/Nr:1/0,da=2*Math.sqrt(2-2*Nr),ha=Nr<Vwe&&mt&&Ft,Ka=ur.x*Zt.y-ur.y*Zt.x>0;if(ha&&zr>De){var Da=at.dist(mt);if(Da>2*Ve){var $a=at.sub(at.sub(mt)._mult(Ve/Da)._round());this.updateDistance(mt,$a),this.addCurrentVertex($a,ur,0,0,ot),mt=$a}}var An=mt&&Ft,ja=An?F:Ae?"butt":G;if(An&&ja==="round"&&(na<J?ja="miter":na<=2&&(ja="fakeround")),ja==="miter"&&na>W&&(ja="bevel"),ja==="bevel"&&(na>2&&(ja="flipbevel"),na<W&&(ja="miter")),mt&&this.updateDistance(mt,at),ja==="miter")xr._mult(na),this.addCurrentVertex(at,xr,0,0,ot);else if(ja==="flipbevel"){if(na>100)xr=Zt.mult(-1);else{var Za=na*ur.add(Zt).mag()/ur.sub(Zt).mag();xr._perp()._mult(Za*(Ka?-1:1))}this.addCurrentVertex(at,xr,0,0,ot),this.addCurrentVertex(at,xr.mult(-1),0,0,ot)}else if(ja==="bevel"||ja==="fakeround"){var Bn=-Math.sqrt(na*na-1),wn=Ka?Bn:0,mi=Ka?0:Bn;if(mt&&this.addCurrentVertex(at,ur,wn,mi,ot),ja==="fakeround")for(var ro=Math.round(da*180/Math.PI/qwe),yi=1;yi<ro;yi++){var xi=yi/ro;if(xi!==.5){var vi=xi-.5,go=1.0904+Rr*(-3.2452+Rr*(3.55645-Rr*1.43519)),ko=.848013+Rr*(-1.06021+Rr*.215638);xi=xi+xi*vi*(xi-1)*(go*vi*vi+ko)}var _s=Zt.sub(ur)._mult(xi)._add(ur)._unit()._mult(Ka?-1:1);this.addHalfVertex(at,_s.x,_s.y,!1,Ka,0,ot)}Ft&&this.addCurrentVertex(at,Zt,-wn,-mi,ot)}else if(ja==="butt")this.addCurrentVertex(at,xr,0,0,ot);else if(ja==="square"){var Ds=mt?1:-1;this.addCurrentVertex(at,xr,Ds,Ds,ot)}else ja==="round"&&(mt&&(this.addCurrentVertex(at,ur,0,0,ot),this.addCurrentVertex(at,ur,1,1,ot,!0)),Ft&&(this.addCurrentVertex(at,Zt,-1,-1,ot,!0),this.addCurrentVertex(at,Zt,0,0,ot)));if(ha&&zr<Ce-1){var Tl=at.dist(Ft);if(Tl>2*Ve){var qs=at.add(Ft.sub(at)._mult(Ve/Tl)._round());this.updateDistance(at,qs),this.addCurrentVertex(qs,Zt,0,0,ot),at=qs}}}}},Sf.prototype.addCurrentVertex=function(b,E,F,G,W,J){J===void 0&&(J=!1);var fe=E.x+E.y*F,Ae=E.y-E.x*F,Ce=-E.x+E.y*G,De=-E.y-E.x*G;this.addHalfVertex(b,fe,Ae,J,!1,F,W),this.addHalfVertex(b,Ce,De,J,!0,-G,W),this.distance>YV/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(b,E,F,G,W,J))},Sf.prototype.addHalfVertex=function(b,E,F,G,W,J,fe){var Ae=b.x,Ce=b.y,De=this.scaledDistance*qV;this.layoutVertexArray.emplaceBack((Ae<<1)+(G?1:0),(Ce<<1)+(W?1:0),Math.round(jV*E)+128,Math.round(jV*F)+128,(J===0?0:J<0?-1:1)+1|(De&63)<<2,De>>6);var Ve=fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ve),fe.primitiveLength++),W?this.e2=Ve:this.e1=Ve},Sf.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(YV-1):this.distance},Sf.prototype.updateDistance=function(b,E){this.distance+=b.dist(E),this.updateScaledDistance()},pe("LineBucket",Sf,{omit:["layers","patternFeatures"]});var Wwe=new Ti({"line-cap":new tn(ea.layout_line["line-cap"]),"line-join":new Wa(ea.layout_line["line-join"]),"line-miter-limit":new tn(ea.layout_line["line-miter-limit"]),"line-round-limit":new tn(ea.layout_line["line-round-limit"]),"line-sort-key":new Wa(ea.layout_line["line-sort-key"])}),Xwe=new Ti({"line-opacity":new Wa(ea.paint_line["line-opacity"]),"line-color":new Wa(ea.paint_line["line-color"]),"line-translate":new tn(ea.paint_line["line-translate"]),"line-translate-anchor":new tn(ea.paint_line["line-translate-anchor"]),"line-width":new Wa(ea.paint_line["line-width"]),"line-gap-width":new Wa(ea.paint_line["line-gap-width"]),"line-offset":new Wa(ea.paint_line["line-offset"]),"line-blur":new Wa(ea.paint_line["line-blur"]),"line-dasharray":new Io(ea.paint_line["line-dasharray"]),"line-pattern":new Mi(ea.paint_line["line-pattern"]),"line-gradient":new ms(ea.paint_line["line-gradient"])}),WV={paint:Xwe,layout:Wwe},Zwe=function(x){function b(){x.apply(this,arguments)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.possiblyEvaluate=function(F,G){return G=new Nn(Math.floor(G.zoom),{now:G.now,fadeDuration:G.fadeDuration,zoomHistory:G.zoomHistory,transition:G.transition}),x.prototype.possiblyEvaluate.call(this,F,G)},b.prototype.evaluate=function(F,G,W,J){return G=w({},G,{zoom:Math.floor(G.zoom)}),x.prototype.evaluate.call(this,F,G,W,J)},b}(Wa),XV=new Zwe(WV.paint.properties["line-width"].specification);XV.useIntegerZoom=!0;var Kwe=function(x){function b(E){x.call(this,E,WV)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype._handleSpecialPaintPropertyUpdate=function(F){F==="line-gradient"&&this._updateGradient()},b.prototype._updateGradient=function(){var F=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Id(F,"lineProgress"),this.gradientTexture=null},b.prototype.recalculate=function(F,G){x.prototype.recalculate.call(this,F,G),this.paint._values["line-floorwidth"]=XV.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,F)},b.prototype.createBucket=function(F){return new Sf(F)},b.prototype.queryRadius=function(F){var G=F,W=ZV(Ni("line-width",this,G),Ni("line-gap-width",this,G)),J=Ni("line-offset",this,G);return W/2+Math.abs(J)+gi(this.paint.get("line-translate"))},b.prototype.queryIntersectsFeature=function(F,G,W,J,fe,Ae,Ce){var De=ji(F,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ae.angle,Ce),Ve=Ce/2*ZV(this.paint.get("line-width").evaluate(G,W),this.paint.get("line-gap-width").evaluate(G,W)),ot=this.paint.get("line-offset").evaluate(G,W);return ot&&(J=Jwe(J,ot*Ce)),Ja(De,J,Ve)},b.prototype.isTileClipped=function(){return!0},b}(Is);function ZV(x,b){return b>0?b+2*x:x}function Jwe(x,b){for(var E=[],F=new c(0,0),G=0;G<x.length;G++){for(var W=x[G],J=[],fe=0;fe<W.length;fe++){var Ae=W[fe-1],Ce=W[fe],De=W[fe+1],Ve=fe===0?F:Ce.sub(Ae)._unit()._perp(),ot=fe===W.length-1?F:De.sub(Ce)._unit()._perp(),at=Ve._add(ot)._unit(),mt=at.x*ot.x+at.y*ot.y;at._mult(1/mt),J.push(at._mult(b)._add(Ce))}E.push(J)}return E}var n6=Do([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qwe=Do([{name:"a_projected_pos",components:3,type:"Float32"}],4);Do([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var e3e=Do([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Do([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var KV=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),t3e=Do([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Do([{name:"triangle",components:3,type:"Uint16"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Do([{type:"Float32",name:"offsetX"}]),Do([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function r3e(x,b,E){var F=b.layout.get("text-transform").evaluate(E,{});return F==="uppercase"?x=x.toLocaleUpperCase():F==="lowercase"&&(x=x.toLocaleLowerCase()),Ln.applyArabicShaping&&(x=Ln.applyArabicShaping(x)),x}function a3e(x,b,E){return x.sections.forEach(function(F){F.text=r3e(F.text,b,E)}),x}function n3e(x){var b={},E={},F=[],G=0;function W(Zt){F.push(x[Zt]),G++}function J(Zt,zr,xr){var Rr=E[Zt];return delete E[Zt],E[zr]=Rr,F[Rr].geometry[0].pop(),F[Rr].geometry[0]=F[Rr].geometry[0].concat(xr[0]),Rr}function fe(Zt,zr,xr){var Rr=b[zr];return delete b[zr],b[Zt]=Rr,F[Rr].geometry[0].shift(),F[Rr].geometry[0]=xr[0].concat(F[Rr].geometry[0]),Rr}function Ae(Zt,zr,xr){var Rr=xr?zr[0][zr[0].length-1]:zr[0][0];return Zt+":"+Rr.x+":"+Rr.y}for(var Ce=0;Ce<x.length;Ce++){var De=x[Ce],Ve=De.geometry,ot=De.text?De.text.toString():null;if(!ot){W(Ce);continue}var at=Ae(ot,Ve),mt=Ae(ot,Ve,!0);if(at in E&&mt in b&&E[at]!==b[mt]){var Ft=fe(at,mt,Ve),ur=J(at,mt,F[Ft].geometry);delete b[at],delete E[mt],E[Ae(ot,F[ur].geometry,!0)]=ur,F[Ft].geometry=null}else at in E?J(at,mt,Ve):mt in b?fe(at,mt,Ve):(W(Ce),b[at]=G-1,E[mt]=G-1)}return F.filter(function(Zt){return Zt.geometry})}var C3={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function i3e(x){for(var b="",E=0;E<x.length;E++){var F=x.charCodeAt(E+1)||null,G=x.charCodeAt(E-1)||null,W=(!F||!nr(F)||C3[x[E+1]])&&(!G||!nr(G)||C3[x[E-1]]);W&&C3[x[E]]?b+=C3[x[E]]:b+=x[E]}return b}var Ul=24,o3e=function(x,b,E,F,G){var W,J,fe=G*8-F-1,Ae=(1<<fe)-1,Ce=Ae>>1,De=-7,Ve=E?G-1:0,ot=E?-1:1,at=x[b+Ve];for(Ve+=ot,W=at&(1<<-De)-1,at>>=-De,De+=fe;De>0;W=W*256+x[b+Ve],Ve+=ot,De-=8);for(J=W&(1<<-De)-1,W>>=-De,De+=F;De>0;J=J*256+x[b+Ve],Ve+=ot,De-=8);if(W===0)W=1-Ce;else{if(W===Ae)return J?NaN:(at?-1:1)*(1/0);J=J+Math.pow(2,F),W=W-Ce}return(at?-1:1)*J*Math.pow(2,W-F)},s3e=function(x,b,E,F,G,W){var J,fe,Ae,Ce=W*8-G-1,De=(1<<Ce)-1,Ve=De>>1,ot=G===23?Math.pow(2,-24)-Math.pow(2,-77):0,at=F?0:W-1,mt=F?1:-1,Ft=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(fe=isNaN(b)?1:0,J=De):(J=Math.floor(Math.log(b)/Math.LN2),b*(Ae=Math.pow(2,-J))<1&&(J--,Ae*=2),J+Ve>=1?b+=ot/Ae:b+=ot*Math.pow(2,1-Ve),b*Ae>=2&&(J++,Ae/=2),J+Ve>=De?(fe=0,J=De):J+Ve>=1?(fe=(b*Ae-1)*Math.pow(2,G),J=J+Ve):(fe=b*Math.pow(2,Ve-1)*Math.pow(2,G),J=0));G>=8;x[E+at]=fe&255,at+=mt,fe/=256,G-=8);for(J=J<<G|fe,Ce+=G;Ce>0;x[E+at]=J&255,at+=mt,J/=256,Ce-=8);x[E+at-mt]|=Ft*128},vk={read:o3e,write:s3e},dk=Mo;function Mo(x){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(x)?x:new Uint8Array(x||0),this.pos=0,this.type=0,this.length=this.buf.length}Mo.Varint=0,Mo.Fixed64=1,Mo.Bytes=2,Mo.Fixed32=5;var i6=(1<<16)*(1<<16),JV=1/i6,l3e=12,QV=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Mo.prototype={destroy:function(){this.buf=null},readFields:function(x,b,E){for(E=E||this.length;this.pos<E;){var F=this.readVarint(),G=F>>3,W=this.pos;this.type=F&7,x(G,b,this),this.pos===W&&this.skip(F)}return b},readMessage:function(x,b){return this.readFields(x,b,this.readVarint()+this.pos)},readFixed32:function(){var x=pk(this.buf,this.pos);return this.pos+=4,x},readSFixed32:function(){var x=tj(this.buf,this.pos);return this.pos+=4,x},readFixed64:function(){var x=pk(this.buf,this.pos)+pk(this.buf,this.pos+4)*i6;return this.pos+=8,x},readSFixed64:function(){var x=pk(this.buf,this.pos)+tj(this.buf,this.pos+4)*i6;return this.pos+=8,x},readFloat:function(){var x=vk.read(this.buf,this.pos,!0,23,4);return this.pos+=4,x},readDouble:function(){var x=vk.read(this.buf,this.pos,!0,52,8);return this.pos+=8,x},readVarint:function(x){var b=this.buf,E,F;return F=b[this.pos++],E=F&127,F<128||(F=b[this.pos++],E|=(F&127)<<7,F<128)||(F=b[this.pos++],E|=(F&127)<<14,F<128)||(F=b[this.pos++],E|=(F&127)<<21,F<128)?E:(F=b[this.pos],E|=(F&15)<<28,u3e(E,x,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var x=this.readVarint();return x%2==1?(x+1)/-2:x/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var x=this.readVarint()+this.pos,b=this.pos;return this.pos=x,x-b>=l3e&&QV?T3e(this.buf,b,x):w3e(this.buf,b,x)},readBytes:function(){var x=this.readVarint()+this.pos,b=this.buf.subarray(this.pos,x);return this.pos=x,b},readPackedVarint:function(x,b){if(this.type!==Mo.Bytes)return x.push(this.readVarint(b));var E=Eg(this);for(x=x||[];this.pos<E;)x.push(this.readVarint(b));return x},readPackedSVarint:function(x){if(this.type!==Mo.Bytes)return x.push(this.readSVarint());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readSVarint());return x},readPackedBoolean:function(x){if(this.type!==Mo.Bytes)return x.push(this.readBoolean());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readBoolean());return x},readPackedFloat:function(x){if(this.type!==Mo.Bytes)return x.push(this.readFloat());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readFloat());return x},readPackedDouble:function(x){if(this.type!==Mo.Bytes)return x.push(this.readDouble());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readDouble());return x},readPackedFixed32:function(x){if(this.type!==Mo.Bytes)return x.push(this.readFixed32());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readFixed32());return x},readPackedSFixed32:function(x){if(this.type!==Mo.Bytes)return x.push(this.readSFixed32());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readSFixed32());return x},readPackedFixed64:function(x){if(this.type!==Mo.Bytes)return x.push(this.readFixed64());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readFixed64());return x},readPackedSFixed64:function(x){if(this.type!==Mo.Bytes)return x.push(this.readSFixed64());var b=Eg(this);for(x=x||[];this.pos<b;)x.push(this.readSFixed64());return x},skip:function(x){var b=x&7;if(b===Mo.Varint)for(;this.buf[this.pos++]>127;);else if(b===Mo.Bytes)this.pos=this.readVarint()+this.pos;else if(b===Mo.Fixed32)this.pos+=4;else if(b===Mo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+b)},writeTag:function(x,b){this.writeVarint(x<<3|b)},realloc:function(x){for(var b=this.length||16;b<this.pos+x;)b*=2;if(b!==this.length){var E=new Uint8Array(b);E.set(this.buf),this.buf=E,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(x){this.realloc(4),Xb(this.buf,x,this.pos),this.pos+=4},writeSFixed32:function(x){this.realloc(4),Xb(this.buf,x,this.pos),this.pos+=4},writeFixed64:function(x){this.realloc(8),Xb(this.buf,x&-1,this.pos),Xb(this.buf,Math.floor(x*JV),this.pos+4),this.pos+=8},writeSFixed64:function(x){this.realloc(8),Xb(this.buf,x&-1,this.pos),Xb(this.buf,Math.floor(x*JV),this.pos+4),this.pos+=8},writeVarint:function(x){if(x=+x||0,x>268435455||x<0){f3e(x,this);return}this.realloc(4),this.buf[this.pos++]=x&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=(x>>>=7)&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=(x>>>=7)&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=x>>>7&127)))},writeSVarint:function(x){this.writeVarint(x<0?-x*2-1:x*2)},writeBoolean:function(x){this.writeVarint(Boolean(x))},writeString:function(x){x=String(x),this.realloc(x.length*4),this.pos++;var b=this.pos;this.pos=A3e(this.buf,x,this.pos);var E=this.pos-b;E>=128&&ej(b,E,this),this.pos=b-1,this.writeVarint(E),this.pos+=E},writeFloat:function(x){this.realloc(4),vk.write(this.buf,x,this.pos,!0,23,4),this.pos+=4},writeDouble:function(x){this.realloc(8),vk.write(this.buf,x,this.pos,!0,52,8),this.pos+=8},writeBytes:function(x){var b=x.length;this.writeVarint(b),this.realloc(b);for(var E=0;E<b;E++)this.buf[this.pos++]=x[E]},writeRawMessage:function(x,b){this.pos++;var E=this.pos;x(b,this);var F=this.pos-E;F>=128&&ej(E,F,this),this.pos=E-1,this.writeVarint(F),this.pos+=F},writeMessage:function(x,b,E){this.writeTag(x,Mo.Bytes),this.writeRawMessage(b,E)},writePackedVarint:function(x,b){b.length&&this.writeMessage(x,v3e,b)},writePackedSVarint:function(x,b){b.length&&this.writeMessage(x,d3e,b)},writePackedBoolean:function(x,b){b.length&&this.writeMessage(x,m3e,b)},writePackedFloat:function(x,b){b.length&&this.writeMessage(x,p3e,b)},writePackedDouble:function(x,b){b.length&&this.writeMessage(x,g3e,b)},writePackedFixed32:function(x,b){b.length&&this.writeMessage(x,y3e,b)},writePackedSFixed32:function(x,b){b.length&&this.writeMessage(x,x3e,b)},writePackedFixed64:function(x,b){b.length&&this.writeMessage(x,b3e,b)},writePackedSFixed64:function(x,b){b.length&&this.writeMessage(x,_3e,b)},writeBytesField:function(x,b){this.writeTag(x,Mo.Bytes),this.writeBytes(b)},writeFixed32Field:function(x,b){this.writeTag(x,Mo.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(x,b){this.writeTag(x,Mo.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(x,b){this.writeTag(x,Mo.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(x,b){this.writeTag(x,Mo.Fixed64),this.writeSFixed64(b)},writeVarintField:function(x,b){this.writeTag(x,Mo.Varint),this.writeVarint(b)},writeSVarintField:function(x,b){this.writeTag(x,Mo.Varint),this.writeSVarint(b)},writeStringField:function(x,b){this.writeTag(x,Mo.Bytes),this.writeString(b)},writeFloatField:function(x,b){this.writeTag(x,Mo.Fixed32),this.writeFloat(b)},writeDoubleField:function(x,b){this.writeTag(x,Mo.Fixed64),this.writeDouble(b)},writeBooleanField:function(x,b){this.writeVarintField(x,Boolean(b))}};function u3e(x,b,E){var F=E.buf,G,W;if(W=F[E.pos++],G=(W&112)>>4,W<128||(W=F[E.pos++],G|=(W&127)<<3,W<128)||(W=F[E.pos++],G|=(W&127)<<10,W<128)||(W=F[E.pos++],G|=(W&127)<<17,W<128)||(W=F[E.pos++],G|=(W&127)<<24,W<128)||(W=F[E.pos++],G|=(W&1)<<31,W<128))return Wb(x,G,b);throw new Error("Expected varint not more than 10 bytes")}function Eg(x){return x.type===Mo.Bytes?x.readVarint()+x.pos:x.pos+1}function Wb(x,b,E){return E?b*4294967296+(x>>>0):(b>>>0)*4294967296+(x>>>0)}function f3e(x,b){var E,F;if(x>=0?(E=x%4294967296|0,F=x/4294967296|0):(E=~(-x%4294967296),F=~(-x/4294967296),E^4294967295?E=E+1|0:(E=0,F=F+1|0)),x>=18446744073709552e3||x<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),c3e(E,F,b),h3e(F,b)}function c3e(x,b,E){E.buf[E.pos++]=x&127|128,x>>>=7,E.buf[E.pos++]=x&127|128,x>>>=7,E.buf[E.pos++]=x&127|128,x>>>=7,E.buf[E.pos++]=x&127|128,x>>>=7,E.buf[E.pos]=x&127}function h3e(x,b){var E=(x&7)<<4;b.buf[b.pos++]|=E|((x>>>=3)?128:0),!!x&&(b.buf[b.pos++]=x&127|((x>>>=7)?128:0),!!x&&(b.buf[b.pos++]=x&127|((x>>>=7)?128:0),!!x&&(b.buf[b.pos++]=x&127|((x>>>=7)?128:0),!!x&&(b.buf[b.pos++]=x&127|((x>>>=7)?128:0),!!x&&(b.buf[b.pos++]=x&127)))))}function ej(x,b,E){var F=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.floor(Math.log(b)/(Math.LN2*7));E.realloc(F);for(var G=E.pos-1;G>=x;G--)E.buf[G+F]=E.buf[G]}function v3e(x,b){for(var E=0;E<x.length;E++)b.writeVarint(x[E])}function d3e(x,b){for(var E=0;E<x.length;E++)b.writeSVarint(x[E])}function p3e(x,b){for(var E=0;E<x.length;E++)b.writeFloat(x[E])}function g3e(x,b){for(var E=0;E<x.length;E++)b.writeDouble(x[E])}function m3e(x,b){for(var E=0;E<x.length;E++)b.writeBoolean(x[E])}function y3e(x,b){for(var E=0;E<x.length;E++)b.writeFixed32(x[E])}function x3e(x,b){for(var E=0;E<x.length;E++)b.writeSFixed32(x[E])}function b3e(x,b){for(var E=0;E<x.length;E++)b.writeFixed64(x[E])}function _3e(x,b){for(var E=0;E<x.length;E++)b.writeSFixed64(x[E])}function pk(x,b){return(x[b]|x[b+1]<<8|x[b+2]<<16)+x[b+3]*16777216}function Xb(x,b,E){x[E]=b,x[E+1]=b>>>8,x[E+2]=b>>>16,x[E+3]=b>>>24}function tj(x,b){return(x[b]|x[b+1]<<8|x[b+2]<<16)+(x[b+3]<<24)}function w3e(x,b,E){for(var F="",G=b;G<E;){var W=x[G],J=null,fe=W>239?4:W>223?3:W>191?2:1;if(G+fe>E)break;var Ae,Ce,De;fe===1?W<128&&(J=W):fe===2?(Ae=x[G+1],(Ae&192)==128&&(J=(W&31)<<6|Ae&63,J<=127&&(J=null))):fe===3?(Ae=x[G+1],Ce=x[G+2],(Ae&192)==128&&(Ce&192)==128&&(J=(W&15)<<12|(Ae&63)<<6|Ce&63,(J<=2047||J>=55296&&J<=57343)&&(J=null))):fe===4&&(Ae=x[G+1],Ce=x[G+2],De=x[G+3],(Ae&192)==128&&(Ce&192)==128&&(De&192)==128&&(J=(W&15)<<18|(Ae&63)<<12|(Ce&63)<<6|De&63,(J<=65535||J>=1114112)&&(J=null))),J===null?(J=65533,fe=1):J>65535&&(J-=65536,F+=String.fromCharCode(J>>>10&1023|55296),J=56320|J&1023),F+=String.fromCharCode(J),G+=fe}return F}function T3e(x,b,E){return QV.decode(x.subarray(b,E))}function A3e(x,b,E){for(var F=0,G,W;F<b.length;F++){if(G=b.charCodeAt(F),G>55295&&G<57344)if(W)if(G<56320){x[E++]=239,x[E++]=191,x[E++]=189,W=G;continue}else G=W-55296<<10|G-56320|65536,W=null;else{G>56319||F+1===b.length?(x[E++]=239,x[E++]=191,x[E++]=189):W=G;continue}else W&&(x[E++]=239,x[E++]=191,x[E++]=189,W=null);G<128?x[E++]=G:(G<2048?x[E++]=G>>6|192:(G<65536?x[E++]=G>>12|224:(x[E++]=G>>18|240,x[E++]=G>>12&63|128),x[E++]=G>>6&63|128),x[E++]=G&63|128)}return E}var o6=3;function S3e(x,b,E){x===1&&E.readMessage(M3e,b)}function M3e(x,b,E){if(x===3){var F=E.readMessage(k3e,{}),G=F.id,W=F.bitmap,J=F.width,fe=F.height,Ae=F.left,Ce=F.top,De=F.advance;b.push({id:G,bitmap:new bs({width:J+2*o6,height:fe+2*o6},W),metrics:{width:J,height:fe,left:Ae,top:Ce,advance:De}})}}function k3e(x,b,E){x===1?b.id=E.readVarint():x===2?b.bitmap=E.readBytes():x===3?b.width=E.readVarint():x===4?b.height=E.readVarint():x===5?b.left=E.readSVarint():x===6?b.top=E.readSVarint():x===7&&(b.advance=E.readVarint())}function E3e(x){return new dk(x).readFields(S3e,[])}var rj=o6;function aj(x){for(var b=0,E=0,F=0,G=x;F<G.length;F+=1){var W=G[F];b+=W.w*W.h,E=Math.max(E,W.w)}x.sort(function(ur,Zt){return Zt.h-ur.h});for(var J=Math.max(Math.ceil(Math.sqrt(b/.95)),E),fe=[{x:0,y:0,w:J,h:1/0}],Ae=0,Ce=0,De=0,Ve=x;De<Ve.length;De+=1)for(var ot=Ve[De],at=fe.length-1;at>=0;at--){var mt=fe[at];if(!(ot.w>mt.w||ot.h>mt.h)){if(ot.x=mt.x,ot.y=mt.y,Ce=Math.max(Ce,ot.y+ot.h),Ae=Math.max(Ae,ot.x+ot.w),ot.w===mt.w&&ot.h===mt.h){var Ft=fe.pop();at<fe.length&&(fe[at]=Ft)}else ot.h===mt.h?(mt.x+=ot.w,mt.w-=ot.w):ot.w===mt.w?(mt.y+=ot.h,mt.h-=ot.h):(fe.push({x:mt.x+ot.w,y:mt.y,w:mt.w-ot.w,h:ot.h}),mt.y+=ot.h,mt.h-=ot.h);break}}return{w:Ae,h:Ce,fill:b/(Ae*Ce)||0}}var Qf=1,gk=function(b,E){var F=E.pixelRatio,G=E.version,W=E.stretchX,J=E.stretchY,fe=E.content;this.paddedRect=b,this.pixelRatio=F,this.stretchX=W,this.stretchY=J,this.content=fe,this.version=G},L3={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};L3.tl.get=function(){return[this.paddedRect.x+Qf,this.paddedRect.y+Qf]},L3.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Qf,this.paddedRect.y+this.paddedRect.h-Qf]},L3.tlbr.get=function(){return this.tl.concat(this.br)},L3.displaySize.get=function(){return[(this.paddedRect.w-Qf*2)/this.pixelRatio,(this.paddedRect.h-Qf*2)/this.pixelRatio]},Object.defineProperties(gk.prototype,L3);var P3=function(b,E){var F={},G={};this.haveRenderCallbacks=[];var W=[];this.addImages(b,F,W),this.addImages(E,G,W);var J=aj(W),fe=J.w,Ae=J.h,Ce=new zs({width:fe||1,height:Ae||1});for(var De in b){var Ve=b[De],ot=F[De].paddedRect;zs.copy(Ve.data,Ce,{x:0,y:0},{x:ot.x+Qf,y:ot.y+Qf},Ve.data)}for(var at in E){var mt=E[at],Ft=G[at].paddedRect,ur=Ft.x+Qf,Zt=Ft.y+Qf,zr=mt.data.width,xr=mt.data.height;zs.copy(mt.data,Ce,{x:0,y:0},{x:ur,y:Zt},mt.data),zs.copy(mt.data,Ce,{x:0,y:xr-1},{x:ur,y:Zt-1},{width:zr,height:1}),zs.copy(mt.data,Ce,{x:0,y:0},{x:ur,y:Zt+xr},{width:zr,height:1}),zs.copy(mt.data,Ce,{x:zr-1,y:0},{x:ur-1,y:Zt},{width:1,height:xr}),zs.copy(mt.data,Ce,{x:0,y:0},{x:ur+zr,y:Zt},{width:1,height:xr})}this.image=Ce,this.iconPositions=F,this.patternPositions=G};P3.prototype.addImages=function(b,E,F){for(var G in b){var W=b[G],J={x:0,y:0,w:W.data.width+2*Qf,h:W.data.height+2*Qf};F.push(J),E[G]=new gk(J,W),W.hasRenderCallback&&this.haveRenderCallbacks.push(G)}},P3.prototype.patchUpdatedImages=function(b,E){b.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var F in b.updatedImages)this.patchUpdatedImage(this.iconPositions[F],b.getImage(F),E),this.patchUpdatedImage(this.patternPositions[F],b.getImage(F),E)},P3.prototype.patchUpdatedImage=function(b,E,F){if(!(!b||!E)&&b.version!==E.version){b.version=E.version;var G=b.tl,W=G[0],J=G[1];F.update(E.data,void 0,{x:W,y:J})}},pe("ImagePosition",gk),pe("ImageAtlas",P3);var eh={horizontal:1,vertical:2,horizontalOnly:3},I3=-17;function C3e(x){for(var b=0,E=x;b<E.length;b+=1){var F=E[b];if(F.positionedGlyphs.length!==0)return!1}return!0}var nj=57344,ij=63743,Zb=function(){this.scale=1,this.fontStack="",this.imageName=null};Zb.forText=function(b,E){var F=new Zb;return F.scale=b||1,F.fontStack=E,F},Zb.forImage=function(b){var E=new Zb;return E.imageName=b,E};var Eu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Eu.fromFeature=function(b,E){for(var F=new Eu,G=0;G<b.sections.length;G++){var W=b.sections[G];W.image?F.addImageSection(W):F.addTextSection(W,E)}return F},Eu.prototype.length=function(){return this.text.length},Eu.prototype.getSection=function(b){return this.sections[this.sectionIndex[b]]},Eu.prototype.getSectionIndex=function(b){return this.sectionIndex[b]},Eu.prototype.getCharCode=function(b){return this.text.charCodeAt(b)},Eu.prototype.verticalizePunctuation=function(){this.text=i3e(this.text)},Eu.prototype.trim=function(){for(var b=0,E=0;E<this.text.length&&Op[this.text.charCodeAt(E)];E++)b++;for(var F=this.text.length,G=this.text.length-1;G>=0&&G>=b&&Op[this.text.charCodeAt(G)];G--)F--;this.text=this.text.substring(b,F),this.sectionIndex=this.sectionIndex.slice(b,F)},Eu.prototype.substring=function(b,E){var F=new Eu;return F.text=this.text.substring(b,E),F.sectionIndex=this.sectionIndex.slice(b,E),F.sections=this.sections,F},Eu.prototype.toString=function(){return this.text},Eu.prototype.getMaxScale=function(){var b=this;return this.sectionIndex.reduce(function(E,F){return Math.max(E,b.sections[F].scale)},0)},Eu.prototype.addTextSection=function(b,E){this.text+=b.text,this.sections.push(Zb.forText(b.scale,b.fontStack||E));for(var F=this.sections.length-1,G=0;G<b.text.length;++G)this.sectionIndex.push(F)},Eu.prototype.addImageSection=function(b){var E=b.image?b.image.name:"";if(E.length===0){Y("Can't add FormattedSection with an empty image.");return}var F=this.getNextImageSectionCharCode();if(!F){Y("Reached maximum number of images "+(ij-nj+2));return}this.text+=String.fromCharCode(F),this.sections.push(Zb.forImage(E)),this.sectionIndex.push(this.sections.length-1)},Eu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=ij?null:++this.imageSectionID:(this.imageSectionID=nj,this.imageSectionID)};function L3e(x,b){for(var E=[],F=x.text,G=0,W=0,J=b;W<J.length;W+=1){var fe=J[W];E.push(x.substring(G,fe)),G=fe}return G<F.length&&E.push(x.substring(G,F.length)),E}function mk(x,b,E,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft){var ur=Eu.fromFeature(x,G);Ve===eh.vertical&&ur.verticalizePunctuation();var Zt,zr=Ln.processBidirectionalText,xr=Ln.processStyledBidirectionalText;if(zr&&ur.sections.length===1){Zt=[];for(var Rr=zr(ur.toString(),s6(ur,Ce,W,b,F,at,mt)),Nr=0,na=Rr;Nr<na.length;Nr+=1){var da=na[Nr],ha=new Eu;ha.text=da,ha.sections=ur.sections;for(var Ka=0;Ka<da.length;Ka++)ha.sectionIndex.push(0);Zt.push(ha)}}else if(xr){Zt=[];for(var Da=xr(ur.text,ur.sectionIndex,s6(ur,Ce,W,b,F,at,mt)),$a=0,An=Da;$a<An.length;$a+=1){var ja=An[$a],Za=new Eu;Za.text=ja[0],Za.sectionIndex=ja[1],Za.sections=ur.sections,Zt.push(Za)}}else Zt=L3e(ur,s6(ur,Ce,W,b,F,at,mt));var Bn=[],wn={positionedLines:Bn,text:ur.toString(),top:De[1],bottom:De[1],left:De[0],right:De[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return D3e(wn,b,E,F,Zt,J,fe,Ae,Ve,Ce,ot,Ft),C3e(Bn)?!1:wn}var Op={};Op[9]=!0,Op[10]=!0,Op[11]=!0,Op[12]=!0,Op[13]=!0,Op[32]=!0;var ec={};ec[10]=!0,ec[32]=!0,ec[38]=!0,ec[40]=!0,ec[41]=!0,ec[43]=!0,ec[45]=!0,ec[47]=!0,ec[173]=!0,ec[183]=!0,ec[8203]=!0,ec[8208]=!0,ec[8211]=!0,ec[8231]=!0;function oj(x,b,E,F,G,W){if(b.imageName){var Ae=F[b.imageName];return Ae?Ae.displaySize[0]*b.scale*Ul/W+G:0}else{var J=E[b.fontStack],fe=J&&J[x];return fe?fe.metrics.advance*b.scale+G:0}}function P3e(x,b,E,F,G,W){for(var J=0,fe=0;fe<x.length();fe++){var Ae=x.getSection(fe);J+=oj(x.getCharCode(fe),Ae,F,G,b,W)}var Ce=Math.max(1,Math.ceil(J/E));return J/Ce}function sj(x,b,E,F){var G=Math.pow(x-b,2);return F?x<b?G/2:G*2:G+Math.abs(E)*E}function I3e(x,b,E){var F=0;return x===10&&(F-=1e4),E&&(F+=150),(x===40||x===65288)&&(F+=50),(b===41||b===65289)&&(F+=50),F}function lj(x,b,E,F,G,W){for(var J=null,fe=sj(b,E,G,W),Ae=0,Ce=F;Ae<Ce.length;Ae+=1){var De=Ce[Ae],Ve=b-De.x,ot=sj(Ve,E,G,W)+De.badness;ot<=fe&&(J=De,fe=ot)}return{index:x,x:b,priorBreak:J,badness:fe}}function uj(x){return x?uj(x.priorBreak).concat(x.index):[]}function s6(x,b,E,F,G,W,J){if(W!=="point")return[];if(!x)return[];for(var fe=[],Ae=P3e(x,b,E,F,G,J),Ce=x.text.indexOf("\u200B")>=0,De=0,Ve=0;Ve<x.length();Ve++){var ot=x.getSection(Ve),at=x.getCharCode(Ve);if(Op[at]||(De+=oj(at,ot,F,G,b,J)),Ve<x.length()-1){var mt=$t(at);(ec[at]||mt||ot.imageName)&&fe.push(lj(Ve+1,De,Ae,fe,I3e(at,x.getCharCode(Ve+1),mt&&Ce),!1))}}return uj(lj(x.length(),De,Ae,fe,0,!0))}function l6(x){var b=.5,E=.5;switch(x){case"right":case"top-right":case"bottom-right":b=1;break;case"left":case"top-left":case"bottom-left":b=0;break}switch(x){case"bottom":case"bottom-right":case"bottom-left":E=1;break;case"top":case"top-right":case"top-left":E=0;break}return{horizontalAlign:b,verticalAlign:E}}function D3e(x,b,E,F,G,W,J,fe,Ae,Ce,De,Ve){for(var ot=0,at=I3,mt=0,Ft=0,ur=fe==="right"?1:fe==="left"?0:.5,Zt=0,zr=0,xr=G;zr<xr.length;zr+=1){var Rr=xr[zr];Rr.trim();var Nr=Rr.getMaxScale(),na=(Nr-1)*Ul,da={positionedGlyphs:[],lineOffset:0};x.positionedLines[Zt]=da;var ha=da.positionedGlyphs,Ka=0;if(!Rr.length()){at+=W,++Zt;continue}for(var Da=0;Da<Rr.length();Da++){var $a=Rr.getSection(Da),An=Rr.getSectionIndex(Da),ja=Rr.getCharCode(Da),Za=0,Bn=null,wn=null,mi=null,ro=Ul,yi=!(Ae===eh.horizontal||!De&&!Ht(ja)||De&&(Op[ja]||Gt(ja)));if($a.imageName){var _s=F[$a.imageName];if(!_s)continue;mi=$a.imageName,x.iconsInText=x.iconsInText||!0,wn=_s.paddedRect;var Ds=_s.displaySize;$a.scale=$a.scale*Ul/Ve,Bn={width:Ds[0],height:Ds[1],left:Qf,top:-rj,advance:yi?Ds[1]:Ds[0]};var Tl=Ul-Ds[1]*$a.scale;Za=na+Tl,ro=Bn.advance;var qs=yi?Ds[0]*$a.scale-Ul*Nr:Ds[1]*$a.scale-Ul*Nr;qs>0&&qs>Ka&&(Ka=qs)}else{var xi=E[$a.fontStack],vi=xi&&xi[ja];if(vi&&vi.rect)wn=vi.rect,Bn=vi.metrics;else{var go=b[$a.fontStack],ko=go&&go[ja];if(!ko)continue;Bn=ko.metrics}Za=(Nr-$a.scale)*Ul}yi?(x.verticalizable=!0,ha.push({glyph:ja,imageName:mi,x:ot,y:at+Za,vertical:yi,scale:$a.scale,fontStack:$a.fontStack,sectionIndex:An,metrics:Bn,rect:wn}),ot+=ro*$a.scale+Ce):(ha.push({glyph:ja,imageName:mi,x:ot,y:at+Za,vertical:yi,scale:$a.scale,fontStack:$a.fontStack,sectionIndex:An,metrics:Bn,rect:wn}),ot+=Bn.advance*$a.scale+Ce)}if(ha.length!==0){var Cu=ot-Ce;mt=Math.max(Cu,mt),R3e(ha,0,ha.length-1,ur,Ka)}ot=0;var Lu=W*Nr+Ka;da.lineOffset=Math.max(Ka,na),at+=Lu,Ft=Math.max(Lu,Ft),++Zt}var Al=at-I3,ju=l6(J),qu=ju.horizontalAlign,sl=ju.verticalAlign;z3e(x.positionedLines,ur,qu,sl,mt,Ft,W,Al,G.length),x.top+=-sl*Al,x.bottom=x.top+Al,x.left+=-qu*mt,x.right=x.left+mt}function R3e(x,b,E,F,G){if(!(!F&&!G))for(var W=x[E],J=W.metrics.advance*W.scale,fe=(x[E].x+J)*F,Ae=b;Ae<=E;Ae++)x[Ae].x-=fe,x[Ae].y+=G}function z3e(x,b,E,F,G,W,J,fe,Ae){var Ce=(b-E)*G,De=0;W!==J?De=-fe*F-I3:De=(-F*Ae+.5)*J;for(var Ve=0,ot=x;Ve<ot.length;Ve+=1)for(var at=ot[Ve],mt=0,Ft=at.positionedGlyphs;mt<Ft.length;mt+=1){var ur=Ft[mt];ur.x+=Ce,ur.y+=De}}function F3e(x,b,E){var F=l6(E),G=F.horizontalAlign,W=F.verticalAlign,J=b[0],fe=b[1],Ae=J-x.displaySize[0]*G,Ce=Ae+x.displaySize[0],De=fe-x.displaySize[1]*W,Ve=De+x.displaySize[1];return{image:x,top:De,bottom:Ve,left:Ae,right:Ce}}function fj(x,b,E,F,G,W){var J=x.image,fe;if(J.content){var Ae=J.content,Ce=J.pixelRatio||1;fe=[Ae[0]/Ce,Ae[1]/Ce,J.displaySize[0]-Ae[2]/Ce,J.displaySize[1]-Ae[3]/Ce]}var De=b.left*W,Ve=b.right*W,ot,at,mt,Ft;E==="width"||E==="both"?(Ft=G[0]+De-F[3],at=G[0]+Ve+F[1]):(Ft=G[0]+(De+Ve-J.displaySize[0])/2,at=Ft+J.displaySize[0]);var ur=b.top*W,Zt=b.bottom*W;return E==="height"||E==="both"?(ot=G[1]+ur-F[0],mt=G[1]+Zt+F[2]):(ot=G[1]+(ur+Zt-J.displaySize[1])/2,mt=ot+J.displaySize[1]),{image:J,top:ot,right:at,bottom:mt,left:Ft,collisionPadding:fe}}var Kb=function(x){function b(E,F,G,W){x.call(this,E,F),this.angle=G,W!==void 0&&(this.segment=W)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.clone=function(){return new b(this.x,this.y,this.angle,this.segment)},b}(c);pe("Anchor",Kb);var zd=128;function u6(x,b){var E=b.expression;if(E.kind==="constant"){var F=E.evaluate(new Nn(x+1));return{kind:"constant",layoutSize:F}}else{if(E.kind==="source")return{kind:"source"};for(var G=E.zoomStops,W=E.interpolationType,J=0;J<G.length&&G[J]<=x;)J++;J=Math.max(0,J-1);for(var fe=J;fe<G.length&&G[fe]<x+1;)fe++;fe=Math.min(G.length-1,fe);var Ae=G[J],Ce=G[fe];if(E.kind==="composite")return{kind:"composite",minZoom:Ae,maxZoom:Ce,interpolationType:W};var De=E.evaluate(new Nn(Ae)),Ve=E.evaluate(new Nn(Ce));return{kind:"camera",minZoom:Ae,maxZoom:Ce,minSize:De,maxSize:Ve,interpolationType:W}}}function cj(x,b,E){var F=b.uSize,G=b.uSizeT,W=E.lowerSize,J=E.upperSize;return x.kind==="source"?W/zd:x.kind==="composite"?gs(W/zd,J/zd,G):F}function hj(x,b){var E=0,F=0;if(x.kind==="constant")F=x.layoutSize;else if(x.kind!=="source"){var G=x.interpolationType,W=x.minZoom,J=x.maxZoom,fe=G?m(Ls.interpolationFactor(G,b,W,J),0,1):0;x.kind==="camera"?F=gs(x.minSize,x.maxSize,fe):E=fe}return{uSizeT:E,uSize:F}}var O3e=Object.freeze({__proto__:null,getSizeData:u6,evaluateSizeForFeature:cj,evaluateSizeForZoom:hj,SIZE_PACK_FACTOR:zd});function vj(x,b,E,F,G){if(b.segment===void 0)return!0;for(var W=b,J=b.segment+1,fe=0;fe>-E/2;){if(J--,J<0)return!1;fe-=x[J].dist(W),W=x[J]}fe+=x[J].dist(x[J+1]),J++;for(var Ae=[],Ce=0;fe<E/2;){var De=x[J-1],Ve=x[J],ot=x[J+1];if(!ot)return!1;var at=De.angleTo(Ve)-Ve.angleTo(ot);for(at=Math.abs((at+3*Math.PI)%(Math.PI*2)-Math.PI),Ae.push({distance:fe,angleDelta:at}),Ce+=at;fe-Ae[0].distance>F;)Ce-=Ae.shift().angleDelta;if(Ce>G)return!1;J++,fe+=Ve.dist(ot)}return!0}function dj(x){for(var b=0,E=0;E<x.length-1;E++)b+=x[E].dist(x[E+1]);return b}function pj(x,b,E){return x?3/5*b*E:0}function gj(x,b){return Math.max(x?x.right-x.left:0,b?b.right-b.left:0)}function N3e(x,b,E,F,G,W){for(var J=pj(E,G,W),fe=gj(E,F)*W,Ae=0,Ce=dj(x)/2,De=0;De<x.length-1;De++){var Ve=x[De],ot=x[De+1],at=Ve.dist(ot);if(Ae+at>Ce){var mt=(Ce-Ae)/at,Ft=gs(Ve.x,ot.x,mt),ur=gs(Ve.y,ot.y,mt),Zt=new Kb(Ft,ur,ot.angleTo(Ve),De);return Zt._round(),!J||vj(x,Zt,fe,J,b)?Zt:void 0}Ae+=at}}function B3e(x,b,E,F,G,W,J,fe,Ae){var Ce=pj(F,W,J),De=gj(F,G),Ve=De*J,ot=x[0].x===0||x[0].x===Ae||x[0].y===0||x[0].y===Ae;b-Ve<b/4&&(b=Ve+b/4);var at=W*2,mt=ot?b/2*fe%b:(De/2+at)*J*fe%b;return mj(x,mt,b,Ce,E,Ve,ot,!1,Ae)}function mj(x,b,E,F,G,W,J,fe,Ae){for(var Ce=W/2,De=dj(x),Ve=0,ot=b-E,at=[],mt=0;mt<x.length-1;mt++){for(var Ft=x[mt],ur=x[mt+1],Zt=Ft.dist(ur),zr=ur.angleTo(Ft);ot+E<Ve+Zt;){ot+=E;var xr=(ot-Ve)/Zt,Rr=gs(Ft.x,ur.x,xr),Nr=gs(Ft.y,ur.y,xr);if(Rr>=0&&Rr<Ae&&Nr>=0&&Nr<Ae&&ot-Ce>=0&&ot+Ce<=De){var na=new Kb(Rr,Nr,zr,mt);na._round(),(!F||vj(x,na,W,F,G))&&at.push(na)}}Ve+=Zt}return!fe&&!at.length&&!J&&(at=mj(x,Ve/2,E,F,G,W,J,!0,Ae)),at}function yj(x,b,E,F,G){for(var W=[],J=0;J<x.length;J++)for(var fe=x[J],Ae=void 0,Ce=0;Ce<fe.length-1;Ce++){var De=fe[Ce],Ve=fe[Ce+1];De.x<b&&Ve.x<b||(De.x<b?De=new c(b,De.y+(Ve.y-De.y)*((b-De.x)/(Ve.x-De.x)))._round():Ve.x<b&&(Ve=new c(b,De.y+(Ve.y-De.y)*((b-De.x)/(Ve.x-De.x)))._round()),!(De.y<E&&Ve.y<E)&&(De.y<E?De=new c(De.x+(Ve.x-De.x)*((E-De.y)/(Ve.y-De.y)),E)._round():Ve.y<E&&(Ve=new c(De.x+(Ve.x-De.x)*((E-De.y)/(Ve.y-De.y)),E)._round()),!(De.x>=F&&Ve.x>=F)&&(De.x>=F?De=new c(F,De.y+(Ve.y-De.y)*((F-De.x)/(Ve.x-De.x)))._round():Ve.x>=F&&(Ve=new c(F,De.y+(Ve.y-De.y)*((F-De.x)/(Ve.x-De.x)))._round()),!(De.y>=G&&Ve.y>=G)&&(De.y>=G?De=new c(De.x+(Ve.x-De.x)*((G-De.y)/(Ve.y-De.y)),G)._round():Ve.y>=G&&(Ve=new c(De.x+(Ve.x-De.x)*((G-De.y)/(Ve.y-De.y)),G)._round()),(!Ae||!De.equals(Ae[Ae.length-1]))&&(Ae=[De],W.push(Ae)),Ae.push(Ve)))))}return W}var Jb=Qf;function xj(x,b,E,F){var G=[],W=x.image,J=W.pixelRatio,fe=W.paddedRect.w-2*Jb,Ae=W.paddedRect.h-2*Jb,Ce=x.right-x.left,De=x.bottom-x.top,Ve=W.stretchX||[[0,fe]],ot=W.stretchY||[[0,Ae]],at=function(xi,vi){return xi+vi[1]-vi[0]},mt=Ve.reduce(at,0),Ft=ot.reduce(at,0),ur=fe-mt,Zt=Ae-Ft,zr=0,xr=mt,Rr=0,Nr=Ft,na=0,da=ur,ha=0,Ka=Zt;if(W.content&&F){var Da=W.content;zr=yk(Ve,0,Da[0]),Rr=yk(ot,0,Da[1]),xr=yk(Ve,Da[0],Da[2]),Nr=yk(ot,Da[1],Da[3]),na=Da[0]-zr,ha=Da[1]-Rr,da=Da[2]-Da[0]-xr,Ka=Da[3]-Da[1]-Nr}var $a=function(xi,vi,go,ko){var _s=xk(xi.stretch-zr,xr,Ce,x.left),Ds=bk(xi.fixed-na,da,xi.stretch,mt),Tl=xk(vi.stretch-Rr,Nr,De,x.top),qs=bk(vi.fixed-ha,Ka,vi.stretch,Ft),Cu=xk(go.stretch-zr,xr,Ce,x.left),Lu=bk(go.fixed-na,da,go.stretch,mt),Al=xk(ko.stretch-Rr,Nr,De,x.top),ju=bk(ko.fixed-ha,Ka,ko.stretch,Ft),qu=new c(_s,Tl),sl=new c(Cu,Tl),Yu=new c(Cu,Al),th=new c(_s,Al),Pg=new c(Ds/J,qs/J),Xm=new c(Lu/J,ju/J),Zm=b*Math.PI/180;if(Zm){var Km=Math.sin(Zm),o_=Math.cos(Zm),Ev=[o_,-Km,Km,o_];qu._matMult(Ev),sl._matMult(Ev),th._matMult(Ev),Yu._matMult(Ev)}var Mk=xi.stretch+xi.fixed,m6=go.stretch+go.fixed,kk=vi.stretch+vi.fixed,y6=ko.stretch+ko.fixed,Gh={x:W.paddedRect.x+Jb+Mk,y:W.paddedRect.y+Jb+kk,w:m6-Mk,h:y6-kk},s_=da/J/Ce,Ek=Ka/J/De;return{tl:qu,tr:sl,bl:th,br:Yu,tex:Gh,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pg,pixelOffsetBR:Xm,minFontScaleX:s_,minFontScaleY:Ek,isSDF:E}};if(!F||!W.stretchX&&!W.stretchY)G.push($a({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:fe+1},{fixed:0,stretch:Ae+1}));else for(var An=bj(Ve,ur,mt),ja=bj(ot,Zt,Ft),Za=0;Za<An.length-1;Za++)for(var Bn=An[Za],wn=An[Za+1],mi=0;mi<ja.length-1;mi++){var ro=ja[mi],yi=ja[mi+1];G.push($a(Bn,ro,wn,yi))}return G}function yk(x,b,E){for(var F=0,G=0,W=x;G<W.length;G+=1){var J=W[G];F+=Math.max(b,Math.min(E,J[1]))-Math.max(b,Math.min(E,J[0]))}return F}function bj(x,b,E){for(var F=[{fixed:-Jb,stretch:0}],G=0,W=x;G<W.length;G+=1){var J=W[G],fe=J[0],Ae=J[1],Ce=F[F.length-1];F.push({fixed:fe-Ce.stretch,stretch:Ce.stretch}),F.push({fixed:fe-Ce.stretch,stretch:Ce.stretch+(Ae-fe)})}return F.push({fixed:b+Jb,stretch:E}),F}function xk(x,b,E,F){return x/b*E+F}function bk(x,b,E,F){return x-b*E/F}function $3e(x,b,E,F,G,W,J,fe){for(var Ae=F.layout.get("text-rotate").evaluate(W,{})*Math.PI/180,Ce=[],De=0,Ve=b.positionedLines;De<Ve.length;De+=1)for(var ot=Ve[De],at=0,mt=ot.positionedGlyphs;at<mt.length;at+=1){var Ft=mt[at];if(!!Ft.rect){var ur=Ft.rect||{},Zt=1,zr=rj+Zt,xr=!0,Rr=1,Nr=0,na=(G||fe)&&Ft.vertical,da=Ft.metrics.advance*Ft.scale/2;if(fe&&b.verticalizable){var ha=(Ft.scale-1)*Ul,Ka=(Ul-Ft.metrics.width*Ft.scale)/2;Nr=ot.lineOffset/2-(Ft.imageName?-Ka:ha)}if(Ft.imageName){var Da=J[Ft.imageName];xr=Da.sdf,Rr=Da.pixelRatio,zr=Qf/Rr}var $a=G?[Ft.x+da,Ft.y]:[0,0],An=G?[0,0]:[Ft.x+da+E[0],Ft.y+E[1]-Nr],ja=[0,0];na&&(ja=An,An=[0,0]);var Za=(Ft.metrics.left-zr)*Ft.scale-da+An[0],Bn=(-Ft.metrics.top-zr)*Ft.scale+An[1],wn=Za+ur.w*Ft.scale/Rr,mi=Bn+ur.h*Ft.scale/Rr,ro=new c(Za,Bn),yi=new c(wn,Bn),xi=new c(Za,mi),vi=new c(wn,mi);if(na){var go=new c(-da,da-I3),ko=-Math.PI/2,_s=Ul/2-da,Ds=Ft.imageName?_s:0,Tl=new c(5-I3-_s,-Ds),qs=new(Function.prototype.bind.apply(c,[null].concat(ja)));ro._rotateAround(ko,go)._add(Tl)._add(qs),yi._rotateAround(ko,go)._add(Tl)._add(qs),xi._rotateAround(ko,go)._add(Tl)._add(qs),vi._rotateAround(ko,go)._add(Tl)._add(qs)}if(Ae){var Cu=Math.sin(Ae),Lu=Math.cos(Ae),Al=[Lu,-Cu,Cu,Lu];ro._matMult(Al),yi._matMult(Al),xi._matMult(Al),vi._matMult(Al)}var ju=new c(0,0),qu=new c(0,0),sl=0,Yu=0;Ce.push({tl:ro,tr:yi,bl:xi,br:vi,tex:ur,writingMode:b.writingMode,glyphOffset:$a,sectionIndex:Ft.sectionIndex,isSDF:xr,pixelOffsetTL:ju,pixelOffsetBR:qu,minFontScaleX:sl,minFontScaleY:Yu})}}return Ce}var _k=function(b,E,F,G,W,J,fe,Ae,Ce,De){if(this.boxStartIndex=b.length,Ce){var Ve=J.top,ot=J.bottom,at=J.collisionPadding;at&&(Ve-=at[1],ot+=at[3]);var mt=ot-Ve;mt>0&&(mt=Math.max(10,mt),this.circleDiameter=mt)}else{var Ft=J.top*fe-Ae,ur=J.bottom*fe+Ae,Zt=J.left*fe-Ae,zr=J.right*fe+Ae,xr=J.collisionPadding;if(xr&&(Zt-=xr[0]*fe,Ft-=xr[1]*fe,zr+=xr[2]*fe,ur+=xr[3]*fe),De){var Rr=new c(Zt,Ft),Nr=new c(zr,Ft),na=new c(Zt,ur),da=new c(zr,ur),ha=De*Math.PI/180;Rr._rotate(ha),Nr._rotate(ha),na._rotate(ha),da._rotate(ha),Zt=Math.min(Rr.x,Nr.x,na.x,da.x),zr=Math.max(Rr.x,Nr.x,na.x,da.x),Ft=Math.min(Rr.y,Nr.y,na.y,da.y),ur=Math.max(Rr.y,Nr.y,na.y,da.y)}b.emplaceBack(E.x,E.y,Zt,Ft,zr,ur,F,G,W)}this.boxEndIndex=b.length},Qb=function(b,E){if(b===void 0&&(b=[]),E===void 0&&(E=U3e),this.data=b,this.length=this.data.length,this.compare=E,this.length>0)for(var F=(this.length>>1)-1;F>=0;F--)this._down(F)};Qb.prototype.push=function(b){this.data.push(b),this.length++,this._up(this.length-1)},Qb.prototype.pop=function(){if(this.length!==0){var b=this.data[0],E=this.data.pop();return this.length--,this.length>0&&(this.data[0]=E,this._down(0)),b}},Qb.prototype.peek=function(){return this.data[0]},Qb.prototype._up=function(b){for(var E=this,F=E.data,G=E.compare,W=F[b];b>0;){var J=b-1>>1,fe=F[J];if(G(W,fe)>=0)break;F[b]=fe,b=J}F[b]=W},Qb.prototype._down=function(b){for(var E=this,F=E.data,G=E.compare,W=this.length>>1,J=F[b];b<W;){var fe=(b<<1)+1,Ae=F[fe],Ce=fe+1;if(Ce<this.length&&G(F[Ce],Ae)<0&&(fe=Ce,Ae=F[Ce]),G(Ae,J)>=0)break;F[b]=Ae,b=fe}F[b]=J};function U3e(x,b){return x<b?-1:x>b?1:0}function H3e(x,b,E){b===void 0&&(b=1),E===void 0&&(E=!1);for(var F=1/0,G=1/0,W=-1/0,J=-1/0,fe=x[0],Ae=0;Ae<fe.length;Ae++){var Ce=fe[Ae];(!Ae||Ce.x<F)&&(F=Ce.x),(!Ae||Ce.y<G)&&(G=Ce.y),(!Ae||Ce.x>W)&&(W=Ce.x),(!Ae||Ce.y>J)&&(J=Ce.y)}var De=W-F,Ve=J-G,ot=Math.min(De,Ve),at=ot/2,mt=new Qb([],G3e);if(ot===0)return new c(F,G);for(var Ft=F;Ft<W;Ft+=ot)for(var ur=G;ur<J;ur+=ot)mt.push(new e_(Ft+at,ur+at,at,x));for(var Zt=j3e(x),zr=mt.length;mt.length;){var xr=mt.pop();(xr.d>Zt.d||!Zt.d)&&(Zt=xr,E&&console.log("found best %d after %d probes",Math.round(1e4*xr.d)/1e4,zr)),!(xr.max-Zt.d<=b)&&(at=xr.h/2,mt.push(new e_(xr.p.x-at,xr.p.y-at,at,x)),mt.push(new e_(xr.p.x+at,xr.p.y-at,at,x)),mt.push(new e_(xr.p.x-at,xr.p.y+at,at,x)),mt.push(new e_(xr.p.x+at,xr.p.y+at,at,x)),zr+=4)}return E&&(console.log("num probes: "+zr),console.log("best distance: "+Zt.d)),Zt.p}function G3e(x,b){return b.max-x.max}function e_(x,b,E,F){this.p=new c(x,b),this.h=E,this.d=V3e(this.p,F),this.max=this.d+this.h*Math.SQRT2}function V3e(x,b){for(var E=!1,F=1/0,G=0;G<b.length;G++)for(var W=b[G],J=0,fe=W.length,Ae=fe-1;J<fe;Ae=J++){var Ce=W[J],De=W[Ae];Ce.y>x.y!=De.y>x.y&&x.x<(De.x-Ce.x)*(x.y-Ce.y)/(De.y-Ce.y)+Ce.x&&(E=!E),F=Math.min(F,pn(x,Ce,De))}return(E?1:-1)*Math.sqrt(F)}function j3e(x){for(var b=0,E=0,F=0,G=x[0],W=0,J=G.length,fe=J-1;W<J;fe=W++){var Ae=G[W],Ce=G[fe],De=Ae.x*Ce.y-Ce.x*Ae.y;E+=(Ae.x+Ce.x)*De,F+=(Ae.y+Ce.y)*De,b+=De*3}return new e_(E/b,F/b,0,x)}var t_=7,f6=Number.POSITIVE_INFINITY;function _j(x,b){function E(G,W){var J=0,fe=0;W<0&&(W=0);var Ae=W/Math.sqrt(2);switch(G){case"top-right":case"top-left":fe=Ae-t_;break;case"bottom-right":case"bottom-left":fe=-Ae+t_;break;case"bottom":fe=-W+t_;break;case"top":fe=W-t_;break}switch(G){case"top-right":case"bottom-right":J=-Ae;break;case"top-left":case"bottom-left":J=Ae;break;case"left":J=W;break;case"right":J=-W;break}return[J,fe]}function F(G,W,J){var fe=0,Ae=0;switch(W=Math.abs(W),J=Math.abs(J),G){case"top-right":case"top-left":case"top":Ae=J-t_;break;case"bottom-right":case"bottom-left":case"bottom":Ae=-J+t_;break}switch(G){case"top-right":case"bottom-right":case"right":fe=-W;break;case"top-left":case"bottom-left":case"left":fe=W;break}return[fe,Ae]}return b[1]!==f6?F(x,b[0],b[1]):E(x,b[0])}function q3e(x,b,E,F,G,W,J){x.createArrays();var fe=512*x.overscaling;x.tilePixelRatio=Dr/fe,x.compareText={},x.iconsNeedLinear=!1;var Ae=x.layers[0].layout,Ce=x.layers[0]._unevaluatedLayout._values,De={};if(x.textSizeData.kind==="composite"){var Ve=x.textSizeData,ot=Ve.minZoom,at=Ve.maxZoom;De.compositeTextSizes=[Ce["text-size"].possiblyEvaluate(new Nn(ot),J),Ce["text-size"].possiblyEvaluate(new Nn(at),J)]}if(x.iconSizeData.kind==="composite"){var mt=x.iconSizeData,Ft=mt.minZoom,ur=mt.maxZoom;De.compositeIconSizes=[Ce["icon-size"].possiblyEvaluate(new Nn(Ft),J),Ce["icon-size"].possiblyEvaluate(new Nn(ur),J)]}De.layoutTextSize=Ce["text-size"].possiblyEvaluate(new Nn(x.zoom+1),J),De.layoutIconSize=Ce["icon-size"].possiblyEvaluate(new Nn(x.zoom+1),J),De.textMaxSize=Ce["text-size"].possiblyEvaluate(new Nn(18));for(var Zt=Ae.get("text-line-height")*Ul,zr=Ae.get("text-rotation-alignment")==="map"&&Ae.get("symbol-placement")!=="point",xr=Ae.get("text-keep-upright"),Rr=Ae.get("text-size"),Nr=function(){var ha=da[na],Ka=Ae.get("text-font").evaluate(ha,{},J).join(","),Da=Rr.evaluate(ha,{},J),$a=De.layoutTextSize.evaluate(ha,{},J),An=De.layoutIconSize.evaluate(ha,{},J),ja={horizontal:{},vertical:void 0},Za=ha.text,Bn=[0,0];if(Za){var wn=Za.toString(),mi=Ae.get("text-letter-spacing").evaluate(ha,{},J)*Ul,ro=lr(wn)?mi:0,yi=Ae.get("text-anchor").evaluate(ha,{},J),xi=Ae.get("text-variable-anchor");if(!xi){var vi=Ae.get("text-radial-offset").evaluate(ha,{},J);vi?Bn=_j(yi,[vi*Ul,f6]):Bn=Ae.get("text-offset").evaluate(ha,{},J).map(function(Pg){return Pg*Ul})}var go=zr?"center":Ae.get("text-justify").evaluate(ha,{},J),ko=Ae.get("symbol-placement"),_s=ko==="point"?Ae.get("text-max-width").evaluate(ha,{},J)*Ul:0,Ds=function(){x.allowVerticalPlacement&&Vt(wn)&&(ja.vertical=mk(Za,b,E,G,Ka,_s,Zt,yi,"left",ro,Bn,eh.vertical,!0,ko,$a,Da))};if(!zr&&xi){for(var Tl=go==="auto"?xi.map(function(Pg){return c6(Pg)}):[go],qs=!1,Cu=0;Cu<Tl.length;Cu++){var Lu=Tl[Cu];if(!ja.horizontal[Lu])if(qs)ja.horizontal[Lu]=ja.horizontal[0];else{var Al=mk(Za,b,E,G,Ka,_s,Zt,"center",Lu,ro,Bn,eh.horizontal,!1,ko,$a,Da);Al&&(ja.horizontal[Lu]=Al,qs=Al.positionedLines.length===1)}}Ds()}else{go==="auto"&&(go=c6(yi));var ju=mk(Za,b,E,G,Ka,_s,Zt,yi,go,ro,Bn,eh.horizontal,!1,ko,$a,Da);ju&&(ja.horizontal[go]=ju),Ds(),Vt(wn)&&zr&&xr&&(ja.vertical=mk(Za,b,E,G,Ka,_s,Zt,yi,go,ro,Bn,eh.vertical,!1,ko,$a,Da))}}var qu=void 0,sl=!1;if(ha.icon&&ha.icon.name){var Yu=F[ha.icon.name];Yu&&(qu=F3e(G[ha.icon.name],Ae.get("icon-offset").evaluate(ha,{},J),Ae.get("icon-anchor").evaluate(ha,{},J)),sl=Yu.sdf,x.sdfIcons===void 0?x.sdfIcons=Yu.sdf:x.sdfIcons!==Yu.sdf&&Y("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Yu.pixelRatio!==x.pixelRatio||Ae.get("icon-rotate").constantOr(1)!==0)&&(x.iconsNeedLinear=!0))}var th=Tj(ja.horizontal)||ja.vertical;x.iconsInText=th?th.iconsInText:!1,(th||qu)&&Y3e(x,ha,ja,qu,F,De,$a,An,Bn,sl,J)},na=0,da=x.features;na<da.length;na+=1)Nr();W&&x.generateCollisionDebugBuffers()}function c6(x){switch(x){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Y3e(x,b,E,F,G,W,J,fe,Ae,Ce,De){var Ve=W.textMaxSize.evaluate(b,{});Ve===void 0&&(Ve=J);var ot=x.layers[0].layout,at=ot.get("icon-offset").evaluate(b,{},De),mt=Tj(E.horizontal),Ft=24,ur=J/Ft,Zt=x.tilePixelRatio*ur,zr=x.tilePixelRatio*Ve/Ft,xr=x.tilePixelRatio*fe,Rr=x.tilePixelRatio*ot.get("symbol-spacing"),Nr=ot.get("text-padding")*x.tilePixelRatio,na=ot.get("icon-padding")*x.tilePixelRatio,da=ot.get("text-max-angle")/180*Math.PI,ha=ot.get("text-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",Ka=ot.get("icon-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",Da=ot.get("symbol-placement"),$a=Rr/2,An=ot.get("icon-text-fit"),ja;F&&An!=="none"&&(x.allowVerticalPlacement&&E.vertical&&(ja=fj(F,E.vertical,An,ot.get("icon-text-fit-padding"),at,ur)),mt&&(F=fj(F,mt,An,ot.get("icon-text-fit-padding"),at,ur)));var Za=function(o_,Ev){Ev.x<0||Ev.x>=Dr||Ev.y<0||Ev.y>=Dr||W3e(x,Ev,o_,E,F,G,ja,x.layers[0],x.collisionBoxArray,b.index,b.sourceLayerIndex,x.index,Zt,Nr,ha,Ae,xr,na,Ka,at,b,W,Ce,De,J)};if(Da==="line")for(var Bn=0,wn=yj(b.geometry,0,0,Dr,Dr);Bn<wn.length;Bn+=1)for(var mi=wn[Bn],ro=B3e(mi,Rr,da,E.vertical||mt,F,Ft,zr,x.overscaling,Dr),yi=0,xi=ro;yi<xi.length;yi+=1){var vi=xi[yi],go=mt;(!go||!X3e(x,go.text,$a,vi))&&Za(mi,vi)}else if(Da==="line-center")for(var ko=0,_s=b.geometry;ko<_s.length;ko+=1){var Ds=_s[ko];if(Ds.length>1){var Tl=N3e(Ds,da,E.vertical||mt,F,Ft,zr);Tl&&Za(Ds,Tl)}}else if(b.type==="Polygon")for(var qs=0,Cu=e6(b.geometry,0);qs<Cu.length;qs+=1){var Lu=Cu[qs],Al=H3e(Lu,16);Za(Lu[0],new Kb(Al.x,Al.y,0))}else if(b.type==="LineString")for(var ju=0,qu=b.geometry;ju<qu.length;ju+=1){var sl=qu[ju];Za(sl,new Kb(sl[0].x,sl[0].y,0))}else if(b.type==="Point")for(var Yu=0,th=b.geometry;Yu<th.length;Yu+=1)for(var Pg=th[Yu],Xm=0,Zm=Pg;Xm<Zm.length;Xm+=1){var Km=Zm[Xm];Za([Km],new Kb(Km.x,Km.y,0))}}var D3=255,Ym=D3*zd;function wj(x,b,E,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt){var Ft=$3e(b,E,fe,G,W,J,F,x.allowVerticalPlacement),ur=x.textSizeData,Zt=null;ur.kind==="source"?(Zt=[zd*G.layout.get("text-size").evaluate(J,{})],Zt[0]>Ym&&Y(x.layerIds[0]+': Value for "text-size" is >= '+D3+'. Reduce your "text-size".')):ur.kind==="composite"&&(Zt=[zd*at.compositeTextSizes[0].evaluate(J,{},mt),zd*at.compositeTextSizes[1].evaluate(J,{},mt)],(Zt[0]>Ym||Zt[1]>Ym)&&Y(x.layerIds[0]+': Value for "text-size" is >= '+D3+'. Reduce your "text-size".')),x.addSymbols(x.text,Ft,Zt,fe,W,J,Ce,b,Ae.lineStartIndex,Ae.lineLength,ot,mt);for(var zr=0,xr=De;zr<xr.length;zr+=1){var Rr=xr[zr];Ve[Rr]=x.text.placedSymbolArray.length-1}return Ft.length*4}function Tj(x){for(var b in x)return x[b];return null}function W3e(x,b,E,F,G,W,J,fe,Ae,Ce,De,Ve,ot,at,mt,Ft,ur,Zt,zr,xr,Rr,Nr,na,da,ha){var Ka,Da=x.addToLineVertexArray(b,E),$a,An,ja,Za,Bn=0,wn=0,mi=0,ro=0,yi=-1,xi=-1,vi={},go=le(""),ko=0,_s=0;if(fe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ka=fe.layout.get("text-offset").evaluate(Rr,{},da).map(function(F3){return F3*Ul}),ko=Ka[0],_s=Ka[1]):(ko=fe.layout.get("text-radial-offset").evaluate(Rr,{},da)*Ul,_s=f6),x.allowVerticalPlacement&&F.vertical){var Ds=fe.layout.get("text-rotate").evaluate(Rr,{},da),Tl=Ds+90,qs=F.vertical;ja=new _k(Ae,b,Ce,De,Ve,qs,ot,at,mt,Tl),J&&(Za=new _k(Ae,b,Ce,De,Ve,J,ur,Zt,mt,Tl))}if(G){var Cu=fe.layout.get("icon-rotate").evaluate(Rr,{}),Lu=fe.layout.get("icon-text-fit")!=="none",Al=xj(G,Cu,na,Lu),ju=J?xj(J,Cu,na,Lu):void 0;An=new _k(Ae,b,Ce,De,Ve,G,ur,Zt,!1,Cu),Bn=Al.length*4;var qu=x.iconSizeData,sl=null;qu.kind==="source"?(sl=[zd*fe.layout.get("icon-size").evaluate(Rr,{})],sl[0]>Ym&&Y(x.layerIds[0]+': Value for "icon-size" is >= '+D3+'. Reduce your "icon-size".')):qu.kind==="composite"&&(sl=[zd*Nr.compositeIconSizes[0].evaluate(Rr,{},da),zd*Nr.compositeIconSizes[1].evaluate(Rr,{},da)],(sl[0]>Ym||sl[1]>Ym)&&Y(x.layerIds[0]+': Value for "icon-size" is >= '+D3+'. Reduce your "icon-size".')),x.addSymbols(x.icon,Al,sl,xr,zr,Rr,!1,b,Da.lineStartIndex,Da.lineLength,-1,da),yi=x.icon.placedSymbolArray.length-1,ju&&(wn=ju.length*4,x.addSymbols(x.icon,ju,sl,xr,zr,Rr,eh.vertical,b,Da.lineStartIndex,Da.lineLength,-1,da),xi=x.icon.placedSymbolArray.length-1)}for(var Yu in F.horizontal){var th=F.horizontal[Yu];if(!$a){go=le(th.text);var Pg=fe.layout.get("text-rotate").evaluate(Rr,{},da);$a=new _k(Ae,b,Ce,De,Ve,th,ot,at,mt,Pg)}var Xm=th.positionedLines.length===1;if(mi+=wj(x,b,th,W,fe,mt,Rr,Ft,Da,F.vertical?eh.horizontal:eh.horizontalOnly,Xm?Object.keys(F.horizontal):[Yu],vi,yi,Nr,da),Xm)break}F.vertical&&(ro+=wj(x,b,F.vertical,W,fe,mt,Rr,Ft,Da,eh.vertical,["vertical"],vi,xi,Nr,da));var Zm=$a?$a.boxStartIndex:x.collisionBoxArray.length,Km=$a?$a.boxEndIndex:x.collisionBoxArray.length,o_=ja?ja.boxStartIndex:x.collisionBoxArray.length,Ev=ja?ja.boxEndIndex:x.collisionBoxArray.length,Mk=An?An.boxStartIndex:x.collisionBoxArray.length,m6=An?An.boxEndIndex:x.collisionBoxArray.length,kk=Za?Za.boxStartIndex:x.collisionBoxArray.length,y6=Za?Za.boxEndIndex:x.collisionBoxArray.length,Gh=-1,s_=function(F3,Bj){return F3&&F3.circleDiameter?Math.max(F3.circleDiameter,Bj):Bj};Gh=s_($a,Gh),Gh=s_(ja,Gh),Gh=s_(An,Gh),Gh=s_(Za,Gh);var Ek=Gh>-1?1:0;Ek&&(Gh*=ha/Ul),x.glyphOffsetArray.length>=to.MAX_GLYPHS&&Y("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rr.sortKey!==void 0&&x.addToSortKeyRanges(x.symbolInstances.length,Rr.sortKey),x.symbolInstances.emplaceBack(b.x,b.y,vi.right>=0?vi.right:-1,vi.center>=0?vi.center:-1,vi.left>=0?vi.left:-1,vi.vertical||-1,yi,xi,go,Zm,Km,o_,Ev,Mk,m6,kk,y6,Ce,mi,ro,Bn,wn,Ek,0,ot,ko,_s,Gh)}function X3e(x,b,E,F){var G=x.compareText;if(!(b in G))G[b]=[];else for(var W=G[b],J=W.length-1;J>=0;J--)if(F.dist(W[J])<E)return!0;return G[b].push(F),!1}var Z3e=Yb.VectorTileFeature.types,K3e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wk(x,b,E,F,G,W,J,fe,Ae,Ce,De,Ve,ot){var at=fe?Math.min(Ym,Math.round(fe[0])):0,mt=fe?Math.min(Ym,Math.round(fe[1])):0;x.emplaceBack(b,E,Math.round(F*32),Math.round(G*32),W,J,(at<<1)+(Ae?1:0),mt,Ce*16,De*16,Ve*256,ot*256)}function h6(x,b,E){x.emplaceBack(b.x,b.y,E),x.emplaceBack(b.x,b.y,E),x.emplaceBack(b.x,b.y,E),x.emplaceBack(b.x,b.y,E)}function J3e(x){for(var b=0,E=x.sections;b<E.length;b+=1){var F=E[b];if(va(F.text))return!0}return!1}var r_=function(b){this.layoutVertexArray=new Xc,this.indexArray=new Kc,this.programConfigurations=b,this.segments=new P,this.dynamicLayoutVertexArray=new B1,this.opacityVertexArray=new $1,this.placedSymbolArray=new Vu};r_.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},r_.prototype.upload=function(b,E,F,G){this.isEmpty()||(F&&(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,n6.members),this.indexBuffer=b.createIndexBuffer(this.indexArray,E),this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,Qwe.members,!0),this.opacityVertexBuffer=b.createVertexBuffer(this.opacityVertexArray,K3e,!0),this.opacityVertexBuffer.itemSize=1),(F||G)&&this.programConfigurations.upload(b))},r_.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},pe("SymbolBuffers",r_);var R3=function(b,E,F){this.layoutVertexArray=new b,this.layoutAttributes=E,this.indexArray=new F,this.segments=new P,this.collisionVertexArray=new tu};R3.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,e3e.members,!0)},R3.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},pe("CollisionBuffers",R3);var to=function(b){this.collisionBoxArray=b.collisionBoxArray,this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(function(Ae){return Ae.id}),this.index=b.index,this.pixelRatio=b.pixelRatio,this.sourceLayerIndex=b.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Qn([]),this.placementViewportMatrix=Qn([]);var E=this.layers[0],F=E._unevaluatedLayout._values;this.textSizeData=u6(this.zoom,F["text-size"]),this.iconSizeData=u6(this.zoom,F["icon-size"]);var G=this.layers[0].layout,W=G.get("symbol-sort-key"),J=G.get("symbol-z-order");this.sortFeaturesByKey=J!=="viewport-y"&&W.constantOr(1)!==void 0;var fe=J==="viewport-y"||J==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=fe&&(G.get("text-allow-overlap")||G.get("icon-allow-overlap")||G.get("text-ignore-placement")||G.get("icon-ignore-placement")),G.get("symbol-placement")==="point"&&(this.writingModes=G.get("text-writing-mode").map(function(Ae){return eh[Ae]})),this.stateDependentLayerIds=this.layers.filter(function(Ae){return Ae.isStateDependent()}).map(function(Ae){return Ae.id}),this.sourceID=b.sourceID};to.prototype.createArrays=function(){this.text=new r_(new Lr(n6.members,this.layers,this.zoom,function(b){return/^text/.test(b)})),this.icon=new r_(new Lr(n6.members,this.layers,this.zoom,function(b){return/^icon/.test(b)})),this.glyphOffsetArray=new Af,this.lineVertexArray=new Ub,this.symbolInstances=new ru},to.prototype.calculateGlyphDependencies=function(b,E,F,G,W){for(var J=0;J<b.length;J++)if(E[b.charCodeAt(J)]=!0,(F||G)&&W){var fe=C3[b.charAt(J)];fe&&(E[fe.charCodeAt(0)]=!0)}},to.prototype.populate=function(b,E,F){var G=this.layers[0],W=G.layout,J=W.get("text-font"),fe=W.get("text-field"),Ae=W.get("icon-image"),Ce=(fe.value.kind!=="constant"||fe.value.value instanceof Wn&&!fe.value.value.isEmpty()||fe.value.value.toString().length>0)&&(J.value.kind!=="constant"||J.value.value.length>0),De=Ae.value.kind!=="constant"||!!Ae.value.value||Object.keys(Ae.parameters).length>0,Ve=W.get("symbol-sort-key");if(this.features=[],!(!Ce&&!De)){for(var ot=E.iconDependencies,at=E.glyphDependencies,mt=E.availableImages,Ft=new Nn(this.zoom),ur=0,Zt=b;ur<Zt.length;ur+=1){var zr=Zt[ur],xr=zr.feature,Rr=zr.id,Nr=zr.index,na=zr.sourceLayerIndex,da=G._featureFilter.needGeometry,ha={type:xr.type,id:Rr,properties:xr.properties,geometry:da?Cr(xr):[]};if(!!G._featureFilter.filter(Ft,ha,F)){da||(ha.geometry=Cr(xr));var Ka=void 0;if(Ce){var Da=G.getValueAndResolveTokens("text-field",ha,F,mt),$a=Wn.factory(Da);J3e($a)&&(this.hasRTLText=!0),(!this.hasRTLText||Jn()==="unavailable"||this.hasRTLText&&Ln.isParsed())&&(Ka=a3e($a,G,ha))}var An=void 0;if(De){var ja=G.getValueAndResolveTokens("icon-image",ha,F,mt);ja instanceof $s?An=ja:An=$s.fromString(ja)}if(!(!Ka&&!An)){var Za=this.sortFeaturesByKey?Ve.evaluate(ha,{},F):void 0,Bn={id:Rr,text:Ka,icon:An,index:Nr,sourceLayerIndex:na,geometry:Cr(xr),properties:xr.properties,type:Z3e[xr.type],sortKey:Za};if(this.features.push(Bn),An&&(ot[An.name]=!0),Ka){var wn=J.evaluate(ha,{},F).join(","),mi=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(eh.vertical)>=0;for(var ro=0,yi=Ka.sections;ro<yi.length;ro+=1){var xi=yi[ro];if(xi.image)ot[xi.image.name]=!0;else{var vi=Vt(Ka.toString()),go=xi.fontStack||wn,ko=at[go]=at[go]||{};this.calculateGlyphDependencies(xi.text,ko,mi,this.allowVerticalPlacement,vi)}}}}}}W.get("symbol-placement")==="line"&&(this.features=n3e(this.features)),this.sortFeaturesByKey&&this.features.sort(function(_s,Ds){return _s.sortKey-Ds.sortKey})}},to.prototype.update=function(b,E,F){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(b,E,this.layers,F),this.icon.programConfigurations.updatePaintArrays(b,E,this.layers,F))},to.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},to.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},to.prototype.upload=function(b){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(b),this.iconCollisionBox.upload(b)),this.text.upload(b,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(b,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},to.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},to.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},to.prototype.addToLineVertexArray=function(b,E){var F=this.lineVertexArray.length;if(b.segment!==void 0){for(var G=b.dist(E[b.segment+1]),W=b.dist(E[b.segment]),J={},fe=b.segment+1;fe<E.length;fe++)J[fe]={x:E[fe].x,y:E[fe].y,tileUnitDistanceFromAnchor:G},fe<E.length-1&&(G+=E[fe+1].dist(E[fe]));for(var Ae=b.segment||0;Ae>=0;Ae--)J[Ae]={x:E[Ae].x,y:E[Ae].y,tileUnitDistanceFromAnchor:W},Ae>0&&(W+=E[Ae-1].dist(E[Ae]));for(var Ce=0;Ce<E.length;Ce++){var De=J[Ce];this.lineVertexArray.emplaceBack(De.x,De.y,De.tileUnitDistanceFromAnchor)}}return{lineStartIndex:F,lineLength:this.lineVertexArray.length-F}},to.prototype.addSymbols=function(b,E,F,G,W,J,fe,Ae,Ce,De,Ve,ot){for(var at=b.indexArray,mt=b.layoutVertexArray,Ft=b.segments.prepareSegment(4*E.length,mt,at,J.sortKey),ur=this.glyphOffsetArray.length,Zt=Ft.vertexLength,zr=this.allowVerticalPlacement&&fe===eh.vertical?Math.PI/2:0,xr=J.text&&J.text.sections,Rr=0;Rr<E.length;Rr++){var Nr=E[Rr],na=Nr.tl,da=Nr.tr,ha=Nr.bl,Ka=Nr.br,Da=Nr.tex,$a=Nr.pixelOffsetTL,An=Nr.pixelOffsetBR,ja=Nr.minFontScaleX,Za=Nr.minFontScaleY,Bn=Nr.glyphOffset,wn=Nr.isSDF,mi=Nr.sectionIndex,ro=Ft.vertexLength,yi=Bn[1];wk(mt,Ae.x,Ae.y,na.x,yi+na.y,Da.x,Da.y,F,wn,$a.x,$a.y,ja,Za),wk(mt,Ae.x,Ae.y,da.x,yi+da.y,Da.x+Da.w,Da.y,F,wn,An.x,$a.y,ja,Za),wk(mt,Ae.x,Ae.y,ha.x,yi+ha.y,Da.x,Da.y+Da.h,F,wn,$a.x,An.y,ja,Za),wk(mt,Ae.x,Ae.y,Ka.x,yi+Ka.y,Da.x+Da.w,Da.y+Da.h,F,wn,An.x,An.y,ja,Za),h6(b.dynamicLayoutVertexArray,Ae,zr),at.emplaceBack(ro,ro+1,ro+2),at.emplaceBack(ro+1,ro+2,ro+3),Ft.vertexLength+=4,Ft.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bn[0]),(Rr===E.length-1||mi!==E[Rr+1].sectionIndex)&&b.programConfigurations.populatePaintArrays(mt.length,J,J.index,{},ot,xr&&xr[mi])}b.placedSymbolArray.emplaceBack(Ae.x,Ae.y,ur,this.glyphOffsetArray.length-ur,Zt,Ce,De,Ae.segment,F?F[0]:0,F?F[1]:0,G[0],G[1],fe,0,!1,0,Ve)},to.prototype._addCollisionDebugVertex=function(b,E,F,G,W,J){return E.emplaceBack(0,0),b.emplaceBack(F.x,F.y,G,W,Math.round(J.x),Math.round(J.y))},to.prototype.addCollisionDebugVertices=function(b,E,F,G,W,J,fe){var Ae=W.segments.prepareSegment(4,W.layoutVertexArray,W.indexArray),Ce=Ae.vertexLength,De=W.layoutVertexArray,Ve=W.collisionVertexArray,ot=fe.anchorX,at=fe.anchorY;this._addCollisionDebugVertex(De,Ve,J,ot,at,new c(b,E)),this._addCollisionDebugVertex(De,Ve,J,ot,at,new c(F,E)),this._addCollisionDebugVertex(De,Ve,J,ot,at,new c(F,G)),this._addCollisionDebugVertex(De,Ve,J,ot,at,new c(b,G)),Ae.vertexLength+=4;var mt=W.indexArray;mt.emplaceBack(Ce,Ce+1),mt.emplaceBack(Ce+1,Ce+2),mt.emplaceBack(Ce+2,Ce+3),mt.emplaceBack(Ce+3,Ce),Ae.primitiveLength+=4},to.prototype.addDebugCollisionBoxes=function(b,E,F,G){for(var W=b;W<E;W++){var J=this.collisionBoxArray.get(W),fe=J.x1,Ae=J.y1,Ce=J.x2,De=J.y2;this.addCollisionDebugVertices(fe,Ae,Ce,De,G?this.textCollisionBox:this.iconCollisionBox,J.anchorPoint,F)}},to.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new R3(Kf,KV.members,Jc),this.iconCollisionBox=new R3(Kf,KV.members,Jc);for(var b=0;b<this.symbolInstances.length;b++){var E=this.symbolInstances.get(b);this.addDebugCollisionBoxes(E.textBoxStartIndex,E.textBoxEndIndex,E,!0),this.addDebugCollisionBoxes(E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E,!0),this.addDebugCollisionBoxes(E.iconBoxStartIndex,E.iconBoxEndIndex,E,!1),this.addDebugCollisionBoxes(E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E,!1)}},to.prototype._deserializeCollisionBoxesForSymbol=function(b,E,F,G,W,J,fe,Ae,Ce){for(var De={},Ve=E;Ve<F;Ve++){var ot=b.get(Ve);De.textBox={x1:ot.x1,y1:ot.y1,x2:ot.x2,y2:ot.y2,anchorPointX:ot.anchorPointX,anchorPointY:ot.anchorPointY},De.textFeatureIndex=ot.featureIndex;break}for(var at=G;at<W;at++){var mt=b.get(at);De.verticalTextBox={x1:mt.x1,y1:mt.y1,x2:mt.x2,y2:mt.y2,anchorPointX:mt.anchorPointX,anchorPointY:mt.anchorPointY},De.verticalTextFeatureIndex=mt.featureIndex;break}for(var Ft=J;Ft<fe;Ft++){var ur=b.get(Ft);De.iconBox={x1:ur.x1,y1:ur.y1,x2:ur.x2,y2:ur.y2,anchorPointX:ur.anchorPointX,anchorPointY:ur.anchorPointY},De.iconFeatureIndex=ur.featureIndex;break}for(var Zt=Ae;Zt<Ce;Zt++){var zr=b.get(Zt);De.verticalIconBox={x1:zr.x1,y1:zr.y1,x2:zr.x2,y2:zr.y2,anchorPointX:zr.anchorPointX,anchorPointY:zr.anchorPointY},De.verticalIconFeatureIndex=zr.featureIndex;break}return De},to.prototype.deserializeCollisionBoxes=function(b){this.collisionArrays=[];for(var E=0;E<this.symbolInstances.length;E++){var F=this.symbolInstances.get(E);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(b,F.textBoxStartIndex,F.textBoxEndIndex,F.verticalTextBoxStartIndex,F.verticalTextBoxEndIndex,F.iconBoxStartIndex,F.iconBoxEndIndex,F.verticalIconBoxStartIndex,F.verticalIconBoxEndIndex))}},to.prototype.hasTextData=function(){return this.text.segments.get().length>0},to.prototype.hasIconData=function(){return this.icon.segments.get().length>0},to.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},to.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},to.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},to.prototype.addIndicesForPlacedSymbol=function(b,E){for(var F=b.placedSymbolArray.get(E),G=F.vertexStartIndex+F.numGlyphs*4,W=F.vertexStartIndex;W<G;W+=4)b.indexArray.emplaceBack(W,W+1,W+2),b.indexArray.emplaceBack(W+1,W+2,W+3)},to.prototype.getSortedSymbolIndexes=function(b){if(this.sortedAngle===b&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var E=Math.sin(b),F=Math.cos(b),G=[],W=[],J=[],fe=0;fe<this.symbolInstances.length;++fe){J.push(fe);var Ae=this.symbolInstances.get(fe);G.push(Math.round(E*Ae.anchorX+F*Ae.anchorY)|0),W.push(Ae.featureIndex)}return J.sort(function(Ce,De){return G[Ce]-G[De]||W[De]-W[Ce]}),J},to.prototype.addToSortKeyRanges=function(b,E){var F=this.sortKeyRanges[this.sortKeyRanges.length-1];F&&F.sortKey===E?F.symbolInstanceEnd=b+1:this.sortKeyRanges.push({sortKey:E,symbolInstanceStart:b,symbolInstanceEnd:b+1})},to.prototype.sortFeatures=function(b){var E=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==b&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(b),this.sortedAngle=b,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var F=0,G=this.symbolInstanceIndexes;F<G.length;F+=1){var W=G[F],J=this.symbolInstances.get(W);this.featureSortOrder.push(J.featureIndex),[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(function(fe,Ae,Ce){fe>=0&&Ce.indexOf(fe)===Ae&&E.addIndicesForPlacedSymbol(E.text,fe)}),J.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,J.verticalPlacedTextSymbolIndex),J.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.placedIconSymbolIndex),J.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},pe("SymbolBucket",to,{omit:["layers","collisionBoxArray","features","compareText"]}),to.MAX_GLYPHS=65535,to.addDynamicAttributes=h6;function Q3e(x,b){return b.replace(/{([^{}]+)}/g,function(E,F){return F in x?String(x[F]):""})}var eTe=new Ti({"symbol-placement":new tn(ea.layout_symbol["symbol-placement"]),"symbol-spacing":new tn(ea.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tn(ea.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wa(ea.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tn(ea.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new tn(ea.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new tn(ea.layout_symbol["icon-ignore-placement"]),"icon-optional":new tn(ea.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tn(ea.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wa(ea.layout_symbol["icon-size"]),"icon-text-fit":new tn(ea.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new tn(ea.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wa(ea.layout_symbol["icon-image"]),"icon-rotate":new Wa(ea.layout_symbol["icon-rotate"]),"icon-padding":new tn(ea.layout_symbol["icon-padding"]),"icon-keep-upright":new tn(ea.layout_symbol["icon-keep-upright"]),"icon-offset":new Wa(ea.layout_symbol["icon-offset"]),"icon-anchor":new Wa(ea.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tn(ea.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tn(ea.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tn(ea.layout_symbol["text-rotation-alignment"]),"text-field":new Wa(ea.layout_symbol["text-field"]),"text-font":new Wa(ea.layout_symbol["text-font"]),"text-size":new Wa(ea.layout_symbol["text-size"]),"text-max-width":new Wa(ea.layout_symbol["text-max-width"]),"text-line-height":new tn(ea.layout_symbol["text-line-height"]),"text-letter-spacing":new Wa(ea.layout_symbol["text-letter-spacing"]),"text-justify":new Wa(ea.layout_symbol["text-justify"]),"text-radial-offset":new Wa(ea.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tn(ea.layout_symbol["text-variable-anchor"]),"text-anchor":new Wa(ea.layout_symbol["text-anchor"]),"text-max-angle":new tn(ea.layout_symbol["text-max-angle"]),"text-writing-mode":new tn(ea.layout_symbol["text-writing-mode"]),"text-rotate":new Wa(ea.layout_symbol["text-rotate"]),"text-padding":new tn(ea.layout_symbol["text-padding"]),"text-keep-upright":new tn(ea.layout_symbol["text-keep-upright"]),"text-transform":new Wa(ea.layout_symbol["text-transform"]),"text-offset":new Wa(ea.layout_symbol["text-offset"]),"text-allow-overlap":new tn(ea.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new tn(ea.layout_symbol["text-ignore-placement"]),"text-optional":new tn(ea.layout_symbol["text-optional"])}),tTe=new Ti({"icon-opacity":new Wa(ea.paint_symbol["icon-opacity"]),"icon-color":new Wa(ea.paint_symbol["icon-color"]),"icon-halo-color":new Wa(ea.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wa(ea.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wa(ea.paint_symbol["icon-halo-blur"]),"icon-translate":new tn(ea.paint_symbol["icon-translate"]),"icon-translate-anchor":new tn(ea.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wa(ea.paint_symbol["text-opacity"]),"text-color":new Wa(ea.paint_symbol["text-color"],{runtimeType:Es,getOverride:function(x){return x.textColor},hasOverride:function(x){return!!x.textColor}}),"text-halo-color":new Wa(ea.paint_symbol["text-halo-color"]),"text-halo-width":new Wa(ea.paint_symbol["text-halo-width"]),"text-halo-blur":new Wa(ea.paint_symbol["text-halo-blur"]),"text-translate":new tn(ea.paint_symbol["text-translate"]),"text-translate-anchor":new tn(ea.paint_symbol["text-translate-anchor"])}),v6={paint:tTe,layout:eTe},a_=function(b){this.type=b.property.overrides?b.property.overrides.runtimeType:sf,this.defaultValue=b};a_.prototype.evaluate=function(b){if(b.formattedSection){var E=this.defaultValue.property.overrides;if(E&&E.hasOverride(b.formattedSection))return E.getOverride(b.formattedSection)}return b.feature&&b.featureState?this.defaultValue.evaluate(b.feature,b.featureState):this.defaultValue.property.specification.default},a_.prototype.eachChild=function(b){if(!this.defaultValue.isConstant()){var E=this.defaultValue.value;b(E._styleExpression.expression)}},a_.prototype.outputDefined=function(){return!1},a_.prototype.serialize=function(){return null},pe("FormatSectionOverride",a_,{omit:["defaultValue"]});var rTe=function(x){function b(E){x.call(this,E,v6)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.recalculate=function(F,G){if(x.prototype.recalculate.call(this,F,G),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var W=this.layout.get("text-writing-mode");if(W){for(var J=[],fe=0,Ae=W;fe<Ae.length;fe+=1){var Ce=Ae[fe];J.indexOf(Ce)<0&&J.push(Ce)}this.layout._values["text-writing-mode"]=J}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},b.prototype.getValueAndResolveTokens=function(F,G,W,J){var fe=this.layout.get(F).evaluate(G,{},W,J),Ae=this._unevaluatedLayout._values[F];return!Ae.isDataDriven()&&!xd(Ae.value)&&fe?Q3e(G.properties,fe):fe},b.prototype.createBucket=function(F){return new to(F)},b.prototype.queryRadius=function(){return 0},b.prototype.queryIntersectsFeature=function(){return!1},b.prototype._setPaintOverrides=function(){for(var F=0,G=v6.paint.overridableProperties;F<G.length;F+=1){var W=G[F];if(!!b.hasPaintOverride(this.layout,W)){var J=this.paint.get(W),fe=new a_(J),Ae=new bl(fe,J.property.specification),Ce=null;J.value.kind==="constant"||J.value.kind==="source"?Ce=new Hc("source",Ae):Ce=new wu("composite",Ae,J.value.zoomStops,J.value._interpolationType),this.paint._values[W]=new no(J.property,Ce,J.parameters)}}},b.prototype._handleOverridablePaintPropertyUpdate=function(F,G,W){return!this.layout||G.isDataDriven()||W.isDataDriven()?!1:b.hasPaintOverride(this.layout,F)},b.hasPaintOverride=function(F,G){var W=F.get("text-field"),J=v6.paint.properties[G],fe=!1,Ae=function(Ve){for(var ot=0,at=Ve;ot<at.length;ot+=1){var mt=at[ot];if(J.overrides&&J.overrides.hasOverride(mt)){fe=!0;return}}};if(W.value.kind==="constant"&&W.value.value instanceof Wn)Ae(W.value.value.sections);else if(W.value.kind==="source"){var Ce=function(Ve){if(!fe)if(Ve instanceof Cs&&Bo(Ve.value)===il){var ot=Ve.value;Ae(ot.sections)}else Ve instanceof yu?Ae(Ve.sections):Ve.eachChild(Ce)},De=W.value;De._styleExpression&&Ce(De._styleExpression.expression)}return fe},b}(Is),aTe=new Ti({"background-color":new tn(ea.paint_background["background-color"]),"background-pattern":new Io(ea.paint_background["background-pattern"]),"background-opacity":new tn(ea.paint_background["background-opacity"])}),nTe={paint:aTe},iTe=function(x){function b(E){x.call(this,E,nTe)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b}(Is),oTe=new Ti({"raster-opacity":new tn(ea.paint_raster["raster-opacity"]),"raster-hue-rotate":new tn(ea.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tn(ea.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tn(ea.paint_raster["raster-brightness-max"]),"raster-saturation":new tn(ea.paint_raster["raster-saturation"]),"raster-contrast":new tn(ea.paint_raster["raster-contrast"]),"raster-resampling":new tn(ea.paint_raster["raster-resampling"]),"raster-fade-duration":new tn(ea.paint_raster["raster-fade-duration"])}),sTe={paint:oTe},lTe=function(x){function b(E){x.call(this,E,sTe)}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b}(Is);function uTe(x){var b=[],E=x.id;return E===void 0&&b.push({message:"layers."+E+': missing required property "id"'}),x.render===void 0&&b.push({message:"layers."+E+': missing required method "render"'}),x.renderingMode&&x.renderingMode!=="2d"&&x.renderingMode!=="3d"&&b.push({message:"layers."+E+': property "renderingMode" must be either "2d" or "3d"'}),b}var fTe=function(x){function b(E){x.call(this,E,{}),this.implementation=E}return x&&(b.__proto__=x),b.prototype=Object.create(x&&x.prototype),b.prototype.constructor=b,b.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},b.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},b.prototype.recalculate=function(){},b.prototype.updateTransitions=function(){},b.prototype.hasTransition=function(){},b.prototype.serialize=function(){},b.prototype.onAdd=function(F){this.implementation.onAdd&&this.implementation.onAdd(F,F.painter.context.gl)},b.prototype.onRemove=function(F){this.implementation.onRemove&&this.implementation.onRemove(F,F.painter.context.gl)},b}(Is),cTe={circle:Ga,heatmap:Sg,hillshade:Mg,fill:ywe,"fill-extrusion":Nwe,line:Kwe,symbol:rTe,background:iTe,raster:lTe};function hTe(x){return x.type==="custom"?new fTe(x):new cTe[x.type](x)}var Aj=self.HTMLImageElement,Sj=self.HTMLCanvasElement,Mj=self.HTMLVideoElement,kj=self.ImageData,Tk=self.ImageBitmap,H1=function(b,E,F,G){this.context=b,this.format=F,this.texture=b.gl.createTexture(),this.update(E,G)};H1.prototype.update=function(b,E,F){var G=b.width,W=b.height,J=(!this.size||this.size[0]!==G||this.size[1]!==W)&&!F,fe=this,Ae=fe.context,Ce=Ae.gl;if(this.useMipmap=Boolean(E&&E.useMipmap),Ce.bindTexture(Ce.TEXTURE_2D,this.texture),Ae.pixelStoreUnpackFlipY.set(!1),Ae.pixelStoreUnpack.set(1),Ae.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ce.RGBA&&(!E||E.premultiply!==!1)),J)this.size=[G,W],b instanceof Aj||b instanceof Sj||b instanceof Mj||b instanceof kj||Tk&&b instanceof Tk?Ce.texImage2D(Ce.TEXTURE_2D,0,this.format,this.format,Ce.UNSIGNED_BYTE,b):Ce.texImage2D(Ce.TEXTURE_2D,0,this.format,G,W,0,this.format,Ce.UNSIGNED_BYTE,b.data);else{var De=F||{x:0,y:0},Ve=De.x,ot=De.y;b instanceof Aj||b instanceof Sj||b instanceof Mj||b instanceof kj||Tk&&b instanceof Tk?Ce.texSubImage2D(Ce.TEXTURE_2D,0,Ve,ot,Ce.RGBA,Ce.UNSIGNED_BYTE,b):Ce.texSubImage2D(Ce.TEXTURE_2D,0,Ve,ot,G,W,Ce.RGBA,Ce.UNSIGNED_BYTE,b.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ce.generateMipmap(Ce.TEXTURE_2D)},H1.prototype.bind=function(b,E,F){var G=this,W=G.context,J=W.gl;J.bindTexture(J.TEXTURE_2D,this.texture),F===J.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(F=J.LINEAR),b!==this.filter&&(J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,b),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,F||b),this.filter=b),E!==this.wrap&&(J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,E),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,E),this.wrap=E)},H1.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},H1.prototype.destroy=function(){var b=this.context,E=b.gl;E.deleteTexture(this.texture),this.texture=null};var d6=function(b){var E=this;this._callback=b,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){E._triggered=!1,E._callback()})};d6.prototype.trigger=function(){var b=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){b._triggered=!1,b._callback()},0))},d6.prototype.remove=function(){delete this._channel,this._callback=function(){}};var n_=function(b,E,F){this.target=b,this.parent=E,this.mapId=F,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},I(["receive","process"],this),this.invoker=new d6(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Z()?b:self};n_.prototype.send=function(b,E,F,G,W){var J=this;W===void 0&&(W=!1);var fe=Math.round(Math.random()*1e18).toString(36).substring(0,10);F&&(this.callbacks[fe]=F);var Ae=ie(this.globalScope)?void 0:[];return this.target.postMessage({id:fe,type:b,hasCallback:!!F,targetMapId:G,mustQueue:W,sourceMapId:this.mapId,data:nt(E,Ae)},Ae),{cancel:function(){F&&delete J.callbacks[fe],J.target.postMessage({id:fe,type:"<cancel>",targetMapId:G,sourceMapId:J.mapId})}}},n_.prototype.receive=function(b){var E=b.data,F=E.id;if(!!F&&!(E.targetMapId&&this.mapId!==E.targetMapId))if(E.type==="<cancel>"){delete this.tasks[F];var G=this.cancelCallbacks[F];delete this.cancelCallbacks[F],G&&G()}else Z()||E.mustQueue?(this.tasks[F]=E,this.taskQueue.push(F),this.invoker.trigger()):this.processTask(F,E)},n_.prototype.process=function(){if(!!this.taskQueue.length){var b=this.taskQueue.shift(),E=this.tasks[b];delete this.tasks[b],this.taskQueue.length&&this.invoker.trigger(),!!E&&this.processTask(b,E)}},n_.prototype.processTask=function(b,E){var F=this;if(E.type==="<response>"){var G=this.callbacks[b];delete this.callbacks[b],G&&(E.error?G(tt(E.error)):G(null,tt(E.data)))}else{var W=!1,J=ie(this.globalScope)?void 0:[],fe=E.hasCallback?function(ot,at){W=!0,delete F.cancelCallbacks[b],F.target.postMessage({id:b,type:"<response>",sourceMapId:F.mapId,error:ot?nt(ot):null,data:nt(at,J)},J)}:function(ot){W=!0},Ae=null,Ce=tt(E.data);if(this.parent[E.type])Ae=this.parent[E.type](E.sourceMapId,Ce,fe);else if(this.parent.getWorkerSource){var De=E.type.split("."),Ve=this.parent.getWorkerSource(E.sourceMapId,De[0],Ce.source);Ae=Ve[De[1]](Ce,fe)}else fe(new Error("Could not find function "+E.type));!W&&Ae&&Ae.cancel&&(this.cancelCallbacks[b]=Ae.cancel)}},n_.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function vTe(x,b,E){b=Math.pow(2,E)-b-1;var F=Ej(x*256,b*256,E),G=Ej((x+1)*256,(b+1)*256,E);return F[0]+","+F[1]+","+G[0]+","+G[1]}function Ej(x,b,E){var F=2*Math.PI*6378137/256/Math.pow(2,E),G=x*F-2*Math.PI*6378137/2,W=b*F-2*Math.PI*6378137/2;return[G,W]}var Vs=function(b,E){b&&(E?this.setSouthWest(b).setNorthEast(E):b.length===4?this.setSouthWest([b[0],b[1]]).setNorthEast([b[2],b[3]]):this.setSouthWest(b[0]).setNorthEast(b[1]))};Vs.prototype.setNorthEast=function(b){return this._ne=b instanceof jo?new jo(b.lng,b.lat):jo.convert(b),this},Vs.prototype.setSouthWest=function(b){return this._sw=b instanceof jo?new jo(b.lng,b.lat):jo.convert(b),this},Vs.prototype.extend=function(b){var E=this._sw,F=this._ne,G,W;if(b instanceof jo)G=b,W=b;else if(b instanceof Vs){if(G=b._sw,W=b._ne,!G||!W)return this}else{if(Array.isArray(b))if(b.length===4||b.every(Array.isArray)){var J=b;return this.extend(Vs.convert(J))}else{var fe=b;return this.extend(jo.convert(fe))}return this}return!E&&!F?(this._sw=new jo(G.lng,G.lat),this._ne=new jo(W.lng,W.lat)):(E.lng=Math.min(G.lng,E.lng),E.lat=Math.min(G.lat,E.lat),F.lng=Math.max(W.lng,F.lng),F.lat=Math.max(W.lat,F.lat)),this},Vs.prototype.getCenter=function(){return new jo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Vs.prototype.getSouthWest=function(){return this._sw},Vs.prototype.getNorthEast=function(){return this._ne},Vs.prototype.getNorthWest=function(){return new jo(this.getWest(),this.getNorth())},Vs.prototype.getSouthEast=function(){return new jo(this.getEast(),this.getSouth())},Vs.prototype.getWest=function(){return this._sw.lng},Vs.prototype.getSouth=function(){return this._sw.lat},Vs.prototype.getEast=function(){return this._ne.lng},Vs.prototype.getNorth=function(){return this._ne.lat},Vs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Vs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Vs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Vs.prototype.contains=function(b){var E=jo.convert(b),F=E.lng,G=E.lat,W=this._sw.lat<=G&&G<=this._ne.lat,J=this._sw.lng<=F&&F<=this._ne.lng;return this._sw.lng>this._ne.lng&&(J=this._sw.lng>=F&&F>=this._ne.lng),W&&J},Vs.convert=function(b){return!b||b instanceof Vs?b:new Vs(b)};var Cj=63710088e-1,jo=function(b,E){if(isNaN(b)||isNaN(E))throw new Error("Invalid LngLat object: ("+b+", "+E+")");if(this.lng=+b,this.lat=+E,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};jo.prototype.wrap=function(){return new jo(y(this.lng,-180,180),this.lat)},jo.prototype.toArray=function(){return[this.lng,this.lat]},jo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},jo.prototype.distanceTo=function(b){var E=Math.PI/180,F=this.lat*E,G=b.lat*E,W=Math.sin(F)*Math.sin(G)+Math.cos(F)*Math.cos(G)*Math.cos((b.lng-this.lng)*E),J=Cj*Math.acos(Math.min(W,1));return J},jo.prototype.toBounds=function(b){b===void 0&&(b=0);var E=40075017,F=360*b/E,G=F/Math.cos(Math.PI/180*this.lat);return new Vs(new jo(this.lng-G,this.lat-F),new jo(this.lng+G,this.lat+F))},jo.convert=function(b){if(b instanceof jo)return b;if(Array.isArray(b)&&(b.length===2||b.length===3))return new jo(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&typeof b=="object"&&b!==null)return new jo(Number("lng"in b?b.lng:b.lon),Number(b.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Lj=2*Math.PI*Cj;function Pj(x){return Lj*Math.cos(x*Math.PI/180)}function Ij(x){return(180+x)/360}function Dj(x){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+x*Math.PI/360)))/360}function Rj(x,b){return x/Pj(b)}function dTe(x){return x*360-180}function p6(x){var b=180-x*360;return 360/Math.PI*Math.atan(Math.exp(b*Math.PI/180))-90}function pTe(x,b){return x*Pj(p6(b))}function gTe(x){return 1/Math.cos(x*Math.PI/180)}var G1=function(b,E,F){F===void 0&&(F=0),this.x=+b,this.y=+E,this.z=+F};G1.fromLngLat=function(b,E){E===void 0&&(E=0);var F=jo.convert(b);return new G1(Ij(F.lng),Dj(F.lat),Rj(E,F.lat))},G1.prototype.toLngLat=function(){return new jo(dTe(this.x),p6(this.y))},G1.prototype.toAltitude=function(){return pTe(this.z,this.y)},G1.prototype.meterInMercatorCoordinateUnits=function(){return 1/Lj*gTe(p6(this.y))};var V1=function(b,E,F){this.z=b,this.x=E,this.y=F,this.key=z3(0,b,b,E,F)};V1.prototype.equals=function(b){return this.z===b.z&&this.x===b.x&&this.y===b.y},V1.prototype.url=function(b,E){var F=vTe(this.x,this.y,this.z),G=mTe(this.z,this.x,this.y);return b[(this.x+this.y)%b.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(E==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",G).replace("{bbox-epsg-3857}",F)},V1.prototype.getTilePoint=function(b){var E=Math.pow(2,this.z);return new c((b.x*E-this.x)*Dr,(b.y*E-this.y)*Dr)},V1.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var zj=function(b,E){this.wrap=b,this.canonical=E,this.key=z3(b,E.z,E.z,E.x,E.y)},js=function(b,E,F,G,W){this.overscaledZ=b,this.wrap=E,this.canonical=new V1(F,+G,+W),this.key=z3(E,b,F,G,W)};js.prototype.equals=function(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&this.canonical.equals(b.canonical)},js.prototype.scaledTo=function(b){var E=this.canonical.z-b;return b>this.canonical.z?new js(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new js(b,this.wrap,b,this.canonical.x>>E,this.canonical.y>>E)},js.prototype.calculateScaledKey=function(b,E){var F=this.canonical.z-b;return b>this.canonical.z?z3(this.wrap*+E,b,this.canonical.z,this.canonical.x,this.canonical.y):z3(this.wrap*+E,b,b,this.canonical.x>>F,this.canonical.y>>F)},js.prototype.isChildOf=function(b){if(b.wrap!==this.wrap)return!1;var E=this.canonical.z-b.canonical.z;return b.overscaledZ===0||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>E&&b.canonical.y===this.canonical.y>>E},js.prototype.children=function(b){if(this.overscaledZ>=b)return[new js(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var E=this.canonical.z+1,F=this.canonical.x*2,G=this.canonical.y*2;return[new js(E,this.wrap,E,F,G),new js(E,this.wrap,E,F+1,G),new js(E,this.wrap,E,F,G+1),new js(E,this.wrap,E,F+1,G+1)]},js.prototype.isLessThan=function(b){return this.wrap<b.wrap?!0:this.wrap>b.wrap?!1:this.overscaledZ<b.overscaledZ?!0:this.overscaledZ>b.overscaledZ?!1:this.canonical.x<b.canonical.x?!0:this.canonical.x>b.canonical.x?!1:this.canonical.y<b.canonical.y},js.prototype.wrapped=function(){return new js(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},js.prototype.unwrapTo=function(b){return new js(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)},js.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},js.prototype.toUnwrapped=function(){return new zj(this.wrap,this.canonical)},js.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},js.prototype.getTilePoint=function(b){return this.canonical.getTilePoint(new G1(b.x-this.wrap,b.y))};function z3(x,b,E,F,G){x*=2,x<0&&(x=x*-1-1);var W=1<<E;return(W*W*x+W*G+F).toString(36)+E.toString(36)+b.toString(36)}function mTe(x,b,E){for(var F="",G,W=x;W>0;W--)G=1<<W-1,F+=(b&G?1:0)+(E&G?2:0);return F}pe("CanonicalTileID",V1),pe("OverscaledTileID",js,{omit:["posMatrix"]});var Cg=function(b,E,F){if(this.uid=b,E.height!==E.width)throw new RangeError("DEM tiles must be square");if(F&&F!=="mapbox"&&F!=="terrarium")return Y('"'+F+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=E.height;var G=this.dim=E.height-2;this.data=new Uint32Array(E.data.buffer),this.encoding=F||"mapbox";for(var W=0;W<G;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(G,W)]=this.data[this._idx(G-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,G)]=this.data[this._idx(W,G-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(G,-1)]=this.data[this._idx(G-1,0)],this.data[this._idx(-1,G)]=this.data[this._idx(0,G-1)],this.data[this._idx(G,G)]=this.data[this._idx(G-1,G-1)]};Cg.prototype.get=function(b,E){var F=new Uint8Array(this.data.buffer),G=this._idx(b,E)*4,W=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return W(F[G],F[G+1],F[G+2])},Cg.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Cg.prototype._idx=function(b,E){if(b<-1||b>=this.dim+1||E<-1||E>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(E+1)*this.stride+(b+1)},Cg.prototype._unpackMapbox=function(b,E,F){return(b*256*256+E*256+F)/10-1e4},Cg.prototype._unpackTerrarium=function(b,E,F){return b*256+E+F/256-32768},Cg.prototype.getPixels=function(){return new zs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Cg.prototype.backfillBorder=function(b,E,F){if(this.dim!==b.dim)throw new Error("dem dimension mismatch");var G=E*this.dim,W=E*this.dim+this.dim,J=F*this.dim,fe=F*this.dim+this.dim;switch(E){case-1:G=W-1;break;case 1:W=G+1;break}switch(F){case-1:J=fe-1;break;case 1:fe=J+1;break}for(var Ae=-E*this.dim,Ce=-F*this.dim,De=J;De<fe;De++)for(var Ve=G;Ve<W;Ve++)this.data[this._idx(Ve,De)]=b.data[this._idx(Ve+Ae,De+Ce)]},pe("DEMData",Cg);function yTe(x,b){var E={};if(!b)return E;for(var F=function(){var J=W[G],fe=J.layerIds.map(function(Ve){return b.getLayer(Ve)}).filter(Boolean);if(fe.length!==0){J.layers=fe,J.stateDependentLayerIds&&(J.stateDependentLayers=J.stateDependentLayerIds.map(function(Ve){return fe.filter(function(ot){return ot.id===Ve})[0]}));for(var Ae=0,Ce=fe;Ae<Ce.length;Ae+=1){var De=Ce[Ae];E[De.id]=J}}},G=0,W=x;G<W.length;G+=1)F();return E}var Ak=function(b){this._stringToNumber={},this._numberToString=[];for(var E=0;E<b.length;E++){var F=b[E];this._stringToNumber[F]=E,this._numberToString[E]=F}};Ak.prototype.encode=function(b){return this._stringToNumber[b]},Ak.prototype.decode=function(b){return this._numberToString[b]};var Sk=function(b,E,F,G,W){this.type="Feature",this._vectorTileFeature=b,b._z=E,b._x=F,b._y=G,this.properties=b.properties,this.id=W},g6={geometry:{configurable:!0}};g6.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},g6.geometry.set=function(x){this._geometry=x},Sk.prototype.toJSON=function(){var b={geometry:this.geometry};for(var E in this)E==="_geometry"||E==="_vectorTileFeature"||(b[E]=this[E]);return b},Object.defineProperties(Sk.prototype,g6);var i_=function(){this.state={},this.stateChanges={},this.deletedStates={}};i_.prototype.updateState=function(b,E,F){var G=String(E);if(this.stateChanges[b]=this.stateChanges[b]||{},this.stateChanges[b][G]=this.stateChanges[b][G]||{},w(this.stateChanges[b][G],F),this.deletedStates[b]===null){this.deletedStates[b]={};for(var W in this.state[b])W!==G&&(this.deletedStates[b][W]=null)}else{var J=this.deletedStates[b]&&this.deletedStates[b][G]===null;if(J){this.deletedStates[b][G]={};for(var fe in this.state[b][G])F[fe]||(this.deletedStates[b][G][fe]=null)}else for(var Ae in F){var Ce=this.deletedStates[b]&&this.deletedStates[b][G]&&this.deletedStates[b][G][Ae]===null;Ce&&delete this.deletedStates[b][G][Ae]}}},i_.prototype.removeFeatureState=function(b,E,F){var G=this.deletedStates[b]===null;if(!G){var W=String(E);if(this.deletedStates[b]=this.deletedStates[b]||{},F&&E!==void 0)this.deletedStates[b][W]!==null&&(this.deletedStates[b][W]=this.deletedStates[b][W]||{},this.deletedStates[b][W][F]=null);else if(E!==void 0){var J=this.stateChanges[b]&&this.stateChanges[b][W];if(J){this.deletedStates[b][W]={};for(F in this.stateChanges[b][W])this.deletedStates[b][W][F]=null}else this.deletedStates[b][W]=null}else this.deletedStates[b]=null}},i_.prototype.getState=function(b,E){var F=String(E),G=this.state[b]||{},W=this.stateChanges[b]||{},J=w({},G[F],W[F]);if(this.deletedStates[b]===null)return{};if(this.deletedStates[b]){var fe=this.deletedStates[b][E];if(fe===null)return{};for(var Ae in fe)delete J[Ae]}return J},i_.prototype.initializeTileState=function(b,E){b.setFeatureState(this.state,E)},i_.prototype.coalesceChanges=function(b,E){var F={};for(var G in this.stateChanges){this.state[G]=this.state[G]||{};var W={};for(var J in this.stateChanges[G])this.state[G][J]||(this.state[G][J]={}),w(this.state[G][J],this.stateChanges[G][J]),W[J]=this.state[G][J];F[G]=W}for(var fe in this.deletedStates){this.state[fe]=this.state[fe]||{};var Ae={};if(this.deletedStates[fe]===null)for(var Ce in this.state[fe])Ae[Ce]={},this.state[fe][Ce]={};else for(var De in this.deletedStates[fe]){var Ve=this.deletedStates[fe][De]===null;if(Ve)this.state[fe][De]={};else for(var ot=0,at=Object.keys(this.deletedStates[fe][De]);ot<at.length;ot+=1){var mt=at[ot];delete this.state[fe][De][mt]}Ae[De]=this.state[fe][De]}F[fe]=F[fe]||{},w(F[fe],Ae)}if(this.stateChanges={},this.deletedStates={},Object.keys(F).length!==0)for(var Ft in b){var ur=b[Ft];ur.setFeatureState(F,E)}};var Lg=function(b,E){this.tileID=b,this.x=b.canonical.x,this.y=b.canonical.y,this.z=b.canonical.z,this.grid=new _f(Dr,16,0),this.grid3D=new _f(Dr,16,0),this.featureIndexArray=new U1,this.promoteId=E};Lg.prototype.insert=function(b,E,F,G,W,J){var fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(F,G,W);for(var Ae=J?this.grid3D:this.grid,Ce=0;Ce<E.length;Ce++){for(var De=E[Ce],Ve=[1/0,1/0,-1/0,-1/0],ot=0;ot<De.length;ot++){var at=De[ot];Ve[0]=Math.min(Ve[0],at.x),Ve[1]=Math.min(Ve[1],at.y),Ve[2]=Math.max(Ve[2],at.x),Ve[3]=Math.max(Ve[3],at.y)}Ve[0]<Dr&&Ve[1]<Dr&&Ve[2]>=0&&Ve[3]>=0&&Ae.insert(fe,Ve[0],Ve[1],Ve[2],Ve[3])}},Lg.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Yb.VectorTile(new dk(this.rawTileData)).layers,this.sourceLayerCoder=new Ak(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Lg.prototype.query=function(b,E,F,G){var W=this;this.loadVTLayers();for(var J=b.params||{},fe=Dr/b.tileSize/b.scale,Ae=Dp(J.filter),Ce=b.queryGeometry,De=b.queryPadding*fe,Ve=Oj(Ce),ot=this.grid.query(Ve.minX-De,Ve.minY-De,Ve.maxX+De,Ve.maxY+De),at=Oj(b.cameraQueryGeometry),mt=this.grid3D.query(at.minX-De,at.minY-De,at.maxX+De,at.maxY+De,function(na,da,ha,Ka){return Vi(b.cameraQueryGeometry,na-De,da-De,ha+De,Ka+De)}),Ft=0,ur=mt;Ft<ur.length;Ft+=1){var Zt=ur[Ft];ot.push(Zt)}ot.sort(xTe);for(var zr={},xr,Rr=function(na){var da=ot[na];if(da!==xr){xr=da;var ha=W.featureIndexArray.get(da),Ka=null;W.loadMatchingFeature(zr,ha.bucketIndex,ha.sourceLayerIndex,ha.featureIndex,Ae,J.layers,J.availableImages,E,F,G,function(Da,$a,An){return Ka||(Ka=Cr(Da)),$a.queryIntersectsFeature(Ce,Da,An,Ka,W.z,b.transform,fe,b.pixelPosMatrix)})}},Nr=0;Nr<ot.length;Nr++)Rr(Nr);return zr},Lg.prototype.loadMatchingFeature=function(b,E,F,G,W,J,fe,Ae,Ce,De,Ve){var ot=this.bucketLayerIDs[E];if(!(J&&!O(J,ot))){var at=this.sourceLayerCoder.decode(F),mt=this.vtLayers[at],Ft=mt.feature(G);if(!!W.filter(new Nn(this.tileID.overscaledZ),Ft))for(var ur=this.getId(Ft,at),Zt=0;Zt<ot.length;Zt++){var zr=ot[Zt];if(!(J&&J.indexOf(zr)<0)){var xr=Ae[zr];if(!!xr){var Rr={};ur!==void 0&&De&&(Rr=De.getState(xr.sourceLayer||"_geojsonTileLayer",ur));var Nr=Ce[zr];Nr.paint=Fj(Nr.paint,xr.paint,Ft,Rr,fe),Nr.layout=Fj(Nr.layout,xr.layout,Ft,Rr,fe);var na=!Ve||Ve(Ft,xr,Rr);if(!!na){var da=new Sk(Ft,this.z,this.x,this.y,ur);da.layer=Nr;var ha=b[zr];ha===void 0&&(ha=b[zr]=[]),ha.push({featureIndex:G,feature:da,intersectionZ:na})}}}}}},Lg.prototype.lookupSymbolFeatures=function(b,E,F,G,W,J,fe,Ae){var Ce={};this.loadVTLayers();for(var De=Dp(W),Ve=0,ot=b;Ve<ot.length;Ve+=1){var at=ot[Ve];this.loadMatchingFeature(Ce,F,G,at,De,J,fe,Ae,E)}return Ce},Lg.prototype.hasLayer=function(b){for(var E=0,F=this.bucketLayerIDs;E<F.length;E+=1)for(var G=F[E],W=0,J=G;W<J.length;W+=1){var fe=J[W];if(b===fe)return!0}return!1},Lg.prototype.getId=function(b,E){var F=b.id;if(this.promoteId){var G=typeof this.promoteId=="string"?this.promoteId:this.promoteId[E];F=b.properties[G],typeof F=="boolean"&&(F=Number(F))}return F},pe("FeatureIndex",Lg,{omit:["rawTileData","sourceLayerCoder"]});function Fj(x,b,E,F,G){return B(x,function(W,J){var fe=b instanceof Ao?b.get(J):null;return fe&&fe.evaluate?fe.evaluate(E,F,G):fe})}function Oj(x){for(var b=1/0,E=1/0,F=-1/0,G=-1/0,W=0,J=x;W<J.length;W+=1){var fe=J[W];b=Math.min(b,fe.x),E=Math.min(E,fe.y),F=Math.max(F,fe.x),G=Math.max(G,fe.y)}return{minX:b,minY:E,maxX:F,maxY:G}}function xTe(x,b){return b-x}var bTe=3e4,wl=function(b,E){this.tileID=b,this.uid=T(),this.uses=0,this.tileSize=E,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};wl.prototype.registerFadeDuration=function(b){var E=b+this.timeAdded;E<de.now()||this.fadeEndTime&&E<this.fadeEndTime||(this.fadeEndTime=E)},wl.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},wl.prototype.loadVectorData=function(b,E,F){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!b){this.collisionBoxArray=new Hh;return}b.featureIndex&&(this.latestFeatureIndex=b.featureIndex,b.rawTileData?(this.latestRawTileData=b.rawTileData,this.latestFeatureIndex.rawTileData=b.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=b.collisionBoxArray,this.buckets=yTe(b.buckets,E.style),this.hasSymbolBuckets=!1;for(var G in this.buckets){var W=this.buckets[G];if(W instanceof to)if(this.hasSymbolBuckets=!0,F)W.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var J in this.buckets){var fe=this.buckets[J];if(fe instanceof to&&fe.hasRTLText){this.hasRTLText=!0,To();break}}this.queryPadding=0;for(var Ae in this.buckets){var Ce=this.buckets[Ae];this.queryPadding=Math.max(this.queryPadding,E.style.getLayer(Ae).queryRadius(Ce))}b.imageAtlas&&(this.imageAtlas=b.imageAtlas),b.glyphAtlasImage&&(this.glyphAtlasImage=b.glyphAtlasImage)},wl.prototype.unloadVectorData=function(){for(var b in this.buckets)this.buckets[b].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},wl.prototype.getBucket=function(b){return this.buckets[b.id]},wl.prototype.upload=function(b){for(var E in this.buckets){var F=this.buckets[E];F.uploadPending()&&F.upload(b)}var G=b.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H1(b,this.imageAtlas.image,G.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H1(b,this.glyphAtlasImage,G.ALPHA),this.glyphAtlasImage=null)},wl.prototype.prepare=function(b){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(b,this.imageAtlasTexture)},wl.prototype.queryRenderedFeatures=function(b,E,F,G,W,J,fe,Ae,Ce,De){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:G,cameraQueryGeometry:W,scale:J,tileSize:this.tileSize,pixelPosMatrix:De,transform:Ae,params:fe,queryPadding:this.queryPadding*Ce},b,E,F)},wl.prototype.querySourceFeatures=function(b,E){var F=this.latestFeatureIndex;if(!(!F||!F.rawTileData)){var G=F.loadVTLayers(),W=E?E.sourceLayer:"",J=G._geojsonTileLayer||G[W];if(!!J)for(var fe=Dp(E&&E.filter),Ae=this.tileID.canonical,Ce=Ae.z,De=Ae.x,Ve=Ae.y,ot={z:Ce,x:De,y:Ve},at=0;at<J.length;at++){var mt=J.feature(at);if(fe.filter(new Nn(this.tileID.overscaledZ),mt)){var Ft=F.getId(mt,W),ur=new Sk(mt,Ce,De,Ve,Ft);ur.tile=ot,b.push(ur)}}}},wl.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},wl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},wl.prototype.setExpiryData=function(b){var E=this.expirationTime;if(b.cacheControl){var F=q(b.cacheControl);F["max-age"]&&(this.expirationTime=Date.now()+F["max-age"]*1e3)}else b.expires&&(this.expirationTime=new Date(b.expires).getTime());if(this.expirationTime){var G=Date.now(),W=!1;if(this.expirationTime>G)W=!1;else if(!E)W=!0;else if(this.expirationTime<E)W=!0;else{var J=this.expirationTime-E;J?this.expirationTime=G+Math.max(J,bTe):W=!0}W?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},wl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},wl.prototype.setFeatureState=function(b,E){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(b).length===0)){var F=this.latestFeatureIndex.loadVTLayers();for(var G in this.buckets)if(!!E.style.hasLayer(G)){var W=this.buckets[G],J=W.layers[0].sourceLayer||"_geojsonTileLayer",fe=F[J],Ae=b[J];if(!(!fe||!Ae||Object.keys(Ae).length===0)){W.update(Ae,fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Ce=E&&E.style&&E.style.getLayer(G);Ce&&(this.queryPadding=Math.max(this.queryPadding,Ce.queryRadius(W)))}}}},wl.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},wl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<de.now()},wl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},wl.prototype.setHoldDuration=function(b){this.symbolFadeHoldUntil=de.now()+b},wl.prototype.setDependencies=function(b,E){for(var F={},G=0,W=E;G<W.length;G+=1){var J=W[G];F[J]=!0}this.dependencies[b]=F},wl.prototype.hasDependency=function(b,E){for(var F=0,G=b;F<G.length;F+=1){var W=G[F],J=this.dependencies[W];if(J)for(var fe=0,Ae=E;fe<Ae.length;fe+=1){var Ce=Ae[fe];if(J[Ce])return!0}}return!1};var _Te=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Wm=self.performance,Nj=function(b){this._marks={start:[b.url,"start"].join("#"),end:[b.url,"end"].join("#"),measure:b.url.toString()},Wm.mark(this._marks.start)};Nj.prototype.finish=function(){Wm.mark(this._marks.end);var b=Wm.getEntriesByName(this._marks.measure);return b.length===0&&(Wm.measure(this._marks.measure,this._marks.start,this._marks.end),b=Wm.getEntriesByName(this._marks.measure),Wm.clearMarks(this._marks.start),Wm.clearMarks(this._marks.end),Wm.clearMeasures(this._marks.measure)),b},i.Actor=n_,i.AlphaImage=bs,i.CanonicalTileID=V1,i.CollisionBoxArray=Hh,i.Color=Si,i.DEMData=Cg,i.DataConstantProperty=tn,i.DictionaryCoder=Ak,i.EXTENT=Dr,i.ErrorEvent=In,i.EvaluationParameters=Nn,i.Event=en,i.Evented=yn,i.FeatureIndex=Lg,i.FillBucket=Dd,i.FillExtrusionBucket=Rd,i.ImageAtlas=P3,i.ImagePosition=gk,i.LineBucket=Sf,i.LngLat=jo,i.LngLatBounds=Vs,i.MercatorCoordinate=G1,i.ONE_EM=Ul,i.OverscaledTileID=js,i.Point=c,i.Point$1=c,i.Properties=Ti,i.Protobuf=dk,i.RGBAImage=zs,i.RequestManager=Ke,i.RequestPerformance=Nj,i.ResourceType=Rn,i.SegmentVector=P,i.SourceFeatureState=i_,i.StructArrayLayout1ui2=Gu,i.StructArrayLayout2f1f2i16=Zc,i.StructArrayLayout2i4=Bh,i.StructArrayLayout3ui6=Kc,i.StructArrayLayout4i8=qc,i.SymbolBucket=to,i.Texture=H1,i.Tile=wl,i.Transitionable=Go,i.Uniform1f=et,i.Uniform1i=He,i.Uniform2f=ht,i.Uniform3f=ct,i.Uniform4f=At,i.UniformColor=Bt,i.UniformMatrix4f=Qt,i.UnwrappedTileID=zj,i.ValidationError=wa,i.WritingMode=eh,i.ZoomHistory=xt,i.add=pr,i.addDynamicAttributes=h6,i.asyncAll=_,i.bezier=d,i.bindAll=I,i.browser=de,i.cacheEntryPossiblyAdded=sa,i.clamp=m,i.clearTileCache=Ca,i.clipLine=yj,i.clone=jn,i.clone$1=D,i.clone$2=jt,i.collisionCircleLayout=t3e,i.config=Me,i.create=sn,i.create$1=xs,i.create$2=So,i.createCommonjsModule=s,i.createExpression=bd,i.createLayout=Do,i.createStyleLayer=hTe,i.cross=Et,i.deepEqual=v,i.dot=cr,i.dot$1=qr,i.ease=g,i.emitValidationErrors=bf,i.endsWith=R,i.enforceCacheSizeLimit=$r,i.evaluateSizeForFeature=cj,i.evaluateSizeForZoom=hj,i.evaluateVariableOffset=_j,i.evented=ho,i.extend=w,i.featureFilter=Dp,i.filterObject=N,i.fromRotation=fi,i.getAnchorAlignment=l6,i.getAnchorJustification=c6,i.getArrayBuffer=We,i.getImage=Vr,i.getJSON=Ne,i.getRTLTextPluginStatus=Jn,i.getReferrer=ia,i.getVideo=la,i.identity=Qn,i.invert=po,i.isChar=st,i.isMapboxURL=vt,i.keysDifference=M,i.makeRequest=Pe,i.mapObject=B,i.mercatorXfromLng=Ij,i.mercatorYfromLat=Dj,i.mercatorZfromAltitude=Rj,i.mul=St,i.multiply=au,i.mvt=Yb,i.normalize=Wt,i.number=gs,i.offscreenCanvasSupported=jr,i.ortho=qn,i.parseGlyphPBF=E3e,i.pbf=dk,i.performSymbolLayout=q3e,i.perspective=Na,i.pick=A,i.plugin=Ln,i.polygonIntersectsPolygon=Ir,i.postMapLoadEvent=Qr,i.postTurnstileEvent=Or,i.potpack=aj,i.refProperties=_Te,i.register=pe,i.registerForPluginStateChange=pa,i.rotate=fn,i.rotateX=Ar,i.rotateZ=_r,i.scale=Ct,i.scale$1=br,i.scale$2=Kt,i.setCacheLimits=on,i.setRTLTextPlugin=Sn,i.sphericalToCartesian=Q,i.sqrLen=ln,i.styleSpec=ea,i.sub=Lt,i.symbolSize=O3e,i.transformMat3=zt,i.transformMat4=Kr,i.translate=io,i.triggerPluginCompletionEvent=un,i.uniqueId=T,i.validateCustomStyleLayer=uTe,i.validateLight=Fi,i.validateStyle=eu,i.values=S,i.vectorTile=Yb,i.version=l,i.warnOnce=Y,i.webpSupported=Ie,i.window=self,i.wrap=y}),o(["./shared"],function(i){function s(Ge){var Pe=typeof Ge;if(Pe==="number"||Pe==="boolean"||Pe==="string"||Ge===void 0||Ge===null)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var Ne="[",We=0,lt=Ge;We<lt.length;We+=1){var wt=lt[We];Ne+=s(wt)+","}return Ne+"]"}for(var Mt=Object.keys(Ge).sort(),It="{",rr=0;rr<Mt.length;rr++)It+=JSON.stringify(Mt[rr])+":"+s(Ge[Mt[rr]])+",";return It+"}"}function l(Ge){for(var Pe="",Ne=0,We=i.refProperties;Ne<We.length;Ne+=1){var lt=We[Ne];Pe+="/"+s(Ge[lt])}return Pe}function u(Ge,Pe){for(var Ne={},We=0;We<Ge.length;We++){var lt=Pe&&Pe[Ge[We].id]||l(Ge[We]);Pe&&(Pe[Ge[We].id]=lt);var wt=Ne[lt];wt||(wt=Ne[lt]=[]),wt.push(Ge[We])}var Mt=[];for(var It in Ne)Mt.push(Ne[It]);return Mt}var f=function(Pe){this.keyCache={},Pe&&this.replace(Pe)};f.prototype.replace=function(Pe){this._layerConfigs={},this._layers={},this.update(Pe,[])},f.prototype.update=function(Pe,Ne){for(var We=this,lt=0,wt=Pe;lt<wt.length;lt+=1){var Mt=wt[lt];this._layerConfigs[Mt.id]=Mt;var It=this._layers[Mt.id]=i.createStyleLayer(Mt);It._featureFilter=i.featureFilter(It.filter),this.keyCache[Mt.id]&&delete this.keyCache[Mt.id]}for(var rr=0,sr=Ne;rr<sr.length;rr+=1){var gr=sr[rr];delete this.keyCache[gr],delete this._layerConfigs[gr],delete this._layers[gr]}this.familiesBySource={};for(var Ur=u(i.values(this._layerConfigs),this.keyCache),Vr=0,la=Ur;Vr<la.length;Vr+=1){var Xa=la[Vr],La=Xa.map(function(ni){return We._layers[ni.id]}),en=La[0];if(en.visibility!=="none"){var In=en.source||"",yn=this.familiesBySource[In];yn||(yn=this.familiesBySource[In]={});var On=en.sourceLayer||"_geojsonTileLayer",dn=yn[On];dn||(dn=yn[On]=[]),dn.push(La)}}};var c=1,h=function(Pe){var Ne={},We=[];for(var lt in Pe){var wt=Pe[lt],Mt=Ne[lt]={};for(var It in wt){var rr=wt[+It];if(!(!rr||rr.bitmap.width===0||rr.bitmap.height===0)){var sr={x:0,y:0,w:rr.bitmap.width+2*c,h:rr.bitmap.height+2*c};We.push(sr),Mt[It]={rect:sr,metrics:rr.metrics}}}}var gr=i.potpack(We),Ur=gr.w,Vr=gr.h,la=new i.AlphaImage({width:Ur||1,height:Vr||1});for(var Xa in Pe){var La=Pe[Xa];for(var en in La){var In=La[+en];if(!(!In||In.bitmap.width===0||In.bitmap.height===0)){var yn=Ne[Xa][en].rect;i.AlphaImage.copy(In.bitmap,la,{x:0,y:0},{x:yn.x+c,y:yn.y+c},In.bitmap)}}}this.image=la,this.positions=Ne};i.register("GlyphAtlas",h);var v=function(Pe){this.tileID=new i.OverscaledTileID(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId};v.prototype.parse=function(Pe,Ne,We,lt,wt){var Mt=this;this.status="parsing",this.data=Pe,this.collisionBoxArray=new i.CollisionBoxArray;var It=new i.DictionaryCoder(Object.keys(Pe.layers).sort()),rr=new i.FeatureIndex(this.tileID,this.promoteId);rr.bucketLayerIDs=[];var sr={},gr={featureIndex:rr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:We},Ur=Ne.familiesBySource[this.source];for(var Vr in Ur){var la=Pe.layers[Vr];if(!!la){la.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+Vr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xa=It.encode(Vr),La=[],en=0;en<la.length;en++){var In=la.feature(en),yn=rr.getId(In,Vr);La.push({feature:In,id:yn,index:en,sourceLayerIndex:Xa})}for(var On=0,dn=Ur[Vr];On<dn.length;On+=1){var ni=dn[On],Oi=ni[0];if(!(Oi.minzoom&&this.zoom<Math.floor(Oi.minzoom))&&!(Oi.maxzoom&&this.zoom>=Oi.maxzoom)&&Oi.visibility!=="none"){p(ni,this.zoom,We);var No=sr[Oi.id]=Oi.createBucket({index:rr.bucketLayerIDs.length,layers:ni,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xa,sourceID:this.source});No.populate(La,gr,this.tileID.canonical),rr.bucketLayerIDs.push(ni.map(function(Vn){return Vn.id}))}}}}var kn,ds,Kn,_o,yl=i.mapObject(gr.glyphDependencies,function(Vn){return Object.keys(Vn).map(Number)});Object.keys(yl).length?lt.send("getGlyphs",{uid:this.uid,stacks:yl},function(Vn,nl){kn||(kn=Vn,ds=nl,zi.call(Mt))}):ds={};var xl=Object.keys(gr.iconDependencies);xl.length?lt.send("getImages",{icons:xl,source:this.source,tileID:this.tileID,type:"icons"},function(Vn,nl){kn||(kn=Vn,Kn=nl,zi.call(Mt))}):Kn={};var Hi=Object.keys(gr.patternDependencies);Hi.length?lt.send("getImages",{icons:Hi,source:this.source,tileID:this.tileID,type:"patterns"},function(Vn,nl){kn||(kn=Vn,_o=nl,zi.call(Mt))}):_o={},zi.call(this);function zi(){if(kn)return wt(kn);if(ds&&Kn&&_o){var Vn=new h(ds),nl=new i.ImageAtlas(Kn,_o);for(var kh in sr){var wo=sr[kh];wo instanceof i.SymbolBucket?(p(wo.layers,this.zoom,We),i.performSymbolLayout(wo,ds,Vn.positions,Kn,nl.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wo.hasPattern&&(wo instanceof i.LineBucket||wo instanceof i.FillBucket||wo instanceof i.FillExtrusionBucket)&&(p(wo.layers,this.zoom,We),wo.addFeatures(gr,this.tileID.canonical,nl.patternPositions))}this.status="done",wt(null,{buckets:i.values(sr).filter(function(Eh){return!Eh.isEmpty()}),featureIndex:rr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vn.image,imageAtlas:nl,glyphMap:this.returnDependencies?ds:null,iconMap:this.returnDependencies?Kn:null,glyphPositions:this.returnDependencies?Vn.positions:null})}}};function p(Ge,Pe,Ne){for(var We=new i.EvaluationParameters(Pe),lt=0,wt=Ge;lt<wt.length;lt+=1){var Mt=wt[lt];Mt.recalculate(We,Ne)}}function d(Ge,Pe){var Ne=i.getArrayBuffer(Ge.request,function(We,lt,wt,Mt){We?Pe(We):lt&&Pe(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(lt)),rawData:lt,cacheControl:wt,expires:Mt})});return function(){Ne.cancel(),Pe()}}var g=function(Pe,Ne,We,lt){this.actor=Pe,this.layerIndex=Ne,this.availableImages=We,this.loadVectorData=lt||d,this.loading={},this.loaded={}};g.prototype.loadTile=function(Pe,Ne){var We=this,lt=Pe.uid;this.loading||(this.loading={});var wt=Pe&&Pe.request&&Pe.request.collectResourceTiming?new i.RequestPerformance(Pe.request):!1,Mt=this.loading[lt]=new v(Pe);Mt.abort=this.loadVectorData(Pe,function(It,rr){if(delete We.loading[lt],It||!rr)return Mt.status="done",We.loaded[lt]=Mt,Ne(It);var sr=rr.rawData,gr={};rr.expires&&(gr.expires=rr.expires),rr.cacheControl&&(gr.cacheControl=rr.cacheControl);var Ur={};if(wt){var Vr=wt.finish();Vr&&(Ur.resourceTiming=JSON.parse(JSON.stringify(Vr)))}Mt.vectorTile=rr.vectorTile,Mt.parse(rr.vectorTile,We.layerIndex,We.availableImages,We.actor,function(la,Xa){if(la||!Xa)return Ne(la);Ne(null,i.extend({rawTileData:sr.slice(0)},Xa,gr,Ur))}),We.loaded=We.loaded||{},We.loaded[lt]=Mt})},g.prototype.reloadTile=function(Pe,Ne){var We=this,lt=this.loaded,wt=Pe.uid,Mt=this;if(lt&&lt[wt]){var It=lt[wt];It.showCollisionBoxes=Pe.showCollisionBoxes;var rr=function(sr,gr){var Ur=It.reloadCallback;Ur&&(delete It.reloadCallback,It.parse(It.vectorTile,Mt.layerIndex,We.availableImages,Mt.actor,Ur)),Ne(sr,gr)};It.status==="parsing"?It.reloadCallback=rr:It.status==="done"&&(It.vectorTile?It.parse(It.vectorTile,this.layerIndex,this.availableImages,this.actor,rr):rr())}},g.prototype.abortTile=function(Pe,Ne){var We=this.loading,lt=Pe.uid;We&&We[lt]&&We[lt].abort&&(We[lt].abort(),delete We[lt]),Ne()},g.prototype.removeTile=function(Pe,Ne){var We=this.loaded,lt=Pe.uid;We&&We[lt]&&delete We[lt],Ne()};var m=i.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(Pe,Ne){var We=Pe.uid,lt=Pe.encoding,wt=Pe.rawImageData,Mt=m&&wt instanceof m?this.getImageData(wt):wt,It=new i.DEMData(We,Mt,lt);this.loaded=this.loaded||{},this.loaded[We]=It,Ne(null,It)},y.prototype.getImageData=function(Pe){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Pe.width,Pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Pe.width,this.offscreenCanvas.height=Pe.height,this.offscreenCanvasContext.drawImage(Pe,0,0,Pe.width,Pe.height);var Ne=this.offscreenCanvasContext.getImageData(-1,-1,Pe.width+2,Pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:Ne.width,height:Ne.height},Ne.data)},y.prototype.removeTile=function(Pe){var Ne=this.loaded,We=Pe.uid;Ne&&Ne[We]&&delete Ne[We]};var _=S;function S(Ge,Pe){var Ne=Ge&&Ge.type,We;if(Ne==="FeatureCollection")for(We=0;We<Ge.features.length;We++)S(Ge.features[We],Pe);else if(Ne==="GeometryCollection")for(We=0;We<Ge.geometries.length;We++)S(Ge.geometries[We],Pe);else if(Ne==="Feature")S(Ge.geometry,Pe);else if(Ne==="Polygon")M(Ge.coordinates,Pe);else if(Ne==="MultiPolygon")for(We=0;We<Ge.coordinates.length;We++)M(Ge.coordinates[We],Pe);return Ge}function M(Ge,Pe){if(Ge.length!==0){w(Ge[0],Pe);for(var Ne=1;Ne<Ge.length;Ne++)w(Ge[Ne],!Pe)}}function w(Ge,Pe){for(var Ne=0,We=0,lt=Ge.length,wt=lt-1;We<lt;wt=We++)Ne+=(Ge[We][0]-Ge[wt][0])*(Ge[wt][1]+Ge[We][1]);Ne>=0!=!!Pe&&Ge.reverse()}var A=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,k=function(Pe){this._feature=Pe,this.extent=i.EXTENT,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))};k.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Pe=[],Ne=0,We=this._feature.geometry;Ne<We.length;Ne+=1){var lt=We[Ne];Pe.push([new i.Point$1(lt[0],lt[1])])}return Pe}else{for(var wt=[],Mt=0,It=this._feature.geometry;Mt<It.length;Mt+=1){for(var rr=It[Mt],sr=[],gr=0,Ur=rr;gr<Ur.length;gr+=1){var Vr=Ur[gr];sr.push(new i.Point$1(Vr[0],Vr[1]))}wt.push(sr)}return wt}},k.prototype.toGeoJSON=function(Pe,Ne,We){return A.call(this,Pe,Ne,We)};var T=function(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=Pe.length,this._features=Pe};T.prototype.feature=function(Pe){return new k(this._features[Pe])};var L=i.vectorTile.VectorTileFeature,C=I;function I(Ge,Pe){this.options=Pe||{},this.features=Ge,this.length=Ge.length}I.prototype.feature=function(Ge){return new R(this.features[Ge],this.options.extent)};function R(Ge,Pe){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=Pe||4096}R.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var Pe=0;Pe<Ge.length;Pe++){for(var Ne=Ge[Pe],We=[],lt=0;lt<Ne.length;lt++)We.push(new i.Point$1(Ne[lt][0],Ne[lt][1]));this.geometry.push(We)}return this.geometry},R.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,Pe=1/0,Ne=-1/0,We=1/0,lt=-1/0,wt=0;wt<Ge.length;wt++)for(var Mt=Ge[wt],It=0;It<Mt.length;It++){var rr=Mt[It];Pe=Math.min(Pe,rr.x),Ne=Math.max(Ne,rr.x),We=Math.min(We,rr.y),lt=Math.max(lt,rr.y)}return[Pe,We,Ne,lt]},R.prototype.toGeoJSON=L.prototype.toGeoJSON;var B=$,N=$,D=Y,O=C;function $(Ge){var Pe=new i.pbf;return X(Ge,Pe),Pe.finish()}function Y(Ge,Pe){Pe=Pe||{};var Ne={};for(var We in Ge)Ne[We]=new C(Ge[We].features,Pe),Ne[We].name=We,Ne[We].version=Pe.version,Ne[We].extent=Pe.extent;return $({layers:Ne})}function X(Ge,Pe){for(var Ne in Ge.layers)Pe.writeMessage(3,ee,Ge.layers[Ne])}function ee(Ge,Pe){Pe.writeVarintField(15,Ge.version||1),Pe.writeStringField(1,Ge.name||""),Pe.writeVarintField(5,Ge.extent||4096);var Ne,We={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Ge.length;Ne++)We.feature=Ge.feature(Ne),Pe.writeMessage(2,Q,We);var lt=We.keys;for(Ne=0;Ne<lt.length;Ne++)Pe.writeStringField(3,lt[Ne]);var wt=We.values;for(Ne=0;Ne<wt.length;Ne++)Pe.writeMessage(4,we,wt[Ne])}function Q(Ge,Pe){var Ne=Ge.feature;Ne.id!==void 0&&Pe.writeVarintField(1,Ne.id),Pe.writeMessage(2,Z,Ge),Pe.writeVarintField(3,Ne.type),Pe.writeMessage(4,ie,Ne)}function Z(Ge,Pe){var Ne=Ge.feature,We=Ge.keys,lt=Ge.values,wt=Ge.keycache,Mt=Ge.valuecache;for(var It in Ne.properties){var rr=wt[It];typeof rr=="undefined"&&(We.push(It),rr=We.length-1,wt[It]=rr),Pe.writeVarint(rr);var sr=Ne.properties[It],gr=typeof sr;gr!=="string"&&gr!=="boolean"&&gr!=="number"&&(sr=JSON.stringify(sr));var Ur=gr+":"+sr,Vr=Mt[Ur];typeof Vr=="undefined"&&(lt.push(sr),Vr=lt.length-1,Mt[Ur]=Vr),Pe.writeVarint(Vr)}}function q(Ge,Pe){return(Pe<<3)+(Ge&7)}function ae(Ge){return Ge<<1^Ge>>31}function ie(Ge,Pe){for(var Ne=Ge.loadGeometry(),We=Ge.type,lt=0,wt=0,Mt=Ne.length,It=0;It<Mt;It++){var rr=Ne[It],sr=1;We===1&&(sr=rr.length),Pe.writeVarint(q(1,sr));for(var gr=We===3?rr.length-1:rr.length,Ur=0;Ur<gr;Ur++){Ur===1&&We!==1&&Pe.writeVarint(q(2,gr-1));var Vr=rr[Ur].x-lt,la=rr[Ur].y-wt;Pe.writeVarint(ae(Vr)),Pe.writeVarint(ae(la)),lt+=Vr,wt+=la}We===3&&Pe.writeVarint(q(7,1))}}function we(Ge,Pe){var Ne=typeof Ge;Ne==="string"?Pe.writeStringField(1,Ge):Ne==="boolean"?Pe.writeBooleanField(7,Ge):Ne==="number"&&(Ge%1!=0?Pe.writeDoubleField(3,Ge):Ge<0?Pe.writeSVarintField(6,Ge):Pe.writeVarintField(5,Ge))}B.fromVectorTileJs=N,B.fromGeojsonVt=D,B.GeoJSONWrapper=O;function Te(Ge,Pe,Ne,We,lt,wt){if(!(lt-We<=Ne)){var Mt=We+lt>>1;he(Ge,Pe,Mt,We,lt,wt%2),Te(Ge,Pe,Ne,We,Mt-1,wt+1),Te(Ge,Pe,Ne,Mt+1,lt,wt+1)}}function he(Ge,Pe,Ne,We,lt,wt){for(;lt>We;){if(lt-We>600){var Mt=lt-We+1,It=Ne-We+1,rr=Math.log(Mt),sr=.5*Math.exp(2*rr/3),gr=.5*Math.sqrt(rr*sr*(Mt-sr)/Mt)*(It-Mt/2<0?-1:1),Ur=Math.max(We,Math.floor(Ne-It*sr/Mt+gr)),Vr=Math.min(lt,Math.floor(Ne+(Mt-It)*sr/Mt+gr));he(Ge,Pe,Ne,Ur,Vr,wt)}var la=Pe[2*Ne+wt],Xa=We,La=lt;for(xe(Ge,Pe,We,Ne),Pe[2*lt+wt]>la&&xe(Ge,Pe,We,lt);Xa<La;){for(xe(Ge,Pe,Xa,La),Xa++,La--;Pe[2*Xa+wt]<la;)Xa++;for(;Pe[2*La+wt]>la;)La--}Pe[2*We+wt]===la?xe(Ge,Pe,We,La):(La++,xe(Ge,Pe,La,lt)),La<=Ne&&(We=La+1),Ne<=La&&(lt=La-1)}}function xe(Ge,Pe,Ne,We){Se(Ge,Ne,We),Se(Pe,2*Ne,2*We),Se(Pe,2*Ne+1,2*We+1)}function Se(Ge,Pe,Ne){var We=Ge[Pe];Ge[Pe]=Ge[Ne],Ge[Ne]=We}function ye(Ge,Pe,Ne,We,lt,wt,Mt){for(var It=[0,Ge.length-1,0],rr=[],sr,gr;It.length;){var Ur=It.pop(),Vr=It.pop(),la=It.pop();if(Vr-la<=Mt){for(var Xa=la;Xa<=Vr;Xa++)sr=Pe[2*Xa],gr=Pe[2*Xa+1],sr>=Ne&&sr<=lt&&gr>=We&&gr<=wt&&rr.push(Ge[Xa]);continue}var La=Math.floor((la+Vr)/2);sr=Pe[2*La],gr=Pe[2*La+1],sr>=Ne&&sr<=lt&&gr>=We&&gr<=wt&&rr.push(Ge[La]);var en=(Ur+1)%2;(Ur===0?Ne<=sr:We<=gr)&&(It.push(la),It.push(La-1),It.push(en)),(Ur===0?lt>=sr:wt>=gr)&&(It.push(La+1),It.push(Vr),It.push(en))}return rr}function re(Ge,Pe,Ne,We,lt,wt){for(var Mt=[0,Ge.length-1,0],It=[],rr=lt*lt;Mt.length;){var sr=Mt.pop(),gr=Mt.pop(),Ur=Mt.pop();if(gr-Ur<=wt){for(var Vr=Ur;Vr<=gr;Vr++)se(Pe[2*Vr],Pe[2*Vr+1],Ne,We)<=rr&&It.push(Ge[Vr]);continue}var la=Math.floor((Ur+gr)/2),Xa=Pe[2*la],La=Pe[2*la+1];se(Xa,La,Ne,We)<=rr&&It.push(Ge[la]);var en=(sr+1)%2;(sr===0?Ne-lt<=Xa:We-lt<=La)&&(Mt.push(Ur),Mt.push(la-1),Mt.push(en)),(sr===0?Ne+lt>=Xa:We+lt>=La)&&(Mt.push(la+1),Mt.push(gr),Mt.push(en))}return It}function se(Ge,Pe,Ne,We){var lt=Ge-Ne,wt=Pe-We;return lt*lt+wt*wt}var de=function(Ge){return Ge[0]},Me=function(Ge){return Ge[1]},Ie=function(Pe,Ne,We,lt,wt){Ne===void 0&&(Ne=de),We===void 0&&(We=Me),lt===void 0&&(lt=64),wt===void 0&&(wt=Float64Array),this.nodeSize=lt,this.points=Pe;for(var Mt=Pe.length<65536?Uint16Array:Uint32Array,It=this.ids=new Mt(Pe.length),rr=this.coords=new wt(Pe.length*2),sr=0;sr<Pe.length;sr++)It[sr]=sr,rr[2*sr]=Ne(Pe[sr]),rr[2*sr+1]=We(Pe[sr]);Te(It,rr,lt,0,It.length-1,0)};Ie.prototype.range=function(Pe,Ne,We,lt){return ye(this.ids,this.coords,Pe,Ne,We,lt,this.nodeSize)},Ie.prototype.within=function(Pe,Ne,We){return re(this.ids,this.coords,Pe,Ne,We,this.nodeSize)};var Ee={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},qe=function(Pe){this.options=Ze(Object.create(Ee),Pe),this.trees=new Array(this.options.maxZoom+1)};qe.prototype.load=function(Pe){var Ne=this.options,We=Ne.log,lt=Ne.minZoom,wt=Ne.maxZoom,Mt=Ne.nodeSize;We&&console.time("total time");var It="prepare "+Pe.length+" points";We&&console.time(It),this.points=Pe;for(var rr=[],sr=0;sr<Pe.length;sr++)!Pe[sr].geometry||rr.push(oe(Pe[sr],sr));this.trees[wt+1]=new Ie(rr,Qe,Je,Mt,Float32Array),We&&console.timeEnd(It);for(var gr=wt;gr>=lt;gr--){var Ur=+Date.now();rr=this._cluster(rr,gr),this.trees[gr]=new Ie(rr,Qe,Je,Mt,Float32Array),We&&console.log("z%d: %d clusters in %dms",gr,rr.length,+Date.now()-Ur)}return We&&console.timeEnd("total time"),this},qe.prototype.getClusters=function(Pe,Ne){var We=((Pe[0]+180)%360+360)%360-180,lt=Math.max(-90,Math.min(90,Pe[1])),wt=Pe[2]===180?180:((Pe[2]+180)%360+360)%360-180,Mt=Math.max(-90,Math.min(90,Pe[3]));if(Pe[2]-Pe[0]>=360)We=-180,wt=180;else if(We>wt){var It=this.getClusters([We,lt,180,Mt],Ne),rr=this.getClusters([-180,lt,wt,Mt],Ne);return It.concat(rr)}for(var sr=this.trees[this._limitZoom(Ne)],gr=sr.range(Re(We),Xe(Mt),Re(wt),Xe(lt)),Ur=[],Vr=0,la=gr;Vr<la.length;Vr+=1){var Xa=la[Vr],La=sr.points[Xa];Ur.push(La.numPoints?ce(La):this.points[La.index])}return Ur},qe.prototype.getChildren=function(Pe){var Ne=this._getOriginId(Pe),We=this._getOriginZoom(Pe),lt="No cluster with the specified id.",wt=this.trees[We];if(!wt)throw new Error(lt);var Mt=wt.points[Ne];if(!Mt)throw new Error(lt);for(var It=this.options.radius/(this.options.extent*Math.pow(2,We-1)),rr=wt.within(Mt.x,Mt.y,It),sr=[],gr=0,Ur=rr;gr<Ur.length;gr+=1){var Vr=Ur[gr],la=wt.points[Vr];la.parentId===Pe&&sr.push(la.numPoints?ce(la):this.points[la.index])}if(sr.length===0)throw new Error(lt);return sr},qe.prototype.getLeaves=function(Pe,Ne,We){Ne=Ne||10,We=We||0;var lt=[];return this._appendLeaves(lt,Pe,Ne,We,0),lt},qe.prototype.getTile=function(Pe,Ne,We){var lt=this.trees[this._limitZoom(Pe)],wt=Math.pow(2,Pe),Mt=this.options,It=Mt.extent,rr=Mt.radius,sr=rr/It,gr=(We-sr)/wt,Ur=(We+1+sr)/wt,Vr={features:[]};return this._addTileFeatures(lt.range((Ne-sr)/wt,gr,(Ne+1+sr)/wt,Ur),lt.points,Ne,We,wt,Vr),Ne===0&&this._addTileFeatures(lt.range(1-sr/wt,gr,1,Ur),lt.points,wt,We,wt,Vr),Ne===wt-1&&this._addTileFeatures(lt.range(0,gr,sr/wt,Ur),lt.points,-1,We,wt,Vr),Vr.features.length?Vr:null},qe.prototype.getClusterExpansionZoom=function(Pe){for(var Ne=this._getOriginZoom(Pe)-1;Ne<=this.options.maxZoom;){var We=this.getChildren(Pe);if(Ne++,We.length!==1)break;Pe=We[0].properties.cluster_id}return Ne},qe.prototype._appendLeaves=function(Pe,Ne,We,lt,wt){for(var Mt=this.getChildren(Ne),It=0,rr=Mt;It<rr.length;It+=1){var sr=rr[It],gr=sr.properties;if(gr&&gr.cluster?wt+gr.point_count<=lt?wt+=gr.point_count:wt=this._appendLeaves(Pe,gr.cluster_id,We,lt,wt):wt<lt?wt++:Pe.push(sr),Pe.length===We)break}return wt},qe.prototype._addTileFeatures=function(Pe,Ne,We,lt,wt,Mt){for(var It=0,rr=Pe;It<rr.length;It+=1){var sr=rr[It],gr=Ne[sr],Ur=gr.numPoints,Vr={type:1,geometry:[[Math.round(this.options.extent*(gr.x*wt-We)),Math.round(this.options.extent*(gr.y*wt-lt))]],tags:Ur?ue(gr):this.points[gr.index].properties},la=void 0;Ur?la=gr.id:this.options.generateId?la=gr.index:this.points[gr.index].id&&(la=this.points[gr.index].id),la!==void 0&&(Vr.id=la),Mt.features.push(Vr)}},qe.prototype._limitZoom=function(Pe){return Math.max(this.options.minZoom,Math.min(Pe,this.options.maxZoom+1))},qe.prototype._cluster=function(Pe,Ne){for(var We=[],lt=this.options,wt=lt.radius,Mt=lt.extent,It=lt.reduce,rr=wt/(Mt*Math.pow(2,Ne)),sr=0;sr<Pe.length;sr++){var gr=Pe[sr];if(!(gr.zoom<=Ne)){gr.zoom=Ne;for(var Ur=this.trees[Ne+1],Vr=Ur.within(gr.x,gr.y,rr),la=gr.numPoints||1,Xa=gr.x*la,La=gr.y*la,en=It&&la>1?this._map(gr,!0):null,In=(sr<<5)+(Ne+1)+this.points.length,yn=0,On=Vr;yn<On.length;yn+=1){var dn=On[yn],ni=Ur.points[dn];if(!(ni.zoom<=Ne)){ni.zoom=Ne;var Oi=ni.numPoints||1;Xa+=ni.x*Oi,La+=ni.y*Oi,la+=Oi,ni.parentId=In,It&&(en||(en=this._map(gr,!0)),It(en,this._map(ni)))}}la===1?We.push(gr):(gr.parentId=In,We.push(be(Xa/la,La/la,In,la,en)))}}return We},qe.prototype._getOriginId=function(Pe){return Pe-this.points.length>>5},qe.prototype._getOriginZoom=function(Pe){return(Pe-this.points.length)%32},qe.prototype._map=function(Pe,Ne){if(Pe.numPoints)return Ne?Ze({},Pe.properties):Pe.properties;var We=this.points[Pe.index].properties,lt=this.options.map(We);return Ne&&lt===We?Ze({},lt):lt};function be(Ge,Pe,Ne,We,lt){return{x:Ge,y:Pe,zoom:1/0,id:Ne,parentId:-1,numPoints:We,properties:lt}}function oe(Ge,Pe){var Ne=Ge.geometry.coordinates,We=Ne[0],lt=Ne[1];return{x:Re(We),y:Xe(lt),zoom:1/0,index:Pe,parentId:-1}}function ce(Ge){return{type:"Feature",id:Ge.id,properties:ue(Ge),geometry:{type:"Point",coordinates:[Ke(Ge.x),vt(Ge.y)]}}}function ue(Ge){var Pe=Ge.numPoints,Ne=Pe>=1e4?Math.round(Pe/1e3)+"k":Pe>=1e3?Math.round(Pe/100)/10+"k":Pe;return Ze(Ze({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:Pe,point_count_abbreviated:Ne})}function Re(Ge){return Ge/360+.5}function Xe(Ge){var Pe=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function Ke(Ge){return(Ge-.5)*360}function vt(Ge){var Pe=(180-Ge*360)*Math.PI/180;return 360*Math.atan(Math.exp(Pe))/Math.PI-90}function Ze(Ge,Pe){for(var Ne in Pe)Ge[Ne]=Pe[Ne];return Ge}function Qe(Ge){return Ge.x}function Je(Ge){return Ge.y}function je(Ge,Pe,Ne,We){for(var lt=We,wt=Ne-Pe>>1,Mt=Ne-Pe,It,rr=Ge[Pe],sr=Ge[Pe+1],gr=Ge[Ne],Ur=Ge[Ne+1],Vr=Pe+3;Vr<Ne;Vr+=3){var la=$e(Ge[Vr],Ge[Vr+1],rr,sr,gr,Ur);if(la>lt)It=Vr,lt=la;else if(la===lt){var Xa=Math.abs(Vr-wt);Xa<Mt&&(It=Vr,Mt=Xa)}}lt>We&&(It-Pe>3&&je(Ge,Pe,It,We),Ge[It+2]=lt,Ne-It>3&&je(Ge,It,Ne,We))}function $e(Ge,Pe,Ne,We,lt,wt){var Mt=lt-Ne,It=wt-We;if(Mt!==0||It!==0){var rr=((Ge-Ne)*Mt+(Pe-We)*It)/(Mt*Mt+It*It);rr>1?(Ne=lt,We=wt):rr>0&&(Ne+=Mt*rr,We+=It*rr)}return Mt=Ge-Ne,It=Pe-We,Mt*Mt+It*It}function Ye(Ge,Pe,Ne,We){var lt={id:typeof Ge=="undefined"?null:Ge,type:Pe,geometry:Ne,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return yt(lt),lt}function yt(Ge){var Pe=Ge.geometry,Ne=Ge.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")_t(Ge,Pe);else if(Ne==="Polygon"||Ne==="MultiLineString")for(var We=0;We<Pe.length;We++)_t(Ge,Pe[We]);else if(Ne==="MultiPolygon")for(We=0;We<Pe.length;We++)for(var lt=0;lt<Pe[We].length;lt++)_t(Ge,Pe[We][lt])}function _t(Ge,Pe){for(var Ne=0;Ne<Pe.length;Ne+=3)Ge.minX=Math.min(Ge.minX,Pe[Ne]),Ge.minY=Math.min(Ge.minY,Pe[Ne+1]),Ge.maxX=Math.max(Ge.maxX,Pe[Ne]),Ge.maxY=Math.max(Ge.maxY,Pe[Ne+1])}function Pt(Ge,Pe){var Ne=[];if(Ge.type==="FeatureCollection")for(var We=0;We<Ge.features.length;We++)Tt(Ne,Ge.features[We],Pe,We);else Ge.type==="Feature"?Tt(Ne,Ge,Pe):Tt(Ne,{geometry:Ge},Pe);return Ne}function Tt(Ge,Pe,Ne,We){if(!!Pe.geometry){var lt=Pe.geometry.coordinates,wt=Pe.geometry.type,Mt=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),It=[],rr=Pe.id;if(Ne.promoteId?rr=Pe.properties[Ne.promoteId]:Ne.generateId&&(rr=We||0),wt==="Point")Ot(lt,It);else if(wt==="MultiPoint")for(var sr=0;sr<lt.length;sr++)Ot(lt[sr],It);else if(wt==="LineString")qt(lt,It,Mt,!1);else if(wt==="MultiLineString")if(Ne.lineMetrics){for(sr=0;sr<lt.length;sr++)It=[],qt(lt[sr],It,Mt,!1),Ge.push(Ye(rr,"LineString",It,Pe.properties));return}else Xt(lt,It,Mt,!1);else if(wt==="Polygon")Xt(lt,It,Mt,!0);else if(wt==="MultiPolygon")for(sr=0;sr<lt.length;sr++){var gr=[];Xt(lt[sr],gr,Mt,!0),It.push(gr)}else if(wt==="GeometryCollection"){for(sr=0;sr<Pe.geometry.geometries.length;sr++)Tt(Ge,{id:rr,geometry:Pe.geometry.geometries[sr],properties:Pe.properties},Ne,We);return}else throw new Error("Input data is not a valid GeoJSON object.");Ge.push(Ye(rr,wt,It,Pe.properties))}}function Ot(Ge,Pe){Pe.push(Or(Ge[0])),Pe.push(Br(Ge[1])),Pe.push(0)}function qt(Ge,Pe,Ne,We){for(var lt,wt,Mt=0,It=0;It<Ge.length;It++){var rr=Or(Ge[It][0]),sr=Br(Ge[It][1]);Pe.push(rr),Pe.push(sr),Pe.push(0),It>0&&(We?Mt+=(lt*sr-rr*wt)/2:Mt+=Math.sqrt(Math.pow(rr-lt,2)+Math.pow(sr-wt,2))),lt=rr,wt=sr}var gr=Pe.length-3;Pe[2]=1,je(Pe,0,gr,Ne),Pe[gr+2]=1,Pe.size=Math.abs(Mt),Pe.start=0,Pe.end=Pe.size}function Xt(Ge,Pe,Ne,We){for(var lt=0;lt<Ge.length;lt++){var wt=[];qt(Ge[lt],wt,Ne,We),Pe.push(wt)}}function Or(Ge){return Ge/360+.5}function Br(Ge){var Pe=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function Qr(Ge,Pe,Ne,We,lt,wt,Mt,It){if(Ne/=Pe,We/=Pe,wt>=Ne&&Mt<We)return Ge;if(Mt<Ne||wt>=We)return null;for(var rr=[],sr=0;sr<Ge.length;sr++){var gr=Ge[sr],Ur=gr.geometry,Vr=gr.type,la=lt===0?gr.minX:gr.minY,Xa=lt===0?gr.maxX:gr.maxY;if(la>=Ne&&Xa<We){rr.push(gr);continue}else if(Xa<Ne||la>=We)continue;var La=[];if(Vr==="Point"||Vr==="MultiPoint")Sr(Ur,La,Ne,We,lt);else if(Vr==="LineString")Zr(Ur,La,Ne,We,lt,!1,It.lineMetrics);else if(Vr==="MultiLineString")it(Ur,La,Ne,We,lt,!1);else if(Vr==="Polygon")it(Ur,La,Ne,We,lt,!0);else if(Vr==="MultiPolygon")for(var en=0;en<Ur.length;en++){var In=[];it(Ur[en],In,Ne,We,lt,!0),In.length&&La.push(In)}if(La.length){if(It.lineMetrics&&Vr==="LineString"){for(en=0;en<La.length;en++)rr.push(Ye(gr.id,Vr,La[en],gr.tags));continue}(Vr==="LineString"||Vr==="MultiLineString")&&(La.length===1?(Vr="LineString",La=La[0]):Vr="MultiLineString"),(Vr==="Point"||Vr==="MultiPoint")&&(Vr=La.length===3?"Point":"MultiPoint"),rr.push(Ye(gr.id,Vr,La,gr.tags))}}return rr.length?rr:null}function Sr(Ge,Pe,Ne,We,lt){for(var wt=0;wt<Ge.length;wt+=3){var Mt=Ge[wt+lt];Mt>=Ne&&Mt<=We&&(Pe.push(Ge[wt]),Pe.push(Ge[wt+1]),Pe.push(Ge[wt+2]))}}function Zr(Ge,Pe,Ne,We,lt,wt,Mt){for(var It=Oe(Ge),rr=lt===0?pt:Dt,sr=Ge.start,gr,Ur,Vr=0;Vr<Ge.length-3;Vr+=3){var la=Ge[Vr],Xa=Ge[Vr+1],La=Ge[Vr+2],en=Ge[Vr+3],In=Ge[Vr+4],yn=lt===0?la:Xa,On=lt===0?en:In,dn=!1;Mt&&(gr=Math.sqrt(Math.pow(la-en,2)+Math.pow(Xa-In,2))),yn<Ne?On>Ne&&(Ur=rr(It,la,Xa,en,In,Ne),Mt&&(It.start=sr+gr*Ur)):yn>We?On<We&&(Ur=rr(It,la,Xa,en,In,We),Mt&&(It.start=sr+gr*Ur)):ft(It,la,Xa,La),On<Ne&&yn>=Ne&&(Ur=rr(It,la,Xa,en,In,Ne),dn=!0),On>We&&yn<=We&&(Ur=rr(It,la,Xa,en,In,We),dn=!0),!wt&&dn&&(Mt&&(It.end=sr+gr*Ur),Pe.push(It),It=Oe(Ge)),Mt&&(sr+=gr)}var ni=Ge.length-3;la=Ge[ni],Xa=Ge[ni+1],La=Ge[ni+2],yn=lt===0?la:Xa,yn>=Ne&&yn<=We&&ft(It,la,Xa,La),ni=It.length-3,wt&&ni>=3&&(It[ni]!==It[0]||It[ni+1]!==It[1])&&ft(It,It[0],It[1],It[2]),It.length&&Pe.push(It)}function Oe(Ge){var Pe=[];return Pe.size=Ge.size,Pe.start=Ge.start,Pe.end=Ge.end,Pe}function it(Ge,Pe,Ne,We,lt,wt){for(var Mt=0;Mt<Ge.length;Mt++)Zr(Ge[Mt],Pe,Ne,We,lt,wt,!1)}function ft(Ge,Pe,Ne,We){Ge.push(Pe),Ge.push(Ne),Ge.push(We)}function pt(Ge,Pe,Ne,We,lt,wt){var Mt=(wt-Pe)/(We-Pe);return Ge.push(wt),Ge.push(Ne+(lt-Ne)*Mt),Ge.push(1),Mt}function Dt(Ge,Pe,Ne,We,lt,wt){var Mt=(wt-Ne)/(lt-Ne);return Ge.push(Pe+(We-Pe)*Mt),Ge.push(wt),Ge.push(1),Mt}function Nt(Ge,Pe){var Ne=Pe.buffer/Pe.extent,We=Ge,lt=Qr(Ge,1,-1-Ne,Ne,0,-1,2,Pe),wt=Qr(Ge,1,1-Ne,2+Ne,0,-1,2,Pe);return(lt||wt)&&(We=Qr(Ge,1,-Ne,1+Ne,0,-1,2,Pe)||[],lt&&(We=hr(lt,1).concat(We)),wt&&(We=We.concat(hr(wt,-1)))),We}function hr(Ge,Pe){for(var Ne=[],We=0;We<Ge.length;We++){var lt=Ge[We],wt=lt.type,Mt;if(wt==="Point"||wt==="MultiPoint"||wt==="LineString")Mt=fr(lt.geometry,Pe);else if(wt==="MultiLineString"||wt==="Polygon"){Mt=[];for(var It=0;It<lt.geometry.length;It++)Mt.push(fr(lt.geometry[It],Pe))}else if(wt==="MultiPolygon")for(Mt=[],It=0;It<lt.geometry.length;It++){for(var rr=[],sr=0;sr<lt.geometry[It].length;sr++)rr.push(fr(lt.geometry[It][sr],Pe));Mt.push(rr)}Ne.push(Ye(lt.id,wt,Mt,lt.tags))}return Ne}function fr(Ge,Pe){var Ne=[];Ne.size=Ge.size,Ge.start!==void 0&&(Ne.start=Ge.start,Ne.end=Ge.end);for(var We=0;We<Ge.length;We+=3)Ne.push(Ge[We]+Pe,Ge[We+1],Ge[We+2]);return Ne}function vr(Ge,Pe){if(Ge.transformed)return Ge;var Ne=1<<Ge.z,We=Ge.x,lt=Ge.y,wt,Mt,It;for(wt=0;wt<Ge.features.length;wt++){var rr=Ge.features[wt],sr=rr.geometry,gr=rr.type;if(rr.geometry=[],gr===1)for(Mt=0;Mt<sr.length;Mt+=2)rr.geometry.push(Ut(sr[Mt],sr[Mt+1],Pe,Ne,We,lt));else for(Mt=0;Mt<sr.length;Mt++){var Ur=[];for(It=0;It<sr[Mt].length;It+=2)Ur.push(Ut(sr[Mt][It],sr[Mt][It+1],Pe,Ne,We,lt));rr.geometry.push(Ur)}}return Ge.transformed=!0,Ge}function Ut(Ge,Pe,Ne,We,lt,wt){return[Math.round(Ne*(Ge*We-lt)),Math.round(Ne*(Pe*We-wt))]}function Fr(Ge,Pe,Ne,We,lt){for(var wt=Pe===lt.maxZoom?0:lt.tolerance/((1<<Pe)*lt.extent),Mt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:We,z:Pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},It=0;It<Ge.length;It++){Mt.numFeatures++,sa(Mt,Ge[It],wt,lt);var rr=Ge[It].minX,sr=Ge[It].minY,gr=Ge[It].maxX,Ur=Ge[It].maxY;rr<Mt.minX&&(Mt.minX=rr),sr<Mt.minY&&(Mt.minY=sr),gr>Mt.maxX&&(Mt.maxX=gr),Ur>Mt.maxY&&(Mt.maxY=Ur)}return Mt}function sa(Ge,Pe,Ne,We){var lt=Pe.geometry,wt=Pe.type,Mt=[];if(wt==="Point"||wt==="MultiPoint")for(var It=0;It<lt.length;It+=3)Mt.push(lt[It]),Mt.push(lt[It+1]),Ge.numPoints++,Ge.numSimplified++;else if(wt==="LineString")$r(Mt,lt,Ge,Ne,!1,!1);else if(wt==="MultiLineString"||wt==="Polygon")for(It=0;It<lt.length;It++)$r(Mt,lt[It],Ge,Ne,wt==="Polygon",It===0);else if(wt==="MultiPolygon")for(var rr=0;rr<lt.length;rr++){var sr=lt[rr];for(It=0;It<sr.length;It++)$r(Mt,sr[It],Ge,Ne,!0,It===0)}if(Mt.length){var gr=Pe.tags||null;if(wt==="LineString"&&We.lineMetrics){gr={};for(var Ur in Pe.tags)gr[Ur]=Pe.tags[Ur];gr.mapbox_clip_start=lt.start/lt.size,gr.mapbox_clip_end=lt.end/lt.size}var Vr={geometry:Mt,type:wt==="Polygon"||wt==="MultiPolygon"?3:wt==="LineString"||wt==="MultiLineString"?2:1,tags:gr};Pe.id!==null&&(Vr.id=Pe.id),Ge.features.push(Vr)}}function $r(Ge,Pe,Ne,We,lt,wt){var Mt=We*We;if(We>0&&Pe.size<(lt?Mt:We)){Ne.numPoints+=Pe.length/3;return}for(var It=[],rr=0;rr<Pe.length;rr+=3)(We===0||Pe[rr+2]>Mt)&&(Ne.numSimplified++,It.push(Pe[rr]),It.push(Pe[rr+1])),Ne.numPoints++;lt&&Ca(It,wt),Ge.push(It)}function Ca(Ge,Pe){for(var Ne=0,We=0,lt=Ge.length,wt=lt-2;We<lt;wt=We,We+=2)Ne+=(Ge[We]-Ge[wt])*(Ge[We+1]+Ge[wt+1]);if(Ne>0===Pe)for(We=0,lt=Ge.length;We<lt/2;We+=2){var Mt=Ge[We],It=Ge[We+1];Ge[We]=Ge[lt-2-We],Ge[We+1]=Ge[lt-1-We],Ge[lt-2-We]=Mt,Ge[lt-1-We]=It}}function on(Ge,Pe){return new Fa(Ge,Pe)}function Fa(Ge,Pe){Pe=this.options=Rn(Object.create(this.options),Pe);var Ne=Pe.debug;if(Ne&&console.time("preprocess data"),Pe.maxZoom<0||Pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Pe.promoteId&&Pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=Pt(Ge,Pe);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Pe.indexMaxZoom,Pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=Nt(We,Pe),We.length&&this.splitTile(We,0,0,0),Ne&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Fa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fa.prototype.splitTile=function(Ge,Pe,Ne,We,lt,wt,Mt){for(var It=[Ge,Pe,Ne,We],rr=this.options,sr=rr.debug;It.length;){We=It.pop(),Ne=It.pop(),Pe=It.pop(),Ge=It.pop();var gr=1<<Pe,Ur=jr(Pe,Ne,We),Vr=this.tiles[Ur];if(!Vr&&(sr>1&&console.time("creation"),Vr=this.tiles[Ur]=Fr(Ge,Pe,Ne,We,rr),this.tileCoords.push({z:Pe,x:Ne,y:We}),sr)){sr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Pe,Ne,We,Vr.numFeatures,Vr.numPoints,Vr.numSimplified),console.timeEnd("creation"));var la="z"+Pe;this.stats[la]=(this.stats[la]||0)+1,this.total++}if(Vr.source=Ge,lt){if(Pe===rr.maxZoom||Pe===lt)continue;var Xa=1<<lt-Pe;if(Ne!==Math.floor(wt/Xa)||We!==Math.floor(Mt/Xa))continue}else if(Pe===rr.indexMaxZoom||Vr.numPoints<=rr.indexMaxPoints)continue;if(Vr.source=null,Ge.length!==0){sr>1&&console.time("clipping");var La=.5*rr.buffer/rr.extent,en=.5-La,In=.5+La,yn=1+La,On,dn,ni,Oi,No,kn;On=dn=ni=Oi=null,No=Qr(Ge,gr,Ne-La,Ne+In,0,Vr.minX,Vr.maxX,rr),kn=Qr(Ge,gr,Ne+en,Ne+yn,0,Vr.minX,Vr.maxX,rr),Ge=null,No&&(On=Qr(No,gr,We-La,We+In,1,Vr.minY,Vr.maxY,rr),dn=Qr(No,gr,We+en,We+yn,1,Vr.minY,Vr.maxY,rr),No=null),kn&&(ni=Qr(kn,gr,We-La,We+In,1,Vr.minY,Vr.maxY,rr),Oi=Qr(kn,gr,We+en,We+yn,1,Vr.minY,Vr.maxY,rr),kn=null),sr>1&&console.timeEnd("clipping"),It.push(On||[],Pe+1,Ne*2,We*2),It.push(dn||[],Pe+1,Ne*2,We*2+1),It.push(ni||[],Pe+1,Ne*2+1,We*2),It.push(Oi||[],Pe+1,Ne*2+1,We*2+1)}}},Fa.prototype.getTile=function(Ge,Pe,Ne){var We=this.options,lt=We.extent,wt=We.debug;if(Ge<0||Ge>24)return null;var Mt=1<<Ge;Pe=(Pe%Mt+Mt)%Mt;var It=jr(Ge,Pe,Ne);if(this.tiles[It])return vr(this.tiles[It],lt);wt>1&&console.log("drilling down to z%d-%d-%d",Ge,Pe,Ne);for(var rr=Ge,sr=Pe,gr=Ne,Ur;!Ur&&rr>0;)rr--,sr=Math.floor(sr/2),gr=Math.floor(gr/2),Ur=this.tiles[jr(rr,sr,gr)];return!Ur||!Ur.source?null:(wt>1&&console.log("found parent tile z%d-%d-%d",rr,sr,gr),wt>1&&console.time("drilling down"),this.splitTile(Ur.source,rr,sr,gr,Ge,Pe,Ne),wt>1&&console.timeEnd("drilling down"),this.tiles[It]?vr(this.tiles[It],lt):null)};function jr(Ge,Pe,Ne){return((1<<Ge)*Ne+Pe)*32+Ge}function Rn(Ge,Pe){for(var Ne in Pe)Ge[Ne]=Pe[Ne];return Ge}function xa(Ge,Pe){var Ne=Ge.tileID.canonical;if(!this._geoJSONIndex)return Pe(null,null);var We=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!We)return Pe(null,null);var lt=new T(We.features),wt=B(lt);(wt.byteOffset!==0||wt.byteLength!==wt.buffer.byteLength)&&(wt=new Uint8Array(wt)),Pe(null,{vectorTile:lt,rawData:wt.buffer})}var ia=function(Ge){function Pe(Ne,We,lt,wt){Ge.call(this,Ne,We,lt,xa),wt&&(this.loadGeoJSON=wt)}return Ge&&(Pe.__proto__=Ge),Pe.prototype=Object.create(Ge&&Ge.prototype),Pe.prototype.constructor=Pe,Pe.prototype.loadData=function(We,lt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=lt,this._pendingLoadDataParams=We,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Pe.prototype._loadData=function(){var We=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var lt=this._pendingCallback,wt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Mt=wt&&wt.request&&wt.request.collectResourceTiming?new i.RequestPerformance(wt.request):!1;this.loadGeoJSON(wt,function(It,rr){if(It||!rr)return lt(It);if(typeof rr!="object")return lt(new Error("Input data given to '"+wt.source+"' is not a valid GeoJSON object."));_(rr,!0);try{We._geoJSONIndex=wt.cluster?new qe(vn(wt)).load(rr.features):on(rr,wt.geojsonVtOptions)}catch(Ur){return lt(Ur)}We.loaded={};var sr={};if(Mt){var gr=Mt.finish();gr&&(sr.resourceTiming={},sr.resourceTiming[wt.source]=JSON.parse(JSON.stringify(gr)))}lt(null,sr)})}},Pe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Pe.prototype.reloadTile=function(We,lt){var wt=this.loaded,Mt=We.uid;return wt&&wt[Mt]?Ge.prototype.reloadTile.call(this,We,lt):this.loadTile(We,lt)},Pe.prototype.loadGeoJSON=function(We,lt){if(We.request)i.getJSON(We.request,lt);else if(typeof We.data=="string")try{return lt(null,JSON.parse(We.data))}catch{return lt(new Error("Input data given to '"+We.source+"' is not a valid GeoJSON object."))}else return lt(new Error("Input data given to '"+We.source+"' is not a valid GeoJSON object."))},Pe.prototype.removeSource=function(We,lt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),lt()},Pe.prototype.getClusterExpansionZoom=function(We,lt){try{lt(null,this._geoJSONIndex.getClusterExpansionZoom(We.clusterId))}catch(wt){lt(wt)}},Pe.prototype.getClusterChildren=function(We,lt){try{lt(null,this._geoJSONIndex.getChildren(We.clusterId))}catch(wt){lt(wt)}},Pe.prototype.getClusterLeaves=function(We,lt){try{lt(null,this._geoJSONIndex.getLeaves(We.clusterId,We.limit,We.offset))}catch(wt){lt(wt)}},Pe}(g);function vn(Ge){var Pe=Ge.superclusterOptions,Ne=Ge.clusterProperties;if(!Ne||!Pe)return Pe;for(var We={},lt={},wt={accumulated:null,zoom:0},Mt={properties:null},It=Object.keys(Ne),rr=0,sr=It;rr<sr.length;rr+=1){var gr=sr[rr],Ur=Ne[gr],Vr=Ur[0],la=Ur[1],Xa=i.createExpression(la),La=i.createExpression(typeof Vr=="string"?[Vr,["accumulated"],["get",gr]]:Vr);We[gr]=Xa.value,lt[gr]=La.value}return Pe.map=function(en){Mt.properties=en;for(var In={},yn=0,On=It;yn<On.length;yn+=1){var dn=On[yn];In[dn]=We[dn].evaluate(wt,Mt)}return In},Pe.reduce=function(en,In){Mt.properties=In;for(var yn=0,On=It;yn<On.length;yn+=1){var dn=On[yn];wt.accumulated=en[dn],en[dn]=lt[dn].evaluate(wt,Mt)}},Pe}var ka=function(Pe){var Ne=this;this.self=Pe,this.actor=new i.Actor(Pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:g,geojson:ia},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(We,lt){if(Ne.workerSourceTypes[We])throw new Error('Worker source with name "'+We+'" already registered.');Ne.workerSourceTypes[We]=lt},this.self.registerRTLTextPlugin=function(We){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=We.applyArabicShaping,i.plugin.processBidirectionalText=We.processBidirectionalText,i.plugin.processStyledBidirectionalText=We.processStyledBidirectionalText}};return ka.prototype.setReferrer=function(Pe,Ne){this.referrer=Ne},ka.prototype.setImages=function(Pe,Ne,We){this.availableImages[Pe]=Ne;for(var lt in this.workerSources[Pe]){var wt=this.workerSources[Pe][lt];for(var Mt in wt)wt[Mt].availableImages=Ne}We()},ka.prototype.setLayers=function(Pe,Ne,We){this.getLayerIndex(Pe).replace(Ne),We()},ka.prototype.updateLayers=function(Pe,Ne,We){this.getLayerIndex(Pe).update(Ne.layers,Ne.removedIds),We()},ka.prototype.loadTile=function(Pe,Ne,We){this.getWorkerSource(Pe,Ne.type,Ne.source).loadTile(Ne,We)},ka.prototype.loadDEMTile=function(Pe,Ne,We){this.getDEMWorkerSource(Pe,Ne.source).loadTile(Ne,We)},ka.prototype.reloadTile=function(Pe,Ne,We){this.getWorkerSource(Pe,Ne.type,Ne.source).reloadTile(Ne,We)},ka.prototype.abortTile=function(Pe,Ne,We){this.getWorkerSource(Pe,Ne.type,Ne.source).abortTile(Ne,We)},ka.prototype.removeTile=function(Pe,Ne,We){this.getWorkerSource(Pe,Ne.type,Ne.source).removeTile(Ne,We)},ka.prototype.removeDEMTile=function(Pe,Ne){this.getDEMWorkerSource(Pe,Ne.source).removeTile(Ne)},ka.prototype.removeSource=function(Pe,Ne,We){if(!(!this.workerSources[Pe]||!this.workerSources[Pe][Ne.type]||!this.workerSources[Pe][Ne.type][Ne.source])){var lt=this.workerSources[Pe][Ne.type][Ne.source];delete this.workerSources[Pe][Ne.type][Ne.source],lt.removeSource!==void 0?lt.removeSource(Ne,We):We()}},ka.prototype.loadWorkerSource=function(Pe,Ne,We){try{this.self.importScripts(Ne.url),We()}catch(lt){We(lt.toString())}},ka.prototype.syncRTLPluginState=function(Pe,Ne,We){try{i.plugin.setState(Ne);var lt=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&lt!=null){this.self.importScripts(lt);var wt=i.plugin.isParsed(),Mt=wt?void 0:new Error("RTL Text Plugin failed to import scripts from "+lt);We(Mt,wt)}}catch(It){We(It.toString())}},ka.prototype.getAvailableImages=function(Pe){var Ne=this.availableImages[Pe];return Ne||(Ne=[]),Ne},ka.prototype.getLayerIndex=function(Pe){var Ne=this.layerIndexes[Pe];return Ne||(Ne=this.layerIndexes[Pe]=new f),Ne},ka.prototype.getWorkerSource=function(Pe,Ne,We){var lt=this;if(this.workerSources[Pe]||(this.workerSources[Pe]={}),this.workerSources[Pe][Ne]||(this.workerSources[Pe][Ne]={}),!this.workerSources[Pe][Ne][We]){var wt={send:function(Mt,It,rr){lt.actor.send(Mt,It,rr,Pe)}};this.workerSources[Pe][Ne][We]=new this.workerSourceTypes[Ne](wt,this.getLayerIndex(Pe),this.getAvailableImages(Pe))}return this.workerSources[Pe][Ne][We]},ka.prototype.getDEMWorkerSource=function(Pe,Ne){return this.demWorkerSources[Pe]||(this.demWorkerSources[Pe]={}),this.demWorkerSources[Pe][Ne]||(this.demWorkerSources[Pe][Ne]=new y),this.demWorkerSources[Pe][Ne]},ka.prototype.enforceCacheSizeLimit=function(Pe,Ne){i.enforceCacheSizeLimit(Ne)},typeof WorkerGlobalScope!="undefined"&&typeof i.window!="undefined"&&i.window instanceof WorkerGlobalScope&&(i.window.worker=new ka(i.window)),ka}),o(["./shared"],function(i){var s=i.createCommonjsModule(function(H){H.exports?H.exports=P:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=P,window.mapboxgl.notSupportedReason=V);function P(et){return!V(et)}function V(et){if(!z())return"not a browser";if(!j())return"insufficent Array support";if(!te())return"insufficient Function support";if(!le())return"insufficient Object support";if(!_e())return"insufficient JSON support";if(!ke())return"insufficient worker support";if(!Be())return"insufficient Uint8ClampedArray support";if(!rt())return"insufficient ArrayBuffer support";if(!ut())return"insufficient Canvas/getImageData support";if(!me(et&&et.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function z(){return typeof window!="undefined"&&typeof document!="undefined"}function j(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function te(){return Function.prototype&&Function.prototype.bind}function le(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function _e(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ke(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var et=new Blob([""],{type:"text/javascript"}),ht=URL.createObjectURL(et),ct,At;try{At=new Worker(ht),ct=!0}catch{ct=!1}return At&&At.terminate(),URL.revokeObjectURL(ht),ct}function Be(){return"Uint8ClampedArray"in window}function rt(){return ArrayBuffer.isView}function ut(){var et=document.createElement("canvas");et.width=et.height=1;var ht=et.getContext("2d");if(!ht)return!1;var ct=ht.getImageData(0,0,1,1);return ct&&ct.width===et.width}var gt={};function me(et){return gt[et]===void 0&&(gt[et]=He(et)),gt[et]}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Fe(et){var ht=document.createElement("canvas"),ct=Object.create(P.webGLContextAttributes);return ct.failIfMajorPerformanceCaveat=et,ht.probablySupportsContext?ht.probablySupportsContext("webgl",ct)||ht.probablySupportsContext("experimental-webgl",ct):ht.supportsContext?ht.supportsContext("webgl",ct)||ht.supportsContext("experimental-webgl",ct):ht.getContext("webgl",ct)||ht.getContext("experimental-webgl",ct)}function He(et){var ht=Fe(et);if(!ht)return!1;var ct=ht.createShader(ht.VERTEX_SHADER);return!ct||ht.isContextLost()?!1:(ht.shaderSource(ct,"void main() {}"),ht.compileShader(ct),ht.getShaderParameter(ct,ht.COMPILE_STATUS)===!0)}}),l={};l.create=function(H,P,V){var z=i.window.document.createElement(H);return P!==void 0&&(z.className=P),V&&V.appendChild(z),z},l.createNS=function(H,P){var V=i.window.document.createElementNS(H,P);return V};var u=i.window.document.documentElement.style;function f(H){if(!u)return H[0];for(var P=0;P<H.length;P++)if(H[P]in u)return H[P];return H[0]}var c=f(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),h;l.disableDrag=function(){u&&c&&(h=u[c],u[c]="none")},l.enableDrag=function(){u&&c&&(u[c]=h)};var v=f(["transform","WebkitTransform"]);l.setTransform=function(H,P){H.style[v]=P};var p=!1;try{var d=Object.defineProperty({},"passive",{get:function(){p=!0}});i.window.addEventListener("test",d,d),i.window.removeEventListener("test",d,d)}catch{p=!1}l.addEventListener=function(H,P,V,z){z===void 0&&(z={}),"passive"in z&&p?H.addEventListener(P,V,z):H.addEventListener(P,V,z.capture)},l.removeEventListener=function(H,P,V,z){z===void 0&&(z={}),"passive"in z&&p?H.removeEventListener(P,V,z):H.removeEventListener(P,V,z.capture)};var g=function(H){H.preventDefault(),H.stopPropagation(),i.window.removeEventListener("click",g,!0)};l.suppressClick=function(){i.window.addEventListener("click",g,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",g,!0)},0)},l.mousePos=function(H,P){var V=H.getBoundingClientRect();return new i.Point(P.clientX-V.left-H.clientLeft,P.clientY-V.top-H.clientTop)},l.touchPos=function(H,P){for(var V=H.getBoundingClientRect(),z=[],j=0;j<P.length;j++)z.push(new i.Point(P[j].clientX-V.left-H.clientLeft,P[j].clientY-V.top-H.clientTop));return z},l.mouseButton=function(H){return typeof i.window.InstallTrigger!="undefined"&&H.button===2&&H.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:H.button},l.remove=function(H){H.parentNode&&H.parentNode.removeChild(H)};function m(H,P,V){var z,j,te,le=i.browser.devicePixelRatio>1?"@2x":"",_e=i.getJSON(P.transformRequest(P.normalizeSpriteURL(H,le,".json"),i.ResourceType.SpriteJSON),function(rt,ut){_e=null,te||(te=rt,z=ut,Be())}),ke=i.getImage(P.transformRequest(P.normalizeSpriteURL(H,le,".png"),i.ResourceType.SpriteImage),function(rt,ut){ke=null,te||(te=rt,j=ut,Be())});function Be(){if(te)V(te);else if(z&&j){var rt=i.browser.getImageData(j),ut={};for(var gt in z){var me=z[gt],Fe=me.width,He=me.height,et=me.x,ht=me.y,ct=me.sdf,At=me.pixelRatio,Bt=me.stretchX,Yt=me.stretchY,Qt=me.content,er=new i.RGBAImage({width:Fe,height:He});i.RGBAImage.copy(rt,er,{x:et,y:ht},{x:0,y:0},{width:Fe,height:He}),ut[gt]={data:er,pixelRatio:At,sdf:ct,stretchX:Bt,stretchY:Yt,content:Qt}}V(null,ut)}}return{cancel:function(){_e&&(_e.cancel(),_e=null),ke&&(ke.cancel(),ke=null)}}}function y(H){var P=H.userImage;if(P&&P.render){var V=P.render();if(V)return H.data.replace(new Uint8Array(P.data.buffer)),!0}return!1}var _=1,S=function(H){function P(){H.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.isLoaded=function(){return this.loaded},P.prototype.setLoaded=function(z){if(this.loaded!==z&&(this.loaded=z,z)){for(var j=0,te=this.requestors;j<te.length;j+=1){var le=te[j],_e=le.ids,ke=le.callback;this._notify(_e,ke)}this.requestors=[]}},P.prototype.getImage=function(z){return this.images[z]},P.prototype.addImage=function(z,j){this._validate(z,j)&&(this.images[z]=j)},P.prototype._validate=function(z,j){var te=!0;return this._validateStretch(j.stretchX,j.data&&j.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+z+'" has invalid "stretchX" value'))),te=!1),this._validateStretch(j.stretchY,j.data&&j.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+z+'" has invalid "stretchY" value'))),te=!1),this._validateContent(j.content,j)||(this.fire(new i.ErrorEvent(new Error('Image "'+z+'" has invalid "content" value'))),te=!1),te},P.prototype._validateStretch=function(z,j){if(!z)return!0;for(var te=0,le=0,_e=z;le<_e.length;le+=1){var ke=_e[le];if(ke[0]<te||ke[1]<ke[0]||j<ke[1])return!1;te=ke[1]}return!0},P.prototype._validateContent=function(z,j){return z?!(z.length!==4||z[0]<0||j.data.width<z[0]||z[1]<0||j.data.height<z[1]||z[2]<0||j.data.width<z[2]||z[3]<0||j.data.height<z[3]||z[2]<z[0]||z[3]<z[1]):!0},P.prototype.updateImage=function(z,j){var te=this.images[z];j.version=te.version+1,this.images[z]=j,this.updatedImages[z]=!0},P.prototype.removeImage=function(z){var j=this.images[z];delete this.images[z],delete this.patterns[z],j.userImage&&j.userImage.onRemove&&j.userImage.onRemove()},P.prototype.listImages=function(){return Object.keys(this.images)},P.prototype.getImages=function(z,j){var te=!0;if(!this.isLoaded())for(var le=0,_e=z;le<_e.length;le+=1){var ke=_e[le];this.images[ke]||(te=!1)}this.isLoaded()||te?this._notify(z,j):this.requestors.push({ids:z,callback:j})},P.prototype._notify=function(z,j){for(var te={},le=0,_e=z;le<_e.length;le+=1){var ke=_e[le];this.images[ke]||this.fire(new i.Event("styleimagemissing",{id:ke}));var Be=this.images[ke];Be?te[ke]={data:Be.data.clone(),pixelRatio:Be.pixelRatio,sdf:Be.sdf,version:Be.version,stretchX:Be.stretchX,stretchY:Be.stretchY,content:Be.content,hasRenderCallback:Boolean(Be.userImage&&Be.userImage.render)}:i.warnOnce('Image "'+ke+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}j(null,te)},P.prototype.getPixelSize=function(){var z=this.atlasImage,j=z.width,te=z.height;return{width:j,height:te}},P.prototype.getPattern=function(z){var j=this.patterns[z],te=this.getImage(z);if(!te)return null;if(j&&j.position.version===te.version)return j.position;if(j)j.position.version=te.version;else{var le=te.data.width+_*2,_e=te.data.height+_*2,ke={w:le,h:_e,x:0,y:0},Be=new i.ImagePosition(ke,te);this.patterns[z]={bin:ke,position:Be}}return this._updatePatternAtlas(),this.patterns[z].position},P.prototype.bind=function(z){var j=z.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(z,this.atlasImage,j.RGBA),this.atlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE)},P.prototype._updatePatternAtlas=function(){var z=[];for(var j in this.patterns)z.push(this.patterns[j].bin);var te=i.potpack(z),le=te.w,_e=te.h,ke=this.atlasImage;ke.resize({width:le||1,height:_e||1});for(var Be in this.patterns){var rt=this.patterns[Be],ut=rt.bin,gt=ut.x+_,me=ut.y+_,Fe=this.images[Be].data,He=Fe.width,et=Fe.height;i.RGBAImage.copy(Fe,ke,{x:0,y:0},{x:gt,y:me},{width:He,height:et}),i.RGBAImage.copy(Fe,ke,{x:0,y:et-1},{x:gt,y:me-1},{width:He,height:1}),i.RGBAImage.copy(Fe,ke,{x:0,y:0},{x:gt,y:me+et},{width:He,height:1}),i.RGBAImage.copy(Fe,ke,{x:He-1,y:0},{x:gt-1,y:me},{width:1,height:et}),i.RGBAImage.copy(Fe,ke,{x:0,y:0},{x:gt+He,y:me},{width:1,height:et})}this.dirty=!0},P.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},P.prototype.dispatchRenderCallbacks=function(z){for(var j=0,te=z;j<te.length;j+=1){var le=te[j];if(!this.callbackDispatchedThisFrame[le]){this.callbackDispatchedThisFrame[le]=!0;var _e=this.images[le],ke=y(_e);ke&&this.updateImage(le,_e)}}},P}(i.Evented);function M(H,P,V,z,j){var te=P*256,le=te+255,_e=z.transformRequest(z.normalizeGlyphsURL(V).replace("{fontstack}",H).replace("{range}",te+"-"+le),i.ResourceType.Glyphs);i.getArrayBuffer(_e,function(ke,Be){if(ke)j(ke);else if(Be){for(var rt={},ut=0,gt=i.parseGlyphPBF(Be);ut<gt.length;ut+=1){var me=gt[ut];rt[me.id]=me}j(null,rt)}})}var w=T,A=T,k=1e20;function T(H,P,V,z,j,te){this.fontSize=H||24,this.buffer=P===void 0?3:P,this.cutoff=z||.25,this.fontFamily=j||"sans-serif",this.fontWeight=te||"normal",this.radius=V||8;var le=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=le,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(le*le),this.gridInner=new Float64Array(le*le),this.f=new Float64Array(le),this.d=new Float64Array(le),this.z=new Float64Array(le+1),this.v=new Int16Array(le),this.middle=Math.round(le/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}T.prototype.draw=function(H){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(H,this.buffer,this.middle);for(var P=this.ctx.getImageData(0,0,this.size,this.size),V=new Uint8ClampedArray(this.size*this.size),z=0;z<this.size*this.size;z++){var j=P.data[z*4+3]/255;this.gridOuter[z]=j===1?0:j===0?k:Math.pow(Math.max(0,.5-j),2),this.gridInner[z]=j===1?k:j===0?0:Math.pow(Math.max(0,j-.5),2)}for(L(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),L(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),z=0;z<this.size*this.size;z++){var te=this.gridOuter[z]-this.gridInner[z];V[z]=Math.max(0,Math.min(255,Math.round(255-255*(te/this.radius+this.cutoff))))}return V};function L(H,P,V,z,j,te,le){for(var _e=0;_e<P;_e++){for(var ke=0;ke<V;ke++)z[ke]=H[ke*P+_e];for(C(z,j,te,le,V),ke=0;ke<V;ke++)H[ke*P+_e]=j[ke]}for(ke=0;ke<V;ke++){for(_e=0;_e<P;_e++)z[_e]=H[ke*P+_e];for(C(z,j,te,le,P),_e=0;_e<P;_e++)H[ke*P+_e]=Math.sqrt(j[_e])}}function C(H,P,V,z,j){V[0]=0,z[0]=-k,z[1]=+k;for(var te=1,le=0;te<j;te++){for(var _e=(H[te]+te*te-(H[V[le]]+V[le]*V[le]))/(2*te-2*V[le]);_e<=z[le];)le--,_e=(H[te]+te*te-(H[V[le]]+V[le]*V[le]))/(2*te-2*V[le]);le++,V[le]=te,z[le]=_e,z[le+1]=+k}for(te=0,le=0;te<j;te++){for(;z[le+1]<te;)le++;P[te]=(te-V[le])*(te-V[le])+H[V[le]]}}w.default=A;var I=function(P,V){this.requestManager=P,this.localIdeographFontFamily=V,this.entries={}};I.prototype.setURL=function(P){this.url=P},I.prototype.getGlyphs=function(P,V){var z=this,j=[];for(var te in P)for(var le=0,_e=P[te];le<_e.length;le+=1){var ke=_e[le];j.push({stack:te,id:ke})}i.asyncAll(j,function(Be,rt){var ut=Be.stack,gt=Be.id,me=z.entries[ut];me||(me=z.entries[ut]={glyphs:{},requests:{},ranges:{}});var Fe=me.glyphs[gt];if(Fe!==void 0){rt(null,{stack:ut,id:gt,glyph:Fe});return}if(Fe=z._tinySDF(me,ut,gt),Fe){me.glyphs[gt]=Fe,rt(null,{stack:ut,id:gt,glyph:Fe});return}var He=Math.floor(gt/256);if(He*256>65535){rt(new Error("glyphs > 65535 not supported"));return}if(me.ranges[He]){rt(null,{stack:ut,id:gt,glyph:Fe});return}var et=me.requests[He];et||(et=me.requests[He]=[],I.loadGlyphRange(ut,He,z.url,z.requestManager,function(ht,ct){if(ct){for(var At in ct)z._doesCharSupportLocalGlyph(+At)||(me.glyphs[+At]=ct[+At]);me.ranges[He]=!0}for(var Bt=0,Yt=et;Bt<Yt.length;Bt+=1){var Qt=Yt[Bt];Qt(ht,ct)}delete me.requests[He]})),et.push(function(ht,ct){ht?rt(ht):ct&&rt(null,{stack:ut,id:gt,glyph:ct[gt]||null})})},function(Be,rt){if(Be)V(Be);else if(rt){for(var ut={},gt=0,me=rt;gt<me.length;gt+=1){var Fe=me[gt],He=Fe.stack,et=Fe.id,ht=Fe.glyph;(ut[He]||(ut[He]={}))[et]=ht&&{id:ht.id,bitmap:ht.bitmap.clone(),metrics:ht.metrics}}V(null,ut)}})},I.prototype._doesCharSupportLocalGlyph=function(P){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](P)||i.isChar["Hangul Syllables"](P)||i.isChar.Hiragana(P)||i.isChar.Katakana(P))},I.prototype._tinySDF=function(P,V,z){var j=this.localIdeographFontFamily;if(!!j&&!!this._doesCharSupportLocalGlyph(z)){var te=P.tinySDF;if(!te){var le="400";/bold/i.test(V)?le="900":/medium/i.test(V)?le="500":/light/i.test(V)&&(le="200"),te=P.tinySDF=new I.TinySDF(24,3,8,.25,j,le)}return{id:z,bitmap:new i.AlphaImage({width:30,height:30},te.draw(String.fromCharCode(z))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},I.loadGlyphRange=M,I.TinySDF=w;var R=function(){this.specification=i.styleSpec.light.position};R.prototype.possiblyEvaluate=function(P,V){return i.sphericalToCartesian(P.expression.evaluate(V))},R.prototype.interpolate=function(P,V,z){return{x:i.number(P.x,V.x,z),y:i.number(P.y,V.y,z),z:i.number(P.z,V.z,z)}};var B=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new R,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),N="-transition",D=function(H){function P(V){H.call(this),this._transitionable=new i.Transitionable(B),this.setLight(V),this._transitioning=this._transitionable.untransitioned()}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getLight=function(){return this._transitionable.serialize()},P.prototype.setLight=function(z,j){if(j===void 0&&(j={}),!this._validate(i.validateLight,z,j))for(var te in z){var le=z[te];i.endsWith(te,N)?this._transitionable.setTransition(te.slice(0,-N.length),le):this._transitionable.setValue(te,le)}},P.prototype.updateTransitions=function(z){this._transitioning=this._transitionable.transitioned(z,this._transitioning)},P.prototype.hasTransition=function(){return this._transitioning.hasTransition()},P.prototype.recalculate=function(z){this.properties=this._transitioning.possiblyEvaluate(z)},P.prototype._validate=function(z,j,te){return te&&te.validate===!1?!1:i.emitValidationErrors(this,z.call(i.validateStyle,i.extend({value:j,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},P}(i.Evented),O=function(P,V){this.width=P,this.height=V,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(P,V){var z=P.join(",")+String(V);return this.dashEntry[z]||(this.dashEntry[z]=this.addDash(P,V)),this.dashEntry[z]},O.prototype.getDashRanges=function(P,V,z){var j=P.length%2==1,te=[],le=j?-P[P.length-1]*z:0,_e=P[0]*z,ke=!0;te.push({left:le,right:_e,isDash:ke,zeroLength:P[0]===0});for(var Be=P[0],rt=1;rt<P.length;rt++){ke=!ke;var ut=P[rt];le=Be*z,Be+=ut,_e=Be*z,te.push({left:le,right:_e,isDash:ke,zeroLength:ut===0})}return te},O.prototype.addRoundDash=function(P,V,z){for(var j=V/2,te=-z;te<=z;te++)for(var le=this.nextRow+z+te,_e=this.width*le,ke=0,Be=P[ke],rt=0;rt<this.width;rt++){rt/Be.right>1&&(Be=P[++ke]);var ut=Math.abs(rt-Be.left),gt=Math.abs(rt-Be.right),me=Math.min(ut,gt),Fe=void 0,He=te/z*(j+1);if(Be.isDash){var et=j-Math.abs(He);Fe=Math.sqrt(me*me+et*et)}else Fe=j-Math.sqrt(me*me+He*He);this.data[_e+rt]=Math.max(0,Math.min(255,Fe+128))}},O.prototype.addRegularDash=function(P){for(var V=P.length-1;V>=0;--V){var z=P[V],j=P[V+1];z.zeroLength?P.splice(V,1):j&&j.isDash===z.isDash&&(j.left=z.left,P.splice(V,1))}var te=P[0],le=P[P.length-1];te.isDash===le.isDash&&(te.left=le.left-this.width,le.right=te.right+this.width);for(var _e=this.width*this.nextRow,ke=0,Be=P[ke],rt=0;rt<this.width;rt++){rt/Be.right>1&&(Be=P[++ke]);var ut=Math.abs(rt-Be.left),gt=Math.abs(rt-Be.right),me=Math.min(ut,gt),Fe=Be.isDash?me:-me;this.data[_e+rt]=Math.max(0,Math.min(255,Fe+128))}},O.prototype.addDash=function(P,V){var z=V?7:0,j=2*z+1;if(this.nextRow+j>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var te=0,le=0;le<P.length;le++)te+=P[le];if(te!==0){var _e=this.width/te,ke=this.getDashRanges(P,this.width,_e);V?this.addRoundDash(ke,_e,z):this.addRegularDash(ke)}var Be={y:(this.nextRow+z+.5)/this.height,height:2*z/this.height,width:te};return this.nextRow+=j,this.dirty=!0,Be},O.prototype.bind=function(P){var V=P.gl;this.texture?(V.bindTexture(V.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,V.texSubImage2D(V.TEXTURE_2D,0,0,0,this.width,this.height,V.ALPHA,V.UNSIGNED_BYTE,this.data))):(this.texture=V.createTexture(),V.bindTexture(V.TEXTURE_2D,this.texture),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.REPEAT),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.REPEAT),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR),V.texImage2D(V.TEXTURE_2D,0,V.ALPHA,this.width,this.height,0,V.ALPHA,V.UNSIGNED_BYTE,this.data))};var $=function H(P,V){this.workerPool=P,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var z=this.workerPool.acquire(this.id),j=0;j<z.length;j++){var te=z[j],le=new H.Actor(te,V,this.id);le.name="Worker "+j,this.actors.push(le)}};$.prototype.broadcast=function(P,V,z){z=z||function(){},i.asyncAll(this.actors,function(j,te){j.send(P,V,te)},z)},$.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},$.prototype.remove=function(){this.actors.forEach(function(P){P.remove()}),this.actors=[],this.workerPool.release(this.id)},$.Actor=i.Actor;function Y(H,P,V){var z=function(j,te){if(j)return V(j);if(te){var le=i.pick(i.extend(te,H),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(le.vectorLayers=te.vector_layers,le.vectorLayerIds=le.vectorLayers.map(function(_e){return _e.id})),le.tiles=P.canonicalizeTileset(le,H.url),V(null,le)}};return H.url?i.getJSON(P.transformRequest(P.normalizeSourceURL(H.url),i.ResourceType.Source),z):i.browser.frame(function(){return z(null,H)})}var X=function(P,V,z){this.bounds=i.LngLatBounds.convert(this.validateBounds(P)),this.minzoom=V||0,this.maxzoom=z||24};X.prototype.validateBounds=function(P){return!Array.isArray(P)||P.length!==4?[-180,-90,180,90]:[Math.max(-180,P[0]),Math.max(-90,P[1]),Math.min(180,P[2]),Math.min(90,P[3])]},X.prototype.contains=function(P){var V=Math.pow(2,P.z),z={minX:Math.floor(i.mercatorXfromLng(this.bounds.getWest())*V),minY:Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*V),maxX:Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*V),maxY:Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*V)},j=P.x>=z.minX&&P.x<z.maxX&&P.y>=z.minY&&P.y<z.maxY;return j};var ee=function(H){function P(V,z,j,te){if(H.call(this),this.id=V,this.dispatcher=j,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(z,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},z),this._collectResourceTiming=z.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(te)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(){var z=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Y(this._options,this.map._requestManager,function(j,te){z._tileJSONRequest=null,z._loaded=!0,j?z.fire(new i.ErrorEvent(j)):te&&(i.extend(z,te),te.bounds&&(z.tileBounds=new X(te.bounds,z.minzoom,z.maxzoom)),i.postTurnstileEvent(te.tiles,z.map._requestManager._customAccessToken),i.postMapLoadEvent(te.tiles,z.map._getMapId(),z.map._requestManager._skuToken,z.map._requestManager._customAccessToken),z.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),z.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},P.prototype.loaded=function(){return this._loaded},P.prototype.hasTile=function(z){return!this.tileBounds||this.tileBounds.contains(z.canonical)},P.prototype.onAdd=function(z){this.map=z,this.load()},P.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},P.prototype.serialize=function(){return i.extend({},this._options)},P.prototype.loadTile=function(z,j){var te=this.map._requestManager.normalizeTileURL(z.tileID.canonical.url(this.tiles,this.scheme)),le={request:this.map._requestManager.transformRequest(te,i.ResourceType.Tile),uid:z.uid,tileID:z.tileID,zoom:z.tileID.overscaledZ,tileSize:this.tileSize*z.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};le.request.collectResourceTiming=this._collectResourceTiming,!z.actor||z.state==="expired"?(z.actor=this.dispatcher.getActor(),z.request=z.actor.send("loadTile",le,_e.bind(this))):z.state==="loading"?z.reloadCallback=j:z.request=z.actor.send("reloadTile",le,_e.bind(this));function _e(ke,Be){if(delete z.request,z.aborted)return j(null);if(ke&&ke.status!==404)return j(ke);Be&&Be.resourceTiming&&(z.resourceTiming=Be.resourceTiming),this.map._refreshExpiredTiles&&Be&&z.setExpiryData(Be),z.loadVectorData(Be,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),j(null),z.reloadCallback&&(this.loadTile(z,z.reloadCallback),z.reloadCallback=null)}},P.prototype.abortTile=function(z){z.request&&(z.request.cancel(),delete z.request),z.actor&&z.actor.send("abortTile",{uid:z.uid,type:this.type,source:this.id},void 0)},P.prototype.unloadTile=function(z){z.unloadVectorData(),z.actor&&z.actor.send("removeTile",{uid:z.uid,type:this.type,source:this.id},void 0)},P.prototype.hasTransition=function(){return!1},P}(i.Evented),Q=function(H){function P(V,z,j,te){H.call(this),this.id=V,this.dispatcher=j,this.setEventedParent(te),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},z),i.extend(this,i.pick(z,["url","scheme","tileSize"]))}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(){var z=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Y(this._options,this.map._requestManager,function(j,te){z._tileJSONRequest=null,z._loaded=!0,j?z.fire(new i.ErrorEvent(j)):te&&(i.extend(z,te),te.bounds&&(z.tileBounds=new X(te.bounds,z.minzoom,z.maxzoom)),i.postTurnstileEvent(te.tiles),i.postMapLoadEvent(te.tiles,z.map._getMapId(),z.map._requestManager._skuToken),z.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),z.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},P.prototype.loaded=function(){return this._loaded},P.prototype.onAdd=function(z){this.map=z,this.load()},P.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},P.prototype.serialize=function(){return i.extend({},this._options)},P.prototype.hasTile=function(z){return!this.tileBounds||this.tileBounds.contains(z.canonical)},P.prototype.loadTile=function(z,j){var te=this,le=this.map._requestManager.normalizeTileURL(z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);z.request=i.getImage(this.map._requestManager.transformRequest(le,i.ResourceType.Tile),function(_e,ke){if(delete z.request,z.aborted)z.state="unloaded",j(null);else if(_e)z.state="errored",j(_e);else if(ke){te.map._refreshExpiredTiles&&z.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Be=te.map.painter.context,rt=Be.gl;z.texture=te.map.painter.getTileTexture(ke.width),z.texture?z.texture.update(ke,{useMipmap:!0}):(z.texture=new i.Texture(Be,ke,rt.RGBA,{useMipmap:!0}),z.texture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE,rt.LINEAR_MIPMAP_NEAREST),Be.extTextureFilterAnisotropic&&rt.texParameterf(rt.TEXTURE_2D,Be.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Be.extTextureFilterAnisotropicMax)),z.state="loaded",i.cacheEntryPossiblyAdded(te.dispatcher),j(null)}})},P.prototype.abortTile=function(z,j){z.request&&(z.request.cancel(),delete z.request),j()},P.prototype.unloadTile=function(z,j){z.texture&&this.map.painter.saveTileTexture(z.texture),j()},P.prototype.hasTransition=function(){return!1},P}(i.Evented),Z=function(H){function P(V,z,j,te){H.call(this,V,z,j,te),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},z),this.encoding=z.encoding||"mapbox"}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},P.prototype.loadTile=function(z,j){var te=this.map._requestManager.normalizeTileURL(z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);z.request=i.getImage(this.map._requestManager.transformRequest(te,i.ResourceType.Tile),le.bind(this)),z.neighboringTiles=this._getNeighboringTiles(z.tileID);function le(ke,Be){if(delete z.request,z.aborted)z.state="unloaded",j(null);else if(ke)z.state="errored",j(ke);else if(Be){this.map._refreshExpiredTiles&&z.setExpiryData(Be),delete Be.cacheControl,delete Be.expires;var rt=i.window.ImageBitmap&&Be instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported(),ut=rt?Be:i.browser.getImageData(Be,1),gt={uid:z.uid,coord:z.tileID,source:this.id,rawImageData:ut,encoding:this.encoding};(!z.actor||z.state==="expired")&&(z.actor=this.dispatcher.getActor(),z.actor.send("loadDEMTile",gt,_e.bind(this)))}}function _e(ke,Be){ke&&(z.state="errored",j(ke)),Be&&(z.dem=Be,z.needsHillshadePrepare=!0,z.state="loaded",j(null))}},P.prototype._getNeighboringTiles=function(z){var j=z.canonical,te=Math.pow(2,j.z),le=(j.x-1+te)%te,_e=j.x===0?z.wrap-1:z.wrap,ke=(j.x+1+te)%te,Be=j.x+1===te?z.wrap+1:z.wrap,rt={};return rt[new i.OverscaledTileID(z.overscaledZ,_e,j.z,le,j.y).key]={backfilled:!1},rt[new i.OverscaledTileID(z.overscaledZ,Be,j.z,ke,j.y).key]={backfilled:!1},j.y>0&&(rt[new i.OverscaledTileID(z.overscaledZ,_e,j.z,le,j.y-1).key]={backfilled:!1},rt[new i.OverscaledTileID(z.overscaledZ,z.wrap,j.z,j.x,j.y-1).key]={backfilled:!1},rt[new i.OverscaledTileID(z.overscaledZ,Be,j.z,ke,j.y-1).key]={backfilled:!1}),j.y+1<te&&(rt[new i.OverscaledTileID(z.overscaledZ,_e,j.z,le,j.y+1).key]={backfilled:!1},rt[new i.OverscaledTileID(z.overscaledZ,z.wrap,j.z,j.x,j.y+1).key]={backfilled:!1},rt[new i.OverscaledTileID(z.overscaledZ,Be,j.z,ke,j.y+1).key]={backfilled:!1}),rt},P.prototype.unloadTile=function(z){z.demTexture&&this.map.painter.saveTileTexture(z.demTexture),z.fbo&&(z.fbo.destroy(),delete z.fbo),z.dem&&delete z.dem,delete z.neighboringTiles,z.state="unloaded",z.actor&&z.actor.send("removeDEMTile",{uid:z.uid,source:this.id})},P}(Q),q=function(H){function P(V,z,j,te){H.call(this),this.id=V,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=j.getActor(),this.setEventedParent(te),this._data=z.data,this._options=i.extend({},z),this._collectResourceTiming=z.collectResourceTiming,this._resourceTiming=[],z.maxzoom!==void 0&&(this.maxzoom=z.maxzoom),z.type&&(this.type=z.type),z.attribution&&(this.attribution=z.attribution),this.promoteId=z.promoteId;var le=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:z.cluster||!1,geojsonVtOptions:{buffer:(z.buffer!==void 0?z.buffer:128)*le,tolerance:(z.tolerance!==void 0?z.tolerance:.375)*le,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:z.lineMetrics||!1,generateId:z.generateId||!1},superclusterOptions:{maxZoom:z.clusterMaxZoom!==void 0?Math.min(z.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:i.EXTENT,radius:(z.clusterRadius||50)*le,log:!1,generateId:z.generateId||!1},clusterProperties:z.clusterProperties},z.workerOptions)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(){var z=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(j){if(j){z.fire(new i.ErrorEvent(j));return}var te={dataType:"source",sourceDataType:"metadata"};z._collectResourceTiming&&z._resourceTiming&&z._resourceTiming.length>0&&(te.resourceTiming=z._resourceTiming,z._resourceTiming=[]),z.fire(new i.Event("data",te))})},P.prototype.onAdd=function(z){this.map=z,this.load()},P.prototype.setData=function(z){var j=this;return this._data=z,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te){j.fire(new i.ErrorEvent(te));return}var le={dataType:"source",sourceDataType:"content"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(le.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new i.Event("data",le))}),this},P.prototype.getClusterExpansionZoom=function(z,j){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:z,source:this.id},j),this},P.prototype.getClusterChildren=function(z,j){return this.actor.send("geojson.getClusterChildren",{clusterId:z,source:this.id},j),this},P.prototype.getClusterLeaves=function(z,j,te,le){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:z,limit:j,offset:te},le),this},P.prototype._updateWorkerData=function(z){var j=this;this._loaded=!1;var te=i.extend({},this.workerOptions),le=this._data;typeof le=="string"?(te.request=this.map._requestManager.transformRequest(i.browser.resolveURL(le),i.ResourceType.Source),te.request.collectResourceTiming=this._collectResourceTiming):te.data=JSON.stringify(le),this.actor.send(this.type+".loadData",te,function(_e,ke){j._removed||ke&&ke.abandoned||(j._loaded=!0,ke&&ke.resourceTiming&&ke.resourceTiming[j.id]&&(j._resourceTiming=ke.resourceTiming[j.id].slice(0)),j.actor.send(j.type+".coalesce",{source:te.source},null),z(_e))})},P.prototype.loaded=function(){return this._loaded},P.prototype.loadTile=function(z,j){var te=this,le=z.actor?"reloadTile":"loadTile";z.actor=this.actor;var _e={type:this.type,uid:z.uid,tileID:z.tileID,zoom:z.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};z.request=this.actor.send(le,_e,function(ke,Be){return delete z.request,z.unloadVectorData(),z.aborted?j(null):ke?j(ke):(z.loadVectorData(Be,te.map.painter,le==="reloadTile"),j(null))})},P.prototype.abortTile=function(z){z.request&&(z.request.cancel(),delete z.request),z.aborted=!0},P.prototype.unloadTile=function(z){z.unloadVectorData(),this.actor.send("removeTile",{uid:z.uid,type:this.type,source:this.id})},P.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},P.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},P.prototype.hasTransition=function(){return!1},P}(i.Evented),ae=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ie=function(H){function P(V,z,j,te){H.call(this),this.id=V,this.dispatcher=j,this.coordinates=z.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(te),this.options=z}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(z,j){var te=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(le,_e){te._loaded=!0,le?te.fire(new i.ErrorEvent(le)):_e&&(te.image=_e,z&&(te.coordinates=z),j&&j(),te._finishLoading())})},P.prototype.loaded=function(){return this._loaded},P.prototype.updateImage=function(z){var j=this;return!this.image||!z.url?this:(this.options.url=z.url,this.load(z.coordinates,function(){j.texture=null}),this)},P.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},P.prototype.onAdd=function(z){this.map=z,this.load()},P.prototype.setCoordinates=function(z){var j=this;this.coordinates=z;var te=z.map(i.MercatorCoordinate.fromLngLat);this.tileID=we(te),this.minzoom=this.maxzoom=this.tileID.z;var le=te.map(function(_e){return j.tileID.getTilePoint(_e)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(le[0].x,le[0].y,0,0),this._boundsArray.emplaceBack(le[1].x,le[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(le[3].x,le[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(le[2].x,le[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},P.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var z=this.map.painter.context,j=z.gl;this.boundsBuffer||(this.boundsBuffer=z.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(z,this.image,j.RGBA),this.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE));for(var te in this.tiles){var le=this.tiles[te];le.state!=="loaded"&&(le.state="loaded",le.texture=this.texture)}}},P.prototype.loadTile=function(z,j){this.tileID&&this.tileID.equals(z.tileID.canonical)?(this.tiles[String(z.tileID.wrap)]=z,z.buckets={},j(null)):(z.state="errored",j(null))},P.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},P.prototype.hasTransition=function(){return!1},P}(i.Evented);function we(H){for(var P=1/0,V=1/0,z=-1/0,j=-1/0,te=0,le=H;te<le.length;te+=1){var _e=le[te];P=Math.min(P,_e.x),V=Math.min(V,_e.y),z=Math.max(z,_e.x),j=Math.max(j,_e.y)}var ke=z-P,Be=j-V,rt=Math.max(ke,Be),ut=Math.max(0,Math.floor(-Math.log(rt)/Math.LN2)),gt=Math.pow(2,ut);return new i.CanonicalTileID(ut,Math.floor((P+z)/2*gt),Math.floor((V+j)/2*gt))}var Te=function(H){function P(V,z,j,te){H.call(this,V,z,j,te),this.roundZoom=!0,this.type="video",this.options=z}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(){var z=this;this._loaded=!1;var j=this.options;this.urls=[];for(var te=0,le=j.urls;te<le.length;te+=1){var _e=le[te];this.urls.push(this.map._requestManager.transformRequest(_e,i.ResourceType.Source).url)}i.getVideo(this.urls,function(ke,Be){z._loaded=!0,ke?z.fire(new i.ErrorEvent(ke)):Be&&(z.video=Be,z.video.loop=!0,z.video.addEventListener("playing",function(){z.map.triggerRepaint()}),z.map&&z.video.play(),z._finishLoading())})},P.prototype.pause=function(){this.video&&this.video.pause()},P.prototype.play=function(){this.video&&this.video.play()},P.prototype.seek=function(z){if(this.video){var j=this.video.seekable;z<j.start(0)||z>j.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+j.start(0)+" and "+j.end(0)+"-second mark."))):this.video.currentTime=z}},P.prototype.getVideo=function(){return this.video},P.prototype.onAdd=function(z){this.map||(this.map=z,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},P.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var z=this.map.painter.context,j=z.gl;this.boundsBuffer||(this.boundsBuffer=z.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE),j.texSubImage2D(j.TEXTURE_2D,0,0,0,j.RGBA,j.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(z,this.video,j.RGBA),this.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE));for(var te in this.tiles){var le=this.tiles[te];le.state!=="loaded"&&(le.state="loaded",le.texture=this.texture)}}},P.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},P.prototype.hasTransition=function(){return this.video&&!this.video.paused},P}(ie),he=function(H){function P(V,z,j,te){H.call(this,V,z,j,te),z.coordinates?(!Array.isArray(z.coordinates)||z.coordinates.length!==4||z.coordinates.some(function(le){return!Array.isArray(le)||le.length!==2||le.some(function(_e){return typeof _e!="number"})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+V,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+V,null,'missing required property "coordinates"'))),z.animate&&typeof z.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+V,null,'optional "animate" property must be a boolean value'))),z.canvas?typeof z.canvas!="string"&&!(z.canvas instanceof i.window.HTMLCanvasElement)&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+V,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+V,null,'missing required property "canvas"'))),this.options=z,this.animate=z.animate!==void 0?z.animate:!0}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},P.prototype.getCanvas=function(){return this.canvas},P.prototype.onAdd=function(z){this.map=z,this.load(),this.canvas&&this.animate&&this.play()},P.prototype.onRemove=function(){this.pause()},P.prototype.prepare=function(){var z=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,z=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,z=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var j=this.map.painter.context,te=j.gl;this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(z||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(j,this.canvas,te.RGBA,{premultiply:!0});for(var le in this.tiles){var _e=this.tiles[le];_e.state!=="loaded"&&(_e.state="loaded",_e.texture=this.texture)}}},P.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},P.prototype.hasTransition=function(){return this._playing},P.prototype._hasInvalidDimensions=function(){for(var z=0,j=[this.canvas.width,this.canvas.height];z<j.length;z+=1){var te=j[z];if(isNaN(te)||te<=0)return!0}return!1},P}(ie),xe={vector:ee,raster:Q,"raster-dem":Z,geojson:q,video:Te,image:ie,canvas:he},Se=function(H,P,V,z){var j=new xe[P.type](H,P,V,z);if(j.id!==H)throw new Error("Expected Source id to be "+H+" instead of "+j.id);return i.bindAll(["load","abort","unload","serialize","prepare"],j),j},ye=function(H){return xe[H]},re=function(H,P){xe[H]=P};function se(H,P){var V=i.identity([]);return i.translate(V,V,[1,1,0]),i.scale(V,V,[H.width*.5,H.height*.5,1]),i.multiply(V,V,H.calculatePosMatrix(P.toUnwrapped()))}function de(H,P,V){if(H)for(var z=0,j=H;z<j.length;z+=1){var te=j[z],le=P[te];if(le&&le.source===V&&le.type==="fill-extrusion")return!0}else for(var _e in P){var ke=P[_e];if(ke.source===V&&ke.type==="fill-extrusion")return!0}return!1}function Me(H,P,V,z,j,te){var le=de(j&&j.layers,P,H.id),_e=te.maxPitchScaleFactor(),ke=H.tilesIn(z,_e,le);ke.sort(qe);for(var Be=[],rt=0,ut=ke;rt<ut.length;rt+=1){var gt=ut[rt];Be.push({wrappedTileID:gt.tileID.wrapped().key,queryResults:gt.tile.queryRenderedFeatures(P,V,H._state,gt.queryGeometry,gt.cameraQueryGeometry,gt.scale,j,te,_e,se(H.transform,gt.tileID))})}var me=be(Be);for(var Fe in me)me[Fe].forEach(function(He){var et=He.feature,ht=H.getFeatureState(et.layer["source-layer"],et.id);et.source=et.layer.source,et.layer["source-layer"]&&(et.sourceLayer=et.layer["source-layer"]),et.state=ht});return me}function Ie(H,P,V,z,j,te,le){for(var _e={},ke=te.queryRenderedSymbols(z),Be=[],rt=0,ut=Object.keys(ke).map(Number);rt<ut.length;rt+=1){var gt=ut[rt];Be.push(le[gt])}Be.sort(qe);for(var me=function(){var ct=He[Fe],At=ct.featureIndex.lookupSymbolFeatures(ke[ct.bucketInstanceId],P,ct.bucketIndex,ct.sourceLayerIndex,j.filter,j.layers,j.availableImages,H);for(var Bt in At){var Yt=_e[Bt]=_e[Bt]||[],Qt=At[Bt];Qt.sort(function(or,dr){var Rt=ct.featureSortOrder;if(Rt){var tr=Rt.indexOf(or.featureIndex),Lr=Rt.indexOf(dr.featureIndex);return Lr-tr}else return dr.featureIndex-or.featureIndex});for(var er=0,ir=Qt;er<ir.length;er+=1){var mr=ir[er];Yt.push(mr)}}},Fe=0,He=Be;Fe<He.length;Fe+=1)me();var et=function(ct){_e[ct].forEach(function(At){var Bt=At.feature,Yt=H[ct],Qt=V[Yt.source],er=Qt.getFeatureState(Bt.layer["source-layer"],Bt.id);Bt.source=Bt.layer.source,Bt.layer["source-layer"]&&(Bt.sourceLayer=Bt.layer["source-layer"]),Bt.state=er})};for(var ht in _e)et(ht);return _e}function Ee(H,P){for(var V=H.getRenderableIds().map(function(ke){return H.getTileByID(ke)}),z=[],j={},te=0;te<V.length;te++){var le=V[te],_e=le.tileID.canonical.key;j[_e]||(j[_e]=!0,le.querySourceFeatures(z,P))}return z}function qe(H,P){var V=H.tileID,z=P.tileID;return V.overscaledZ-z.overscaledZ||V.canonical.y-z.canonical.y||V.wrap-z.wrap||V.canonical.x-z.canonical.x}function be(H){for(var P={},V={},z=0,j=H;z<j.length;z+=1){var te=j[z],le=te.queryResults,_e=te.wrappedTileID,ke=V[_e]=V[_e]||{};for(var Be in le)for(var rt=le[Be],ut=ke[Be]=ke[Be]||{},gt=P[Be]=P[Be]||[],me=0,Fe=rt;me<Fe.length;me+=1){var He=Fe[me];ut[He.featureIndex]||(ut[He.featureIndex]=!0,gt.push(He))}}return P}var oe=function(P,V){this.max=P,this.onRemove=V,this.reset()};oe.prototype.reset=function(){for(var P in this.data)for(var V=0,z=this.data[P];V<z.length;V+=1){var j=z[V];j.timeout&&clearTimeout(j.timeout),this.onRemove(j.value)}return this.data={},this.order=[],this},oe.prototype.add=function(P,V,z){var j=this,te=P.wrapped().key;this.data[te]===void 0&&(this.data[te]=[]);var le={value:V,timeout:void 0};if(z!==void 0&&(le.timeout=setTimeout(function(){j.remove(P,le)},z)),this.data[te].push(le),this.order.push(te),this.order.length>this.max){var _e=this._getAndRemoveByKey(this.order[0]);_e&&this.onRemove(_e)}return this},oe.prototype.has=function(P){return P.wrapped().key in this.data},oe.prototype.getAndRemove=function(P){return this.has(P)?this._getAndRemoveByKey(P.wrapped().key):null},oe.prototype._getAndRemoveByKey=function(P){var V=this.data[P].shift();return V.timeout&&clearTimeout(V.timeout),this.data[P].length===0&&delete this.data[P],this.order.splice(this.order.indexOf(P),1),V.value},oe.prototype.getByKey=function(P){var V=this.data[P];return V?V[0].value:null},oe.prototype.get=function(P){if(!this.has(P))return null;var V=this.data[P.wrapped().key][0];return V.value},oe.prototype.remove=function(P,V){if(!this.has(P))return this;var z=P.wrapped().key,j=V===void 0?0:this.data[z].indexOf(V),te=this.data[z][j];return this.data[z].splice(j,1),te.timeout&&clearTimeout(te.timeout),this.data[z].length===0&&delete this.data[z],this.onRemove(te.value),this.order.splice(this.order.indexOf(z),1),this},oe.prototype.setMaxSize=function(P){for(this.max=P;this.order.length>this.max;){var V=this._getAndRemoveByKey(this.order[0]);V&&this.onRemove(V)}return this},oe.prototype.filter=function(P){var V=[];for(var z in this.data)for(var j=0,te=this.data[z];j<te.length;j+=1){var le=te[j];P(le.value)||V.push(le)}for(var _e=0,ke=V;_e<ke.length;_e+=1){var Be=ke[_e];this.remove(Be.value.tileID,Be)}};var ce=function(P,V,z){this.context=P;var j=P.gl;this.buffer=j.createBuffer(),this.dynamicDraw=Boolean(z),this.context.unbindVAO(),P.bindElementBuffer.set(this.buffer),j.bufferData(j.ELEMENT_ARRAY_BUFFER,V.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete V.arrayBuffer};ce.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ce.prototype.updateData=function(P){var V=this.context.gl;this.context.unbindVAO(),this.bind(),V.bufferSubData(V.ELEMENT_ARRAY_BUFFER,0,P.arrayBuffer)},ce.prototype.destroy=function(){var P=this.context.gl;this.buffer&&(P.deleteBuffer(this.buffer),delete this.buffer)};var ue={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Re=function(P,V,z,j){this.length=V.length,this.attributes=z,this.itemSize=V.bytesPerElement,this.dynamicDraw=j,this.context=P;var te=P.gl;this.buffer=te.createBuffer(),P.bindVertexBuffer.set(this.buffer),te.bufferData(te.ARRAY_BUFFER,V.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete V.arrayBuffer};Re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Re.prototype.updateData=function(P){var V=this.context.gl;this.bind(),V.bufferSubData(V.ARRAY_BUFFER,0,P.arrayBuffer)},Re.prototype.enableAttributes=function(P,V){for(var z=0;z<this.attributes.length;z++){var j=this.attributes[z],te=V.attributes[j.name];te!==void 0&&P.enableVertexAttribArray(te)}},Re.prototype.setVertexAttribPointers=function(P,V,z){for(var j=0;j<this.attributes.length;j++){var te=this.attributes[j],le=V.attributes[te.name];le!==void 0&&P.vertexAttribPointer(le,te.components,P[ue[te.type]],!1,this.itemSize,te.offset+this.itemSize*(z||0))}},Re.prototype.destroy=function(){var P=this.context.gl;this.buffer&&(P.deleteBuffer(this.buffer),delete this.buffer)};var Xe=function(P){this.gl=P.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Xe.prototype.get=function(){return this.current},Xe.prototype.set=function(P){},Xe.prototype.getDefault=function(){return this.default},Xe.prototype.setDefault=function(){this.set(this.default)};var Ke=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return i.Color.transparent},P.prototype.set=function(z){var j=this.current;z.r===j.r&&z.g===j.g&&z.b===j.b&&z.a===j.a&&!this.dirty||(this.gl.clearColor(z.r,z.g,z.b,z.a),this.current=z,this.dirty=!1)},P}(Xe),vt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return 1},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.clearDepth(z),this.current=z,this.dirty=!1)},P}(Xe),Ze=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return 0},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.clearStencil(z),this.current=z,this.dirty=!1)},P}(Xe),Qe=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return[!0,!0,!0,!0]},P.prototype.set=function(z){var j=this.current;z[0]===j[0]&&z[1]===j[1]&&z[2]===j[2]&&z[3]===j[3]&&!this.dirty||(this.gl.colorMask(z[0],z[1],z[2],z[3]),this.current=z,this.dirty=!1)},P}(Xe),Je=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!0},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.depthMask(z),this.current=z,this.dirty=!1)},P}(Xe),je=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return 255},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.stencilMask(z),this.current=z,this.dirty=!1)},P}(Xe),$e=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},P.prototype.set=function(z){var j=this.current;z.func===j.func&&z.ref===j.ref&&z.mask===j.mask&&!this.dirty||(this.gl.stencilFunc(z.func,z.ref,z.mask),this.current=z,this.dirty=!1)},P}(Xe),Ye=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){var z=this.gl;return[z.KEEP,z.KEEP,z.KEEP]},P.prototype.set=function(z){var j=this.current;z[0]===j[0]&&z[1]===j[1]&&z[2]===j[2]&&!this.dirty||(this.gl.stencilOp(z[0],z[1],z[2]),this.current=z,this.dirty=!1)},P}(Xe),yt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;z?j.enable(j.STENCIL_TEST):j.disable(j.STENCIL_TEST),this.current=z,this.dirty=!1}},P}(Xe),_t=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return[0,1]},P.prototype.set=function(z){var j=this.current;z[0]===j[0]&&z[1]===j[1]&&!this.dirty||(this.gl.depthRange(z[0],z[1]),this.current=z,this.dirty=!1)},P}(Xe),Pt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;z?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST),this.current=z,this.dirty=!1}},P}(Xe),Tt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return this.gl.LESS},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.depthFunc(z),this.current=z,this.dirty=!1)},P}(Xe),Ot=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;z?j.enable(j.BLEND):j.disable(j.BLEND),this.current=z,this.dirty=!1}},P}(Xe),qt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){var z=this.gl;return[z.ONE,z.ZERO]},P.prototype.set=function(z){var j=this.current;z[0]===j[0]&&z[1]===j[1]&&!this.dirty||(this.gl.blendFunc(z[0],z[1]),this.current=z,this.dirty=!1)},P}(Xe),Xt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return i.Color.transparent},P.prototype.set=function(z){var j=this.current;z.r===j.r&&z.g===j.g&&z.b===j.b&&z.a===j.a&&!this.dirty||(this.gl.blendColor(z.r,z.g,z.b,z.a),this.current=z,this.dirty=!1)},P}(Xe),Or=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return this.gl.FUNC_ADD},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.blendEquation(z),this.current=z,this.dirty=!1)},P}(Xe),Br=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;z?j.enable(j.CULL_FACE):j.disable(j.CULL_FACE),this.current=z,this.dirty=!1}},P}(Xe),Qr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return this.gl.BACK},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.cullFace(z),this.current=z,this.dirty=!1)},P}(Xe),Sr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return this.gl.CCW},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.frontFace(z),this.current=z,this.dirty=!1)},P}(Xe),Zr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.useProgram(z),this.current=z,this.dirty=!1)},P}(Xe),Oe=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return this.gl.TEXTURE0},P.prototype.set=function(z){z===this.current&&!this.dirty||(this.gl.activeTexture(z),this.current=z,this.dirty=!1)},P}(Xe),it=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){var z=this.gl;return[0,0,z.drawingBufferWidth,z.drawingBufferHeight]},P.prototype.set=function(z){var j=this.current;z[0]===j[0]&&z[1]===j[1]&&z[2]===j[2]&&z[3]===j[3]&&!this.dirty||(this.gl.viewport(z[0],z[1],z[2],z[3]),this.current=z,this.dirty=!1)},P}(Xe),ft=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.bindFramebuffer(j.FRAMEBUFFER,z),this.current=z,this.dirty=!1}},P}(Xe),pt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.bindRenderbuffer(j.RENDERBUFFER,z),this.current=z,this.dirty=!1}},P}(Xe),Dt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.bindTexture(j.TEXTURE_2D,z),this.current=z,this.dirty=!1}},P}(Xe),Nt=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.bindBuffer(j.ARRAY_BUFFER,z),this.current=z,this.dirty=!1}},P}(Xe),hr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){var j=this.gl;j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,z),this.current=z,this.dirty=!1},P}(Xe),fr=function(H){function P(V){H.call(this,V),this.vao=V.extVertexArrayObject}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(z){!this.vao||z===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(z),this.current=z,this.dirty=!1)},P}(Xe),vr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return 4},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.pixelStorei(j.UNPACK_ALIGNMENT,z),this.current=z,this.dirty=!1}},P}(Xe),Ut=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z),this.current=z,this.dirty=!1}},P}(Xe),Fr=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){var j=this.gl;j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,z),this.current=z,this.dirty=!1}},P}(Xe),sa=function(H){function P(V,z){H.call(this,V),this.context=V,this.parent=z}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getDefault=function(){return null},P}(Xe),$r=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.setDirty=function(){this.dirty=!0},P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var j=this.gl;j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,z,0),this.current=z,this.dirty=!1}},P}(sa),Ca=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.set=function(z){if(!(z===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var j=this.gl;j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,z),this.current=z,this.dirty=!1}},P}(sa),on=function(P,V,z,j){this.context=P,this.width=V,this.height=z;var te=P.gl,le=this.framebuffer=te.createFramebuffer();this.colorAttachment=new $r(P,le),j&&(this.depthAttachment=new Ca(P,le))};on.prototype.destroy=function(){var P=this.context.gl,V=this.colorAttachment.get();if(V&&P.deleteTexture(V),this.depthAttachment){var z=this.depthAttachment.get();z&&P.deleteRenderbuffer(z)}P.deleteFramebuffer(this.framebuffer)};var Fa=519,jr=function(P,V,z){this.func=P,this.mask=V,this.range=z};jr.ReadOnly=!1,jr.ReadWrite=!0,jr.disabled=new jr(Fa,jr.ReadOnly,[0,1]);var Rn=519,xa=7680,ia=function(P,V,z,j,te,le){this.test=P,this.ref=V,this.mask=z,this.fail=j,this.depthFail=te,this.pass=le};ia.disabled=new ia({func:Rn,mask:0},0,0,xa,xa,xa);var vn=0,ka=1,Ge=771,Pe=function(P,V,z){this.blendFunction=P,this.blendColor=V,this.mask=z};Pe.Replace=[ka,vn],Pe.disabled=new Pe(Pe.Replace,i.Color.transparent,[!1,!1,!1,!1]),Pe.unblended=new Pe(Pe.Replace,i.Color.transparent,[!0,!0,!0,!0]),Pe.alphaBlended=new Pe([ka,Ge],i.Color.transparent,[!0,!0,!0,!0]);var Ne=1029,We=2305,lt=function(P,V,z){this.enable=P,this.mode=V,this.frontFace=z};lt.disabled=new lt(!1,Ne,We),lt.backCCW=new lt(!0,Ne,We);var wt=function(P){this.gl=P,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ke(this),this.clearDepth=new vt(this),this.clearStencil=new Ze(this),this.colorMask=new Qe(this),this.depthMask=new Je(this),this.stencilMask=new je(this),this.stencilFunc=new $e(this),this.stencilOp=new Ye(this),this.stencilTest=new yt(this),this.depthRange=new _t(this),this.depthTest=new Pt(this),this.depthFunc=new Tt(this),this.blend=new Ot(this),this.blendFunc=new qt(this),this.blendColor=new Xt(this),this.blendEquation=new Or(this),this.cullFace=new Br(this),this.cullFaceSide=new Qr(this),this.frontFace=new Sr(this),this.program=new Zr(this),this.activeTexture=new Oe(this),this.viewport=new it(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new Dt(this),this.bindVertexBuffer=new Nt(this),this.bindElementBuffer=new hr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new fr(this),this.pixelStoreUnpack=new vr(this),this.pixelStoreUnpackPremultiplyAlpha=new Ut(this),this.pixelStoreUnpackFlipY=new Fr(this),this.extTextureFilterAnisotropic=P.getExtension("EXT_texture_filter_anisotropic")||P.getExtension("MOZ_EXT_texture_filter_anisotropic")||P.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=P.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=P.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(P.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=P.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=P.getExtension("EXT_disjoint_timer_query")};wt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},wt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},wt.prototype.createIndexBuffer=function(P,V){return new ce(this,P,V)},wt.prototype.createVertexBuffer=function(P,V,z){return new Re(this,P,V,z)},wt.prototype.createRenderbuffer=function(P,V,z){var j=this.gl,te=j.createRenderbuffer();return this.bindRenderbuffer.set(te),j.renderbufferStorage(j.RENDERBUFFER,P,V,z),this.bindRenderbuffer.set(null),te},wt.prototype.createFramebuffer=function(P,V,z){return new on(this,P,V,z)},wt.prototype.clear=function(P){var V=P.color,z=P.depth,j=this.gl,te=0;V&&(te|=j.COLOR_BUFFER_BIT,this.clearColor.set(V),this.colorMask.set([!0,!0,!0,!0])),typeof z!="undefined"&&(te|=j.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(z),this.depthMask.set(!0)),j.clear(te)},wt.prototype.setCullFace=function(P){P.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(P.mode),this.frontFace.set(P.frontFace))},wt.prototype.setDepthMode=function(P){P.func===this.gl.ALWAYS&&!P.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(P.func),this.depthMask.set(P.mask),this.depthRange.set(P.range))},wt.prototype.setStencilMode=function(P){P.test.func===this.gl.ALWAYS&&!P.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(P.mask),this.stencilOp.set([P.fail,P.depthFail,P.pass]),this.stencilFunc.set({func:P.test.func,ref:P.ref,mask:P.test.mask}))},wt.prototype.setColorMode=function(P){i.deepEqual(P.blendFunction,Pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(P.blendFunction),this.blendColor.set(P.blendColor)),this.colorMask.set(P.mask)},wt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Mt=function(H){function P(V,z,j){var te=this;H.call(this),this.id=V,this.dispatcher=j,this.on("data",function(le){le.dataType==="source"&&le.sourceDataType==="metadata"&&(te._sourceLoaded=!0),te._sourceLoaded&&!te._paused&&le.dataType==="source"&&le.sourceDataType==="content"&&(te.reload(),te.transform&&te.update(te.transform))}),this.on("error",function(){te._sourceErrored=!0}),this._source=Se(V,z,j,this),this._tiles={},this._cache=new oe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.onAdd=function(z){this.map=z,this._maxTileCacheSize=z?z._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(z)},P.prototype.onRemove=function(z){this._source&&this._source.onRemove&&this._source.onRemove(z)},P.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var z in this._tiles){var j=this._tiles[z];if(j.state!=="loaded"&&j.state!=="errored")return!1}return!0},P.prototype.getSource=function(){return this._source},P.prototype.pause=function(){this._paused=!0},P.prototype.resume=function(){if(!!this._paused){var z=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,z&&this.reload(),this.transform&&this.update(this.transform)}},P.prototype._loadTile=function(z,j){return this._source.loadTile(z,j)},P.prototype._unloadTile=function(z){if(this._source.unloadTile)return this._source.unloadTile(z,function(){})},P.prototype._abortTile=function(z){if(this._source.abortTile)return this._source.abortTile(z,function(){})},P.prototype.serialize=function(){return this._source.serialize()},P.prototype.prepare=function(z){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var j in this._tiles){var te=this._tiles[j];te.upload(z),te.prepare(this.map.style.imageManager)}},P.prototype.getIds=function(){return i.values(this._tiles).map(function(z){return z.tileID}).sort(It).map(function(z){return z.key})},P.prototype.getRenderableIds=function(z){var j=this,te=[];for(var le in this._tiles)this._isIdRenderable(le,z)&&te.push(this._tiles[le]);return z?te.sort(function(_e,ke){var Be=_e.tileID,rt=ke.tileID,ut=new i.Point(Be.canonical.x,Be.canonical.y)._rotate(j.transform.angle),gt=new i.Point(rt.canonical.x,rt.canonical.y)._rotate(j.transform.angle);return Be.overscaledZ-rt.overscaledZ||gt.y-ut.y||gt.x-ut.x}).map(function(_e){return _e.tileID.key}):te.map(function(_e){return _e.tileID}).sort(It).map(function(_e){return _e.key})},P.prototype.hasRenderableParent=function(z){var j=this.findLoadedParent(z,0);return j?this._isIdRenderable(j.tileID.key):!1},P.prototype._isIdRenderable=function(z,j){return this._tiles[z]&&this._tiles[z].hasData()&&!this._coveredTiles[z]&&(j||!this._tiles[z].holdingForFade())},P.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var z in this._tiles)this._tiles[z].state!=="errored"&&this._reloadTile(z,"reloading")},P.prototype._reloadTile=function(z,j){var te=this._tiles[z];!te||(te.state!=="loading"&&(te.state=j),this._loadTile(te,this._tileLoaded.bind(this,te,z,j)))},P.prototype._tileLoaded=function(z,j,te,le){if(le){z.state="errored",le.status!==404?this._source.fire(new i.ErrorEvent(le,{tile:z})):this.update(this.transform);return}z.timeAdded=i.browser.now(),te==="expired"&&(z.refreshedUponExpiration=!0),this._setTileReloadTimer(j,z),this.getSource().type==="raster-dem"&&z.dem&&this._backfillDEM(z),this._state.initializeTileState(z,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:z,coord:z.tileID}))},P.prototype._backfillDEM=function(z){for(var j=this.getRenderableIds(),te=0;te<j.length;te++){var le=j[te];if(z.neighboringTiles&&z.neighboringTiles[le]){var _e=this.getTileByID(le);ke(z,_e),ke(_e,z)}}function ke(Be,rt){Be.needsHillshadePrepare=!0;var ut=rt.tileID.canonical.x-Be.tileID.canonical.x,gt=rt.tileID.canonical.y-Be.tileID.canonical.y,me=Math.pow(2,Be.tileID.canonical.z),Fe=rt.tileID.key;ut===0&&gt===0||Math.abs(gt)>1||(Math.abs(ut)>1&&(Math.abs(ut+me)===1?ut+=me:Math.abs(ut-me)===1&&(ut-=me)),!(!rt.dem||!Be.dem)&&(Be.dem.backfillBorder(rt.dem,ut,gt),Be.neighboringTiles&&Be.neighboringTiles[Fe]&&(Be.neighboringTiles[Fe].backfilled=!0)))}},P.prototype.getTile=function(z){return this.getTileByID(z.key)},P.prototype.getTileByID=function(z){return this._tiles[z]},P.prototype._retainLoadedChildren=function(z,j,te,le){for(var _e in this._tiles){var ke=this._tiles[_e];if(!(le[_e]||!ke.hasData()||ke.tileID.overscaledZ<=j||ke.tileID.overscaledZ>te)){for(var Be=ke.tileID;ke&&ke.tileID.overscaledZ>j+1;){var rt=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);ke=this._tiles[rt.key],ke&&ke.hasData()&&(Be=rt)}for(var ut=Be;ut.overscaledZ>j;)if(ut=ut.scaledTo(ut.overscaledZ-1),z[ut.key]){le[Be.key]=Be;break}}}},P.prototype.findLoadedParent=function(z,j){if(z.key in this._loadedParentTiles){var te=this._loadedParentTiles[z.key];return te&&te.tileID.overscaledZ>=j?te:null}for(var le=z.overscaledZ-1;le>=j;le--){var _e=z.scaledTo(le),ke=this._getLoadedTile(_e);if(ke)return ke}},P.prototype._getLoadedTile=function(z){var j=this._tiles[z.key];if(j&&j.hasData())return j;var te=this._cache.getByKey(z.wrapped().key);return te},P.prototype.updateCacheSize=function(z){var j=Math.ceil(z.width/this._source.tileSize)+1,te=Math.ceil(z.height/this._source.tileSize)+1,le=j*te,_e=5,ke=Math.floor(le*_e),Be=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ke):ke;this._cache.setMaxSize(Be)},P.prototype.handleWrapJump=function(z){var j=this._prevLng===void 0?z:this._prevLng,te=z-j,le=te/360,_e=Math.round(le);if(this._prevLng=z,_e){var ke={};for(var Be in this._tiles){var rt=this._tiles[Be];rt.tileID=rt.tileID.unwrapTo(rt.tileID.wrap+_e),ke[rt.tileID.key]=rt}this._tiles=ke;for(var ut in this._timers)clearTimeout(this._timers[ut]),delete this._timers[ut];for(var gt in this._tiles){var me=this._tiles[gt];this._setTileReloadTimer(gt,me)}}},P.prototype.update=function(z){var j=this;if(this.transform=z,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(z),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var te;this.used?this._source.tileID?te=z.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(or){return new i.OverscaledTileID(or.canonical.z,or.wrap,or.canonical.z,or.canonical.x,or.canonical.y)}):(te=z.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(te=te.filter(function(or){return j._source.hasTile(or)}))):te=[];var le=z.coveringZoomLevel(this._source),_e=Math.max(le-P.maxOverzooming,this._source.minzoom),ke=Math.max(le+P.maxUnderzooming,this._source.minzoom),Be=this._updateRetainedTiles(te,le);if(rr(this._source.type)){for(var rt={},ut={},gt=Object.keys(Be),me=0,Fe=gt;me<Fe.length;me+=1){var He=Fe[me],et=Be[He],ht=this._tiles[He];if(!(!ht||ht.fadeEndTime&&ht.fadeEndTime<=i.browser.now())){var ct=this.findLoadedParent(et,_e);ct&&(this._addTile(ct.tileID),rt[ct.tileID.key]=ct.tileID),ut[He]=et}}this._retainLoadedChildren(ut,le,ke,Be);for(var At in rt)Be[At]||(this._coveredTiles[At]=!0,Be[At]=rt[At])}for(var Bt in Be)this._tiles[Bt].clearFadeHold();for(var Yt=i.keysDifference(this._tiles,Be),Qt=0,er=Yt;Qt<er.length;Qt+=1){var ir=er[Qt],mr=this._tiles[ir];mr.hasSymbolBuckets&&!mr.holdingForFade()?mr.setHoldDuration(this.map._fadeDuration):(!mr.hasSymbolBuckets||mr.symbolFadeFinished())&&this._removeTile(ir)}this._updateLoadedParentTileCache()}},P.prototype.releaseSymbolFadeTiles=function(){for(var z in this._tiles)this._tiles[z].holdingForFade()&&this._removeTile(z)},P.prototype._updateRetainedTiles=function(z,j){for(var te={},le={},_e=Math.max(j-P.maxOverzooming,this._source.minzoom),ke=Math.max(j+P.maxUnderzooming,this._source.minzoom),Be={},rt=0,ut=z;rt<ut.length;rt+=1){var gt=ut[rt],me=this._addTile(gt);te[gt.key]=gt,!me.hasData()&&j<this._source.maxzoom&&(Be[gt.key]=gt)}this._retainLoadedChildren(Be,j,ke,te);for(var Fe=0,He=z;Fe<He.length;Fe+=1){var et=He[Fe],ht=this._tiles[et.key];if(!ht.hasData()){if(j+1>this._source.maxzoom){var ct=et.children(this._source.maxzoom)[0],At=this.getTile(ct);if(!!At&&At.hasData()){te[ct.key]=ct;continue}}else{var Bt=et.children(this._source.maxzoom);if(te[Bt[0].key]&&te[Bt[1].key]&&te[Bt[2].key]&&te[Bt[3].key])continue}for(var Yt=ht.wasRequested(),Qt=et.overscaledZ-1;Qt>=_e;--Qt){var er=et.scaledTo(Qt);if(le[er.key]||(le[er.key]=!0,ht=this.getTile(er),!ht&&Yt&&(ht=this._addTile(er)),ht&&(te[er.key]=er,Yt=ht.wasRequested(),ht.hasData())))break}}}return te},P.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var z in this._tiles){for(var j=[],te=void 0,le=this._tiles[z].tileID;le.overscaledZ>0;){if(le.key in this._loadedParentTiles){te=this._loadedParentTiles[le.key];break}j.push(le.key);var _e=le.scaledTo(le.overscaledZ-1);if(te=this._getLoadedTile(_e),te)break;le=_e}for(var ke=0,Be=j;ke<Be.length;ke+=1){var rt=Be[ke];this._loadedParentTiles[rt]=te}}},P.prototype._addTile=function(z){var j=this._tiles[z.key];if(j)return j;j=this._cache.getAndRemove(z),j&&(this._setTileReloadTimer(z.key,j),j.tileID=z,this._state.initializeTileState(j,this.map?this.map.painter:null),this._cacheTimers[z.key]&&(clearTimeout(this._cacheTimers[z.key]),delete this._cacheTimers[z.key],this._setTileReloadTimer(z.key,j)));var te=Boolean(j);return te||(j=new i.Tile(z,this._source.tileSize*z.overscaleFactor()),this._loadTile(j,this._tileLoaded.bind(this,j,z.key,j.state))),j?(j.uses++,this._tiles[z.key]=j,te||this._source.fire(new i.Event("dataloading",{tile:j,coord:j.tileID,dataType:"source"})),j):null},P.prototype._setTileReloadTimer=function(z,j){var te=this;z in this._timers&&(clearTimeout(this._timers[z]),delete this._timers[z]);var le=j.getExpiryTimeout();le&&(this._timers[z]=setTimeout(function(){te._reloadTile(z,"expired"),delete te._timers[z]},le))},P.prototype._removeTile=function(z){var j=this._tiles[z];!j||(j.uses--,delete this._tiles[z],this._timers[z]&&(clearTimeout(this._timers[z]),delete this._timers[z]),!(j.uses>0)&&(j.hasData()&&j.state!=="reloading"?this._cache.add(j.tileID,j,j.getExpiryTimeout()):(j.aborted=!0,this._abortTile(j),this._unloadTile(j))))},P.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var z in this._tiles)this._removeTile(z);this._cache.reset()},P.prototype.tilesIn=function(z,j,te){var le=this,_e=[],ke=this.transform;if(!ke)return _e;for(var Be=te?ke.getCameraQueryGeometry(z):z,rt=z.map(function(Qt){return ke.pointCoordinate(Qt)}),ut=Be.map(function(Qt){return ke.pointCoordinate(Qt)}),gt=this.getIds(),me=1/0,Fe=1/0,He=-1/0,et=-1/0,ht=0,ct=ut;ht<ct.length;ht+=1){var At=ct[ht];me=Math.min(me,At.x),Fe=Math.min(Fe,At.y),He=Math.max(He,At.x),et=Math.max(et,At.y)}for(var Bt=function(Qt){var er=le._tiles[gt[Qt]];if(!er.holdingForFade()){var ir=er.tileID,mr=Math.pow(2,ke.zoom-er.tileID.overscaledZ),or=j*er.queryPadding*i.EXTENT/er.tileSize/mr,dr=[ir.getTilePoint(new i.MercatorCoordinate(me,Fe)),ir.getTilePoint(new i.MercatorCoordinate(He,et))];if(dr[0].x-or<i.EXTENT&&dr[0].y-or<i.EXTENT&&dr[1].x+or>=0&&dr[1].y+or>=0){var Rt=rt.map(function(Lr){return ir.getTilePoint(Lr)}),tr=ut.map(function(Lr){return ir.getTilePoint(Lr)});_e.push({tile:er,tileID:ir,queryGeometry:Rt,cameraQueryGeometry:tr,scale:mr})}}},Yt=0;Yt<gt.length;Yt++)Bt(Yt);return _e},P.prototype.getVisibleCoordinates=function(z){for(var j=this,te=this.getRenderableIds(z).map(function(Be){return j._tiles[Be].tileID}),le=0,_e=te;le<_e.length;le+=1){var ke=_e[le];ke.posMatrix=this.transform.calculatePosMatrix(ke.toUnwrapped())}return te},P.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(rr(this._source.type))for(var z in this._tiles){var j=this._tiles[z];if(j.fadeEndTime!==void 0&&j.fadeEndTime>=i.browser.now())return!0}return!1},P.prototype.setFeatureState=function(z,j,te){z=z||"_geojsonTileLayer",this._state.updateState(z,j,te)},P.prototype.removeFeatureState=function(z,j,te){z=z||"_geojsonTileLayer",this._state.removeFeatureState(z,j,te)},P.prototype.getFeatureState=function(z,j){return z=z||"_geojsonTileLayer",this._state.getState(z,j)},P.prototype.setDependencies=function(z,j,te){var le=this._tiles[z];le&&le.setDependencies(j,te)},P.prototype.reloadTilesForDependencies=function(z,j){for(var te in this._tiles){var le=this._tiles[te];le.hasDependency(z,j)&&this._reloadTile(te,"reloading")}this._cache.filter(function(_e){return!_e.hasDependency(z,j)})},P}(i.Evented);Mt.maxOverzooming=10,Mt.maxUnderzooming=3;function It(H,P){var V=Math.abs(H.wrap*2)-+(H.wrap<0),z=Math.abs(P.wrap*2)-+(P.wrap<0);return H.overscaledZ-P.overscaledZ||z-V||P.canonical.y-H.canonical.y||P.canonical.x-H.canonical.x}function rr(H){return H==="raster"||H==="image"||H==="video"}function sr(){return new i.window.Worker(Gb.workerUrl)}var gr="mapboxgl_preloaded_worker_pool",Ur=function(){this.active={}};Ur.prototype.acquire=function(P){if(!this.workers)for(this.workers=[];this.workers.length<Ur.workerCount;)this.workers.push(new sr);return this.active[P]=!0,this.workers.slice()},Ur.prototype.release=function(P){delete this.active[P],this.numActive()===0&&(this.workers.forEach(function(V){V.terminate()}),this.workers=null)},Ur.prototype.isPreloaded=function(){return!!this.active[gr]},Ur.prototype.numActive=function(){return Object.keys(this.active).length};var Vr=Math.floor(i.browser.hardwareConcurrency/2);Ur.workerCount=Math.max(Math.min(Vr,6),1);var la;function Xa(){return la||(la=new Ur),la}function La(){var H=Xa();H.acquire(gr)}function en(){var H=la;H&&(H.isPreloaded()&&H.numActive()===1?(H.release(gr),la=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function In(H,P){var V={};for(var z in H)z!=="ref"&&(V[z]=H[z]);return i.refProperties.forEach(function(j){j in P&&(V[j]=P[j])}),V}function yn(H){H=H.slice();for(var P=Object.create(null),V=0;V<H.length;V++)P[H[V].id]=H[V];for(var z=0;z<H.length;z++)"ref"in H[z]&&(H[z]=In(H[z],P[H[z].ref]));return H}function On(){var H={},P=i.styleSpec.$version;for(var V in i.styleSpec.$root){var z=i.styleSpec.$root[V];if(z.required){var j=null;V==="version"?j=P:z.type==="array"?j=[]:j={},j!=null&&(H[V]=j)}}return H}var dn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ni(H,P,V){V.push({command:dn.addSource,args:[H,P[H]]})}function Oi(H,P,V){P.push({command:dn.removeSource,args:[H]}),V[H]=!0}function No(H,P,V,z){Oi(H,V,z),ni(H,P,V)}function kn(H,P,V){var z;for(z in H[V])if(!!H[V].hasOwnProperty(z)&&z!=="data"&&!i.deepEqual(H[V][z],P[V][z]))return!1;for(z in P[V])if(!!P[V].hasOwnProperty(z)&&z!=="data"&&!i.deepEqual(H[V][z],P[V][z]))return!1;return!0}function ds(H,P,V,z){H=H||{},P=P||{};var j;for(j in H)!H.hasOwnProperty(j)||P.hasOwnProperty(j)||Oi(j,V,z);for(j in P)!P.hasOwnProperty(j)||(H.hasOwnProperty(j)?i.deepEqual(H[j],P[j])||(H[j].type==="geojson"&&P[j].type==="geojson"&&kn(H,P,j)?V.push({command:dn.setGeoJSONSourceData,args:[j,P[j].data]}):No(j,P,V,z)):ni(j,P,V))}function Kn(H,P,V,z,j,te){H=H||{},P=P||{};var le;for(le in H)!H.hasOwnProperty(le)||i.deepEqual(H[le],P[le])||V.push({command:te,args:[z,le,P[le],j]});for(le in P)!P.hasOwnProperty(le)||H.hasOwnProperty(le)||i.deepEqual(H[le],P[le])||V.push({command:te,args:[z,le,P[le],j]})}function _o(H){return H.id}function yl(H,P){return H[P.id]=P,H}function xl(H,P,V){H=H||[],P=P||[];var z=H.map(_o),j=P.map(_o),te=H.reduce(yl,{}),le=P.reduce(yl,{}),_e=z.slice(),ke=Object.create(null),Be,rt,ut,gt,me,Fe,He;for(Be=0,rt=0;Be<z.length;Be++)ut=z[Be],le.hasOwnProperty(ut)?rt++:(V.push({command:dn.removeLayer,args:[ut]}),_e.splice(_e.indexOf(ut,rt),1));for(Be=0,rt=0;Be<j.length;Be++)ut=j[j.length-1-Be],_e[_e.length-1-Be]!==ut&&(te.hasOwnProperty(ut)?(V.push({command:dn.removeLayer,args:[ut]}),_e.splice(_e.lastIndexOf(ut,_e.length-rt),1)):rt++,Fe=_e[_e.length-Be],V.push({command:dn.addLayer,args:[le[ut],Fe]}),_e.splice(_e.length-Be,0,ut),ke[ut]=!0);for(Be=0;Be<j.length;Be++)if(ut=j[Be],gt=te[ut],me=le[ut],!(ke[ut]||i.deepEqual(gt,me))){if(!i.deepEqual(gt.source,me.source)||!i.deepEqual(gt["source-layer"],me["source-layer"])||!i.deepEqual(gt.type,me.type)){V.push({command:dn.removeLayer,args:[ut]}),Fe=_e[_e.lastIndexOf(ut)+1],V.push({command:dn.addLayer,args:[me,Fe]});continue}Kn(gt.layout,me.layout,V,ut,null,dn.setLayoutProperty),Kn(gt.paint,me.paint,V,ut,null,dn.setPaintProperty),i.deepEqual(gt.filter,me.filter)||V.push({command:dn.setFilter,args:[ut,me.filter]}),(!i.deepEqual(gt.minzoom,me.minzoom)||!i.deepEqual(gt.maxzoom,me.maxzoom))&&V.push({command:dn.setLayerZoomRange,args:[ut,me.minzoom,me.maxzoom]});for(He in gt)!gt.hasOwnProperty(He)||He==="layout"||He==="paint"||He==="filter"||He==="metadata"||He==="minzoom"||He==="maxzoom"||(He.indexOf("paint.")===0?Kn(gt[He],me[He],V,ut,He.slice(6),dn.setPaintProperty):i.deepEqual(gt[He],me[He])||V.push({command:dn.setLayerProperty,args:[ut,He,me[He]]}));for(He in me)!me.hasOwnProperty(He)||gt.hasOwnProperty(He)||He==="layout"||He==="paint"||He==="filter"||He==="metadata"||He==="minzoom"||He==="maxzoom"||(He.indexOf("paint.")===0?Kn(gt[He],me[He],V,ut,He.slice(6),dn.setPaintProperty):i.deepEqual(gt[He],me[He])||V.push({command:dn.setLayerProperty,args:[ut,He,me[He]]}))}}function Hi(H,P){if(!H)return[{command:dn.setStyle,args:[P]}];var V=[];try{if(!i.deepEqual(H.version,P.version))return[{command:dn.setStyle,args:[P]}];i.deepEqual(H.center,P.center)||V.push({command:dn.setCenter,args:[P.center]}),i.deepEqual(H.zoom,P.zoom)||V.push({command:dn.setZoom,args:[P.zoom]}),i.deepEqual(H.bearing,P.bearing)||V.push({command:dn.setBearing,args:[P.bearing]}),i.deepEqual(H.pitch,P.pitch)||V.push({command:dn.setPitch,args:[P.pitch]}),i.deepEqual(H.sprite,P.sprite)||V.push({command:dn.setSprite,args:[P.sprite]}),i.deepEqual(H.glyphs,P.glyphs)||V.push({command:dn.setGlyphs,args:[P.glyphs]}),i.deepEqual(H.transition,P.transition)||V.push({command:dn.setTransition,args:[P.transition]}),i.deepEqual(H.light,P.light)||V.push({command:dn.setLight,args:[P.light]});var z={},j=[];ds(H.sources,P.sources,j,z);var te=[];H.layers&&H.layers.forEach(function(le){z[le.source]?V.push({command:dn.removeLayer,args:[le.id]}):te.push(le)}),V=V.concat(j),xl(te,P.layers,V)}catch(le){console.warn("Unable to compute style diff:",le),V=[{command:dn.setStyle,args:[P]}]}return V}var zi=function(P,V){this.reset(P,V)};zi.prototype.reset=function(P,V){this.points=P||[],this._distances=[0];for(var z=1;z<this.points.length;z++)this._distances[z]=this._distances[z-1]+this.points[z].dist(this.points[z-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(V||0,this.length*.5),this.paddedLength=this.length-this.padding*2},zi.prototype.lerp=function(P){if(this.points.length===1)return this.points[0];P=i.clamp(P,0,1);for(var V=1,z=this._distances[V],j=P*this.paddedLength+this.padding;z<j&&V<this._distances.length;)z=this._distances[++V];var te=V-1,le=this._distances[te],_e=z-le,ke=_e>0?(j-le)/_e:0;return this.points[te].mult(1-ke).add(this.points[V].mult(ke))};var Vn=function(P,V,z){var j=this.boxCells=[],te=this.circleCells=[];this.xCellCount=Math.ceil(P/z),this.yCellCount=Math.ceil(V/z);for(var le=0;le<this.xCellCount*this.yCellCount;le++)j.push([]),te.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=P,this.height=V,this.xScale=this.xCellCount/P,this.yScale=this.yCellCount/V,this.boxUid=0,this.circleUid=0};Vn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Vn.prototype.insert=function(P,V,z,j,te){this._forEachCell(V,z,j,te,this._insertBoxCell,this.boxUid++),this.boxKeys.push(P),this.bboxes.push(V),this.bboxes.push(z),this.bboxes.push(j),this.bboxes.push(te)},Vn.prototype.insertCircle=function(P,V,z,j){this._forEachCell(V-j,z-j,V+j,z+j,this._insertCircleCell,this.circleUid++),this.circleKeys.push(P),this.circles.push(V),this.circles.push(z),this.circles.push(j)},Vn.prototype._insertBoxCell=function(P,V,z,j,te,le){this.boxCells[te].push(le)},Vn.prototype._insertCircleCell=function(P,V,z,j,te,le){this.circleCells[te].push(le)},Vn.prototype._query=function(P,V,z,j,te,le){if(z<0||P>this.width||j<0||V>this.height)return te?!1:[];var _e=[];if(P<=0&&V<=0&&this.width<=z&&this.height<=j){if(te)return!0;for(var ke=0;ke<this.boxKeys.length;ke++)_e.push({key:this.boxKeys[ke],x1:this.bboxes[ke*4],y1:this.bboxes[ke*4+1],x2:this.bboxes[ke*4+2],y2:this.bboxes[ke*4+3]});for(var Be=0;Be<this.circleKeys.length;Be++){var rt=this.circles[Be*3],ut=this.circles[Be*3+1],gt=this.circles[Be*3+2];_e.push({key:this.circleKeys[Be],x1:rt-gt,y1:ut-gt,x2:rt+gt,y2:ut+gt})}return le?_e.filter(le):_e}else{var me={hitTest:te,seenUids:{box:{},circle:{}}};return this._forEachCell(P,V,z,j,this._queryCell,_e,me,le),te?_e.length>0:_e}},Vn.prototype._queryCircle=function(P,V,z,j,te){var le=P-z,_e=P+z,ke=V-z,Be=V+z;if(_e<0||le>this.width||Be<0||ke>this.height)return j?!1:[];var rt=[],ut={hitTest:j,circle:{x:P,y:V,radius:z},seenUids:{box:{},circle:{}}};return this._forEachCell(le,ke,_e,Be,this._queryCellCircle,rt,ut,te),j?rt.length>0:rt},Vn.prototype.query=function(P,V,z,j,te){return this._query(P,V,z,j,!1,te)},Vn.prototype.hitTest=function(P,V,z,j,te){return this._query(P,V,z,j,!0,te)},Vn.prototype.hitTestCircle=function(P,V,z,j){return this._queryCircle(P,V,z,!0,j)},Vn.prototype._queryCell=function(P,V,z,j,te,le,_e,ke){var Be=_e.seenUids,rt=this.boxCells[te];if(rt!==null)for(var ut=this.bboxes,gt=0,me=rt;gt<me.length;gt+=1){var Fe=me[gt];if(!Be.box[Fe]){Be.box[Fe]=!0;var He=Fe*4;if(P<=ut[He+2]&&V<=ut[He+3]&&z>=ut[He+0]&&j>=ut[He+1]&&(!ke||ke(this.boxKeys[Fe]))){if(_e.hitTest)return le.push(!0),!0;le.push({key:this.boxKeys[Fe],x1:ut[He],y1:ut[He+1],x2:ut[He+2],y2:ut[He+3]})}}}var et=this.circleCells[te];if(et!==null)for(var ht=this.circles,ct=0,At=et;ct<At.length;ct+=1){var Bt=At[ct];if(!Be.circle[Bt]){Be.circle[Bt]=!0;var Yt=Bt*3;if(this._circleAndRectCollide(ht[Yt],ht[Yt+1],ht[Yt+2],P,V,z,j)&&(!ke||ke(this.circleKeys[Bt]))){if(_e.hitTest)return le.push(!0),!0;var Qt=ht[Yt],er=ht[Yt+1],ir=ht[Yt+2];le.push({key:this.circleKeys[Bt],x1:Qt-ir,y1:er-ir,x2:Qt+ir,y2:er+ir})}}}},Vn.prototype._queryCellCircle=function(P,V,z,j,te,le,_e,ke){var Be=_e.circle,rt=_e.seenUids,ut=this.boxCells[te];if(ut!==null)for(var gt=this.bboxes,me=0,Fe=ut;me<Fe.length;me+=1){var He=Fe[me];if(!rt.box[He]){rt.box[He]=!0;var et=He*4;if(this._circleAndRectCollide(Be.x,Be.y,Be.radius,gt[et+0],gt[et+1],gt[et+2],gt[et+3])&&(!ke||ke(this.boxKeys[He])))return le.push(!0),!0}}var ht=this.circleCells[te];if(ht!==null)for(var ct=this.circles,At=0,Bt=ht;At<Bt.length;At+=1){var Yt=Bt[At];if(!rt.circle[Yt]){rt.circle[Yt]=!0;var Qt=Yt*3;if(this._circlesCollide(ct[Qt],ct[Qt+1],ct[Qt+2],Be.x,Be.y,Be.radius)&&(!ke||ke(this.circleKeys[Yt])))return le.push(!0),!0}}},Vn.prototype._forEachCell=function(P,V,z,j,te,le,_e,ke){for(var Be=this._convertToXCellCoord(P),rt=this._convertToYCellCoord(V),ut=this._convertToXCellCoord(z),gt=this._convertToYCellCoord(j),me=Be;me<=ut;me++)for(var Fe=rt;Fe<=gt;Fe++){var He=this.xCellCount*Fe+me;if(te.call(this,P,V,z,j,He,le,_e,ke))return}},Vn.prototype._convertToXCellCoord=function(P){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(P*this.xScale)))},Vn.prototype._convertToYCellCoord=function(P){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(P*this.yScale)))},Vn.prototype._circlesCollide=function(P,V,z,j,te,le){var _e=j-P,ke=te-V,Be=z+le;return Be*Be>_e*_e+ke*ke},Vn.prototype._circleAndRectCollide=function(P,V,z,j,te,le,_e){var ke=(le-j)/2,Be=Math.abs(P-(j+ke));if(Be>ke+z)return!1;var rt=(_e-te)/2,ut=Math.abs(V-(te+rt));if(ut>rt+z)return!1;if(Be<=ke||ut<=rt)return!0;var gt=Be-ke,me=ut-rt;return gt*gt+me*me<=z*z};function nl(H,P,V,z,j){var te=i.create();return P?(i.scale(te,te,[1/j,1/j,1]),V||i.rotateZ(te,te,z.angle)):i.multiply(te,z.labelPlaneMatrix,H),te}function kh(H,P,V,z,j){if(P){var te=i.clone(H);return i.scale(te,te,[j,j,1]),V||i.rotateZ(te,te,-z.angle),te}else return z.glCoordMatrix}function wo(H,P){var V=[H.x,H.y,0,1];Lh(V,V,P);var z=V[3];return{point:new i.Point(V[0]/z,V[1]/z),signedDistanceFromCamera:z}}function Eh(H,P){return .5+.5*(H/P)}function Em(H,P){var V=H[0]/H[3],z=H[1]/H[3],j=V>=-P[0]&&V<=P[0]&&z>=-P[1]&&z<=P[1];return j}function uv(H,P,V,z,j,te,le,_e){var ke=z?H.textSizeData:H.iconSizeData,Be=i.evaluateSizeForZoom(ke,V.transform.zoom),rt=[256/V.width*2+1,256/V.height*2+1],ut=z?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;ut.clear();for(var gt=H.lineVertexArray,me=z?H.text.placedSymbolArray:H.icon.placedSymbolArray,Fe=V.transform.width/V.transform.height,He=!1,et=0;et<me.length;et++){var ht=me.get(et);if(ht.hidden||ht.writingMode===i.WritingMode.vertical&&!He){Ch(ht.numGlyphs,ut);continue}He=!1;var ct=[ht.anchorX,ht.anchorY,0,1];if(i.transformMat4(ct,ct,P),!Em(ct,rt)){Ch(ht.numGlyphs,ut);continue}var At=ct[3],Bt=Eh(V.transform.cameraToCenterDistance,At),Yt=i.evaluateSizeForFeature(ke,Be,ht),Qt=le?Yt/Bt:Yt*Bt,er=new i.Point(ht.anchorX,ht.anchorY),ir=wo(er,j).point,mr={},or=Cm(ht,Qt,!1,_e,P,j,te,H.glyphOffsetArray,gt,ut,ir,er,mr,Fe);He=or.useVertical,(or.notEnoughRoom||He||or.needsFlipping&&Cm(ht,Qt,!0,_e,P,j,te,H.glyphOffsetArray,gt,ut,ir,er,mr,Fe).notEnoughRoom)&&Ch(ht.numGlyphs,ut)}z?H.text.dynamicLayoutVertexBuffer.updateData(ut):H.icon.dynamicLayoutVertexBuffer.updateData(ut)}function bc(H,P,V,z,j,te,le,_e,ke,Be,rt){var ut=_e.glyphStartIndex+_e.numGlyphs,gt=_e.lineStartIndex,me=_e.lineStartIndex+_e.lineLength,Fe=P.getoffsetX(_e.glyphStartIndex),He=P.getoffsetX(ut-1),et=fv(H*Fe,V,z,j,te,le,_e.segment,gt,me,ke,Be,rt);if(!et)return null;var ht=fv(H*He,V,z,j,te,le,_e.segment,gt,me,ke,Be,rt);return ht?{first:et,last:ht}:null}function O0(H,P,V,z){if(H===i.WritingMode.horizontal){var j=Math.abs(V.y-P.y),te=Math.abs(V.x-P.x)*z;if(j>te)return{useVertical:!0}}return(H===i.WritingMode.vertical?P.y<V.y:P.x>V.x)?{needsFlipping:!0}:null}function Cm(H,P,V,z,j,te,le,_e,ke,Be,rt,ut,gt,me){var Fe=P/24,He=H.lineOffsetX*Fe,et=H.lineOffsetY*Fe,ht;if(H.numGlyphs>1){var ct=H.glyphStartIndex+H.numGlyphs,At=H.lineStartIndex,Bt=H.lineStartIndex+H.lineLength,Yt=bc(Fe,_e,He,et,V,rt,ut,H,ke,te,gt);if(!Yt)return{notEnoughRoom:!0};var Qt=wo(Yt.first.point,le).point,er=wo(Yt.last.point,le).point;if(z&&!V){var ir=O0(H.writingMode,Qt,er,me);if(ir)return ir}ht=[Yt.first];for(var mr=H.glyphStartIndex+1;mr<ct-1;mr++)ht.push(fv(Fe*_e.getoffsetX(mr),He,et,V,rt,ut,H.segment,At,Bt,ke,te,gt));ht.push(Yt.last)}else{if(z&&!V){var or=wo(ut,j).point,dr=H.lineStartIndex+H.segment+1,Rt=new i.Point(ke.getx(dr),ke.gety(dr)),tr=wo(Rt,j),Lr=tr.signedDistanceFromCamera>0?tr.point:ad(ut,Rt,or,1,j),ra=O0(H.writingMode,or,Lr,me);if(ra)return ra}var Mr=fv(Fe*_e.getoffsetX(H.glyphStartIndex),He,et,V,rt,ut,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,ke,te,gt);if(!Mr)return{notEnoughRoom:!0};ht=[Mr]}for(var Jr=0,Dr=ht;Jr<Dr.length;Jr+=1){var ga=Dr[Jr];i.addDynamicAttributes(Be,ga.point,ga.angle)}return{}}function ad(H,P,V,z,j){var te=wo(H.add(H.sub(P)._unit()),j).point,le=V.sub(te);return V.add(le._mult(z/le.mag()))}function fv(H,P,V,z,j,te,le,_e,ke,Be,rt,ut){var gt=z?H-P:H+P,me=gt>0?1:-1,Fe=0;z&&(me*=-1,Fe=Math.PI),me<0&&(Fe+=Math.PI);for(var He=me>0?_e+le:_e+le+1,et=j,ht=j,ct=0,At=0,Bt=Math.abs(gt),Yt=[];ct+At<=Bt;){if(He+=me,He<_e||He>=ke)return null;if(ht=et,Yt.push(et),et=ut[He],et===void 0){var Qt=new i.Point(Be.getx(He),Be.gety(He)),er=wo(Qt,rt);if(er.signedDistanceFromCamera>0)et=ut[He]=er.point;else{var ir=He-me,mr=ct===0?te:new i.Point(Be.getx(ir),Be.gety(ir));et=ad(mr,Qt,ht,Bt-ct+1,rt)}}ct+=At,At=ht.dist(et)}var or=(Bt-ct)/At,dr=et.sub(ht),Rt=dr.mult(or)._add(ht);Rt._add(dr._unit()._perp()._mult(V*me));var tr=Fe+Math.atan2(et.y-ht.y,et.x-ht.x);return Yt.push(Rt),{point:Rt,angle:tr,path:Yt}}var N0=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ch(H,P){for(var V=0;V<H;V++){var z=P.length;P.resize(z+4),P.float32.set(N0,z*3)}}function Lh(H,P,V){var z=P[0],j=P[1];return H[0]=V[0]*z+V[4]*j+V[12],H[1]=V[1]*z+V[5]*j+V[13],H[3]=V[3]*z+V[7]*j+V[15],H}var uo=100,is=function(P,V,z){V===void 0&&(V=new Vn(P.width+2*uo,P.height+2*uo,25)),z===void 0&&(z=new Vn(P.width+2*uo,P.height+2*uo,25)),this.transform=P,this.grid=V,this.ignoredGrid=z,this.pitchfactor=Math.cos(P._pitch)*P.cameraToCenterDistance,this.screenRightBoundary=P.width+uo,this.screenBottomBoundary=P.height+uo,this.gridRightBoundary=P.width+2*uo,this.gridBottomBoundary=P.height+2*uo};is.prototype.placeCollisionBox=function(P,V,z,j,te){var le=this.projectAndGetPerspectiveRatio(j,P.anchorPointX,P.anchorPointY),_e=z*le.perspectiveRatio,ke=P.x1*_e+le.point.x,Be=P.y1*_e+le.point.y,rt=P.x2*_e+le.point.x,ut=P.y2*_e+le.point.y;return!this.isInsideGrid(ke,Be,rt,ut)||!V&&this.grid.hitTest(ke,Be,rt,ut,te)?{box:[],offscreen:!1}:{box:[ke,Be,rt,ut],offscreen:this.isOffscreen(ke,Be,rt,ut)}},is.prototype.placeCollisionCircles=function(P,V,z,j,te,le,_e,ke,Be,rt,ut,gt,me){var Fe=[],He=new i.Point(V.anchorX,V.anchorY),et=wo(He,le),ht=Eh(this.transform.cameraToCenterDistance,et.signedDistanceFromCamera),ct=rt?te/ht:te*ht,At=ct/i.ONE_EM,Bt=wo(He,_e).point,Yt={},Qt=V.lineOffsetX*At,er=V.lineOffsetY*At,ir=bc(At,j,Qt,er,!1,Bt,He,V,z,_e,Yt),mr=!1,or=!1,dr=!0;if(ir){for(var Rt=gt*.5*ht+me,tr=new i.Point(-uo,-uo),Lr=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),ra=new zi,Mr=ir.first,Jr=ir.last,Dr=[],ga=Mr.path.length-1;ga>=1;ga--)Dr.push(Mr.path[ga]);for(var Pr=1;Pr<Jr.path.length;Pr++)Dr.push(Jr.path[Pr]);var Cr=Rt*2.5;if(ke){var oa=Dr.map(function(eo){return wo(eo,ke)});oa.some(function(eo){return eo.signedDistanceFromCamera<=0})?Dr=[]:Dr=oa.map(function(eo){return eo.point})}var ta=[];if(Dr.length>0){for(var Ir=Dr[0].clone(),Wr=Dr[0].clone(),ua=1;ua<Dr.length;ua++)Ir.x=Math.min(Ir.x,Dr[ua].x),Ir.y=Math.min(Ir.y,Dr[ua].y),Wr.x=Math.max(Wr.x,Dr[ua].x),Wr.y=Math.max(Wr.y,Dr[ua].y);Ir.x>=tr.x&&Wr.x<=Lr.x&&Ir.y>=tr.y&&Wr.y<=Lr.y?ta=[Dr]:Wr.x<tr.x||Ir.x>Lr.x||Wr.y<tr.y||Ir.y>Lr.y?ta=[]:ta=i.clipLine([Dr],tr.x,tr.y,Lr.x,Lr.y)}for(var Ja=0,nn=ta;Ja<nn.length;Ja+=1){var ma=nn[Ja];ra.reset(ma,Rt*.25);var Aa=0;ra.length<=.5*Rt?Aa=1:Aa=Math.ceil(ra.paddedLength/Cr)+1;for(var an=0;an<Aa;an++){var pn=an/Math.max(Aa-1,1),Pn=ra.lerp(pn),oi=Pn.x+uo,Vi=Pn.y+uo;Fe.push(oi,Vi,Rt,0);var bn=oi-Rt,Ni=Vi-Rt,gi=oi+Rt,ji=Vi+Rt;if(dr=dr&&this.isOffscreen(bn,Ni,gi,ji),or=or||this.isInsideGrid(bn,Ni,gi,ji),!P&&this.grid.hitTestCircle(oi,Vi,Rt,ut)&&(mr=!0,!Be))return{circles:[],offscreen:!1,collisionDetected:mr}}}}return{circles:!Be&&mr||!or?[]:Fe,offscreen:dr,collisionDetected:mr}},is.prototype.queryRenderedSymbols=function(P){if(P.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var V=[],z=1/0,j=1/0,te=-1/0,le=-1/0,_e=0,ke=P;_e<ke.length;_e+=1){var Be=ke[_e],rt=new i.Point(Be.x+uo,Be.y+uo);z=Math.min(z,rt.x),j=Math.min(j,rt.y),te=Math.max(te,rt.x),le=Math.max(le,rt.y),V.push(rt)}for(var ut=this.grid.query(z,j,te,le).concat(this.ignoredGrid.query(z,j,te,le)),gt={},me={},Fe=0,He=ut;Fe<He.length;Fe+=1){var et=He[Fe],ht=et.key;if(gt[ht.bucketInstanceId]===void 0&&(gt[ht.bucketInstanceId]={}),!gt[ht.bucketInstanceId][ht.featureIndex]){var ct=[new i.Point(et.x1,et.y1),new i.Point(et.x2,et.y1),new i.Point(et.x2,et.y2),new i.Point(et.x1,et.y2)];!i.polygonIntersectsPolygon(V,ct)||(gt[ht.bucketInstanceId][ht.featureIndex]=!0,me[ht.bucketInstanceId]===void 0&&(me[ht.bucketInstanceId]=[]),me[ht.bucketInstanceId].push(ht.featureIndex))}}return me},is.prototype.insertCollisionBox=function(P,V,z,j,te){var le=V?this.ignoredGrid:this.grid,_e={bucketInstanceId:z,featureIndex:j,collisionGroupID:te};le.insert(_e,P[0],P[1],P[2],P[3])},is.prototype.insertCollisionCircles=function(P,V,z,j,te){for(var le=V?this.ignoredGrid:this.grid,_e={bucketInstanceId:z,featureIndex:j,collisionGroupID:te},ke=0;ke<P.length;ke+=4)le.insertCircle(_e,P[ke],P[ke+1],P[ke+2])},is.prototype.projectAndGetPerspectiveRatio=function(P,V,z){var j=[V,z,0,1];Lh(j,j,P);var te=new i.Point((j[0]/j[3]+1)/2*this.transform.width+uo,(-j[1]/j[3]+1)/2*this.transform.height+uo);return{point:te,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/j[3])}},is.prototype.isOffscreen=function(P,V,z,j){return z<uo||P>=this.screenRightBoundary||j<uo||V>this.screenBottomBoundary},is.prototype.isInsideGrid=function(P,V,z,j){return z>=0&&P<this.gridRightBoundary&&j>=0&&V<this.gridBottomBoundary},is.prototype.getViewportMatrix=function(){var P=i.identity([]);return i.translate(P,P,[-uo,-uo,0]),P};function Fl(H,P,V){return P*(i.EXTENT/(H.tileSize*Math.pow(2,V-H.tileID.overscaledZ)))}var nd=function(P,V,z,j){P?this.opacity=Math.max(0,Math.min(1,P.opacity+(P.placed?V:-V))):this.opacity=j&&z?1:0,this.placed=z};nd.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Xl=function(P,V,z,j,te){this.text=new nd(P?P.text:null,V,z,te),this.icon=new nd(P?P.icon:null,V,j,te)};Xl.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var id=function(P,V,z){this.text=P,this.icon=V,this.skipFade=z},Lm=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},B0=function(P,V,z,j,te){this.bucketInstanceId=P,this.featureIndex=V,this.sourceLayerIndex=z,this.bucketIndex=j,this.tileID=te},xp=function(P){this.crossSourceCollisions=P,this.maxGroupID=0,this.collisionGroups={}};xp.prototype.get=function(P){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[P]){var V=++this.maxGroupID;this.collisionGroups[P]={ID:V,predicate:function(z){return z.collisionGroupID===V}}}return this.collisionGroups[P]};function bp(H,P,V,z,j){var te=i.getAnchorAlignment(H),le=te.horizontalAlign,_e=te.verticalAlign,ke=-(le-.5)*P,Be=-(_e-.5)*V,rt=i.evaluateVariableOffset(H,z);return new i.Point(ke+rt[0]*j,Be+rt[1]*j)}function ea(H,P,V,z,j,te){var le=H.x1,_e=H.x2,ke=H.y1,Be=H.y2,rt=H.anchorPointX,ut=H.anchorPointY,gt=new i.Point(P,V);return z&&gt._rotate(j?te:-te),{x1:le+gt.x,y1:ke+gt.y,x2:_e+gt.x,y2:Be+gt.y,anchorPointX:rt,anchorPointY:ut}}var wa=function(P,V,z,j){this.transform=P.clone(),this.collisionIndex=new is(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=V,this.retainedQueryData={},this.collisionGroups=new xp(z),this.collisionCircleArrays={},this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}};wa.prototype.getBucketParts=function(P,V,z,j){var te=z.getBucket(V),le=z.latestFeatureIndex;if(!(!te||!le||V.id!==te.layerIds[0])){var _e=z.collisionBoxArray,ke=te.layers[0].layout,Be=Math.pow(2,this.transform.zoom-z.tileID.overscaledZ),rt=z.tileSize/i.EXTENT,ut=this.transform.calculatePosMatrix(z.tileID.toUnwrapped()),gt=ke.get("text-pitch-alignment")==="map",me=ke.get("text-rotation-alignment")==="map",Fe=Fl(z,1,this.transform.zoom),He=nl(ut,gt,me,this.transform,Fe),et=null;if(gt){var ht=kh(ut,gt,me,this.transform,Fe);et=i.multiply([],this.transform.labelPlaneMatrix,ht)}this.retainedQueryData[te.bucketInstanceId]=new B0(te.bucketInstanceId,le,te.sourceLayerIndex,te.index,z.tileID);var ct={bucket:te,layout:ke,posMatrix:ut,textLabelPlaneMatrix:He,labelToScreenMatrix:et,scale:Be,textPixelRatio:rt,holdingForFade:z.holdingForFade(),collisionBoxArray:_e,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(te.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(te.sourceID)};if(j)for(var At=0,Bt=te.sortKeyRanges;At<Bt.length;At+=1){var Yt=Bt[At],Qt=Yt.sortKey,er=Yt.symbolInstanceStart,ir=Yt.symbolInstanceEnd;P.push({sortKey:Qt,symbolInstanceStart:er,symbolInstanceEnd:ir,parameters:ct})}else P.push({symbolInstanceStart:0,symbolInstanceEnd:te.symbolInstances.length,parameters:ct})}},wa.prototype.attemptAnchorPlacement=function(P,V,z,j,te,le,_e,ke,Be,rt,ut,gt,me,Fe,He){var et=[gt.textOffset0,gt.textOffset1],ht=bp(P,z,j,et,te),ct=this.collisionIndex.placeCollisionBox(ea(V,ht.x,ht.y,le,_e,this.transform.angle),ut,ke,Be,rt.predicate);if(He){var At=this.collisionIndex.placeCollisionBox(ea(He,ht.x,ht.y,le,_e,this.transform.angle),ut,ke,Be,rt.predicate);if(At.box.length===0)return}if(ct.box.length>0){var Bt;return this.prevPlacement&&this.prevPlacement.variableOffsets[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID].text&&(Bt=this.prevPlacement.variableOffsets[gt.crossTileID].anchor),this.variableOffsets[gt.crossTileID]={textOffset:et,width:z,height:j,anchor:P,textBoxScale:te,prevAnchor:Bt},this.markUsedJustification(me,P,gt,Fe),me.allowVerticalPlacement&&(this.markUsedOrientation(me,Fe,gt),this.placedOrientations[gt.crossTileID]=Fe),{shift:ht,placedGlyphBoxes:ct}}},wa.prototype.placeLayerBucketPart=function(P,V,z){var j=this,te=P.parameters,le=te.bucket,_e=te.layout,ke=te.posMatrix,Be=te.textLabelPlaneMatrix,rt=te.labelToScreenMatrix,ut=te.textPixelRatio,gt=te.holdingForFade,me=te.collisionBoxArray,Fe=te.partiallyEvaluatedTextSize,He=te.collisionGroup,et=_e.get("text-optional"),ht=_e.get("icon-optional"),ct=_e.get("text-allow-overlap"),At=_e.get("icon-allow-overlap"),Bt=_e.get("text-rotation-alignment")==="map",Yt=_e.get("text-pitch-alignment")==="map",Qt=_e.get("icon-text-fit")!=="none",er=_e.get("symbol-z-order")==="viewport-y",ir=ct&&(At||!le.hasIconData()||ht),mr=At&&(ct||!le.hasTextData()||et);!le.collisionArrays&&me&&le.deserializeCollisionBoxes(me);var or=function(Mr,Jr){if(!V[Mr.crossTileID]){if(gt){j.placements[Mr.crossTileID]=new id(!1,!1,!1);return}var Dr=!1,ga=!1,Pr=!0,Cr=null,oa={box:null,offscreen:null},ta={box:null,offscreen:null},Ir=null,Wr=null,ua=null,Ja=0,nn=0,ma=0;Jr.textFeatureIndex?Ja=Jr.textFeatureIndex:Mr.useRuntimeCollisionCircles&&(Ja=Mr.featureIndex),Jr.verticalTextFeatureIndex&&(nn=Jr.verticalTextFeatureIndex);var Aa=Jr.textBox;if(Aa){var an=function(io){var Ct=i.WritingMode.horizontal;if(le.allowVerticalPlacement&&!io&&j.prevPlacement){var Ar=j.prevPlacement.placedOrientations[Mr.crossTileID];Ar&&(j.placedOrientations[Mr.crossTileID]=Ar,Ct=Ar,j.markUsedOrientation(le,Ct,Mr))}return Ct},pn=function(io,Ct){if(le.allowVerticalPlacement&&Mr.numVerticalGlyphVertices>0&&Jr.verticalTextBox)for(var Ar=0,_r=le.writingModes;Ar<_r.length;Ar+=1){var Na=_r[Ar];if(Na===i.WritingMode.vertical?(oa=Ct(),ta=oa):oa=io(),oa&&oa.box&&oa.box.length)break}else oa=io()};if(_e.get("text-variable-anchor")){var bn=_e.get("text-variable-anchor");if(j.prevPlacement&&j.prevPlacement.variableOffsets[Mr.crossTileID]){var Ni=j.prevPlacement.variableOffsets[Mr.crossTileID];bn.indexOf(Ni.anchor)>0&&(bn=bn.filter(function(io){return io!==Ni.anchor}),bn.unshift(Ni.anchor))}var gi=function(io,Ct,Ar){for(var _r=io.x2-io.x1,Na=io.y2-io.y1,qn=Mr.textBoxScale,St=Qt&&!At?Ct:null,dt={box:[],offscreen:!1},jt=ct?bn.length*2:bn.length,pr=0;pr<jt;++pr){var yr=bn[pr%bn.length],Kt=pr>=bn.length,Wt=j.attemptAnchorPlacement(yr,io,_r,Na,qn,Bt,Yt,ut,ke,He,Kt,Mr,le,Ar,St);if(Wt&&(dt=Wt.placedGlyphBoxes,dt&&dt.box&&dt.box.length)){Dr=!0,Cr=Wt.shift;break}}return dt},ji=function(){return gi(Aa,Jr.iconBox,i.WritingMode.horizontal)},eo=function(){var io=Jr.verticalTextBox,Ct=oa&&oa.box&&oa.box.length;return le.allowVerticalPlacement&&!Ct&&Mr.numVerticalGlyphVertices>0&&io?gi(io,Jr.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}};pn(ji,eo),oa&&(Dr=oa.box,Pr=oa.offscreen);var Xo=an(oa&&oa.box);if(!Dr&&j.prevPlacement){var Vo=j.prevPlacement.variableOffsets[Mr.crossTileID];Vo&&(j.variableOffsets[Mr.crossTileID]=Vo,j.markUsedJustification(le,Vo.anchor,Mr,Xo))}}else{var Pn=function(io,Ct){var Ar=j.collisionIndex.placeCollisionBox(io,ct,ut,ke,He.predicate);return Ar&&Ar.box&&Ar.box.length&&(j.markUsedOrientation(le,Ct,Mr),j.placedOrientations[Mr.crossTileID]=Ct),Ar},oi=function(){return Pn(Aa,i.WritingMode.horizontal)},Vi=function(){var io=Jr.verticalTextBox;return le.allowVerticalPlacement&&Mr.numVerticalGlyphVertices>0&&io?Pn(io,i.WritingMode.vertical):{box:null,offscreen:null}};pn(oi,Vi),an(oa&&oa.box&&oa.box.length)}}if(Ir=oa,Dr=Ir&&Ir.box&&Ir.box.length>0,Pr=Ir&&Ir.offscreen,Mr.useRuntimeCollisionCircles){var ki=le.text.placedSymbolArray.get(Mr.centerJustifiedTextSymbolIndex),So=i.evaluateSizeForFeature(le.textSizeData,Fe,ki),fn=_e.get("text-padding"),xs=Mr.collisionCircleDiameter;Wr=j.collisionIndex.placeCollisionCircles(ct,ki,le.lineVertexArray,le.glyphOffsetArray,So,ke,Be,rt,z,Yt,He.predicate,xs,fn),Dr=ct||Wr.circles.length>0&&!Wr.collisionDetected,Pr=Pr&&Wr.offscreen}if(Jr.iconFeatureIndex&&(ma=Jr.iconFeatureIndex),Jr.iconBox){var fi=function(io){var Ct=Qt&&Cr?ea(io,Cr.x,Cr.y,Bt,Yt,j.transform.angle):io;return j.collisionIndex.placeCollisionBox(Ct,At,ut,ke,He.predicate)};ta&&ta.box&&ta.box.length&&Jr.verticalIconBox?(ua=fi(Jr.verticalIconBox),ga=ua.box.length>0):(ua=fi(Jr.iconBox),ga=ua.box.length>0),Pr=Pr&&ua.offscreen}var sn=et||Mr.numHorizontalGlyphVertices===0&&Mr.numVerticalGlyphVertices===0,jn=ht||Mr.numIconVertices===0;if(!sn&&!jn?ga=Dr=ga&&Dr:jn?sn||(ga=ga&&Dr):Dr=ga&&Dr,Dr&&Ir&&Ir.box&&(ta&&ta.box&&nn?j.collisionIndex.insertCollisionBox(Ir.box,_e.get("text-ignore-placement"),le.bucketInstanceId,nn,He.ID):j.collisionIndex.insertCollisionBox(Ir.box,_e.get("text-ignore-placement"),le.bucketInstanceId,Ja,He.ID)),ga&&ua&&j.collisionIndex.insertCollisionBox(ua.box,_e.get("icon-ignore-placement"),le.bucketInstanceId,ma,He.ID),Wr&&(Dr&&j.collisionIndex.insertCollisionCircles(Wr.circles,_e.get("text-ignore-placement"),le.bucketInstanceId,Ja,He.ID),z)){var Qn=le.bucketInstanceId,po=j.collisionCircleArrays[Qn];po===void 0&&(po=j.collisionCircleArrays[Qn]=new Lm);for(var au=0;au<Wr.circles.length;au+=4)po.circles.push(Wr.circles[au+0]),po.circles.push(Wr.circles[au+1]),po.circles.push(Wr.circles[au+2]),po.circles.push(Wr.collisionDetected?1:0)}j.placements[Mr.crossTileID]=new id(Dr||ir,ga||mr,Pr||le.justReloaded),V[Mr.crossTileID]=!0}};if(er)for(var dr=le.getSortedSymbolIndexes(this.transform.angle),Rt=dr.length-1;Rt>=0;--Rt){var tr=dr[Rt];or(le.symbolInstances.get(tr),le.collisionArrays[tr])}else for(var Lr=P.symbolInstanceStart;Lr<P.symbolInstanceEnd;Lr++)or(le.symbolInstances.get(Lr),le.collisionArrays[Lr]);if(z&&le.bucketInstanceId in this.collisionCircleArrays){var ra=this.collisionCircleArrays[le.bucketInstanceId];i.invert(ra.invProjMatrix,ke),ra.viewportMatrix=this.collisionIndex.getViewportMatrix()}le.justReloaded=!1},wa.prototype.markUsedJustification=function(P,V,z,j){var te={left:z.leftJustifiedTextSymbolIndex,center:z.centerJustifiedTextSymbolIndex,right:z.rightJustifiedTextSymbolIndex},le;j===i.WritingMode.vertical?le=z.verticalPlacedTextSymbolIndex:le=te[i.getAnchorJustification(V)];for(var _e=[z.leftJustifiedTextSymbolIndex,z.centerJustifiedTextSymbolIndex,z.rightJustifiedTextSymbolIndex,z.verticalPlacedTextSymbolIndex],ke=0,Be=_e;ke<Be.length;ke+=1){var rt=Be[ke];rt>=0&&(le>=0&&rt!==le?P.text.placedSymbolArray.get(rt).crossTileID=0:P.text.placedSymbolArray.get(rt).crossTileID=z.crossTileID)}},wa.prototype.markUsedOrientation=function(P,V,z){for(var j=V===i.WritingMode.horizontal||V===i.WritingMode.horizontalOnly?V:0,te=V===i.WritingMode.vertical?V:0,le=[z.leftJustifiedTextSymbolIndex,z.centerJustifiedTextSymbolIndex,z.rightJustifiedTextSymbolIndex],_e=0,ke=le;_e<ke.length;_e+=1){var Be=ke[_e];P.text.placedSymbolArray.get(Be).placedOrientation=j}z.verticalPlacedTextSymbolIndex&&(P.text.placedSymbolArray.get(z.verticalPlacedTextSymbolIndex).placedOrientation=te)},wa.prototype.commit=function(P){this.commitTime=P,this.zoomAtLastRecencyCheck=this.transform.zoom;var V=this.prevPlacement,z=!1;this.prevZoomAdjustment=V?V.zoomAdjustment(this.transform.zoom):0;var j=V?V.symbolFadeChange(P):1,te=V?V.opacities:{},le=V?V.variableOffsets:{},_e=V?V.placedOrientations:{};for(var ke in this.placements){var Be=this.placements[ke],rt=te[ke];rt?(this.opacities[ke]=new Xl(rt,j,Be.text,Be.icon),z=z||Be.text!==rt.text.placed||Be.icon!==rt.icon.placed):(this.opacities[ke]=new Xl(null,j,Be.text,Be.icon,Be.skipFade),z=z||Be.text||Be.icon)}for(var ut in te){var gt=te[ut];if(!this.opacities[ut]){var me=new Xl(gt,j,!1,!1);me.isHidden()||(this.opacities[ut]=me,z=z||gt.text.placed||gt.icon.placed)}}for(var Fe in le)!this.variableOffsets[Fe]&&this.opacities[Fe]&&!this.opacities[Fe].isHidden()&&(this.variableOffsets[Fe]=le[Fe]);for(var He in _e)!this.placedOrientations[He]&&this.opacities[He]&&!this.opacities[He].isHidden()&&(this.placedOrientations[He]=_e[He]);z?this.lastPlacementChangeTime=P:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=V?V.lastPlacementChangeTime:P)},wa.prototype.updateLayerOpacities=function(P,V){for(var z={},j=0,te=V;j<te.length;j+=1){var le=te[j],_e=le.getBucket(P);_e&&le.latestFeatureIndex&&P.id===_e.layerIds[0]&&this.updateBucketOpacities(_e,z,le.collisionBoxArray)}},wa.prototype.updateBucketOpacities=function(P,V,z){var j=this;P.hasTextData()&&P.text.opacityVertexArray.clear(),P.hasIconData()&&P.icon.opacityVertexArray.clear(),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexArray.clear(),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexArray.clear();var te=P.layers[0].layout,le=new Xl(null,0,!1,!1,!0),_e=te.get("text-allow-overlap"),ke=te.get("icon-allow-overlap"),Be=te.get("text-variable-anchor"),rt=te.get("text-rotation-alignment")==="map",ut=te.get("text-pitch-alignment")==="map",gt=te.get("icon-text-fit")!=="none",me=new Xl(null,0,_e&&(ke||!P.hasIconData()||te.get("icon-optional")),ke&&(_e||!P.hasTextData()||te.get("text-optional")),!0);!P.collisionArrays&&z&&(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData())&&P.deserializeCollisionBoxes(z);for(var Fe=function(ct,At,Bt){for(var Yt=0;Yt<At/4;Yt++)ct.opacityVertexArray.emplaceBack(Bt)},He=function(ct){var At=P.symbolInstances.get(ct),Bt=At.numHorizontalGlyphVertices,Yt=At.numVerticalGlyphVertices,Qt=At.crossTileID,er=V[Qt],ir=j.opacities[Qt];er?ir=le:ir||(ir=me,j.opacities[Qt]=ir),V[Qt]=!0;var mr=Bt>0||Yt>0,or=At.numIconVertices>0,dr=j.placedOrientations[At.crossTileID],Rt=dr===i.WritingMode.vertical,tr=dr===i.WritingMode.horizontal||dr===i.WritingMode.horizontalOnly;if(mr){var Lr=ri(ir.text),ra=Rt?Hn:Lr;Fe(P.text,Bt,ra);var Mr=tr?Hn:Lr;Fe(P.text,Yt,Mr);var Jr=ir.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(ma){ma>=0&&(P.text.placedSymbolArray.get(ma).hidden=Jr||Rt?1:0)}),At.verticalPlacedTextSymbolIndex>=0&&(P.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=Jr||tr?1:0);var Dr=j.variableOffsets[At.crossTileID];Dr&&j.markUsedJustification(P,Dr.anchor,At,dr);var ga=j.placedOrientations[At.crossTileID];ga&&(j.markUsedJustification(P,"left",At,ga),j.markUsedOrientation(P,ga,At))}if(or){var Pr=ri(ir.icon),Cr=!(gt&&At.verticalPlacedIconSymbolIndex&&Rt);if(At.placedIconSymbolIndex>=0){var oa=Cr?Pr:Hn;Fe(P.icon,At.numIconVertices,oa),P.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=ir.icon.isHidden()}if(At.verticalPlacedIconSymbolIndex>=0){var ta=Cr?Hn:Pr;Fe(P.icon,At.numVerticalIconVertices,ta),P.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=ir.icon.isHidden()}}if(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData()){var Ir=P.collisionArrays[ct];if(Ir){var Wr=new i.Point(0,0);if(Ir.textBox||Ir.verticalTextBox){var ua=!0;if(Be){var Ja=j.variableOffsets[Qt];Ja?(Wr=bp(Ja.anchor,Ja.width,Ja.height,Ja.textOffset,Ja.textBoxScale),rt&&Wr._rotate(ut?j.transform.angle:-j.transform.angle)):ua=!1}Ir.textBox&&_c(P.textCollisionBox.collisionVertexArray,ir.text.placed,!ua||Rt,Wr.x,Wr.y),Ir.verticalTextBox&&_c(P.textCollisionBox.collisionVertexArray,ir.text.placed,!ua||tr,Wr.x,Wr.y)}var nn=Boolean(!tr&&Ir.verticalIconBox);Ir.iconBox&&_c(P.iconCollisionBox.collisionVertexArray,ir.icon.placed,nn,gt?Wr.x:0,gt?Wr.y:0),Ir.verticalIconBox&&_c(P.iconCollisionBox.collisionVertexArray,ir.icon.placed,!nn,gt?Wr.x:0,gt?Wr.y:0)}}},et=0;et<P.symbolInstances.length;et++)He(et);if(P.sortFeatures(this.transform.angle),this.retainedQueryData[P.bucketInstanceId]&&(this.retainedQueryData[P.bucketInstanceId].featureSortOrder=P.featureSortOrder),P.hasTextData()&&P.text.opacityVertexBuffer&&P.text.opacityVertexBuffer.updateData(P.text.opacityVertexArray),P.hasIconData()&&P.icon.opacityVertexBuffer&&P.icon.opacityVertexBuffer.updateData(P.icon.opacityVertexArray),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexBuffer&&P.iconCollisionBox.collisionVertexBuffer.updateData(P.iconCollisionBox.collisionVertexArray),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexBuffer&&P.textCollisionBox.collisionVertexBuffer.updateData(P.textCollisionBox.collisionVertexArray),P.bucketInstanceId in this.collisionCircleArrays){var ht=this.collisionCircleArrays[P.bucketInstanceId];P.placementInvProjMatrix=ht.invProjMatrix,P.placementViewportMatrix=ht.viewportMatrix,P.collisionCircleArray=ht.circles,delete this.collisionCircleArrays[P.bucketInstanceId]}},wa.prototype.symbolFadeChange=function(P){return this.fadeDuration===0?1:(P-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},wa.prototype.zoomAdjustment=function(P){return Math.max(0,(this.transform.zoom-P)/1.5)},wa.prototype.hasTransitions=function(P){return this.stale||P-this.lastPlacementChangeTime<this.fadeDuration},wa.prototype.stillRecent=function(P,V){var z=this.zoomAtLastRecencyCheck===V?1-this.zoomAdjustment(V):1;return this.zoomAtLastRecencyCheck=V,this.commitTime+this.fadeDuration*z>P},wa.prototype.setStale=function(){this.stale=!0};function _c(H,P,V,z,j){H.emplaceBack(P?1:0,V?1:0,z||0,j||0),H.emplaceBack(P?1:0,V?1:0,z||0,j||0),H.emplaceBack(P?1:0,V?1:0,z||0,j||0),H.emplaceBack(P?1:0,V?1:0,z||0,j||0)}var wc=Math.pow(2,25),Wo=Math.pow(2,24),Tc=Math.pow(2,17),nf=Math.pow(2,16),of=Math.pow(2,9),sf=Math.pow(2,8),Ha=Math.pow(2,1);function ri(H){if(H.opacity===0&&!H.placed)return 0;if(H.opacity===1&&H.placed)return 4294967295;var P=H.placed?1:0,V=Math.floor(H.opacity*127);return V*wc+P*Wo+V*Tc+P*nf+V*of+P*sf+V*Ha+P}var Hn=0,Es=function(P){this._sortAcrossTiles=P.layout.get("symbol-z-order")!=="viewport-y"&&P.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Es.prototype.continuePlacement=function(P,V,z,j,te){for(var le=this._bucketParts;this._currentTileIndex<P.length;){var _e=P[this._currentTileIndex];if(V.getBucketParts(le,j,_e,this._sortAcrossTiles),this._currentTileIndex++,te())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,le.sort(function(Be,rt){return Be.sortKey-rt.sortKey}));this._currentPartIndex<le.length;){var ke=le[this._currentPartIndex];if(V.placeLayerBucketPart(ke,this._seenCrossTileIDs,z),this._currentPartIndex++,te())return!0}return!1};var Zl=function(P,V,z,j,te,le,_e){this.placement=new wa(P,te,le,_e),this._currentPlacementIndex=V.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=j,this._done=!1};Zl.prototype.isDone=function(){return this._done},Zl.prototype.continuePlacement=function(P,V,z){for(var j=this,te=i.browser.now(),le=function(){var ut=i.browser.now()-te;return j._forceFullPlacement?!1:ut>2};this._currentPlacementIndex>=0;){var _e=P[this._currentPlacementIndex],ke=V[_e],Be=this.placement.collisionIndex.transform.zoom;if(ke.type==="symbol"&&(!ke.minzoom||ke.minzoom<=Be)&&(!ke.maxzoom||ke.maxzoom>Be)){this._inProgressLayer||(this._inProgressLayer=new Es(ke));var rt=this._inProgressLayer.continuePlacement(z[ke.source],this.placement,this._showCollisionBoxes,ke,le);if(rt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Zl.prototype.commit=function(P){return this.placement.commit(P),this.placement};var Xn=512/i.EXTENT/2,lf=function(P,V,z){this.tileID=P,this.indexedSymbolInstances={},this.bucketInstanceId=z;for(var j=0;j<V.length;j++){var te=V.get(j),le=te.key;this.indexedSymbolInstances[le]||(this.indexedSymbolInstances[le]=[]),this.indexedSymbolInstances[le].push({crossTileID:te.crossTileID,coord:this.getScaledCoordinates(te,P)})}};lf.prototype.getScaledCoordinates=function(P,V){var z=V.canonical.z-this.tileID.canonical.z,j=Xn/Math.pow(2,z);return{x:Math.floor((V.canonical.x*i.EXTENT+P.anchorX)*j),y:Math.floor((V.canonical.y*i.EXTENT+P.anchorY)*j)}},lf.prototype.findMatches=function(P,V,z){for(var j=this.tileID.canonical.z<V.canonical.z?1:Math.pow(2,this.tileID.canonical.z-V.canonical.z),te=0;te<P.length;te++){var le=P.get(te);if(!le.crossTileID){var _e=this.indexedSymbolInstances[le.key];if(!!_e)for(var ke=this.getScaledCoordinates(le,V),Be=0,rt=_e;Be<rt.length;Be+=1){var ut=rt[Be];if(Math.abs(ut.coord.x-ke.x)<=j&&Math.abs(ut.coord.y-ke.y)<=j&&!z[ut.crossTileID]){z[ut.crossTileID]=!0,le.crossTileID=ut.crossTileID;break}}}}};var Ac=function(){this.maxCrossTileID=0};Ac.prototype.generate=function(){return++this.maxCrossTileID};var il=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};il.prototype.handleWrapJump=function(P){var V=Math.round((P-this.lng)/360);if(V!==0)for(var z in this.indexes){var j=this.indexes[z],te={};for(var le in j){var _e=j[le];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+V),te[_e.tileID.key]=_e}this.indexes[z]=te}this.lng=P},il.prototype.addBucket=function(P,V,z){if(this.indexes[P.overscaledZ]&&this.indexes[P.overscaledZ][P.key]){if(this.indexes[P.overscaledZ][P.key].bucketInstanceId===V.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(P.overscaledZ,this.indexes[P.overscaledZ][P.key])}for(var j=0;j<V.symbolInstances.length;j++){var te=V.symbolInstances.get(j);te.crossTileID=0}this.usedCrossTileIDs[P.overscaledZ]||(this.usedCrossTileIDs[P.overscaledZ]={});var le=this.usedCrossTileIDs[P.overscaledZ];for(var _e in this.indexes){var ke=this.indexes[_e];if(Number(_e)>P.overscaledZ)for(var Be in ke){var rt=ke[Be];rt.tileID.isChildOf(P)&&rt.findMatches(V.symbolInstances,P,le)}else{var ut=P.scaledTo(Number(_e)),gt=ke[ut.key];gt&&gt.findMatches(V.symbolInstances,P,le)}}for(var me=0;me<V.symbolInstances.length;me++){var Fe=V.symbolInstances.get(me);Fe.crossTileID||(Fe.crossTileID=z.generate(),le[Fe.crossTileID]=!0)}return this.indexes[P.overscaledZ]===void 0&&(this.indexes[P.overscaledZ]={}),this.indexes[P.overscaledZ][P.key]=new lf(P,V.symbolInstances,V.bucketInstanceId),!0},il.prototype.removeBucketCrossTileIDs=function(P,V){for(var z in V.indexedSymbolInstances)for(var j=0,te=V.indexedSymbolInstances[z];j<te.length;j+=1){var le=te[j];delete this.usedCrossTileIDs[P][le.crossTileID]}},il.prototype.removeStaleBuckets=function(P){var V=!1;for(var z in this.indexes){var j=this.indexes[z];for(var te in j)P[j[te].bucketInstanceId]||(this.removeBucketCrossTileIDs(z,j[te]),delete j[te],V=!0)}return V};var mu=function(){this.layerIndexes={},this.crossTileIDs=new Ac,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};mu.prototype.addLayer=function(P,V,z){var j=this.layerIndexes[P.id];j===void 0&&(j=this.layerIndexes[P.id]=new il);var te=!1,le={};j.handleWrapJump(z);for(var _e=0,ke=V;_e<ke.length;_e+=1){var Be=ke[_e],rt=Be.getBucket(P);!rt||P.id!==rt.layerIds[0]||(rt.bucketInstanceId||(rt.bucketInstanceId=++this.maxBucketInstanceId),j.addBucket(Be.tileID,rt,this.crossTileIDs)&&(te=!0),le[rt.bucketInstanceId]=!0)}return j.removeStaleBuckets(le)&&(te=!0),te},mu.prototype.pruneUnusedLayers=function(P){var V={};P.forEach(function(j){V[j]=!0});for(var z in this.layerIndexes)V[z]||delete this.layerIndexes[z]};var Po=function(H,P){return i.emitValidationErrors(H,P&&P.filter(function(V){return V.identifier!=="source.canvas"}))},Xi=i.pick(dn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Sc=i.pick(dn,["setCenter","setZoom","setBearing","setPitch"]),Vf=On(),Mc=function(H){function P(V,z){var j=this;z===void 0&&(z={}),H.call(this),this.map=V,this.dispatcher=new $(Xa(),this),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new I(V._requestManager,z.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new mu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var te=this;this._rtlTextPluginCallback=P.registerForPluginStateChange(function(le){var _e={pluginStatus:le.pluginStatus,pluginURL:le.pluginURL};te.dispatcher.broadcast("syncRTLPluginState",_e,function(ke,Be){if(i.triggerPluginCompletionEvent(ke),Be){var rt=Be.every(function(gt){return gt});if(rt)for(var ut in te.sourceCaches)te.sourceCaches[ut].reload()}})}),this.on("data",function(le){if(!(le.dataType!=="source"||le.sourceDataType!=="metadata")){var _e=j.sourceCaches[le.sourceId];if(!!_e){var ke=_e.getSource();if(!(!ke||!ke.vectorLayerIds))for(var Be in j._layers){var rt=j._layers[Be];rt.source===ke.id&&j._validateLayer(rt)}}}})}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.loadURL=function(z,j){var te=this;j===void 0&&(j={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var le=typeof j.validate=="boolean"?j.validate:!i.isMapboxURL(z);z=this.map._requestManager.normalizeStyleURL(z,j.accessToken);var _e=this.map._requestManager.transformRequest(z,i.ResourceType.Style);this._request=i.getJSON(_e,function(ke,Be){te._request=null,ke?te.fire(new i.ErrorEvent(ke)):Be&&te._load(Be,le)})},P.prototype.loadJSON=function(z,j){var te=this;j===void 0&&(j={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){te._request=null,te._load(z,j.validate!==!1)})},P.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(Vf,!1)},P.prototype._load=function(z,j){if(!(j&&Po(this,i.validateStyle(z)))){this._loaded=!0,this.stylesheet=z;for(var te in z.sources)this.addSource(te,z.sources[te],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs);var le=yn(this.stylesheet.layers);this._order=le.map(function(rt){return rt.id}),this._layers={},this._serializedLayers={};for(var _e=0,ke=le;_e<ke.length;_e+=1){var Be=ke[_e];Be=i.createStyleLayer(Be),Be.setEventedParent(this,{layer:{id:Be.id}}),this._layers[Be.id]=Be,this._serializedLayers[Be.id]=Be.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new D(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},P.prototype._loadSprite=function(z){var j=this;this._spriteRequest=m(z,this.map._requestManager,function(te,le){if(j._spriteRequest=null,te)j.fire(new i.ErrorEvent(te));else if(le)for(var _e in le)j.imageManager.addImage(_e,le[_e]);j.imageManager.setLoaded(!0),j._availableImages=j.imageManager.listImages(),j.dispatcher.broadcast("setImages",j._availableImages),j.fire(new i.Event("data",{dataType:"style"}))})},P.prototype._validateLayer=function(z){var j=this.sourceCaches[z.source];if(!!j){var te=z.sourceLayer;if(!!te){var le=j.getSource();(le.type==="geojson"||le.vectorLayerIds&&le.vectorLayerIds.indexOf(te)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+te+'" does not exist on source "'+le.id+'" as specified by style layer "'+z.id+'"')))}}},P.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var z in this.sourceCaches)if(!this.sourceCaches[z].loaded())return!1;return!!this.imageManager.isLoaded()},P.prototype._serializeLayers=function(z){for(var j=[],te=0,le=z;te<le.length;te+=1){var _e=le[te],ke=this._layers[_e];ke.type!=="custom"&&j.push(ke.serialize())}return j},P.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var z in this.sourceCaches)if(this.sourceCaches[z].hasTransition())return!0;for(var j in this._layers)if(this._layers[j].hasTransition())return!0;return!1},P.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},P.prototype.update=function(z){if(!!this._loaded){var j=this._changed;if(this._changed){var te=Object.keys(this._updatedLayers),le=Object.keys(this._removedLayers);(te.length||le.length)&&this._updateWorkerLayers(te,le);for(var _e in this._updatedSources){var ke=this._updatedSources[_e];ke==="reload"?this._reloadSource(_e):ke==="clear"&&this._clearSource(_e)}this._updateTilesForChangedImages();for(var Be in this._updatedPaintProps)this._layers[Be].updateTransitions(z);this.light.updateTransitions(z),this._resetUpdates()}for(var rt in this.sourceCaches)this.sourceCaches[rt].used=!1;for(var ut=0,gt=this._order;ut<gt.length;ut+=1){var me=gt[ut],Fe=this._layers[me];Fe.recalculate(z,this._availableImages),!Fe.isHidden(z.zoom)&&Fe.source&&(this.sourceCaches[Fe.source].used=!0)}this.light.recalculate(z),this.z=z.zoom,j&&this.fire(new i.Event("data",{dataType:"style"}))}},P.prototype._updateTilesForChangedImages=function(){var z=Object.keys(this._changedImages);if(z.length){for(var j in this.sourceCaches)this.sourceCaches[j].reloadTilesForDependencies(["icons","patterns"],z);this._changedImages={}}},P.prototype._updateWorkerLayers=function(z,j){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(z),removedIds:j})},P.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},P.prototype.setState=function(z){var j=this;if(this._checkLoaded(),Po(this,i.validateStyle(z)))return!1;z=i.clone$1(z),z.layers=yn(z.layers);var te=Hi(this.serialize(),z).filter(function(_e){return!(_e.command in Sc)});if(te.length===0)return!1;var le=te.filter(function(_e){return!(_e.command in Xi)});if(le.length>0)throw new Error("Unimplemented: "+le.map(function(_e){return _e.command}).join(", ")+".");return te.forEach(function(_e){_e.command!=="setTransition"&&j[_e.command].apply(j,_e.args)}),this.stylesheet=z,!0},P.prototype.addImage=function(z,j){if(this.getImage(z))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(z,j),this._availableImages=this.imageManager.listImages(),this._changedImages[z]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},P.prototype.updateImage=function(z,j){this.imageManager.updateImage(z,j)},P.prototype.getImage=function(z){return this.imageManager.getImage(z)},P.prototype.removeImage=function(z){if(!this.getImage(z))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(z),this._availableImages=this.imageManager.listImages(),this._changedImages[z]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},P.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},P.prototype.addSource=function(z,j,te){var le=this;if(te===void 0&&(te={}),this._checkLoaded(),this.sourceCaches[z]!==void 0)throw new Error("There is already a source with this ID");if(!j.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(j).join(", ")+".");var _e=["vector","raster","geojson","video","image"],ke=_e.indexOf(j.type)>=0;if(!(ke&&this._validate(i.validateStyle.source,"sources."+z,j,null,te))){this.map&&this.map._collectResourceTiming&&(j.collectResourceTiming=!0);var Be=this.sourceCaches[z]=new Mt(z,j,this.dispatcher);Be.style=this,Be.setEventedParent(this,function(){return{isSourceLoaded:le.loaded(),source:Be.serialize(),sourceId:z}}),Be.onAdd(this.map),this._changed=!0}},P.prototype.removeSource=function(z){if(this._checkLoaded(),this.sourceCaches[z]===void 0)throw new Error("There is no source with this ID");for(var j in this._layers)if(this._layers[j].source===z)return this.fire(new i.ErrorEvent(new Error('Source "'+z+'" cannot be removed while layer "'+j+'" is using it.')));var te=this.sourceCaches[z];delete this.sourceCaches[z],delete this._updatedSources[z],te.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:z})),te.setEventedParent(null),te.clearTiles(),te.onRemove&&te.onRemove(this.map),this._changed=!0},P.prototype.setGeoJSONSourceData=function(z,j){this._checkLoaded();var te=this.sourceCaches[z].getSource();te.setData(j),this._changed=!0},P.prototype.getSource=function(z){return this.sourceCaches[z]&&this.sourceCaches[z].getSource()},P.prototype.addLayer=function(z,j,te){te===void 0&&(te={}),this._checkLoaded();var le=z.id;if(this.getLayer(le)){this.fire(new i.ErrorEvent(new Error('Layer with id "'+le+'" already exists on this map')));return}var _e;if(z.type==="custom"){if(Po(this,i.validateCustomStyleLayer(z)))return;_e=i.createStyleLayer(z)}else{if(typeof z.source=="object"&&(this.addSource(le,z.source),z=i.clone$1(z),z=i.extend(z,{source:le})),this._validate(i.validateStyle.layer,"layers."+le,z,{arrayIndex:-1},te))return;_e=i.createStyleLayer(z),this._validateLayer(_e),_e.setEventedParent(this,{layer:{id:le}}),this._serializedLayers[_e.id]=_e.serialize()}var ke=j?this._order.indexOf(j):this._order.length;if(j&&ke===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+j+'" does not exist on this map.')));return}if(this._order.splice(ke,0,le),this._layerOrderChanged=!0,this._layers[le]=_e,this._removedLayers[le]&&_e.source&&_e.type!=="custom"){var Be=this._removedLayers[le];delete this._removedLayers[le],Be.type!==_e.type?this._updatedSources[_e.source]="clear":(this._updatedSources[_e.source]="reload",this.sourceCaches[_e.source].pause())}this._updateLayer(_e),_e.onAdd&&_e.onAdd(this.map)},P.prototype.moveLayer=function(z,j){this._checkLoaded(),this._changed=!0;var te=this._layers[z];if(!te){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot be moved.")));return}if(z!==j){var le=this._order.indexOf(z);this._order.splice(le,1);var _e=j?this._order.indexOf(j):this._order.length;if(j&&_e===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+j+'" does not exist on this map.')));return}this._order.splice(_e,0,z),this._layerOrderChanged=!0}},P.prototype.removeLayer=function(z){this._checkLoaded();var j=this._layers[z];if(!j){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot be removed.")));return}j.setEventedParent(null);var te=this._order.indexOf(z);this._order.splice(te,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[z]=j,delete this._layers[z],delete this._serializedLayers[z],delete this._updatedLayers[z],delete this._updatedPaintProps[z],j.onRemove&&j.onRemove(this.map)},P.prototype.getLayer=function(z){return this._layers[z]},P.prototype.hasLayer=function(z){return z in this._layers},P.prototype.setLayerZoomRange=function(z,j,te){this._checkLoaded();var le=this.getLayer(z);if(!le){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot have zoom extent.")));return}le.minzoom===j&&le.maxzoom===te||(j!=null&&(le.minzoom=j),te!=null&&(le.maxzoom=te),this._updateLayer(le))},P.prototype.setFilter=function(z,j,te){te===void 0&&(te={}),this._checkLoaded();var le=this.getLayer(z);if(!le){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot be filtered.")));return}if(!i.deepEqual(le.filter,j)){if(j==null){le.filter=void 0,this._updateLayer(le);return}this._validate(i.validateStyle.filter,"layers."+le.id+".filter",j,null,te)||(le.filter=i.clone$1(j),this._updateLayer(le))}},P.prototype.getFilter=function(z){return i.clone$1(this.getLayer(z).filter)},P.prototype.setLayoutProperty=function(z,j,te,le){le===void 0&&(le={}),this._checkLoaded();var _e=this.getLayer(z);if(!_e){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(_e.getLayoutProperty(j),te)||(_e.setLayoutProperty(j,te,le),this._updateLayer(_e))},P.prototype.getLayoutProperty=function(z,j){var te=this.getLayer(z);if(!te){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style.")));return}return te.getLayoutProperty(j)},P.prototype.setPaintProperty=function(z,j,te,le){le===void 0&&(le={}),this._checkLoaded();var _e=this.getLayer(z);if(!_e){this.fire(new i.ErrorEvent(new Error("The layer '"+z+"' does not exist in the map's style and cannot be styled.")));return}if(!i.deepEqual(_e.getPaintProperty(j),te)){var ke=_e.setPaintProperty(j,te,le);ke&&this._updateLayer(_e),this._changed=!0,this._updatedPaintProps[z]=!0}},P.prototype.getPaintProperty=function(z,j){return this.getLayer(z).getPaintProperty(j)},P.prototype.setFeatureState=function(z,j){this._checkLoaded();var te=z.source,le=z.sourceLayer,_e=this.sourceCaches[te];if(_e===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var ke=_e.getSource().type;if(ke==="geojson"&&le){this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ke==="vector"&&!le){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}z.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),_e.setFeatureState(le,z.id,j)},P.prototype.removeFeatureState=function(z,j){this._checkLoaded();var te=z.source,le=this.sourceCaches[te];if(le===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var _e=le.getSource().type,ke=_e==="vector"?z.sourceLayer:void 0;if(_e==="vector"&&!ke){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(j&&typeof z.id!="string"&&typeof z.id!="number"){this.fire(new i.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}le.removeFeatureState(ke,z.id,j)},P.prototype.getFeatureState=function(z){this._checkLoaded();var j=z.source,te=z.sourceLayer,le=this.sourceCaches[j];if(le===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+j+"' does not exist in the map's style.")));return}var _e=le.getSource().type;if(_e==="vector"&&!te){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return z.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),le.getFeatureState(te,z.id)},P.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},P.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(z){return z.serialize()}),layers:this._serializeLayers(this._order)},function(z){return z!==void 0})},P.prototype._updateLayer=function(z){this._updatedLayers[z.id]=!0,z.source&&!this._updatedSources[z.source]&&this.sourceCaches[z.source].getSource().type!=="raster"&&(this._updatedSources[z.source]="reload",this.sourceCaches[z.source].pause()),this._changed=!0},P.prototype._flattenAndSortRenderedFeatures=function(z){for(var j=this,te=function(tr){return j._layers[tr].type==="fill-extrusion"},le={},_e=[],ke=this._order.length-1;ke>=0;ke--){var Be=this._order[ke];if(te(Be)){le[Be]=ke;for(var rt=0,ut=z;rt<ut.length;rt+=1){var gt=ut[rt],me=gt[Be];if(me)for(var Fe=0,He=me;Fe<He.length;Fe+=1){var et=He[Fe];_e.push(et)}}}}_e.sort(function(tr,Lr){return Lr.intersectionZ-tr.intersectionZ});for(var ht=[],ct=this._order.length-1;ct>=0;ct--){var At=this._order[ct];if(te(At))for(var Bt=_e.length-1;Bt>=0;Bt--){var Yt=_e[Bt].feature;if(le[Yt.layer.id]<ct)break;ht.push(Yt),_e.pop()}else for(var Qt=0,er=z;Qt<er.length;Qt+=1){var ir=er[Qt],mr=ir[At];if(mr)for(var or=0,dr=mr;or<dr.length;or+=1){var Rt=dr[or];ht.push(Rt.feature)}}}return ht},P.prototype.queryRenderedFeatures=function(z,j,te){j&&j.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",j.filter,null,j);var le={};if(j&&j.layers){if(!Array.isArray(j.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var _e=0,ke=j.layers;_e<ke.length;_e+=1){var Be=ke[_e],rt=this._layers[Be];if(!rt)return this.fire(new i.ErrorEvent(new Error("The layer '"+Be+"' does not exist in the map's style and cannot be queried for features."))),[];le[rt.source]=!0}}var ut=[];j.availableImages=this._availableImages;for(var gt in this.sourceCaches)j.layers&&!le[gt]||ut.push(Me(this.sourceCaches[gt],this._layers,this._serializedLayers,z,j,te));return this.placement&&ut.push(Ie(this._layers,this._serializedLayers,this.sourceCaches,z,j,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ut)},P.prototype.querySourceFeatures=function(z,j){j&&j.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",j.filter,null,j);var te=this.sourceCaches[z];return te?Ee(te,j):[]},P.prototype.addSourceType=function(z,j,te){if(P.getSourceType(z))return te(new Error('A source type called "'+z+'" already exists.'));if(P.setSourceType(z,j),!j.workerSourceURL)return te(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:z,url:j.workerSourceURL},te)},P.prototype.getLight=function(){return this.light.getLight()},P.prototype.setLight=function(z,j){j===void 0&&(j={}),this._checkLoaded();var te=this.light.getLight(),le=!1;for(var _e in z)if(!i.deepEqual(z[_e],te[_e])){le=!0;break}if(!!le){var ke={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(z,j),this.light.updateTransitions(ke)}},P.prototype._validate=function(z,j,te,le,_e){return _e===void 0&&(_e={}),_e&&_e.validate===!1?!1:Po(this,z.call(i.validateStyle,i.extend({key:j,style:this.serialize(),value:te,styleSpec:i.styleSpec},le)))},P.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var z in this._layers){var j=this._layers[z];j.setEventedParent(null)}for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},P.prototype._clearSource=function(z){this.sourceCaches[z].clearTiles()},P.prototype._reloadSource=function(z){this.sourceCaches[z].resume(),this.sourceCaches[z].reload()},P.prototype._updateSources=function(z){for(var j in this.sourceCaches)this.sourceCaches[j].update(z)},P.prototype._generateCollisionBoxes=function(){for(var z in this.sourceCaches)this._reloadSource(z)},P.prototype._updatePlacement=function(z,j,te,le,_e){_e===void 0&&(_e=!1);for(var ke=!1,Be=!1,rt={},ut=0,gt=this._order;ut<gt.length;ut+=1){var me=gt[ut],Fe=this._layers[me];if(Fe.type==="symbol"){if(!rt[Fe.source]){var He=this.sourceCaches[Fe.source];rt[Fe.source]=He.getRenderableIds(!0).map(function(Qt){return He.getTileByID(Qt)}).sort(function(Qt,er){return er.tileID.overscaledZ-Qt.tileID.overscaledZ||(Qt.tileID.isLessThan(er.tileID)?-1:1)})}var et=this.crossTileSymbolIndex.addLayer(Fe,rt[Fe.source],z.center.lng);ke=ke||et}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),_e=_e||this._layerOrderChanged||te===0,(_e||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),z.zoom))&&(this.pauseablePlacement=new Zl(z,this._order,_e,j,te,le,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,rt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),Be=!0),ke&&this.pauseablePlacement.placement.setStale()),Be||ke)for(var ht=0,ct=this._order;ht<ct.length;ht+=1){var At=ct[ht],Bt=this._layers[At];Bt.type==="symbol"&&this.placement.updateLayerOpacities(Bt,rt[Bt.source])}var Yt=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now());return Yt},P.prototype._releaseSymbolFadeTiles=function(){for(var z in this.sourceCaches)this.sourceCaches[z].releaseSymbolFadeTiles()},P.prototype.getImages=function(z,j,te){this.imageManager.getImages(j.icons,te),this._updateTilesForChangedImages();var le=this.sourceCaches[j.source];le&&le.setDependencies(j.tileID.key,j.type,j.icons)},P.prototype.getGlyphs=function(z,j,te){this.glyphManager.getGlyphs(j.stacks,te)},P.prototype.getResource=function(z,j,te){return i.makeRequest(j,te)},P}(i.Evented);Mc.getSourceType=ye,Mc.setSourceType=re,Mc.registerForPluginStateChange=i.registerForPluginStateChange;var uf=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),I1=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,$0=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Si=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cv="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",kc=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wn="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",$s=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,U0=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,os="void main() {gl_FragColor=vec4(1.0);}",Bo="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ff=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cs=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,fo=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,jf="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ps="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",yu="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",qf="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",H0="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Ol="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Pm="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Ec=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,D1=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cf=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,$u=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,od=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,G0=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,vv=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,V0=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,j0=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,q0=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,_p=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Y0="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",W0=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wp="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",X0=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Im=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Z0=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ph=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Cc=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tp=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Ap=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sd=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,K0=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Dm="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",R1=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,J0=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,xu=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sp=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,ld=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,hf=co(I1,$0),vf=co(Si,cv),ud=co(kc,Wn),fd=co($s,U0),df=co(os,Bo),gs=co(ff,Cs),Lc=co(fo,jf),cd=co(ps,yu),Kl=co(qf,H0),Rm=co(Ol,Pm),zm=co(Ec,Us),Fm=co(D1,cf),Om=co($u,od),Ih=co(G0,hv),Q0=co(vv,V0),hd=co(j0,q0),z1=co(_p,Y0),Mp=co(W0,wp),Nl=co(X0,Im),pf=co(Z0,Ph),pv=co(Cc,Tp),kp=co(Ap,sd),eg=co(K0,Dm),tg=co(R1,J0),Nm=co(xu,Sp),rg=co(ld,dv);function co(H,P){var V=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,z={};return H=H.replace(V,function(j,te,le,_e,ke){return z[ke]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_`+ke+`
varying `+le+" "+_e+" "+ke+`;
#else
uniform `+le+" "+_e+" u_"+ke+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ke+`
    `+le+" "+_e+" "+ke+" = u_"+ke+`;
#endif
`}),P=P.replace(V,function(j,te,le,_e,ke){var Be=_e==="float"?"vec2":"vec4",rt=ke.match(/color/)?"color":Be;return z[ke]?te==="define"?`
#ifndef HAS_UNIFORM_u_`+ke+`
uniform lowp float u_`+ke+`_t;
attribute `+le+" "+Be+" a_"+ke+`;
varying `+le+" "+_e+" "+ke+`;
#else
uniform `+le+" "+_e+" u_"+ke+`;
#endif
`:rt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ke+`
    `+ke+" = a_"+ke+`;
#else
    `+le+" "+_e+" "+ke+" = u_"+ke+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ke+`
    `+ke+" = unpack_mix_"+rt+"(a_"+ke+", u_"+ke+`_t);
#else
    `+le+" "+_e+" "+ke+" = u_"+ke+`;
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_`+ke+`
uniform lowp float u_`+ke+`_t;
attribute `+le+" "+Be+" a_"+ke+`;
#else
uniform `+le+" "+_e+" u_"+ke+`;
#endif
`:rt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ke+`
    `+le+" "+_e+" "+ke+" = a_"+ke+`;
#else
    `+le+" "+_e+" "+ke+" = u_"+ke+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ke+`
    `+le+" "+_e+" "+ke+" = unpack_mix_"+rt+"(a_"+ke+", u_"+ke+`_t);
#else
    `+le+" "+_e+" "+ke+" = u_"+ke+`;
#endif
`}),{fragmentSource:H,vertexSource:P}}var gv=Object.freeze({__proto__:null,prelude:hf,background:vf,backgroundPattern:ud,circle:fd,clippingMask:df,heatmap:gs,heatmapTexture:Lc,collisionBox:cd,collisionCircle:Kl,debug:Rm,fill:zm,fillOutline:Fm,fillOutlinePattern:Om,fillPattern:Ih,fillExtrusion:Q0,fillExtrusionPattern:hd,hillshadePrepare:z1,hillshade:Mp,line:Nl,lineGradient:pf,linePattern:pv,lineSDF:kp,raster:eg,symbolIcon:tg,symbolSDF:Nm,symbolTextAndIcon:rg}),$o=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};$o.prototype.bind=function(P,V,z,j,te,le,_e,ke){this.context=P;for(var Be=this.boundPaintVertexBuffers.length!==j.length,rt=0;!Be&&rt<j.length;rt++)this.boundPaintVertexBuffers[rt]!==j[rt]&&(Be=!0);var ut=!this.vao||this.boundProgram!==V||this.boundLayoutVertexBuffer!==z||Be||this.boundIndexBuffer!==te||this.boundVertexOffset!==le||this.boundDynamicVertexBuffer!==_e||this.boundDynamicVertexBuffer2!==ke;!P.extVertexArrayObject||ut?this.freshBind(V,z,j,te,le,_e,ke):(P.bindVertexArrayOES.set(this.vao),_e&&_e.bind(),te&&te.dynamicDraw&&te.bind(),ke&&ke.bind())},$o.prototype.freshBind=function(P,V,z,j,te,le,_e){var ke,Be=P.numAttributes,rt=this.context,ut=rt.gl;if(rt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=rt.extVertexArrayObject.createVertexArrayOES(),rt.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=P,this.boundLayoutVertexBuffer=V,this.boundPaintVertexBuffers=z,this.boundIndexBuffer=j,this.boundVertexOffset=te,this.boundDynamicVertexBuffer=le,this.boundDynamicVertexBuffer2=_e;else{ke=rt.currentNumAttributes||0;for(var gt=Be;gt<ke;gt++)ut.disableVertexAttribArray(gt)}V.enableAttributes(ut,P);for(var me=0,Fe=z;me<Fe.length;me+=1){var He=Fe[me];He.enableAttributes(ut,P)}le&&le.enableAttributes(ut,P),_e&&_e.enableAttributes(ut,P),V.bind(),V.setVertexAttribPointers(ut,P,te);for(var et=0,ht=z;et<ht.length;et+=1){var ct=ht[et];ct.bind(),ct.setVertexAttribPointers(ut,P,te)}le&&(le.bind(),le.setVertexAttribPointers(ut,P,te)),j&&j.bind(),_e&&(_e.bind(),_e.setVertexAttribPointers(ut,P,te)),rt.currentNumAttributes=Be},$o.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Pc=function(P,V,z,j,te){var le=P.gl;this.program=le.createProgram();var _e=z?z.defines():[];te&&_e.push("#define OVERDRAW_INSPECTOR;");var ke=_e.concat(hf.fragmentSource,V.fragmentSource).join(`
`),Be=_e.concat(hf.vertexSource,V.vertexSource).join(`
`),rt=le.createShader(le.FRAGMENT_SHADER);if(le.isContextLost()){this.failedToCreate=!0;return}le.shaderSource(rt,ke),le.compileShader(rt),le.attachShader(this.program,rt);var ut=le.createShader(le.VERTEX_SHADER);if(le.isContextLost()){this.failedToCreate=!0;return}le.shaderSource(ut,Be),le.compileShader(ut),le.attachShader(this.program,ut);for(var gt=z?z.layoutAttributes:[],me=0;me<gt.length;me++)le.bindAttribLocation(this.program,me,gt[me].name);le.linkProgram(this.program),le.deleteShader(ut),le.deleteShader(rt),this.numAttributes=le.getProgramParameter(this.program,le.ACTIVE_ATTRIBUTES),this.attributes={};for(var Fe={},He=0;He<this.numAttributes;He++){var et=le.getActiveAttrib(this.program,He);et&&(this.attributes[et.name]=le.getAttribLocation(this.program,et.name))}for(var ht=le.getProgramParameter(this.program,le.ACTIVE_UNIFORMS),ct=0;ct<ht;ct++){var At=le.getActiveUniform(this.program,ct);At&&(Fe[At.name]=le.getUniformLocation(this.program,At.name))}this.fixedUniforms=j(P,Fe),this.binderUniforms=z?z.getUniforms(P,Fe):[]};Pc.prototype.draw=function(P,V,z,j,te,le,_e,ke,Be,rt,ut,gt,me,Fe,He,et){var ht,ct=P.gl;if(!this.failedToCreate){P.program.set(this.program),P.setDepthMode(z),P.setStencilMode(j),P.setColorMode(te),P.setCullFace(le);for(var At in this.fixedUniforms)this.fixedUniforms[At].set(_e[At]);Fe&&Fe.setUniforms(P,this.binderUniforms,gt,{zoom:me});for(var Bt=(ht={},ht[ct.LINES]=2,ht[ct.TRIANGLES]=3,ht[ct.LINE_STRIP]=1,ht)[V],Yt=0,Qt=ut.get();Yt<Qt.length;Yt+=1){var er=Qt[Yt],ir=er.vaos||(er.vaos={}),mr=ir[ke]||(ir[ke]=new $o);mr.bind(P,this,Be,Fe?Fe.getPaintVertexBuffers():[],rt,er.vertexOffset,He,et),ct.drawElements(V,er.primitiveLength*Bt,ct.UNSIGNED_SHORT,er.primitiveOffset*Bt*2)}}};function Ic(H,P,V){var z=1/Fl(V,1,P.transform.tileZoom),j=Math.pow(2,V.tileID.overscaledZ),te=V.tileSize*Math.pow(2,P.transform.tileZoom)/j,le=te*(V.tileID.canonical.x+V.tileID.wrap*j),_e=te*V.tileID.canonical.y;return{u_image:0,u_texsize:V.imageAtlasTexture.size,u_scale:[z,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[le>>16,_e>>16],u_pixel_coord_lower:[le&65535,_e&65535]}}function Yf(H,P,V,z){var j=V.imageManager.getPattern(H.from.toString()),te=V.imageManager.getPattern(H.to.toString()),le=V.imageManager.getPixelSize(),_e=le.width,ke=le.height,Be=Math.pow(2,z.tileID.overscaledZ),rt=z.tileSize*Math.pow(2,V.transform.tileZoom)/Be,ut=rt*(z.tileID.canonical.x+z.tileID.wrap*Be),gt=rt*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[_e,ke],u_mix:P.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Fl(z,1,V.transform.tileZoom),u_pixel_coord_upper:[ut>>16,gt>>16],u_pixel_coord_lower:[ut&65535,gt&65535]}}var Ls=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_lightpos:new i.Uniform3f(H,P.u_lightpos),u_lightintensity:new i.Uniform1f(H,P.u_lightintensity),u_lightcolor:new i.Uniform3f(H,P.u_lightcolor),u_vertical_gradient:new i.Uniform1f(H,P.u_vertical_gradient),u_opacity:new i.Uniform1f(H,P.u_opacity)}},Ep=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_lightpos:new i.Uniform3f(H,P.u_lightpos),u_lightintensity:new i.Uniform1f(H,P.u_lightintensity),u_lightcolor:new i.Uniform3f(H,P.u_lightcolor),u_vertical_gradient:new i.Uniform1f(H,P.u_vertical_gradient),u_height_factor:new i.Uniform1f(H,P.u_height_factor),u_image:new i.Uniform1i(H,P.u_image),u_texsize:new i.Uniform2f(H,P.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,P.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,P.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,P.u_scale),u_fade:new i.Uniform1f(H,P.u_fade),u_opacity:new i.Uniform1f(H,P.u_opacity)}},Uu=function(H,P,V,z){var j=P.style.light,te=j.properties.get("position"),le=[te.x,te.y,te.z],_e=i.create$1();j.properties.get("anchor")==="viewport"&&i.fromRotation(_e,-P.transform.angle),i.transformMat3(le,le,_e);var ke=j.properties.get("color");return{u_matrix:H,u_lightpos:le,u_lightintensity:j.properties.get("intensity"),u_lightcolor:[ke.r,ke.g,ke.b],u_vertical_gradient:+V,u_opacity:z}},Wf=function(H,P,V,z,j,te,le){return i.extend(Uu(H,P,V,z),Ic(te,P,le),{u_height_factor:-Math.pow(2,j.overscaledZ)/le.tileSize/8})},Dc=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix)}},Xf=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_image:new i.Uniform1i(H,P.u_image),u_texsize:new i.Uniform2f(H,P.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,P.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,P.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,P.u_scale),u_fade:new i.Uniform1f(H,P.u_fade)}},bu=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_world:new i.Uniform2f(H,P.u_world)}},Rc=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_world:new i.Uniform2f(H,P.u_world),u_image:new i.Uniform1i(H,P.u_image),u_texsize:new i.Uniform2f(H,P.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,P.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,P.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,P.u_scale),u_fade:new i.Uniform1f(H,P.u_fade)}},zc=function(H){return{u_matrix:H}},gf=function(H,P,V,z){return i.extend(zc(H),Ic(V,P,z))},ag=function(H,P){return{u_matrix:H,u_world:P}},F1=function(H,P,V,z,j){return i.extend(gf(H,P,V,z),{u_world:j})},vd=function(H,P){return{u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(H,P.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(H,P.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(H,P.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(H,P.u_matrix)}},Bm=function(H,P,V,z){var j=H.transform,te,le;if(z.paint.get("circle-pitch-alignment")==="map"){var _e=Fl(V,1,j.zoom);te=!0,le=[_e,_e]}else te=!1,le=j.pixelsToGLUnits;return{u_camera_to_center_distance:j.cameraToCenterDistance,u_scale_with_map:+(z.paint.get("circle-pitch-scale")==="map"),u_matrix:H.translatePosMatrix(P.posMatrix,V,z.paint.get("circle-translate"),z.paint.get("circle-translate-anchor")),u_pitch_with_map:+te,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:le}},mf=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(H,P.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(H,P.u_extrude_scale),u_overscale_factor:new i.Uniform1f(H,P.u_overscale_factor)}},dd=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_inv_matrix:new i.UniformMatrix4f(H,P.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(H,P.u_viewport_size)}},pd=function(H,P,V){var z=Fl(V,1,P.zoom),j=Math.pow(2,P.zoom-V.tileID.overscaledZ),te=V.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:P.cameraToCenterDistance,u_pixels_to_tile_units:z,u_extrude_scale:[P.pixelsToGLUnits[0]/(z*j),P.pixelsToGLUnits[1]/(z*j)],u_overscale_factor:te}},mv=function(H,P,V){return{u_matrix:H,u_inv_matrix:P,u_camera_to_center_distance:V.cameraToCenterDistance,u_viewport_size:[V.width,V.height]}},$m=function(H,P){return{u_color:new i.UniformColor(H,P.u_color),u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_overlay:new i.Uniform1i(H,P.u_overlay),u_overlay_scale:new i.Uniform1f(H,P.u_overlay_scale)}},gd=function(H,P,V){return V===void 0&&(V=1),{u_matrix:H,u_color:P,u_overlay:0,u_overlay_scale:V}},ng=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix)}},ig=function(H){return{u_matrix:H}},Um=function(H,P){return{u_extrude_scale:new i.Uniform1f(H,P.u_extrude_scale),u_intensity:new i.Uniform1f(H,P.u_intensity),u_matrix:new i.UniformMatrix4f(H,P.u_matrix)}},Fc=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_world:new i.Uniform2f(H,P.u_world),u_image:new i.Uniform1i(H,P.u_image),u_color_ramp:new i.Uniform1i(H,P.u_color_ramp),u_opacity:new i.Uniform1f(H,P.u_opacity)}},og=function(H,P,V,z){return{u_matrix:H,u_extrude_scale:Fl(P,1,V),u_intensity:z}},_u=function(H,P,V,z){var j=i.create();i.ortho(j,0,H.width,H.height,0,0,1);var te=H.context.gl;return{u_matrix:j,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:V,u_color_ramp:z,u_opacity:P.paint.get("heatmap-opacity")}},Cp=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_image:new i.Uniform1i(H,P.u_image),u_latrange:new i.Uniform2f(H,P.u_latrange),u_light:new i.Uniform2f(H,P.u_light),u_shadow:new i.UniformColor(H,P.u_shadow),u_highlight:new i.UniformColor(H,P.u_highlight),u_accent:new i.UniformColor(H,P.u_accent)}},sg=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_image:new i.Uniform1i(H,P.u_image),u_dimension:new i.Uniform2f(H,P.u_dimension),u_zoom:new i.Uniform1f(H,P.u_zoom),u_maxzoom:new i.Uniform1f(H,P.u_maxzoom),u_unpack:new i.Uniform4f(H,P.u_unpack)}},yf=function(H,P,V){var z=V.paint.get("hillshade-shadow-color"),j=V.paint.get("hillshade-highlight-color"),te=V.paint.get("hillshade-accent-color"),le=V.paint.get("hillshade-illumination-direction")*(Math.PI/180);V.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=H.transform.angle);var _e=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(P.tileID.toUnwrapped(),_e),u_image:0,u_latrange:Bl(H,P.tileID),u_light:[V.paint.get("hillshade-exaggeration"),le],u_shadow:z,u_highlight:j,u_accent:te}},lg=function(H,P,V){var z=P.stride,j=i.create();return i.ortho(j,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(j,j,[0,-i.EXTENT,0]),{u_matrix:j,u_image:1,u_dimension:[z,z],u_zoom:H.overscaledZ,u_maxzoom:V,u_unpack:P.getUnpackVector()}};function Bl(H,P){var V=Math.pow(2,P.canonical.z),z=P.canonical.y;return[new i.MercatorCoordinate(0,z/V).toLngLat().lat,new i.MercatorCoordinate(0,(z+1)/V).toLngLat().lat]}var Jl=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_ratio:new i.Uniform1f(H,P.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,P.u_units_to_pixels)}},Oc=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_ratio:new i.Uniform1f(H,P.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,P.u_units_to_pixels),u_image:new i.Uniform1i(H,P.u_image)}},ug=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_texsize:new i.Uniform2f(H,P.u_texsize),u_ratio:new i.Uniform1f(H,P.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_image:new i.Uniform1i(H,P.u_image),u_units_to_pixels:new i.Uniform2f(H,P.u_units_to_pixels),u_scale:new i.Uniform3f(H,P.u_scale),u_fade:new i.Uniform1f(H,P.u_fade)}},fg=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_ratio:new i.Uniform1f(H,P.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,P.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(H,P.u_patternscale_a),u_patternscale_b:new i.Uniform2f(H,P.u_patternscale_b),u_sdfgamma:new i.Uniform1f(H,P.u_sdfgamma),u_image:new i.Uniform1i(H,P.u_image),u_tex_y_a:new i.Uniform1f(H,P.u_tex_y_a),u_tex_y_b:new i.Uniform1f(H,P.u_tex_y_b),u_mix:new i.Uniform1f(H,P.u_mix)}},yv=function(H,P,V){var z=H.transform;return{u_matrix:$c(H,P,V),u_ratio:1/Fl(P,1,z.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},Hm=function(H,P,V){return i.extend(yv(H,P,V),{u_image:0})},Nc=function(H,P,V,z){var j=H.transform,te=Bc(P,j);return{u_matrix:$c(H,P,V),u_texsize:P.imageAtlasTexture.size,u_ratio:1/Fl(P,1,j.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[te,z.fromScale,z.toScale],u_fade:z.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},Lp=function(H,P,V,z,j){var te=H.transform,le=H.lineAtlas,_e=Bc(P,te),ke=V.layout.get("line-cap")==="round",Be=le.getDash(z.from,ke),rt=le.getDash(z.to,ke),ut=Be.width*j.fromScale,gt=rt.width*j.toScale;return i.extend(yv(H,P,V),{u_patternscale_a:[_e/ut,-Be.height/2],u_patternscale_b:[_e/gt,-rt.height/2],u_sdfgamma:le.width/(Math.min(ut,gt)*256*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Be.y,u_tex_y_b:rt.y,u_mix:j.t})};function Bc(H,P){return 1/Fl(H,1,P.tileZoom)}function $c(H,P,V){return H.translatePosMatrix(P.tileID.posMatrix,P,V.paint.get("line-translate"),V.paint.get("line-translate-anchor"))}var Gm=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_tl_parent:new i.Uniform2f(H,P.u_tl_parent),u_scale_parent:new i.Uniform1f(H,P.u_scale_parent),u_buffer_scale:new i.Uniform1f(H,P.u_buffer_scale),u_fade_t:new i.Uniform1f(H,P.u_fade_t),u_opacity:new i.Uniform1f(H,P.u_opacity),u_image0:new i.Uniform1i(H,P.u_image0),u_image1:new i.Uniform1i(H,P.u_image1),u_brightness_low:new i.Uniform1f(H,P.u_brightness_low),u_brightness_high:new i.Uniform1f(H,P.u_brightness_high),u_saturation_factor:new i.Uniform1f(H,P.u_saturation_factor),u_contrast_factor:new i.Uniform1f(H,P.u_contrast_factor),u_spin_weights:new i.Uniform3f(H,P.u_spin_weights)}},xv=function(H,P,V,z,j){return{u_matrix:H,u_tl_parent:P,u_scale_parent:V,u_buffer_scale:1,u_fade_t:z.mix,u_opacity:z.opacity*j.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:j.paint.get("raster-brightness-min"),u_brightness_high:j.paint.get("raster-brightness-max"),u_saturation_factor:cg(j.paint.get("raster-saturation")),u_contrast_factor:md(j.paint.get("raster-contrast")),u_spin_weights:Zi(j.paint.get("raster-hue-rotate"))}};function Zi(H){H*=Math.PI/180;var P=Math.sin(H),V=Math.cos(H);return[(2*V+1)/3,(-Math.sqrt(3)*P-V+1)/3,(Math.sqrt(3)*P-V+1)/3]}function md(H){return H>0?1/(1-H):1+H}function cg(H){return H>0?1-1/(1.001-H):-H}var hg=function(H,P){return{u_is_size_zoom_constant:new i.Uniform1i(H,P.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,P.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,P.u_size_t),u_size:new i.Uniform1f(H,P.u_size),u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,P.u_pitch),u_rotate_symbol:new i.Uniform1i(H,P.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,P.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,P.u_fade_change),u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,P.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,P.u_coord_matrix),u_is_text:new i.Uniform1i(H,P.u_is_text),u_pitch_with_map:new i.Uniform1i(H,P.u_pitch_with_map),u_texsize:new i.Uniform2f(H,P.u_texsize),u_texture:new i.Uniform1i(H,P.u_texture)}},yd=function(H,P){return{u_is_size_zoom_constant:new i.Uniform1i(H,P.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,P.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,P.u_size_t),u_size:new i.Uniform1f(H,P.u_size),u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,P.u_pitch),u_rotate_symbol:new i.Uniform1i(H,P.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,P.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,P.u_fade_change),u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,P.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,P.u_coord_matrix),u_is_text:new i.Uniform1i(H,P.u_is_text),u_pitch_with_map:new i.Uniform1i(H,P.u_pitch_with_map),u_texsize:new i.Uniform2f(H,P.u_texsize),u_texture:new i.Uniform1i(H,P.u_texture),u_gamma_scale:new i.Uniform1f(H,P.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(H,P.u_is_halo)}},bv=function(H,P){return{u_is_size_zoom_constant:new i.Uniform1i(H,P.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,P.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,P.u_size_t),u_size:new i.Uniform1f(H,P.u_size),u_camera_to_center_distance:new i.Uniform1f(H,P.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,P.u_pitch),u_rotate_symbol:new i.Uniform1i(H,P.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,P.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,P.u_fade_change),u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,P.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,P.u_coord_matrix),u_is_text:new i.Uniform1i(H,P.u_is_text),u_pitch_with_map:new i.Uniform1i(H,P.u_pitch_with_map),u_texsize:new i.Uniform2f(H,P.u_texsize),u_texsize_icon:new i.Uniform2f(H,P.u_texsize_icon),u_texture:new i.Uniform1i(H,P.u_texture),u_texture_icon:new i.Uniform1i(H,P.u_texture_icon),u_gamma_scale:new i.Uniform1f(H,P.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(H,P.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(H,P.u_is_halo)}},Uc=function(H,P,V,z,j,te,le,_e,ke,Be){var rt=j.transform;return{u_is_size_zoom_constant:+(H==="constant"||H==="source"),u_is_size_feature_constant:+(H==="constant"||H==="camera"),u_size_t:P?P.uSizeT:0,u_size:P?P.uSize:0,u_camera_to_center_distance:rt.cameraToCenterDistance,u_pitch:rt.pitch/360*2*Math.PI,u_rotate_symbol:+V,u_aspect_ratio:rt.width/rt.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:le,u_coord_matrix:_e,u_is_text:+ke,u_pitch_with_map:+z,u_texsize:Be,u_texture:0}},Pp=function(H,P,V,z,j,te,le,_e,ke,Be,rt){var ut=j.transform;return i.extend(Uc(H,P,V,z,j,te,le,_e,ke,Be),{u_gamma_scale:z?Math.cos(ut._pitch)*ut.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+rt})},Vm=function(H,P,V,z,j,te,le,_e,ke,Be){return i.extend(Pp(H,P,V,z,j,te,le,_e,!0,ke,!0),{u_texsize_icon:Be,u_texture_icon:1})},vg=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_opacity:new i.Uniform1f(H,P.u_opacity),u_color:new i.UniformColor(H,P.u_color)}},bl=function(H,P){return{u_matrix:new i.UniformMatrix4f(H,P.u_matrix),u_opacity:new i.Uniform1f(H,P.u_opacity),u_image:new i.Uniform1i(H,P.u_image),u_pattern_tl_a:new i.Uniform2f(H,P.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(H,P.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(H,P.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(H,P.u_pattern_br_b),u_texsize:new i.Uniform2f(H,P.u_texsize),u_mix:new i.Uniform1f(H,P.u_mix),u_pattern_size_a:new i.Uniform2f(H,P.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(H,P.u_pattern_size_b),u_scale_a:new i.Uniform1f(H,P.u_scale_a),u_scale_b:new i.Uniform1f(H,P.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(H,P.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,P.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(H,P.u_tile_units_to_pixels)}},xd=function(H,P,V){return{u_matrix:H,u_opacity:P,u_color:V}},bd=function(H,P,V,z,j,te){return i.extend(Yf(z,te,V,j),{u_matrix:H,u_opacity:P})},Hc={fillExtrusion:Ls,fillExtrusionPattern:Ep,fill:Dc,fillPattern:Xf,fillOutline:bu,fillOutlinePattern:Rc,circle:vd,collisionBox:mf,collisionCircle:dd,debug:$m,clippingMask:ng,heatmap:Um,heatmapTexture:Fc,hillshade:Cp,hillshadePrepare:sg,line:Jl,lineGradient:Oc,linePattern:ug,lineSDF:fg,raster:Gm,symbolIcon:hg,symbolSDF:yd,symbolTextAndIcon:bv,background:vg,backgroundPattern:bl},wu;function dg(H,P,V,z,j,te,le){for(var _e=H.context,ke=_e.gl,Be=H.useProgram("collisionBox"),rt=[],ut=0,gt=0,me=0;me<z.length;me++){var Fe=z[me],He=P.getTile(Fe),et=He.getBucket(V);if(!!et){var ht=Fe.posMatrix;(j[0]!==0||j[1]!==0)&&(ht=H.translatePosMatrix(Fe.posMatrix,He,j,te));var ct=le?et.textCollisionBox:et.iconCollisionBox,At=et.collisionCircleArray;if(At.length>0){var Bt=i.create(),Yt=ht;i.mul(Bt,et.placementInvProjMatrix,H.transform.glCoordMatrix),i.mul(Bt,Bt,et.placementViewportMatrix),rt.push({circleArray:At,circleOffset:gt,transform:Yt,invTransform:Bt}),ut+=At.length/4,gt=ut}!ct||Be.draw(_e,ke.LINES,jr.disabled,ia.disabled,H.colorModeForRenderPass(),lt.disabled,pd(ht,H.transform,He),V.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,H.transform.zoom,null,null,ct.collisionVertexBuffer)}}if(!(!le||!rt.length)){var Qt=H.useProgram("collisionCircle"),er=new i.StructArrayLayout2f1f2i16;er.resize(ut*4),er._trim();for(var ir=0,mr=0,or=rt;mr<or.length;mr+=1)for(var dr=or[mr],Rt=0;Rt<dr.circleArray.length/4;Rt++){var tr=Rt*4,Lr=dr.circleArray[tr+0],ra=dr.circleArray[tr+1],Mr=dr.circleArray[tr+2],Jr=dr.circleArray[tr+3];er.emplace(ir++,Lr,ra,Mr,Jr,0),er.emplace(ir++,Lr,ra,Mr,Jr,1),er.emplace(ir++,Lr,ra,Mr,Jr,2),er.emplace(ir++,Lr,ra,Mr,Jr,3)}(!wu||wu.length<ut*2)&&(wu=_d(ut));for(var Dr=_e.createIndexBuffer(wu,!0),ga=_e.createVertexBuffer(er,i.collisionCircleLayout.members,!0),Pr=0,Cr=rt;Pr<Cr.length;Pr+=1){var oa=Cr[Pr],ta=mv(oa.transform,oa.invTransform,H.transform);Qt.draw(_e,ke.TRIANGLES,jr.disabled,ia.disabled,H.colorModeForRenderPass(),lt.disabled,ta,V.id,ga,Dr,i.SegmentVector.simpleSegment(0,oa.circleOffset*2,oa.circleArray.length,oa.circleArray.length/2),null,H.transform.zoom,null,null,null)}ga.destroy(),Dr.destroy()}}function _d(H){var P=H*2,V=new i.StructArrayLayout3ui6;V.resize(P),V._trim();for(var z=0;z<P;z++){var j=z*6;V.uint16[j+0]=z*4+0,V.uint16[j+1]=z*4+1,V.uint16[j+2]=z*4+2,V.uint16[j+3]=z*4+2,V.uint16[j+4]=z*4+3,V.uint16[j+5]=z*4+0}return V}var O1=i.identity(new Float32Array(16));function Tu(H,P,V,z,j){if(H.renderPass==="translucent"){var te=ia.disabled,le=H.colorModeForRenderPass(),_e=V.layout.get("text-variable-anchor");_e&&jm(z,H,V,P,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),j),V.paint.get("icon-opacity").constantOr(1)!==0&&Ip(H,P,V,z,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),te,le),V.paint.get("text-opacity").constantOr(1)!==0&&Ip(H,P,V,z,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),te,le),P.map.showCollisionBoxes&&(dg(H,P,V,z,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),!0),dg(H,P,V,z,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),!1))}}function pg(H,P,V,z,j,te){var le=i.getAnchorAlignment(H),_e=le.horizontalAlign,ke=le.verticalAlign,Be=-(_e-.5)*P,rt=-(ke-.5)*V,ut=i.evaluateVariableOffset(H,z);return new i.Point((Be/j+ut[0])*te,(rt/j+ut[1])*te)}function jm(H,P,V,z,j,te,le){for(var _e=P.transform,ke=j==="map",Be=te==="map",rt=0,ut=H;rt<ut.length;rt+=1){var gt=ut[rt],me=z.getTile(gt),Fe=me.getBucket(V);if(!(!Fe||!Fe.text||!Fe.text.segments.get().length)){var He=Fe.textSizeData,et=i.evaluateSizeForZoom(He,_e.zoom),ht=Fl(me,1,P.transform.zoom),ct=nl(gt.posMatrix,Be,ke,P.transform,ht),At=V.layout.get("icon-text-fit")!=="none"&&Fe.hasIconData();if(et){var Bt=Math.pow(2,_e.zoom-me.tileID.overscaledZ);Au(Fe,ke,Be,le,i.symbolSize,_e,ct,gt.posMatrix,Bt,et,At)}}}}function Au(H,P,V,z,j,te,le,_e,ke,Be,rt){var ut=H.text.placedSymbolArray,gt=H.text.dynamicLayoutVertexArray,me=H.icon.dynamicLayoutVertexArray,Fe={};gt.clear();for(var He=0;He<ut.length;He++){var et=ut.get(He),ht=H.allowVerticalPlacement&&!et.placedOrientation,ct=!et.hidden&&et.crossTileID&&!ht?z[et.crossTileID]:null;if(!ct)Ch(et.numGlyphs,gt);else{var At=new i.Point(et.anchorX,et.anchorY),Bt=wo(At,V?_e:le),Yt=Eh(te.cameraToCenterDistance,Bt.signedDistanceFromCamera),Qt=j.evaluateSizeForFeature(H.textSizeData,Be,et)*Yt/i.ONE_EM;V&&(Qt*=H.tilePixelRatio/ke);for(var er=ct.width,ir=ct.height,mr=ct.anchor,or=ct.textOffset,dr=ct.textBoxScale,Rt=pg(mr,er,ir,or,dr,Qt),tr=V?wo(At.add(Rt),le).point:Bt.point.add(P?Rt.rotate(-te.angle):Rt),Lr=H.allowVerticalPlacement&&et.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,ra=0;ra<et.numGlyphs;ra++)i.addDynamicAttributes(gt,tr,Lr);rt&&et.associatedIconIndex>=0&&(Fe[et.associatedIconIndex]={shiftedAnchor:tr,angle:Lr})}}if(rt){me.clear();for(var Mr=H.icon.placedSymbolArray,Jr=0;Jr<Mr.length;Jr++){var Dr=Mr.get(Jr);if(Dr.hidden)Ch(Dr.numGlyphs,me);else{var ga=Fe[Jr];if(!ga)Ch(Dr.numGlyphs,me);else for(var Pr=0;Pr<Dr.numGlyphs;Pr++)i.addDynamicAttributes(me,ga.shiftedAnchor,ga.angle)}}H.icon.dynamicLayoutVertexBuffer.updateData(me)}H.text.dynamicLayoutVertexBuffer.updateData(gt)}function wd(H,P,V){return V.iconsInText&&P?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function Ip(H,P,V,z,j,te,le,_e,ke,Be,rt,ut){for(var gt=H.context,me=gt.gl,Fe=H.transform,He=_e==="map",et=ke==="map",ht=He&&V.layout.get("symbol-placement")!=="point",ct=He&&!et&&!ht,At=V.layout.get("symbol-sort-key").constantOr(1)!==void 0,Bt=H.depthModeForSublayer(0,jr.ReadOnly),Yt=V.layout.get("text-variable-anchor"),Qt=[],er=0,ir=z;er<ir.length;er+=1){var mr=ir[er],or=P.getTile(mr),dr=or.getBucket(V);if(!!dr){var Rt=j?dr.text:dr.icon;if(!(!Rt||!Rt.segments.get().length)){var tr=Rt.programConfigurations.get(V.id),Lr=j||dr.sdfIcons,ra=j?dr.textSizeData:dr.iconSizeData,Mr=et||Fe.pitch!==0,Jr=H.useProgram(wd(Lr,j,dr),tr),Dr=i.evaluateSizeForZoom(ra,Fe.zoom),ga=void 0,Pr=[0,0],Cr=void 0,oa=void 0,ta=null,Ir=void 0;if(j){if(Cr=or.glyphAtlasTexture,oa=me.LINEAR,ga=or.glyphAtlasTexture.size,dr.iconsInText){Pr=or.imageAtlasTexture.size,ta=or.imageAtlasTexture;var Wr=ra.kind==="composite"||ra.kind==="camera";Ir=Mr||H.options.rotating||H.options.zooming||Wr?me.LINEAR:me.NEAREST}}else{var ua=V.layout.get("icon-size").constantOr(0)!==1||dr.iconsNeedLinear;Cr=or.imageAtlasTexture,oa=Lr||H.options.rotating||H.options.zooming||ua||Mr?me.LINEAR:me.NEAREST,ga=or.imageAtlasTexture.size}var Ja=Fl(or,1,H.transform.zoom),nn=nl(mr.posMatrix,et,He,H.transform,Ja),ma=kh(mr.posMatrix,et,He,H.transform,Ja),Aa=Yt&&dr.hasTextData(),an=V.layout.get("icon-text-fit")!=="none"&&Aa&&dr.hasIconData();ht&&uv(dr,mr.posMatrix,H,j,nn,ma,et,Be);var pn=H.translatePosMatrix(mr.posMatrix,or,te,le),Pn=ht||j&&Yt||an?O1:nn,oi=H.translatePosMatrix(ma,or,te,le,!0),Vi=Lr&&V.paint.get(j?"text-halo-width":"icon-halo-width").constantOr(1)!==0,bn=void 0;Lr?dr.iconsInText?bn=Vm(ra.kind,Dr,ct,et,H,pn,Pn,oi,ga,Pr):bn=Pp(ra.kind,Dr,ct,et,H,pn,Pn,oi,j,ga,!0):bn=Uc(ra.kind,Dr,ct,et,H,pn,Pn,oi,j,ga);var Ni={program:Jr,buffers:Rt,uniformValues:bn,atlasTexture:Cr,atlasTextureIcon:ta,atlasInterpolation:oa,atlasInterpolationIcon:Ir,isSDF:Lr,hasHalo:Vi};if(At)for(var gi=Rt.segments.get(),ji=0,eo=gi;ji<eo.length;ji+=1){var Xo=eo[ji];Qt.push({segments:new i.SegmentVector([Xo]),sortKey:Xo.sortKey,state:Ni})}else Qt.push({segments:Rt.segments,sortKey:0,state:Ni})}}}At&&Qt.sort(function(fi,sn){return fi.sortKey-sn.sortKey});for(var Vo=0,ki=Qt;Vo<ki.length;Vo+=1){var So=ki[Vo],fn=So.state;if(gt.activeTexture.set(me.TEXTURE0),fn.atlasTexture.bind(fn.atlasInterpolation,me.CLAMP_TO_EDGE),fn.atlasTextureIcon&&(gt.activeTexture.set(me.TEXTURE1),fn.atlasTextureIcon&&fn.atlasTextureIcon.bind(fn.atlasInterpolationIcon,me.CLAMP_TO_EDGE)),fn.isSDF){var xs=fn.uniformValues;fn.hasHalo&&(xs.u_is_halo=1,ol(fn.buffers,So.segments,V,H,fn.program,Bt,rt,ut,xs)),xs.u_is_halo=0}ol(fn.buffers,So.segments,V,H,fn.program,Bt,rt,ut,fn.uniformValues)}}function ol(H,P,V,z,j,te,le,_e,ke){var Be=z.context,rt=Be.gl;j.draw(Be,rt.TRIANGLES,te,le,_e,lt.disabled,ke,V.id,H.layoutVertexBuffer,H.indexBuffer,P,V.paint,z.transform.zoom,H.programConfigurations.get(V.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function Dh(H,P,V,z){if(H.renderPass==="translucent"){var j=V.paint.get("circle-opacity"),te=V.paint.get("circle-stroke-width"),le=V.paint.get("circle-stroke-opacity"),_e=V.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(j.constantOr(1)===0&&(te.constantOr(1)===0||le.constantOr(1)===0))){for(var ke=H.context,Be=ke.gl,rt=H.depthModeForSublayer(0,jr.ReadOnly),ut=ia.disabled,gt=H.colorModeForRenderPass(),me=[],Fe=0;Fe<z.length;Fe++){var He=z[Fe],et=P.getTile(He),ht=et.getBucket(V);if(!!ht){var ct=ht.programConfigurations.get(V.id),At=H.useProgram("circle",ct),Bt=ht.layoutVertexBuffer,Yt=ht.indexBuffer,Qt=Bm(H,He,et,V),er={programConfiguration:ct,program:At,layoutVertexBuffer:Bt,indexBuffer:Yt,uniformValues:Qt};if(_e)for(var ir=ht.segments.get(),mr=0,or=ir;mr<or.length;mr+=1){var dr=or[mr];me.push({segments:new i.SegmentVector([dr]),sortKey:dr.sortKey,state:er})}else me.push({segments:ht.segments,sortKey:0,state:er})}}_e&&me.sort(function(oa,ta){return oa.sortKey-ta.sortKey});for(var Rt=0,tr=me;Rt<tr.length;Rt+=1){var Lr=tr[Rt],ra=Lr.state,Mr=ra.programConfiguration,Jr=ra.program,Dr=ra.layoutVertexBuffer,ga=ra.indexBuffer,Pr=ra.uniformValues,Cr=Lr.segments;Jr.draw(ke,Be.TRIANGLES,rt,ut,gt,lt.disabled,Pr,V.id,Dr,ga,Cr,V.paint,H.transform.zoom,Mr)}}}}function gg(H,P,V,z){if(V.paint.get("heatmap-opacity")!==0)if(H.renderPass==="offscreen"){var j=H.context,te=j.gl,le=ia.disabled,_e=new Pe([te.ONE,te.ONE],i.Color.transparent,[!0,!0,!0,!0]);Gc(j,H,V),j.clear({color:i.Color.transparent});for(var ke=0;ke<z.length;ke++){var Be=z[ke];if(!P.hasRenderableParent(Be)){var rt=P.getTile(Be),ut=rt.getBucket(V);if(!!ut){var gt=ut.programConfigurations.get(V.id),me=H.useProgram("heatmap",gt),Fe=H.transform,He=Fe.zoom;me.draw(j,te.TRIANGLES,jr.disabled,le,_e,lt.disabled,og(Be.posMatrix,rt,He,V.paint.get("heatmap-intensity")),V.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,V.paint,H.transform.zoom,gt)}}}j.viewport.set([0,0,H.width,H.height])}else H.renderPass==="translucent"&&(H.context.setColorMode(H.colorModeForRenderPass()),Td(H,V))}function Gc(H,P,V){var z=H.gl;H.activeTexture.set(z.TEXTURE1),H.viewport.set([0,0,P.width/4,P.height/4]);var j=V.heatmapFbo;if(j)z.bindTexture(z.TEXTURE_2D,j.colorAttachment.get()),H.bindFramebuffer.set(j.framebuffer);else{var te=z.createTexture();z.bindTexture(z.TEXTURE_2D,te),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),j=V.heatmapFbo=H.createFramebuffer(P.width/4,P.height/4,!1),_v(H,P,te,j)}}function _v(H,P,V,z){var j=H.gl,te=H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:j.UNSIGNED_BYTE;j.texImage2D(j.TEXTURE_2D,0,j.RGBA,P.width/4,P.height/4,0,j.RGBA,te,null),z.colorAttachment.set(V)}function Td(H,P){var V=H.context,z=V.gl,j=P.heatmapFbo;if(!!j){V.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,j.colorAttachment.get()),V.activeTexture.set(z.TEXTURE1);var te=P.colorRampTexture;te||(te=P.colorRampTexture=new i.Texture(V,P.colorRamp,z.RGBA)),te.bind(z.LINEAR,z.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(V,z.TRIANGLES,jr.disabled,ia.disabled,H.colorModeForRenderPass(),lt.disabled,_u(H,P,0,1),P.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,P.paint,H.transform.zoom)}}function N1(H,P,V,z){if(H.renderPass==="translucent"){var j=V.paint.get("line-opacity"),te=V.paint.get("line-width");if(!(j.constantOr(1)===0||te.constantOr(1)===0)){var le=H.depthModeForSublayer(0,jr.ReadOnly),_e=H.colorModeForRenderPass(),ke=V.paint.get("line-dasharray"),Be=V.paint.get("line-pattern"),rt=Be.constantOr(1),ut=V.paint.get("line-gradient"),gt=V.getCrossfadeParameters(),me=rt?"linePattern":ke?"lineSDF":ut?"lineGradient":"line",Fe=H.context,He=Fe.gl,et=!0;if(ut){Fe.activeTexture.set(He.TEXTURE0);var ht=V.gradientTexture;if(!V.gradient)return;ht||(ht=V.gradientTexture=new i.Texture(Fe,V.gradient,He.RGBA)),ht.bind(He.LINEAR,He.CLAMP_TO_EDGE)}for(var ct=0,At=z;ct<At.length;ct+=1){var Bt=At[ct],Yt=P.getTile(Bt);if(!(rt&&!Yt.patternsLoaded())){var Qt=Yt.getBucket(V);if(!!Qt){var er=Qt.programConfigurations.get(V.id),ir=H.context.program.get(),mr=H.useProgram(me,er),or=et||mr.program!==ir,dr=Be.constantOr(null);if(dr&&Yt.imageAtlas){var Rt=Yt.imageAtlas,tr=Rt.patternPositions[dr.to.toString()],Lr=Rt.patternPositions[dr.from.toString()];tr&&Lr&&er.setConstantPatternPositions(tr,Lr)}var ra=rt?Nc(H,Yt,V,gt):ke?Lp(H,Yt,V,ke,gt):ut?Hm(H,Yt,V):yv(H,Yt,V);rt?(Fe.activeTexture.set(He.TEXTURE0),Yt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),er.updatePaintBuffers(gt)):ke&&(or||H.lineAtlas.dirty)&&(Fe.activeTexture.set(He.TEXTURE0),H.lineAtlas.bind(Fe)),mr.draw(Fe,He.TRIANGLES,le,H.stencilModeForClipping(Bt),_e,lt.disabled,ra,V.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,V.paint,H.transform.zoom,er),et=!1}}}}}}function Dp(H,P,V,z){var j=V.paint.get("fill-color"),te=V.paint.get("fill-opacity");if(te.constantOr(1)!==0){var le=H.colorModeForRenderPass(),_e=V.paint.get("fill-pattern"),ke=H.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&j.constantOr(i.Color.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(H.renderPass===ke){var Be=H.depthModeForSublayer(1,H.renderPass==="opaque"?jr.ReadWrite:jr.ReadOnly);wv(H,P,V,z,Be,le,!1)}if(H.renderPass==="translucent"&&V.paint.get("fill-antialias")){var rt=H.depthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,jr.ReadOnly);wv(H,P,V,z,rt,le,!0)}}}function wv(H,P,V,z,j,te,le){var _e=H.context.gl,ke=V.paint.get("fill-pattern"),Be=ke&&ke.constantOr(1),rt=V.getCrossfadeParameters(),ut,gt,me,Fe,He;le?(gt=Be&&!V.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=_e.LINES):(gt=Be?"fillPattern":"fill",ut=_e.TRIANGLES);for(var et=0,ht=z;et<ht.length;et+=1){var ct=ht[et],At=P.getTile(ct);if(!(Be&&!At.patternsLoaded())){var Bt=At.getBucket(V);if(!!Bt){var Yt=Bt.programConfigurations.get(V.id),Qt=H.useProgram(gt,Yt);Be&&(H.context.activeTexture.set(_e.TEXTURE0),At.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),Yt.updatePaintBuffers(rt));var er=ke.constantOr(null);if(er&&At.imageAtlas){var ir=At.imageAtlas,mr=ir.patternPositions[er.to.toString()],or=ir.patternPositions[er.from.toString()];mr&&or&&Yt.setConstantPatternPositions(mr,or)}var dr=H.translatePosMatrix(ct.posMatrix,At,V.paint.get("fill-translate"),V.paint.get("fill-translate-anchor"));if(!le)Fe=Bt.indexBuffer,He=Bt.segments,me=Be?gf(dr,H,rt,At):zc(dr);else{Fe=Bt.indexBuffer2,He=Bt.segments2;var Rt=[_e.drawingBufferWidth,_e.drawingBufferHeight];me=gt==="fillOutlinePattern"&&Be?F1(dr,H,rt,At,Rt):ag(dr,Rt)}Qt.draw(H.context,ut,j,H.stencilModeForClipping(ct),te,lt.disabled,me,V.id,Bt.layoutVertexBuffer,Fe,He,V.paint,H.transform.zoom,Yt)}}}}function mg(H,P,V,z){var j=V.paint.get("fill-extrusion-opacity");if(j!==0&&H.renderPass==="translucent"){var te=new jr(H.context.gl.LEQUAL,jr.ReadWrite,H.depthRangeFor3D);if(j===1&&!V.paint.get("fill-extrusion-pattern").constantOr(1)){var le=H.colorModeForRenderPass();xf(H,P,V,z,te,ia.disabled,le)}else xf(H,P,V,z,te,ia.disabled,Pe.disabled),xf(H,P,V,z,te,H.stencilModeFor3D(),H.colorModeForRenderPass())}}function xf(H,P,V,z,j,te,le){for(var _e=H.context,ke=_e.gl,Be=V.paint.get("fill-extrusion-pattern"),rt=Be.constantOr(1),ut=V.getCrossfadeParameters(),gt=V.paint.get("fill-extrusion-opacity"),me=0,Fe=z;me<Fe.length;me+=1){var He=Fe[me],et=P.getTile(He),ht=et.getBucket(V);if(!!ht){var ct=ht.programConfigurations.get(V.id),At=H.useProgram(rt?"fillExtrusionPattern":"fillExtrusion",ct);rt&&(H.context.activeTexture.set(ke.TEXTURE0),et.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),ct.updatePaintBuffers(ut));var Bt=Be.constantOr(null);if(Bt&&et.imageAtlas){var Yt=et.imageAtlas,Qt=Yt.patternPositions[Bt.to.toString()],er=Yt.patternPositions[Bt.from.toString()];Qt&&er&&ct.setConstantPatternPositions(Qt,er)}var ir=H.translatePosMatrix(He.posMatrix,et,V.paint.get("fill-extrusion-translate"),V.paint.get("fill-extrusion-translate-anchor")),mr=V.paint.get("fill-extrusion-vertical-gradient"),or=rt?Wf(ir,H,mr,gt,He,ut,et):Uu(ir,H,mr,gt);At.draw(_e,_e.gl.TRIANGLES,j,te,le,lt.backCCW,or,V.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,V.paint,H.transform.zoom,ct)}}}function Rp(H,P,V,z){if(!(H.renderPass!=="offscreen"&&H.renderPass!=="translucent")){for(var j=H.context,te=P.getSource().maxzoom,le=H.depthModeForSublayer(0,jr.ReadOnly),_e=H.colorModeForRenderPass(),ke=H.renderPass==="translucent"?H.stencilConfigForOverlap(z):[{},z],Be=ke[0],rt=ke[1],ut=0,gt=rt;ut<gt.length;ut+=1){var me=gt[ut],Fe=P.getTile(me);Fe.needsHillshadePrepare&&H.renderPass==="offscreen"?zh(H,Fe,V,te,le,ia.disabled,_e):H.renderPass==="translucent"&&Rh(H,Fe,V,le,Be[me.overscaledZ],_e)}j.viewport.set([0,0,H.width,H.height])}}function Rh(H,P,V,z,j,te){var le=H.context,_e=le.gl,ke=P.fbo;if(!!ke){var Be=H.useProgram("hillshade");le.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,ke.colorAttachment.get());var rt=yf(H,P,V);Be.draw(le,_e.TRIANGLES,z,j,te,lt.disabled,rt,V.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function zh(H,P,V,z,j,te,le){var _e=H.context,ke=_e.gl,Be=P.dem;if(Be&&Be.data){var rt=Be.dim,ut=Be.stride,gt=Be.getPixels();if(_e.activeTexture.set(ke.TEXTURE1),_e.pixelStoreUnpackPremultiplyAlpha.set(!1),P.demTexture=P.demTexture||H.getTileTexture(ut),P.demTexture){var me=P.demTexture;me.update(gt,{premultiply:!1}),me.bind(ke.NEAREST,ke.CLAMP_TO_EDGE)}else P.demTexture=new i.Texture(_e,gt,ke.RGBA,{premultiply:!1}),P.demTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE);_e.activeTexture.set(ke.TEXTURE0);var Fe=P.fbo;if(!Fe){var He=new i.Texture(_e,{width:rt,height:rt,data:null},ke.RGBA);He.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),Fe=P.fbo=_e.createFramebuffer(rt,rt,!0),Fe.colorAttachment.set(He.texture)}_e.bindFramebuffer.set(Fe.framebuffer),_e.viewport.set([0,0,rt,rt]),H.useProgram("hillshadePrepare").draw(_e,ke.TRIANGLES,j,te,le,lt.disabled,lg(P.tileID,Be,z),V.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),P.needsHillshadePrepare=!1}}function yg(H,P,V,z){if(H.renderPass==="translucent"&&V.paint.get("raster-opacity")!==0&&!!z.length)for(var j=H.context,te=j.gl,le=P.getSource(),_e=H.useProgram("raster"),ke=H.colorModeForRenderPass(),Be=le instanceof ie?[{},z]:H.stencilConfigForOverlap(z),rt=Be[0],ut=Be[1],gt=ut[ut.length-1].overscaledZ,me=!H.options.moving,Fe=0,He=ut;Fe<He.length;Fe+=1){var et=He[Fe],ht=H.depthModeForSublayer(et.overscaledZ-gt,V.paint.get("raster-opacity")===1?jr.ReadWrite:jr.ReadOnly,te.LESS),ct=P.getTile(et),At=H.transform.calculatePosMatrix(et.toUnwrapped(),me);ct.registerFadeDuration(V.paint.get("raster-fade-duration"));var Bt=P.findLoadedParent(et,0),Yt=Zf(ct,Bt,P,V,H.transform),Qt=void 0,er=void 0,ir=V.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;j.activeTexture.set(te.TEXTURE0),ct.texture.bind(ir,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(te.TEXTURE1),Bt?(Bt.texture.bind(ir,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),Qt=Math.pow(2,Bt.tileID.overscaledZ-ct.tileID.overscaledZ),er=[ct.tileID.canonical.x*Qt%1,ct.tileID.canonical.y*Qt%1]):ct.texture.bind(ir,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);var mr=xv(At,er||[0,0],Qt||1,Yt,V);le instanceof ie?_e.draw(j,te.TRIANGLES,ht,ia.disabled,ke,lt.disabled,mr,V.id,le.boundsBuffer,H.quadTriangleIndexBuffer,le.boundsSegments):_e.draw(j,te.TRIANGLES,ht,rt[et.overscaledZ],ke,lt.disabled,mr,V.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Zf(H,P,V,z,j){var te=z.paint.get("raster-fade-duration");if(te>0){var le=i.browser.now(),_e=(le-H.timeAdded)/te,ke=P?(le-P.timeAdded)/te:-1,Be=V.getSource(),rt=j.coveringZoomLevel({tileSize:Be.tileSize,roundZoom:Be.roundZoom}),ut=!P||Math.abs(P.tileID.overscaledZ-rt)>Math.abs(H.tileID.overscaledZ-rt),gt=ut&&H.refreshedUponExpiration?1:i.clamp(ut?_e:1-ke,0,1);return H.refreshedUponExpiration&&_e>=1&&(H.refreshedUponExpiration=!1),P?{opacity:1,mix:1-gt}:{opacity:gt,mix:0}}else return{opacity:1,mix:0}}function zp(H,P,V){var z=V.paint.get("background-color"),j=V.paint.get("background-opacity");if(j!==0){var te=H.context,le=te.gl,_e=H.transform,ke=_e.tileSize,Be=V.paint.get("background-pattern");if(!H.isPatternMissing(Be)){var rt=!Be&&z.a===1&&j===1&&H.opaquePassEnabledForLayer()?"opaque":"translucent";if(H.renderPass===rt){var ut=ia.disabled,gt=H.depthModeForSublayer(0,rt==="opaque"?jr.ReadWrite:jr.ReadOnly),me=H.colorModeForRenderPass(),Fe=H.useProgram(Be?"backgroundPattern":"background"),He=_e.coveringTiles({tileSize:ke});Be&&(te.activeTexture.set(le.TEXTURE0),H.imageManager.bind(H.context));for(var et=V.getCrossfadeParameters(),ht=0,ct=He;ht<ct.length;ht+=1){var At=ct[ht],Bt=H.transform.calculatePosMatrix(At.toUnwrapped()),Yt=Be?bd(Bt,j,H,Be,{tileID:At,tileSize:ke},et):xd(Bt,j,z);Fe.draw(te,le.TRIANGLES,gt,ut,me,lt.disabled,Yt,V.id,H.tileExtentBuffer,H.quadTriangleIndexBuffer,H.tileExtentSegments)}}}}}var Fh=new i.Color(1,0,0,1),Ad=new i.Color(0,1,0,1),Sd=new i.Color(0,0,1,1),Oh=new i.Color(1,0,1,1),Md=new i.Color(0,1,1,1);function Hu(H){var P=H.transform.padding,V=3;Vc(H,H.transform.height-(P.top||0),V,Fh),Vc(H,P.bottom||0,V,Ad),Uo(H,P.left||0,V,Sd),Uo(H,H.transform.width-(P.right||0),V,Oh);var z=H.transform.centerPoint;Tv(H,z.x,H.transform.height-z.y,Md)}function Tv(H,P,V,z){var j=20,te=2;Nh(H,P-te/2,V-j/2,te,j,z),Nh(H,P-j/2,V-te/2,j,te,z)}function Vc(H,P,V,z){Nh(H,0,P+V/2,H.transform.width,V,z)}function Uo(H,P,V,z){Nh(H,P-V/2,0,V,H.transform.height,z)}function Nh(H,P,V,z,j,te){var le=H.context,_e=le.gl;_e.enable(_e.SCISSOR_TEST),_e.scissor(P*i.browser.devicePixelRatio,V*i.browser.devicePixelRatio,z*i.browser.devicePixelRatio,j*i.browser.devicePixelRatio),le.clear({color:te}),_e.disable(_e.SCISSOR_TEST)}function jc(H,P,V){for(var z=0;z<V.length;z++)kd(H,P,V[z])}function kd(H,P,V){var z=H.context,j=z.gl,te=V.posMatrix,le=H.useProgram("debug"),_e=jr.disabled,ke=ia.disabled,Be=H.colorModeForRenderPass(),rt="$debug";z.activeTexture.set(j.TEXTURE0),H.emptyTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),le.draw(z,j.LINE_STRIP,_e,ke,Be,lt.disabled,gd(te,i.Color.red),rt,H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments);var ut=P.getTileByID(V.key).latestRawTileData,gt=ut&&ut.byteLength||0,me=Math.floor(gt/1024),Fe=P.getTile(V).tileSize,He=512/Math.min(Fe,512)*(V.overscaledZ/H.transform.zoom)*.5,et=V.canonical.toString();V.overscaledZ!==V.canonical.z&&(et+=" => "+V.overscaledZ);var ht=et+" "+me+"kb";Av(H,ht),le.draw(z,j.TRIANGLES,_e,ke,Pe.alphaBlended,lt.disabled,gd(te,i.Color.transparent,He),rt,H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments)}function Av(H,P){H.initDebugOverlayCanvas();var V=H.debugOverlayCanvas,z=H.context.gl,j=H.debugOverlayCanvas.getContext("2d");j.clearRect(0,0,V.width,V.height),j.shadowColor="white",j.shadowBlur=2,j.lineWidth=1.5,j.strokeStyle="white",j.textBaseline="top",j.font="bold "+36+"px Open Sans, sans-serif",j.fillText(P,5,5),j.strokeText(P,5,5),H.debugOverlayTexture.update(V),H.debugOverlayTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE)}function Ql(H,P,V){var z=H.context,j=V.implementation;if(H.renderPass==="offscreen"){var te=j.prerender;te&&(H.setCustomLayerDefaults(),z.setColorMode(H.colorModeForRenderPass()),te.call(j,z.gl,H.transform.customLayerMatrix()),z.setDirty(),H.setBaseState())}else if(H.renderPass==="translucent"){H.setCustomLayerDefaults(),z.setColorMode(H.colorModeForRenderPass()),z.setStencilMode(ia.disabled);var le=j.renderingMode==="3d"?new jr(H.context.gl.LEQUAL,jr.ReadWrite,H.depthRangeFor3D):H.depthModeForSublayer(0,jr.ReadOnly);z.setDepthMode(le),j.render(z.gl,H.transform.customLayerMatrix()),z.setDirty(),H.setBaseState(),z.bindFramebuffer.set(null)}}var Ed={symbol:Tu,circle:Dh,heatmap:gg,line:N1,fill:Dp,"fill-extrusion":mg,hillshade:Rp,raster:yg,background:zp,debug:jc,custom:Ql},hi=function(P,V){this.context=new wt(P),this.transform=V,this._tileTextures={},this.setup(),this.numSublayers=Mt.maxUnderzooming+Mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mu,this.gpuTimers={}};hi.prototype.resize=function(P,V){if(this.width=P*i.browser.devicePixelRatio,this.height=V*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var z=0,j=this.style._order;z<j.length;z+=1){var te=j[z];this.style._layers[te].resize()}},hi.prototype.setup=function(){var P=this.context,V=new i.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(i.EXTENT,0),V.emplaceBack(0,i.EXTENT),V.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=P.createVertexBuffer(V,uf.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var z=new i.StructArrayLayout2i4;z.emplaceBack(0,0),z.emplaceBack(i.EXTENT,0),z.emplaceBack(0,i.EXTENT),z.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=P.createVertexBuffer(z,uf.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var j=new i.StructArrayLayout4i8;j.emplaceBack(0,0,0,0),j.emplaceBack(i.EXTENT,0,i.EXTENT,0),j.emplaceBack(0,i.EXTENT,0,i.EXTENT),j.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=P.createVertexBuffer(j,ae.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var te=new i.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(1,0),te.emplaceBack(0,1),te.emplaceBack(1,1),this.viewportBuffer=P.createVertexBuffer(te,uf.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var le=new i.StructArrayLayout1ui2;le.emplaceBack(0),le.emplaceBack(1),le.emplaceBack(3),le.emplaceBack(2),le.emplaceBack(0),this.tileBorderIndexBuffer=P.createIndexBuffer(le);var _e=new i.StructArrayLayout3ui6;_e.emplaceBack(0,1,2),_e.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=P.createIndexBuffer(_e),this.emptyTexture=new i.Texture(P,{width:1,height:1,data:new Uint8Array([0,0,0,0])},P.gl.RGBA);var ke=this.context.gl;this.stencilClearMode=new ia({func:ke.ALWAYS,mask:0},0,255,ke.ZERO,ke.ZERO,ke.ZERO)},hi.prototype.clearStencil=function(){var P=this.context,V=P.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var z=i.create();i.ortho(z,0,this.width,this.height,0,0,1),i.scale(z,z,[V.drawingBufferWidth,V.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(P,V.TRIANGLES,jr.disabled,this.stencilClearMode,Pe.disabled,lt.disabled,ig(z),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},hi.prototype._renderTileClippingMasks=function(P,V){if(!(this.currentStencilSource===P.source||!P.isTileClipped()||!V||!V.length)){this.currentStencilSource=P.source;var z=this.context,j=z.gl;this.nextStencilID+V.length>256&&this.clearStencil(),z.setColorMode(Pe.disabled),z.setDepthMode(jr.disabled);var te=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var le=0,_e=V;le<_e.length;le+=1){var ke=_e[le],Be=this._tileClippingMaskIDs[ke.key]=this.nextStencilID++;te.draw(z,j.TRIANGLES,jr.disabled,new ia({func:j.ALWAYS,mask:0},Be,255,j.KEEP,j.KEEP,j.REPLACE),Pe.disabled,lt.disabled,ig(ke.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},hi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var P=this.nextStencilID++,V=this.context.gl;return new ia({func:V.NOTEQUAL,mask:255},P,255,V.KEEP,V.KEEP,V.REPLACE)},hi.prototype.stencilModeForClipping=function(P){var V=this.context.gl;return new ia({func:V.EQUAL,mask:255},this._tileClippingMaskIDs[P.key],0,V.KEEP,V.KEEP,V.REPLACE)},hi.prototype.stencilConfigForOverlap=function(P){var V,z=this.context.gl,j=P.sort(function(Be,rt){return rt.overscaledZ-Be.overscaledZ}),te=j[j.length-1].overscaledZ,le=j[0].overscaledZ-te+1;if(le>1){this.currentStencilSource=void 0,this.nextStencilID+le>256&&this.clearStencil();for(var _e={},ke=0;ke<le;ke++)_e[ke+te]=new ia({func:z.GEQUAL,mask:255},ke+this.nextStencilID,255,z.KEEP,z.KEEP,z.REPLACE);return this.nextStencilID+=le,[_e,j]}return[(V={},V[te]=ia.disabled,V),j]},hi.prototype.colorModeForRenderPass=function(){var P=this.context.gl;if(this._showOverdrawInspector){var V=8,z=1/V;return new Pe([P.CONSTANT_COLOR,P.ONE],new i.Color(z,z,z,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Pe.unblended:Pe.alphaBlended},hi.prototype.depthModeForSublayer=function(P,V,z){if(!this.opaquePassEnabledForLayer())return jr.disabled;var j=1-((1+this.currentLayer)*this.numSublayers+P)*this.depthEpsilon;return new jr(z||this.context.gl.LEQUAL,V,[j,j])},hi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},hi.prototype.render=function(P,V){var z=this;this.style=P,this.options=V,this.lineAtlas=P.lineAtlas,this.imageManager=P.imageManager,this.glyphManager=P.glyphManager,this.symbolFadeChange=P.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var j=this.style._order,te=this.style.sourceCaches;for(var le in te){var _e=te[le];_e.used&&_e.prepare(this.context)}var ke={},Be={},rt={};for(var ut in te){var gt=te[ut];ke[ut]=gt.getVisibleCoordinates(),Be[ut]=ke[ut].slice().reverse(),rt[ut]=gt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var me=0;me<j.length;me++){var Fe=j[me];if(this.style._layers[Fe].is3D()){this.opaquePassCutoff=me;break}}this.renderPass="offscreen";for(var He=0,et=j;He<et.length;He+=1){var ht=et[He],ct=this.style._layers[ht];if(!(!ct.hasOffscreenPass()||ct.isHidden(this.transform.zoom))){var At=Be[ct.source];ct.type!=="custom"&&!At.length||this.renderLayer(this,te[ct.source],ct,At)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:V.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=V.showOverdrawInspector,this.depthRangeFor3D=[0,1-(P._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=j.length-1;this.currentLayer>=0;this.currentLayer--){var Bt=this.style._layers[j[this.currentLayer]],Yt=te[Bt.source],Qt=ke[Bt.source];this._renderTileClippingMasks(Bt,Qt),this.renderLayer(this,Yt,Bt,Qt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<j.length;this.currentLayer++){var er=this.style._layers[j[this.currentLayer]],ir=te[er.source],mr=(er.type==="symbol"?rt:Be)[er.source];this._renderTileClippingMasks(er,ke[er.source]),this.renderLayer(this,ir,er,mr)}if(this.options.showTileBoundaries){var or,dr,Rt=i.values(this.style._layers);Rt.forEach(function(tr){tr.source&&!tr.isHidden(z.transform.zoom)&&(tr.source!==(dr&&dr.id)&&(dr=z.style.sourceCaches[tr.source]),(!or||or.getSource().maxzoom<dr.getSource().maxzoom)&&(or=dr))}),or&&Ed.debug(this,or,or.getVisibleCoordinates())}this.options.showPadding&&Hu(this),this.context.setDefault()},hi.prototype.renderLayer=function(P,V,z,j){z.isHidden(this.transform.zoom)||z.type!=="background"&&z.type!=="custom"&&!j.length||(this.id=z.id,this.gpuTimingStart(z),Ed[z.type](P,V,z,j,this.style.placement.variableOffsets),this.gpuTimingEnd())},hi.prototype.gpuTimingStart=function(P){if(!!this.options.gpuTiming){var V=this.context.extTimerQuery,z=this.gpuTimers[P.id];z||(z=this.gpuTimers[P.id]={calls:0,cpuTime:0,query:V.createQueryEXT()}),z.calls++,V.beginQueryEXT(V.TIME_ELAPSED_EXT,z.query)}},hi.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var P=this.context.extTimerQuery;P.endQueryEXT(P.TIME_ELAPSED_EXT)}},hi.prototype.collectGpuTimers=function(){var P=this.gpuTimers;return this.gpuTimers={},P},hi.prototype.queryGpuTimers=function(P){var V={};for(var z in P){var j=P[z],te=this.context.extTimerQuery,le=te.getQueryObjectEXT(j.query,te.QUERY_RESULT_EXT)/(1e3*1e3);te.deleteQueryEXT(j.query),V[z]=le}return V},hi.prototype.translatePosMatrix=function(P,V,z,j,te){if(!z[0]&&!z[1])return P;var le=te?j==="map"?this.transform.angle:0:j==="viewport"?-this.transform.angle:0;if(le){var _e=Math.sin(le),ke=Math.cos(le);z=[z[0]*ke-z[1]*_e,z[0]*_e+z[1]*ke]}var Be=[te?z[0]:Fl(V,z[0],this.transform.zoom),te?z[1]:Fl(V,z[1],this.transform.zoom),0],rt=new Float32Array(16);return i.translate(rt,P,Be),rt},hi.prototype.saveTileTexture=function(P){var V=this._tileTextures[P.size[0]];V?V.push(P):this._tileTextures[P.size[0]]=[P]},hi.prototype.getTileTexture=function(P){var V=this._tileTextures[P];return V&&V.length>0?V.pop():null},hi.prototype.isPatternMissing=function(P){if(!P)return!1;if(!P.from||!P.to)return!0;var V=this.imageManager.getPattern(P.from.toString()),z=this.imageManager.getPattern(P.to.toString());return!V||!z},hi.prototype.useProgram=function(P,V){this.cache=this.cache||{};var z=""+P+(V?V.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[z]||(this.cache[z]=new Pc(this.context,gv[P],V,Hc[P],this._showOverdrawInspector)),this.cache[z]},hi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},hi.prototype.setBaseState=function(){var P=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(P.FUNC_ADD)},hi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var P=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,P.RGBA)}},hi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Sv=function(P,V){this.points=P,this.planes=V};Sv.fromInvProjectionMatrix=function(P,V,z){var j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],te=Math.pow(2,z),le=j.map(function(Be){return i.transformMat4([],Be,P)}).map(function(Be){return i.scale$1([],Be,1/Be[3]/V*te)}),_e=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ke=_e.map(function(Be){var rt=i.sub([],le[Be[0]],le[Be[1]]),ut=i.sub([],le[Be[2]],le[Be[1]]),gt=i.normalize([],i.cross([],rt,ut)),me=-i.dot(gt,le[Be[1]]);return gt.concat(me)});return new Sv(le,ke)};var Su=function(P,V){this.min=P,this.max=V,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};Su.prototype.quadrant=function(P){for(var V=[P%2==0,P<2],z=i.clone$2(this.min),j=i.clone$2(this.max),te=0;te<V.length;te++)z[te]=V[te]?this.min[te]:this.center[te],j[te]=V[te]?this.center[te]:this.max[te];return j[2]=this.max[2],new Su(z,j)},Su.prototype.distanceX=function(P){var V=Math.max(Math.min(this.max[0],P[0]),this.min[0]);return V-P[0]},Su.prototype.distanceY=function(P){var V=Math.max(Math.min(this.max[1],P[1]),this.min[1]);return V-P[1]},Su.prototype.intersects=function(P){for(var V=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],z=!0,j=0;j<P.planes.length;j++){for(var te=P.planes[j],le=0,_e=0;_e<V.length;_e++)le+=i.dot$1(te,V[_e])>=0;if(le===0)return 0;le!==V.length&&(z=!1)}if(z)return 2;for(var ke=0;ke<3;ke++){for(var Be=Number.MAX_VALUE,rt=-Number.MAX_VALUE,ut=0;ut<P.points.length;ut++){var gt=P.points[ut][ke]-this.min[ke];Be=Math.min(Be,gt),rt=Math.max(rt,gt)}if(rt<0||Be>this.max[ke]-this.min[ke])return 0}return 1};var eu=function(P,V,z,j){if(P===void 0&&(P=0),V===void 0&&(V=0),z===void 0&&(z=0),j===void 0&&(j=0),isNaN(P)||P<0||isNaN(V)||V<0||isNaN(z)||z<0||isNaN(j)||j<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=P,this.bottom=V,this.left=z,this.right=j};eu.prototype.interpolate=function(P,V,z){return V.top!=null&&P.top!=null&&(this.top=i.number(P.top,V.top,z)),V.bottom!=null&&P.bottom!=null&&(this.bottom=i.number(P.bottom,V.bottom,z)),V.left!=null&&P.left!=null&&(this.left=i.number(P.left,V.left,z)),V.right!=null&&P.right!=null&&(this.right=i.number(P.right,V.right,z)),this},eu.prototype.getCenter=function(P,V){var z=i.clamp((this.left+P-this.right)/2,0,P),j=i.clamp((this.top+V-this.bottom)/2,0,V);return new i.Point(z,j)},eu.prototype.equals=function(P){return this.top===P.top&&this.bottom===P.bottom&&this.left===P.left&&this.right===P.right},eu.prototype.clone=function(){return new eu(this.top,this.bottom,this.left,this.right)},eu.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Fi=function(P,V,z,j,te){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=te===void 0?!0:te,this._minZoom=P||0,this._maxZoom=V||22,this._minPitch=z==null?0:z,this._maxPitch=j==null?60:j,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new eu,this._posMatrixCache={},this._alignedPosMatrixCache={}},Gi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Fi.prototype.clone=function(){var P=new Fi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return P.tileSize=this.tileSize,P.latRange=this.latRange,P.width=this.width,P.height=this.height,P._center=this._center,P.zoom=this.zoom,P.angle=this.angle,P._fov=this._fov,P._pitch=this._pitch,P._unmodified=this._unmodified,P._edgeInsets=this._edgeInsets.clone(),P._calcMatrices(),P},Gi.minZoom.get=function(){return this._minZoom},Gi.minZoom.set=function(H){this._minZoom!==H&&(this._minZoom=H,this.zoom=Math.max(this.zoom,H))},Gi.maxZoom.get=function(){return this._maxZoom},Gi.maxZoom.set=function(H){this._maxZoom!==H&&(this._maxZoom=H,this.zoom=Math.min(this.zoom,H))},Gi.minPitch.get=function(){return this._minPitch},Gi.minPitch.set=function(H){this._minPitch!==H&&(this._minPitch=H,this.pitch=Math.max(this.pitch,H))},Gi.maxPitch.get=function(){return this._maxPitch},Gi.maxPitch.set=function(H){this._maxPitch!==H&&(this._maxPitch=H,this.pitch=Math.min(this.pitch,H))},Gi.renderWorldCopies.get=function(){return this._renderWorldCopies},Gi.renderWorldCopies.set=function(H){H===void 0?H=!0:H===null&&(H=!1),this._renderWorldCopies=H},Gi.worldSize.get=function(){return this.tileSize*this.scale},Gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Gi.size.get=function(){return new i.Point(this.width,this.height)},Gi.bearing.get=function(){return-this.angle/Math.PI*180},Gi.bearing.set=function(H){var P=-i.wrap(H,-180,180)*Math.PI/180;this.angle!==P&&(this._unmodified=!1,this.angle=P,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Gi.pitch.get=function(){return this._pitch/Math.PI*180},Gi.pitch.set=function(H){var P=i.clamp(H,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==P&&(this._unmodified=!1,this._pitch=P,this._calcMatrices())},Gi.fov.get=function(){return this._fov/Math.PI*180},Gi.fov.set=function(H){H=Math.max(.01,Math.min(60,H)),this._fov!==H&&(this._unmodified=!1,this._fov=H/180*Math.PI,this._calcMatrices())},Gi.zoom.get=function(){return this._zoom},Gi.zoom.set=function(H){var P=Math.min(Math.max(H,this.minZoom),this.maxZoom);this._zoom!==P&&(this._unmodified=!1,this._zoom=P,this.scale=this.zoomScale(P),this.tileZoom=Math.floor(P),this.zoomFraction=P-this.tileZoom,this._constrain(),this._calcMatrices())},Gi.center.get=function(){return this._center},Gi.center.set=function(H){H.lat===this._center.lat&&H.lng===this._center.lng||(this._unmodified=!1,this._center=H,this._constrain(),this._calcMatrices())},Gi.padding.get=function(){return this._edgeInsets.toJSON()},Gi.padding.set=function(H){this._edgeInsets.equals(H)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,H,1),this._calcMatrices())},Gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Fi.prototype.isPaddingEqual=function(P){return this._edgeInsets.equals(P)},Fi.prototype.interpolatePadding=function(P,V,z){this._unmodified=!1,this._edgeInsets.interpolate(P,V,z),this._constrain(),this._calcMatrices()},Fi.prototype.coveringZoomLevel=function(P){var V=(P.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/P.tileSize));return Math.max(0,V)},Fi.prototype.getVisibleUnwrappedCoordinates=function(P){var V=[new i.UnwrappedTileID(0,P)];if(this._renderWorldCopies)for(var z=this.pointCoordinate(new i.Point(0,0)),j=this.pointCoordinate(new i.Point(this.width,0)),te=this.pointCoordinate(new i.Point(this.width,this.height)),le=this.pointCoordinate(new i.Point(0,this.height)),_e=Math.floor(Math.min(z.x,j.x,te.x,le.x)),ke=Math.floor(Math.max(z.x,j.x,te.x,le.x)),Be=1,rt=_e-Be;rt<=ke+Be;rt++)rt!==0&&V.push(new i.UnwrappedTileID(rt,P));return V},Fi.prototype.coveringTiles=function(P){var V=this.coveringZoomLevel(P),z=V;if(P.minzoom!==void 0&&V<P.minzoom)return[];P.maxzoom!==void 0&&V>P.maxzoom&&(V=P.maxzoom);var j=i.MercatorCoordinate.fromLngLat(this.center),te=Math.pow(2,V),le=[te*j.x,te*j.y,0],_e=Sv.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,V),ke=P.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ke=V);var Be=3,rt=function(Rt){return{aabb:new Su([Rt*te,0,0],[(Rt+1)*te,te,0]),zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}},ut=[],gt=[],me=V,Fe=P.reparseOverscaled?z:V;if(this._renderWorldCopies)for(var He=1;He<=3;He++)ut.push(rt(-He)),ut.push(rt(He));for(ut.push(rt(0));ut.length>0;){var et=ut.pop(),ht=et.x,ct=et.y,At=et.fullyVisible;if(!At){var Bt=et.aabb.intersects(_e);if(Bt===0)continue;At=Bt===2}var Yt=et.aabb.distanceX(le),Qt=et.aabb.distanceY(le),er=Math.max(Math.abs(Yt),Math.abs(Qt)),ir=Be+(1<<me-et.zoom)-2;if(et.zoom===me||er>ir&&et.zoom>=ke){gt.push({tileID:new i.OverscaledTileID(et.zoom===me?Fe:et.zoom,et.wrap,et.zoom,ht,ct),distanceSq:i.sqrLen([le[0]-.5-ht,le[1]-.5-ct])});continue}for(var mr=0;mr<4;mr++){var or=(ht<<1)+mr%2,dr=(ct<<1)+(mr>>1);ut.push({aabb:et.aabb.quadrant(mr),zoom:et.zoom+1,x:or,y:dr,wrap:et.wrap,fullyVisible:At})}}return gt.sort(function(Rt,tr){return Rt.distanceSq-tr.distanceSq}).map(function(Rt){return Rt.tileID})},Fi.prototype.resize=function(P,V){this.width=P,this.height=V,this.pixelsToGLUnits=[2/P,-2/V],this._constrain(),this._calcMatrices()},Gi.unmodified.get=function(){return this._unmodified},Fi.prototype.zoomScale=function(P){return Math.pow(2,P)},Fi.prototype.scaleZoom=function(P){return Math.log(P)/Math.LN2},Fi.prototype.project=function(P){var V=i.clamp(P.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(P.lng)*this.worldSize,i.mercatorYfromLat(V)*this.worldSize)},Fi.prototype.unproject=function(P){return new i.MercatorCoordinate(P.x/this.worldSize,P.y/this.worldSize).toLngLat()},Gi.point.get=function(){return this.project(this.center)},Fi.prototype.setLocationAtPoint=function(P,V){var z=this.pointCoordinate(V),j=this.pointCoordinate(this.centerPoint),te=this.locationCoordinate(P),le=new i.MercatorCoordinate(te.x-(z.x-j.x),te.y-(z.y-j.y));this.center=this.coordinateLocation(le),this._renderWorldCopies&&(this.center=this.center.wrap())},Fi.prototype.locationPoint=function(P){return this.coordinatePoint(this.locationCoordinate(P))},Fi.prototype.pointLocation=function(P){return this.coordinateLocation(this.pointCoordinate(P))},Fi.prototype.locationCoordinate=function(P){return i.MercatorCoordinate.fromLngLat(P)},Fi.prototype.coordinateLocation=function(P){return P.toLngLat()},Fi.prototype.pointCoordinate=function(P){var V=0,z=[P.x,P.y,0,1],j=[P.x,P.y,1,1];i.transformMat4(z,z,this.pixelMatrixInverse),i.transformMat4(j,j,this.pixelMatrixInverse);var te=z[3],le=j[3],_e=z[0]/te,ke=j[0]/le,Be=z[1]/te,rt=j[1]/le,ut=z[2]/te,gt=j[2]/le,me=ut===gt?0:(V-ut)/(gt-ut);return new i.MercatorCoordinate(i.number(_e,ke,me)/this.worldSize,i.number(Be,rt,me)/this.worldSize)},Fi.prototype.coordinatePoint=function(P){var V=[P.x*this.worldSize,P.y*this.worldSize,0,1];return i.transformMat4(V,V,this.pixelMatrix),new i.Point(V[0]/V[3],V[1]/V[3])},Fi.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},Fi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Fi.prototype.setMaxBounds=function(P){P?(this.lngRange=[P.getWest(),P.getEast()],this.latRange=[P.getSouth(),P.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Fi.prototype.calculatePosMatrix=function(P,V){V===void 0&&(V=!1);var z=P.key,j=V?this._alignedPosMatrixCache:this._posMatrixCache;if(j[z])return j[z];var te=P.canonical,le=this.worldSize/this.zoomScale(te.z),_e=te.x+Math.pow(2,te.z)*P.wrap,ke=i.identity(new Float64Array(16));return i.translate(ke,ke,[_e*le,te.y*le,0]),i.scale(ke,ke,[le/i.EXTENT,le/i.EXTENT,1]),i.multiply(ke,V?this.alignedProjMatrix:this.projMatrix,ke),j[z]=new Float32Array(ke),j[z]},Fi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Fi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var P=-90,V=90,z=-180,j=180,te,le,_e,ke,Be=this.size,rt=this._unmodified;if(this.latRange){var ut=this.latRange;P=i.mercatorYfromLat(ut[1])*this.worldSize,V=i.mercatorYfromLat(ut[0])*this.worldSize,te=V-P<Be.y?Be.y/(V-P):0}if(this.lngRange){var gt=this.lngRange;z=i.mercatorXfromLng(gt[0])*this.worldSize,j=i.mercatorXfromLng(gt[1])*this.worldSize,le=j-z<Be.x?Be.x/(j-z):0}var me=this.point,Fe=Math.max(le||0,te||0);if(Fe){this.center=this.unproject(new i.Point(le?(j+z)/2:me.x,te?(V+P)/2:me.y)),this.zoom+=this.scaleZoom(Fe),this._unmodified=rt,this._constraining=!1;return}if(this.latRange){var He=me.y,et=Be.y/2;He-et<P&&(ke=P+et),He+et>V&&(ke=V-et)}if(this.lngRange){var ht=me.x,ct=Be.x/2;ht-ct<z&&(_e=z+ct),ht+ct>j&&(_e=j-ct)}(_e!==void 0||ke!==void 0)&&(this.center=this.unproject(new i.Point(_e!==void 0?_e:me.x,ke!==void 0?ke:me.y))),this._unmodified=rt,this._constraining=!1}},Fi.prototype._calcMatrices=function(){if(!!this.height){var P=this._fov/2,V=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(P)*this.height;var z=Math.PI/2+this._pitch,j=this._fov*(.5+V.y/this.height),te=Math.sin(j)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-z-j,.01,Math.PI-.01)),le=this.point,_e=le.x,ke=le.y,Be=Math.cos(Math.PI/2-this._pitch)*te+this.cameraToCenterDistance,rt=Be*1.01,ut=this.height/50,gt=new Float64Array(16);i.perspective(gt,this._fov,this.width/this.height,ut,rt),gt[8]=-V.x*2/this.width,gt[9]=V.y*2/this.height,i.scale(gt,gt,[1,-1,1]),i.translate(gt,gt,[0,0,-this.cameraToCenterDistance]),i.rotateX(gt,gt,this._pitch),i.rotateZ(gt,gt,this.angle),i.translate(gt,gt,[-_e,-ke,0]),this.mercatorMatrix=i.scale([],gt,[this.worldSize,this.worldSize,this.worldSize]),i.scale(gt,gt,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=gt,this.invProjMatrix=i.invert([],this.projMatrix);var me=this.width%2/2,Fe=this.height%2/2,He=Math.cos(this.angle),et=Math.sin(this.angle),ht=_e-Math.round(_e)+He*me+et*Fe,ct=ke-Math.round(ke)+He*Fe+et*me,At=new Float64Array(gt);if(i.translate(At,At,[ht>.5?ht-1:ht,ct>.5?ct-1:ct,0]),this.alignedProjMatrix=At,gt=i.create(),i.scale(gt,gt,[this.width/2,-this.height/2,1]),i.translate(gt,gt,[1,-1,0]),this.labelPlaneMatrix=gt,gt=i.create(),i.scale(gt,gt,[1,-1,1]),i.translate(gt,gt,[-1,-1,0]),i.scale(gt,gt,[2/this.width,2/this.height,1]),this.glCoordMatrix=gt,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),gt=i.invert(new Float64Array(16),this.pixelMatrix),!gt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=gt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Fi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var P=this.pointCoordinate(new i.Point(0,0)),V=[P.x*this.worldSize,P.y*this.worldSize,0,1],z=i.transformMat4(V,V,this.pixelMatrix);return z[3]/this.cameraToCenterDistance},Fi.prototype.getCameraPoint=function(){var P=this._pitch,V=Math.tan(P)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,V))},Fi.prototype.getCameraQueryGeometry=function(P){var V=this.getCameraPoint();if(P.length===1)return[P[0],V];for(var z=V.x,j=V.y,te=V.x,le=V.y,_e=0,ke=P;_e<ke.length;_e+=1){var Be=ke[_e];z=Math.min(z,Be.x),j=Math.min(j,Be.y),te=Math.max(te,Be.x),le=Math.max(le,Be.y)}return[new i.Point(z,j),new i.Point(te,j),new i.Point(te,le),new i.Point(z,le),new i.Point(z,j)]},Object.defineProperties(Fi.prototype,Gi);function Cd(H,P){var V=!1,z=null,j=function(){z=null,V&&(H(),z=setTimeout(j,P),V=!1)};return function(){return V=!0,z||j(),z}}var bf=function(P){this._hashName=P&&encodeURIComponent(P),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Cd(this._updateHashUnthrottled.bind(this),30*1e3/100)};bf.prototype.addTo=function(P){return this._map=P,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},bf.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},bf.prototype.getHashString=function(P){var V=this._map.getCenter(),z=Math.round(this._map.getZoom()*100)/100,j=Math.ceil((z*Math.LN2+Math.log(512/360/.5))/Math.LN10),te=Math.pow(10,j),le=Math.round(V.lng*te)/te,_e=Math.round(V.lat*te)/te,ke=this._map.getBearing(),Be=this._map.getPitch(),rt="";if(P?rt+="/"+le+"/"+_e+"/"+z:rt+=z+"/"+_e+"/"+le,(ke||Be)&&(rt+="/"+Math.round(ke*10)/10),Be&&(rt+="/"+Math.round(Be)),this._hashName){var ut=this._hashName,gt=!1,me=i.window.location.hash.slice(1).split("&").map(function(Fe){var He=Fe.split("=")[0];return He===ut?(gt=!0,He+"="+rt):Fe}).filter(function(Fe){return Fe});return gt||me.push(ut+"="+rt),"#"+me.join("&")}return"#"+rt},bf.prototype._getCurrentHash=function(){var P=this,V=i.window.location.hash.replace("#","");if(this._hashName){var z;return V.split("&").map(function(j){return j.split("=")}).forEach(function(j){j[0]===P._hashName&&(z=j)}),(z&&z[1]||"").split("/")}return V.split("/")},bf.prototype._onHashChange=function(){var P=this._getCurrentHash();if(P.length>=3&&!P.some(function(z){return isNaN(z)})){var V=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(P[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+P[2],+P[1]],zoom:+P[0],bearing:V,pitch:+(P[4]||0)}),!0}return!1},bf.prototype._updateHashUnthrottled=function(){var P=this.getHashString();try{i.window.history.replaceState(i.window.history.state,"",P)}catch{}};var _f={linearity:.3,easing:i.bezier(0,0,.3,1)},U=i.extend({deceleration:2500,maxSpeed:1400},_f),K=i.extend({deceleration:20,maxSpeed:1400},_f),ne=i.extend({deceleration:1e3,maxSpeed:360},_f),ve=i.extend({deceleration:1e3,maxSpeed:90},_f),ge=function(P){this._map=P,this.clear()};ge.prototype.clear=function(){this._inertiaBuffer=[]},ge.prototype.record=function(P){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:P})},ge.prototype._drainInertiaBuffer=function(){for(var P=this._inertiaBuffer,V=i.browser.now(),z=160;P.length>0&&V-P[0].time>z;)P.shift()},ge.prototype._onMoveEnd=function(P){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var V={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},z=0,j=this._inertiaBuffer;z<j.length;z+=1){var te=j[z],le=te.settings;V.zoom+=le.zoomDelta||0,V.bearing+=le.bearingDelta||0,V.pitch+=le.pitchDelta||0,le.panDelta&&V.pan._add(le.panDelta),le.around&&(V.around=le.around),le.pinchAround&&(V.pinchAround=le.pinchAround)}var _e=this._inertiaBuffer[this._inertiaBuffer.length-1],ke=_e.time-this._inertiaBuffer[0].time,Be={};if(V.pan.mag()){var rt=ze(V.pan.mag(),ke,i.extend({},U,P||{}));Be.offset=V.pan.mult(rt.amount/V.pan.mag()),Be.center=this._map.transform.center,pe(Be,rt)}if(V.zoom){var ut=ze(V.zoom,ke,K);Be.zoom=this._map.transform.zoom+ut.amount,pe(Be,ut)}if(V.bearing){var gt=ze(V.bearing,ke,ne);Be.bearing=this._map.transform.bearing+i.clamp(gt.amount,-179,179),pe(Be,gt)}if(V.pitch){var me=ze(V.pitch,ke,ve);Be.pitch=this._map.transform.pitch+me.amount,pe(Be,me)}if(Be.zoom||Be.bearing){var Fe=V.pinchAround===void 0?V.around:V.pinchAround;Be.around=Fe?this._map.unproject(Fe):this._map.getCenter()}return this.clear(),i.extend(Be,{noMoveStart:!0})}};function pe(H,P){(!H.duration||H.duration<P.duration)&&(H.duration=P.duration,H.easing=P.easing)}function ze(H,P,V){var z=V.maxSpeed,j=V.linearity,te=V.deceleration,le=i.clamp(H*j/(P/1e3),-z,z),_e=Math.abs(le)/(te*j);return{easing:V.easing,duration:_e*1e3,amount:le*(_e/2)}}var Le=function(H){function P(z,j,te,le){le===void 0&&(le={});var _e=l.mousePos(j.getCanvasContainer(),te),ke=j.unproject(_e);H.call(this,z,i.extend({point:_e,lngLat:ke,originalEvent:te},le)),this._defaultPrevented=!1,this.target=j}H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P;var V={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,V),P}(i.Event),Ue=function(H){function P(z,j,te){var le=z==="touchend"?te.changedTouches:te.touches,_e=l.touchPos(j.getCanvasContainer(),le),ke=_e.map(function(ut){return j.unproject(ut)}),Be=_e.reduce(function(ut,gt,me,Fe){return ut.add(gt.div(Fe.length))},new i.Point(0,0)),rt=j.unproject(Be);H.call(this,z,{points:_e,point:Be,lngLats:ke,lngLat:rt,originalEvent:te}),this._defaultPrevented=!1}H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P;var V={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,V),P}(i.Event),nt=function(H){function P(z,j,te){H.call(this,z,{originalEvent:te}),this._defaultPrevented=!1}H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P;var V={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,V),P}(i.Event),tt=function(P,V){this._map=P,this._clickTolerance=V.clickTolerance};tt.prototype.reset=function(){delete this._mousedownPos},tt.prototype.wheel=function(P){return this._firePreventable(new nt(P.type,this._map,P))},tt.prototype.mousedown=function(P,V){return this._mousedownPos=V,this._firePreventable(new Le(P.type,this._map,P))},tt.prototype.mouseup=function(P){this._map.fire(new Le(P.type,this._map,P))},tt.prototype.click=function(P,V){this._mousedownPos&&this._mousedownPos.dist(V)>=this._clickTolerance||this._map.fire(new Le(P.type,this._map,P))},tt.prototype.dblclick=function(P){return this._firePreventable(new Le(P.type,this._map,P))},tt.prototype.mouseover=function(P){this._map.fire(new Le(P.type,this._map,P))},tt.prototype.mouseout=function(P){this._map.fire(new Le(P.type,this._map,P))},tt.prototype.touchstart=function(P){return this._firePreventable(new Ue(P.type,this._map,P))},tt.prototype.touchmove=function(P){this._map.fire(new Ue(P.type,this._map,P))},tt.prototype.touchend=function(P){this._map.fire(new Ue(P.type,this._map,P))},tt.prototype.touchcancel=function(P){this._map.fire(new Ue(P.type,this._map,P))},tt.prototype._firePreventable=function(P){if(this._map.fire(P),P.defaultPrevented)return{}},tt.prototype.isEnabled=function(){return!0},tt.prototype.isActive=function(){return!1},tt.prototype.enable=function(){},tt.prototype.disable=function(){};var xt=function(P){this._map=P};xt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},xt.prototype.mousemove=function(P){this._map.fire(new Le(P.type,this._map,P))},xt.prototype.mousedown=function(){this._delayContextMenu=!0},xt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Le("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},xt.prototype.contextmenu=function(P){this._delayContextMenu?this._contextMenuEvent=P:this._map.fire(new Le(P.type,this._map,P)),this._map.listens("contextmenu")&&P.preventDefault()},xt.prototype.isEnabled=function(){return!0},xt.prototype.isActive=function(){return!1},xt.prototype.enable=function(){},xt.prototype.disable=function(){};var st=function(P,V){this._map=P,this._el=P.getCanvasContainer(),this._container=P.getContainer(),this._clickTolerance=V.clickTolerance||1};st.prototype.isEnabled=function(){return!!this._enabled},st.prototype.isActive=function(){return!!this._active},st.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},st.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},st.prototype.mousedown=function(P,V){!this.isEnabled()||!(P.shiftKey&&P.button===0)||(l.disableDrag(),this._startPos=this._lastPos=V,this._active=!0)},st.prototype.mousemoveWindow=function(P,V){if(!!this._active){var z=V;if(!(this._lastPos.equals(z)||!this._box&&z.dist(this._startPos)<this._clickTolerance)){var j=this._startPos;this._lastPos=z,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",P));var te=Math.min(j.x,z.x),le=Math.max(j.x,z.x),_e=Math.min(j.y,z.y),ke=Math.max(j.y,z.y);l.setTransform(this._box,"translate("+te+"px,"+_e+"px)"),this._box.style.width=le-te+"px",this._box.style.height=ke-_e+"px"}}},st.prototype.mouseupWindow=function(P,V){var z=this;if(!!this._active&&P.button===0){var j=this._startPos,te=V;if(this.reset(),l.suppressClick(),j.x===te.x&&j.y===te.y)this._fireEvent("boxzoomcancel",P);else return this._map.fire(new i.Event("boxzoomend",{originalEvent:P})),{cameraAnimation:function(le){return le.fitScreenCoordinates(j,te,z._map.getBearing(),{linear:!0})}}}},st.prototype.keydown=function(P){!this._active||P.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",P))},st.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},st.prototype._fireEvent=function(P,V){return this._map.fire(new i.Event(P,{originalEvent:V}))};function Vt(H,P){for(var V={},z=0;z<H.length;z++)V[H[z].identifier]=P[z];return V}function lr(H){for(var P=new i.Point(0,0),V=0,z=H;V<z.length;V+=1){var j=z[V];P._add(j)}return P.div(H.length)}var kt=500,$t=500,Ht=30,ar=function(P){this.reset(),this.numTouches=P.numTouches};ar.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ar.prototype.touchstart=function(P,V,z){(this.centroid||z.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=P.timeStamp),z.length===this.numTouches&&(this.centroid=lr(V),this.touches=Vt(z,V)))},ar.prototype.touchmove=function(P,V,z){if(!(this.aborted||!this.centroid)){var j=Vt(z,V);for(var te in this.touches){var le=this.touches[te],_e=j[te];(!_e||_e.dist(le)>Ht)&&(this.aborted=!0)}}},ar.prototype.touchend=function(P,V,z){if((!this.centroid||P.timeStamp-this.startTime>$t)&&(this.aborted=!0),z.length===0){var j=!this.aborted&&this.centroid;if(this.reset(),j)return j}};var nr=function(P){this.singleTap=new ar(P),this.numTaps=P.numTaps,this.reset()};nr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},nr.prototype.touchstart=function(P,V,z){this.singleTap.touchstart(P,V,z)},nr.prototype.touchmove=function(P,V,z){this.singleTap.touchmove(P,V,z)},nr.prototype.touchend=function(P,V,z){var j=this.singleTap.touchend(P,V,z);if(j){var te=P.timeStamp-this.lastTime<kt,le=!this.lastTap||this.lastTap.dist(j)<Ht;if((!te||!le)&&this.reset(),this.count++,this.lastTime=P.timeStamp,this.lastTap=j,this.count===this.numTaps)return this.reset(),j}};var Gt=function(){this._zoomIn=new nr({numTouches:1,numTaps:2}),this._zoomOut=new nr({numTouches:2,numTaps:1}),this.reset()};Gt.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Gt.prototype.touchstart=function(P,V,z){this._zoomIn.touchstart(P,V,z),this._zoomOut.touchstart(P,V,z)},Gt.prototype.touchmove=function(P,V,z){this._zoomIn.touchmove(P,V,z),this._zoomOut.touchmove(P,V,z)},Gt.prototype.touchend=function(P,V,z){var j=this,te=this._zoomIn.touchend(P,V,z),le=this._zoomOut.touchend(P,V,z);if(te)return this._active=!0,P.preventDefault(),setTimeout(function(){return j.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()+1,around:_e.unproject(te)},{originalEvent:P})}};if(le)return this._active=!0,P.preventDefault(),setTimeout(function(){return j.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()-1,around:_e.unproject(le)},{originalEvent:P})}}},Gt.prototype.touchcancel=function(){this.reset()},Gt.prototype.enable=function(){this._enabled=!0},Gt.prototype.disable=function(){this._enabled=!1,this.reset()},Gt.prototype.isEnabled=function(){return this._enabled},Gt.prototype.isActive=function(){return this._active};var Yr=0,ya=2,va=function(P){this.reset(),this._clickTolerance=P.clickTolerance||1};va.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},va.prototype._correctButton=function(P,V){return!1},va.prototype._move=function(P,V){return{}},va.prototype.mousedown=function(P,V){if(!this._lastPoint){var z=l.mouseButton(P);!this._correctButton(P,z)||(this._lastPoint=V,this._eventButton=z)}},va.prototype.mousemoveWindow=function(P,V){var z=this._lastPoint;if(!!z&&(P.preventDefault(),!(!this._moved&&V.dist(z)<this._clickTolerance)))return this._moved=!0,this._lastPoint=V,this._move(z,V)},va.prototype.mouseupWindow=function(P){var V=l.mouseButton(P);V===this._eventButton&&(this._moved&&l.suppressClick(),this.reset())},va.prototype.enable=function(){this._enabled=!0},va.prototype.disable=function(){this._enabled=!1,this.reset()},va.prototype.isEnabled=function(){return this._enabled},va.prototype.isActive=function(){return this._active};var ba=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.mousedown=function(z,j){H.prototype.mousedown.call(this,z,j),this._lastPoint&&(this._active=!0)},P.prototype._correctButton=function(z,j){return j===Yr&&!z.ctrlKey},P.prototype._move=function(z,j){return{around:j,panDelta:j.sub(z)}},P}(va),Ma=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype._correctButton=function(z,j){return j===Yr&&z.ctrlKey||j===ya},P.prototype._move=function(z,j){var te=.8,le=(j.x-z.x)*te;if(le)return this._active=!0,{bearingDelta:le}},P.prototype.contextmenu=function(z){z.preventDefault()},P}(va),Ba=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype._correctButton=function(z,j){return j===Yr&&z.ctrlKey||j===ya},P.prototype._move=function(z,j){var te=-.5,le=(j.y-z.y)*te;if(le)return this._active=!0,{pitchDelta:le}},P.prototype.contextmenu=function(z){z.preventDefault()},P}(va),Ya=function(P){this._minTouches=1,this._clickTolerance=P.clickTolerance||1,this.reset()};Ya.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},Ya.prototype.touchstart=function(P,V,z){return this._calculateTransform(P,V,z)},Ya.prototype.touchmove=function(P,V,z){if(!!this._active)return P.preventDefault(),this._calculateTransform(P,V,z)},Ya.prototype.touchend=function(P,V,z){this._calculateTransform(P,V,z),this._active&&z.length<this._minTouches&&this.reset()},Ya.prototype.touchcancel=function(){this.reset()},Ya.prototype._calculateTransform=function(P,V,z){z.length>0&&(this._active=!0);var j=Vt(z,V),te=new i.Point(0,0),le=new i.Point(0,0),_e=0;for(var ke in j){var Be=j[ke],rt=this._touches[ke];rt&&(te._add(Be),le._add(Be.sub(rt)),_e++,j[ke]=Be)}if(this._touches=j,!(_e<this._minTouches||!le.mag())){var ut=le.div(_e);if(this._sum._add(ut),!(this._sum.mag()<this._clickTolerance)){var gt=te.div(_e);return{around:gt,panDelta:ut}}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active};var Ta=function(){this.reset()};Ta.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ta.prototype._start=function(P){},Ta.prototype._move=function(P,V,z){return{}},Ta.prototype.touchstart=function(P,V,z){this._firstTwoTouches||z.length<2||(this._firstTwoTouches=[z[0].identifier,z[1].identifier],this._start([V[0],V[1]]))},Ta.prototype.touchmove=function(P,V,z){if(!!this._firstTwoTouches){P.preventDefault();var j=this._firstTwoTouches,te=j[0],le=j[1],_e=un(z,V,te),ke=un(z,V,le);if(!(!_e||!ke)){var Be=this._aroundCenter?null:_e.add(ke).div(2);return this._move([_e,ke],Be,P)}}},Ta.prototype.touchend=function(P,V,z){if(!!this._firstTwoTouches){var j=this._firstTwoTouches,te=j[0],le=j[1],_e=un(z,V,te),ke=un(z,V,le);_e&&ke||(this._active&&l.suppressClick(),this.reset())}},Ta.prototype.touchcancel=function(){this.reset()},Ta.prototype.enable=function(P){this._enabled=!0,this._aroundCenter=!!P&&P.around==="center"},Ta.prototype.disable=function(){this._enabled=!1,this.reset()},Ta.prototype.isEnabled=function(){return this._enabled},Ta.prototype.isActive=function(){return this._active};function un(H,P,V){for(var z=0;z<H.length;z++)if(H[z].identifier===V)return P[z]}var ai=.1;function ho(H,P){return Math.log(H/P)/Math.LN2}var Jn=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.reset=function(){H.prototype.reset.call(this),delete this._distance,delete this._startDistance},P.prototype._start=function(z){this._startDistance=this._distance=z[0].dist(z[1])},P.prototype._move=function(z,j){var te=this._distance;if(this._distance=z[0].dist(z[1]),!(!this._active&&Math.abs(ho(this._distance,this._startDistance))<ai))return this._active=!0,{zoomDelta:ho(this._distance,te),pinchAround:j}},P}(Ta),pa=25;function Sn(H,P){return H.angleWith(P)*180/Math.PI}var Dn=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.reset=function(){H.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},P.prototype._start=function(z){this._startVector=this._vector=z[0].sub(z[1]),this._minDiameter=z[0].dist(z[1])},P.prototype._move=function(z,j){var te=this._vector;if(this._vector=z[0].sub(z[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Sn(this._vector,te),pinchAround:j}},P.prototype._isBelowThreshold=function(z){this._minDiameter=Math.min(this._minDiameter,z.mag());var j=Math.PI*this._minDiameter,te=pa/j*360,le=Sn(z,this._startVector);return Math.abs(le)<te},P}(Ta);function Ln(H){return Math.abs(H.y)>Math.abs(H.x)}var To=100,Nn=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.reset=function(){H.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},P.prototype._start=function(z){this._lastPoints=z,Ln(z[0].sub(z[1]))&&(this._valid=!1)},P.prototype._move=function(z,j,te){var le=z[0].sub(this._lastPoints[0]),_e=z[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(le,_e,te.timeStamp),!!this._valid){this._lastPoints=z,this._active=!0;var ke=(le.y+_e.y)/2,Be=-.5;return{pitchDelta:ke*Be}}},P.prototype.gestureBeginsVertically=function(z,j,te){if(this._valid!==void 0)return this._valid;var le=2,_e=z.mag()>=le,ke=j.mag()>=le;if(!(!_e&&!ke)){if(!_e||!ke)return this._firstMove===void 0&&(this._firstMove=te),te-this._firstMove<To?void 0:!1;var Be=z.y>0==j.y>0;return Ln(z)&&Ln(j)&&Be}},P}(Ta),Ho={panStep:100,bearingStep:15,pitchStep:10},vo=function(){var P=Ho;this._panStep=P.panStep,this._bearingStep=P.bearingStep,this._pitchStep=P.pitchStep};vo.prototype.reset=function(){this._active=!1},vo.prototype.keydown=function(P){var V=this;if(!(P.altKey||P.ctrlKey||P.metaKey)){var z=0,j=0,te=0,le=0,_e=0;switch(P.keyCode){case 61:case 107:case 171:case 187:z=1;break;case 189:case 109:case 173:z=-1;break;case 37:P.shiftKey?j=-1:(P.preventDefault(),le=-1);break;case 39:P.shiftKey?j=1:(P.preventDefault(),le=1);break;case 38:P.shiftKey?te=1:(P.preventDefault(),_e=-1);break;case 40:P.shiftKey?te=-1:(P.preventDefault(),_e=1);break;default:return}return{cameraAnimation:function(ke){var Be=ke.getZoom();ke.easeTo({duration:300,easeId:"keyboardHandler",easing:Go,zoom:z?Math.round(Be)+z*(P.shiftKey?2:1):Be,bearing:ke.getBearing()+j*V._bearingStep,pitch:ke.getPitch()+te*V._pitchStep,offset:[-le*V._panStep,-_e*V._panStep],center:ke.getCenter()},{originalEvent:P})}}}},vo.prototype.enable=function(){this._enabled=!0},vo.prototype.disable=function(){this._enabled=!1,this.reset()},vo.prototype.isEnabled=function(){return this._enabled},vo.prototype.isActive=function(){return this._active};function Go(H){return H*(2-H)}var Ps=4.000244140625,Hs=1/100,ss=1/450,no=2,Ao=function(P,V){this._map=P,this._el=P.getCanvasContainer(),this._handler=V,this._delta=0,this._defaultZoomRate=Hs,this._wheelZoomRate=ss,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ao.prototype.setZoomRate=function(P){this._defaultZoomRate=P},Ao.prototype.setWheelZoomRate=function(P){this._wheelZoomRate=P},Ao.prototype.isEnabled=function(){return!!this._enabled},Ao.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ao.prototype.isZooming=function(){return!!this._zooming},Ao.prototype.enable=function(P){this.isEnabled()||(this._enabled=!0,this._aroundCenter=P&&P.around==="center")},Ao.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Ao.prototype.wheel=function(P){if(!!this.isEnabled()){var V=P.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?P.deltaY*40:P.deltaY,z=i.browser.now(),j=z-(this._lastWheelEventTime||0);this._lastWheelEventTime=z,V!==0&&V%Ps==0?this._type="wheel":V!==0&&Math.abs(V)<4?this._type="trackpad":j>400?(this._type=null,this._lastValue=V,this._timeout=setTimeout(this._onTimeout,40,P)):this._type||(this._type=Math.abs(j*V)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,V+=this._lastValue)),P.shiftKey&&V&&(V=V/4),this._type&&(this._lastWheelEvent=P,this._delta-=V,this._active||this._start(P)),P.preventDefault()}},Ao.prototype._onTimeout=function(P){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(P)},Ao.prototype._start=function(P){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var V=l.mousePos(this._el,P);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(V)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ao.prototype.renderFrame=function(){return this._onScrollFrame()},Ao.prototype._onScrollFrame=function(){var P=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var V=this._map.transform;if(this._delta!==0){var z=this._type==="wheel"&&Math.abs(this._delta)>Ps?this._wheelZoomRate:this._defaultZoomRate,j=no/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&j!==0&&(j=1/j);var te=typeof this._targetZoom=="number"?V.zoomScale(this._targetZoom):V.scale;this._targetZoom=Math.min(V.maxZoom,Math.max(V.minZoom,V.scaleZoom(te*j))),this._type==="wheel"&&(this._startZoom=V.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var le=typeof this._targetZoom=="number"?this._targetZoom:V.zoom,_e=this._startZoom,ke=this._easing,Be=!1,rt;if(this._type==="wheel"&&_e&&ke){var ut=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),gt=ke(ut);rt=i.number(_e,le,gt),ut<1?this._frameId||(this._frameId=!0):Be=!0}else rt=le,Be=!0;return this._active=!0,Be&&(this._active=!1,this._finishTimeout=setTimeout(function(){P._zooming=!1,P._handler._triggerRenderFrame(),delete P._targetZoom,delete P._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Be,zoomDelta:rt-V.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ao.prototype._smoothOutEasing=function(P){var V=i.ease;if(this._prevEase){var z=this._prevEase,j=(i.browser.now()-z.start)/z.duration,te=z.easing(j+.01)-z.easing(j),le=.27/Math.sqrt(te*te+1e-4)*.01,_e=Math.sqrt(.27*.27-le*le);V=i.bezier(le,_e,.25,1)}return this._prevEase={start:i.browser.now(),duration:P,easing:V},V},Ao.prototype.reset=function(){this._active=!1};var tn=function(P,V){this._clickZoom=P,this._tapZoom=V};tn.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},tn.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},tn.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},tn.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Wa=function(){this.reset()};Wa.prototype.reset=function(){this._active=!1},Wa.prototype.dblclick=function(P,V){return P.preventDefault(),{cameraAnimation:function(z){z.easeTo({duration:300,zoom:z.getZoom()+(P.shiftKey?-1:1),around:z.unproject(V)},{originalEvent:P})}}},Wa.prototype.enable=function(){this._enabled=!0},Wa.prototype.disable=function(){this._enabled=!1,this.reset()},Wa.prototype.isEnabled=function(){return this._enabled},Wa.prototype.isActive=function(){return this._active};var Mi=function(){this._tap=new nr({numTouches:1,numTaps:1}),this.reset()};Mi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Mi.prototype.touchstart=function(P,V,z){this._swipePoint||(this._tapTime&&P.timeStamp-this._tapTime>kt&&this.reset(),this._tapTime?z.length>0&&(this._swipePoint=V[0],this._swipeTouch=z[0].identifier):this._tap.touchstart(P,V,z))},Mi.prototype.touchmove=function(P,V,z){if(!this._tapTime)this._tap.touchmove(P,V,z);else if(this._swipePoint){if(z[0].identifier!==this._swipeTouch)return;var j=V[0],te=j.y-this._swipePoint.y;return this._swipePoint=j,P.preventDefault(),this._active=!0,{zoomDelta:te/128}}},Mi.prototype.touchend=function(P,V,z){if(this._tapTime)this._swipePoint&&z.length===0&&this.reset();else{var j=this._tap.touchend(P,V,z);j&&(this._tapTime=P.timeStamp)}},Mi.prototype.touchcancel=function(){this.reset()},Mi.prototype.enable=function(){this._enabled=!0},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};var Io=function(P,V,z){this._el=P,this._mousePan=V,this._touchPan=z};Io.prototype.enable=function(P){this._inertiaOptions=P||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Io.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Io.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Io.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ms=function(P,V,z){this._pitchWithRotate=P.pitchWithRotate,this._mouseRotate=V,this._mousePitch=z};ms.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ms.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ms.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ms.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ti=function(P,V,z,j){this._el=P,this._touchZoom=V,this._touchRotate=z,this._tapDragZoom=j,this._rotationDisabled=!1,this._enabled=!0};Ti.prototype.enable=function(P){this._touchZoom.enable(P),this._rotationDisabled||this._touchRotate.enable(P),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ti.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ti.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ti.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ti.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ti.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _l=function(H){return H.zoom||H.drag||H.pitch||H.rotate},Is=function(H){function P(){H.apply(this,arguments)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P}(i.Event);function Mu(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}var Qi=function(P,V){this._map=P,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ge(P),this._bearingSnap=V.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(V),i.bindAll(["handleEvent","handleWindowEvent"],this);var z=this._el;this._listeners=[[z,"touchstart",{passive:!1}],[z,"touchmove",{passive:!1}],[z,"touchend",void 0],[z,"touchcancel",void 0],[z,"mousedown",void 0],[z,"mousemove",void 0],[z,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[z,"mouseover",void 0],[z,"mouseout",void 0],[z,"dblclick",void 0],[z,"click",void 0],[z,"keydown",{capture:!1}],[z,"keyup",void 0],[z,"wheel",{passive:!1}],[z,"contextmenu",void 0],[i.window,"blur",void 0]];for(var j=0,te=this._listeners;j<te.length;j+=1){var le=te[j],_e=le[0],ke=le[1],Be=le[2];l.addEventListener(_e,ke,_e===i.window.document?this.handleWindowEvent:this.handleEvent,Be)}};Qi.prototype.destroy=function(){for(var P=0,V=this._listeners;P<V.length;P+=1){var z=V[P],j=z[0],te=z[1],le=z[2];l.removeEventListener(j,te,j===i.window.document?this.handleWindowEvent:this.handleEvent,le)}},Qi.prototype._addDefaultHandlers=function(P){var V=this._map,z=V.getCanvasContainer();this._add("mapEvent",new tt(V,P));var j=V.boxZoom=new st(V,P);this._add("boxZoom",j);var te=new Gt,le=new Wa;V.doubleClickZoom=new tn(le,te),this._add("tapZoom",te),this._add("clickZoom",le);var _e=new Mi;this._add("tapDragZoom",_e);var ke=V.touchPitch=new Nn;this._add("touchPitch",ke);var Be=new Ma(P),rt=new Ba(P);V.dragRotate=new ms(P,Be,rt),this._add("mouseRotate",Be,["mousePitch"]),this._add("mousePitch",rt,["mouseRotate"]);var ut=new ba(P),gt=new Ya(P);V.dragPan=new Io(z,ut,gt),this._add("mousePan",ut),this._add("touchPan",gt,["touchZoom","touchRotate"]);var me=new Dn,Fe=new Jn;V.touchZoomRotate=new Ti(z,Fe,me,_e),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",Fe,["touchPan","touchRotate"]);var He=V.scrollZoom=new Ao(V,this);this._add("scrollZoom",He,["mousePan"]);var et=V.keyboard=new vo;this._add("keyboard",et),this._add("blockableMapEvent",new xt(V));for(var ht=0,ct=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ht<ct.length;ht+=1){var At=ct[ht];P.interactive&&P[At]&&V[At].enable(P[At])}},Qi.prototype._add=function(P,V,z){this._handlers.push({handlerName:P,handler:V,allowed:z}),this._handlersById[P]=V},Qi.prototype.stop=function(){if(!this._updatingCamera){for(var P=0,V=this._handlers;P<V.length;P+=1){var z=V[P],j=z.handler;j.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Qi.prototype.isActive=function(){for(var P=0,V=this._handlers;P<V.length;P+=1){var z=V[P],j=z.handler;if(j.isActive())return!0}return!1},Qi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Qi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Qi.prototype.isMoving=function(){return Boolean(_l(this._eventsInProgress))||this.isZooming()},Qi.prototype._blockedByActive=function(P,V,z){for(var j in P)if(j!==z&&(!V||V.indexOf(j)<0))return!0;return!1},Qi.prototype.handleWindowEvent=function(P){this.handleEvent(P,P.type+"Window")},Qi.prototype._getMapTouches=function(P){for(var V=[],z=0,j=P;z<j.length;z+=1){var te=j[z],le=te.target;this._el.contains(le)&&V.push(te)}return V},Qi.prototype.handleEvent=function(P,V){if(P.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var z=P.type==="renderFrame"?void 0:P,j={needsRenderFrame:!1},te={},le={},_e=P.touches?this._getMapTouches(P.touches):void 0,ke=_e?l.touchPos(this._el,_e):l.mousePos(this._el,P),Be=0,rt=this._handlers;Be<rt.length;Be+=1){var ut=rt[Be],gt=ut.handlerName,me=ut.handler,Fe=ut.allowed;if(!!me.isEnabled()){var He=void 0;this._blockedByActive(le,Fe,gt)?me.reset():me[V||P.type]&&(He=me[V||P.type](P,ke,_e),this.mergeHandlerResult(j,te,He,gt,z),He&&He.needsRenderFrame&&this._triggerRenderFrame()),(He||me.isActive())&&(le[gt]=me)}}var et={};for(var ht in this._previousActiveHandlers)le[ht]||(et[ht]=z);this._previousActiveHandlers=le,(Object.keys(et).length||Mu(j))&&(this._changes.push([j,te,et]),this._triggerRenderFrame()),(Object.keys(le).length||Mu(j))&&this._map._stop(!0),this._updatingCamera=!1;var ct=j.cameraAnimation;ct&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],ct(this._map))},Qi.prototype.mergeHandlerResult=function(P,V,z,j,te){if(!!z){i.extend(P,z);var le={handlerName:j,originalEvent:z.originalEvent||te};z.zoomDelta!==void 0&&(V.zoom=le),z.panDelta!==void 0&&(V.drag=le),z.pitchDelta!==void 0&&(V.pitch=le),z.bearingDelta!==void 0&&(V.rotate=le)}},Qi.prototype._applyChanges=function(){for(var P={},V={},z={},j=0,te=this._changes;j<te.length;j+=1){var le=te[j],_e=le[0],ke=le[1],Be=le[2];_e.panDelta&&(P.panDelta=(P.panDelta||new i.Point(0,0))._add(_e.panDelta)),_e.zoomDelta&&(P.zoomDelta=(P.zoomDelta||0)+_e.zoomDelta),_e.bearingDelta&&(P.bearingDelta=(P.bearingDelta||0)+_e.bearingDelta),_e.pitchDelta&&(P.pitchDelta=(P.pitchDelta||0)+_e.pitchDelta),_e.around!==void 0&&(P.around=_e.around),_e.pinchAround!==void 0&&(P.pinchAround=_e.pinchAround),_e.noInertia&&(P.noInertia=_e.noInertia),i.extend(V,ke),i.extend(z,Be)}this._updateMapTransform(P,V,z),this._changes=[]},Qi.prototype._updateMapTransform=function(P,V,z){var j=this._map,te=j.transform;if(!Mu(P))return this._fireEvents(V,z);var le=P.panDelta,_e=P.zoomDelta,ke=P.bearingDelta,Be=P.pitchDelta,rt=P.around,ut=P.pinchAround;ut!==void 0&&(rt=ut),j._stop(!0),rt=rt||j.transform.centerPoint;var gt=te.pointLocation(le?rt.sub(le):rt);ke&&(te.bearing+=ke),Be&&(te.pitch+=Be),_e&&(te.zoom+=_e),te.setLocationAtPoint(gt,rt),this._map._update(),P.noInertia||this._inertia.record(P),this._fireEvents(V,z)},Qi.prototype._fireEvents=function(P,V){var z=this,j=_l(this._eventsInProgress),te=_l(P),le={};for(var _e in P){var ke=P[_e],Be=ke.originalEvent;this._eventsInProgress[_e]||(le[_e+"start"]=Be),this._eventsInProgress[_e]=P[_e]}!j&&te&&this._fireEvent("movestart",te.originalEvent);for(var rt in le)this._fireEvent(rt,le[rt]);P.rotate&&(this._bearingChanged=!0),te&&this._fireEvent("move",te.originalEvent);for(var ut in P){var gt=P[ut],me=gt.originalEvent;this._fireEvent(ut,me)}var Fe={},He;for(var et in this._eventsInProgress){var ht=this._eventsInProgress[et],ct=ht.handlerName,At=ht.originalEvent;this._handlersById[ct].isActive()||(delete this._eventsInProgress[et],He=V[ct]||At,Fe[et+"end"]=He)}for(var Bt in Fe)this._fireEvent(Bt,Fe[Bt]);var Yt=_l(this._eventsInProgress);if((j||te)&&!Yt){this._updatingCamera=!0;var Qt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),er=function(ir){return ir!==0&&-z._bearingSnap<ir&&ir<z._bearingSnap};Qt?(er(Qt.bearing||this._map.getBearing())&&(Qt.bearing=0),this._map.easeTo(Qt,{originalEvent:He})):(this._map.fire(new i.Event("moveend",{originalEvent:He})),er(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Qi.prototype._fireEvent=function(P,V){this._map.fire(new i.Event(P,V?{originalEvent:V}:{}))},Qi.prototype._triggerRenderFrame=function(){var P=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(V){delete P._frameId,P.handleEvent(new Is("renderFrame",{timeStamp:V})),P._applyChanges()}))};var Ld=function(H){function P(V,z){H.call(this),this._moving=!1,this._zooming=!1,this.transform=V,this._bearingSnap=z.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},P.prototype.setCenter=function(z,j){return this.jumpTo({center:z},j)},P.prototype.panBy=function(z,j,te){return z=i.Point.convert(z).mult(-1),this.panTo(this.transform.center,i.extend({offset:z},j),te)},P.prototype.panTo=function(z,j,te){return this.easeTo(i.extend({center:z},j),te)},P.prototype.getZoom=function(){return this.transform.zoom},P.prototype.setZoom=function(z,j){return this.jumpTo({zoom:z},j),this},P.prototype.zoomTo=function(z,j,te){return this.easeTo(i.extend({zoom:z},j),te)},P.prototype.zoomIn=function(z,j){return this.zoomTo(this.getZoom()+1,z,j),this},P.prototype.zoomOut=function(z,j){return this.zoomTo(this.getZoom()-1,z,j),this},P.prototype.getBearing=function(){return this.transform.bearing},P.prototype.setBearing=function(z,j){return this.jumpTo({bearing:z},j),this},P.prototype.getPadding=function(){return this.transform.padding},P.prototype.setPadding=function(z,j){return this.jumpTo({padding:z},j),this},P.prototype.rotateTo=function(z,j,te){return this.easeTo(i.extend({bearing:z},j),te)},P.prototype.resetNorth=function(z,j){return this.rotateTo(0,i.extend({duration:1e3},z),j),this},P.prototype.resetNorthPitch=function(z,j){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},z),j),this},P.prototype.snapToNorth=function(z,j){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(z,j):this},P.prototype.getPitch=function(){return this.transform.pitch},P.prototype.setPitch=function(z,j){return this.jumpTo({pitch:z},j),this},P.prototype.cameraForBounds=function(z,j){return z=i.LngLatBounds.convert(z),this._cameraForBoxAndBearing(z.getNorthWest(),z.getSouthEast(),0,j)},P.prototype._cameraForBoxAndBearing=function(z,j,te,le){var _e={top:0,bottom:0,right:0,left:0};if(le=i.extend({padding:_e,offset:[0,0],maxZoom:this.transform.maxZoom},le),typeof le.padding=="number"){var ke=le.padding;le.padding={top:ke,bottom:ke,right:ke,left:ke}}le.padding=i.extend(_e,le.padding);var Be=this.transform,rt=Be.padding,ut=Be.project(i.LngLat.convert(z)),gt=Be.project(i.LngLat.convert(j)),me=ut.rotate(-te*Math.PI/180),Fe=gt.rotate(-te*Math.PI/180),He=new i.Point(Math.max(me.x,Fe.x),Math.max(me.y,Fe.y)),et=new i.Point(Math.min(me.x,Fe.x),Math.min(me.y,Fe.y)),ht=He.sub(et),ct=(Be.width-(rt.left+rt.right+le.padding.left+le.padding.right))/ht.x,At=(Be.height-(rt.top+rt.bottom+le.padding.top+le.padding.bottom))/ht.y;if(At<0||ct<0){i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Bt=Math.min(Be.scaleZoom(Be.scale*Math.min(ct,At)),le.maxZoom),Yt=i.Point.convert(le.offset),Qt=(le.padding.left-le.padding.right)/2,er=(le.padding.top-le.padding.bottom)/2,ir=new i.Point(Yt.x+Qt,Yt.y+er),mr=ir.mult(Be.scale/Be.zoomScale(Bt)),or=Be.unproject(ut.add(gt).div(2).sub(mr));return{center:or,zoom:Bt,bearing:te}},P.prototype.fitBounds=function(z,j,te){return this._fitInternal(this.cameraForBounds(z,j),j,te)},P.prototype.fitScreenCoordinates=function(z,j,te,le,_e){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(z)),this.transform.pointLocation(i.Point.convert(j)),te,le),le,_e)},P.prototype._fitInternal=function(z,j,te){return z?(j=i.extend(z,j),delete j.padding,j.linear?this.easeTo(j,te):this.flyTo(j,te)):this},P.prototype.jumpTo=function(z,j){this.stop();var te=this.transform,le=!1,_e=!1,ke=!1;return"zoom"in z&&te.zoom!==+z.zoom&&(le=!0,te.zoom=+z.zoom),z.center!==void 0&&(te.center=i.LngLat.convert(z.center)),"bearing"in z&&te.bearing!==+z.bearing&&(_e=!0,te.bearing=+z.bearing),"pitch"in z&&te.pitch!==+z.pitch&&(ke=!0,te.pitch=+z.pitch),z.padding!=null&&!te.isPaddingEqual(z.padding)&&(te.padding=z.padding),this.fire(new i.Event("movestart",j)).fire(new i.Event("move",j)),le&&this.fire(new i.Event("zoomstart",j)).fire(new i.Event("zoom",j)).fire(new i.Event("zoomend",j)),_e&&this.fire(new i.Event("rotatestart",j)).fire(new i.Event("rotate",j)).fire(new i.Event("rotateend",j)),ke&&this.fire(new i.Event("pitchstart",j)).fire(new i.Event("pitch",j)).fire(new i.Event("pitchend",j)),this.fire(new i.Event("moveend",j))},P.prototype.easeTo=function(z,j){var te=this;this._stop(!1,z.easeId),z=i.extend({offset:[0,0],duration:500,easing:i.ease},z),(z.animate===!1||!z.essential&&i.browser.prefersReducedMotion)&&(z.duration=0);var le=this.transform,_e=this.getZoom(),ke=this.getBearing(),Be=this.getPitch(),rt=this.getPadding(),ut="zoom"in z?+z.zoom:_e,gt="bearing"in z?this._normalizeBearing(z.bearing,ke):ke,me="pitch"in z?+z.pitch:Be,Fe="padding"in z?z.padding:le.padding,He=i.Point.convert(z.offset),et=le.centerPoint.add(He),ht=le.pointLocation(et),ct=i.LngLat.convert(z.center||ht);this._normalizeCenter(ct);var At=le.project(ht),Bt=le.project(ct).sub(At),Yt=le.zoomScale(ut-_e),Qt,er;z.around&&(Qt=i.LngLat.convert(z.around),er=le.locationPoint(Qt));var ir={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ut!==_e,this._rotating=this._rotating||ke!==gt,this._pitching=this._pitching||me!==Be,this._padding=!le.isPaddingEqual(Fe),this._easeId=z.easeId,this._prepareEase(j,z.noMoveStart,ir),clearTimeout(this._easeEndTimeoutID),this._ease(function(mr){if(te._zooming&&(le.zoom=i.number(_e,ut,mr)),te._rotating&&(le.bearing=i.number(ke,gt,mr)),te._pitching&&(le.pitch=i.number(Be,me,mr)),te._padding&&(le.interpolatePadding(rt,Fe,mr),et=le.centerPoint.add(He)),Qt)le.setLocationAtPoint(Qt,er);else{var or=le.zoomScale(le.zoom-_e),dr=ut>_e?Math.min(2,Yt):Math.max(.5,Yt),Rt=Math.pow(dr,1-mr),tr=le.unproject(At.add(Bt.mult(mr*Rt)).mult(or));le.setLocationAtPoint(le.renderWorldCopies?tr.wrap():tr,et)}te._fireMoveEvents(j)},function(mr){te._afterEase(j,mr)},z),this},P.prototype._prepareEase=function(z,j,te){te===void 0&&(te={}),this._moving=!0,!j&&!te.moving&&this.fire(new i.Event("movestart",z)),this._zooming&&!te.zooming&&this.fire(new i.Event("zoomstart",z)),this._rotating&&!te.rotating&&this.fire(new i.Event("rotatestart",z)),this._pitching&&!te.pitching&&this.fire(new i.Event("pitchstart",z))},P.prototype._fireMoveEvents=function(z){this.fire(new i.Event("move",z)),this._zooming&&this.fire(new i.Event("zoom",z)),this._rotating&&this.fire(new i.Event("rotate",z)),this._pitching&&this.fire(new i.Event("pitch",z))},P.prototype._afterEase=function(z,j){if(!(this._easeId&&j&&this._easeId===j)){delete this._easeId;var te=this._zooming,le=this._rotating,_e=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,te&&this.fire(new i.Event("zoomend",z)),le&&this.fire(new i.Event("rotateend",z)),_e&&this.fire(new i.Event("pitchend",z)),this.fire(new i.Event("moveend",z))}},P.prototype.flyTo=function(z,j){var te=this;if(!z.essential&&i.browser.prefersReducedMotion){var le=i.pick(z,["center","zoom","bearing","pitch","around"]);return this.jumpTo(le,j)}this.stop(),z=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},z);var _e=this.transform,ke=this.getZoom(),Be=this.getBearing(),rt=this.getPitch(),ut=this.getPadding(),gt="zoom"in z?i.clamp(+z.zoom,_e.minZoom,_e.maxZoom):ke,me="bearing"in z?this._normalizeBearing(z.bearing,Be):Be,Fe="pitch"in z?+z.pitch:rt,He="padding"in z?z.padding:_e.padding,et=_e.zoomScale(gt-ke),ht=i.Point.convert(z.offset),ct=_e.centerPoint.add(ht),At=_e.pointLocation(ct),Bt=i.LngLat.convert(z.center||At);this._normalizeCenter(Bt);var Yt=_e.project(At),Qt=_e.project(Bt).sub(Yt),er=z.curve,ir=Math.max(_e.width,_e.height),mr=ir/et,or=Qt.mag();if("minZoom"in z){var dr=i.clamp(Math.min(z.minZoom,ke,gt),_e.minZoom,_e.maxZoom),Rt=ir/_e.zoomScale(dr-ke);er=Math.sqrt(Rt/or*2)}var tr=er*er;function Lr(Ir){var Wr=(mr*mr-ir*ir+(Ir?-1:1)*tr*tr*or*or)/(2*(Ir?mr:ir)*tr*or);return Math.log(Math.sqrt(Wr*Wr+1)-Wr)}function ra(Ir){return(Math.exp(Ir)-Math.exp(-Ir))/2}function Mr(Ir){return(Math.exp(Ir)+Math.exp(-Ir))/2}function Jr(Ir){return ra(Ir)/Mr(Ir)}var Dr=Lr(0),ga=function(Ir){return Mr(Dr)/Mr(Dr+er*Ir)},Pr=function(Ir){return ir*((Mr(Dr)*Jr(Dr+er*Ir)-ra(Dr))/tr)/or},Cr=(Lr(1)-Dr)/er;if(Math.abs(or)<1e-6||!isFinite(Cr)){if(Math.abs(ir-mr)<1e-6)return this.easeTo(z,j);var oa=mr<ir?-1:1;Cr=Math.abs(Math.log(mr/ir))/er,Pr=function(){return 0},ga=function(Ir){return Math.exp(oa*er*Ir)}}if("duration"in z)z.duration=+z.duration;else{var ta="screenSpeed"in z?+z.screenSpeed/er:+z.speed;z.duration=1e3*Cr/ta}return z.maxDuration&&z.duration>z.maxDuration&&(z.duration=0),this._zooming=!0,this._rotating=Be!==me,this._pitching=Fe!==rt,this._padding=!_e.isPaddingEqual(He),this._prepareEase(j,!1),this._ease(function(Ir){var Wr=Ir*Cr,ua=1/ga(Wr);_e.zoom=Ir===1?gt:ke+_e.scaleZoom(ua),te._rotating&&(_e.bearing=i.number(Be,me,Ir)),te._pitching&&(_e.pitch=i.number(rt,Fe,Ir)),te._padding&&(_e.interpolatePadding(ut,He,Ir),ct=_e.centerPoint.add(ht));var Ja=Ir===1?Bt:_e.unproject(Yt.add(Qt.mult(Pr(Wr))).mult(ua));_e.setLocationAtPoint(_e.renderWorldCopies?Ja.wrap():Ja,ct),te._fireMoveEvents(j)},function(){return te._afterEase(j)},z),this},P.prototype.isEasing=function(){return!!this._easeFrameId},P.prototype.stop=function(){return this._stop()},P.prototype._stop=function(z,j){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var te=this._onEaseEnd;delete this._onEaseEnd,te.call(this,j)}if(!z){var le=this.handlers;le&&le.stop()}return this},P.prototype._ease=function(z,j,te){te.animate===!1||te.duration===0?(z(1),j()):(this._easeStart=i.browser.now(),this._easeOptions=te,this._onEaseFrame=z,this._onEaseEnd=j,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},P.prototype._renderFrameCallback=function(){var z=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(z)),z<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},P.prototype._normalizeBearing=function(z,j){z=i.wrap(z,-180,180);var te=Math.abs(z-j);return Math.abs(z-360-j)<te&&(z-=360),Math.abs(z+360-j)<te&&(z+=360),z},P.prototype._normalizeCenter=function(z){var j=this.transform;if(!(!j.renderWorldCopies||j.lngRange)){var te=z.lng-j.center.lng;z.lng+=te>180?-360:te<-180?360:0}},P}(i.Evented),wf=function(P){P===void 0&&(P={}),this.options=P,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};wf.prototype.getDefaultPosition=function(){return"bottom-right"},wf.prototype.onAdd=function(P){var V=this.options&&this.options.compact;return this._map=P,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),V&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),V===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wf.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wf.prototype._updateEditLink=function(){var P=this._editLink;P||(P=this._editLink=this._container.querySelector(".mapbox-improve-map"));var V=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(P){var z=V.reduce(function(j,te,le){return te.value&&(j+=te.key+"="+te.value+(le<V.length-1?"&":"")),j},"?");P.href=i.config.FEEDBACK_URL+"/"+z+(this._map._hash?this._map._hash.getHashString(!0):""),P.rel="noopener nofollow"}},wf.prototype._updateData=function(P){P&&(P.sourceDataType==="metadata"||P.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},wf.prototype._updateAttributions=function(){if(!!this._map.style){var P=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?P=P.concat(this.options.customAttribution.map(function(ke){return typeof ke!="string"?"":ke})):typeof this.options.customAttribution=="string"&&P.push(this.options.customAttribution)),this._map.style.stylesheet){var V=this._map.style.stylesheet;this.styleOwner=V.owner,this.styleId=V.id}var z=this._map.style.sourceCaches;for(var j in z){var te=z[j];if(te.used){var le=te.getSource();le.attribution&&P.indexOf(le.attribution)<0&&P.push(le.attribution)}}P.sort(function(ke,Be){return ke.length-Be.length}),P=P.filter(function(ke,Be){for(var rt=Be+1;rt<P.length;rt++)if(P[rt].indexOf(ke)>=0)return!1;return!0});var _e=P.join(" | ");_e!==this._attribHTML&&(this._attribHTML=_e,P.length?(this._innerContainer.innerHTML=_e,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wf.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ui=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};ui.prototype.onAdd=function(P){this._map=P,this._container=l.create("div","mapboxgl-ctrl");var V=l.create("a","mapboxgl-ctrl-logo");return V.target="_blank",V.rel="noopener nofollow",V.href="https://www.mapbox.com/",V.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),V.setAttribute("rel","noopener nofollow"),this._container.appendChild(V),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ui.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ui.prototype.getDefaultPosition=function(){return"bottom-left"},ui.prototype._updateLogo=function(P){(!P||P.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},ui.prototype._logoRequired=function(){if(!!this._map.style){var P=this._map.style.sourceCaches;for(var V in P){var z=P[V].getSource();if(z.mapbox_logo)return!0}return!1}},ui.prototype._updateCompact=function(){var P=this._container.children;if(P.length){var V=P[0];this._map.getCanvasContainer().offsetWidth<250?V.classList.add("mapboxgl-compact"):V.classList.remove("mapboxgl-compact")}};var Do=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Do.prototype.add=function(P){var V=++this._id,z=this._queue;return z.push({callback:P,id:V,cancelled:!1}),V},Do.prototype.remove=function(P){for(var V=this._currentlyRunning,z=V?this._queue.concat(V):this._queue,j=0,te=z;j<te.length;j+=1){var le=te[j];if(le.id===P){le.cancelled=!0;return}}},Do.prototype.run=function(P){P===void 0&&(P=0);var V=this._currentlyRunning=this._queue;this._queue=[];for(var z=0,j=V;z<j.length;z+=1){var te=j[z];if(!te.cancelled&&(te.callback(P),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Do.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xg={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mv=i.window.HTMLImageElement,Bh=i.window.HTMLElement,qc=i.window.ImageBitmap,Yc=-2,Wc=22,$l=0,Xc=60,B1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Yc,maxZoom:Wc,minPitch:$l,maxPitch:Xc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$1=function(H){function P(z){var j=this;if(z=i.extend({},B1,z),z.minZoom!=null&&z.maxZoom!=null&&z.minZoom>z.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(z.minPitch!=null&&z.maxPitch!=null&&z.minPitch>z.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(z.minPitch!=null&&z.minPitch<$l)throw new Error("minPitch must be greater than or equal to "+$l);if(z.maxPitch!=null&&z.maxPitch>Xc)throw new Error("maxPitch must be less than or equal to "+Xc);var te=new Fi(z.minZoom,z.maxZoom,z.minPitch,z.maxPitch,z.renderWorldCopies);if(H.call(this,te,z),this._interactive=z.interactive,this._maxTileCacheSize=z.maxTileCacheSize,this._failIfMajorPerformanceCaveat=z.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=z.preserveDrawingBuffer,this._antialias=z.antialias,this._trackResize=z.trackResize,this._bearingSnap=z.bearingSnap,this._refreshExpiredTiles=z.refreshExpiredTiles,this._fadeDuration=z.fadeDuration,this._crossSourceCollisions=z.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=z.collectResourceTiming,this._renderTaskQueue=new Do,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},xg,z.locale),this._requestManager=new i.RequestManager(z.transformRequest,z.accessToken),typeof z.container=="string"){if(this._container=i.window.document.getElementById(z.container),!this._container)throw new Error("Container '"+z.container+"' not found.")}else if(z.container instanceof Bh)this._container=z.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(z.maxBounds&&this.setMaxBounds(z.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return j._update(!1)}),this.on("moveend",function(){return j._update(!1)}),this.on("zoom",function(){return j._update(!0)}),typeof i.window!="undefined"&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Qi(this,z);var le=typeof z.hash=="string"&&z.hash||void 0;this._hash=z.hash&&new bf(le).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:z.center,zoom:z.zoom,bearing:z.bearing,pitch:z.pitch}),z.bounds&&(this.resize(),this.fitBounds(z.bounds,i.extend({},z.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=z.localIdeographFontFamily,z.style&&this.setStyle(z.style,{localIdeographFontFamily:z.localIdeographFontFamily}),z.attributionControl&&this.addControl(new wf({customAttribution:z.customAttribution})),this.addControl(new ui,z.logoPosition),this.on("style.load",function(){j.transform.unmodified&&j.jumpTo(j.style.stylesheet)}),this.on("data",function(_e){j._update(_e.dataType==="style"),j.fire(new i.Event(_e.dataType+"data",_e))}),this.on("dataloading",function(_e){j.fire(new i.Event(_e.dataType+"dataloading",_e))})}H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P;var V={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return P.prototype._getMapId=function(){return this._mapId},P.prototype.addControl=function(j,te){if(te===void 0&&j.getDefaultPosition&&(te=j.getDefaultPosition()),te===void 0&&(te="top-right"),!j||!j.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var le=j.onAdd(this);this._controls.push(j);var _e=this._controlPositions[te];return te.indexOf("bottom")!==-1?_e.insertBefore(le,_e.firstChild):_e.appendChild(le),this},P.prototype.removeControl=function(j){if(!j||!j.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var te=this._controls.indexOf(j);return te>-1&&this._controls.splice(te,1),j.onRemove(this),this},P.prototype.resize=function(j){var te=this._containerDimensions(),le=te[0],_e=te[1];this._resizeCanvas(le,_e),this.transform.resize(le,_e),this.painter.resize(le,_e);var ke=!this._moving;return ke&&(this.stop(),this.fire(new i.Event("movestart",j)).fire(new i.Event("move",j))),this.fire(new i.Event("resize",j)),ke&&this.fire(new i.Event("moveend",j)),this},P.prototype.getBounds=function(){return this.transform.getBounds()},P.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},P.prototype.setMaxBounds=function(j){return this.transform.setMaxBounds(i.LngLatBounds.convert(j)),this._update()},P.prototype.setMinZoom=function(j){if(j=j==null?Yc:j,j>=Yc&&j<=this.transform.maxZoom)return this.transform.minZoom=j,this._update(),this.getZoom()<j&&this.setZoom(j),this;throw new Error("minZoom must be between "+Yc+" and the current maxZoom, inclusive")},P.prototype.getMinZoom=function(){return this.transform.minZoom},P.prototype.setMaxZoom=function(j){if(j=j==null?Wc:j,j>=this.transform.minZoom)return this.transform.maxZoom=j,this._update(),this.getZoom()>j&&this.setZoom(j),this;throw new Error("maxZoom must be greater than the current minZoom")},P.prototype.getMaxZoom=function(){return this.transform.maxZoom},P.prototype.setMinPitch=function(j){if(j=j==null?$l:j,j<$l)throw new Error("minPitch must be greater than or equal to "+$l);if(j>=$l&&j<=this.transform.maxPitch)return this.transform.minPitch=j,this._update(),this.getPitch()<j&&this.setPitch(j),this;throw new Error("minPitch must be between "+$l+" and the current maxPitch, inclusive")},P.prototype.getMinPitch=function(){return this.transform.minPitch},P.prototype.setMaxPitch=function(j){if(j=j==null?Xc:j,j>Xc)throw new Error("maxPitch must be less than or equal to "+Xc);if(j>=this.transform.minPitch)return this.transform.maxPitch=j,this._update(),this.getPitch()>j&&this.setPitch(j),this;throw new Error("maxPitch must be greater than the current minPitch")},P.prototype.getMaxPitch=function(){return this.transform.maxPitch},P.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},P.prototype.setRenderWorldCopies=function(j){return this.transform.renderWorldCopies=j,this._update()},P.prototype.project=function(j){return this.transform.locationPoint(i.LngLat.convert(j))},P.prototype.unproject=function(j){return this.transform.pointLocation(i.Point.convert(j))},P.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},P.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},P.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},P.prototype._createDelegatedListener=function(j,te,le){var _e=this,ke;if(j==="mouseenter"||j==="mouseover"){var Be=!1,rt=function(et){var ht=_e.getLayer(te)?_e.queryRenderedFeatures(et.point,{layers:[te]}):[];ht.length?Be||(Be=!0,le.call(_e,new Le(j,_e,et.originalEvent,{features:ht}))):Be=!1},ut=function(){Be=!1};return{layer:te,listener:le,delegates:{mousemove:rt,mouseout:ut}}}else if(j==="mouseleave"||j==="mouseout"){var gt=!1,me=function(et){var ht=_e.getLayer(te)?_e.queryRenderedFeatures(et.point,{layers:[te]}):[];ht.length?gt=!0:gt&&(gt=!1,le.call(_e,new Le(j,_e,et.originalEvent)))},Fe=function(et){gt&&(gt=!1,le.call(_e,new Le(j,_e,et.originalEvent)))};return{layer:te,listener:le,delegates:{mousemove:me,mouseout:Fe}}}else{var He=function(et){var ht=_e.getLayer(te)?_e.queryRenderedFeatures(et.point,{layers:[te]}):[];ht.length&&(et.features=ht,le.call(_e,et),delete et.features)};return{layer:te,listener:le,delegates:(ke={},ke[j]=He,ke)}}},P.prototype.on=function(j,te,le){if(le===void 0)return H.prototype.on.call(this,j,te);var _e=this._createDelegatedListener(j,te,le);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[j]=this._delegatedListeners[j]||[],this._delegatedListeners[j].push(_e);for(var ke in _e.delegates)this.on(ke,_e.delegates[ke]);return this},P.prototype.once=function(j,te,le){if(le===void 0)return H.prototype.once.call(this,j,te);var _e=this._createDelegatedListener(j,te,le);for(var ke in _e.delegates)this.once(ke,_e.delegates[ke]);return this},P.prototype.off=function(j,te,le){var _e=this;if(le===void 0)return H.prototype.off.call(this,j,te);var ke=function(Be){for(var rt=Be[j],ut=0;ut<rt.length;ut++){var gt=rt[ut];if(gt.layer===te&&gt.listener===le){for(var me in gt.delegates)_e.off(me,gt.delegates[me]);return rt.splice(ut,1),_e}}};return this._delegatedListeners&&this._delegatedListeners[j]&&ke(this._delegatedListeners),this},P.prototype.queryRenderedFeatures=function(j,te){if(!this.style)return[];te===void 0&&j!==void 0&&!(j instanceof i.Point)&&!Array.isArray(j)&&(te=j,j=void 0),te=te||{},j=j||[[0,0],[this.transform.width,this.transform.height]];var le;if(j instanceof i.Point||typeof j[0]=="number")le=[i.Point.convert(j)];else{var _e=i.Point.convert(j[0]),ke=i.Point.convert(j[1]);le=[_e,new i.Point(ke.x,_e.y),ke,new i.Point(_e.x,ke.y),_e]}return this.style.queryRenderedFeatures(le,te,this.transform)},P.prototype.querySourceFeatures=function(j,te){return this.style.querySourceFeatures(j,te)},P.prototype.setStyle=function(j,te){return te=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},te),te.diff!==!1&&te.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&j?(this._diffStyle(j,te),this):(this._localIdeographFontFamily=te.localIdeographFontFamily,this._updateStyle(j,te))},P.prototype._getUIString=function(j){var te=this._locale[j];if(te==null)throw new Error("Missing UI string '"+j+"'");return te},P.prototype._updateStyle=function(j,te){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),j)this.style=new Mc(this,te||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof j=="string"?this.style.loadURL(j):this.style.loadJSON(j),this},P.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Mc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},P.prototype._diffStyle=function(j,te){var le=this;if(typeof j=="string"){var _e=this._requestManager.normalizeStyleURL(j),ke=this._requestManager.transformRequest(_e,i.ResourceType.Style);i.getJSON(ke,function(Be,rt){Be?le.fire(new i.ErrorEvent(Be)):rt&&le._updateDiff(rt,te)})}else typeof j=="object"&&this._updateDiff(j,te)},P.prototype._updateDiff=function(j,te){try{this.style.setState(j)&&this._update(!0)}catch(le){i.warnOnce("Unable to perform style diff: "+(le.message||le.error||le)+".  Rebuilding the style from scratch."),this._updateStyle(j,te)}},P.prototype.getStyle=function(){if(this.style)return this.style.serialize()},P.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},P.prototype.addSource=function(j,te){return this._lazyInitEmptyStyle(),this.style.addSource(j,te),this._update(!0)},P.prototype.isSourceLoaded=function(j){var te=this.style&&this.style.sourceCaches[j];if(te===void 0){this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+j+"'")));return}return te.loaded()},P.prototype.areTilesLoaded=function(){var j=this.style&&this.style.sourceCaches;for(var te in j){var le=j[te],_e=le._tiles;for(var ke in _e){var Be=_e[ke];if(!(Be.state==="loaded"||Be.state==="errored"))return!1}}return!0},P.prototype.addSourceType=function(j,te,le){return this._lazyInitEmptyStyle(),this.style.addSourceType(j,te,le)},P.prototype.removeSource=function(j){return this.style.removeSource(j),this._update(!0)},P.prototype.getSource=function(j){return this.style.getSource(j)},P.prototype.addImage=function(j,te,le){le===void 0&&(le={});var _e=le.pixelRatio;_e===void 0&&(_e=1);var ke=le.sdf;ke===void 0&&(ke=!1);var Be=le.stretchX,rt=le.stretchY,ut=le.content;this._lazyInitEmptyStyle();var gt=0;if(te instanceof Mv||qc&&te instanceof qc){var me=i.browser.getImageData(te),Fe=me.width,He=me.height,et=me.data;this.style.addImage(j,{data:new i.RGBAImage({width:Fe,height:He},et),pixelRatio:_e,stretchX:Be,stretchY:rt,content:ut,sdf:ke,version:gt})}else{if(te.width===void 0||te.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ht=te.width,ct=te.height,At=te.data,Bt=te;this.style.addImage(j,{data:new i.RGBAImage({width:ht,height:ct},new Uint8Array(At)),pixelRatio:_e,stretchX:Be,stretchY:rt,content:ut,sdf:ke,version:gt,userImage:Bt}),Bt.onAdd&&Bt.onAdd(this,j)}},P.prototype.updateImage=function(j,te){var le=this.style.getImage(j);if(!le)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var _e=te instanceof Mv||qc&&te instanceof qc?i.browser.getImageData(te):te,ke=_e.width,Be=_e.height,rt=_e.data;if(ke===void 0||Be===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ke!==le.data.width||Be!==le.data.height)return this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ut=!(te instanceof Mv||qc&&te instanceof qc);le.data.replace(rt,ut),this.style.updateImage(j,le)},P.prototype.hasImage=function(j){return j?!!this.style.getImage(j):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},P.prototype.removeImage=function(j){this.style.removeImage(j)},P.prototype.loadImage=function(j,te){i.getImage(this._requestManager.transformRequest(j,i.ResourceType.Image),te)},P.prototype.listImages=function(){return this.style.listImages()},P.prototype.addLayer=function(j,te){return this._lazyInitEmptyStyle(),this.style.addLayer(j,te),this._update(!0)},P.prototype.moveLayer=function(j,te){return this.style.moveLayer(j,te),this._update(!0)},P.prototype.removeLayer=function(j){return this.style.removeLayer(j),this._update(!0)},P.prototype.getLayer=function(j){return this.style.getLayer(j)},P.prototype.setLayerZoomRange=function(j,te,le){return this.style.setLayerZoomRange(j,te,le),this._update(!0)},P.prototype.setFilter=function(j,te,le){return le===void 0&&(le={}),this.style.setFilter(j,te,le),this._update(!0)},P.prototype.getFilter=function(j){return this.style.getFilter(j)},P.prototype.setPaintProperty=function(j,te,le,_e){return _e===void 0&&(_e={}),this.style.setPaintProperty(j,te,le,_e),this._update(!0)},P.prototype.getPaintProperty=function(j,te){return this.style.getPaintProperty(j,te)},P.prototype.setLayoutProperty=function(j,te,le,_e){return _e===void 0&&(_e={}),this.style.setLayoutProperty(j,te,le,_e),this._update(!0)},P.prototype.getLayoutProperty=function(j,te){return this.style.getLayoutProperty(j,te)},P.prototype.setLight=function(j,te){return te===void 0&&(te={}),this._lazyInitEmptyStyle(),this.style.setLight(j,te),this._update(!0)},P.prototype.getLight=function(){return this.style.getLight()},P.prototype.setFeatureState=function(j,te){return this.style.setFeatureState(j,te),this._update()},P.prototype.removeFeatureState=function(j,te){return this.style.removeFeatureState(j,te),this._update()},P.prototype.getFeatureState=function(j){return this.style.getFeatureState(j)},P.prototype.getContainer=function(){return this._container},P.prototype.getCanvasContainer=function(){return this._canvasContainer},P.prototype.getCanvas=function(){return this._canvas},P.prototype._containerDimensions=function(){var j=0,te=0;return this._container&&(j=this._container.clientWidth||400,te=this._container.clientHeight||300),[j,te]},P.prototype._detectMissingCSS=function(){var j=i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");j!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},P.prototype._setupContainer=function(){var j=this._container;j.classList.add("mapboxgl-map");var te=this._missingCSSCanary=l.create("div","mapboxgl-canary",j);te.style.visibility="hidden",this._detectMissingCSS();var le=this._canvasContainer=l.create("div","mapboxgl-canvas-container",j);this._interactive&&le.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",le),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var _e=this._containerDimensions();this._resizeCanvas(_e[0],_e[1]);var ke=this._controlContainer=l.create("div","mapboxgl-control-container",j),Be=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(rt){Be[rt]=l.create("div","mapboxgl-ctrl-"+rt,ke)})},P.prototype._resizeCanvas=function(j,te){var le=i.browser.devicePixelRatio||1;this._canvas.width=le*j,this._canvas.height=le*te,this._canvas.style.width=j+"px",this._canvas.style.height=te+"px"},P.prototype._setupPainter=function(){var j=i.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),te=this._canvas.getContext("webgl",j)||this._canvas.getContext("experimental-webgl",j);if(!te){this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new hi(te,this.transform),i.webpSupported.testSupport(te)},P.prototype._contextLost=function(j){j.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:j}))},P.prototype._contextRestored=function(j){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:j}))},P.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},P.prototype._update=function(j){return this.style?(this._styleDirty=this._styleDirty||j,this._sourcesDirty=!0,this.triggerRepaint(),this):this},P.prototype._requestRenderFrame=function(j){return this._update(),this._renderTaskQueue.add(j)},P.prototype._cancelRenderFrame=function(j){this._renderTaskQueue.remove(j)},P.prototype._render=function(j){var te=this,le,_e=0,ke=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(le=ke.createQueryEXT(),ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,le),_e=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(j),!this._removed){var Be=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var rt=this.transform.zoom,ut=i.browser.now();this.style.zoomHistory.update(rt,ut);var gt=new i.EvaluationParameters(rt,{now:ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),me=gt.crossFadingFactor();(me!==1||me!==this._crossFadingFactor)&&(Be=!0,this._crossFadingFactor=me),this.style.update(gt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||Be)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Fe=i.browser.now()-_e;ke.endQueryEXT(ke.TIME_ELAPSED_EXT,le),setTimeout(function(){var ht=ke.getQueryObjectEXT(le,ke.QUERY_RESULT_EXT)/(1e3*1e3);ke.deleteQueryEXT(le),te.fire(new i.Event("gpu-timing-frame",{cpuTime:Fe,gpuTime:ht}))},50)}if(this.listens("gpu-timing-layer")){var He=this.painter.collectGpuTimers();setTimeout(function(){var ht=te.painter.queryGpuTimers(He);te.fire(new i.Event("gpu-timing-layer",{layerTimes:ht}))},50)}var et=this._sourcesDirty||this._styleDirty||this._placementDirty;return et||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new i.Event("idle"))),this}},P.prototype.remove=function(){this._hash&&this._hash.remove();for(var j=0,te=this._controls;j<te.length;j+=1){var le=te[j];le.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof i.window!="undefined"&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var _e=this.painter.context.gl.getExtension("WEBGL_lose_context");_e&&_e.loseContext(),bg(this._canvasContainer),bg(this._controlContainer),bg(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},P.prototype.triggerRepaint=function(){var j=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(te){j._frame=null,j._render(te)}))},P.prototype._onWindowOnline=function(){this._update()},P.prototype._onWindowResize=function(j){this._trackResize&&this.resize({originalEvent:j})._update()},V.showTileBoundaries.get=function(){return!!this._showTileBoundaries},V.showTileBoundaries.set=function(z){this._showTileBoundaries!==z&&(this._showTileBoundaries=z,this._update())},V.showPadding.get=function(){return!!this._showPadding},V.showPadding.set=function(z){this._showPadding!==z&&(this._showPadding=z,this._update())},V.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},V.showCollisionBoxes.set=function(z){this._showCollisionBoxes!==z&&(this._showCollisionBoxes=z,z?this.style._generateCollisionBoxes():this._update())},V.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},V.showOverdrawInspector.set=function(z){this._showOverdrawInspector!==z&&(this._showOverdrawInspector=z,this._update())},V.repaint.get=function(){return!!this._repaint},V.repaint.set=function(z){this._repaint!==z&&(this._repaint=z,this.triggerRepaint())},V.vertices.get=function(){return!!this._vertices},V.vertices.set=function(z){this._vertices=z,this._update()},P.prototype._setCacheLimits=function(j,te){i.setCacheLimits(j,te)},V.version.get=function(){return i.version},Object.defineProperties(P.prototype,V),P}(Ld);function bg(H){H.parentNode&&H.parentNode.removeChild(H)}var Kf={showCompass:!0,showZoom:!0,visualizePitch:!1},Zc=function(P){var V=this;this.options=i.extend({},Kf,P),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(z){return z.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(z){return V._map.zoomIn({},{originalEvent:z})}),l.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(z){return V._map.zoomOut({},{originalEvent:z})}),l.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(z){V.options.visualizePitch?V._map.resetNorthPitch({},{originalEvent:z}):V._map.resetNorth({},{originalEvent:z})}),this._compassIcon=l.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Zc.prototype._updateZoomButtons=function(){var P=this._map.getZoom();this._zoomInButton.disabled=P===this._map.getMaxZoom(),this._zoomOutButton.disabled=P===this._map.getMinZoom()},Zc.prototype._rotateCompassArrow=function(){var P=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=P},Zc.prototype.onAdd=function(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new tu(this._map,this._compass,this.options.visualizePitch)),this._container},Zc.prototype.onRemove=function(){l.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Zc.prototype._createButton=function(P,V){var z=l.create("button",P,this._container);return z.type="button",z.addEventListener("click",V),z},Zc.prototype._setButtonTitle=function(P,V){var z=this._map._getUIString("NavigationControl."+V);P.title=z,P.setAttribute("aria-label",z)};var tu=function(P,V,z){z===void 0&&(z=!1),this._clickTolerance=10,this.element=V,this.mouseRotate=new Ma({clickTolerance:P.dragRotate._mouseRotate._clickTolerance}),this.map=P,z&&(this.mousePitch=new Ba({clickTolerance:P.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener(V,"mousedown",this.mousedown),l.addEventListener(V,"touchstart",this.touchstart,{passive:!1}),l.addEventListener(V,"touchmove",this.touchmove),l.addEventListener(V,"touchend",this.touchend),l.addEventListener(V,"touchcancel",this.reset)};tu.prototype.down=function(P,V){this.mouseRotate.mousedown(P,V),this.mousePitch&&this.mousePitch.mousedown(P,V),l.disableDrag()},tu.prototype.move=function(P,V){var z=this.map,j=this.mouseRotate.mousemoveWindow(P,V);if(j&&j.bearingDelta&&z.setBearing(z.getBearing()+j.bearingDelta),this.mousePitch){var te=this.mousePitch.mousemoveWindow(P,V);te&&te.pitchDelta&&z.setPitch(z.getPitch()+te.pitchDelta)}},tu.prototype.off=function(){var P=this.element;l.removeEventListener(P,"mousedown",this.mousedown),l.removeEventListener(P,"touchstart",this.touchstart,{passive:!1}),l.removeEventListener(P,"touchmove",this.touchmove),l.removeEventListener(P,"touchend",this.touchend),l.removeEventListener(P,"touchcancel",this.reset),this.offTemp()},tu.prototype.offTemp=function(){l.enableDrag(),l.removeEventListener(i.window,"mousemove",this.mousemove),l.removeEventListener(i.window,"mouseup",this.mouseup)},tu.prototype.mousedown=function(P){this.down(i.extend({},P,{ctrlKey:!0,preventDefault:function(){return P.preventDefault()}}),l.mousePos(this.element,P)),l.addEventListener(i.window,"mousemove",this.mousemove),l.addEventListener(i.window,"mouseup",this.mouseup)},tu.prototype.mousemove=function(P){this.move(P,l.mousePos(this.element,P))},tu.prototype.mouseup=function(P){this.mouseRotate.mouseupWindow(P),this.mousePitch&&this.mousePitch.mouseupWindow(P),this.offTemp()},tu.prototype.touchstart=function(P){P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=l.touchPos(this.element,P.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return P.preventDefault()}},this._startPos))},tu.prototype.touchmove=function(P){P.targetTouches.length!==1?this.reset():(this._lastPos=l.touchPos(this.element,P.targetTouches)[0],this.move({preventDefault:function(){return P.preventDefault()}},this._lastPos))},tu.prototype.touchend=function(P){P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},tu.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Kc(H,P,V){if(H=new i.LngLat(H.lng,H.lat),P){var z=new i.LngLat(H.lng-360,H.lat),j=new i.LngLat(H.lng+360,H.lat),te=V.locationPoint(H).distSqr(P);V.locationPoint(z).distSqr(P)<te?H=z:V.locationPoint(j).distSqr(P)<te&&(H=j)}for(;Math.abs(H.lng-V.center.lng)>180;){var le=V.locationPoint(H);if(le.x>=0&&le.y>=0&&le.x<=V.width&&le.y<=V.height)break;H.lng>V.center.lng?H.lng-=360:H.lng+=360}return H}var _g={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wg(H,P,V){var z=H.classList;for(var j in _g)z.remove("mapboxgl-"+V+"-anchor-"+j);z.add("mapboxgl-"+V+"-anchor-"+P)}var Fp=function(H){function P(V,z){var j=this;if(H.call(this),(V instanceof i.window.HTMLElement||z)&&(V=i.extend({element:V},z)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=V&&V.anchor||"center",this._color=V&&V.color||"#3FB1CE",this._draggable=V&&V.draggable||!1,this._state="inactive",this._rotation=V&&V.rotation||0,this._rotationAlignment=V&&V.rotationAlignment||"auto",this._pitchAlignment=V&&V.pitchAlignment&&V.pitchAlignment!=="auto"?V.pitchAlignment:this._rotationAlignment,!V||!V.element){this._defaultMarker=!0,this._element=l.create("div"),this._element.setAttribute("aria-label","Map marker");var te=l.createNS("http://www.w3.org/2000/svg","svg");te.setAttributeNS(null,"display","block"),te.setAttributeNS(null,"height","41px"),te.setAttributeNS(null,"width","27px"),te.setAttributeNS(null,"viewBox","0 0 27 41");var le=l.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"stroke","none"),le.setAttributeNS(null,"stroke-width","1"),le.setAttributeNS(null,"fill","none"),le.setAttributeNS(null,"fill-rule","evenodd");var _e=l.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"fill-rule","nonzero");var ke=l.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ke.setAttributeNS(null,"fill","#000000");for(var Be=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],rt=0,ut=Be;rt<ut.length;rt+=1){var gt=ut[rt],me=l.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",gt.rx),me.setAttributeNS(null,"ry",gt.ry),ke.appendChild(me)}var Fe=l.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"fill",this._color);var He=l.createNS("http://www.w3.org/2000/svg","path");He.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Fe.appendChild(He);var et=l.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"opacity","0.25"),et.setAttributeNS(null,"fill","#000000");var ht=l.createNS("http://www.w3.org/2000/svg","path");ht.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),et.appendChild(ht);var ct=l.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ct.setAttributeNS(null,"fill","#FFFFFF");var At=l.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Bt=l.createNS("http://www.w3.org/2000/svg","circle");Bt.setAttributeNS(null,"fill","#000000"),Bt.setAttributeNS(null,"opacity","0.25"),Bt.setAttributeNS(null,"cx","5.5"),Bt.setAttributeNS(null,"cy","5.5"),Bt.setAttributeNS(null,"r","5.4999962");var Yt=l.createNS("http://www.w3.org/2000/svg","circle");Yt.setAttributeNS(null,"fill","#FFFFFF"),Yt.setAttributeNS(null,"cx","5.5"),Yt.setAttributeNS(null,"cy","5.5"),Yt.setAttributeNS(null,"r","5.4999962"),At.appendChild(Bt),At.appendChild(Yt),_e.appendChild(ke),_e.appendChild(Fe),_e.appendChild(et),_e.appendChild(ct),_e.appendChild(At),te.appendChild(_e),this._element.appendChild(te),this._offset=i.Point.convert(V&&V.offset||[0,-14])}else this._element=V.element,this._offset=i.Point.convert(V&&V.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Qt){Qt.preventDefault()}),this._element.addEventListener("mousedown",function(Qt){Qt.preventDefault()}),this._element.addEventListener("focus",function(){var Qt=j._map.getContainer();Qt.scrollTop=0,Qt.scrollLeft=0}),wg(this._element,this._anchor,"marker"),this._popup=null}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.addTo=function(z){return this.remove(),this._map=z,z.getCanvasContainer().appendChild(this._element),z.on("move",this._update),z.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},P.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},P.prototype.getLngLat=function(){return this._lngLat},P.prototype.setLngLat=function(z){return this._lngLat=i.LngLat.convert(z),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},P.prototype.getElement=function(){return this._element},P.prototype.setPopup=function(z){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),z){if(!("offset"in z.options)){var j=41-5.8/2,te=13.5,le=Math.sqrt(Math.pow(te,2)/2);z.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-j],"bottom-left":[le,(j-te+le)*-1],"bottom-right":[-le,(j-te+le)*-1],left:[te,(j-te)*-1],right:[-te,(j-te)*-1]}:this._offset}this._popup=z,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},P.prototype._onKeyPress=function(z){var j=z.code,te=z.charCode||z.keyCode;(j==="Space"||j==="Enter"||te===32||te===13)&&this.togglePopup()},P.prototype._onMapClick=function(z){var j=z.originalEvent.target,te=this._element;this._popup&&(j===te||te.contains(j))&&this.togglePopup()},P.prototype.getPopup=function(){return this._popup},P.prototype.togglePopup=function(){var z=this._popup;if(z)z.isOpen()?z.remove():z.addTo(this._map);else return this;return this},P.prototype._update=function(z){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Kc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var j="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?j="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(j="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var te="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?te="rotateX(0deg)":this._pitchAlignment==="map"&&(te="rotateX("+this._map.getPitch()+"deg)"),(!z||z.type==="moveend")&&(this._pos=this._pos.round()),l.setTransform(this._element,_g[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+te+" "+j)}},P.prototype.getOffset=function(){return this._offset},P.prototype.setOffset=function(z){return this._offset=i.Point.convert(z),this._update(),this},P.prototype._onMove=function(z){this._pos=z.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))},P.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},P.prototype._addDragHandler=function(z){this._element.contains(z.originalEvent.target)&&(z.preventDefault(),this._positionDelta=z.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},P.prototype.setDraggable=function(z){return this._draggable=!!z,this._map&&(z?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},P.prototype.isDraggable=function(){return this._draggable},P.prototype.setRotation=function(z){return this._rotation=z||0,this._update(),this},P.prototype.getRotation=function(){return this._rotation},P.prototype.setRotationAlignment=function(z){return this._rotationAlignment=z||"auto",this._update(),this},P.prototype.getRotationAlignment=function(){return this._rotationAlignment},P.prototype.setPitchAlignment=function(z){return this._pitchAlignment=z&&z!=="auto"?z:this._rotationAlignment,this._update(),this},P.prototype.getPitchAlignment=function(){return this._pitchAlignment},P}(i.Evented),Tf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},$h;function Jc(H){$h!==void 0?H($h):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(P){$h=P.state!=="denied",H($h)}):($h=!!i.window.navigator.geolocation,H($h))}var Gu=0,Uh=!1,Tg=function(H){function P(V){H.call(this),this.options=i.extend({},Tf,V),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.onAdd=function(z){return this._map=z,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Jc(this._setupUI),this._container},P.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),l.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gu=0,Uh=!1},P.prototype._isOutOfMapMaxBounds=function(z){var j=this._map.getMaxBounds(),te=z.coords;return j&&(te.longitude<j.getWest()||te.longitude>j.getEast()||te.latitude<j.getSouth()||te.latitude>j.getNorth())},P.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},P.prototype._onSuccess=function(z){if(!!this._map){if(this._isOutOfMapMaxBounds(z)){this._setErrorState(),this.fire(new i.Event("outofmaxbounds",z)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=z,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(z),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(z),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",z)),this._finish()}},P.prototype._updateCamera=function(z){var j=new i.LngLat(z.coords.longitude,z.coords.latitude),te=z.coords.accuracy,le=this._map.getBearing(),_e=i.extend({bearing:le},this.options.fitBoundsOptions);this._map.fitBounds(j.toBounds(te),_e,{geolocateSource:!0})},P.prototype._updateMarker=function(z){if(z){var j=new i.LngLat(z.coords.longitude,z.coords.latitude);this._accuracyCircleMarker.setLngLat(j).addTo(this._map),this._userLocationDotMarker.setLngLat(j).addTo(this._map),this._accuracy=z.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},P.prototype._updateCircleRadius=function(){var z=this._map._container.clientHeight/2,j=this._map.unproject([0,z]),te=this._map.unproject([1,z]),le=j.distanceTo(te),_e=Math.ceil(2*this._accuracy/le);this._circleElement.style.width=_e+"px",this._circleElement.style.height=_e+"px"},P.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},P.prototype._onError=function(z){if(!!this._map){if(this.options.trackUserLocation)if(z.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var j=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=j,this._geolocateButton.setAttribute("aria-label",j),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(z.code===3&&Uh)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",z)),this._finish()}},P.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},P.prototype._setupUI=function(z){var j=this;if(this._container.addEventListener("contextmenu",function(_e){return _e.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-geolocate",this._container),l.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",z===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te)}else{var le=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=le,this._geolocateButton.setAttribute("aria-label",le)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Fp(this._dotElement),this._circleElement=l.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(_e){var ke=_e.originalEvent&&_e.originalEvent.type==="resize";!_e.geolocateSource&&j._watchState==="ACTIVE_LOCK"&&!ke&&(j._watchState="BACKGROUND",j._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),j._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),j.fire(new i.Event("trackuserlocationend")))})},P.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gu--,Uh=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gu++;var z;Gu>1?(z={maximumAge:6e5,timeout:0},Uh=!0):(z=this.options.positionOptions,Uh=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,z)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},P.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},P}(i.Evented),Ag={maxWidth:100,unit:"metric"},Hh=function(P){this.options=i.extend({},Ag,P),i.bindAll(["_onMove","setUnit"],this)};Hh.prototype.getDefaultPosition=function(){return"bottom-left"},Hh.prototype._onMove=function(){ys(this._map,this._container,this.options)},Hh.prototype.onAdd=function(P){return this._map=P,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Hh.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Hh.prototype.setUnit=function(P){this.options.unit=P,ys(this._map,this._container,this.options)};function ys(H,P,V){var z=V&&V.maxWidth||100,j=H._container.clientHeight/2,te=H.unproject([0,j]),le=H.unproject([z,j]),_e=te.distanceTo(le);if(V&&V.unit==="imperial"){var ke=3.2808*_e;if(ke>5280){var Be=ke/5280;Vu(P,z,Be,H._getUIString("ScaleControl.Miles"))}else Vu(P,z,ke,H._getUIString("ScaleControl.Feet"))}else if(V&&V.unit==="nautical"){var rt=_e/1852;Vu(P,z,rt,H._getUIString("ScaleControl.NauticalMiles"))}else _e>=1e3?Vu(P,z,_e/1e3,H._getUIString("ScaleControl.Kilometers")):Vu(P,z,_e,H._getUIString("ScaleControl.Meters"))}function Vu(H,P,V,z){var j=ru(V),te=j/V;H.style.width=P*te+"px",H.innerHTML=j+"&nbsp;"+z}function ls(H){var P=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*P)/P}function ru(H){var P=Math.pow(10,(""+Math.floor(H)).length-1),V=H/P;return V=V>=10?10:V>=5?5:V>=3?3:V>=2?2:V>=1?1:ls(V),P*V}var Af=function(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof i.window.HTMLElement?this._container=P.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};Af.prototype.onAdd=function(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Af.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Af.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},Af.prototype._setupUI=function(){var P=this._fullscreenButton=l.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);l.create("span","mapboxgl-ctrl-icon",P).setAttribute("aria-hidden",!0),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Af.prototype._updateTitle=function(){var P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P},Af.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Af.prototype._isFullscreen=function(){return this._fullscreen},Af.prototype._changeIcon=function(){var P=i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement;P===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Af.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ub={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Hb=function(H){function P(V){H.call(this),this.options=i.extend(Object.create(Ub),V),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return H&&(P.__proto__=H),P.prototype=Object.create(H&&H.prototype),P.prototype.constructor=P,P.prototype.addTo=function(z){return this._map&&this.remove(),this._map=z,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},P.prototype.isOpen=function(){return!!this._map},P.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},P.prototype.getLngLat=function(){return this._lngLat},P.prototype.setLngLat=function(z){return this._lngLat=i.LngLat.convert(z),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},P.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},P.prototype.getElement=function(){return this._container},P.prototype.setText=function(z){return this.setDOMContent(i.window.document.createTextNode(z))},P.prototype.setHTML=function(z){var j=i.window.document.createDocumentFragment(),te=i.window.document.createElement("body"),le;for(te.innerHTML=z;le=te.firstChild,!!le;)j.appendChild(le);return this.setDOMContent(j)},P.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},P.prototype.setMaxWidth=function(z){return this.options.maxWidth=z,this._update(),this},P.prototype.setDOMContent=function(z){return this._createContent(),this._content.appendChild(z),this._update(),this},P.prototype.addClassName=function(z){this._container&&this._container.classList.add(z)},P.prototype.removeClassName=function(z){this._container&&this._container.classList.remove(z)},P.prototype.toggleClassName=function(z){if(this._container)return this._container.classList.toggle(z)},P.prototype._createContent=function(){this._content&&l.remove(this._content),this._content=l.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},P.prototype._onMouseUp=function(z){this._update(z.point)},P.prototype._onMouseMove=function(z){this._update(z.point)},P.prototype._onDrag=function(z){this._update(z.point)},P.prototype._update=function(z){var j=this,te=this._lngLat||this._trackPointer;if(!(!this._map||!te||!this._content)&&(this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(me){return j._container.classList.add(me)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Kc(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!z))){var le=this._pos=this._trackPointer&&z?z:this._map.project(this._lngLat),_e=this.options.anchor,ke=U1(this.options.offset);if(!_e){var Be=this._container.offsetWidth,rt=this._container.offsetHeight,ut;le.y+ke.bottom.y<rt?ut=["top"]:le.y>this._map.transform.height-rt?ut=["bottom"]:ut=[],le.x<Be/2?ut.push("left"):le.x>this._map.transform.width-Be/2&&ut.push("right"),ut.length===0?_e="bottom":_e=ut.join("-")}var gt=le.add(ke[_e]).round();l.setTransform(this._container,_g[_e]+" translate("+gt.x+"px,"+gt.y+"px)"),wg(this._container,_e,"popup")}},P.prototype._onClose=function(){this.remove()},P}(i.Evented);function U1(H){if(H)if(typeof H=="number"){var P=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new i.Point(0,0),top:new i.Point(0,H),"top-left":new i.Point(P,P),"top-right":new i.Point(-P,P),bottom:new i.Point(0,-H),"bottom-left":new i.Point(P,-P),"bottom-right":new i.Point(-P,-P),left:new i.Point(H,0),right:new i.Point(-H,0)}}else if(H instanceof i.Point||Array.isArray(H)){var V=i.Point.convert(H);return{center:V,top:V,"top-left":V,"top-right":V,bottom:V,"bottom-left":V,"bottom-right":V,left:V,right:V}}else return{center:i.Point.convert(H.center||[0,0]),top:i.Point.convert(H.top||[0,0]),"top-left":i.Point.convert(H["top-left"]||[0,0]),"top-right":i.Point.convert(H["top-right"]||[0,0]),bottom:i.Point.convert(H.bottom||[0,0]),"bottom-left":i.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(H["bottom-right"]||[0,0]),left:i.Point.convert(H.left||[0,0]),right:i.Point.convert(H.right||[0,0])};else return U1(new i.Point(0,0))}var Gb={version:i.version,supported:s,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:$1,NavigationControl:Zc,GeolocateControl:Tg,AttributionControl:wf,ScaleControl:Hh,FullscreenControl:Af,Popup:Hb,Marker:Fp,Style:Mc,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:La,clearPrewarmedResources:en,get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(H){i.config.ACCESS_TOKEN=H},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(H){i.config.API_URL=H},get workerCount(){return Ur.workerCount},set workerCount(H){Ur.workerCount=H},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(H){i.config.MAX_PARALLEL_IMAGE_REQUESTS=H},clearStorage:function(P){i.clearTileCache(P)},workerUrl:""};return Gb}),n})})(VH);var gb=bt.exports,hbt=xo.sanitizeHTML,vbt=jye,Jye=db;function Qye(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=Jye.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var Jv=Qye.prototype;Jv.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=RI(t)};Jv.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};Jv.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};Jv.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};Jv.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};Jv.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};Jv.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!RI(e)){var r=dbt(e);t.addSource(this.idSource,r)}};Jv.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var a=t[r].id;if(typeof a=="string"&&a.indexOf(Jye.traceLayerPrefix)===0){e=a;break}}return e};Jv.updateLayer=function(e){var t=this.subplot,r=e1e(e),a=this.lookupBelow(),n=this.findFollowingMapboxLayerId(a);this.removeLayer(),RI(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},n),this.layerType=e.type,this.below=a};Jv.updateStyle=function(e){if(RI(e)){var t=e1e(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};Jv.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};Jv.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function RI(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return gb.isPlainObject(t)||typeof t=="string"&&t.length>0}function e1e(e){var t={},r={};switch(e.type){case"circle":gb.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":gb.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":gb.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var a=e.symbol,n=vbt(a.textposition,a.iconsize);gb.extendFlat(t,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":n.anchor,"text-offset":n.offset,"symbol-placement":a.placement}),gb.extendFlat(r,{"icon-color":e.color,"text-color":a.textfont.color,"text-opacity":e.opacity});break;case"raster":gb.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function dbt(e){var t=e.sourcetype,r=e.source,a={type:t},n;return t==="geojson"?n="data":t==="vector"?n=typeof r=="string"?"url":"tiles":t==="raster"?(n="tiles",a.tileSize=256):t==="image"&&(n="url",a.coordinates=e.coordinates),a[n]=r,e.sourceattribution&&(a.attribution=hbt(e.sourceattribution)),a}var pbt=function(t,r,a){var n=new Qye(t,r);return n.update(a),n},jH=VH.exports,qH=bt.exports,t1e=_S,r1e=Pa,gbt=rn.exports,mbt=kf.exports,zI=Rs,YH=Jp,ybt=YH.rectMode,xbt=YH.drawMode,bbt=YH.selectMode,_bt=lu.prepSelect,wbt=lu.clearSelect,Tbt=lu.clearSelectionsCache,Abt=lu.selectOnClick,u1=db,Sbt=pbt;function a1e(e,t){this.id=t,this.gd=e;var r=e._fullLayout,a=e._context;this.container=r._glcontainer.node(),this.isStatic=a.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var ml=a1e.prototype;ml.plot=function(e,t,r){var a=this,n=t[a.id];a.map&&n.accesstoken!==a.accessToken&&(a.map.remove(),a.map=null,a.styleObj=null,a.traceHash={},a.layerList=[]);var o;a.map?o=new Promise(function(i,s){a.updateMap(e,t,i,s)}):o=new Promise(function(i,s){a.createMap(e,t,i,s)}),r.push(o)};ml.createMap=function(e,t,r,a){var n=this,o=t[n.id],i=n.styleObj=i1e(o.style);n.accessToken=o.accesstoken;var s=n.map=new jH.Map({container:n.div,style:i.style,center:WH(o.center),zoom:o.zoom,bearing:o.bearing,pitch:o.pitch,interactive:!n.isStatic,preserveDrawingBuffer:n.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new jH.AttributionControl({compact:!0}));s._canvas.style.left="0px",s._canvas.style.top="0px",n.rejectOnError(a),n.isStatic||n.initFx(e,t);var l=[];l.push(new Promise(function(u){s.once("load",u)})),l=l.concat(t1e.fetchTraceGeoData(e)),Promise.all(l).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(a)};ml.updateMap=function(e,t,r,a){var n=this,o=n.map,i=t[this.id];n.rejectOnError(a);var s=[],l=i1e(i.style);JSON.stringify(n.styleObj)!==JSON.stringify(l)&&(n.styleObj=l,o.setStyle(l.style),n.traceHash={},s.push(new Promise(function(u){o.once("styledata",u)}))),s=s.concat(t1e.fetchTraceGeoData(e)),Promise.all(s).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(a)};ml.fillBelowLookup=function(e,t){var r=t[this.id],a=r.layers,n,o,i=this.belowLookup={},s=!1;for(n=0;n<e.length;n++){var l=e[n][0].trace,u=l._module;typeof l.below=="string"?o=l.below:u.getBelow&&(o=u.getBelow(l,this)),o===""&&(s=!0),i["trace-"+l.uid]=o||""}for(n=0;n<a.length;n++){var f=a[n];typeof f.below=="string"?o=f.below:s?o="traces":o="",i["layout-"+n]=o}var c={},h,v;for(h in i)o=i[h],c[o]?c[o].push(h):c[o]=[h];for(o in c){var p=c[o];if(p.length>1)for(n=0;n<p.length;n++)h=p[n],h.indexOf("trace-")===0?(v=h.split("trace-")[1],this.traceHash[v]&&(this.traceHash[v].below=null)):h.indexOf("layout-")===0&&(v=h.split("layout-")[1],this.layerList[v]&&(this.layerList[v].below=null))}};var n1e={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};ml.updateData=function(e){var t=this.traceHash,r,a,n,o,i=e.slice().sort(function(c,h){return n1e[c[0].trace.type]-n1e[h[0].trace.type]});for(n=0;n<i.length;n++){var s=i[n];a=s[0].trace,r=t[a.uid];var l=!1;r&&(r.type===a.type?(r.update(s),l=!0):r.dispose()),!l&&a._module&&(t[a.uid]=a._module.plot(this,s))}var u=Object.keys(t);e:for(n=0;n<u.length;n++){var f=u[n];for(o=0;o<e.length;o++)if(a=e[o][0].trace,f===a.uid)continue e;r=t[f],r.dispose(),delete t[f]}};ml.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(WH(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};ml.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};ml.rejectOnError=function(e){var t=this.map;function r(){e(new Error(u1.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};ml.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(a){return t.project(a).x}},t.yaxis={_id:"y",c2p:function(a){return t.project(a).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},gbt.setConvert(t.mockAxis,e)};ml.initFx=function(e,t){var r=this,a=r.gd,n=r.map;n.on("moveend",function(s){if(!!r.map){var l=a._fullLayout;if(s.originalEvent||r.wheeling){var u=l[r.id];r1e.call("_storeDirectGUIEdit",a.layout,l._preGUI,r.getViewEdits(u));var f=r.getView();u._input.center=u.center=f.center,u._input.zoom=u.zoom=f.zoom,u._input.bearing=u.bearing=f.bearing,u._input.pitch=u.pitch=f.pitch,a.emit("plotly_relayout",r.getViewEditsWithDerived(f))}s.originalEvent&&s.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),l._rehover&&l._rehover()}}),n.on("wheel",function(){r.wheeling=!0}),n.on("mousemove",function(s){var l=r.div.getBoundingClientRect(),u=[s.originalEvent.offsetX,s.originalEvent.offsetY];s.target.getBoundingClientRect=function(){return l},r.xaxis.p2c=function(){return n.unproject(u).lng},r.yaxis.p2c=function(){return n.unproject(u).lat},a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===r.id&&a._fullLayout[r.id]&&zI.hover(a,s,r.id)},zI.hover(a,s,r.id),a._fullLayout._hoversubplot=r.id});function o(){zI.loneUnhover(t._hoverlayer)}n.on("dragstart",function(){r.dragging=!0,o()}),n.on("zoomstart",o),n.on("mouseout",function(){a._fullLayout._hoversubplot=null});function i(){var s=r.getView();a.emit("plotly_relayouting",r.getViewEditsWithDerived(s))}n.on("drag",i),n.on("zoom",i),n.on("dblclick",function(){var s=a._fullLayout[r.id];r1e.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,r.getViewEdits(s));var l=r.viewInitial;n.setCenter(WH(l.center)),n.setZoom(l.zoom),n.setBearing(l.bearing),n.setPitch(l.pitch);var u=r.getView();s._input.center=s.center=u.center,s._input.zoom=s.zoom=u.zoom,s._input.bearing=s.bearing=u.bearing,s._input.pitch=s.pitch=u.pitch,a.emit("plotly_doubleclick",null),a.emit("plotly_relayout",r.getViewEditsWithDerived(u))}),r.clearSelect=function(){Tbt(r.dragOptions),wbt(r.dragOptions.gd)},r.onClickInPanFn=function(s){return function(l){var u=a._fullLayout.clickmode;u.indexOf("select")>-1&&Abt(l.originalEvent,a,[r.xaxis],[r.yaxis],r.id,s),u.indexOf("event")>-1&&zI.click(a,l.originalEvent)}}};ml.updateFx=function(e){var t=this,r=t.map,a=t.gd;if(t.isStatic)return;function n(l){var u=t.map.unproject(l);return[u.lng,u.lat]}var o=e.dragmode,i;ybt(o)?i=function(l,u){var f=l.range={};f[t.id]=[n([u.xmin,u.ymin]),n([u.xmax,u.ymax])]}:i=function(l,u,f){var c=l.lassoPoints={};c[t.id]=f.filtered.map(n)};var s=t.dragOptions;t.dragOptions=qH.extendDeep(s||{},{dragmode:e.dragmode,element:t.div,gd:a,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:i},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),bbt(o)||xbt(o)?(r.dragPan.disable(),r.on("zoomstart",t.clearSelect),t.dragOptions.prepFn=function(l,u,f){_bt(l,u,f,t.dragOptions,o)},mbt.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearSelect),t.div.onmousedown=null,t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};ml.updateFramework=function(e){var t=e[this.id].domain,r=e._size,a=this.div.style;a.width=r.w*(t.x[1]-t.x[0])+"px",a.height=r.h*(t.y[1]-t.y[0])+"px",a.left=r.l+t.x[0]*r.w+"px",a.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};ml.updateLayers=function(e){var t=e[this.id],r=t.layers,a=this.layerList,n;if(r.length!==a.length){for(n=0;n<a.length;n++)a[n].dispose();for(a=this.layerList=[],n=0;n<r.length;n++)a.push(Sbt(this,n,r[n]))}else for(n=0;n<r.length;n++)a[n].update(r[n])};ml.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};ml.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};ml.setOptions=function(e,t,r){for(var a in r)this.map[t](e,a,r[a])};ml.getMapLayers=function(){return this.map.getStyle().layers};ml.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var a=this.getMapLayers(),n=0;n<a.length;n++)if(t===a[n].id){r.addLayer(e,t);return}qH.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};ml.project=function(e){return this.map.project(new jH.LngLat(e[0],e[1]))};ml.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,a=t.lat,n={lon:r,lat:a},o=e.getCanvas(),i=parseInt(o.style.width),s=parseInt(o.style.height);return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([i,0]).toArray(),e.unproject([i,s]).toArray(),e.unproject([0,s]).toArray()]}}};ml.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],a={},n=0;n<r.length;n++){var o=r[n];a[t+"."+o]=e[o]}return a};ml.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function i1e(e){var t={};return qH.isPlainObject(e)?(t.id=e.id,t.style=e):typeof e=="string"?(t.id=e,u1.styleValuesMapbox.indexOf(e)!==-1?t.style=o1e(e):u1.stylesNonMapbox[e]?t.style=u1.stylesNonMapbox[e]:t.style=e):(t.id=u1.styleValueDflt,t.style=o1e(u1.styleValueDflt)),t.transition={duration:0,delay:0},t}function o1e(e){return u1.styleUrlPrefix+e+"-"+u1.styleUrlSuffix}function WH(e){return[e.lon,e.lat]}var Mbt=a1e,XH=bt.exports,kbt=R2,Ebt=nc,s1e=kI.exports,Cbt=function(t,r,a){kbt(t,r,a,{type:"mapbox",attributes:s1e,handleDefaults:Lbt,partition:"y",accessToken:r._mapboxAccessToken})};function Lbt(e,t,r,a){r("accesstoken",a.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),Ebt(e,t,{name:"layers",handleItemDefaults:Pbt}),t._input=e}function Pbt(e,t){function r(l,u){return XH.coerce(e,t,s1e.layers,l,u)}var a=r("visible");if(a){var n=r("sourcetype"),o=n==="raster"||n==="image";r("source"),r("sourceattribution"),n==="vector"&&r("sourcelayer"),n==="image"&&r("coordinates");var i;o&&(i="raster");var s=r("type",i);o&&s!=="raster"&&(s=t.type="raster",XH.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),s==="circle"&&r("circle.radius"),s==="line"&&(r("line.width"),r("line.dash")),s==="fill"&&r("fill.outlinecolor"),s==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),XH.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}var l1e=VH.exports,P0=bt.exports,ZH=P0.strTranslate,Ibt=P0.strScale,Dbt=Ml.getSubplotCalcData,Rbt=Xh,zbt=Ra.exports,u1e=xn.exports,Fbt=xo,Obt=Mbt,f1="mapbox",I0=Uf.constants=db;Uf.name=f1;Uf.attr="subplot";Uf.idRoot=f1;Uf.idRegex=Uf.attrRegex=P0.counterRegex(f1);Uf.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a mapbox subplot.","If *mapbox* (the default value), the data refer to `layout.mapbox`.","If *mapbox2*, the data refer to `layout.mapbox2`, and so on."].join(" ")}};Uf.layoutAttributes=kI.exports;Uf.supplyLayoutDefaults=Cbt;Uf.plot=function(t){var r=t._fullLayout,a=t.calcdata,n=r._subplots[f1];if(l1e.version!==I0.requiredVersion)throw new Error(I0.wrongVersionErrorMsg);var o=Nbt(t,n);l1e.accessToken=o;for(var i=0;i<n.length;i++){var s=n[i],l=Dbt(a,f1,s),u=r[s],f=u._subplot;f||(f=new Obt(t,s),r[s]._subplot=f),f.viewInitial||(f.viewInitial={center:P0.extendFlat({},u.center),zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),f.plot(l,r,t._promises)}};Uf.clean=function(e,t,r,a){for(var n=a._subplots[f1]||[],o=0;o<n.length;o++){var i=n[o];!t[i]&&!!a[i]._subplot&&a[i]._subplot.destroy()}};Uf.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[f1],a=t._size,n=0;n<r.length;n++){var o=t[r[n]],i=o.domain,s=o._subplot,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:Rbt.svg,"xlink:href":l,x:a.l+a.w*i.x[0],y:a.t+a.h*(1-i.y[1]),width:a.w*(i.x[1]-i.x[0]),height:a.h*(i.y[1]-i.y[0]),preserveAspectRatio:"none"});var f=zbt.select(o._subplot.div),c=f.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!c){var h=t._glimages.append("g");h.attr("transform",ZH(a.l+a.w*i.x[0]+10,a.t+a.h*(1-i.y[0])-31)),h.append("path").attr("d",I0.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),h.append("path").attr("d",I0.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),h.append("path").attr("d",I0.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),h.append("polygon").attr("points",I0.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var v=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),p=t._glimages.append("g"),d=p.append("text");d.text(v).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":v});var g=u1e.bBox(d.node()),m=a.w*(i.x[1]-i.x[0]);if(g.width>m/2){var y=v.split("|").join("<br>");d.text(y).attr("data-unformatted",y).call(Fbt.convertToTspans,e),g=u1e.bBox(d.node())}d.attr("transform",ZH(-3,-g.height+8)),p.insert("rect",".static-attribution").attr({x:-g.width-6,y:-g.height-3,width:g.width+6,height:g.height+3,fill:"rgba(255, 255, 255, 0.75)"});var _=1;g.width+6>m&&(_=m/(g.width+6));var S=[a.l+a.w*i.x[1],a.t+a.h*(1-i.y[0])];p.attr("transform",ZH(S[0],S[1])+Ibt(_))}};function Nbt(e,t){var r=e._fullLayout,a=e._context;if(a.mapboxAccessToken==="")return"";for(var n=[],o=[],i=!1,s=!1,l=0;l<t.length;l++){var u=r[t[l]],f=u.accesstoken;f1e(u.style)&&(f?P0.pushUnique(n,f):(f1e(u._input.style)&&(P0.error("Uses Mapbox map style, but did not set an access token."),i=!0),s=!0)),f&&P0.pushUnique(o,f)}if(s){var c=i?I0.noAccessTokenErrorMsg:I0.missingStyleErrorMsg;throw P0.error(c),new Error(c)}return n.length?(n.length>1&&P0.warn(I0.multipleTokensErrorMsg),n[0]):(o.length&&P0.log(["Listed mapbox access token(s)",o.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function f1e(e){return typeof e=="string"&&(I0.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0)}Uf.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[f1],a=0;a<r.length;a++){var n=t[r[a]]._subplot;n.updateFx(t)}};var Bbt={attributes:BH,supplyDefaults:Gxt,colorbar:Pf,formatLabels:Gye,calc:Cce,plot:tbt,hoverPoints:GH.hoverPoints,eventData:sbt,selectPoints:cbt,styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:Uf,categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_mapbox",description:["The data visualized as scatter point, lines or marker symbols","on a Mapbox GL geographic map","is provided by longitude/latitude pairs in `lon` and `lat`."].join(" ")}},$bt=Bbt,bm=MP,Ubt=bo,Hbt=zn.hovertemplateAttrs,Gbt=ao,c1=cn.extendFlat,c1e=c1({locations:{valType:"data_array",editType:"calc",description:["Sets which features found in *geojson* to plot using","their feature `id` field."].join(" ")},z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:{valType:"any",editType:"calc",description:["Sets the GeoJSON data associated with this trace.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:c1({},bm.featureidkey,{description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Support nested property, for example *properties.name*."].join(" ")}),below:{valType:"string",editType:"plot",description:["Determines if the choropleth polygons will be inserted","before the layer with the specified ID.","By default, choroplethmapbox traces are placed above the water layers.","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:bm.text,hovertext:bm.hovertext,marker:{line:{color:c1({},bm.marker.line.color,{editType:"plot"}),width:c1({},bm.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:c1({},bm.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:c1({},bm.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c1({},bm.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:bm.hoverinfo,hovertemplate:Hbt({},{keys:["properties"]}),showlegend:c1({},Gbt.showlegend,{dflt:!1})},Ubt("",{cLetter:"z",editTypeOverride:"calc"})),IM=bt.exports,Vbt=su,jbt=c1e,qbt=function(t,r,a,n){function o(f,c){return IM.coerce(t,r,jbt,f,c)}var i=o("locations"),s=o("z"),l=o("geojson");if(!IM.isArrayOrTypedArray(i)||!i.length||!IM.isArrayOrTypedArray(s)||!s.length||!(typeof l=="string"&&l!==""||IM.isPlainObject(l))){r.visible=!1;return}o("featureidkey"),r._length=Math.min(i.length,s.length),o("below"),o("text"),o("hovertext"),o("hovertemplate");var u=o("marker.line.width");u&&o("marker.line.color"),o("marker.opacity"),Vbt(t,r,n,o,{prefix:"",cLetter:"z"}),IM.coerceSelectionMarkerOpacity(r,o)},Ybt=gn,_m=bt.exports,Wbt=Qo,Xbt=xn.exports,Zbt=$y.makeBlank,h1e=_S;function Kbt(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,a={layout:{visibility:"none"},paint:{}},n={layout:{visibility:"none"},paint:{}},o=t._opts={fill:a,line:n,geojson:Zbt()};if(!r)return o;var i=h1e.extractTraceFeature(e);if(!i)return o;var s=Wbt.makeColorScaleFuncFromTrace(t),l=t.marker,u=l.line||{},f;_m.isArrayOrTypedArray(l.opacity)&&(f=function(y){var _=y.mo;return Ybt(_)?+_m.constrain(_,0,1):0});var c;_m.isArrayOrTypedArray(u.color)&&(c=function(y){return y.mlc});var h;_m.isArrayOrTypedArray(u.width)&&(h=function(y){return y.mlw});for(var v=0;v<e.length;v++){var p=e[v],d=p.fOut;if(d){var g=d.properties;g.fc=s(p.z),f&&(g.mo=f(p)),c&&(g.mlc=c(p)),h&&(g.mlw=h(p)),p.ct=g.ct,p._polygons=h1e.feature2polygons(d)}}var m=f?{type:"identity",property:"mo"}:l.opacity;return _m.extendFlat(a.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":m}),_m.extendFlat(n.paint,{"line-color":c?{type:"identity",property:"mlc"}:u.color,"line-width":h?{type:"identity",property:"mlw"}:u.width,"line-opacity":m}),a.layout.visibility="visible",n.layout.visibility="visible",o.geojson={type:"FeatureCollection",features:i},v1e(e),o}function v1e(e){var t=e[0].trace,r=t._opts,a;if(t.selectedpoints){for(var n=Xbt.makeSelectedPointStyleFns(t),o=0;o<e.length;o++){var i=e[o];i.fOut&&(i.fOut.properties.mo2=n.selectedOpacityFn(i))}a={type:"identity",property:"mo2"}}else a=_m.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return _m.extendFlat(r.fill.paint,{"fill-opacity":a}),_m.extendFlat(r.line.paint,{"line-opacity":a}),r}var d1e={convert:Kbt,convertOnSelect:v1e},p1e=d1e.convert,Jbt=d1e.convertOnSelect,g1e=db.traceLayerPrefix;function m1e(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",g1e+t+"-fill"],["line",g1e+t+"-line"]],this.below=null}var Jw=m1e.prototype;Jw.update=function(e){this._update(p1e(e))};Jw.updateOnSelect=function(e){this._update(Jbt(e))};Jw._update=function(e){var t=this.subplot,r=this.layerList,a=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(e,a),this.below=a);for(var n=0;n<r.length;n++){var o=r[n],i=o[0],s=o[1],l=e[i];t.setOptions(s,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&t.setOptions(s,"setPaintProperty",l.paint)}};Jw._addLayers=function(e,t){for(var r=this.subplot,a=this.layerList,n=this.sourceId,o=0;o<a.length;o++){var i=a[o],s=i[0],l=e[s];r.addLayer({type:s,id:i[1],source:n,layout:l.layout,paint:l.paint},t)}};Jw._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};Jw.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};var Qbt=function(t,r){var a=r[0].trace,n=new m1e(t,a.uid),o=n.sourceId,i=p1e(r),s=n.below=t.belowLookup["trace-"+a.uid];return t.map.addSource(o,{type:"geojson",data:i.geojson}),n._addLayers(i,s),r[0].trace._glTrace=n,n},e_t={attributes:c1e,supplyDefaults:qbt,colorbar:k2,calc:tpe,plot:Qbt,hoverPoints:ope,eventData:spe,selectPoints:lpe,styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),a=r.length-2;a>=0;a--){var n=r[a].id;if(typeof n=="string"&&n.indexOf("water")===0){for(var o=a+1;o<r.length;o++)if(n=r[o].id,typeof n=="string"&&n.indexOf("plotly-")===-1)return n}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:Uf,categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox",description:["GeoJSON features to be filled are set in `geojson`","The data that describes the choropleth value-to-color mapping","is set in `locations` and `z`."].join(" ")}},t_t=e_t,r_t=bo,a_t=zn.hovertemplateAttrs,y1e=ao,FI=BH,KH=cn.extendFlat,x1e=KH({lon:FI.lon,lat:FI.lat,z:{valType:"data_array",editType:"calc",description:["Sets the points' weight.","For example, a value of 10 would be equivalent to having 10 points of weight 1","in the same spot"].join(" ")},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30,description:["Sets the radius of influence of one `lon` / `lat` point in pixels.","Increasing the value makes the densitymapbox trace smoother, but less detailed."].join(" ")},below:{valType:"string",editType:"plot",description:["Determines if the densitymapbox trace will be inserted","before the layer with the specified ID.","By default, densitymapbox traces are placed below the first","layer of type symbol","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:FI.text,hovertext:FI.hovertext,hoverinfo:KH({},y1e.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:a_t(),showlegend:KH({},y1e.showlegend,{dflt:!1})},r_t("",{cLetter:"z",editTypeOverride:"calc"})),n_t=bt.exports,i_t=su,o_t=x1e,s_t=function(t,r,a,n){function o(u,f){return n_t.coerce(t,r,o_t,u,f)}var i=o("lon")||[],s=o("lat")||[],l=Math.min(i.length,s.length);if(!l){r.visible=!1;return}r._length=l,o("z"),o("radius"),o("below"),o("text"),o("hovertext"),o("hovertemplate"),i_t(t,r,n,o,{prefix:"",cLetter:"z"})},JH=gn,l_t=bt.exports.isArrayOrTypedArray,QH=Un.BADNUM,u_t=ih,b1e=bt.exports._,f_t=function(t,r){for(var a=r._length,n=new Array(a),o=r.z,i=l_t(o)&&o.length,s=0;s<a;s++){var l=n[s]={},u=r.lon[s],f=r.lat[s];if(l.lonlat=JH(u)&&JH(f)?[+u,+f]:[QH,QH],i){var c=o[s];l.z=JH(c)?c:QH}}return u_t(t,r,{vals:i?o:[0,1],containerStr:"",cLetter:"z"}),a&&(n[0].t={labels:{lat:b1e(t,"lat:")+" ",lon:b1e(t,"lon:")+" "}}),n},c_t=gn,eG=bt.exports,_1e=Oa.exports,w1e=Qo,T1e=Un.BADNUM,h_t=$y.makeBlank,v_t=function(t){var r=t[0].trace,a=r.visible===!0&&r._length!==0,n={layout:{visibility:"none"},paint:{}},o=r._opts={heatmap:n,geojson:h_t()};if(!a)return o;var i=[],s,l=r.z,u=r.radius,f=eG.isArrayOrTypedArray(l)&&l.length,c=eG.isArrayOrTypedArray(u);for(s=0;s<t.length;s++){var h=t[s],v=h.lonlat;if(v[0]!==T1e){var p={};if(f){var d=h.z;p.z=d!==T1e?d:0}c&&(p.r=c_t(u[s])&&u[s]>0?+u[s]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:p})}}var g=w1e.extractOpts(r),m=g.reversescale?w1e.flipScale(g.colorscale):g.colorscale,y=m[0][1],_=_1e.opacity(y)<1?y:_1e.addOpacity(y,0),S=["interpolate",["linear"],["heatmap-density"],0,_];for(s=1;s<m.length;s++)S.push(m[s][0],m[s][1]);var M=["interpolate",["linear"],["get","z"],g.min,0,g.max,1];return eG.extendFlat(o.heatmap.paint,{"heatmap-weight":f?M:1/(g.max-g.min),"heatmap-color":S,"heatmap-radius":c?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),o.geojson={type:"FeatureCollection",features:i},o.heatmap.layout.visibility="visible",o},A1e=v_t,d_t=db.traceLayerPrefix;function S1e(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",d_t+t+"-heatmap"]],this.below=null}var OI=S1e.prototype;OI.update=function(e){var t=this.subplot,r=this.layerList,a=A1e(e),n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(a.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(a,n),this.below=n);for(var o=0;o<r.length;o++){var i=r[o],s=i[0],l=i[1],u=a[s];t.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&t.setOptions(l,"setPaintProperty",u.paint)}};OI._addLayers=function(e,t){for(var r=this.subplot,a=this.layerList,n=this.sourceId,o=0;o<a.length;o++){var i=a[o],s=i[0],l=e[s];r.addLayer({type:s,id:i[1],source:n,layout:l.layout,paint:l.paint},t)}};OI._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};OI.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};var p_t=function(t,r){var a=r[0].trace,n=new S1e(t,a.uid),o=n.sourceId,i=A1e(r),s=n.below=t.belowLookup["trace-"+a.uid];return t.map.addSource(o,{type:"geojson",data:i.geojson}),n._addLayers(i,s),n},g_t=rn.exports,m_t=GH.hoverPoints,y_t=GH.getExtraText,x_t=function(t,r,a){var n=m_t(t,r,a);if(!!n){var o=n[0],i=o.cd,s=i[0].trace,l=i[o.index];if(delete o.color,"z"in l){var u=o.subplot.mockAxis;o.z=l.z,o.zLabel=g_t.tickText(u,u.c2l(l.z),"hover").text}return o.extraText=y_t(s,l,i[0].t.labels),[o]}},b_t=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t},__t={attributes:x1e,supplyDefaults:s_t,colorbar:k2,formatLabels:Gye,calc:f_t,plot:p_t,hoverPoints:x_t,eventData:b_t,getBelow:function(e,t){for(var r=t.getMapLayers(),a=0;a<r.length;a++){var n=r[a],o=n.id;if(n.type==="symbol"&&typeof o=="string"&&o.indexOf("plotly-")===-1)return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:Uf,categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox",description:["Draws a bivariate kernel density estimation with a Gaussian kernel","from `lon` and `lat` coordinates and optional `z` values using a colorscale."].join(" ")}},w_t=__t,tG={exports:{}},T_t=Ts,A_t=ao,M1e=us,rG=rT,S_t=Fo.attributes,k1e=zn.hovertemplateAttrs,M_t=bo,k_t=si.templatedArray,E_t=Ss.descriptionOnlyNumbers,E1e=cn.extendFlat,C_t=Jo.overrideAll,L_t=tG.exports=C_t({hoverinfo:E1e({},A_t.hoverinfo,{flags:[],arrayOk:!1,description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired.","Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`","for nodes and links respectively."].join(" ")}),hoverlabel:rG.hoverlabel,domain:S_t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h",description:"Sets the orientation of the Sankey diagram."},valueformat:{valType:"string",dflt:".3s",description:E_t("value")},valuesuffix:{valType:"string",dflt:"",description:["Adds a unit to follow the value in the hover tooltip. Add a space if a separation","is necessary from the value."].join(" ")},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap",description:["If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to","preserve space between nodes specified via `nodepad`.","If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.","If value is `freeform`, the nodes can freely move on the plane.","If value is `fixed`, the nodes are stationary."].join(" ")},textfont:T_t({description:"Sets the font for node labels"}),customdata:void 0,node:{label:{valType:"data_array",dflt:[],description:"The shown name of the node."},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"},description:["Groups of nodes.","Each group is defined by an array with the indices of the nodes it contains.","Multiple groups can be specified."].join(" ")},x:{valType:"data_array",dflt:[],description:"The normalized horizontal position of the node."},y:{valType:"data_array",dflt:[],description:"The normalized vertical position of the node."},color:{valType:"color",arrayOk:!0,description:["Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.","If `node.color` is omitted, then the default `Plotly` color palette will be cycled through","to have a variety of colors. These defaults are not fully opaque, to allow some visibility of","what is beneath the node."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each node."].join(" ")},line:{color:{valType:"color",dflt:M1e.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `node`."].join(" ")},width:{valType:"number",min:0,dflt:.5,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `node`."].join(" ")}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20,description:"Sets the padding (in px) between the `nodes`."},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20,description:"Sets the thickness (in px) of the `nodes`."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering nodes.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:rG.hoverlabel,hovertemplate:k1e({},{description:"Variables `sourceLinks` and `targetLinks` are arrays of link objects.",keys:["value","label"]}),description:"The nodes of the Sankey plot."},link:{label:{valType:"data_array",dflt:[],description:"The shown name of the link."},color:{valType:"color",arrayOk:!0,description:["Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.","If `link.color` is omitted, then by default, a translucent grey link will be used."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each link."].join(" ")},line:{color:{valType:"color",dflt:M1e.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `link`."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `link`."].join(" ")}},source:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the source node."},target:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the target node."},value:{valType:"data_array",dflt:[],description:"A numeric value representing the flow volume value."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering links.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:rG.hoverlabel,hovertemplate:k1e({},{description:"Variables `source` and `target` are node objects.",keys:["value","label"]}),colorscales:k_t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",description:"The label of the links to color based on their concentration within a flow.",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1,description:["Sets the upper bound of the color domain."].join("")},cmin:{valType:"number",editType:"calc",dflt:0,description:["Sets the lower bound of the color domain."].join("")},colorscale:E1e(M_t().colorscale,{dflt:[[0,"white"],[1,"black"]]})}),description:"The links of the Sankey plot."}},"calc","nested");L_t.transforms=void 0;var h1=bt.exports,NI=tG.exports,P_t=Oa.exports,I_t=Hl.exports,D_t=Fo.defaults,C1e=bE,L1e=si,R_t=nc,z_t=function(t,r,a,n){function o(m,y){return h1.coerce(t,r,NI,m,y)}var i=h1.extendDeep(n.hoverlabel,t.hoverlabel),s=t.node,l=L1e.newContainer(r,"node");function u(m,y){return h1.coerce(s,l,NI.node,m,y)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",t.hoverinfo),C1e(s,l,u,i),u("hovertemplate");var f=n.colorway,c=function(m){return f[m%f.length]};u("color",l.label.map(function(m,y){return P_t.addOpacity(c(y),.8)})),u("customdata");var h=t.link||{},v=L1e.newContainer(r,"link");function p(m,y){return h1.coerce(h,v,NI.link,m,y)}p("label"),p("source"),p("target"),p("value"),p("line.color"),p("line.width"),p("hoverinfo",t.hoverinfo),C1e(h,v,p,i),p("hovertemplate");var d=I_t(n.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";p("color",h1.repeat(d,v.value.length)),p("customdata"),R_t(h,v,{name:"colorscales",handleItemDefaults:F_t}),D_t(r,n,o),o("orientation"),o("valueformat"),o("valuesuffix");var g;l.x.length&&l.y.length&&(g="freeform"),o("arrangement",g),h1.coerceFont(o,"textfont",h1.extendFlat({},n.font)),r._length=null};function F_t(e,t){function r(a,n){return h1.coerce(e,t,NI.link.colorscales,a,n)}r("label"),r("cmin"),r("cmax"),r("colorscale")}var P1e=O_t;function O_t(e){for(var t=e.length,r=new Array(t),a=new Array(t),n=new Array(t),o=new Array(t),i=new Array(t),s=new Array(t),l=0;l<t;++l)r[l]=-1,a[l]=0,n[l]=!1,o[l]=0,i[l]=-1,s[l]=[];var u=0,f=[],c=[];function h(g){var m=[g],y=[g];for(r[g]=a[g]=u,n[g]=!0,u+=1;y.length>0;){g=y[y.length-1];var _=e[g];if(o[g]<_.length){for(var S=o[g];S<_.length;++S){var M=_[S];if(r[M]<0){r[M]=a[M]=u,n[M]=!0,u+=1,m.push(M),y.push(M);break}else n[M]&&(a[g]=Math.min(a[g],a[M])|0);i[M]>=0&&s[g].push(i[M])}o[g]=S}else{if(a[g]===r[g]){for(var w=[],A=[],k=0,S=m.length-1;S>=0;--S){var T=m[S];if(n[T]=!1,w.push(T),A.push(s[T]),k+=s[T].length,i[T]=f.length,T===g){m.length=S;break}}f.push(w);for(var L=new Array(k),S=0;S<A.length;S++)for(var C=0;C<A[S].length;C++)L[--k]=A[S][C];c.push(L)}y.pop()}}}for(var l=0;l<t;++l)r[l]<0&&h(l);for(var v,l=0;l<c.length;l++){var p=c[l];if(p.length!==0){p.sort(function(m,y){return m-y}),v=[p[0]];for(var d=1;d<p.length;d++)p[d]!==p[d-1]&&v.push(p[d]);c[l]=v}}return{components:f,adjacencyList:c}}var N_t=P1e,Qw=bt.exports,B_t=ym.wrap,BI=Qw.isArrayOrTypedArray,I1e=Qw.isIndex,D1e=Qo;function $_t(e){var t=e.node,r=e.link,a=[],n=BI(r.color),o=BI(r.customdata),i={},s={},l=r.colorscales.length,u;for(u=0;u<l;u++){var f=r.colorscales[u],c=D1e.extractScale(f,{cLetter:"c"}),h=D1e.makeColorScaleFunc(c);s[f.label]=h}var v=0;for(u=0;u<r.value.length;u++)r.source[u]>v&&(v=r.source[u]),r.target[u]>v&&(v=r.target[u]);var p=v+1;e.node._count=p;var d,g=e.node.groups,m={};for(u=0;u<g.length;u++){var y=g[u];for(d=0;d<y.length;d++){var _=y[d],S=p+u;m.hasOwnProperty(_)?Qw.warn("Node "+_+" is already part of a group."):m[_]=S}}var M={source:[],target:[]};for(u=0;u<r.value.length;u++){var w=r.value[u],A=r.source[u],k=r.target[u];if(!!(w>0&&I1e(A,p)&&I1e(k,p))&&!(m.hasOwnProperty(A)&&m.hasOwnProperty(k)&&m[A]===m[k])){m.hasOwnProperty(k)&&(k=m[k]),m.hasOwnProperty(A)&&(A=m[A]),A=+A,k=+k,i[A]=i[k]=!0;var T="";r.label&&r.label[u]&&(T=r.label[u]);var L=null;T&&s.hasOwnProperty(T)&&(L=s[T]),a.push({pointNumber:u,label:T,color:n?r.color[u]:r.color,customdata:o?r.customdata[u]:r.customdata,concentrationscale:L,source:A,target:k,value:+w}),M.source.push(A),M.target.push(k)}}var C=p+g.length,I=BI(t.color),R=BI(t.customdata),B=[];for(u=0;u<C;u++)if(!!i[u]){var N=t.label[u];B.push({group:u>p-1,childrenNodes:[],pointNumber:u,label:N,color:I?t.color[u]:t.color,customdata:R?t.customdata[u]:t.customdata})}var D=!1;return U_t(C,M.source,M.target)&&(D=!0),{circular:D,links:a,nodes:B,groups:g,groupLookup:m}}function U_t(e,t,r){for(var a=Qw.init2dArray(e,0),n=0;n<Math.min(t.length,r.length);n++)if(Qw.isIndex(t[n],e)&&Qw.isIndex(r[n],e)){if(t[n]===r[n])return!0;a[t[n]].push(r[n])}var o=N_t(a);return o.components.some(function(i){return i.length>1})}var H_t=function(t,r){var a=$_t(r);return B_t({circular:a.circular,_nodes:a.nodes,_links:a.links,_groups:a.groups,_groupLookup:a.groupLookup})};function G_t(e,t){var r;e==null&&(e=0),t==null&&(t=0);function a(){var n,o=r.length,i,s=0,l=0;for(n=0;n<o;++n)i=r[n],s+=i.x,l+=i.y;for(s=s/o-e,l=l/o-t,n=0;n<o;++n)i=r[n],i.x-=s,i.y-=l}return a.initialize=function(n){r=n},a.x=function(n){return arguments.length?(e=+n,a):e},a.y=function(n){return arguments.length?(t=+n,a):t},a}function du(e){return function(){return e}}function v1(){return(Math.random()-.5)*1e-6}function V_t(e){var t=+this._x.call(null,e),r=+this._y.call(null,e);return R1e(this.cover(t,r),t,r,e)}function R1e(e,t,r,a){if(isNaN(t)||isNaN(r))return e;var n,o=e._root,i={data:a},s=e._x0,l=e._y0,u=e._x1,f=e._y1,c,h,v,p,d,g,m,y;if(!o)return e._root=i,e;for(;o.length;)if((d=t>=(c=(s+u)/2))?s=c:u=c,(g=r>=(h=(l+f)/2))?l=h:f=h,n=o,!(o=o[m=g<<1|d]))return n[m]=i,e;if(v=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===v&&r===p)return i.next=o,n?n[m]=i:e._root=i,e;do n=n?n[m]=new Array(4):e._root=new Array(4),(d=t>=(c=(s+u)/2))?s=c:u=c,(g=r>=(h=(l+f)/2))?l=h:f=h;while((m=g<<1|d)==(y=(p>=h)<<1|v>=c));return n[y]=o,n[m]=i,e}function j_t(e){var t,r,a=e.length,n,o,i=new Array(a),s=new Array(a),l=1/0,u=1/0,f=-1/0,c=-1/0;for(r=0;r<a;++r)isNaN(n=+this._x.call(null,t=e[r]))||isNaN(o=+this._y.call(null,t))||(i[r]=n,s[r]=o,n<l&&(l=n),n>f&&(f=n),o<u&&(u=o),o>c&&(c=o));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),r=0;r<a;++r)R1e(this,i[r],s[r],e[r]);return this}function q_t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,a=this._y0,n=this._x1,o=this._y1;if(isNaN(r))n=(r=Math.floor(e))+1,o=(a=Math.floor(t))+1;else{for(var i=n-r,s=this._root,l,u;r>e||e>=n||a>t||t>=o;)switch(u=(t<a)<<1|e<r,l=new Array(4),l[u]=s,s=l,i*=2,u){case 0:n=r+i,o=a+i;break;case 1:r=n-i,o=a+i;break;case 2:n=r+i,a=o-i;break;case 3:r=n-i,a=o-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=a,this._x1=n,this._y1=o,this}function Y_t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function W_t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function mc(e,t,r,a,n){this.node=e,this.x0=t,this.y0=r,this.x1=a,this.y1=n}function X_t(e,t,r){var a,n=this._x0,o=this._y0,i,s,l,u,f=this._x1,c=this._y1,h=[],v=this._root,p,d;for(v&&h.push(new mc(v,n,o,f,c)),r==null?r=1/0:(n=e-r,o=t-r,f=e+r,c=t+r,r*=r);p=h.pop();)if(!(!(v=p.node)||(i=p.x0)>f||(s=p.y0)>c||(l=p.x1)<n||(u=p.y1)<o))if(v.length){var g=(i+l)/2,m=(s+u)/2;h.push(new mc(v[3],g,m,l,u),new mc(v[2],i,m,g,u),new mc(v[1],g,s,l,m),new mc(v[0],i,s,g,m)),(d=(t>=m)<<1|e>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-d],h[h.length-1-d]=p)}else{var y=e-+this._x.call(null,v.data),_=t-+this._y.call(null,v.data),S=y*y+_*_;if(S<r){var M=Math.sqrt(r=S);n=e-M,o=t-M,f=e+M,c=t+M,a=v.data}}return a}function Z_t(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,r=this._root,a,n,o,i=this._x0,s=this._y0,l=this._x1,u=this._y1,f,c,h,v,p,d,g,m;if(!r)return this;if(r.length)for(;;){if((p=f>=(h=(i+l)/2))?i=h:l=h,(d=c>=(v=(s+u)/2))?s=v:u=v,t=r,!(r=r[g=d<<1|p]))return this;if(!r.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(a=t,m=g)}for(;r.data!==e;)if(n=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,n?(o?n.next=o:delete n.next,this):t?(o?t[g]=o:delete t[g],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(a?a[m]=r:this._root=r),this):(this._root=o,this)}function K_t(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function J_t(){return this._root}function Q_t(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function e2t(e){var t=[],r,a=this._root,n,o,i,s,l;for(a&&t.push(new mc(a,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(a=r.node,o=r.x0,i=r.y0,s=r.x1,l=r.y1)&&a.length){var u=(o+s)/2,f=(i+l)/2;(n=a[3])&&t.push(new mc(n,u,f,s,l)),(n=a[2])&&t.push(new mc(n,o,f,u,l)),(n=a[1])&&t.push(new mc(n,u,i,s,f)),(n=a[0])&&t.push(new mc(n,o,i,u,f))}return this}function t2t(e){var t=[],r=[],a;for(this._root&&t.push(new mc(this._root,this._x0,this._y0,this._x1,this._y1));a=t.pop();){var n=a.node;if(n.length){var o,i=a.x0,s=a.y0,l=a.x1,u=a.y1,f=(i+l)/2,c=(s+u)/2;(o=n[0])&&t.push(new mc(o,i,s,f,c)),(o=n[1])&&t.push(new mc(o,f,s,l,c)),(o=n[2])&&t.push(new mc(o,i,c,f,u)),(o=n[3])&&t.push(new mc(o,f,c,l,u))}r.push(a)}for(;a=r.pop();)e(a.node,a.x0,a.y0,a.x1,a.y1);return this}function r2t(e){return e[0]}function a2t(e){return arguments.length?(this._x=e,this):this._x}function n2t(e){return e[1]}function i2t(e){return arguments.length?(this._y=e,this):this._y}function aG(e,t,r){var a=new nG(t==null?r2t:t,r==null?n2t:r,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function nG(e,t,r,a,n,o){this._x=e,this._y=t,this._x0=r,this._y0=a,this._x1=n,this._y1=o,this._root=void 0}function z1e(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var yc=aG.prototype=nG.prototype;yc.copy=function(){var e=new nG(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,a;if(!t)return e;if(!t.length)return e._root=z1e(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var n=0;n<4;++n)(a=t.source[n])&&(a.length?r.push({source:a,target:t.target[n]=new Array(4)}):t.target[n]=z1e(a));return e};yc.add=V_t;yc.addAll=j_t;yc.cover=q_t;yc.data=Y_t;yc.extent=W_t;yc.find=X_t;yc.remove=Z_t;yc.removeAll=K_t;yc.root=J_t;yc.size=Q_t;yc.visit=e2t;yc.visitAfter=t2t;yc.x=a2t;yc.y=i2t;function o2t(e){return e.x+e.vx}function s2t(e){return e.y+e.vy}function l2t(e){var t,r,a=1,n=1;typeof e!="function"&&(e=du(e==null?1:+e));function o(){for(var l,u=t.length,f,c,h,v,p,d,g=0;g<n;++g)for(f=aG(t,o2t,s2t).visitAfter(i),l=0;l<u;++l)c=t[l],p=r[c.index],d=p*p,h=c.x+c.vx,v=c.y+c.vy,f.visit(m);function m(y,_,S,M,w){var A=y.data,k=y.r,T=p+k;if(A){if(A.index>c.index){var L=h-A.x-A.vx,C=v-A.y-A.vy,I=L*L+C*C;I<T*T&&(L===0&&(L=v1(),I+=L*L),C===0&&(C=v1(),I+=C*C),I=(T-(I=Math.sqrt(I)))/I*a,c.vx+=(L*=I)*(T=(k*=k)/(d+k)),c.vy+=(C*=I)*T,A.vx-=L*(T=1-T),A.vy-=C*T)}return}return _>h+T||M<h-T||S>v+T||w<v-T}}function i(l){if(l.data)return l.r=r[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function s(){if(!!t){var l,u=t.length,f;for(r=new Array(u),l=0;l<u;++l)f=t[l],r[f.index]=+e(f,l,t)}}return o.initialize=function(l){t=l,s()},o.iterations=function(l){return arguments.length?(n=+l,o):n},o.strength=function(l){return arguments.length?(a=+l,o):a},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:du(+l),s(),o):e},o}var Qv="$";function $I(){}$I.prototype=d1.prototype={constructor:$I,has:function(e){return Qv+e in this},get:function(e){return this[Qv+e]},set:function(e,t){return this[Qv+e]=t,this},remove:function(e){var t=Qv+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Qv&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Qv&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Qv&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Qv&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Qv&&++e;return e},empty:function(){for(var e in this)if(e[0]===Qv)return!1;return!0},each:function(e){for(var t in this)t[0]===Qv&&e(this[t],t.slice(1),this)}};function d1(e,t){var r=new $I;if(e instanceof $I)e.each(function(s,l){r.set(l,s)});else if(Array.isArray(e)){var a=-1,n=e.length,o;if(t==null)for(;++a<n;)r.set(a,e[a]);else for(;++a<n;)r.set(t(o=e[a],a,e),o)}else if(e)for(var i in e)r.set(i,e[i]);return r}function F1e(){var e=[],t=[],r,a,n;function o(s,l,u,f){if(l>=e.length)return r!=null&&s.sort(r),a!=null?a(s):s;for(var c=-1,h=s.length,v=e[l++],p,d,g=d1(),m,y=u();++c<h;)(m=g.get(p=v(d=s[c])+""))?m.push(d):g.set(p,[d]);return g.each(function(_,S){f(y,S,o(_,l,u,f))}),y}function i(s,l){if(++l>e.length)return s;var u,f=t[l-1];return a!=null&&l>=e.length?u=s.entries():(u=[],s.each(function(c,h){u.push({key:h,values:i(c,l)})})),f!=null?u.sort(function(c,h){return f(c.key,h.key)}):u}return n={object:function(s){return o(s,0,u2t,f2t)},map:function(s){return o(s,0,O1e,N1e)},entries:function(s){return i(o(s,0,O1e,N1e),0)},key:function(s){return e.push(s),n},sortKeys:function(s){return t[e.length-1]=s,n},sortValues:function(s){return r=s,n},rollup:function(s){return a=s,n}}}function u2t(){return{}}function f2t(e,t,r){e[t]=r}function O1e(){return d1()}function N1e(e,t,r){e.set(t,r)}function B1e(){}var mb=d1.prototype;B1e.prototype={constructor:B1e,has:mb.has,add:function(e){return e+="",this[Qv+e]=e,this},remove:mb.remove,clear:mb.clear,values:mb.keys,size:mb.size,empty:mb.empty,each:mb.each};function c2t(e){return e.index}function $1e(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function h2t(e){var t=c2t,r=f,a,n=du(30),o,i,s,l,u=1;e==null&&(e=[]);function f(d){return 1/Math.min(s[d.source.index],s[d.target.index])}function c(d){for(var g=0,m=e.length;g<u;++g)for(var y=0,_,S,M,w,A,k,T;y<m;++y)_=e[y],S=_.source,M=_.target,w=M.x+M.vx-S.x-S.vx||v1(),A=M.y+M.vy-S.y-S.vy||v1(),k=Math.sqrt(w*w+A*A),k=(k-o[y])/k*d*a[y],w*=k,A*=k,M.vx-=w*(T=l[y]),M.vy-=A*T,S.vx+=w*(T=1-T),S.vy+=A*T}function h(){if(!!i){var d,g=i.length,m=e.length,y=d1(i,t),_;for(d=0,s=new Array(g);d<m;++d)_=e[d],_.index=d,typeof _.source!="object"&&(_.source=$1e(y,_.source)),typeof _.target!="object"&&(_.target=$1e(y,_.target)),s[_.source.index]=(s[_.source.index]||0)+1,s[_.target.index]=(s[_.target.index]||0)+1;for(d=0,l=new Array(m);d<m;++d)_=e[d],l[d]=s[_.source.index]/(s[_.source.index]+s[_.target.index]);a=new Array(m),v(),o=new Array(m),p()}}function v(){if(!!i)for(var d=0,g=e.length;d<g;++d)a[d]=+r(e[d],d,e)}function p(){if(!!i)for(var d=0,g=e.length;d<g;++d)o[d]=+n(e[d],d,e)}return c.initialize=function(d){i=d,h()},c.links=function(d){return arguments.length?(e=d,h(),c):e},c.id=function(d){return arguments.length?(t=d,c):t},c.iterations=function(d){return arguments.length?(u=+d,c):u},c.strength=function(d){return arguments.length?(r=typeof d=="function"?d:du(+d),v(),c):r},c.distance=function(d){return arguments.length?(n=typeof d=="function"?d:du(+d),p(),c):n},c}var v2t={value:function(){}};function U1e(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new UI(r)}function UI(e){this._=e}function d2t(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}UI.prototype=U1e.prototype={constructor:UI,on:function(e,t){var r=this._,a=d2t(e+"",r),n,o=-1,i=a.length;if(arguments.length<2){for(;++o<i;)if((n=(e=a[o]).type)&&(n=p2t(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(n=(e=a[o]).type)r[n]=H1e(r[n],e.name,t);else if(t==null)for(n in r)r[n]=H1e(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new UI(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,o;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],a=0,n=o.length;a<n;++a)o[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,o=a.length;n<o;++n)a[n].value.apply(t,r)}};function p2t(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function H1e(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=v2t,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var e3=0,DM=0,RM=0,G1e=1e3,HI,zM,GI=0,yb=0,VI=0,FM=typeof performance=="object"&&performance.now?performance:Date,V1e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j1e(){return yb||(V1e(g2t),yb=FM.now()+VI)}function g2t(){yb=0}function iG(){this._call=this._time=this._next=null}iG.prototype=q1e.prototype={constructor:iG,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?j1e():+r)+(t==null?0:+t),!this._next&&zM!==this&&(zM?zM._next=this:HI=this,zM=this),this._call=e,this._time=r,oG()},stop:function(){this._call&&(this._call=null,this._time=1/0,oG())}};function q1e(e,t,r){var a=new iG;return a.restart(e,t,r),a}function m2t(){j1e(),++e3;for(var e=HI,t;e;)(t=yb-e._time)>=0&&e._call.call(null,t),e=e._next;--e3}function Y1e(){yb=(GI=FM.now())+VI,e3=DM=0;try{m2t()}finally{e3=0,x2t(),yb=0}}function y2t(){var e=FM.now(),t=e-GI;t>G1e&&(VI-=t,GI=e)}function x2t(){for(var e,t=HI,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:HI=r);zM=e,oG(a)}function oG(e){if(!e3){DM&&(DM=clearTimeout(DM));var t=e-yb;t>24?(e<1/0&&(DM=setTimeout(Y1e,e-FM.now()-VI)),RM&&(RM=clearInterval(RM))):(RM||(GI=FM.now(),RM=setInterval(y2t,G1e)),e3=1,V1e(Y1e))}}function b2t(e){return e.x}function _2t(e){return e.y}var w2t=10,T2t=Math.PI*(3-Math.sqrt(5));function A2t(e){var t,r=1,a=.001,n=1-Math.pow(a,1/300),o=0,i=.6,s=d1(),l=q1e(f),u=U1e("tick","end");e==null&&(e=[]);function f(){c(),u.call("tick",t),r<a&&(l.stop(),u.call("end",t))}function c(p){var d,g=e.length,m;p===void 0&&(p=1);for(var y=0;y<p;++y)for(r+=(o-r)*n,s.each(function(_){_(r)}),d=0;d<g;++d)m=e[d],m.fx==null?m.x+=m.vx*=i:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=i:(m.y=m.fy,m.vy=0);return t}function h(){for(var p=0,d=e.length,g;p<d;++p){if(g=e[p],g.index=p,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var m=w2t*Math.sqrt(p),y=p*T2t;g.x=m*Math.cos(y),g.y=m*Math.sin(y)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function v(p){return p.initialize&&p.initialize(e),p}return h(),t={tick:c,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),s.each(v),t):e},alpha:function(p){return arguments.length?(r=+p,t):r},alphaMin:function(p){return arguments.length?(a=+p,t):a},alphaDecay:function(p){return arguments.length?(n=+p,t):+n},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(i=1-p,t):1-i},force:function(p,d){return arguments.length>1?(d==null?s.remove(p):s.set(p,v(d)),t):s.get(p)},find:function(p,d,g){var m=0,y=e.length,_,S,M,w,A;for(g==null?g=1/0:g*=g,m=0;m<y;++m)w=e[m],_=p-w.x,S=d-w.y,M=_*_+S*S,M<g&&(A=w,g=M);return A},on:function(p,d){return arguments.length>1?(u.on(p,d),t):u.on(p)}}}function S2t(){var e,t,r,a=du(-30),n,o=1,i=1/0,s=.81;function l(h){var v,p=e.length,d=aG(e,b2t,_2t).visitAfter(f);for(r=h,v=0;v<p;++v)t=e[v],d.visit(c)}function u(){if(!!e){var h,v=e.length,p;for(n=new Array(v),h=0;h<v;++h)p=e[h],n[p.index]=+a(p,h,e)}}function f(h){var v=0,p,d,g=0,m,y,_;if(h.length){for(m=y=_=0;_<4;++_)(p=h[_])&&(d=Math.abs(p.value))&&(v+=p.value,g+=d,m+=d*p.x,y+=d*p.y);h.x=m/g,h.y=y/g}else{p=h,p.x=p.data.x,p.y=p.data.y;do v+=n[p.data.index];while(p=p.next)}h.value=v}function c(h,v,p,d){if(!h.value)return!0;var g=h.x-t.x,m=h.y-t.y,y=d-v,_=g*g+m*m;if(y*y/s<_)return _<i&&(g===0&&(g=v1(),_+=g*g),m===0&&(m=v1(),_+=m*m),_<o&&(_=Math.sqrt(o*_)),t.vx+=g*h.value*r/_,t.vy+=m*h.value*r/_),!0;if(h.length||_>=i)return;(h.data!==t||h.next)&&(g===0&&(g=v1(),_+=g*g),m===0&&(m=v1(),_+=m*m),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(y=n[h.data.index]*r/_,t.vx+=g*y,t.vy+=m*y);while(h=h.next)}return l.initialize=function(h){e=h,u()},l.strength=function(h){return arguments.length?(a=typeof h=="function"?h:du(+h),u(),l):a},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(i=h*h,l):Math.sqrt(i)},l.theta=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l}function M2t(e,t,r){var a,n=du(.1),o,i;typeof e!="function"&&(e=du(+e)),t==null&&(t=0),r==null&&(r=0);function s(u){for(var f=0,c=a.length;f<c;++f){var h=a[f],v=h.x-t||1e-6,p=h.y-r||1e-6,d=Math.sqrt(v*v+p*p),g=(i[f]-d)*o[f]*u/d;h.vx+=v*g,h.vy+=p*g}}function l(){if(!!a){var u,f=a.length;for(o=new Array(f),i=new Array(f),u=0;u<f;++u)i[u]=+e(a[u],u,a),o[u]=isNaN(i[u])?0:+n(a[u],u,a)}}return s.initialize=function(u){a=u,l()},s.strength=function(u){return arguments.length?(n=typeof u=="function"?u:du(+u),l(),s):n},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:du(+u),l(),s):e},s.x=function(u){return arguments.length?(t=+u,s):t},s.y=function(u){return arguments.length?(r=+u,s):r},s}function k2t(e){var t=du(.1),r,a,n;typeof e!="function"&&(e=du(e==null?0:+e));function o(s){for(var l=0,u=r.length,f;l<u;++l)f=r[l],f.vx+=(n[l]-f.x)*a[l]*s}function i(){if(!!r){var s,l=r.length;for(a=new Array(l),n=new Array(l),s=0;s<l;++s)a[s]=isNaN(n[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return o.initialize=function(s){r=s,i()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:du(+s),i(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:du(+s),i(),o):e},o}function E2t(e){var t=du(.1),r,a,n;typeof e!="function"&&(e=du(e==null?0:+e));function o(s){for(var l=0,u=r.length,f;l<u;++l)f=r[l],f.vy+=(n[l]-f.y)*a[l]*s}function i(){if(!!r){var s,l=r.length;for(a=new Array(l),n=new Array(l),s=0;s<l;++s)a[s]=isNaN(n[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return o.initialize=function(s){r=s,i()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:du(+s),i(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:du(+s),i(),o):e},o}var C2t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",forceCenter:G_t,forceCollide:l2t,forceLink:h2t,forceManyBody:S2t,forceRadial:M2t,forceSimulation:A2t,forceX:k2t,forceY:E2t}),L2t=qh(C2t);function P2t(e){return e.target.depth}function I2t(e){return e.depth}function D2t(e,t){return t-1-e.height}function W1e(e,t){return e.sourceLinks.length?e.depth:t-1}function R2t(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?xw(e.sourceLinks,P2t)-1:0}function jI(e){return function(){return e}}function z2t(e,t){return sG(e.source,t.source)||e.index-t.index}function F2t(e,t){return sG(e.target,t.target)||e.index-t.index}function sG(e,t){return e.y0-t.y0}function OM(e){return e.value}function qI(e){return(e.y0+e.y1)/2}function O2t(e){return qI(e.source)*e.value}function N2t(e){return qI(e.target)*e.value}function B2t(e){return e.index}function $2t(e){return e.nodes}function U2t(e){return e.links}function X1e(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function H2t(){var e=0,t=0,r=1,a=1,n=24,o=8,i=B2t,s=W1e,l=$2t,u=U2t,f=32,c=2/3;function h(){var y={nodes:l.apply(null,arguments),links:u.apply(null,arguments)};return v(y),p(y),d(y),g(y),m(y),y}h.update=function(y){return m(y),y},h.nodeId=function(y){return arguments.length?(i=typeof y=="function"?y:jI(y),h):i},h.nodeAlign=function(y){return arguments.length?(s=typeof y=="function"?y:jI(y),h):s},h.nodeWidth=function(y){return arguments.length?(n=+y,h):n},h.nodePadding=function(y){return arguments.length?(o=+y,h):o},h.nodes=function(y){return arguments.length?(l=typeof y=="function"?y:jI(y),h):l},h.links=function(y){return arguments.length?(u=typeof y=="function"?y:jI(y),h):u},h.size=function(y){return arguments.length?(e=t=0,r=+y[0],a=+y[1],h):[r-e,a-t]},h.extent=function(y){return arguments.length?(e=+y[0][0],r=+y[1][0],t=+y[0][1],a=+y[1][1],h):[[e,t],[r,a]]},h.iterations=function(y){return arguments.length?(f=+y,h):f};function v(y){y.nodes.forEach(function(S,M){S.index=M,S.sourceLinks=[],S.targetLinks=[]});var _=d1(y.nodes,i);y.links.forEach(function(S,M){S.index=M;var w=S.source,A=S.target;typeof w!="object"&&(w=S.source=X1e(_,w)),typeof A!="object"&&(A=S.target=X1e(_,A)),w.sourceLinks.push(S),A.targetLinks.push(S)})}function p(y){y.nodes.forEach(function(_){_.value=Math.max(m0(_.sourceLinks,OM),m0(_.targetLinks,OM))})}function d(y){var _,S,M;for(_=y.nodes,S=[],M=0;_.length;++M,_=S,S=[])_.forEach(function(A){A.depth=M,A.sourceLinks.forEach(function(k){S.indexOf(k.target)<0&&S.push(k.target)})});for(_=y.nodes,S=[],M=0;_.length;++M,_=S,S=[])_.forEach(function(A){A.height=M,A.targetLinks.forEach(function(k){S.indexOf(k.source)<0&&S.push(k.source)})});var w=(r-e-n)/(M-1);y.nodes.forEach(function(A){A.x1=(A.x0=e+Math.max(0,Math.min(M-1,Math.floor(s.call(null,A,M))))*w)+n})}function g(y){var _=F1e().key(function(L){return L.x0}).sortKeys(P4).entries(y.nodes).map(function(L){return L.values});w(),T();for(var S=1,M=f;M>0;--M)k(S*=.99),T(),A(S),T();function w(){var L=I4(_,function(R){return R.length}),C=c*(a-t)/(L-1);o>C&&(o=C);var I=xw(_,function(R){return(a-t-(R.length-1)*o)/m0(R,OM)});_.forEach(function(R){R.forEach(function(B,N){B.y1=(B.y0=N)+B.value*I})}),y.links.forEach(function(R){R.width=R.value*I})}function A(L){_.forEach(function(C){C.forEach(function(I){if(I.targetLinks.length){var R=(m0(I.targetLinks,O2t)/m0(I.targetLinks,OM)-qI(I))*L;I.y0+=R,I.y1+=R}})})}function k(L){_.slice().reverse().forEach(function(C){C.forEach(function(I){if(I.sourceLinks.length){var R=(m0(I.sourceLinks,N2t)/m0(I.sourceLinks,OM)-qI(I))*L;I.y0+=R,I.y1+=R}})})}function T(){_.forEach(function(L){var C,I,R=t,B=L.length,N;for(L.sort(sG),N=0;N<B;++N)C=L[N],I=R-C.y0,I>0&&(C.y0+=I,C.y1+=I),R=C.y1+o;if(I=R-o-a,I>0)for(R=C.y0-=I,C.y1-=I,N=B-2;N>=0;--N)C=L[N],I=C.y1+o-R,I>0&&(C.y0-=I,C.y1-=I),R=C.y0})}}function m(y){y.nodes.forEach(function(_){_.sourceLinks.sort(F2t),_.targetLinks.sort(z2t)}),y.nodes.forEach(function(_){var S=_.y0,M=S;_.sourceLinks.forEach(function(w){w.y0=S+w.width/2,S+=w.width}),_.targetLinks.forEach(function(w){w.y1=M+w.width/2,M+=w.width})})}return h}var lG=Math.PI,uG=2*lG,xb=1e-6,G2t=uG-xb;function fG(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Z1e(){return new fG}fG.prototype=Z1e.prototype={constructor:fG,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,a){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+a)},bezierCurveTo:function(e,t,r,a,n,o){this._+="C"+ +e+","+ +t+","+ +r+","+ +a+","+(this._x1=+n)+","+(this._y1=+o)},arcTo:function(e,t,r,a,n){e=+e,t=+t,r=+r,a=+a,n=+n;var o=this._x1,i=this._y1,s=r-e,l=a-t,u=o-e,f=i-t,c=u*u+f*f;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>xb)if(!(Math.abs(f*s-l*u)>xb)||!n)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=r-o,v=a-i,p=s*s+l*l,d=h*h+v*v,g=Math.sqrt(p),m=Math.sqrt(c),y=n*Math.tan((lG-Math.acos((p+c-d)/(2*g*m)))/2),_=y/m,S=y/g;Math.abs(_-1)>xb&&(this._+="L"+(e+_*u)+","+(t+_*f)),this._+="A"+n+","+n+",0,0,"+ +(f*h>u*v)+","+(this._x1=e+S*s)+","+(this._y1=t+S*l)}},arc:function(e,t,r,a,n,o){e=+e,t=+t,r=+r,o=!!o;var i=r*Math.cos(a),s=r*Math.sin(a),l=e+i,u=t+s,f=1^o,c=o?a-n:n-a;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>xb||Math.abs(this._y1-u)>xb)&&(this._+="L"+l+","+u),!!r&&(c<0&&(c=c%uG+uG),c>G2t?this._+="A"+r+","+r+",0,1,"+f+","+(e-i)+","+(t-s)+"A"+r+","+r+",0,1,"+f+","+(this._x1=l)+","+(this._y1=u):c>xb&&(this._+="A"+r+","+r+",0,"+ +(c>=lG)+","+f+","+(this._x1=e+r*Math.cos(n))+","+(this._y1=t+r*Math.sin(n))))},rect:function(e,t,r,a){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +a+"h"+-r+"Z"},toString:function(){return this._}};function K1e(e){return function(){return e}}function V2t(e){return e[0]}function j2t(e){return e[1]}var q2t=Array.prototype.slice;function Y2t(e){return e.source}function W2t(e){return e.target}function X2t(e){var t=Y2t,r=W2t,a=V2t,n=j2t,o=null;function i(){var s,l=q2t.call(arguments),u=t.apply(this,l),f=r.apply(this,l);if(o||(o=s=Z1e()),e(o,+a.apply(this,(l[0]=u,l)),+n.apply(this,l),+a.apply(this,(l[0]=f,l)),+n.apply(this,l)),s)return o=null,s+""||null}return i.source=function(s){return arguments.length?(t=s,i):t},i.target=function(s){return arguments.length?(r=s,i):r},i.x=function(s){return arguments.length?(a=typeof s=="function"?s:K1e(+s),i):a},i.y=function(s){return arguments.length?(n=typeof s=="function"?s:K1e(+s),i):n},i.context=function(s){return arguments.length?(o=s==null?null:s,i):o},i}function Z2t(e,t,r,a,n){e.moveTo(t,r),e.bezierCurveTo(t=(t+a)/2,r,t,n,a,n)}function J1e(){return X2t(Z2t)}function K2t(e){return[e.source.x1,e.y0]}function J2t(e){return[e.target.x0,e.y1]}function Q2t(){return J1e().source(K2t).target(J2t)}var ewt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sankey:H2t,sankeyCenter:R2t,sankeyLeft:I2t,sankeyRight:D2t,sankeyJustify:W1e,sankeyLinkHorizontal:Q2t}),twt=qh(ewt),rwt=P1e,awt=function(t,r){var a=[],n=[],o=[],i={},s=[],l;function u(_){o[_]=!1,i.hasOwnProperty(_)&&Object.keys(i[_]).forEach(function(S){delete i[_][S],o[S]&&u(S)})}function f(_){var S=!1;n.push(_),o[_]=!0;var M,w;for(M=0;M<s[_].length;M++)w=s[_][M],w===l?(c(l,n),S=!0):o[w]||(S=f(w));if(S)u(_);else for(M=0;M<s[_].length;M++){w=s[_][M];var A=i[w];A||(A={},i[w]=A),A[w]=!0}return n.pop(),S}function c(_,S){var M=[].concat(S).concat(_);r?r(M):a.push(M)}function h(_){for(var S=0;S<t.length;S++)(S<_||!t[S])&&(t[S]=[]),t[S]=t[S].filter(function(M){return M>=_})}function v(_){h(_);for(var S=t,M=rwt(S),w=M.components.filter(function(R){return R.length>1}),A=1/0,k,T=0;T<w.length;T++)for(var L=0;L<w[T].length;L++)w[T][L]<A&&(A=w[T][L],k=T);var C=w[k];if(!C)return!1;var I=t.map(function(R,B){return C.indexOf(B)===-1?[]:R.filter(function(N){return C.indexOf(N)!==-1})});return{leastVertex:A,adjList:I}}l=0;for(var p=t.length;l<p;){var d=v(l);if(l=d.leastVertex,s=d.adjList,s){for(var g=0;g<s.length;g++)for(var m=0;m<s[g].length;m++){var y=s[g][m];o[+y]=!1,i[y]={}}f(l),l=l+1}else l=p}if(!r)return a};function nwt(e){return e.target.depth}function iwt(e){return e.depth}function owt(e,t){return t-1-e.height}function Q1e(e,t){return e.sourceLinks.length?e.depth:t-1}function swt(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?xw(e.sourceLinks,nwt)-1:0}function YI(e){return function(){return e}}var exe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function lwt(e,t){return cG(e.source,t.source)||e.index-t.index}function uwt(e,t){return cG(e.target,t.target)||e.index-t.index}function cG(e,t){return e.partOfCycle===t.partOfCycle?e.y0-t.y0:e.circularLinkType==="top"||t.circularLinkType==="bottom"?-1:1}function hG(e){return e.value}function vG(e){return(e.y0+e.y1)/2}function fwt(e){return vG(e.source)}function cwt(e){return vG(e.target)}function hwt(e){return e.index}function vwt(e){return e.nodes}function dwt(e){return e.links}function txe(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function Hf(e,t){return t(e)}var p1=25,ov=10,pwt=.3;function gwt(){var e=0,t=0,r=1,a=1,n=24,o,i=hwt,s=Q1e,l=vwt,u=dwt,f=32,c=2,h,v=null;function p(){var w={nodes:l.apply(null,arguments),links:u.apply(null,arguments)};d(w),mwt(w,i,v),g(w),_(w),rxe(w,i),S(w,f,i),M(w);for(var A=4,k=0;k<A;k++)dG(w,a,i),pG(w,a,i),Twt(w,t,a,i),dG(w,a,i),pG(w,a,i);return Swt(w,t,a),sxe(w,c,a,i),w}p.nodeId=function(w){return arguments.length?(i=typeof w=="function"?w:YI(w),p):i},p.nodeAlign=function(w){return arguments.length?(s=typeof w=="function"?w:YI(w),p):s},p.nodeWidth=function(w){return arguments.length?(n=+w,p):n},p.nodePadding=function(w){return arguments.length?(o=+w,p):o},p.nodes=function(w){return arguments.length?(l=typeof w=="function"?w:YI(w),p):l},p.links=function(w){return arguments.length?(u=typeof w=="function"?w:YI(w),p):u},p.size=function(w){return arguments.length?(e=t=0,r=+w[0],a=+w[1],p):[r-e,a-t]},p.extent=function(w){return arguments.length?(e=+w[0][0],r=+w[1][0],t=+w[0][1],a=+w[1][1],p):[[e,t],[r,a]]},p.iterations=function(w){return arguments.length?(f=+w,p):f},p.circularLinkGap=function(w){return arguments.length?(c=+w,p):c},p.nodePaddingRatio=function(w){return arguments.length?(h=+w,p):h},p.sortNodes=function(w){return arguments.length?(v=w,p):v},p.update=function(w){return rxe(w,i),M(w),w.links.forEach(function(A){A.circular&&(A.circularLinkType=A.y0+A.y1<a?"top":"bottom",A.source.circularLinkType=A.circularLinkType,A.target.circularLinkType=A.circularLinkType)}),dG(w,a,i,!1),pG(w,a,i),sxe(w,c,a,i),w};function d(w){w.nodes.forEach(function(k,T){k.index=T,k.sourceLinks=[],k.targetLinks=[]});var A=d1(w.nodes,i);return w.links.forEach(function(k,T){k.index=T;var L=k.source,C=k.target;(typeof L=="undefined"?"undefined":exe(L))!=="object"&&(L=k.source=txe(A,L)),(typeof C=="undefined"?"undefined":exe(C))!=="object"&&(C=k.target=txe(A,C)),L.sourceLinks.push(k),C.targetLinks.push(k)}),w}function g(w){w.nodes.forEach(function(A){A.partOfCycle=!1,A.value=Math.max(m0(A.sourceLinks,hG),m0(A.targetLinks,hG)),A.sourceLinks.forEach(function(k){k.circular&&(A.partOfCycle=!0,A.circularLinkType=k.circularLinkType)}),A.targetLinks.forEach(function(k){k.circular&&(A.partOfCycle=!0,A.circularLinkType=k.circularLinkType)})})}function m(w){var A=0,k=0,T=0,L=0,C=I4(w.nodes,function(I){return I.column});return w.links.forEach(function(I){I.circular&&(I.circularLinkType=="top"?A=A+I.width:k=k+I.width,I.target.column==0&&(L=L+I.width),I.source.column==C&&(T=T+I.width))}),A=A>0?A+p1+ov:A,k=k>0?k+p1+ov:k,T=T>0?T+p1+ov:T,L=L>0?L+p1+ov:L,{top:A,bottom:k,left:L,right:T}}function y(w,A){var k=I4(w.nodes,function(N){return N.column}),T=r-e,L=a-t,C=T+A.right+A.left,I=L+A.top+A.bottom,R=T/C,B=L/I;return e=e*R+A.left,r=A.right==0?r:r*R,t=t*B+A.top,a=a*B,w.nodes.forEach(function(N){N.x0=e+N.column*((r-e-n)/k),N.x1=N.x0+n}),B}function _(w){var A,k,T;for(A=w.nodes,k=[],T=0;A.length;++T,A=k,k=[])A.forEach(function(L){L.depth=T,L.sourceLinks.forEach(function(C){k.indexOf(C.target)<0&&!C.circular&&k.push(C.target)})});for(A=w.nodes,k=[],T=0;A.length;++T,A=k,k=[])A.forEach(function(L){L.height=T,L.targetLinks.forEach(function(C){k.indexOf(C.source)<0&&!C.circular&&k.push(C.source)})});w.nodes.forEach(function(L){L.column=Math.floor(s.call(null,L,T))})}function S(w,A,k){var T=F1e().key(function(N){return N.column}).sortKeys(P4).entries(w.nodes).map(function(N){return N.values});I(k),B();for(var L=1,C=A;C>0;--C)R(L*=.99,k),B();function I(N){if(h){var D=1/0;T.forEach(function(X){var ee=a*h/(X.length+1);D=ee<D?ee:D}),o=D}var O=xw(T,function(X){return(a-t-(X.length-1)*o)/m0(X,hG)});O=O*pwt,w.links.forEach(function(X){X.width=X.value*O});var $=m(w),Y=y(w,$);O=O*Y,w.links.forEach(function(X){X.width=X.value*O}),T.forEach(function(X){var ee=X.length;X.forEach(function(Q,Z){Q.depth==T.length-1&&ee==1||Q.depth==0&&ee==1?(Q.y0=a/2-Q.value*O,Q.y1=Q.y0+Q.value*O):Q.partOfCycle?nxe(Q,N)==0?(Q.y0=a/2+Z,Q.y1=Q.y0+Q.value*O):Q.circularLinkType=="top"?(Q.y0=t+Z,Q.y1=Q.y0+Q.value*O):(Q.y0=a-Q.value*O-Z,Q.y1=Q.y0+Q.value*O):$.top==0||$.bottom==0?(Q.y0=(a-t)/ee*Z,Q.y1=Q.y0+Q.value*O):(Q.y0=(a-t)/2-ee/2+Z,Q.y1=Q.y0+Q.value*O)})})}function R(N,D){var O=T.length;T.forEach(function($){var Y=$.length,X=$[0].depth;$.forEach(function(ee){var Q;if((ee.sourceLinks.length||ee.targetLinks.length)&&!(ee.partOfCycle&&nxe(ee,D)>0))if(X==0&&Y==1)Q=ee.y1-ee.y0,ee.y0=a/2-Q/2,ee.y1=a/2+Q/2;else if(X==O-1&&Y==1)Q=ee.y1-ee.y0,ee.y0=a/2-Q/2,ee.y1=a/2+Q/2;else{var Z=0,q=Ohe(ee.sourceLinks,cwt),ae=Ohe(ee.targetLinks,fwt);q&&ae?Z=(q+ae)/2:Z=q||ae;var ie=(Z-vG(ee))*N;ee.y0+=ie,ee.y1+=ie}})})}function B(){T.forEach(function(N){var D,O,$=t,Y=N.length,X;for(N.sort(cG),X=0;X<Y;++X)D=N[X],O=$-D.y0,O>0&&(D.y0+=O,D.y1+=O),$=D.y1+o;if(O=$-o-a,O>0)for($=D.y0-=O,D.y1-=O,X=Y-2;X>=0;--X)D=N[X],O=D.y1+o-$,O>0&&(D.y0-=O,D.y1-=O),$=D.y0})}}function M(w){w.nodes.forEach(function(A){A.sourceLinks.sort(uwt),A.targetLinks.sort(lwt)}),w.nodes.forEach(function(A){var k=A.y0,T=k,L=A.y1,C=L;A.sourceLinks.forEach(function(I){I.circular?(I.y0=L-I.width/2,L=L-I.width):(I.y0=k+I.width/2,k+=I.width)}),A.targetLinks.forEach(function(I){I.circular?(I.y1=C-I.width/2,C=C-I.width):(I.y1=T+I.width/2,T+=I.width)})})}return p}function mwt(e,t,r){var a=0;if(r===null){for(var n=[],o=0;o<e.links.length;o++){var i=e.links[o],s=i.source.index,l=i.target.index;n[s]||(n[s]=[]),n[l]||(n[l]=[]),n[s].indexOf(l)===-1&&n[s].push(l)}var u=awt(n);u.sort(function(v,p){return v.length-p.length});var f={};for(o=0;o<u.length;o++){var c=u[o],h=c.slice(-2);f[h[0]]||(f[h[0]]={}),f[h[0]][h[1]]=!0}e.links.forEach(function(v){var p=v.target.index,d=v.source.index;p===d||f[d]&&f[d][p]?(v.circular=!0,v.circularLinkID=a,a=a+1):v.circular=!1})}else e.links.forEach(function(v){v.source[r]<v.target[r]?v.circular=!1:(v.circular=!0,v.circularLinkID=a,a=a+1)})}function rxe(e,t){var r=0,a=0;e.links.forEach(function(n){n.circular&&(n.source.circularLinkType||n.target.circularLinkType?n.circularLinkType=n.source.circularLinkType?n.source.circularLinkType:n.target.circularLinkType:n.circularLinkType=r<a?"top":"bottom",n.circularLinkType=="top"?r=r+1:a=a+1,e.nodes.forEach(function(o){(Hf(o,t)==Hf(n.source,t)||Hf(o,t)==Hf(n.target,t))&&(o.circularLinkType=n.circularLinkType)}))}),e.links.forEach(function(n){n.circular&&(n.source.circularLinkType==n.target.circularLinkType&&(n.circularLinkType=n.source.circularLinkType),NM(n,t)&&(n.circularLinkType=n.source.circularLinkType))})}function axe(e){var t=Math.abs(e.y1-e.y0),r=Math.abs(e.target.x0-e.source.x1);return Math.atan(r/t)}function ywt(e,t){return e.source.column<t.target.column?!1:!(e.target.column>t.source.column)}function nxe(e,t){var r=0;e.sourceLinks.forEach(function(n){r=n.circular&&!NM(n,t)?r+1:r});var a=0;return e.targetLinks.forEach(function(n){a=n.circular&&!NM(n,t)?a+1:a}),r+a}function ixe(e){var t=e.source.sourceLinks,r=0;t.forEach(function(o){r=o.circular?r+1:r});var a=e.target.targetLinks,n=0;return a.forEach(function(o){n=o.circular?n+1:n}),!(r>1||n>1)}function oxe(e,t,r){return e.sort(bwt),e.forEach(function(a,n){var o=0;if(NM(a,r)&&ixe(a))a.circularPathData.verticalBuffer=o+a.width/2;else{var i=0;for(i;i<n;i++)if(ywt(e[n],e[i])){var s=e[i].circularPathData.verticalBuffer+e[i].width/2+t;o=s>o?s:o}a.circularPathData.verticalBuffer=o+a.width/2}}),e}function sxe(e,t,r,a){var n=5,o=xw(e.links,function(l){return l.source.y0});e.links.forEach(function(l){l.circular&&(l.circularPathData={})});var i=e.links.filter(function(l){return l.circularLinkType=="top"});oxe(i,t,a);var s=e.links.filter(function(l){return l.circularLinkType=="bottom"});oxe(s,t,a),e.links.forEach(function(l){if(l.circular){if(l.circularPathData.arcRadius=l.width+ov,l.circularPathData.leftNodeBuffer=n,l.circularPathData.rightNodeBuffer=n,l.circularPathData.sourceWidth=l.source.x1-l.source.x0,l.circularPathData.sourceX=l.source.x0+l.circularPathData.sourceWidth,l.circularPathData.targetX=l.target.x0,l.circularPathData.sourceY=l.y0,l.circularPathData.targetY=l.y1,NM(l,a)&&ixe(l))l.circularPathData.leftSmallArcRadius=ov+l.width/2,l.circularPathData.leftLargeArcRadius=ov+l.width/2,l.circularPathData.rightSmallArcRadius=ov+l.width/2,l.circularPathData.rightLargeArcRadius=ov+l.width/2,l.circularLinkType=="bottom"?(l.circularPathData.verticalFullExtent=l.source.y1+p1+l.circularPathData.verticalBuffer,l.circularPathData.verticalLeftInnerExtent=l.circularPathData.verticalFullExtent-l.circularPathData.leftLargeArcRadius,l.circularPathData.verticalRightInnerExtent=l.circularPathData.verticalFullExtent-l.circularPathData.rightLargeArcRadius):(l.circularPathData.verticalFullExtent=l.source.y0-p1-l.circularPathData.verticalBuffer,l.circularPathData.verticalLeftInnerExtent=l.circularPathData.verticalFullExtent+l.circularPathData.leftLargeArcRadius,l.circularPathData.verticalRightInnerExtent=l.circularPathData.verticalFullExtent+l.circularPathData.rightLargeArcRadius);else{var u=l.source.column,f=l.circularLinkType,c=e.links.filter(function(p){return p.source.column==u&&p.circularLinkType==f});l.circularLinkType=="bottom"?c.sort(uxe):c.sort(lxe);var h=0;c.forEach(function(p,d){p.circularLinkID==l.circularLinkID&&(l.circularPathData.leftSmallArcRadius=ov+l.width/2+h,l.circularPathData.leftLargeArcRadius=ov+l.width/2+d*t+h),h=h+p.width}),u=l.target.column,c=e.links.filter(function(p){return p.target.column==u&&p.circularLinkType==f}),l.circularLinkType=="bottom"?c.sort(wwt):c.sort(_wt),h=0,c.forEach(function(p,d){p.circularLinkID==l.circularLinkID&&(l.circularPathData.rightSmallArcRadius=ov+l.width/2+h,l.circularPathData.rightLargeArcRadius=ov+l.width/2+d*t+h),h=h+p.width}),l.circularLinkType=="bottom"?(l.circularPathData.verticalFullExtent=Math.max(r,l.source.y1,l.target.y1)+p1+l.circularPathData.verticalBuffer,l.circularPathData.verticalLeftInnerExtent=l.circularPathData.verticalFullExtent-l.circularPathData.leftLargeArcRadius,l.circularPathData.verticalRightInnerExtent=l.circularPathData.verticalFullExtent-l.circularPathData.rightLargeArcRadius):(l.circularPathData.verticalFullExtent=o-p1-l.circularPathData.verticalBuffer,l.circularPathData.verticalLeftInnerExtent=l.circularPathData.verticalFullExtent+l.circularPathData.leftLargeArcRadius,l.circularPathData.verticalRightInnerExtent=l.circularPathData.verticalFullExtent+l.circularPathData.rightLargeArcRadius)}l.circularPathData.leftInnerExtent=l.circularPathData.sourceX+l.circularPathData.leftNodeBuffer,l.circularPathData.rightInnerExtent=l.circularPathData.targetX-l.circularPathData.rightNodeBuffer,l.circularPathData.leftFullExtent=l.circularPathData.sourceX+l.circularPathData.leftLargeArcRadius+l.circularPathData.leftNodeBuffer,l.circularPathData.rightFullExtent=l.circularPathData.targetX-l.circularPathData.rightLargeArcRadius-l.circularPathData.rightNodeBuffer}if(l.circular)l.path=xwt(l);else{var v=J1e().source(function(p){var d=p.source.x0+(p.source.x1-p.source.x0),g=p.y0;return[d,g]}).target(function(p){var d=p.target.x0,g=p.y1;return[d,g]});l.path=v(l)}})}function xwt(e){var t="";return e.circularLinkType=="top"?t="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 0 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY-e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 0 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 0 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY-e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 0 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY:t="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 1 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY+e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 1 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 1 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY+e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 1 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY,t}function bwt(e,t){return WI(e)==WI(t)?e.circularLinkType=="bottom"?uxe(e,t):lxe(e,t):WI(t)-WI(e)}function lxe(e,t){return e.y0-t.y0}function uxe(e,t){return t.y0-e.y0}function _wt(e,t){return e.y1-t.y1}function wwt(e,t){return t.y1-e.y1}function WI(e){return e.target.column-e.source.column}function fxe(e){return e.target.x0-e.source.x1}function cxe(e,t){var r=axe(e),a=fxe(t)/Math.tan(r),n=XI(e)=="up"?e.y1+a:e.y1-a;return n}function hxe(e,t){var r=axe(e),a=fxe(t)/Math.tan(r),n=XI(e)=="up"?e.y1-a:e.y1+a;return n}function Twt(e,t,r,a){e.links.forEach(function(n){if(!n.circular&&n.target.column-n.source.column>1){var o=n.source.column+1,i=n.target.column-1,s=1,l=i-o+1;for(s=1;o<=i;o++,s++)e.nodes.forEach(function(u){if(u.column==o){var f=s/(l+1),c=Math.pow(1-f,3),h=3*f*Math.pow(1-f,2),v=3*Math.pow(f,2)*(1-f),p=Math.pow(f,3),d=c*n.y0+h*n.y0+v*n.y1+p*n.y1,g=d-n.width/2,m=d+n.width/2,y;g>u.y0&&g<u.y1?(y=u.y1-g+10,y=u.circularLinkType=="bottom"?y:-y,u=t3(u,y,t,r),e.nodes.forEach(function(_){Hf(_,a)==Hf(u,a)||_.column!=u.column||Awt(u,_)&&t3(_,y,t,r)})):m>u.y0&&m<u.y1?(y=m-u.y0+10,u=t3(u,y,t,r),e.nodes.forEach(function(_){Hf(_,a)==Hf(u,a)||_.column!=u.column||_.y0<u.y1&&_.y1>u.y1&&t3(_,y,t,r)})):g<u.y0&&m>u.y1&&(y=m-u.y0+10,u=t3(u,y,t,r),e.nodes.forEach(function(_){Hf(_,a)==Hf(u,a)||_.column!=u.column||_.y0<u.y1&&_.y1>u.y1&&t3(_,y,t,r)}))}})}})}function Awt(e,t){return e.y0>t.y0&&e.y0<t.y1||e.y1>t.y0&&e.y1<t.y1?!0:e.y0<t.y0&&e.y1>t.y1}function t3(e,t,r,a){return e.y0+t>=r&&e.y1+t<=a&&(e.y0=e.y0+t,e.y1=e.y1+t,e.targetLinks.forEach(function(n){n.y1=n.y1+t}),e.sourceLinks.forEach(function(n){n.y0=n.y0+t})),e}function dG(e,t,r,a){e.nodes.forEach(function(n){a&&n.y+(n.y1-n.y0)>t&&(n.y=n.y-(n.y+(n.y1-n.y0)-t));var o=e.links.filter(function(l){return Hf(l.source,r)==Hf(n,r)}),i=o.length;i>1&&o.sort(function(l,u){if(!l.circular&&!u.circular){if(l.target.column==u.target.column)return l.y1-u.y1;if(vxe(l,u)){if(l.target.column>u.target.column){var f=hxe(u,l);return l.y1-f}if(u.target.column>l.target.column){var c=hxe(l,u);return c-u.y1}}else return l.y1-u.y1}if(l.circular&&!u.circular)return l.circularLinkType=="top"?-1:1;if(u.circular&&!l.circular)return u.circularLinkType=="top"?1:-1;if(l.circular&&u.circular)return l.circularLinkType===u.circularLinkType&&l.circularLinkType=="top"?l.target.column===u.target.column?l.target.y1-u.target.y1:u.target.column-l.target.column:l.circularLinkType===u.circularLinkType&&l.circularLinkType=="bottom"?l.target.column===u.target.column?u.target.y1-l.target.y1:l.target.column-u.target.column:l.circularLinkType=="top"?-1:1});var s=n.y0;o.forEach(function(l){l.y0=s+l.width/2,s=s+l.width}),o.forEach(function(l,u){if(l.circularLinkType=="bottom"){var f=u+1,c=0;for(f;f<i;f++)c=c+o[f].width;l.y0=n.y1-c-l.width/2}})})}function pG(e,t,r){e.nodes.forEach(function(a){var n=e.links.filter(function(s){return Hf(s.target,r)==Hf(a,r)}),o=n.length;o>1&&n.sort(function(s,l){if(!s.circular&&!l.circular){if(s.source.column==l.source.column)return s.y0-l.y0;if(vxe(s,l)){if(l.source.column<s.source.column){var u=cxe(l,s);return s.y0-u}if(s.source.column<l.source.column){var f=cxe(s,l);return f-l.y0}}else return s.y0-l.y0}if(s.circular&&!l.circular)return s.circularLinkType=="top"?-1:1;if(l.circular&&!s.circular)return l.circularLinkType=="top"?1:-1;if(s.circular&&l.circular)return s.circularLinkType===l.circularLinkType&&s.circularLinkType=="top"?s.source.column===l.source.column?s.source.y1-l.source.y1:s.source.column-l.source.column:s.circularLinkType===l.circularLinkType&&s.circularLinkType=="bottom"?s.source.column===l.source.column?s.source.y1-l.source.y1:l.source.column-s.source.column:s.circularLinkType=="top"?-1:1});var i=a.y0;n.forEach(function(s){s.y1=i+s.width/2,i=i+s.width}),n.forEach(function(s,l){if(s.circularLinkType=="bottom"){var u=l+1,f=0;for(u;u<o;u++)f=f+n[u].width;s.y1=a.y1-f-s.width/2}})})}function vxe(e,t){return XI(e)==XI(t)}function XI(e){return e.y0-e.y1>0?"up":"down"}function NM(e,t){return Hf(e.source,t)==Hf(e.target,t)}function Swt(e,t,r){var a=e.nodes,n=e.links,o=!1,i=!1;if(n.forEach(function(h){h.circularLinkType=="top"?o=!0:h.circularLinkType=="bottom"&&(i=!0)}),o==!1||i==!1){var s=xw(a,function(h){return h.y0}),l=I4(a,function(h){return h.y1}),u=l-s,f=r-t,c=f/u;a.forEach(function(h){var v=(h.y1-h.y0)*c;h.y0=(h.y0-s)*c,h.y1=h.y0+v}),n.forEach(function(h){h.y0=(h.y0-s)*c,h.y1=(h.y1-s)*c,h.width=h.width*c})}}var Mwt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sankeyCircular:gwt,sankeyCenter:swt,sankeyLeft:iwt,sankeyRight:owt,sankeyJustify:Q1e}),kwt=qh(Mwt),dxe={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}},pxe=L2t,Ewt=J2.interpolateNumber,r3=Ra.exports,Cwt=twt,Lwt=kwt,so=dxe,BM=Hl.exports,a3=Oa.exports,Pwt=xn.exports,wm=bt.exports,gG=wm.strTranslate,Iwt=wm.strRotate,mG=ym,$M=mG.keyFun,ZI=mG.repeat,gxe=mG.unwrap,yG=xo,Dwt=Pa,mxe=ou,Rwt=mxe.CAP_SHIFT,zwt=mxe.LINE_SPACING,Fwt=3;function Owt(e,t,r){var a=gxe(t),n=a.trace,o=n.domain,i=n.orientation==="h",s=n.node.pad,l=n.node.thickness,u=e.width*(o.x[1]-o.x[0]),f=e.height*(o.y[1]-o.y[0]),c=a._nodes,h=a._links,v=a.circular,p;v?p=Lwt.sankeyCircular().circularLinkGap(0):p=Cwt.sankey(),p.iterations(so.sankeyIterations).size(i?[u,f]:[f,u]).nodeWidth(l).nodePadding(s).nodeId(function(R){return R.pointNumber}).nodes(c).links(h);var d=p();p.nodePadding()<s&&wm.warn("node.pad was reduced to ",p.nodePadding()," to fit within the figure.");var g,m,y;for(var _ in a._groupLookup){var S=parseInt(a._groupLookup[_]),M;for(g=0;g<d.nodes.length;g++)if(d.nodes[g].pointNumber===S){M=d.nodes[g];break}if(!!M){var w={pointNumber:parseInt(_),x0:M.x0,x1:M.x1,y0:M.y0,y1:M.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};d.nodes.unshift(w),M.childrenNodes.unshift(w)}}function A(){for(g=0;g<d.nodes.length;g++){var R=d.nodes[g],B={},N,D;for(m=0;m<R.targetLinks.length;m++)D=R.targetLinks[m],N=D.source.pointNumber+":"+D.target.pointNumber,B.hasOwnProperty(N)||(B[N]=[]),B[N].push(D);var O=Object.keys(B);for(m=0;m<O.length;m++){N=O[m];var $=B[N],Y=0,X={};for(y=0;y<$.length;y++)D=$[y],X[D.label]||(X[D.label]=0),X[D.label]+=D.value,Y+=D.value;for(y=0;y<$.length;y++)D=$[y],D.flow={value:Y,labelConcentration:X[D.label]/Y,concentration:D.value/Y,links:$},D.concentrationscale&&(D.color=BM(D.concentrationscale(D.flow.labelConcentration)))}var ee=0;for(m=0;m<R.sourceLinks.length;m++)ee+=R.sourceLinks[m].value;for(m=0;m<R.sourceLinks.length;m++)D=R.sourceLinks[m],D.concentrationOut=D.value/ee;var Q=0;for(m=0;m<R.targetLinks.length;m++)Q+=R.targetLinks[m].value;for(m=0;m<R.targetLinks.length;m++)D=R.targetLinks[m],D.concenrationIn=D.value/Q}}A();function k(R){R.forEach(function(B){var N,D,O=0,$=B.length,Y;for(B.sort(function(X,ee){return X.y0-ee.y0}),Y=0;Y<$;++Y)N=B[Y],N.y0>=O||(D=O-N.y0,D>1e-6&&(N.y0+=D,N.y1+=D)),O=N.y1+s})}function T(R){var B=R.map(function(ee,Q){return{x0:ee.x0,index:Q}}).sort(function(ee,Q){return ee.x0-Q.x0}),N=[],D=-1,O,$=-1/0,Y;for(g=0;g<B.length;g++){var X=R[B[g].index];X.x0>$+l&&(D+=1,O=X.x0),$=X.x0,N[D]||(N[D]=[]),N[D].push(X),Y=O-X.x0,X.x0+=Y,X.x1+=Y}return N}if(n.node.x.length&&n.node.y.length){for(g=0;g<Math.min(n.node.x.length,n.node.y.length,d.nodes.length);g++)if(n.node.x[g]&&n.node.y[g]){var L=[n.node.x[g]*u,n.node.y[g]*f];d.nodes[g].x0=L[0]-l/2,d.nodes[g].x1=L[0]+l/2;var C=d.nodes[g].y1-d.nodes[g].y0;d.nodes[g].y0=L[1]-C/2,d.nodes[g].y1=L[1]+C/2}if(n.arrangement==="snap"){c=d.nodes;var I=T(c);k(I)}p.update(d)}return{circular:v,key:r,trace:n,guid:wm.randstr(),horizontal:i,width:u,height:f,nodePad:n.node.pad,nodeLineColor:n.node.line.color,nodeLineWidth:n.node.line.width,linkLineColor:n.link.line.color,linkLineWidth:n.link.line.width,valueFormat:n.valueformat,valueSuffix:n.valuesuffix,textFont:n.textfont,translateX:o.x[0]*e.width+e.margin.l,translateY:e.height-o.y[1]*e.height+e.margin.t,dragParallel:i?f:u,dragPerpendicular:i?u:f,arrangement:n.arrangement,sankey:p,graph:d,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function Nwt(e,t,r){var a=BM(t.color),n=t.source.label+"|"+t.target.label,o=n+"__"+r;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:o,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:a3.tinyRGB(a),tinyColorAlpha:a.getAlpha(),linkPath:xG,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function Bwt(e){var t="",r=e.width/2,a=e.circularPathData;return e.circularLinkType==="top"?t="M "+a.targetX+" "+(a.targetY+r)+" L"+a.rightInnerExtent+" "+(a.targetY+r)+"A"+(a.rightLargeArcRadius+r)+" "+(a.rightSmallArcRadius+r)+" 0 0 1 "+(a.rightFullExtent-r)+" "+(a.targetY-a.rightSmallArcRadius)+"L"+(a.rightFullExtent-r)+" "+a.verticalRightInnerExtent+"A"+(a.rightLargeArcRadius+r)+" "+(a.rightLargeArcRadius+r)+" 0 0 1 "+a.rightInnerExtent+" "+(a.verticalFullExtent-r)+"L"+a.leftInnerExtent+" "+(a.verticalFullExtent-r)+"A"+(a.leftLargeArcRadius+r)+" "+(a.leftLargeArcRadius+r)+" 0 0 1 "+(a.leftFullExtent+r)+" "+a.verticalLeftInnerExtent+"L"+(a.leftFullExtent+r)+" "+(a.sourceY-a.leftSmallArcRadius)+"A"+(a.leftLargeArcRadius+r)+" "+(a.leftSmallArcRadius+r)+" 0 0 1 "+a.leftInnerExtent+" "+(a.sourceY+r)+"L"+a.sourceX+" "+(a.sourceY+r)+"L"+a.sourceX+" "+(a.sourceY-r)+"L"+a.leftInnerExtent+" "+(a.sourceY-r)+"A"+(a.leftLargeArcRadius-r)+" "+(a.leftSmallArcRadius-r)+" 0 0 0 "+(a.leftFullExtent-r)+" "+(a.sourceY-a.leftSmallArcRadius)+"L"+(a.leftFullExtent-r)+" "+a.verticalLeftInnerExtent+"A"+(a.leftLargeArcRadius-r)+" "+(a.leftLargeArcRadius-r)+" 0 0 0 "+a.leftInnerExtent+" "+(a.verticalFullExtent+r)+"L"+a.rightInnerExtent+" "+(a.verticalFullExtent+r)+"A"+(a.rightLargeArcRadius-r)+" "+(a.rightLargeArcRadius-r)+" 0 0 0 "+(a.rightFullExtent+r)+" "+a.verticalRightInnerExtent+"L"+(a.rightFullExtent+r)+" "+(a.targetY-a.rightSmallArcRadius)+"A"+(a.rightLargeArcRadius-r)+" "+(a.rightSmallArcRadius-r)+" 0 0 0 "+a.rightInnerExtent+" "+(a.targetY-r)+"L"+a.targetX+" "+(a.targetY-r)+"Z":t="M "+a.targetX+" "+(a.targetY-r)+" L"+a.rightInnerExtent+" "+(a.targetY-r)+"A"+(a.rightLargeArcRadius+r)+" "+(a.rightSmallArcRadius+r)+" 0 0 0 "+(a.rightFullExtent-r)+" "+(a.targetY+a.rightSmallArcRadius)+"L"+(a.rightFullExtent-r)+" "+a.verticalRightInnerExtent+"A"+(a.rightLargeArcRadius+r)+" "+(a.rightLargeArcRadius+r)+" 0 0 0 "+a.rightInnerExtent+" "+(a.verticalFullExtent+r)+"L"+a.leftInnerExtent+" "+(a.verticalFullExtent+r)+"A"+(a.leftLargeArcRadius+r)+" "+(a.leftLargeArcRadius+r)+" 0 0 0 "+(a.leftFullExtent+r)+" "+a.verticalLeftInnerExtent+"L"+(a.leftFullExtent+r)+" "+(a.sourceY+a.leftSmallArcRadius)+"A"+(a.leftLargeArcRadius+r)+" "+(a.leftSmallArcRadius+r)+" 0 0 0 "+a.leftInnerExtent+" "+(a.sourceY-r)+"L"+a.sourceX+" "+(a.sourceY-r)+"L"+a.sourceX+" "+(a.sourceY+r)+"L"+a.leftInnerExtent+" "+(a.sourceY+r)+"A"+(a.leftLargeArcRadius-r)+" "+(a.leftSmallArcRadius-r)+" 0 0 1 "+(a.leftFullExtent-r)+" "+(a.sourceY+a.leftSmallArcRadius)+"L"+(a.leftFullExtent-r)+" "+a.verticalLeftInnerExtent+"A"+(a.leftLargeArcRadius-r)+" "+(a.leftLargeArcRadius-r)+" 0 0 1 "+a.leftInnerExtent+" "+(a.verticalFullExtent-r)+"L"+a.rightInnerExtent+" "+(a.verticalFullExtent-r)+"A"+(a.rightLargeArcRadius-r)+" "+(a.rightLargeArcRadius-r)+" 0 0 1 "+(a.rightFullExtent+r)+" "+a.verticalRightInnerExtent+"L"+(a.rightFullExtent+r)+" "+(a.targetY+a.rightSmallArcRadius)+"A"+(a.rightLargeArcRadius-r)+" "+(a.rightSmallArcRadius-r)+" 0 0 1 "+a.rightInnerExtent+" "+(a.targetY+r)+"L"+a.targetX+" "+(a.targetY+r)+"Z",t}function xG(){var e=.5;function t(r){if(r.link.circular)return Bwt(r.link);var a=r.link.source.x1,n=r.link.target.x0,o=Ewt(a,n),i=o(e),s=o(1-e),l=r.link.y0-r.link.width/2,u=r.link.y0+r.link.width/2,f=r.link.y1-r.link.width/2,c=r.link.y1+r.link.width/2;return"M"+a+","+l+"C"+i+","+l+" "+s+","+f+" "+n+","+f+"L"+n+","+c+"C"+s+","+c+" "+i+","+u+" "+a+","+u+"Z"}return t}function $wt(e,t){var r=BM(t.color),a=so.nodePadAcross,n=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var o=t.dx,i=Math.max(.5,t.dy),s="node_"+t.pointNumber;return t.group&&(s=wm.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(o),visibleHeight:i,zoneX:-a,zoneY:-n,zoneWidth:o+2*a,zoneHeight:i+2*n,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:t.originalLayer===1,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:a3.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function bG(e){e.attr("transform",function(t){return gG(t.node.x0.toFixed(3),t.node.y0.toFixed(3))})}function Uwt(e){e.call(bG)}function yxe(e,t){e.call(Uwt),t.attr("d",xG())}function xxe(e){e.attr("width",function(t){return t.node.x1-t.node.x0}).attr("height",function(t){return t.visibleHeight})}function _G(e){return e.link.width>1||e.linkLineWidth>0}function bxe(e){var t=gG(e.translateX,e.translateY);return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function _xe(e,t,r){e.on(".basic",null).on("mouseover.basic",function(a){!a.interactionState.dragInProgress&&!a.partOfGroup&&(r.hover(this,a,t),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){!a.interactionState.dragInProgress&&!a.partOfGroup&&(r.follow(this,a),a.interactionState.hovered=[this,a])}).on("mouseout.basic",function(a){!a.interactionState.dragInProgress&&!a.partOfGroup&&(r.unhover(this,a,t),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(r.unhover(this,a,t),a.interactionState.hovered=!1),!a.interactionState.dragInProgress&&!a.partOfGroup&&r.select(this,a,t)})}function Hwt(e,t,r,a){var n=r3.behavior.drag().origin(function(o){return{x:o.node.x0+o.visibleWidth/2,y:o.node.y0+o.visibleHeight/2}}).on("dragstart",function(o){if(o.arrangement!=="fixed"&&(wm.ensureSingle(a._fullLayout._infolayer,"g","dragcover",function(s){a._fullLayout._dragCover=s}),wm.raiseToTop(this),o.interactionState.dragInProgress=o.node,Txe(o.node),o.interactionState.hovered&&(r.nodeEvents.unhover.apply(0,o.interactionState.hovered),o.interactionState.hovered=!1),o.arrangement==="snap")){var i=o.traceId+"|"+o.key;o.forceLayouts[i]?o.forceLayouts[i].alpha(1):Gwt(e,i,o),Vwt(e,t,o,i,a)}}).on("drag",function(o){if(o.arrangement!=="fixed"){var i=r3.event.x,s=r3.event.y;o.arrangement==="snap"?(o.node.x0=i-o.visibleWidth/2,o.node.x1=i+o.visibleWidth/2,o.node.y0=s-o.visibleHeight/2,o.node.y1=s+o.visibleHeight/2):(o.arrangement==="freeform"&&(o.node.x0=i-o.visibleWidth/2,o.node.x1=i+o.visibleWidth/2),s=Math.max(0,Math.min(o.size-o.visibleHeight/2,s)),o.node.y0=s-o.visibleHeight/2,o.node.y1=s+o.visibleHeight/2),Txe(o.node),o.arrangement!=="snap"&&(o.sankey.update(o.graph),yxe(e.filter(Axe(o)),t))}}).on("dragend",function(o){if(o.arrangement!=="fixed"){o.interactionState.dragInProgress=!1;for(var i=0;i<o.node.childrenNodes.length;i++)o.node.childrenNodes[i].x=o.node.x,o.node.childrenNodes[i].y=o.node.y;o.arrangement!=="snap"&&wxe(o,a)}});e.on(".drag",null).call(n)}function Gwt(e,t,r,a){Ywt(r.graph.nodes);var n=r.graph.nodes.filter(function(o){return o.originalX===r.node.originalX}).filter(function(o){return!o.partOfGroup});r.forceLayouts[t]=pxe.forceSimulation(n).alphaDecay(0).force("collide",pxe.forceCollide().radius(function(o){return o.dy/2+r.nodePad/2}).strength(1).iterations(so.forceIterations)).force("constrain",jwt(e,t,n,r)).stop()}function Vwt(e,t,r,a,n){window.requestAnimationFrame(function o(){var i;for(i=0;i<so.forceTicksPerFrame;i++)r.forceLayouts[a].tick();var s=r.graph.nodes;if(Wwt(s),r.sankey.update(r.graph),yxe(e.filter(Axe(r)),t),r.forceLayouts[a].alpha()>0)window.requestAnimationFrame(o);else{var l=r.node.originalX;r.node.x0=l-r.visibleWidth/2,r.node.x1=l+r.visibleWidth/2,wxe(r,n)}})}function jwt(e,t,r,a){return function(){for(var o=0,i=0;i<r.length;i++){var s=r[i];s===a.interactionState.dragInProgress?(s.x=s.lastDraggedX,s.y=s.lastDraggedY):(s.vx=(s.originalX-s.x)/so.forceTicksPerFrame,s.y=Math.min(a.size-s.dy/2,Math.max(s.dy/2,s.y))),o=Math.max(o,Math.abs(s.vx),Math.abs(s.vy))}!a.interactionState.dragInProgress&&o<.1&&a.forceLayouts[t].alpha()>0&&a.forceLayouts[t].alpha(0)}}function wxe(e,t){for(var r=[],a=[],n=0;n<e.graph.nodes.length;n++){var o=(e.graph.nodes[n].x0+e.graph.nodes[n].x1)/2,i=(e.graph.nodes[n].y0+e.graph.nodes[n].y1)/2;r.push(o/e.figure.width),a.push(i/e.figure.height)}Dwt.call("_guiRestyle",t,{"node.x":[r],"node.y":[a]},e.trace.index).then(function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()})}function qwt(e){var t=[],r;for(r=0;r<e.length;r++)e[r].originalX=(e[r].x0+e[r].x1)/2,e[r].originalY=(e[r].y0+e[r].y1)/2,t.indexOf(e[r].originalX)===-1&&t.push(e[r].originalX);for(t.sort(function(a,n){return a-n}),r=0;r<e.length;r++)e[r].originalLayerIndex=t.indexOf(e[r].originalX),e[r].originalLayer=e[r].originalLayerIndex/(t.length-1)}function Txe(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function Axe(e){return function(t){return t.node.originalX===e.node.originalX}}function Ywt(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}function Wwt(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}var Xwt=function(e,t,r,a,n){var o=!1;wm.ensureSingle(e._fullLayout._infolayer,"g","first-render",function(){o=!0});var i=e._fullLayout._dragCover,s=r.filter(function(d){return gxe(d).trace.visible}).map(Owt.bind(null,a)),l=t.selectAll("."+so.cn.sankey).data(s,$M);l.exit().remove(),l.enter().append("g").classed(so.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",bxe),l.each(function(d,g){e._fullData[g]._sankey=d;var m="bgsankey-"+d.trace.uid+"-"+g;wm.ensureSingle(e._fullLayout._draggers,"rect",m),e._fullData[g]._bgRect=r3.select("."+m),e._fullData[g]._bgRect.style("pointer-events","all").attr("width",d.width).attr("height",d.height).attr("x",d.translateX).attr("y",d.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),l.transition().ease(so.ease).duration(so.duration).attr("transform",bxe);var u=l.selectAll("."+so.cn.sankeyLinks).data(ZI,$M);u.enter().append("g").classed(so.cn.sankeyLinks,!0).style("fill","none");var f=u.selectAll("."+so.cn.sankeyLink).data(function(d){var g=d.graph.links;return g.filter(function(m){return m.value}).map(Nwt.bind(null,d))},$M);f.enter().append("path").classed(so.cn.sankeyLink,!0).call(_xe,l,n.linkEvents),f.style("stroke",function(d){return _G(d)?a3.tinyRGB(BM(d.linkLineColor)):d.tinyColorHue}).style("stroke-opacity",function(d){return _G(d)?a3.opacity(d.linkLineColor):d.tinyColorAlpha}).style("fill",function(d){return d.tinyColorHue}).style("fill-opacity",function(d){return d.tinyColorAlpha}).style("stroke-width",function(d){return _G(d)?d.linkLineWidth:1}).attr("d",xG()),f.style("opacity",function(){return e._context.staticPlot||o||i?1:0}).transition().ease(so.ease).duration(so.duration).style("opacity",1),f.exit().transition().ease(so.ease).duration(so.duration).style("opacity",0).remove();var c=l.selectAll("."+so.cn.sankeyNodeSet).data(ZI,$M);c.enter().append("g").classed(so.cn.sankeyNodeSet,!0),c.style("cursor",function(d){switch(d.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var h=c.selectAll("."+so.cn.sankeyNode).data(function(d){var g=d.graph.nodes;return qwt(g),g.map($wt.bind(null,d))},$M);h.enter().append("g").classed(so.cn.sankeyNode,!0).call(bG).style("opacity",function(d){return(e._context.staticPlot||o)&&!d.partOfGroup?1:0}),h.call(_xe,l,n.nodeEvents).call(Hwt,f,n,e),h.transition().ease(so.ease).duration(so.duration).call(bG).style("opacity",function(d){return d.partOfGroup?0:1}),h.exit().transition().ease(so.ease).duration(so.duration).style("opacity",0).remove();var v=h.selectAll("."+so.cn.nodeRect).data(ZI);v.enter().append("rect").classed(so.cn.nodeRect,!0).call(xxe),v.style("stroke-width",function(d){return d.nodeLineWidth}).style("stroke",function(d){return a3.tinyRGB(BM(d.nodeLineColor))}).style("stroke-opacity",function(d){return a3.opacity(d.nodeLineColor)}).style("fill",function(d){return d.tinyColorHue}).style("fill-opacity",function(d){return d.tinyColorAlpha}),v.transition().ease(so.ease).duration(so.duration).call(xxe);var p=h.selectAll("."+so.cn.nodeLabel).data(ZI);p.enter().append("text").classed(so.cn.nodeLabel,!0).style("cursor","default"),p.attr("data-notex",1).text(function(d){return d.node.label}).each(function(d){var g=r3.select(this);Pwt.font(g,d.textFont),yG.convertToTspans(g,e)}).style("text-shadow",yG.makeTextShadow(e._fullLayout.paper_bgcolor)).attr("text-anchor",function(d){return d.horizontal&&d.left?"end":"start"}).attr("transform",function(d){var g=r3.select(this),m=yG.lineCount(g),y=d.textFont.size*((m-1)*zwt-Rwt),_=d.nodeLineWidth/2+Fwt,S=((d.horizontal?d.visibleHeight:d.visibleWidth)-y)/2;d.horizontal&&(d.left?_=-_:_+=d.visibleWidth);var M=d.horizontal?"":"scale(-1,1)"+Iwt(90);return gG(d.horizontal?_:S,d.horizontal?S:_)+M}),p.transition().ease(so.ease).duration(so.duration)},Gf=Ra.exports,wG=bt.exports,KI=wG.numberFormat,Zwt=Xwt,n3=Rs,Kwt=Oa.exports,g1=dxe.cn,UM=wG._;function Sxe(e){return e!==""}function i3(e,t){return e.filter(function(r){return r.key===t.traceId})}function Mxe(e,t){Gf.select(e).select("path").style("fill-opacity",t),Gf.select(e).select("rect").style("fill-opacity",t)}function kxe(e){Gf.select(e).select("text.name").style("fill","black")}function Exe(e){return function(t){return e.node.sourceLinks.indexOf(t.link)!==-1||e.node.targetLinks.indexOf(t.link)!==-1}}function Cxe(e){return function(t){return t.node.sourceLinks.indexOf(e.link)!==-1||t.node.targetLinks.indexOf(e.link)!==-1}}function Lxe(e,t,r){t&&r&&i3(r,t).selectAll("."+g1.sankeyLink).filter(Exe(t)).call(Pxe.bind(0,t,r,!1))}function TG(e,t,r){t&&r&&i3(r,t).selectAll("."+g1.sankeyLink).filter(Exe(t)).call(Ixe.bind(0,t,r,!1))}function Pxe(e,t,r,a){var n=a.datum().link.label;a.style("fill-opacity",function(o){if(!o.link.concentrationscale)return .4}),n&&i3(t,e).selectAll("."+g1.sankeyLink).filter(function(o){return o.link.label===n}).style("fill-opacity",function(o){if(!o.link.concentrationscale)return .4}),r&&i3(t,e).selectAll("."+g1.sankeyNode).filter(Cxe(e)).call(Lxe)}function Ixe(e,t,r,a){var n=a.datum().link.label;a.style("fill-opacity",function(o){return o.tinyColorAlpha}),n&&i3(t,e).selectAll("."+g1.sankeyLink).filter(function(o){return o.link.label===n}).style("fill-opacity",function(o){return o.tinyColorAlpha}),r&&i3(t,e).selectAll(g1.sankeyNode).filter(Cxe(e)).call(TG)}function wh(e,t){var r=e.hoverlabel||{},a=wG.nestedProperty(r,t).get();return Array.isArray(a)?!1:a}var Dxe=function(t,r){for(var a=t._fullLayout,n=a._paper,o=a._size,i=0;i<t._fullData.length;i++)if(!!t._fullData[i].visible&&t._fullData[i].type===g1.sankey&&!t._fullData[i]._viewInitial){var s=t._fullData[i].node;t._fullData[i]._viewInitial={node:{groups:s.groups.slice(),x:s.x.slice(),y:s.y.slice()}}}var l=function(M,w){var A=w.link;A.originalEvent=Gf.event,t._hoverdata=[A],n3.click(t,{target:!0})},u=function(M,w,A){t._fullLayout.hovermode!==!1&&(Gf.select(M).call(Pxe.bind(0,w,A,!0)),w.link.trace.link.hoverinfo!=="skip"&&(w.link.fullData=w.link.trace,t.emit("plotly_hover",{event:Gf.event,points:[w.link]})))},f=UM(t,"source:")+" ",c=UM(t,"target:")+" ",h=UM(t,"concentration:")+" ",v=UM(t,"incoming flow count:")+" ",p=UM(t,"outgoing flow count:")+" ",d=function(M,w){if(t._fullLayout.hovermode===!1)return;var A=w.link.trace.link;if(A.hoverinfo==="none"||A.hoverinfo==="skip")return;var k=[];function T(D){var O,$;D.circular?(O=(D.circularPathData.leftInnerExtent+D.circularPathData.rightInnerExtent)/2,$=D.circularPathData.verticalFullExtent):(O=(D.source.x1+D.target.x0)/2,$=(D.y0+D.y1)/2);var Y=[O,$];return D.trace.orientation==="v"&&Y.reverse(),Y[0]+=w.parent.translateX,Y[1]+=w.parent.translateY,Y}for(var L=0,C=0;C<w.flow.links.length;C++){var I=w.flow.links[C];if(!(t._fullLayout.hovermode==="closest"&&w.link.pointNumber!==I.pointNumber)){w.link.pointNumber===I.pointNumber&&(L=C),I.fullData=I.trace,A=w.link.trace.link;var R=T(I),B={valueLabel:KI(w.valueFormat)(I.value)+w.valueSuffix};k.push({x:R[0],y:R[1],name:B.valueLabel,text:[I.label||"",f+I.source.label,c+I.target.label,I.concentrationscale?h+KI("%0.2f")(I.flow.labelConcentration):""].filter(Sxe).join("<br>"),color:wh(A,"bgcolor")||Kwt.addOpacity(I.color,1),borderColor:wh(A,"bordercolor"),fontFamily:wh(A,"font.family"),fontSize:wh(A,"font.size"),fontColor:wh(A,"font.color"),nameLength:wh(A,"namelength"),textAlign:wh(A,"align"),idealAlign:Gf.event.x<R[0]?"right":"left",hovertemplate:A.hovertemplate,hovertemplateLabels:B,eventData:[I]})}}var N=n3.loneHover(k,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:t,anchorIndex:L});N.each(function(){var D=this;w.link.concentrationscale||Mxe(D,.65),kxe(D)})},g=function(M,w,A){t._fullLayout.hovermode!==!1&&(Gf.select(M).call(Ixe.bind(0,w,A,!0)),w.link.trace.link.hoverinfo!=="skip"&&(w.link.fullData=w.link.trace,t.emit("plotly_unhover",{event:Gf.event,points:[w.link]})),n3.loneUnhover(a._hoverlayer.node()))},m=function(M,w,A){var k=w.node;k.originalEvent=Gf.event,t._hoverdata=[k],Gf.select(M).call(TG,w,A),n3.click(t,{target:!0})},y=function(M,w,A){t._fullLayout.hovermode!==!1&&(Gf.select(M).call(Lxe,w,A),w.node.trace.node.hoverinfo!=="skip"&&(w.node.fullData=w.node.trace,t.emit("plotly_hover",{event:Gf.event,points:[w.node]})))},_=function(M,w){if(t._fullLayout.hovermode!==!1){var A=w.node.trace.node;if(!(A.hoverinfo==="none"||A.hoverinfo==="skip")){var k=Gf.select(M).select("."+g1.nodeRect),T=t._fullLayout._paperdiv.node().getBoundingClientRect(),L=k.node().getBoundingClientRect(),C=L.left-2-T.left,I=L.right+2-T.left,R=L.top+L.height/4-T.top,B={valueLabel:KI(w.valueFormat)(w.node.value)+w.valueSuffix};w.node.fullData=w.node.trace,t._fullLayout._calcInverseTransform(t);var N=t._fullLayout._invScaleX,D=t._fullLayout._invScaleY,O=n3.loneHover({x0:N*C,x1:N*I,y:D*R,name:KI(w.valueFormat)(w.node.value)+w.valueSuffix,text:[w.node.label,v+w.node.targetLinks.length,p+w.node.sourceLinks.length].filter(Sxe).join("<br>"),color:wh(A,"bgcolor")||w.tinyColorHue,borderColor:wh(A,"bordercolor"),fontFamily:wh(A,"font.family"),fontSize:wh(A,"font.size"),fontColor:wh(A,"font.color"),nameLength:wh(A,"namelength"),textAlign:wh(A,"align"),idealAlign:"left",hovertemplate:A.hovertemplate,hovertemplateLabels:B,eventData:[w.node]},{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:t});Mxe(O,.85),kxe(O)}}},S=function(M,w,A){t._fullLayout.hovermode!==!1&&(Gf.select(M).call(TG,w,A),w.node.trace.node.hoverinfo!=="skip"&&(w.node.fullData=w.node.trace,t.emit("plotly_unhover",{event:Gf.event,points:[w.node]})),n3.loneUnhover(a._hoverlayer.node()))};Zwt(t,n,r,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},{linkEvents:{hover:u,follow:d,unhover:g,select:l},nodeEvents:{hover:y,follow:_,unhover:S,select:m}})},Rxe={};(function(e){var t=Jo.overrideAll,r=Ml.getModuleCalcData,a=Dxe,n=ay,o=Zp,i=kf.exports,s=lu.prepSelect,l=bt.exports,u=Pa,f="sankey";e.name=f,e.baseLayoutAttrOverrides=t({hoverlabel:n.hoverlabel},"plot","nested"),e.plot=function(h){var v=r(h.calcdata,f)[0];a(h,v),e.updateFx(h)},e.clean=function(h,v,p,d){var g=d._has&&d._has(f),m=v._has&&v._has(f);g&&!m&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},e.updateFx=function(h){for(var v=0;v<h._fullData.length;v++)c(h,v)};function c(h,v){var p=h._fullData[v],d=h._fullLayout,g=d.dragmode,m=d.dragmode==="pan"?"move":"crosshair",y=p._bgRect;if(!(g==="pan"||g==="zoom")){o(y,m);var _={_id:"x",c2p:l.identity,_offset:p._sankey.translateX,_length:p._sankey.width},S={_id:"y",c2p:l.identity,_offset:p._sankey.translateY,_length:p._sankey.height},M={gd:h,element:y.node(),plotinfo:{id:v,xaxis:_,yaxis:S,fillRangeItems:l.noop},subplot:v,xaxes:[_],yaxes:[S],doneFnCompleted:function(w){var A=h._fullData[v],k,T=A.node.groups.slice(),L=[];function C(N){for(var D=A._sankey.graph.nodes,O=0;O<D.length;O++)if(D[O].pointNumber===N)return D[O]}for(var I=0;I<w.length;I++){var R=C(w[I].pointNumber);if(!!R)if(R.group){for(var B=0;B<R.childrenNodes.length;B++)L.push(R.childrenNodes[B].pointNumber);T[R.pointNumber-A.node._count]=!1}else L.push(R.pointNumber)}k=T.filter(Boolean).concat([L]),u.call("_guiRestyle",h,{"node.groups":[k]},v)}};M.prepFn=function(w,A,k){s(w,A,k,M,g)},i.init(M)}}})(Rxe);var Jwt=function(t,r){for(var a=t.cd,n=[],o=a[0].trace,i=o._sankey.graph.nodes,s=0;s<i.length;s++){var l=i[s];if(!l.partOfGroup){var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];o.orientation==="v"&&u.reverse(),r&&r.contains(u,!1,s,t)&&n.push({pointNumber:l.pointNumber})}}return n},Qwt={attributes:tG.exports,supplyDefaults:z_t,calc:H_t,plot:Dxe,moduleType:"trace",name:"sankey",basePlotModule:Rxe,selectPoints:Jwt,categories:["noOpacity"],meta:{description:["Sankey plots for network flow data analysis.","The nodes are specified in `nodes` and the links between sources and targets in `links`.","The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used."].join(" ")}},e3t=Qwt,zxe={};(function(e){var t=Eo.exports;e.name="indicator",e.plot=function(r,a,n,o){t.plotBasePlot(e.name,r,a,n,o)},e.clean=function(r,a,n,o){t.cleanBasePlot(e.name,r,a,n,o)}})(zxe);var m1=cn.extendFlat,Fxe=cn.extendDeep,t3t=Jo.overrideAll,Oxe=Ts,Nxe=us,r3t=Fo.attributes,rl=Zu,a3t=si.templatedArray,JI=RA,Bxe=Ss.descriptionOnlyNumbers,AG=Oxe({editType:"plot",colorEditType:"plot"}),HM={color:{valType:"color",editType:"plot",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",dflt:Nxe.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},$xe={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},n3t=a3t("step",Fxe({},HM,{range:$xe})),Uxe={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:r3t({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:m1({},AG,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:Bxe("value")},font:m1({},AG,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",editType:"plot",description:Bxe("value")},increasing:{symbol:{valType:"string",dflt:JI.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:JI.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:JI.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:JI.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:m1({},AG,{description:["Set the font used to display the delta"].join(" ")}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:Fxe({},HM,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:Nxe.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:t3t({range:$xe,visible:m1({},rl.visible,{dflt:!0}),tickmode:rl.tickmode,nticks:rl.nticks,tick0:rl.tick0,dtick:rl.dtick,tickvals:rl.tickvals,ticktext:rl.ticktext,ticks:m1({},rl.ticks,{dflt:"outside"}),ticklen:rl.ticklen,tickwidth:rl.tickwidth,tickcolor:rl.tickcolor,showticklabels:rl.showticklabels,tickfont:Oxe({description:"Sets the color bar's tick label font"}),tickangle:rl.tickangle,tickformat:rl.tickformat,tickformatstops:rl.tickformatstops,tickprefix:rl.tickprefix,showtickprefix:rl.showtickprefix,ticksuffix:rl.ticksuffix,showticksuffix:rl.showticksuffix,separatethousands:rl.separatethousands,exponentformat:rl.exponentformat,minexponent:rl.minexponent,showexponent:rl.showexponent,editType:"plot"},"plot"),steps:n3t,threshold:{line:{color:m1({},HM.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:m1({},HM.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:m1({},HM.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}},Hxe={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10},QI=bt.exports,eD=Uxe,i3t=Fo.defaults,Gxe=si,o3t=nc,tD=Hxe,s3t=N_,l3t=dT,u3t=hx,f3t=vx;function c3t(e,t,r,a){function n(_,S){return QI.coerce(e,t,eD,_,S)}i3t(t,a,n),n("mode"),t._hasNumber=t.mode.indexOf("number")!==-1,t._hasDelta=t.mode.indexOf("delta")!==-1,t._hasGauge=t.mode.indexOf("gauge")!==-1;var o=n("value");t._range=[0,typeof o=="number"?1.5*o:1];var i=new Array(2),s;t._hasNumber&&(n("number.valueformat"),n("number.font.color",a.font.color),n("number.font.family",a.font.family),n("number.font.size"),t.number.font.size===void 0&&(t.number.font.size=tD.defaultNumberFontSize,i[0]=!0),n("number.prefix"),n("number.suffix"),s=t.number.font.size);var l;t._hasDelta&&(n("delta.font.color",a.font.color),n("delta.font.family",a.font.family),n("delta.font.size"),t.delta.font.size===void 0&&(t.delta.font.size=(t._hasNumber?.5:1)*(s||tD.defaultNumberFontSize),i[1]=!0),n("delta.reference",t.value),n("delta.relative"),n("delta.valueformat",t.delta.relative?"2%":""),n("delta.increasing.symbol"),n("delta.increasing.color"),n("delta.decreasing.symbol"),n("delta.decreasing.color"),n("delta.position"),l=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||i[0])&&(!t._hasDelta||i[1])||!1,n("title.font.color",a.font.color),n("title.font.family",a.font.family),n("title.font.size",.25*(s||l||tD.defaultNumberFontSize)),n("title.text");var u,f,c,h;function v(_,S){return QI.coerce(u,f,eD.gauge,_,S)}function p(_,S){return QI.coerce(c,h,eD.gauge.axis,_,S)}if(t._hasGauge){u=e.gauge,u||(u={}),f=Gxe.newContainer(t,"gauge"),v("shape");var d=t._isBullet=t.gauge.shape==="bullet";d||n("title.align","center");var g=t._isAngular=t.gauge.shape==="angular";g||n("align","center"),v("bgcolor",a.paper_bgcolor),v("borderwidth"),v("bordercolor"),v("bar.color"),v("bar.line.color"),v("bar.line.width");var m=tD.valueThickness*(t.gauge.shape==="bullet"?.5:1);v("bar.thickness",m),o3t(u,f,{name:"steps",handleItemDefaults:h3t}),v("threshold.value"),v("threshold.thickness"),v("threshold.line.width"),v("threshold.line.color"),c={},u&&(c=u.axis||{}),h=Gxe.newContainer(f,"axis"),p("visible"),t._range=p("range",t._range);var y={outerTicks:!0};s3t(c,h,p,"linear"),f3t(c,h,p,"linear",y),u3t(c,h,p,"linear",y),l3t(c,h,p,y)}else n("title.align","center"),n("align","center"),t._isAngular=t._isBullet=!1;t._length=null}function h3t(e,t){function r(a,n){return QI.coerce(e,t,eD.gauge.steps,a,n)}r("color"),r("line.color"),r("line.width"),r("range"),r("thickness")}var v3t={supplyDefaults:c3t};function d3t(e,t){var r=[],a=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var n=t._lastValue,o=n;return t._hasDelta&&typeof t.delta.reference=="number"&&(o=t.delta.reference),r[0]={y:a,lastY:n,delta:a-o,relativeDelta:(a-o)/o},r}var p3t={calc:d3t},bb=Ra.exports,g3t=J2.interpolate,Vxe=J2.interpolateNumber,y1=bt.exports,m3t=y1.strScale,GM=y1.strTranslate,y3t=y1.rad2deg,x3t=ou.MID_SHIFT,_b=xn.exports,wb=Hxe,rD=xo,Bu=rn.exports,b3t=WE,_3t=m8,w3t=Zu,o3=Oa.exports,SG={left:"start",center:"middle",right:"end"},Tb={left:0,center:.5,right:1},jxe=/[yzafpnmkMGTPEZY]/;function VM(e){return e&&e.duration>0}var T3t=function(t,r,a,n){var o=t._fullLayout,i;VM(a)&&n&&(i=n()),y1.makeTraceGroups(o._indicatorlayer,r,"trace").each(function(s){var l=s[0],u=l.trace,f=bb.select(this),c=u._hasGauge,h=u._isAngular,v=u._isBullet,p=u.domain,d={w:o._size.w*(p.x[1]-p.x[0]),h:o._size.h*(p.y[1]-p.y[0]),l:o._size.l+o._size.w*p.x[0],r:o._size.r+o._size.w*(1-p.x[1]),t:o._size.t+o._size.h*(1-p.y[1]),b:o._size.b+o._size.h*p.y[0]},g=d.l+d.w/2,m=d.t+d.h/2,y=Math.min(d.w/2,d.h),_=wb.innerRadius*y,S,M,w,A=u.align||"center";if(M=m,!c)S=d.l+Tb[A]*d.w,w=function(O){return qxe(O,d.w,d.h)};else if(h&&(S=g,M=m+y/2,w=function(O){return E3t(O,.9*_)}),v){var k=wb.bulletPadding,T=1-wb.bulletNumberDomainSize+k;S=d.l+(T+(1-T)*Tb[A])*d.w,w=function(O){return qxe(O,(wb.bulletNumberDomainSize-k)*d.w,d.h)}}M3t(t,f,s,{numbersX:S,numbersY:M,numbersScaler:w,transitionOpts:a,onComplete:i});var L,C;c&&(L={range:u.gauge.axis.range,color:u.gauge.bgcolor,line:{color:u.gauge.bordercolor,width:0},thickness:1},C={range:u.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:u.gauge.bordercolor,width:u.gauge.borderwidth},thickness:1});var I=f.selectAll("g.angular").data(h?s:[]);I.exit().remove();var R=f.selectAll("g.angularaxis").data(h?s:[]);R.exit().remove(),h&&S3t(t,f,s,{radius:y,innerRadius:_,gauge:I,layer:R,size:d,gaugeBg:L,gaugeOutline:C,transitionOpts:a,onComplete:i});var B=f.selectAll("g.bullet").data(v?s:[]);B.exit().remove();var N=f.selectAll("g.bulletaxis").data(v?s:[]);N.exit().remove(),v&&A3t(t,f,s,{gauge:B,layer:N,size:d,gaugeBg:L,gaugeOutline:C,transitionOpts:a,onComplete:i});var D=f.selectAll("text.title").data(s);D.exit().remove(),D.enter().append("text").classed("title",!0),D.attr("text-anchor",function(){return v?SG.right:SG[u.title.align]}).text(u.title.text).call(_b.font,u.title.font).call(rD.convertToTspans,t),D.attr("transform",function(){var O=d.l+d.w*Tb[u.title.align],$,Y=wb.titlePadding,X=_b.bBox(D.node());if(c){if(h)if(u.gauge.axis.visible){var ee=_b.bBox(R.node());$=ee.top-Y-X.bottom}else $=d.t+d.h/2-y/2-X.bottom-Y;v&&($=M-(X.top+X.bottom)/2,O=d.l-wb.bulletPadding*d.w)}else $=u._numbersTop-Y-X.bottom;return GM(O,$)})})};function A3t(e,t,r,a){var n=r[0].trace,o=a.gauge,i=a.layer,s=a.gaugeBg,l=a.gaugeOutline,u=a.size,f=n.domain,c=a.transitionOpts,h=a.onComplete,v,p,d,g,m;o.enter().append("g").classed("bullet",!0),o.attr("transform",GM(u.l,u.t)),i.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),i.selectAll("g.xbulletaxistick,path,text").remove();var y=u.h,_=n.gauge.bar.thickness*y,S=f.x[0],M=f.x[0]+(f.x[1]-f.x[0])*(n._hasNumber||n._hasDelta?1-wb.bulletNumberDomainSize:1);v=jM(e,n.gauge.axis),v._id="xbulletaxis",v.domain=[S,M],v.setScale(),p=Bu.calcTicks(v),d=Bu.makeTransTickFn(v),g=Bu.getTickSigns(v)[2],m=u.t+u.h,v.visible&&(Bu.drawTicks(e,v,{vals:v.ticks==="inside"?Bu.clipEnds(v,p):p,layer:i,path:Bu.makeTickPath(v,m,g),transFn:d}),Bu.drawLabels(e,v,{vals:p,layer:i,transFn:d,labelFns:Bu.makeLabelFns(v,m)}));function w(R){R.attr("width",function(B){return Math.max(0,v.c2p(B.range[1])-v.c2p(B.range[0]))}).attr("x",function(B){return v.c2p(B.range[0])}).attr("y",function(B){return .5*(1-B.thickness)*y}).attr("height",function(B){return B.thickness*y})}var A=[s].concat(n.gauge.steps),k=o.selectAll("g.bg-bullet").data(A);k.enter().append("g").classed("bg-bullet",!0).append("rect"),k.select("rect").call(w).call(Ab),k.exit().remove();var T=o.selectAll("g.value-bullet").data([n.gauge.bar]);T.enter().append("g").classed("value-bullet",!0).append("rect"),T.select("rect").attr("height",_).attr("y",(y-_)/2).call(Ab),VM(c)?T.select("rect").transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).attr("width",Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y)))):T.select("rect").attr("width",typeof r[0].y=="number"?Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y))):0),T.exit().remove();var L=r.filter(function(){return n.gauge.threshold.value||n.gauge.threshold.value===0}),C=o.selectAll("g.threshold-bullet").data(L);C.enter().append("g").classed("threshold-bullet",!0).append("line"),C.select("line").attr("x1",v.c2p(n.gauge.threshold.value)).attr("x2",v.c2p(n.gauge.threshold.value)).attr("y1",(1-n.gauge.threshold.thickness)/2*y).attr("y2",(1-(1-n.gauge.threshold.thickness)/2)*y).call(o3.stroke,n.gauge.threshold.line.color).style("stroke-width",n.gauge.threshold.line.width),C.exit().remove();var I=o.selectAll("g.gauge-outline").data([l]);I.enter().append("g").classed("gauge-outline",!0).append("rect"),I.select("rect").call(w).call(Ab),I.exit().remove()}function S3t(e,t,r,a){var n=r[0].trace,o=a.size,i=a.radius,s=a.innerRadius,l=a.gaugeBg,u=a.gaugeOutline,f=[o.l+o.w/2,o.t+o.h/2+i/2],c=a.gauge,h=a.layer,v=a.transitionOpts,p=a.onComplete,d=Math.PI/2;function g(Q){var Z=n.gauge.axis.range[0],q=n.gauge.axis.range[1],ae=(Q-Z)/(q-Z)*Math.PI-d;return ae<-d?-d:ae>d?d:ae}function m(Q){return bb.svg.arc().innerRadius((s+i)/2-Q/2*(i-s)).outerRadius((s+i)/2+Q/2*(i-s)).startAngle(-d)}function y(Q){Q.attr("d",function(Z){return m(Z.thickness).startAngle(g(Z.range[0])).endAngle(g(Z.range[1]))()})}var _,S,M,w;c.enter().append("g").classed("angular",!0),c.attr("transform",GM(f[0],f[1])),h.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),h.selectAll("g.xangularaxistick,path,text").remove(),_=jM(e,n.gauge.axis),_.type="linear",_.range=n.gauge.axis.range,_._id="xangularaxis",_.ticklabeloverflow="allow",_.setScale();var A=function(Q){return(_.range[0]-Q.x)/(_.range[1]-_.range[0])*Math.PI+Math.PI},k={},T=Bu.makeLabelFns(_,0),L=T.labelStandoff;k.xFn=function(Q){var Z=A(Q);return Math.cos(Z)*L},k.yFn=function(Q){var Z=A(Q),q=Math.sin(Z)>0?.2:1;return-Math.sin(Z)*(L+Q.fontSize*q)+Math.abs(Math.cos(Z))*(Q.fontSize*x3t)},k.anchorFn=function(Q){var Z=A(Q),q=Math.cos(Z);return Math.abs(q)<.1?"middle":q>0?"start":"end"},k.heightFn=function(Q,Z,q){var ae=A(Q);return-.5*(1+Math.sin(ae))*q};var C=function(Q){return GM(f[0]+i*Math.cos(Q),f[1]-i*Math.sin(Q))};M=function(Q){return C(A(Q))};var I=function(Q){var Z=A(Q);return C(Z)+"rotate("+-y3t(Z)+")"};if(S=Bu.calcTicks(_),w=Bu.getTickSigns(_)[2],_.visible){w=_.ticks==="inside"?-1:1;var R=(_.linewidth||1)/2;Bu.drawTicks(e,_,{vals:S,layer:h,path:"M"+w*R+",0h"+w*_.ticklen,transFn:I}),Bu.drawLabels(e,_,{vals:S,layer:h,transFn:M,labelFns:k})}var B=[l].concat(n.gauge.steps),N=c.selectAll("g.bg-arc").data(B);N.enter().append("g").classed("bg-arc",!0).append("path"),N.select("path").call(y).call(Ab),N.exit().remove();var D=m(n.gauge.bar.thickness),O=c.selectAll("g.value-arc").data([n.gauge.bar]);O.enter().append("g").classed("value-arc",!0).append("path");var $=O.select("path");VM(v)?($.transition().duration(v.duration).ease(v.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).attrTween("d",k3t(D,g(r[0].lastY),g(r[0].y))),n._lastValue=r[0].y):$.attr("d",typeof r[0].y=="number"?D.endAngle(g(r[0].y)):"M0,0Z"),$.call(Ab),O.exit().remove(),B=[];var Y=n.gauge.threshold.value;(Y||Y===0)&&B.push({range:[Y,Y],color:n.gauge.threshold.color,line:{color:n.gauge.threshold.line.color,width:n.gauge.threshold.line.width},thickness:n.gauge.threshold.thickness});var X=c.selectAll("g.threshold-arc").data(B);X.enter().append("g").classed("threshold-arc",!0).append("path"),X.select("path").call(y).call(Ab),X.exit().remove();var ee=c.selectAll("g.gauge-outline").data([u]);ee.enter().append("g").classed("gauge-outline",!0).append("path"),ee.select("path").call(y).call(Ab),ee.exit().remove()}function M3t(e,t,r,a){var n=r[0].trace,o=a.numbersX,i=a.numbersY,s=n.align||"center",l=SG[s],u=a.transitionOpts,f=a.onComplete,c=y1.ensureSingle(t,"g","numbers"),h,v,p,d=[];n._hasNumber&&d.push("number"),n._hasDelta&&(d.push("delta"),n.delta.position==="left"&&d.reverse());var g=c.selectAll("text").data(d);g.enter().append("text"),g.attr("text-anchor",function(){return l}).attr("class",function(C){return C}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),g.exit().remove();function m(C,I,R,B){if(C.match("s")&&R>=0!=B>=0&&!I(R).slice(-1).match(jxe)&&!I(B).slice(-1).match(jxe)){var N=C.slice().replace("s","f").replace(/\d+/,function(O){return parseInt(O)-1}),D=jM(e,{tickformat:N});return function(O){return Math.abs(O)<1?Bu.tickText(D,O).text:I(O)}}else return I}function y(){var C=jM(e,{tickformat:n.number.valueformat},n._range);C.setScale(),Bu.prepTicks(C);var I=function(O){return Bu.tickText(C,O).text},R=n.number.suffix,B=n.number.prefix,N=c.select("text.number");function D(){var O=typeof r[0].y=="number"?B+I(r[0].y)+R:"-";N.text(O).call(_b.font,n.number.font).call(rD.convertToTspans,e)}return VM(u)?N.transition().duration(u.duration).ease(u.easing).each("end",function(){D(),f&&f()}).each("interrupt",function(){D(),f&&f()}).attrTween("text",function(){var O=bb.select(this),$=Vxe(r[0].lastY,r[0].y);n._lastValue=r[0].y;var Y=m(n.number.valueformat,I,r[0].lastY,r[0].y);return function(X){O.text(B+Y($(X))+R)}}):D(),h=Yxe(B+I(r[0].y)+R,n.number.font,l,e),N}function _(){var C=jM(e,{tickformat:n.delta.valueformat},n._range);C.setScale(),Bu.prepTicks(C);var I=function($){return Bu.tickText(C,$).text},R=function($){var Y=n.delta.relative?$.relativeDelta:$.delta;return Y},B=function($,Y){return $===0||typeof $!="number"||isNaN($)?"-":($>0?n.delta.increasing.symbol:n.delta.decreasing.symbol)+Y($)},N=function($){return $.delta>=0?n.delta.increasing.color:n.delta.decreasing.color};n._deltaLastValue===void 0&&(n._deltaLastValue=R(r[0]));var D=c.select("text.delta");D.call(_b.font,n.delta.font).call(o3.fill,N({delta:n._deltaLastValue}));function O(){D.text(B(R(r[0]),I)).call(o3.fill,N(r[0])).call(rD.convertToTspans,e)}return VM(u)?D.transition().duration(u.duration).ease(u.easing).tween("text",function(){var $=bb.select(this),Y=R(r[0]),X=n._deltaLastValue,ee=m(n.delta.valueformat,I,X,Y),Q=Vxe(X,Y);return n._deltaLastValue=Y,function(Z){$.text(B(Q(Z),ee)),$.call(o3.fill,N({delta:Q(Z)}))}}).each("end",function(){O(),f&&f()}).each("interrupt",function(){O(),f&&f()}):O(),v=Yxe(B(R(r[0]),I),n.delta.font,l,e),D}var S=n.mode+n.align,M;if(n._hasDelta&&(M=_(),S+=n.delta.position+n.delta.font.size+n.delta.font.family+n.delta.valueformat,S+=n.delta.increasing.symbol+n.delta.decreasing.symbol,p=v),n._hasNumber&&(y(),S+=n.number.font.size+n.number.font.family+n.number.valueformat+n.number.suffix+n.number.prefix,p=h),n._hasDelta&&n._hasNumber){var w=[(h.left+h.right)/2,(h.top+h.bottom)/2],A=[(v.left+v.right)/2,(v.top+v.bottom)/2],k,T,L=.75*n.delta.font.size;n.delta.position==="left"&&(k=aD(n,"deltaPos",0,-1*(h.width*Tb[n.align]+v.width*(1-Tb[n.align])+L),S,Math.min),T=w[1]-A[1],p={width:h.width+v.width+L,height:Math.max(h.height,v.height),left:v.left+k,right:h.right,top:Math.min(h.top,v.top+T),bottom:Math.max(h.bottom,v.bottom+T)}),n.delta.position==="right"&&(k=aD(n,"deltaPos",0,h.width*(1-Tb[n.align])+v.width*Tb[n.align]+L,S,Math.max),T=w[1]-A[1],p={width:h.width+v.width+L,height:Math.max(h.height,v.height),left:h.left,right:v.right+k,top:Math.min(h.top,v.top+T),bottom:Math.max(h.bottom,v.bottom+T)}),n.delta.position==="bottom"&&(k=null,T=v.height,p={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height,bottom:h.bottom+v.height}),n.delta.position==="top"&&(k=null,T=h.top,p={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height-v.height,bottom:h.bottom}),M.attr({dx:k,dy:T})}(n._hasNumber||n._hasDelta)&&c.attr("transform",function(){var C=a.numbersScaler(p);S+=C[2];var I=aD(n,"numbersScale",1,C[0],S,Math.min),R;n._scaleNumbers||(I=1),n._isAngular?R=i-I*p.bottom:R=i-I*(p.top+p.bottom)/2,n._numbersTop=I*p.top+R;var B=p[s];s==="center"&&(B=(p.left+p.right)/2);var N=o-I*B;return N=aD(n,"numbersTranslate",0,N,S,Math.max),GM(N,R)+m3t(I)})}function Ab(e){e.each(function(t){o3.stroke(bb.select(this),t.line.color)}).each(function(t){o3.fill(bb.select(this),t.color)}).style("stroke-width",function(t){return t.line.width})}function k3t(e,t,r){return function(){var a=g3t(t,r);return function(n){return e.endAngle(a(n))()}}}function jM(e,t,r){var a=e._fullLayout,n=y1.extendFlat({type:"linear",ticks:"outside",range:r,showline:!0},t),o={type:"linear",_id:"x"+t._id},i={letter:"x",font:a.font,noHover:!0,noTickson:!0};function s(l,u){return y1.coerce(n,o,w3t,l,u)}return b3t(n,o,s,i,a),_3t(n,o,s,i),o}function qxe(e,t,r){var a=Math.min(t/e.width,r/e.height);return[a,e,t+"x"+r]}function E3t(e,t){var r=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),a=t/r;return[a,e,t]}function Yxe(e,t,r,a){var n=document.createElementNS("http://www.w3.org/2000/svg","text"),o=bb.select(n);return o.text(e).attr("x",0).attr("y",0).attr("text-anchor",r).attr("data-unformatted",e).call(rD.convertToTspans,a).call(_b.font,t),_b.bBox(o.node())}function aD(e,t,r,a,n,o){var i="_cache"+t;e[i]&&e[i].key===n||(e[i]={key:n,value:r});var s=y1.aggNums(o,null,[e[i].value,a],2);return e[i].value=s,s}var C3t={moduleType:"trace",name:"indicator",basePlotModule:zxe,categories:["svg","noOpacity","noHover"],animatable:!0,attributes:Uxe,supplyDefaults:v3t.supplyDefaults,calc:p3t.calc,plot:T3t,meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}},L3t=C3t,MG={exports:{}},Wxe=sA,nD=cn.extendFlat,P3t=Jo.overrideAll,Xxe=Ts,I3t=Fo.attributes,Zxe=Ss.descriptionOnlyNumbers,D3t=MG.exports=P3t({domain:I3t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null,description:["The width of columns expressed as a ratio. Columns fill the available width","in proportion of their specified column widths."].join(" ")},columnorder:{valType:"data_array",description:["Specifies the rendered order of the data columns; for example, a value `2` at position `0`","means that column index `0` in the data will be rendered as the","third column, as columns have an index base of zero."].join(" ")},header:{values:{valType:"data_array",dflt:[],description:["Header cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:Zxe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:28,description:"The height of cells."},align:nD({},Wxe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color"," or an array of colors or a 2D array of colors."].join("")}},font:nD({},Xxe({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[],description:["Cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:Zxe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:20,description:"The height of cells."},align:nD({},Wxe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color"," or an array of colors or a 2D array of colors."].join("")}},font:nD({},Xxe({arrayOk:!0}))}},"calc","from-root");D3t.transforms=void 0;var qM=bt.exports,R3t=MG.exports,z3t=Fo.defaults;function F3t(e,t){for(var r=e.columnorder||[],a=e.header.values.length,n=r.slice(0,a),o=n.slice().sort(function(l,u){return l-u}),i=n.map(function(l){return o.indexOf(l)}),s=i.length;s<a;s++)i.push(s);t("columnorder",i)}var O3t=function(t,r,a,n){function o(i,s){return qM.coerce(t,r,R3t,i,s)}z3t(r,n,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),qM.coerceFont(o,"header.font",qM.extendFlat({},n.font)),F3t(r,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),qM.coerceFont(o,"cells.font",qM.extendFlat({},n.font)),r._length=null},N3t=ym.wrap,B3t=function(){return N3t({})},Kxe={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}},Jxe=Kxe,kG=cn.extendFlat,$3t=gn,U3t=function(t,r){var a=CG(r.cells.values),n=function(T){return T.slice(r.header.values.length,T.length)},o=CG(r.header.values);o.length&&!o[0].length&&(o[0]=[""],o=CG(o));var i=o.concat(n(a).map(function(){return ebe((o[0]||[""]).length)})),s=r.domain,l=Math.floor(t._fullLayout._size.w*(s.x[1]-s.x[0])),u=Math.floor(t._fullLayout._size.h*(s.y[1]-s.y[0])),f=r.header.values.length?i[0].map(function(){return r.header.height}):[Jxe.emptyHeaderHeight],c=a.length?a[0].map(function(){return r.cells.height}):[],h=f.reduce(Qxe,0),v=u-h,p=v+Jxe.uplift,d=abe(c,p),g=abe(f,h),m=rbe(g,[]),y=rbe(d,m),_={},S=r._fullInput.columnorder.concat(n(a.map(function(T,L){return L}))),M=i.map(function(T,L){var C=Array.isArray(r.columnwidth)?r.columnwidth[Math.min(L,r.columnwidth.length-1)]:r.columnwidth;return $3t(C)?Number(C):1}),w=M.reduce(Qxe,0);M=M.map(function(T){return T/w*l});var A=Math.max(EG(r.header.line.width),EG(r.cells.line.width)),k={key:r.uid+t._context.staticPlot,translateX:s.x[0]*t._fullLayout._size.w,translateY:t._fullLayout._size.h*(1-s.y[1]),size:t._fullLayout._size,width:l,maxLineWidth:A,height:u,columnOrder:S,groupHeight:u,rowBlocks:y,headerRowBlocks:m,scrollY:0,cells:kG({},r.cells,{values:a}),headerCells:kG({},r.header,{values:i}),gdColumns:i.map(function(T){return T[0]}),gdColumnsOriginalOrder:i.map(function(T){return T[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:i.map(function(T,L){var C=_[T];_[T]=(C||0)+1;var I=T+"__"+_[T];return{key:I,label:T,specIndex:L,xIndex:S[L],xScale:tbe,x:void 0,calcdata:void 0,columnWidth:M[L]}})};return k.columns.forEach(function(T){T.calcdata=k,T.x=tbe(T)}),k};function EG(e){if(Array.isArray(e)){for(var t=0,r=0;r<e.length;r++)t=Math.max(t,EG(e[r]));return t}return e}function Qxe(e,t){return e+t}function CG(e){var t=e.slice(),r=1/0,a=0,n;for(n=0;n<t.length;n++)Array.isArray(t[n])||(t[n]=[t[n]]),r=Math.min(r,t[n].length),a=Math.max(a,t[n].length);if(r!==a)for(n=0;n<t.length;n++){var o=a-t[n].length;o&&(t[n]=t[n].concat(ebe(o)))}return t}function ebe(e){for(var t=new Array(e),r=0;r<e;r++)t[r]="";return t}function tbe(e){return e.calcdata.columns.reduce(function(t,r){return r.xIndex<e.xIndex?t+r.columnWidth:t},0)}function rbe(e,t){var r=Object.keys(e);return r.map(function(a){return kG({},e[a],{auxiliaryBlocks:t})})}function abe(e,t){for(var r={},a,n=0,o=0,i=nbe(),s=0,l=0,u=0;u<e.length;u++)a=e[u],i.rows.push({rowIndex:u,rowHeight:a}),o+=a,(o>=t||u===e.length-1)&&(r[n]=i,i.key=l++,i.firstRowIndex=s,i.lastRowIndex=u,i=nbe(),n+=o,s=u+1,o=0);return r}function nbe(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var LG={},iD=cn.extendFlat;LG.splitToPanels=function(e){var t=[0,0],r=iD({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:iD({},e.calcdata,{cells:e.calcdata.headerCells})}),a=iD({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n=iD({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[a,n,r]};LG.splitToCells=function(e){var t=H3t(e);return(e.values||[]).slice(t[0],t[1]).map(function(r,a){var n=typeof r=="string"&&r.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+n,key:t[0]+a,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:r}})};function H3t(e){var t=e.rowBlocks[e.page],r=t?t.rows[0].rowIndex:0,a=t?r+t.rows.length:0;return[r,a]}var Va=Kxe,ns=Ra.exports,G3t=bt.exports,V3t=G3t.numberFormat,lo=ym,PG=xn.exports,j3t=xo,q3t=bt.exports.raiseToTop,ed=bt.exports.strTranslate,Y3t=bt.exports.cancelTransition,W3t=U3t,ibe=LG,obe=Oa.exports,sbe=function(t,r){var a=!t._context.staticPlot,n=t._fullLayout._paper.selectAll("."+Va.cn.table).data(r.map(function(y){var _=lo.unwrap(y),S=_.trace;return W3t(t,S)}),lo.keyFun);n.exit().remove(),n.enter().append("g").classed(Va.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(y){return y.width+y.size.l+y.size.r}).attr("height",function(y){return y.height+y.size.t+y.size.b}).attr("transform",function(y){return ed(y.translateX,y.translateY)});var o=n.selectAll("."+Va.cn.tableControlView).data(lo.repeat,lo.keyFun),i=o.enter().append("g").classed(Va.cn.tableControlView,!0).style("box-sizing","content-box");if(a){var s="onwheel"in document?"wheel":"mousewheel";i.on("mousemove",function(y){o.filter(function(_){return y===_}).call(YM,t)}).on(s,function(y){if(!y.scrollbarState.wheeling){y.scrollbarState.wheeling=!0;var _=y.scrollY+ns.event.deltaY,S=sD(t,o,null,_)(y);S||(ns.event.stopPropagation(),ns.event.preventDefault()),y.scrollbarState.wheeling=!1}}).call(YM,t,!0)}o.attr("transform",function(y){return ed(y.size.l,y.size.t)});var l=o.selectAll("."+Va.cn.scrollBackground).data(lo.repeat,lo.keyFun);l.enter().append("rect").classed(Va.cn.scrollBackground,!0).attr("fill","none"),l.attr("width",function(y){return y.width}).attr("height",function(y){return y.height}),o.each(function(y){PG.setClipUrl(ns.select(this),lbe(t,y),t)});var u=o.selectAll("."+Va.cn.yColumn).data(function(y){return y.columns},lo.keyFun);u.enter().append("g").classed(Va.cn.yColumn,!0),u.exit().remove(),u.attr("transform",function(y){return ed(y.x,0)}),a&&u.call(ns.behavior.drag().origin(function(y){var _=ns.select(this);return vbe(_,y,-Va.uplift),q3t(this),y.calcdata.columnDragInProgress=!0,YM(o.filter(function(S){return y.calcdata.key===S.key}),t),y}).on("drag",function(y){var _=ns.select(this),S=function(A){return(y===A?ns.event.x:A.x)+A.columnWidth/2};y.x=Math.max(-Va.overdrag,Math.min(y.calcdata.width+Va.overdrag-y.columnWidth,ns.event.x));var M=fbe(u).filter(function(A){return A.calcdata.key===y.calcdata.key}),w=M.sort(function(A,k){return S(A)-S(k)});w.forEach(function(A,k){A.xIndex=k,A.x=y===A?A.x:A.xScale(A)}),u.filter(function(A){return y!==A}).transition().ease(Va.transitionEase).duration(Va.transitionDuration).attr("transform",function(A){return ed(A.x,0)}),_.call(Y3t).attr("transform",ed(y.x,-Va.uplift))}).on("dragend",function(y){var _=ns.select(this),S=y.calcdata;y.x=y.xScale(y),y.calcdata.columnDragInProgress=!1,vbe(_,y,0),nTt(t,S,S.columns.map(function(M){return M.xIndex}))})),u.each(function(y){PG.setClipUrl(ns.select(this),ube(t,y),t)});var f=u.selectAll("."+Va.cn.columnBlock).data(ibe.splitToPanels,lo.keyFun);f.enter().append("g").classed(Va.cn.columnBlock,!0).attr("id",function(y){return y.key}),f.style("cursor",function(y){return y.dragHandle?"ew-resize":y.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var c=f.filter(iTt),h=f.filter(DG);a&&h.call(ns.behavior.drag().origin(function(y){return ns.event.stopPropagation(),y}).on("drag",sD(t,o,-1)).on("dragend",function(){})),IG(t,o,c,f),IG(t,o,h,f);var v=o.selectAll("."+Va.cn.scrollAreaClip).data(lo.repeat,lo.keyFun);v.enter().append("clipPath").classed(Va.cn.scrollAreaClip,!0).attr("id",function(y){return lbe(t,y)});var p=v.selectAll("."+Va.cn.scrollAreaClipRect).data(lo.repeat,lo.keyFun);p.enter().append("rect").classed(Va.cn.scrollAreaClipRect,!0).attr("x",-Va.overdrag).attr("y",-Va.uplift).attr("fill","none"),p.attr("width",function(y){return y.width+2*Va.overdrag}).attr("height",function(y){return y.height+Va.uplift});var d=u.selectAll("."+Va.cn.columnBoundary).data(lo.repeat,lo.keyFun);d.enter().append("g").classed(Va.cn.columnBoundary,!0);var g=u.selectAll("."+Va.cn.columnBoundaryClippath).data(lo.repeat,lo.keyFun);g.enter().append("clipPath").classed(Va.cn.columnBoundaryClippath,!0),g.attr("id",function(y){return ube(t,y)});var m=g.selectAll("."+Va.cn.columnBoundaryRect).data(lo.repeat,lo.keyFun);m.enter().append("rect").classed(Va.cn.columnBoundaryRect,!0).attr("fill","none"),m.attr("width",function(y){return y.columnWidth+2*oD(y)}).attr("height",function(y){return y.calcdata.height+2*oD(y)+Va.uplift}).attr("x",function(y){return-oD(y)}).attr("y",function(y){return-oD(y)}),zG(null,h,o)};function oD(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function lbe(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function ube(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function fbe(e){return[].concat.apply([],e.map(function(t){return t})).map(function(t){return t.__data__})}function YM(e,t,r){function a(u){var f=u.rowBlocks;return OG(f,f.length-1)+(f.length?lD(f[f.length-1],1/0):1)}var n=e.selectAll("."+Va.cn.scrollbarKit).data(lo.repeat,lo.keyFun);n.enter().append("g").classed(Va.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),n.each(function(u){var f=u.scrollbarState;f.totalHeight=a(u),f.scrollableAreaHeight=u.groupHeight-RG(u),f.currentlyVisibleHeight=Math.min(f.totalHeight,f.scrollableAreaHeight),f.ratio=f.currentlyVisibleHeight/f.totalHeight,f.barLength=Math.max(f.ratio*f.currentlyVisibleHeight,Va.goldenRatio*Va.scrollbarWidth),f.barWiggleRoom=f.currentlyVisibleHeight-f.barLength,f.wiggleRoom=Math.max(0,f.totalHeight-f.scrollableAreaHeight),f.topY=f.barWiggleRoom===0?0:u.scrollY/f.wiggleRoom*f.barWiggleRoom,f.bottomY=f.topY+f.barLength,f.dragMultiplier=f.wiggleRoom/f.barWiggleRoom}).attr("transform",function(u){var f=u.width+Va.scrollbarWidth/2+Va.scrollbarOffset;return ed(f,RG(u))});var o=n.selectAll("."+Va.cn.scrollbar).data(lo.repeat,lo.keyFun);o.enter().append("g").classed(Va.cn.scrollbar,!0);var i=o.selectAll("."+Va.cn.scrollbarSlider).data(lo.repeat,lo.keyFun);i.enter().append("g").classed(Va.cn.scrollbarSlider,!0),i.attr("transform",function(u){return ed(0,u.scrollbarState.topY||0)});var s=i.selectAll("."+Va.cn.scrollbarGlyph).data(lo.repeat,lo.keyFun);s.enter().append("line").classed(Va.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",Va.scrollbarWidth).attr("stroke-linecap","round").attr("y1",Va.scrollbarWidth/2),s.attr("y2",function(u){return u.scrollbarState.barLength-Va.scrollbarWidth/2}).attr("stroke-opacity",function(u){return u.columnDragInProgress||!u.scrollbarState.barWiggleRoom||r?0:.4}),s.transition().delay(0).duration(0),s.transition().delay(Va.scrollbarHideDelay).duration(Va.scrollbarHideDuration).attr("stroke-opacity",0);var l=o.selectAll("."+Va.cn.scrollbarCaptureZone).data(lo.repeat,lo.keyFun);l.enter().append("line").classed(Va.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",Va.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(u){var f=ns.event.y,c=this.getBoundingClientRect(),h=u.scrollbarState,v=f-c.top,p=ns.scale.linear().domain([0,h.scrollableAreaHeight]).range([0,h.totalHeight]).clamp(!0);h.topY<=v&&v<=h.bottomY||sD(t,e,null,p(v-h.barLength/2))(u)}).call(ns.behavior.drag().origin(function(u){return ns.event.stopPropagation(),u.scrollbarState.scrollbarScrollInProgress=!0,u}).on("drag",sD(t,e)).on("dragend",function(){})),l.attr("y2",function(u){return u.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(s.remove(),l.remove())}function IG(e,t,r,a){var n=X3t(r),o=Z3t(n);eTt(o);var i=K3t(o);rTt(i);var s=Q3t(o),l=J3t(s);tTt(l),cbe(l,t,a,e),FG(o)}function X3t(e){var t=e.selectAll("."+Va.cn.columnCells).data(lo.repeat,lo.keyFun);return t.enter().append("g").classed(Va.cn.columnCells,!0),t.exit().remove(),t}function Z3t(e){var t=e.selectAll("."+Va.cn.columnCell).data(ibe.splitToCells,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Va.cn.columnCell,!0),t.exit().remove(),t}function K3t(e){var t=e.selectAll("."+Va.cn.cellRect).data(lo.repeat,function(r){return r.keyWithinBlock});return t.enter().append("rect").classed(Va.cn.cellRect,!0),t}function J3t(e){var t=e.selectAll("."+Va.cn.cellText).data(lo.repeat,function(r){return r.keyWithinBlock});return t.enter().append("text").classed(Va.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){ns.event.stopPropagation()}),t}function Q3t(e){var t=e.selectAll("."+Va.cn.cellTextHolder).data(lo.repeat,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Va.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}function eTt(e){e.each(function(t,r){var a=t.calcdata.cells.font,n=t.column.specIndex,o={size:D0(a.size,n,r),color:D0(a.color,n,r),family:D0(a.family,n,r)};t.rowNumber=t.key,t.align=D0(t.calcdata.cells.align,n,r),t.cellBorderWidth=D0(t.calcdata.cells.line.width,n,r),t.font=o})}function tTt(e){e.each(function(t){PG.font(ns.select(this),t.font)})}function rTt(e){e.attr("width",function(t){return t.column.columnWidth}).attr("stroke-width",function(t){return t.cellBorderWidth}).each(function(t){var r=ns.select(this);obe.stroke(r,D0(t.calcdata.cells.line.color,t.column.specIndex,t.rowNumber)),obe.fill(r,D0(t.calcdata.cells.fill.color,t.column.specIndex,t.rowNumber))})}function cbe(e,t,r,a){e.text(function(n){var o=n.column.specIndex,i=n.rowNumber,s=n.value,l=typeof s=="string",u=l&&s.match(/<br>/i),f=!l||u;n.mayHaveMarkup=l&&s.match(/[<&>]/);var c=aTt(s);n.latex=c;var h=c?"":D0(n.calcdata.cells.prefix,o,i)||"",v=c?"":D0(n.calcdata.cells.suffix,o,i)||"",p=c?null:D0(n.calcdata.cells.format,o,i)||null,d=h+(p?V3t(p)(n.value):n.value)+v,g;n.wrappingNeeded=!n.wrapped&&!f&&!c&&(g=hbe(d)),n.cellHeightMayIncrease=u||c||n.mayHaveMarkup||(g===void 0?hbe(d):g),n.needsConvertToTspans=n.mayHaveMarkup||n.wrappingNeeded||n.latex;var m;if(n.wrappingNeeded){var y=d.replace(/<a href=/ig,"<a_href="),_=y.split(Va.wrapSplitCharacter),S=_.map(function(M){return M.replace(/<a_href=/ig,"<a href=")});n.fragments=S.map(function(M){return{text:M,width:null}}),n.fragments.push({fragment:Va.wrapSpacer,width:null}),m=S.join(Va.lineBreaker)+Va.lineBreaker+Va.wrapSpacer}else delete n.fragments,m=d;return m}).attr("dy",function(n){return n.needsConvertToTspans?0:"0.75em"}).each(function(n){var o=this,i=ns.select(o),s=n.wrappingNeeded?sTt:lTt;n.needsConvertToTspans?j3t.convertToTspans(i,a,s(r,o,t,a,n)):ns.select(o.parentNode).attr("transform",function(l){return ed(pbe(l),Va.cellPad)}).attr("text-anchor",function(l){return{left:"start",center:"middle",right:"end"}[l.align]})})}function aTt(e){return typeof e=="string"&&e.match(Va.latexCheck)}function hbe(e){return e.indexOf(Va.wrapSplitCharacter)!==-1}function nTt(e,t,r){var a=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(n,o){return r[a.indexOf(n)]-r[a.indexOf(o)]}),t.columnorder=r,e.emit("plotly_restyle")}function D0(e,t,r){if(Array.isArray(e)){var a=e[Math.min(t,e.length-1)];return Array.isArray(a)?a[Math.min(r,a.length-1)]:a}else return e}function vbe(e,t,r){e.transition().ease(Va.releaseTransitionEase).duration(Va.releaseTransitionDuration).attr("transform",ed(t.x,r))}function DG(e){return e.type==="cells"}function iTt(e){return e.type==="header"}function RG(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce(function(r,a){return r+lD(a,1/0)},0)}function oTt(e,t,r){for(var a=[],n=0,o=0;o<e.length;o++){for(var i=e[o],s=i.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;i.allRowsHeight=l;var f=n+l,c=t,h=c+r;c<f&&h>n&&a.push(o),n+=l}return a}function zG(e,t,r){var a=fbe(t)[0];if(a!==void 0){var n=a.rowBlocks,o=a.calcdata,i=OG(n,n.length),s=a.calcdata.groupHeight-RG(a),l=o.scrollY=Math.max(0,Math.min(i-s,o.scrollY)),u=oTt(n,l,s);u.length===1&&(u[0]===n.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(f,c){f.page=u[c],f.scrollY=l}),t.attr("transform",function(f){var c=OG(f.rowBlocks,f.page)-f.scrollY;return ed(0,c)}),e&&(dbe(e,r,t,u,a.prevPages,a,0),dbe(e,r,t,u,a.prevPages,a,1),YM(r,e))}}function sD(e,t,r,a){return function(o){var i=o.calcdata?o.calcdata:o,s=t.filter(function(c){return i.key===c.key}),l=r||i.scrollbarState.dragMultiplier,u=i.scrollY;i.scrollY=a===void 0?i.scrollY+l*ns.event.dy:a;var f=s.selectAll("."+Va.cn.yColumn).selectAll("."+Va.cn.columnBlock).filter(DG);return zG(e,f,s),i.scrollY===u}}function dbe(e,t,r,a,n,o,i){var s=a[i]!==n[i];s&&(clearTimeout(o.currentRepaint[i]),o.currentRepaint[i]=setTimeout(function(){var l=r.filter(function(u,f){return f===i&&a[f]!==n[f]});IG(e,t,l,r),n[i]=a[i]}))}function sTt(e,t,r,a){return function(){var o=ns.select(t.parentNode);o.each(function(i){var s=i.fragments;o.selectAll("tspan.line").each(function(d,g){s[g].width=this.getComputedTextLength()});var l=s[s.length-1].width,u=s.slice(0,-1),f=[],c,h,v=0,p=i.column.columnWidth-2*Va.cellPad;for(i.value="";u.length;)c=u.shift(),h=c.width+l,v+h>p&&(i.value+=f.join(Va.wrapSpacer)+Va.lineBreaker,f=[],v=0),f.push(c.text),v+=h;v&&(i.value+=f.join(Va.wrapSpacer)),i.wrapped=!0}),o.selectAll("tspan.line").remove(),cbe(o.select("."+Va.cn.cellText),r,e,a),ns.select(t.parentNode.parentNode).call(FG)}}function lTt(e,t,r,a,n){return function(){if(!n.settledY){var i=ns.select(t.parentNode),s=NG(n),l=n.key-s.firstRowIndex,u=s.rows[l].rowHeight,f=n.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*Va.cellPad:u,c=Math.max(f,u),h=c-s.rows[l].rowHeight;h&&(s.rows[l].rowHeight=c,e.selectAll("."+Va.cn.columnCell).call(FG),zG(null,e.filter(DG),0),YM(r,a,!0)),i.attr("transform",function(){var v=this,p=v.parentNode,d=p.getBoundingClientRect(),g=ns.select(v.parentNode).select("."+Va.cn.cellRect).node().getBoundingClientRect(),m=v.transform.baseVal.consolidate(),y=g.top-d.top+(m?m.matrix.f:Va.cellPad);return ed(pbe(n,ns.select(v.parentNode).select("."+Va.cn.cellTextHolder).node().getBoundingClientRect().width),y)}),n.settledY=!0}}}function pbe(e,t){switch(e.align){case"left":return Va.cellPad;case"right":return e.column.columnWidth-(t||0)-Va.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return Va.cellPad}}function FG(e){e.attr("transform",function(t){var r=t.rowBlocks[0].auxiliaryBlocks.reduce(function(i,s){return i+lD(s,1/0)},0),a=NG(t),n=lD(a,t.key),o=n+r;return ed(0,o)}).selectAll("."+Va.cn.cellRect).attr("height",function(t){return fTt(NG(t),t.key).rowHeight})}function OG(e,t){for(var r=0,a=t-1;a>=0;a--)r+=uTt(e[a]);return r}function lD(e,t){for(var r=0,a=0;a<e.rows.length&&e.rows[a].rowIndex<t;a++)r+=e.rows[a].rowHeight;return r}function uTt(e){var t=e.allRowsHeight;if(t!==void 0)return t;for(var r=0,a=0;a<e.rows.length;a++)r+=e.rows[a].rowHeight;return e.allRowsHeight=r,r}function NG(e){return e.rowBlocks[e.page]}function fTt(e,t){return e.rows[t-e.firstRowIndex]}var uD={},cTt=Ml.getModuleCalcData,hTt=sbe,fD="table";uD.name=fD;uD.plot=function(e){var t=cTt(e.calcdata,fD)[0];t.length&&hTt(e,t)};uD.clean=function(e,t,r,a){var n=a._has&&a._has(fD),o=t._has&&t._has(fD);n&&!o&&a._paperdiv.selectAll(".table").remove()};var vTt={attributes:MG.exports,supplyDefaults:O3t,calc:B3t,plot:sbe,moduleType:"trace",name:"table",basePlotModule:uD,categories:["noOpacity"],meta:{description:["Table view for detailed data viewing.","The data are arranged in a grid of rows and columns.","Most styling can be specified for columns, rows or individual cells.","Table is using a column-major order, ie. the grid is represented as a vector of column vectors."].join(" ")}},dTt=vTt,BG=Ts,gbe=us,mbe=Zu,pTt=Ss.descriptionWithDates,gTt=Jo.overrideAll,mTt={color:{valType:"color",editType:"calc",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:BG({editType:"calc",description:["Sets this axis' title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),offset:{valType:"number",dflt:10,editType:"calc",description:["An additional amount by which to offset the title from the tick","labels, given in pixels.","Note that this used to be set","by the now deprecated `titleoffset` attribute."].join(" ")},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:mbe.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tickvals:{valType:"data_array",editType:"calc",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc",description:["Determines whether axis labels are drawn on the low side,","the high side, both, or neither side of the axis."].join(" ")},tickfont:BG({editType:"calc",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"calc",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"calc",description:["Hide SI prefix for 10^n if |n| is below this number"].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"calc",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"calc",description:pTt("tick label")},tickformatstops:gTt(mbe.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},labelpadding:{valType:"integer",dflt:10,editType:"calc",description:"Extra padding between label and the axis"},labelprefix:{valType:"string",editType:"calc",description:"Sets a axis label prefix."},labelsuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a axis label suffix."},showline:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:gbe.defaultLine,editType:"calc",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},gridcolor:{valType:"color",editType:"calc",description:"Sets the axis line color."},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc",description:"Sets the number of minor grid ticks per major grid tick"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the grid lines."},minorgridcolor:{valType:"color",dflt:gbe.lightLine,editType:"calc",description:"Sets the color of the grid lines."},startline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the starting value","of this axis.","If *true*, the start line is drawn on top of the grid lines."].join(" ")},startlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the start line."},startlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the start line."},endline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the final value","of this axis.","If *true*, the end line is drawn on top of the grid lines."].join(" ")},endlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the end line."},endlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the end line."},tick0:{valType:"number",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},dtick:{valType:"number",min:0,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},_deprecated:{title:{valType:"string",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:BG({editType:"calc",description:"Deprecated in favor of `title.font`."}),titleoffset:{valType:"number",dflt:10,editType:"calc",description:"Deprecated in favor of `title.offset`."}},editType:"calc"},yTt=Ts,ybe=mTt,xbe=us,cD=yTt({editType:"calc",description:"The default font used for axis & tick labels on this carpet"});cD.family.dflt='"Open Sans", verdana, arial, sans-serif';cD.size.dflt=12;cD.color.dflt=xbe.defaultLine;var $G={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["A two dimensional array of x coordinates at each carpet point.","If omitted, the plot is a cheater plot and the xaxis is hidden","by default."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"A two dimensional array of y coordinates at each carpet point."},a:{valType:"data_array",editType:"calc",description:["An array containing values of the first parameter value"].join(" ")},a0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `a`.","Builds a linear space of a coordinates.","Use with `da`","where `a0` is the starting coordinate and `da` the step."].join(" ")},da:{valType:"number",dflt:1,editType:"calc",description:["Sets the a coordinate step.","See `a0` for more info."].join(" ")},b:{valType:"data_array",editType:"calc",description:"A two dimensional array of y coordinates at each carpet point."},b0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `b`.","Builds a linear space of a coordinates.","Use with `db`","where `b0` is the starting coordinate and `db` the step."].join(" ")},db:{valType:"number",dflt:1,editType:"calc",description:["Sets the b coordinate step.","See `b0` for more info."].join(" ")},cheaterslope:{valType:"number",dflt:1,editType:"calc",description:["The shift applied to each successive row of data in creating a cheater plot.","Only used if `x` is been omitted."].join(" ")},aaxis:ybe,baxis:ybe,font:cD,color:{valType:"color",dflt:xbe.defaultLine,editType:"plot",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},transforms:void 0},bbe=bt.exports.isArray1D,xTt=function(t,r,a){var n=a("x"),o=n&&n.length,i=a("y"),s=i&&i.length;if(!o&&!s)return!1;if(r._cheater=!n,(!o||bbe(n))&&(!s||bbe(i))){var l=o?n.length:1/0;s&&(l=Math.min(l,i.length)),r.a&&r.a.length&&(l=Math.min(l,r.a.length)),r.b&&r.b.length&&(l=Math.min(l,r.b.length)),r._length=l}else r._length=null;return!0},bTt=$G,_be=Oa.exports.addOpacity,_Tt=Pa,WM=bt.exports,wTt=N_,TTt=hx,ATt=vx,STt=p8,MTt=Og,kTt=yT,ETt=function(t,r,a){var n=a.letter,o=a.font||{},i=bTt[n+"axis"];function s(k,T){return WM.coerce(t,r,i,k,T)}function l(k,T){return WM.coerce2(t,r,i,k,T)}a.name&&(r._name=a.name,r._id=a.name),s("autotypenumbers",a.autotypenumbersDflt);var u=s("type");if(u==="-"&&(a.data&&CTt(r,a.data),r.type==="-"?r.type="linear":u=t.type=r.type),s("smoothing"),s("cheatertype"),s("showticklabels"),s("labelprefix",n+" = "),s("labelsuffix"),s("showtickprefix"),s("showticksuffix"),s("separatethousands"),s("tickformat"),s("exponentformat"),s("minexponent"),s("showexponent"),s("categoryorder"),s("tickmode"),s("tickvals"),s("ticktext"),s("tick0"),s("dtick"),r.tickmode==="array"&&(s("arraytick0"),s("arraydtick")),s("labelpadding"),r._hovertitle=n,u==="date"){var f=_Tt.getComponentMethod("calendars","handleDefaults");f(t,r,"calendar",a.calendar)}MTt(r,a.fullLayout),r.c2p=WM.identity;var c=s("color",a.dfltColor),h=c===t.color?c:o.color,v=s("title.text");v&&(WM.coerceFont(s,"title.font",{family:o.family,size:WM.bigFont(o.size),color:h}),s("title.offset")),s("tickangle");var p=s("autorange",!r.isValidRange(t.range));p&&s("rangemode"),s("range"),r.cleanRange(),s("fixedrange"),wTt(t,r,s,u),ATt(t,r,s,u,a),TTt(t,r,s,u,a),STt(t,r,s,{data:a.data,dataAttr:n});var d=l("gridcolor",_be(c,.3)),g=l("gridwidth"),m=s("showgrid");m||(delete r.gridcolor,delete r.gridwidth);var y=l("startlinecolor",c),_=l("startlinewidth",g),S=s("startline",r.showgrid||!!y||!!_);S||(delete r.startlinecolor,delete r.startlinewidth);var M=l("endlinecolor",c),w=l("endlinewidth",g),A=s("endline",r.showgrid||!!M||!!w);return A||(delete r.endlinecolor,delete r.endlinewidth),m?(s("minorgridcount"),s("minorgridwidth",g),s("minorgridcolor",_be(d,.06)),r.minorgridcount||(delete r.minorgridwidth,delete r.minorgridcolor)):(delete r.gridcolor,delete r.gridWidth),r.showticklabels==="none"&&(delete r.tickfont,delete r.tickangle,delete r.showexponent,delete r.exponentformat,delete r.minexponent,delete r.tickformat,delete r.showticksuffix,delete r.showtickprefix),r.showticksuffix||delete r.ticksuffix,r.showtickprefix||delete r.tickprefix,s("tickmode"),r};function CTt(e,t){if(e.type==="-"){var r=e._id,a=r.charAt(0),n=a+"calendar",o=e[n];e.type=kTt(t,o,{autotypenumbers:e.autotypenumbers})}}var LTt=ETt,PTt=si,ITt=function(t,r,a,n,o){var i=n("a");i||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),DTt(t,r,a,o)};function DTt(e,t,r,a){var n=["aaxis","baxis"];n.forEach(function(o){var i=o.charAt(0),s=e[o]||{},l=PTt.newContainer(t,o),u={tickfont:"x",id:i+"axis",letter:i,font:t.font,name:o,data:e[i],calendar:t.calendar,dfltColor:a,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};LTt(s,l,u),l._categories=l._categories||[],!e[o]&&s.type!=="-"&&(e[o]={type:s.type})})}var wbe=bt.exports,RTt=xTt,zTt=ITt,FTt=$G,OTt=us,NTt=function(t,r,a,n){function o(l,u){return wbe.coerce(t,r,FTt,l,u)}r._clipPathId="clip"+r.uid+"carpet";var i=o("color",OTt.defaultLine);if(wbe.coerceFont(o,"font"),o("carpet"),zTt(t,r,n,o,i),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var s=RTt(t,r,o);s||(r.visible=!1),r._cheater&&o("cheaterslope")},BTt=bt.exports.isArrayOrTypedArray,Tbe=function(t,r,a){var n;for(BTt(t)?t.length>r.length&&(t=t.slice(0,r.length)):t=[],n=0;n<r.length;n++)t[n]=a(r[n]);return t},Abe=function(t,r,a){if(t.length===0)return"";var n,o=[],i=a?3:1;for(n=0;n<t.length;n+=i)o.push(t[n]+","+r[n]),a&&n<t.length-i&&(o.push("C"),o.push([t[n+1]+","+r[n+1],t[n+2]+","+r[n+2]+" "].join(" ")));return o.join(a?"":"L")},$Tt=function(t,r,a,n,o,i){var s=o[0]*t.dpdx(r),l=o[1]*t.dpdy(a),u=1,f=1;if(i){var c=Math.sqrt(o[0]*o[0]+o[1]*o[1]),h=Math.sqrt(i[0]*i[0]+i[1]*i[1]),v=(o[0]*i[0]+o[1]*i[1])/c/h;f=Math.max(0,v)}var p=Math.atan2(l,s)*180/Math.PI;return p<-90?(p+=180,u=-u):p>90&&(p-=180,u=-u),{angle:p,flip:u,p:t.c2p(n,r,a),offsetMultplier:f}},hD=Ra.exports,UG=xn.exports,vD=Tbe,Sbe=Abe,XM=$Tt,HG=xo,Th=bt.exports,Mbe=Th.strRotate,dD=Th.strTranslate,kbe=ou,UTt=function(t,r,a,n){var o=r.xaxis,i=r.yaxis,s=t._fullLayout,l=s._clips;Th.makeTraceGroups(n,a,"trace").each(function(u){var f=hD.select(this),c=u[0],h=c.trace,v=h.aaxis,p=h.baxis,d=Th.ensureSingle(f,"g","minorlayer"),g=Th.ensureSingle(f,"g","majorlayer"),m=Th.ensureSingle(f,"g","boundarylayer"),y=Th.ensureSingle(f,"g","labellayer");f.style("opacity",h.opacity),s3(o,i,g,v,"a",v._gridlines),s3(o,i,g,p,"b",p._gridlines),s3(o,i,d,v,"a",v._minorgridlines),s3(o,i,d,p,"b",p._minorgridlines),s3(o,i,m,v,"a-boundary",v._boundarylines),s3(o,i,m,p,"b-boundary",p._boundarylines);var _=Ebe(t,o,i,h,c,y,v._labels,"a-label"),S=Ebe(t,o,i,h,c,y,p._labels,"b-label");GTt(t,y,h,c,o,i,_,S),HTt(h,c,l,o,i)})};function HTt(e,t,r,a,n){var o,i,s,l,u=r.select("#"+e._clipPathId);u.size()||(u=r.append("clipPath").classed("carpetclip",!0));var f=Th.ensureSingle(u,"path","carpetboundary"),c=t.clipsegments,h=[];for(l=0;l<c.length;l++)o=c[l],i=vD([],o.x,a.c2p),s=vD([],o.y,n.c2p),h.push(Sbe(i,s,o.bicubic));var v="M"+h.join("L")+"Z";u.attr("id",e._clipPathId),f.attr("d",v)}function s3(e,t,r,a,n,o){var i="const-"+n+"-lines",s=r.selectAll("."+i).data(o);s.enter().append("path").classed(i,!0).style("vector-effect","non-scaling-stroke"),s.each(function(l){var u=l,f=u.x,c=u.y,h=vD([],f,e.c2p),v=vD([],c,t.c2p),p="M"+Sbe(h,v,u.smoothing),d=hD.select(this);d.attr("d",p).style("stroke-width",u.width).style("stroke",u.color).style("fill","none")}),s.exit().remove()}function Ebe(e,t,r,a,n,o,i,s){var l=o.selectAll("text."+s).data(i);l.enter().append("text").classed(s,!0);var u=0,f={};return l.each(function(c,h){var v;if(c.axis.tickangle==="auto")v=XM(a,t,r,c.xy,c.dxy);else{var p=(c.axis.tickangle+180)*Math.PI/180;v=XM(a,t,r,c.xy,[Math.cos(p),Math.sin(p)])}h||(f={angle:v.angle,flip:v.flip});var d=(c.endAnchor?-1:1)*v.flip,g=hD.select(this).attr({"text-anchor":d>0?"start":"end","data-notex":1}).call(UG.font,c.font).text(c.text).call(HG.convertToTspans,e),m=UG.bBox(this);g.attr("transform",dD(v.p[0],v.p[1])+Mbe(v.angle)+dD(c.axis.labelpadding*d,m.height*.3)),u=Math.max(u,m.width+c.axis.labelpadding)}),l.exit().remove(),f.maxExtent=u,f}function GTt(e,t,r,a,n,o,i,s){var l,u,f,c,h=Th.aggNums(Math.min,null,r.a),v=Th.aggNums(Math.max,null,r.a),p=Th.aggNums(Math.min,null,r.b),d=Th.aggNums(Math.max,null,r.b);l=.5*(h+v),u=p,f=r.ab2xy(l,u,!0),c=r.dxyda_rough(l,u),i.angle===void 0&&Th.extendFlat(i,XM(r,n,o,f,r.dxydb_rough(l,u))),Lbe(e,t,r,a,f,c,r.aaxis,n,o,i,"a-title"),l=h,u=.5*(p+d),f=r.ab2xy(l,u,!0),c=r.dxydb_rough(l,u),s.angle===void 0&&Th.extendFlat(s,XM(r,n,o,f,r.dxyda_rough(l,u))),Lbe(e,t,r,a,f,c,r.baxis,n,o,s,"b-title")}var Cbe=kbe.LINE_SPACING,VTt=(1-kbe.MID_SHIFT)/Cbe+1;function Lbe(e,t,r,a,n,o,i,s,l,u,f){var c=[];i.title.text&&c.push(i.title.text);var h=t.selectAll("text."+f).data(c),v=u.maxExtent;h.enter().append("text").classed(f,!0),h.each(function(){var p=XM(r,s,l,n,o);["start","both"].indexOf(i.showticklabels)===-1&&(v=0);var d=i.title.font.size;v+=d+i.title.offset;var g=u.angle+(u.flip<0?180:0),m=(g-p.angle+450)%360,y=m>90&&m<270,_=hD.select(this);_.text(i.title.text).call(HG.convertToTspans,e),y&&(v=(-HG.lineCount(_)+VTt)*Cbe*d-v),_.attr("transform",dD(p.p[0],p.p[1])+Mbe(p.angle)+dD(0,v)).attr("text-anchor","middle").call(UG.font,i.title.font)}),h.exit().remove()}var pD=bt.exports.isArrayOrTypedArray,jTt=function(e,t,r){var a,n,o,i,s,l,u=[],f=pD(e)?e.length:e,c=pD(t)?t.length:t,h=pD(e)?e:null,v=pD(t)?t:null;h&&(o=(h.length-1)/(h[h.length-1]-h[0])/(f-1)),v&&(i=(v.length-1)/(v[v.length-1]-v[0])/(c-1));var p,d=1/0,g=-1/0;for(n=0;n<c;n++)for(u[n]=[],l=v?(v[n]-v[0])*i:n/(c-1),a=0;a<f;a++)s=h?(h[a]-h[0])*o:a/(f-1),p=s-l*r,d=Math.min(p,d),g=Math.max(p,g),u[n][a]=p;var m=1/(g-d),y=-d*m;for(n=0;n<c;n++)for(a=0;a<f;a++)u[n][a]=m*u[n][a]+y;return u},Pbe=bt.exports.isArrayOrTypedArray,qTt=function(e){return Ibe(e,0)};function Ibe(e,t){if(!Pbe(e)||t>=10)return null;for(var r=1/0,a=-1/0,n=e.length,o=0;o<n;o++){var i=e[o];if(Pbe(i)){var s=Ibe(i,t+1);s&&(r=Math.min(s[0],r),a=Math.max(s[1],a))}else r=Math.min(i,r),a=Math.max(i,a)}return[r,a]}var YTt=rn.exports,x1=cn.extendFlat,WTt=function(t,r,a){var n,o,i,s,l,u,f,c,h,v,p,d,g,m,y=t["_"+r],_=t[r+"axis"],S=_._gridlines=[],M=_._minorgridlines=[],w=_._boundarylines=[],A=t["_"+a],k=t[a+"axis"];_.tickmode==="array"&&(_.tickvals=y.slice());var T=t._xctrl,L=t._yctrl,C=T[0].length,I=T.length,R=t._a.length,B=t._b.length;YTt.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var N=_.smoothing?3:1;function D($){var Y,X,ee,Q,Z,q,ae,ie,we,Te,he,xe,Se=[],ye=[],re={};if(r==="b")for(X=t.b2j($),ee=Math.floor(Math.max(0,Math.min(B-2,X))),Q=X-ee,re.length=B,re.crossLength=R,re.xy=function(se){return t.evalxy([],se,X)},re.dxy=function(se,de){return t.dxydi([],se,ee,de,Q)},Y=0;Y<R;Y++)q=Math.min(R-2,Y),ae=Y-q,ie=t.evalxy([],Y,X),k.smoothing&&Y>0&&(we=t.dxydi([],Y-1,ee,0,Q),Se.push(Z[0]+we[0]/3),ye.push(Z[1]+we[1]/3),Te=t.dxydi([],Y-1,ee,1,Q),Se.push(ie[0]-Te[0]/3),ye.push(ie[1]-Te[1]/3)),Se.push(ie[0]),ye.push(ie[1]),Z=ie;else for(Y=t.a2i($),q=Math.floor(Math.max(0,Math.min(R-2,Y))),ae=Y-q,re.length=R,re.crossLength=B,re.xy=function(se){return t.evalxy([],Y,se)},re.dxy=function(se,de){return t.dxydj([],q,se,ae,de)},X=0;X<B;X++)ee=Math.min(B-2,X),Q=X-ee,ie=t.evalxy([],Y,X),k.smoothing&&X>0&&(he=t.dxydj([],q,X-1,ae,0),Se.push(Z[0]+he[0]/3),ye.push(Z[1]+he[1]/3),xe=t.dxydj([],q,X-1,ae,1),Se.push(ie[0]-xe[0]/3),ye.push(ie[1]-xe[1]/3)),Se.push(ie[0]),ye.push(ie[1]),Z=ie;return re.axisLetter=r,re.axis=_,re.crossAxis=k,re.value=$,re.constvar=a,re.index=c,re.x=Se,re.y=ye,re.smoothing=k.smoothing,re}function O($){var Y,X,ee,Q,Z,q=[],ae=[],ie={};if(ie.length=y.length,ie.crossLength=A.length,r==="b")for(ee=Math.max(0,Math.min(B-2,$)),Z=Math.min(1,Math.max(0,$-ee)),ie.xy=function(we){return t.evalxy([],we,$)},ie.dxy=function(we,Te){return t.dxydi([],we,ee,Te,Z)},Y=0;Y<C;Y++)q[Y]=T[$*N][Y],ae[Y]=L[$*N][Y];else for(X=Math.max(0,Math.min(R-2,$)),Q=Math.min(1,Math.max(0,$-X)),ie.xy=function(we){return t.evalxy([],$,we)},ie.dxy=function(we,Te){return t.dxydj([],X,we,Q,Te)},Y=0;Y<I;Y++)q[Y]=T[Y][$*N],ae[Y]=L[Y][$*N];return ie.axisLetter=r,ie.axis=_,ie.crossAxis=k,ie.value=y[$],ie.constvar=a,ie.index=$,ie.x=q,ie.y=ae,ie.smoothing=k.smoothing,ie}if(_.tickmode==="array"){for(s=5e-15,l=[Math.floor((y.length-1-_.arraytick0)/_.arraydtick*(1+s)),Math.ceil(-_.arraytick0/_.arraydtick/(1+s))].sort(function($,Y){return $-Y}),u=l[0]-1,f=l[1]+1,c=u;c<f;c++)o=_.arraytick0+_.arraydtick*c,!(o<0||o>y.length-1)&&S.push(x1(O(o),{color:_.gridcolor,width:_.gridwidth}));for(c=u;c<f;c++)if(i=_.arraytick0+_.arraydtick*c,p=Math.min(i+_.arraydtick,y.length-1),!(i<0||i>y.length-1)&&!(p<0||p>y.length-1))for(d=y[i],g=y[p],n=0;n<_.minorgridcount;n++)m=p-i,!(m<=0)&&(v=d+(g-d)*(n+1)/(_.minorgridcount+1)*(_.arraydtick/m),!(v<y[0]||v>y[y.length-1])&&M.push(x1(D(v),{color:_.minorgridcolor,width:_.minorgridwidth})));_.startline&&w.push(x1(O(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&w.push(x1(O(y.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(s=5e-15,l=[Math.floor((y[y.length-1]-_.tick0)/_.dtick*(1+s)),Math.ceil((y[0]-_.tick0)/_.dtick/(1+s))].sort(function($,Y){return $-Y}),u=l[0],f=l[1],c=u;c<=f;c++)h=_.tick0+_.dtick*c,S.push(x1(D(h),{color:_.gridcolor,width:_.gridwidth}));for(c=u-1;c<f+1;c++)for(h=_.tick0+_.dtick*c,n=0;n<_.minorgridcount;n++)v=h+_.dtick*(n+1)/(_.minorgridcount+1),!(v<y[0]||v>y[y.length-1])&&M.push(x1(D(v),{color:_.minorgridcolor,width:_.minorgridwidth}));_.startline&&w.push(x1(D(y[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&w.push(x1(D(y[y.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}},Dbe=rn.exports,Rbe=cn.extendFlat,XTt=function(t,r){var a,n,o,i,s,l=r._labels=[],u=r._gridlines;for(a=0;a<u.length;a++)s=u[a],["start","both"].indexOf(r.showticklabels)!==-1&&(n=Dbe.tickText(r,s.value),Rbe(n,{prefix:o,suffix:i,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:a===0,isLast:a===u.length-1}),l.push(n)),["end","both"].indexOf(r.showticklabels)!==-1&&(n=Dbe.tickText(r,s.value),Rbe(n,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:a===0,isLast:a===u.length-1}),l.push(n))},ZTt=function(t,r,a,n){var o,i,s,l=[],u=!!a.smoothing,f=!!n.smoothing,c=t[0].length-1,h=t.length-1;for(o=0,i=[],s=[];o<=c;o++)i[o]=t[0][o],s[o]=r[0][o];for(l.push({x:i,y:s,bicubic:u}),o=0,i=[],s=[];o<=h;o++)i[o]=t[o][c],s[o]=r[o][c];for(l.push({x:i,y:s,bicubic:f}),o=c,i=[],s=[];o>=0;o--)i[c-o]=t[h][o],s[c-o]=r[h][o];for(l.push({x:i,y:s,bicubic:u}),o=h,i=[],s=[];o>=0;o--)i[h-o]=t[o][0],s[h-o]=r[o][0];return l.push({x:i,y:s,bicubic:f}),l},KTt=bt.exports,JTt=function(t,r,a){var n,o,i,s=[],l=[],u=t[0].length,f=t.length;function c(ee,Q){var Z=0,q,ae=0;return ee>0&&(q=t[Q][ee-1])!==void 0&&(ae++,Z+=q),ee<u-1&&(q=t[Q][ee+1])!==void 0&&(ae++,Z+=q),Q>0&&(q=t[Q-1][ee])!==void 0&&(ae++,Z+=q),Q<f-1&&(q=t[Q+1][ee])!==void 0&&(ae++,Z+=q),Z/Math.max(1,ae)}var h=0;for(n=0;n<u;n++)for(o=0;o<f;o++)t[o][n]===void 0&&(s.push(n),l.push(o),t[o][n]=c(n,o)),h=Math.max(h,Math.abs(t[o][n]));if(!s.length)return t;var v,p,d,g,m,y,_,S,M,w,A,k=1e-5,T=0,L=100,C=0,I=s.length;do{for(T=0,i=0;i<I;i++){n=s[i],o=l[i];var R=0,B=0,N,D,O,$,Y,X;n===0?(Y=Math.min(u-1,2),O=r[Y],$=r[1],N=t[o][Y],D=t[o][1],B+=D+(D-N)*(r[0]-$)/($-O),R++):n===u-1&&(Y=Math.max(0,u-3),O=r[Y],$=r[u-2],N=t[o][Y],D=t[o][u-2],B+=D+(D-N)*(r[u-1]-$)/($-O),R++),(n===0||n===u-1)&&o>0&&o<f-1&&(v=a[o+1]-a[o],p=a[o]-a[o-1],B+=(p*t[o+1][n]+v*t[o-1][n])/(p+v),R++),o===0?(X=Math.min(f-1,2),O=a[X],$=a[1],N=t[X][n],D=t[1][n],B+=D+(D-N)*(a[0]-$)/($-O),R++):o===f-1&&(X=Math.max(0,f-3),O=a[X],$=a[f-2],N=t[X][n],D=t[f-2][n],B+=D+(D-N)*(a[f-1]-$)/($-O),R++),(o===0||o===f-1)&&n>0&&n<u-1&&(v=r[n+1]-r[n],p=r[n]-r[n-1],B+=(p*t[o][n+1]+v*t[o][n-1])/(p+v),R++),R?B/=R:(d=r[n+1]-r[n],g=r[n]-r[n-1],m=a[o+1]-a[o],y=a[o]-a[o-1],_=d*g*(d+g),S=m*y*(m+y),B=(_*(y*t[o+1][n]+m*t[o-1][n])+S*(g*t[o][n+1]+d*t[o][n-1]))/(S*(g+d)+_*(y+m))),M=B-t[o][n],w=M/h,T+=w*w,A=R?0:.85,t[o][n]+=M*(1+A)}T=Math.sqrt(T)}while(C++<L&&T>k);return KTt.log("Smoother converged to",T,"after",C,"iterations"),t},QTt={RELATIVE_CULL_TOLERANCE:1e-6},zbe=.5,eAt=function(t,r,a,n){var o=t[0]-r[0],i=t[1]-r[1],s=a[0]-r[0],l=a[1]-r[1],u=Math.pow(o*o+i*i,zbe/2),f=Math.pow(s*s+l*l,zbe/2),c=(f*f*o-u*u*s)*n,h=(f*f*i-u*u*l)*n,v=f*(u+f)*3,p=u*(u+f)*3;return[[r[0]+(v&&c/v),r[1]+(v&&h/v)],[r[0]-(p&&c/p),r[1]-(p&&h/p)]]},GG=eAt,gD=bt.exports.ensureArray;function l3(e,t,r){var a=-.5*r[0]+1.5*t[0],n=-.5*r[1]+1.5*t[1];return[(2*a+e[0])/3,(2*n+e[1])/3]}var tAt=function(t,r,a,n,o,i){var s,l,u,f,c,h,v,p,d,g,m=a[0].length,y=a.length,_=o?3*m-2:m,S=i?3*y-2:y;for(t=gD(t,S),r=gD(r,S),u=0;u<S;u++)t[u]=gD(t[u],_),r[u]=gD(r[u],_);for(l=0,f=0;l<y;l++,f+=i?3:1)for(c=t[f],h=r[f],v=a[l],p=n[l],s=0,u=0;s<m;s++,u+=o?3:1)c[u]=v[s],h[u]=p[s];if(o)for(l=0,f=0;l<y;l++,f+=i?3:1){for(s=1,u=3;s<m-1;s++,u+=3)d=GG([a[l][s-1],n[l][s-1]],[a[l][s],n[l][s]],[a[l][s+1],n[l][s+1]],o),t[f][u-1]=d[0][0],r[f][u-1]=d[0][1],t[f][u+1]=d[1][0],r[f][u+1]=d[1][1];g=l3([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=g[0],r[f][1]=g[1],g=l3([t[f][_-1],r[f][_-1]],[t[f][_-3],r[f][_-3]],[t[f][_-4],r[f][_-4]]),t[f][_-2]=g[0],r[f][_-2]=g[1]}if(i)for(u=0;u<_;u++){for(f=3;f<S-3;f+=3)d=GG([t[f-3][u],r[f-3][u]],[t[f][u],r[f][u]],[t[f+3][u],r[f+3][u]],i),t[f-1][u]=d[0][0],r[f-1][u]=d[0][1],t[f+1][u]=d[1][0],r[f+1][u]=d[1][1];g=l3([t[0][u],r[0][u]],[t[2][u],r[2][u]],[t[3][u],r[3][u]]),t[1][u]=g[0],r[1][u]=g[1],g=l3([t[S-1][u],r[S-1][u]],[t[S-3][u],r[S-3][u]],[t[S-4][u],r[S-4][u]]),t[S-2][u]=g[0],r[S-2][u]=g[1]}if(o&&i)for(f=1;f<S;f+=(f+1)%3==0?2:1){for(u=3;u<_-3;u+=3)d=GG([t[f][u-3],r[f][u-3]],[t[f][u],r[f][u]],[t[f][u+3],r[f][u+3]],o),t[f][u-1]=.5*(t[f][u-1]+d[0][0]),r[f][u-1]=.5*(r[f][u-1]+d[0][1]),t[f][u+1]=.5*(t[f][u+1]+d[1][0]),r[f][u+1]=.5*(r[f][u+1]+d[1][1]);g=l3([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=.5*(t[f][1]+g[0]),r[f][1]=.5*(r[f][1]+g[1]),g=l3([t[f][_-1],r[f][_-1]],[t[f][_-3],r[f][_-3]],[t[f][_-4],r[f][_-4]]),t[f][_-2]=.5*(t[f][_-2]+g[0]),r[f][_-2]=.5*(r[f][_-2]+g[1])}return[t,r]},rAt=function(e,t,r,a,n){var o=t-2,i=r-2;return a&&n?function(s,l,u){s||(s=[]);var f,c,h,v,p,d,g=Math.max(0,Math.min(Math.floor(l),o)),m=Math.max(0,Math.min(Math.floor(u),i)),y=Math.max(0,Math.min(1,l-g)),_=Math.max(0,Math.min(1,u-m));g*=3,m*=3;var S=y*y,M=S*y,w=1-y,A=w*w,k=A*w,T=_*_,L=T*_,C=1-_,I=C*C,R=I*C;for(d=0;d<e.length;d++)p=e[d],f=k*p[m][g]+3*(A*y*p[m][g+1]+w*S*p[m][g+2])+M*p[m][g+3],c=k*p[m+1][g]+3*(A*y*p[m+1][g+1]+w*S*p[m+1][g+2])+M*p[m+1][g+3],h=k*p[m+2][g]+3*(A*y*p[m+2][g+1]+w*S*p[m+2][g+2])+M*p[m+2][g+3],v=k*p[m+3][g]+3*(A*y*p[m+3][g+1]+w*S*p[m+3][g+2])+M*p[m+3][g+3],s[d]=R*f+3*(I*_*c+C*T*h)+L*v;return s}:a?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),o)),c=Math.max(0,Math.min(Math.floor(u),i)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,d,g,m,y,_;f*=3;var S=h*h,M=S*h,w=1-h,A=w*w,k=A*w,T=1-v;for(y=0;y<e.length;y++)_=e[y],p=T*_[c][f]+v*_[c+1][f],d=T*_[c][f+1]+v*_[c+1][f+1],g=T*_[c][f+2]+v*_[c+1][f+1],m=T*_[c][f+3]+v*_[c+1][f+1],s[y]=k*p+3*(A*h*d+w*S*g)+M*m;return s}:n?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),o)),c=Math.max(0,Math.min(Math.floor(u),i)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,d,g,m,y,_;c*=3;var S=v*v,M=S*v,w=1-v,A=w*w,k=A*w,T=1-h;for(y=0;y<e.length;y++)_=e[y],p=T*_[c][f]+h*_[c][f+1],d=T*_[c+1][f]+h*_[c+1][f+1],g=T*_[c+2][f]+h*_[c+2][f+1],m=T*_[c+3][f]+h*_[c+3][f+1],s[y]=k*p+3*(A*v*d+w*S*g)+M*m;return s}:function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),o)),c=Math.max(0,Math.min(Math.floor(u),i)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,d,g,m,y=1-v,_=1-h;for(g=0;g<e.length;g++)m=e[g],p=_*m[c][f]+h*m[c][f+1],d=_*m[c+1][f]+h*m[c+1][f+1],s[g]=y*p+v*d;return s}},aAt=function(e,t,r){return t&&r?function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h,v;n*=3,o*=3;var p=i*i,d=1-i,g=d*d,m=d*i*2,y=-3*g,_=3*(g-m),S=3*(m-p),M=3*p,w=s*s,A=w*s,k=1-s,T=k*k,L=T*k;for(v=0;v<e.length;v++)h=e[v],l=y*h[o][n]+_*h[o][n+1]+S*h[o][n+2]+M*h[o][n+3],u=y*h[o+1][n]+_*h[o+1][n+1]+S*h[o+1][n+2]+M*h[o+1][n+3],f=y*h[o+2][n]+_*h[o+2][n+1]+S*h[o+2][n+2]+M*h[o+2][n+3],c=y*h[o+3][n]+_*h[o+3][n+1]+S*h[o+3][n+2]+M*h[o+3][n+3],a[v]=L*l+3*(T*s*u+k*w*f)+A*c;return a}:t?function(a,n,o,i,s){a||(a=[]);var l,u,f,c;n*=3;var h=i*i,v=1-i,p=v*v,d=v*i*2,g=-3*p,m=3*(p-d),y=3*(d-h),_=3*h,S=1-s;for(f=0;f<e.length;f++)c=e[f],l=g*c[o][n]+m*c[o][n+1]+y*c[o][n+2]+_*c[o][n+3],u=g*c[o+1][n]+m*c[o+1][n+1]+y*c[o+1][n+2]+_*c[o+1][n+3],a[f]=S*l+s*u;return a}:r?function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h,v;o*=3;var p=s*s,d=p*s,g=1-s,m=g*g,y=m*g;for(h=0;h<e.length;h++)v=e[h],l=v[o][n+1]-v[o][n],u=v[o+1][n+1]-v[o+1][n],f=v[o+2][n+1]-v[o+2][n],c=v[o+3][n+1]-v[o+3][n],a[h]=y*l+3*(m*s*u+g*p*f)+d*c;return a}:function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h=1-s;for(f=0;f<e.length;f++)c=e[f],l=c[o][n+1]-c[o][n],u=c[o+1][n+1]-c[o+1][n],a[f]=h*l+s*u;return a}},nAt=function(e,t,r){return t&&r?function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h,v;n*=3,o*=3;var p=i*i,d=p*i,g=1-i,m=g*g,y=m*g,_=s*s,S=1-s,M=S*S,w=S*s*2,A=-3*M,k=3*(M-w),T=3*(w-_),L=3*_;for(v=0;v<e.length;v++)h=e[v],l=A*h[o][n]+k*h[o+1][n]+T*h[o+2][n]+L*h[o+3][n],u=A*h[o][n+1]+k*h[o+1][n+1]+T*h[o+2][n+1]+L*h[o+3][n+1],f=A*h[o][n+2]+k*h[o+1][n+2]+T*h[o+2][n+2]+L*h[o+3][n+2],c=A*h[o][n+3]+k*h[o+1][n+3]+T*h[o+2][n+3]+L*h[o+3][n+3],a[v]=y*l+3*(m*i*u+g*p*f)+d*c;return a}:t?function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h,v;n*=3;var p=s*s,d=p*s,g=1-s,m=g*g,y=m*g;for(h=0;h<e.length;h++)v=e[h],l=v[o+1][n]-v[o][n],u=v[o+1][n+1]-v[o][n+1],f=v[o+1][n+2]-v[o][n+2],c=v[o+1][n+3]-v[o][n+3],a[h]=y*l+3*(m*s*u+g*p*f)+d*c;return a}:r?function(a,n,o,i,s){a||(a=[]);var l,u,f,c;o*=3;var h=1-i,v=s*s,p=1-s,d=p*p,g=p*s*2,m=-3*d,y=3*(d-g),_=3*(g-v),S=3*v;for(f=0;f<e.length;f++)c=e[f],l=m*c[o][n]+y*c[o+1][n]+_*c[o+2][n]+S*c[o+3][n],u=m*c[o][n+1]+y*c[o+1][n+1]+_*c[o+2][n+1]+S*c[o+3][n+1],a[f]=h*l+i*u;return a}:function(a,n,o,i,s){a||(a=[]);var l,u,f,c,h=1-i;for(f=0;f<e.length;f++)c=e[f],l=c[o+1][n]-c[o][n],u=c[o+1][n+1]-c[o][n+1],a[f]=h*l+i*u;return a}},Fbe=QTt,Obe=T5.findBin,iAt=tAt,oAt=rAt,sAt=aAt,lAt=nAt,uAt=function(t){var r=t._a,a=t._b,n=r.length,o=a.length,i=t.aaxis,s=t.baxis,l=r[0],u=r[n-1],f=a[0],c=a[o-1],h=r[r.length-1]-r[0],v=a[a.length-1]-a[0],p=h*Fbe.RELATIVE_CULL_TOLERANCE,d=v*Fbe.RELATIVE_CULL_TOLERANCE;l-=p,u+=p,f-=d,c+=d,t.isVisible=function(g,m){return g>l&&g<u&&m>f&&m<c},t.isOccluded=function(g,m){return g<l||g>u||m<f||m>c},t.setScale=function(){var g=t._x,m=t._y,y=iAt(t._xctrl,t._yctrl,g,m,i.smoothing,s.smoothing);t._xctrl=y[0],t._yctrl=y[1],t.evalxy=oAt([t._xctrl,t._yctrl],n,o,i.smoothing,s.smoothing),t.dxydi=sAt([t._xctrl,t._yctrl],i.smoothing,s.smoothing),t.dxydj=lAt([t._xctrl,t._yctrl],i.smoothing,s.smoothing)},t.i2a=function(g){var m=Math.max(0,Math.floor(g[0]),n-2),y=g[0]-m;return(1-y)*r[m]+y*r[m+1]},t.j2b=function(g){var m=Math.max(0,Math.floor(g[1]),n-2),y=g[1]-m;return(1-y)*a[m]+y*a[m+1]},t.ij2ab=function(g){return[t.i2a(g[0]),t.j2b(g[1])]},t.a2i=function(g){var m=Math.max(0,Math.min(Obe(g,r),n-2)),y=r[m],_=r[m+1];return Math.max(0,Math.min(n-1,m+(g-y)/(_-y)))},t.b2j=function(g){var m=Math.max(0,Math.min(Obe(g,a),o-2)),y=a[m],_=a[m+1];return Math.max(0,Math.min(o-1,m+(g-y)/(_-y)))},t.ab2ij=function(g){return[t.a2i(g[0]),t.b2j(g[1])]},t.i2c=function(g,m){return t.evalxy([],g,m)},t.ab2xy=function(g,m,y){if(!y&&(g<r[0]||g>r[n-1]|m<a[0]||m>a[o-1]))return[!1,!1];var _=t.a2i(g),S=t.b2j(m),M=t.evalxy([],_,S);if(y){var w=0,A=0,k=[],T,L,C,I;g<r[0]?(T=0,L=0,w=(g-r[0])/(r[1]-r[0])):g>r[n-1]?(T=n-2,L=1,w=(g-r[n-1])/(r[n-1]-r[n-2])):(T=Math.max(0,Math.min(n-2,Math.floor(_))),L=_-T),m<a[0]?(C=0,I=0,A=(m-a[0])/(a[1]-a[0])):m>a[o-1]?(C=o-2,I=1,A=(m-a[o-1])/(a[o-1]-a[o-2])):(C=Math.max(0,Math.min(o-2,Math.floor(S))),I=S-C),w&&(t.dxydi(k,T,C,L,I),M[0]+=k[0]*w,M[1]+=k[1]*w),A&&(t.dxydj(k,T,C,L,I),M[0]+=k[0]*A,M[1]+=k[1]*A)}return M},t.c2p=function(g,m,y){return[m.c2p(g[0]),y.c2p(g[1])]},t.p2x=function(g,m,y){return[m.p2c(g[0]),y.p2c(g[1])]},t.dadi=function(g){var m=Math.max(0,Math.min(r.length-2,g));return r[m+1]-r[m]},t.dbdj=function(g){var m=Math.max(0,Math.min(a.length-2,g));return a[m+1]-a[m]},t.dxyda=function(g,m,y,_){var S=t.dxydi(null,g,m,y,_),M=t.dadi(g,y);return[S[0]/M,S[1]/M]},t.dxydb=function(g,m,y,_){var S=t.dxydj(null,g,m,y,_),M=t.dbdj(m,_);return[S[0]/M,S[1]/M]},t.dxyda_rough=function(g,m,y){var _=h*(y||.1),S=t.ab2xy(g+_,m,!0),M=t.ab2xy(g-_,m,!0);return[(S[0]-M[0])*.5/_,(S[1]-M[1])*.5/_]},t.dxydb_rough=function(g,m,y){var _=v*(y||.1),S=t.ab2xy(g,m+_,!0),M=t.ab2xy(g,m-_,!0);return[(S[0]-M[0])*.5/_,(S[1]-M[1])*.5/_]},t.dpdx=function(g){return g._m},t.dpdy=function(g){return g._m}},mD=rn.exports,Nbe=bt.exports.isArray1D,fAt=jTt,Bbe=qTt,$be=WTt,Ube=XTt,cAt=ZTt,Hbe=D7,Gbe=JTt,hAt=I7,vAt=uAt,dAt=function(t,r){var a=mD.getFromId(t,r.xaxis),n=mD.getFromId(t,r.yaxis),o=r.aaxis,i=r.baxis,s=r.x,l=r.y,u=[];s&&Nbe(s)&&u.push("x"),l&&Nbe(l)&&u.push("y"),u.length&&hAt(r,o,i,"a","b",u);var f=r._a=r._a||r.a,c=r._b=r._b||r.b;s=r._x||r.x,l=r._y||r.y;var h={};if(r._cheater){var v=o.cheatertype==="index"?f.length:f,p=i.cheatertype==="index"?c.length:c;s=fAt(v,p,r.cheaterslope)}r._x=s=Hbe(s),r._y=l=Hbe(l),Gbe(s,f,c),Gbe(l,f,c),vAt(r),r.setScale();var d=Bbe(s),g=Bbe(l),m=.5*(d[1]-d[0]),y=.5*(d[1]+d[0]),_=.5*(g[1]-g[0]),S=.5*(g[1]+g[0]),M=1.3;return d=[y-m*M,y+m*M],g=[S-_*M,S+_*M],r._extremes[a._id]=mD.findExtremes(a,d,{padded:!0}),r._extremes[n._id]=mD.findExtremes(n,g,{padded:!0}),$be(r,"a","b"),$be(r,"b","a"),Ube(r,o),Ube(r,i),h.clipsegments=cAt(r._xctrl,r._yctrl,o,i),h.x=s,h.y=l,h.a=f,h.b=c,[h]},pAt={attributes:$G,supplyDefaults:NTt,plot:UTt,calc:dAt,animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:Ii,categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{description:["The data describing carpet axis layout is set in `y` and (optionally)","also `x`. If only `y` is present, `x` the plot is interpreted as a","cheater plot and is filled in using the `y` values.","`x` and `y` may either be 2D arrays matching with each dimension matching","that of `a` and `b`, or they may be 1D arrays with total length equal to","that of `a` and `b`."].join(" ")}},gAt=pAt,sv=Cl,mAt=ao,yAt=zn.hovertemplateAttrs,xAt=zn.texttemplateAttrs,Vbe=bo,b1=cn.extendFlat,Tm=sv.marker,ZM=sv.line,bAt=Tm.line,jbe={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},a:{valType:"data_array",editType:"calc",description:"Sets the a-axis coordinates."},b:{valType:"data_array",editType:"calc",description:"Sets the b-axis coordinates."},mode:b1({},sv.mode,{dflt:"markers"}),text:b1({},sv.text,{description:["Sets text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:xAt({editType:"plot"},{keys:["a","b","text"]}),hovertext:b1({},sv.hovertext,{description:["Sets hover text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:ZM.color,width:ZM.width,dash:ZM.dash,shape:b1({},ZM.shape,{values:["linear","spline"]}),smoothing:ZM.smoothing,editType:"calc"},connectgaps:sv.connectgaps,fill:b1({},sv.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:sv.fillcolor,marker:b1({symbol:Tm.symbol,opacity:Tm.opacity,maxdisplayed:Tm.maxdisplayed,size:Tm.size,sizeref:Tm.sizeref,sizemin:Tm.sizemin,sizemode:Tm.sizemode,line:b1({width:bAt.width,editType:"calc"},Vbe("marker.line")),gradient:Tm.gradient,editType:"calc"},Vbe("marker")),textfont:sv.textfont,textposition:sv.textposition,selected:sv.selected,unselected:sv.unselected,hoverinfo:b1({},mAt.hoverinfo,{flags:["a","b","text","name"]}),hoveron:sv.hoveron,hovertemplate:yAt()},qbe=bt.exports,_At=Hg,u3=Ro,wAt=Wd,TAt=n0,Ybe=WT,AAt=i0,SAt=Gg,MAt=jbe,kAt=function(t,r,a,n){function o(h,v){return qbe.coerce(t,r,MAt,h,v)}o("carpet"),r.xaxis="x",r.yaxis="y";var i=o("a"),s=o("b"),l=Math.min(i.length,s.length);if(!l){r.visible=!1;return}r._length=l,o("text"),o("texttemplate"),o("hovertext");var u=l<_At.PTS_LINESONLY?"lines+markers":"lines";o("mode",u),u3.hasLines(r)&&(TAt(t,r,a,n,o),Ybe(t,r,o),o("connectgaps")),u3.hasMarkers(r)&&wAt(t,r,a,n,o,{gradient:!0}),u3.hasText(r)&&AAt(t,r,n,o);var f=[];(u3.hasMarkers(r)||u3.hasText(r))&&(o("marker.maxdisplayed"),f.push("points")),o("fill"),r.fill!=="none"&&(SAt(t,r,a,o),u3.hasLines(r)||Ybe(t,r,o)),(r.fill==="tonext"||r.fill==="toself")&&f.push("fills");var c=o("hoveron",f.join("+")||"points");c!=="fills"&&o("hovertemplate"),qbe.coerceSelectionMarkerOpacity(r,o)},EAt=function(t,r){var a={},n=r._carpet,o=n.ab2ij([t.a,t.b]),i=Math.floor(o[0]),s=o[0]-i,l=Math.floor(o[1]),u=o[1]-l,f=n.evalxy([],i,l,s,u);return a.yLabel=f[1].toFixed(3),a},VG=function(e,t){for(var r=e._fullData.length,a,n=0;n<r;n++){var o=e._fullData[n];if(o.index!==t.index&&o.type==="carpet"&&(a||(a=o),o.carpet===t.carpet))return o}return a},Wbe=gn,CAt=Xd,LAt=Vg,PAt=Zd,IAt=Kd.calcMarkerSize,DAt=VG,RAt=function(t,r){var a=r._carpetTrace=DAt(t,r);if(!(!a||!a.visible||a.visible==="legendonly")){var n;r.xaxis=a.xaxis,r.yaxis=a.yaxis;var o=r._length,i=new Array(o),s,l,u=!1;for(n=0;n<o;n++)if(s=r.a[n],l=r.b[n],Wbe(s)&&Wbe(l)){var f=a.ab2xy(+s,+l,!0),c=a.isVisible(+s,+l);c||(u=!0),i[n]={x:f[0],y:f[1],a:s,b:l,vis:c}}else i[n]={x:!1,y:!1};return r._needsCull=u,i[0].carpet=a,i[0].trace=r,IAt(r,o),CAt(t,r),LAt(i,r),PAt(i,r),i}},zAt=JT,Xbe=rn.exports,FAt=xn.exports,OAt=function(t,r,a,n){var o,i,s,l=a[0][0].carpet,u={xaxis:Xbe.getFromId(t,l.xaxis||"x"),yaxis:Xbe.getFromId(t,l.yaxis||"y"),plot:r.plot};for(zAt(t,u,a,n),o=0;o<a.length;o++)i=a[o][0].trace,s=n.selectAll("g.trace"+i.uid+" .js-line"),FAt.setClipUrl(s,a[o][0].carpet._clipPathId,t)},NAt=eA,BAt=bt.exports.fillText,$At=function(t,r,a,n){var o=NAt(t,r,a,n);if(!o||o[0].index===!1)return;var i=o[0];if(i.index===void 0){var s=1-i.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return i.x0=Math.max(Math.min(i.x0,f),u),i.x1=Math.max(Math.min(i.x1,f),u),o}var c=i.cd[i.index];i.a=c.a,i.b=c.b,i.xLabelVal=void 0,i.yLabelVal=void 0;var h=i.trace,v=h._carpet,p=h._module.formatLabels(c,h);i.yLabel=p.yLabel,delete i.text;var d=[];function g(_,S){var M;_.labelprefix&&_.labelprefix.length>0?M=_.labelprefix.replace(/ = $/,""):M=_._hovertitle,d.push(M+": "+S.toFixed(3)+_.labelsuffix)}if(!h.hovertemplate){var m=c.hi||h.hoverinfo,y=m.split("+");y.indexOf("all")!==-1&&(y=["a","b","text"]),y.indexOf("a")!==-1&&g(v.aaxis,c.a),y.indexOf("b")!==-1&&g(v.baxis,c.b),d.push("y: "+i.yLabel),y.indexOf("text")!==-1&&BAt(c,h,d),i.extraText=d.join("<br>")}return o},UAt=function(t,r,a,n,o){var i=n[o];return t.a=i.a,t.b=i.b,t.y=i.y,t},HAt={attributes:jbe,supplyDefaults:kAt,colorbar:Pf,formatLabels:EAt,calc:RAt,plot:OAt,style:fh.style,styleOnSelect:fh.styleOnSelect,hoverPoints:$At,selectPoints:tA,eventData:UAt,moduleType:"trace",name:"scattercarpet",basePlotModule:Ii,categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{hrName:"scatter_carpet",description:["Plots a scatter trace on either the first carpet axis or the","carpet axis with a matching `carpet` attribute."].join(" ")}},GAt=HAt,td=T2,_1=jC,VAt=bo,jAt=cn.extendFlat,R0=_1.contours,Zbe=jAt({carpet:{valType:"string",editType:"calc",description:["The `carpet` of the carpet axes on which this contour trace lies"].join(" ")},z:td.z,a:td.x,a0:td.x0,da:td.dx,b:td.y,b0:td.y0,db:td.dy,text:td.text,hovertext:td.hovertext,transpose:td.transpose,atype:td.xtype,btype:td.ytype,fillcolor:_1.fillcolor,autocontour:_1.autocontour,ncontours:_1.ncontours,contours:{type:R0.type,start:R0.start,end:R0.end,size:R0.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:R0.showlines,showlabels:R0.showlabels,labelfont:R0.labelfont,labelformat:R0.labelformat,operation:R0.operation,value:R0.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:_1.line.color,width:_1.line.width,dash:_1.line.dash,smoothing:_1.line.smoothing,editType:"plot"},transforms:void 0},VAt("",{cLetter:"z",autoColorDflt:!1})),Kbe=bt.exports,qAt=DC,Jbe=Zbe,YAt=Bie,WAt=eO,XAt=tO,Qbe=function(t,r,a,n){function o(u,f){return Kbe.coerce(t,r,Jbe,u,f)}function i(u){return Kbe.coerce2(t,r,Jbe,u)}if(o("carpet"),t.a&&t.b){var s=qAt(t,r,o,n,"a","b");if(!s){r.visible=!1;return}o("text");var l=o("contours.type")==="constraint";l?YAt(t,r,o,n,a,{hasHover:!1}):(WAt(t,r,o,i),XAt(t,r,o,n,{hasHover:!1}))}else r._defaultColor=a,r._length=null},ZAt=ih,e_e=bt.exports,KAt=I7,JAt=D7,QAt=R7,eSt=z7,t_e=Fne,tSt=Qbe,rSt=VG,aSt=gie,nSt=function(t,r){var a=r._carpetTrace=rSt(t,r);if(!(!a||!a.visible||a.visible==="legendonly")){if(!r.a||!r.b){var n=t.data[a.index],o=t.data[r.index];o.a||(o.a=n.a),o.b||(o.b=n.b),tSt(o,r,r._defaultColor,t._fullLayout)}var i=iSt(t,r);return aSt(r,r._z),i}};function iSt(e,t){var r=t._carpetTrace,a=r.aaxis,n=r.baxis,o,i,s,l,u,f,c;a._minDtick=0,n._minDtick=0,e_e.isArray1D(t.z)&&KAt(t,a,n,"a","b",["z"]),o=t._a=t._a||t.a,l=t._b=t._b||t.b,o=o?a.makeCalcdata(t,"_a"):[],l=l?n.makeCalcdata(t,"_b"):[],i=t.a0||0,s=t.da||1,u=t.b0||0,f=t.db||1,c=t._z=JAt(t._z||t.z,t.transpose),t._emptypoints=eSt(c),QAt(c,t._emptypoints);var h=e_e.maxRowLength(c),v=t.xtype==="scaled"?"":o,p=t_e(t,v,i,s,h,a),d=t.ytype==="scaled"?"":l,g=t_e(t,d,u,f,c.length,n),m={a:p,b:g,z:c};return t.contours.type==="levels"&&t.contours.coloring!=="none"&&ZAt(e,t,{vals:c,containerStr:"",cLetter:"z"}),[m]}var oSt=bt.exports.isArrayOrTypedArray,sSt=function(e,t,r,a){var n,o,i,s,l,u,f,c,h,v,p,d,g,m=oSt(r)?"a":"b",y=m==="a"?e.aaxis:e.baxis,_=y.smoothing,S=m==="a"?e.a2i:e.b2j,M=m==="a"?r:a,w=m==="a"?a:r,A=m==="a"?t.a.length:t.b.length,k=m==="a"?t.b.length:t.a.length,T=Math.floor(m==="a"?e.b2j(w):e.a2i(w)),L=m==="a"?function(Q){return e.evalxy([],Q,T)}:function(Q){return e.evalxy([],T,Q)};_&&(i=Math.max(0,Math.min(k-2,T)),s=T-i,o=m==="a"?function(Q,Z){return e.dxydi([],Q,i,Z,s)}:function(Q,Z){return e.dxydj([],i,Q,s,Z)});var C=S(M[0]),I=S(M[1]),R=C<I?1:-1,B=(I-C)*1e-8,N=R>0?Math.floor:Math.ceil,D=R>0?Math.ceil:Math.floor,O=R>0?Math.min:Math.max,$=R>0?Math.max:Math.min,Y=N(C+B),X=D(I-B);f=L(C);var ee=[[f]];for(n=Y;n*R<X*R;n+=R)l=[],p=$(C,n),d=O(I,n+R),g=d-p,u=Math.max(0,Math.min(A-2,Math.floor(.5*(p+d)))),c=L(d),_&&(h=o(u,p-u),v=o(u,d-u),l.push([f[0]+h[0]/3*g,f[1]+h[1]/3*g]),l.push([c[0]-v[0]/3*g,c[1]-v[1]/3*g])),l.push(c),ee.push(l),f=c;return ee},yD=Ra.exports,xD=Tbe,r_e=Abe,KM=xn.exports,Am=bt.exports,lSt=bie,uSt=_ie,Sb=YC,bD=WC,fSt=Eie,cSt=kie,hSt=Lie,vSt=VG,a_e=sSt,dSt=function(t,r,a,n){var o=r.xaxis,i=r.yaxis;Am.makeTraceGroups(n,a,"contour").each(function(s){var l=yD.select(this),u=s[0],f=u.trace,c=f._carpetTrace=vSt(t,f),h=t.calcdata[c.index][0];if(!c.visible||c.visible==="legendonly")return;var v=u.a,p=u.b,d=f.contours,g=cSt(d,r,u),m=d.type==="constraint",y=d._operation,_=m?y==="="?"lines":"fill":d.coloring;function S(N){var D=c.ab2xy(N[0],N[1],!0);return[o.c2p(D[0]),i.c2p(D[1])]}var M=[[v[0],p[p.length-1]],[v[v.length-1],p[p.length-1]],[v[v.length-1],p[0]],[v[0],p[0]]];lSt(g);var w=(v[v.length-1]-v[0])*1e-8,A=(p[p.length-1]-p[0])*1e-8;uSt(g,w,A);var k=g;d.type==="constraint"&&(k=fSt(g,y)),pSt(g,S);var T,L,C,I,R=[];for(I=h.clipsegments.length-1;I>=0;I--)T=h.clipsegments[I],L=xD([],T.x,o.c2p),C=xD([],T.y,i.c2p),L.reverse(),C.reverse(),R.push(r_e(L,C,T.bicubic));var B="M"+R.join("L")+"Z";ySt(l,h.clipsegments,o,i,m,_),xSt(f,l,o,i,k,M,S,c,h,_,B),gSt(l,g,t,u,d,r,c),KM.setClipUrl(l,c._clipPathId,t)})};function pSt(e,t){var r,a,n,o,i,s,l,u,f;for(r=0;r<e.length;r++){for(o=e[r],i=o.pedgepaths=[],s=o.ppaths=[],a=0;a<o.edgepaths.length;a++){for(f=o.edgepaths[a],l=[],n=0;n<f.length;n++)l[n]=t(f[n]);i.push(l)}for(a=0;a<o.paths.length;a++){for(f=o.paths[a],u=[],n=0;n<f.length;n++)u[n]=t(f[n]);s.push(u)}}}function gSt(e,t,r,a,n,o,i){var s=Am.ensureSingle(e,"g","contourlines"),l=n.showlines!==!1,u=n.showlabels,f=l&&u,c=Sb.createLines(s,l||u,t),h=Sb.createLineClip(s,f,r,a.trace.uid),v=e.selectAll("g.contourlabels").data(u?[0]:[]);if(v.exit().remove(),v.enter().append("g").classed("contourlabels",!0),u){var p=o.xaxis,d=o.yaxis,g=p._length,m=d._length,y=[[[0,0],[g,0],[g,m],[0,m]]],_=[];Am.clearLocationCache();var S=Sb.labelFormatter(r,a),M=KM.tester.append("text").attr("data-notex",1).call(KM.font,n.labelfont),w={left:0,right:g,center:g/2,top:0,bottom:m,middle:m/2},A=Math.sqrt(g*g+m*m),k=bD.LABELDISTANCE*A/Math.max(1,t.length/bD.LABELINCREASE);c.each(function(T){var L=Sb.calcTextOpts(T.level,S,M,r);yD.select(this).selectAll("path").each(function(C){var I=this,R=Am.getVisibleSegment(I,w,L.height/2);if(!!R&&(mSt(I,C,T,R,i,L.height),!(R.len<(L.width+L.height)*bD.LABELMIN)))for(var B=Math.min(Math.ceil(R.len/k),bD.LABELMAX),N=0;N<B;N++){var D=Sb.findBestTextLocation(I,R,L,_,w);if(!D)break;Sb.addLabelData(D,L,_,y)}})}),M.remove(),Sb.drawLabels(v,_,r,h,f?y:null)}u&&!l&&c.remove()}function mSt(e,t,r,a,n,o){for(var i,s=0;s<r.pedgepaths.length;s++)t===r.pedgepaths[s]&&(i=r.edgepaths[s]);if(!i)return;var l=n.a[0],u=n.a[n.a.length-1],f=n.b[0],c=n.b[n.b.length-1];function h(m,y){var _=0,S,M=.1;return(Math.abs(m[0]-l)<M||Math.abs(m[0]-u)<M)&&(S=i_e(n.dxydb_rough(m[0],m[1],M)),_=Math.max(_,o*o_e(y,S)/2)),(Math.abs(m[1]-f)<M||Math.abs(m[1]-c)<M)&&(S=i_e(n.dxyda_rough(m[0],m[1],M)),_=Math.max(_,o*o_e(y,S)/2)),_}var v=n_e(e,0,1),p=n_e(e,a.total,a.total-1),d=h(i[0],v),g=a.total-h(i[i.length-1],p);a.min<d&&(a.min=d),a.max>g&&(a.max=g),a.len=a.max-a.min}function n_e(e,t,r){var a=e.getPointAtLength(t),n=e.getPointAtLength(r),o=n.x-a.x,i=n.y-a.y,s=Math.sqrt(o*o+i*i);return[o/s,i/s]}function i_e(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function o_e(e,t){var r=Math.abs(e[0]*t[0]+e[1]*t[1]),a=Math.sqrt(1-r*r);return a/r}function ySt(e,t,r,a,n,o){var i,s,l,u,f=Am.ensureSingle(e,"g","contourbg"),c=f.selectAll("path").data(o==="fill"&&!n?[0]:[]);c.enter().append("path"),c.exit().remove();var h=[];for(u=0;u<t.length;u++)i=t[u],s=xD([],i.x,r.c2p),l=xD([],i.y,a.c2p),h.push(r_e(s,l,i.bicubic));c.attr("d","M"+h.join("L")+"Z").style("stroke","none")}function xSt(e,t,r,a,n,o,i,s,l,u,f){var c=u==="fill";c&&hSt(n,e.contours);var h=Am.ensureSingle(t,"g","contourfill"),v=h.selectAll("path").data(c?n:[]);v.enter().append("path"),v.exit().remove(),v.each(function(p){var d=(p.prefixBoundary?f:"")+bSt(e,p,o,i,s,l,r,a);d?yD.select(this).attr("d",d).style("stroke","none"):yD.select(this).remove()})}function bSt(e,t,r,a,n,o,i,s){var l,u="",f=t.edgepaths.map(function(C,I){return I}),c=!0,h,v,p,d,g,m,y=Math.abs(r[0][0]-r[2][0])*1e-4,_=Math.abs(r[0][1]-r[2][1])*1e-4;function S(C){return Math.abs(C[1]-r[0][1])<_}function M(C){return Math.abs(C[1]-r[2][1])<_}function w(C){return Math.abs(C[0]-r[0][0])<y}function A(C){return Math.abs(C[0]-r[2][0])<y}function k(C,I){var R,B,N,D,O="";for(S(C)&&!A(C)||M(C)&&!w(C)?(D=n.aaxis,N=a_e(n,o,[C[0],I[0]],.5*(C[1]+I[1]))):(D=n.baxis,N=a_e(n,o,.5*(C[0]+I[0]),[C[1],I[1]])),R=1;R<N.length;R++)for(O+=D.smoothing?"C":"L",B=0;B<N[R].length;B++){var $=N[R][B];O+=[i.c2p($[0]),s.c2p($[1])]+" "}return O}for(l=0,h=null;f.length;){var T=t.edgepaths[l][0];for(h&&(u+=k(h,T)),m=KM.smoothopen(t.edgepaths[l].map(a),t.smoothing),u+=c?m:m.replace(/^M/,"L"),f.splice(f.indexOf(l),1),h=t.edgepaths[l][t.edgepaths[l].length-1],d=-1,p=0;p<4;p++){if(!h){Am.log("Missing end?",l,t);break}for(S(h)&&!A(h)?v=r[1]:w(h)?v=r[0]:M(h)?v=r[3]:A(h)&&(v=r[2]),g=0;g<t.edgepaths.length;g++){var L=t.edgepaths[g][0];Math.abs(h[0]-v[0])<y?Math.abs(h[0]-L[0])<y&&(L[1]-h[1])*(v[1]-L[1])>=0&&(v=L,d=g):Math.abs(h[1]-v[1])<_?Math.abs(h[1]-L[1])<_&&(L[0]-h[0])*(v[0]-L[0])>=0&&(v=L,d=g):Am.log("endpt to newendpt is not vert. or horz.",h,v,L)}if(d>=0)break;u+=k(h,v),h=v}if(d===t.edgepaths.length){Am.log("unclosed perimeter path");break}l=d,c=f.indexOf(l)===-1,c&&(l=f[0],u+=k(h,v)+"Z",h=null)}for(l=0;l<t.paths.length;l++)u+=KM.smoothclosed(t.paths[l].map(a),t.smoothing);return u}var _St={attributes:Zbe,supplyDefaults:Qbe,colorbar:lO,calc:nSt,plot:dSt,style:sO,moduleType:"trace",name:"contourcarpet",basePlotModule:Ii,categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{hrName:"contour_carpet",description:["Plots contours on either the first carpet axis or the","carpet axis with a matching `carpet` attribute. Data `z`","is interpreted as matching that of the corresponding carpet","axis."].join(" ")}},wSt=_St,_D=bt.exports.extendFlat,wD=Cl,s_e=Ss.axisHoverFormat,jG=Bd.dash,TSt=rT,l_e=RA,ASt=l_e.INCREASING.COLOR,SSt=l_e.DECREASING.COLOR,TD=wD.line;function u_e(e){return{line:{color:_D({},TD.color,{dflt:e}),width:TD.width,dash:jG,editType:"style"},editType:"style"}}var qG={xperiod:wD.xperiod,xperiod0:wD.xperiod0,xperiodalignment:wD.xperiodalignment,xhoverformat:s_e("x"),yhoverformat:s_e("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates.","If absent, linear coordinate will be generated."].join(" ")},open:{valType:"data_array",editType:"calc",description:"Sets the open values."},high:{valType:"data_array",editType:"calc",description:"Sets the high values."},low:{valType:"data_array",editType:"calc",description:"Sets the low values."},close:{valType:"data_array",editType:"calc",description:"Sets the close values."},line:{width:_D({},TD.width,{description:[TD.width,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),dash:_D({},jG,{description:[jG.description,"Note that this style setting can also be set per","direction via `increasing.line.dash` and","`decreasing.line.dash`."].join(" ")}),editType:"style"},increasing:u_e(ASt),decreasing:u_e(SSt),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets hover text elements associated with each sample point.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to","this trace's sample points."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc",description:["Sets the width of the open/close tick marks","relative to the *x* minimal interval."].join(" ")},hoverlabel:_D({},TSt.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style",description:["Show hover information (open, close, high, low) in","separate labels."].join(" ")}})},MSt=Pa,kSt=bt.exports,f_e=function(t,r,a,n){var o=a("x"),i=a("open"),s=a("high"),l=a("low"),u=a("close");a("hoverlabel.split");var f=MSt.getComponentMethod("calendars","handleTraceDefaults");if(f(t,r,["x"],n),!!(i&&s&&l&&u)){var c=Math.min(i.length,s.length,l.length,u.length);return o&&(c=Math.min(c,kSt.minRowLength(o))),r._length=c,c}},ESt=bt.exports,CSt=f_e,LSt=a0,PSt=qG,ISt=function(t,r,a,n){function o(s,l){return ESt.coerce(t,r,PSt,s,l)}var i=CSt(t,r,o,n);if(!i){r.visible=!1;return}LSt(t,r,n,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),o("line.dash"),c_e(t,r,o,"increasing"),c_e(t,r,o,"decreasing"),o("text"),o("hovertext"),o("tickwidth"),n._requestRangeslider[r.xaxis]=!0};function c_e(e,t,r,a){r(a+".line.color"),r(a+".line.width",t.line.width),r(a+".line.dash",t.line.dash)}var AD=bt.exports,SD=AD._,MD=rn.exports,DSt=o0,JM=Un.BADNUM;function RSt(e,t){var r=MD.getFromId(e,t.xaxis),a=MD.getFromId(e,t.yaxis),n=FSt(e,r,t),o=t._minDiff;t._minDiff=null;var i=t._origX;t._origX=null;var s=t._xcalc;t._xcalc=null;var l=h_e(e,t,i,s,a,zSt);return t._extremes[r._id]=MD.findExtremes(r,s,{vpad:o/2}),l.length?(AD.extendFlat(l[0].t,{wHover:o/2,tickLen:n}),l):[{t:{empty:!0}}]}function zSt(e,t,r,a){return{o:e,h:t,l:r,c:a}}function h_e(e,t,r,a,n,o){for(var i=n.makeCalcdata(t,"open"),s=n.makeCalcdata(t,"high"),l=n.makeCalcdata(t,"low"),u=n.makeCalcdata(t,"close"),f=Array.isArray(t.text),c=Array.isArray(t.hovertext),h=!0,v=null,p=!!t.xperiodalignment,d=[],g=0;g<a.length;g++){var m=a[g],y=i[g],_=s[g],S=l[g],M=u[g];if(m!==JM&&y!==JM&&_!==JM&&S!==JM&&M!==JM){M===y?v!==null&&M!==v&&(h=M>v):h=M>y,v=M;var w=o(y,_,S,M);w.pos=m,w.yc=(y+M)/2,w.i=g,w.dir=h?"increasing":"decreasing",w.x=w.pos,w.y=[S,_],p&&(w.orig_p=r[g]),f&&(w.tx=t.text[g]),c&&(w.htx=t.hovertext[g]),d.push(w)}else d.push({pos:m,empty:!0})}return t._extremes[n._id]=MD.findExtremes(n,AD.concat(l,s),{padded:!0}),d.length&&(d[0].t={labels:{open:SD(e,"open:")+" ",high:SD(e,"high:")+" ",low:SD(e,"low:")+" ",close:SD(e,"close:")+" "}}),d}function FSt(e,t,r){var a=r._minDiff;if(!a){var n=e._fullData,o=[];a=1/0;var i;for(i=0;i<n.length;i++){var s=n[i];if(s.type==="ohlc"&&s.visible===!0&&s.xaxis===t._id){o.push(s);var l=t.makeCalcdata(s,"x");s._origX=l;var u=DSt(r,t,"x",l).vals;s._xcalc=u;var f=AD.distinctVals(u).minDiff;f&&isFinite(f)&&(a=Math.min(a,f))}}for(a===1/0&&(a=1),i=0;i<o.length;i++)o[i]._minDiff=a}return a*r.tickwidth}var v_e={calc:RSt,calcCommon:h_e},OSt=Ra.exports,d_e=bt.exports,NSt=function(t,r,a,n){var o=r.yaxis,i=r.xaxis,s=!!i.rangebreaks;d_e.makeTraceGroups(n,a,"trace ohlc").each(function(l){var u=OSt.select(this),f=l[0],c=f.t,h=f.trace;if(h.visible!==!0||c.empty){u.remove();return}var v=c.tickLen,p=u.selectAll("path").data(d_e.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(d){if(d.empty)return"M0,0Z";var g=i.c2p(d.pos-v,!0),m=i.c2p(d.pos+v,!0),y=s?(g+m)/2:i.c2p(d.pos,!0),_=o.c2p(d.o,!0),S=o.c2p(d.h,!0),M=o.c2p(d.l,!0),w=o.c2p(d.c,!0);return"M"+g+","+_+"H"+y+"M"+y+","+S+"V"+M+"M"+m+","+w+"H"+y})})},YG=Ra.exports,BSt=xn.exports,$St=Oa.exports,USt=function(t,r,a){var n=a||YG.select(t).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var i=o[0].trace;YG.select(this).selectAll("path").each(function(s){if(!s.empty){var l=i[s.dir].line;YG.select(this).style("fill","none").call($St.stroke,l.color).call(BSt.dashLine,l.dash,l.width).style("opacity",i.selectedpoints&&!s.selected?.3:1)}})})},WG=rn.exports,HSt=bt.exports,kD=Rs,GSt=Oa.exports,VSt=bt.exports.fillText,p_e=RA,jSt={increasing:p_e.INCREASING.SYMBOL,decreasing:p_e.DECREASING.SYMBOL};function qSt(e,t,r,a){var n=e.cd,o=n[0].trace;return o.hoverlabel.split?m_e(e,t,r,a):y_e(e,t,r,a)}function g_e(e,t,r,a){var n=e.cd,o=e.xa,i=n[0].trace,s=n[0].t,l=i.type,u=l==="ohlc"?"l":"min",f=l==="ohlc"?"h":"max",c,h,v=s.bPos||0,p=function(L){return L.pos+v-t},d=s.bdPos||s.tickLen,g=s.wHover,m=Math.min(1,d/Math.abs(o.r2c(o.range[1])-o.r2c(o.range[0])));c=e.maxHoverDistance-m,h=e.maxSpikeDistance-m;function y(L){var C=p(L);return kD.inbox(C-g,C+g,c)}function _(L){var C=L[u],I=L[f];return C===I||kD.inbox(C-r,I-r,c)}function S(L){return(y(L)+_(L))/2}var M=kD.getDistanceFunction(a,y,_,S);if(kD.getClosest(n,M,e),e.index===!1)return null;var w=n[e.index];if(w.empty)return null;var A=w.dir,k=i[A],T=k.line.color;return GSt.opacity(T)&&k.line.width?e.color=T:e.color=k.fillcolor,e.x0=o.c2p(w.pos+v-d,!0),e.x1=o.c2p(w.pos+v+d,!0),e.xLabelVal=w.orig_p!==void 0?w.orig_p:w.pos,e.spikeDistance=S(w)*h/c,e.xSpike=o.c2p(w.pos,!0),e}function m_e(e,t,r,a){var n=e.cd,o=e.ya,i=n[0].trace,s=n[0].t,l=[],u=g_e(e,t,r,a);if(!u)return[];var f=u.index,c=n[f],h=c.hi||i.hoverinfo,v=h.split("+"),p=h==="all",d=p||v.indexOf("y")!==-1;if(!d)return[];for(var g=["high","open","close","low"],m={},y=0;y<g.length;y++){var _=g[y],S=i[_][u.index],M=o.c2p(S,!0),w;S in m?(w=m[S],w.yLabel+="<br>"+s.labels[_]+WG.hoverLabelText(o,S,i.yhoverformat)):(w=HSt.extendFlat({},u),w.y0=w.y1=M,w.yLabelVal=S,w.yLabel=s.labels[_]+WG.hoverLabelText(o,S,i.yhoverformat),w.name="",l.push(w),m[S]=w)}return l}function y_e(e,t,r,a){var n=e.cd,o=e.ya,i=n[0].trace,s=n[0].t,l=g_e(e,t,r,a);if(!l)return[];var u=l.index,f=n[u],c=l.index=f.i,h=f.dir;function v(S){return s.labels[S]+WG.hoverLabelText(o,i[S][c],i.yhoverformat)}var p=f.hi||i.hoverinfo,d=p.split("+"),g=p==="all",m=g||d.indexOf("y")!==-1,y=g||d.indexOf("text")!==-1,_=m?[v("open"),v("high"),v("low"),v("close")+"  "+jSt[h]]:[];return y&&VSt(f,i,_),l.extraText=_.join("<br>"),l.y0=l.y1=o.c2p(f.yc,!0),[l]}var x_e={hoverPoints:qSt,hoverSplit:m_e,hoverOnPoints:y_e},b_e=function(t,r){var a=t.cd,n=t.xaxis,o=t.yaxis,i=[],s,l=a[0].t.bPos||0;if(r===!1)for(s=0;s<a.length;s++)a[s].selected=0;else for(s=0;s<a.length;s++){var u=a[s];r.contains([n.c2p(u.pos+l),o.c2p(u.yc)],null,u.i,t)?(i.push({pointNumber:u.i,x:n.c2d(u.pos),y:o.c2d(u.yc)}),u.selected=1):u.selected=0}return i},YSt={moduleType:"trace",name:"ohlc",basePlotModule:Ii,categories:["cartesian","svg","showLegend"],meta:{description:["The ohlc (short for Open-High-Low-Close) is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The tip of the lines represent the `low` and `high` values and","the horizontal segments represent the `open` and `close` values.","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing items are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:qG,supplyDefaults:ISt,calc:v_e.calc,plot:NSt,style:USt,hoverPoints:x_e.hoverPoints,selectPoints:b_e},WSt=YSt,XG=bt.exports.extendFlat,__e=Ss.axisHoverFormat,lv=qG,f3=EC;function w_e(e){return{line:{color:XG({},f3.line.color,{dflt:e}),width:f3.line.width,editType:"style"},fillcolor:f3.fillcolor,editType:"style"}}var T_e={xperiod:lv.xperiod,xperiod0:lv.xperiod0,xperiodalignment:lv.xperiodalignment,xhoverformat:__e("x"),yhoverformat:__e("y"),x:lv.x,open:lv.open,high:lv.high,low:lv.low,close:lv.close,line:{width:XG({},f3.line.width,{description:[f3.line.width.description,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),editType:"style"},increasing:w_e(lv.increasing.line.color.dflt),decreasing:w_e(lv.decreasing.line.color.dflt),text:lv.text,hovertext:lv.hovertext,whiskerwidth:XG({},f3.whiskerwidth,{dflt:0}),hoverlabel:lv.hoverlabel},XSt=bt.exports,ZSt=Oa.exports,KSt=f_e,JSt=a0,QSt=T_e,eMt=function(t,r,a,n){function o(s,l){return XSt.coerce(t,r,QSt,s,l)}var i=KSt(t,r,o,n);if(!i){r.visible=!1;return}JSt(t,r,n,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),A_e(t,r,o,"increasing"),A_e(t,r,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),n._requestRangeslider[r.xaxis]=!0};function A_e(e,t,r,a){var n=r(a+".line.color");r(a+".line.width",t.line.width),r(a+".fillcolor",ZSt.addOpacity(n,.5))}var S_e=bt.exports,M_e=rn.exports,tMt=o0,rMt=v_e.calcCommon,aMt=function(e,t){var r=e._fullLayout,a=M_e.getFromId(e,t.xaxis),n=M_e.getFromId(e,t.yaxis),o=a.makeCalcdata(t,"x"),i=tMt(t,a,"x",o).vals,s=rMt(e,t,o,i,n,nMt);return s.length?(S_e.extendFlat(s[0].t,{num:r._numBoxes,dPos:S_e.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,s):[{t:{empty:!0}}]};function nMt(e,t,r,a){return{min:r,q1:Math.min(e,a),med:a,q3:Math.max(e,a),max:t}}var iMt={moduleType:"trace",name:"candlestick",basePlotModule:Ii,categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{description:["The candlestick is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The boxes represent the spread between the `open` and `close` values and","the lines represent the spread between the `low` and `high` values","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing candles are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:T_e,layoutAttributes:CC,supplyLayoutDefaults:x7.supplyLayoutDefaults,crossTraceCalc:w7.crossTraceCalc,supplyDefaults:eMt,calc:aMt,plot:T7.plot,layerName:"boxlayer",style:k7.style,hoverPoints:x_e.hoverPoints,selectPoints:b_e},oMt=iMt,QM=bt.exports,sMt=Og,ED=QM.deg2rad,ZG=QM.rad2deg,k_e=function(t,r,a){switch(sMt(t,a),t._id){case"x":case"radialaxis":lMt(t,r);break;case"angularaxis":cMt(t,r);break}};function lMt(e,t){var r=t._subplot;e.setGeometry=function(){var a=e._rl[0],n=e._rl[1],o=r.innerRadius,i=(r.radius-o)/(n-a),s=o/i,l=a>n?function(u){return u<=0}:function(u){return u>=0};e.c2g=function(u){var f=e.c2l(u)-a;return(l(f)?f:0)+s},e.g2c=function(u){return e.l2c(u+a-s)},e.g2p=function(u){return u*i},e.c2p=function(u){return e.g2p(e.c2g(u))}}}function uMt(e,t){return t==="degrees"?ED(e):e}function fMt(e,t){return t==="degrees"?ZG(e):e}function cMt(e,t){var r=e.type;if(r==="linear"){var a=e.d2c,n=e.c2d;e.d2c=function(o,i){return uMt(a(o),i)},e.c2d=function(o,i){return n(fMt(o,i))}}e.makeCalcdata=function(o,i){var s=o[i],l=o._length,u,f,c=function(g){return e.d2c(g,o.thetaunit)};if(s){if(QM.isTypedArray(s)&&r==="linear"){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}for(u=new Array(l),f=0;f<l;f++)u[f]=c(s[f])}else{var h=i+"0",v="d"+i,p=h in o?c(o[h]):0,d=o[v]?c(o[v]):(e.period||2*Math.PI)/l;for(u=new Array(l),f=0;f<l;f++)u[f]=p+f*d}return u},e.setGeometry=function(){var o=t.sector,i=o.map(ED),s={clockwise:-1,counterclockwise:1}[e.direction],l=ED(e.rotation),u=function(m){return s*m+l},f=function(m){return(m-l)/s},c,h,v,p;switch(r){case"linear":h=c=QM.identity,p=ED,v=ZG,e.range=QM.isFullCircle(i)?[o[0],o[0]+360]:i.map(f).map(ZG);break;case"category":var d=e._categories.length,g=e.period?Math.max(e.period,d):d;g===0&&(g=1),h=p=function(m){return m*2*Math.PI/g},c=v=function(m){return m*g/Math.PI/2},e.range=[0,g];break}e.c2g=function(m){return u(h(m))},e.g2c=function(m){return c(f(m))},e.t2g=function(m){return u(p(m))},e.g2t=function(m){return v(f(m))}}}var KG={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20},Mb=bt.exports,E_e=FT.exports.tester,JG=Mb.findIndexOfMin,C_e=Mb.isAngleInsideSector,hMt=Mb.angleDelta,L_e=Mb.angleDist;function vMt(e,t,r,a,n){if(!C_e(t,a))return!1;var o,i;r[0]<r[1]?(o=r[0],i=r[1]):(o=r[1],i=r[0]);var s=E_e(c3(o,a[0],a[1],n)),l=E_e(c3(i,a[0],a[1],n)),u=[e*Math.cos(t),e*Math.sin(t)];return l.contains(u)&&!s.contains(u)}function P_e(e,t,r,a){var n,o,i=a[0],s=a[1],l=CD(Math.sin(t)-Math.sin(e)),u=CD(Math.cos(t)-Math.cos(e)),f=Math.tan(r),c=CD(1/f),h=l/u,v=s-h*i;return c?l&&u?(n=v/(f-h),o=f*n):u?(n=s*c,o=s):(n=i,o=i*f):l&&u?(n=0,o=v):u?(n=0,o=s):n=o=NaN,[n,o]}function dMt(e,t,r,a){var n=-t*r,o=t*t+1,i=2*(t*n-r),s=n*n+r*r-e*e,l=Math.sqrt(i*i-4*o*s),u=(-i+l)/(2*o),f=(-i-l)/(2*o);return[[u,t*u+n+a],[f,t*f+n+a]]}function pMt(e,t){var r=t.length,a=new Array(r+1),n;for(n=0;n<r;n++){var o=t[n];a[n]=[e*Math.cos(o),e*Math.sin(o)]}return a[n]=a[0].slice(),a}function gMt(e,t,r,a){var n=a.length,o=[],i,s;function l(m){return[e*Math.cos(m),e*Math.sin(m)]}function u(m,y,_){return P_e(m,y,_,l(m))}function f(m){return Mb.mod(m,n)}function c(m){return C_e(m,[t,r])}var h=JG(a,function(m){return c(m)?L_e(m,t):1/0}),v=u(a[h],a[f(h-1)],t);for(o.push(v),i=h,s=0;s<n;i++,s++){var p=a[f(i)];if(!c(p))break;o.push(l(p))}var d=JG(a,function(m){return c(m)?L_e(m,r):1/0}),g=u(a[d],a[f(d+1)],r);return o.push(g),o.push([0,0]),o.push(o[0].slice()),o}function c3(e,t,r,a){return Mb.isFullCircle([t,r])?pMt(e,a):gMt(e,t,r,a)}function mMt(e,t,r,a){for(var n=1/0,o=1/0,i=c3(e,t,r,a),s=0;s<i.length;s++){var l=i[s];n=Math.min(n,l[0]),o=Math.min(o,-l[1])}return[n,o]}function yMt(e,t){var r=function(o){var i=hMt(o,e);return i>0?i:1/0},a=JG(t,r),n=Mb.mod(a+1,t.length);return[t[a],t[n]]}function CD(e){return Math.abs(e)>1e-10?e:0}function QG(e,t,r){t=t||0,r=r||0;for(var a=e.length,n=new Array(a),o=0;o<a;o++){var i=e[o];n[o]=[t+i[0],r-i[1]]}return n}function xMt(e,t,r,a,n,o){var i=c3(e,t,r,a);return"M"+QG(i,n,o).join("L")}function bMt(e,t,r,a,n,o,i){var s,l;e<t?(s=e,l=t):(s=t,l=e);var u=QG(c3(s,r,a,n),o,i),f=QG(c3(l,r,a,n),o,i);return"M"+f.reverse().join("L")+"M"+u.join("L")}var eV={isPtInsidePolygon:vMt,findPolygonOffset:mMt,findEnclosingVertexAngles:yMt,findIntersectionXY:P_e,findXYatLength:dMt,clampTiny:CD,pathPolygon:xMt,pathPolygonAnnulus:bMt};function I_e(e){return e<0?-1:e>0?1:0}function h3(e){var t=e[0],r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var a=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/a,2*r/a]}function v3(e,t){var r=t[0],a=t[1];return[r*e.radius+e.cx,-a*e.radius+e.cy]}function D_e(e,t){return t*e.radius}function _Mt(e,t,r,a){var n=v3(e,h3([r,t])),o=n[0],i=n[1],s=v3(e,h3([a,t])),l=s[0],u=s[1];if(t===0)return["M"+o+","+i,"L"+l+","+u].join(" ");var f=D_e(e,1/Math.abs(t));return["M"+o+","+i,"A"+f+","+f+" 0 0,"+(t<0?1:0)+" "+l+","+u].join(" ")}function wMt(e,t,r,a){var n=D_e(e,1/(t+1)),o=v3(e,h3([t,r])),i=o[0],s=o[1],l=v3(e,h3([t,a])),u=l[0],f=l[1];if(I_e(r)!==I_e(a)){var c=v3(e,h3([t,0])),h=c[0],v=c[1];return["M"+i+","+s,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+h+","+v,"A"+n+","+n+" 0 0,"+(a<0?0:1)+u+","+f].join(" ")}return["M"+i+","+s,"A"+n+","+n+" 0 0,"+(a<r?0:1)+" "+u+","+f].join(" ")}var R_e={smith:h3,reactanceArc:_Mt,resistanceArc:wMt,smithTransform:v3},kb=Ra.exports,TMt=Hl.exports,Eb=Pa,Yo=bt.exports,z0=Yo.strRotate,Wl=Yo.strTranslate,tV=Oa.exports,ek=xn.exports,AMt=Eo.exports,xc=rn.exports,SMt=Og,MMt=k_e,kMt=Hd.doAutoRange,Sm=wQ,LD=kf.exports,z_e=Rs,EMt=H_,CMt=lu.prepSelect,LMt=lu.selectOnClick,rV=lu.clearSelect,F_e=Zp,O_e=wE,N_e=ET.redrawReglTraces,PMt=ou.MID_SHIFT,w1=KG,Mm=eV,PD=R_e,ID=PD.smith,IMt=PD.reactanceArc,DMt=PD.resistanceArc,DD=PD.smithTransform,RMt=Yo._,B_e=Yo.mod,T1=Yo.deg2rad,Cb=Yo.rad2deg;function $_e(e,t,r){this.isSmith=r||!1,this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var a=e._fullLayout,n="clip"+a._uid+t;this.clipIds.forTraces=n+"-for-traces",this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=a["_"+(r?"smith":"polar")+"layer"].append("g").attr("class",t),this.getHole=function(o){return this.isSmith?0:o.hole},this.getSector=function(o){return this.isSmith?[0,360]:o.sector},this.getRadial=function(o){return this.isSmith?o.realaxis:o.radialaxis},this.getAngular=function(o){return this.isSmith?o.imaginaryaxis:o.angularaxis},r||(this.radialTickLayout=null,this.angularTickLayout=null)}var pu=$_e.prototype,U_e=function(t,r,a){return new $_e(t,r,a)};pu.plot=function(e,t){for(var r=this,a=t[r.id],n=!1,o=0;o<e.length;o++){var i=e[o][0].trace;if(i.cliponaxis===!1){n=!0;break}}r._hasClipOnAxisFalse=n,r.updateLayers(t,a),r.updateLayout(t,a),AMt.generalUpdatePerTraceModule(r.gd,r,e,a),r.updateFx(t,a),r.isSmith&&(delete a.realaxis.range,delete a.imaginaryaxis.range)};pu.updateLayers=function(e,t){var r=this,a=r.isSmith,n=r.layers,o=r.getRadial(t),i=r.getAngular(t),s=w1.layerNames,l=s.indexOf("frontplot"),u=s.slice(0,l),f=i.layer==="below traces",c=o.layer==="below traces";f&&u.push("angular-line"),c&&u.push("radial-line"),f&&u.push("angular-axis"),c&&u.push("radial-axis"),u.push("frontplot"),f||u.push("angular-line"),c||u.push("radial-line"),f||u.push("angular-axis"),c||u.push("radial-axis");var h=(a?"smith":"polar")+"sublayer",v=r.framework.selectAll("."+h).data(u,String);v.enter().append("g").attr("class",function(p){return h+" "+p}).each(function(p){var d=n[p]=kb.select(this);switch(p){case"frontplot":a||d.append("g").classed("barlayer",!0),d.append("g").classed("scatterlayer",!0);break;case"backplot":d.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=d.append("path");break;case"radial-grid":d.style("fill","none");break;case"angular-grid":d.style("fill","none");break;case"radial-line":d.append("line").style("fill","none");break;case"angular-line":d.append("path").style("fill","none");break}}),v.order()};pu.updateLayout=function(e,t){var r=this,a=r.layers,n=e._size,o=r.getRadial(t),i=r.getAngular(t),s=t.domain.x,l=t.domain.y;r.xOffset=n.l+n.w*s[0],r.yOffset=n.t+n.h*(1-l[1]);var u=r.xLength=n.w*(s[1]-s[0]),f=r.yLength=n.h*(l[1]-l[0]),c=r.getSector(t);r.sectorInRad=c.map(T1);var h=r.sectorBBox=zMt(c),v=h[2]-h[0],p=h[3]-h[1],d=f/u,g=Math.abs(p/v),m,y,_,S,M;d>g?(m=u,y=u*g,M=(f-y)/n.h/2,_=[s[0],s[1]],S=[l[0]+M,l[1]-M]):(m=f/g,y=f,M=(u-m)/n.w/2,_=[s[0]+M,s[1]-M],S=[l[0],l[1]]),r.xLength2=m,r.yLength2=y,r.xDomain2=_,r.yDomain2=S;var w=r.xOffset2=n.l+n.w*_[0],A=r.yOffset2=n.t+n.h*(1-S[1]),k=r.radius=m/v,T=r.innerRadius=r.getHole(t)*k,L=r.cx=w-k*h[0],C=r.cy=A+k*h[3],I=r.cxx=L-w,R=r.cyy=C-A,B=o.side,N;B==="counterclockwise"?(N=B,B="top"):B==="clockwise"&&(N=B,B="bottom"),r.radialAxis=r.mockAxis(e,t,o,{_id:"x",side:B,_trueSide:N,domain:[T/n.w,k/n.w]}),r.angularAxis=r.mockAxis(e,t,i,{side:"right",domain:[0,Math.PI],autorange:!1}),r.doAutoRange(e,t),r.updateAngularAxis(e,t),r.updateRadialAxis(e,t),r.updateRadialAxisTitle(e,t),r.xaxis=r.mockCartesianAxis(e,t,{_id:"x",domain:_}),r.yaxis=r.mockCartesianAxis(e,t,{_id:"y",domain:S});var D=r.pathSubplot();r.clipPaths.forTraces.select("path").attr("d",D).attr("transform",Wl(I,R)),a.frontplot.attr("transform",Wl(w,A)).call(ek.setClipUrl,r._hasClipOnAxisFalse?null:r.clipIds.forTraces,r.gd),a.bg.attr("d",D).attr("transform",Wl(L,C)).call(tV.fill,t.bgcolor)};pu.mockAxis=function(e,t,r,a){var n=Yo.extendFlat({},r,a);return MMt(n,t,e),n};pu.mockCartesianAxis=function(e,t,r){var a=this,n=a.isSmith,o=r._id,i=Yo.extendFlat({type:"linear"},r);SMt(i,e);var s={x:[0,2],y:[1,3]};return i.setRange=function(){var l=a.sectorBBox,u=s[o],f=a.radialAxis._rl,c=(f[1]-f[0])/(1-a.getHole(t));i.range=[l[u[0]]*c,l[u[1]]*c]},i.isPtWithinRange=o==="x"&&!n?function(l){return a.isPtInside(l)}:function(){return!0},i.setRange(),i.setScale(),i};pu.doAutoRange=function(e,t){var r=this,a=r.gd,n=r.radialAxis,o=r.getRadial(t);kMt(a,n);var i=n.range;o.range=i.slice(),o._input.range=i.slice(),n._rl=[n.r2l(i[0],null,"gregorian"),n.r2l(i[1],null,"gregorian")]};pu.updateRadialAxis=function(e,t){var r=this,a=r.gd,n=r.layers,o=r.radius,i=r.innerRadius,s=r.cx,l=r.cy,u=r.getRadial(t),f=B_e(r.getSector(t)[0],360),c=r.radialAxis,h=i<o,v=r.isSmith;v||(r.fillViewInitialKey("radialaxis.angle",u.angle),r.fillViewInitialKey("radialaxis.range",c.range.slice()),c.setGeometry()),c.tickangle==="auto"&&f>90&&f<=270&&(c.tickangle=180);var p=v?function(k){var T=DD(r,ID([k.x,0]));return Wl(T[0]-s,T[1]-l)}:function(k){return Wl(c.l2p(k.x)+i,0)},d=v?function(k){return DMt(r,k.x,-1/0,1/0)}:function(k){return r.pathArc(c.r2p(k.x)+i)},g=H_e(u);if(r.radialTickLayout!==g&&(n["radial-axis"].selectAll(".xtick").remove(),r.radialTickLayout=g),h){c.setScale();var m=0,y=v?(c.tickvals||[]).filter(function(k){return k>=0}).map(function(k){return xc.tickText(c,k,!0,!1)}):xc.calcTicks(c),_=v?y:xc.clipEnds(c,y),S=xc.getTickSigns(c)[2];v&&((c.ticks==="top"&&c.side==="bottom"||c.ticks==="bottom"&&c.side==="top")&&(S=-S),c.ticks==="top"&&c.side==="top"&&(m=-c.ticklen),c.ticks==="bottom"&&c.side==="bottom"&&(m=c.ticklen)),xc.drawTicks(a,c,{vals:y,layer:n["radial-axis"],path:xc.makeTickPath(c,0,S),transFn:p,crisp:!1}),xc.drawGrid(a,c,{vals:_,layer:n["radial-grid"],path:d,transFn:Yo.noop,crisp:!1}),xc.drawLabels(a,c,{vals:y,layer:n["radial-axis"],transFn:p,labelFns:xc.makeLabelFns(c,m)})}var M=r.radialAxisAngle=r.vangles?Cb(G_e(T1(u.angle),r.vangles)):u.angle,w=Wl(s,l),A=w+z0(-M);tk(n["radial-axis"],h&&(u.showticklabels||u.ticks),{transform:A}),tk(n["radial-grid"],h&&u.showgrid,{transform:v?"":w}),tk(n["radial-line"].select("line"),h&&u.showline,{x1:v?-o:i,y1:0,x2:o,y2:0,transform:A}).attr("stroke-width",u.linewidth).call(tV.stroke,u.linecolor)};pu.updateRadialAxisTitle=function(e,t,r){if(!this.isSmith){var a=this,n=a.gd,o=a.radius,i=a.cx,s=a.cy,l=a.getRadial(t),u=a.id+"title",f=0;if(l.title){var c=ek.bBox(a.layers["radial-axis"].node()).height,h=l.title.font.size,v=l.side;f=v==="top"?h:v==="counterclockwise"?-(c+h*.4):c+h*.8}var p=r!==void 0?r:a.radialAxisAngle,d=T1(p),g=Math.cos(d),m=Math.sin(d),y=i+o/2*g+f*m,_=s-o/2*m+f*g;a.layers["radial-axis-title"]=EMt.draw(n,u,{propContainer:l,propName:a.id+".radialaxis.title",placeholder:RMt(n,"Click to enter radial axis title"),attributes:{x:y,y:_,"text-anchor":"middle"},transform:{rotate:-p}})}};pu.updateAngularAxis=function(e,t){var r=this,a=r.gd,n=r.layers,o=r.radius,i=r.innerRadius,s=r.cx,l=r.cy,u=r.getAngular(t),f=r.angularAxis,c=r.isSmith;c||(r.fillViewInitialKey("angularaxis.rotation",u.rotation),f.setGeometry(),f.setScale());var h=c?function(T){var L=DD(r,ID([0,T.x]));return Math.atan2(L[0]-s,L[1]-l)-Math.PI/2}:function(T){return f.t2g(T.x)};f.type==="linear"&&f.thetaunit==="radians"&&(f.tick0=Cb(f.tick0),f.dtick=Cb(f.dtick));var v=function(T){return Wl(s+o*Math.cos(T),l-o*Math.sin(T))},p=c?function(T){var L=DD(r,ID([0,T.x]));return Wl(L[0],L[1])}:function(T){return v(h(T))},d=c?function(T){var L=DD(r,ID([0,T.x])),C=Math.atan2(L[0]-s,L[1]-l)-Math.PI/2;return Wl(L[0],L[1])+z0(-Cb(C))}:function(T){var L=h(T);return v(L)+z0(-Cb(L))},g=c?function(T){return IMt(r,T.x,0,1/0)}:function(T){var L=h(T),C=Math.cos(L),I=Math.sin(L);return"M"+[s+i*C,l-i*I]+"L"+[s+o*C,l-o*I]},m=xc.makeLabelFns(f,0),y=m.labelStandoff,_={};_.xFn=function(T){var L=h(T);return Math.cos(L)*y},_.yFn=function(T){var L=h(T),C=Math.sin(L)>0?.2:1;return-Math.sin(L)*(y+T.fontSize*C)+Math.abs(Math.cos(L))*(T.fontSize*PMt)},_.anchorFn=function(T){var L=h(T),C=Math.cos(L);return Math.abs(C)<.1?"middle":C>0?"start":"end"},_.heightFn=function(T,L,C){var I=h(T);return-.5*(1+Math.sin(I))*C};var S=H_e(u);r.angularTickLayout!==S&&(n["angular-axis"].selectAll("."+f._id+"tick").remove(),r.angularTickLayout=S);var M=c?[1/0].concat(f.tickvals||[]).map(function(T){return xc.tickText(f,T,!0,!1)}):xc.calcTicks(f);c&&(M[0].text="\u221E",M[0].fontSize*=1.75);var w;if(t.gridshape==="linear"?(w=M.map(h),Yo.angleDelta(w[0],w[1])<0&&(w=w.slice().reverse())):w=null,r.vangles=w,f.type==="category"&&(M=M.filter(function(T){return Yo.isAngleInsideSector(h(T),r.sectorInRad)})),f.visible){var A=f.ticks==="inside"?-1:1,k=(f.linewidth||1)/2;xc.drawTicks(a,f,{vals:M,layer:n["angular-axis"],path:"M"+A*k+",0h"+A*f.ticklen,transFn:d,crisp:!1}),xc.drawGrid(a,f,{vals:M,layer:n["angular-grid"],path:g,transFn:Yo.noop,crisp:!1}),xc.drawLabels(a,f,{vals:M,layer:n["angular-axis"],repositionOnUpdate:!0,transFn:p,labelFns:_})}tk(n["angular-line"].select("path"),u.showline,{d:r.pathSubplot(),transform:Wl(s,l)}).attr("stroke-width",u.linewidth).call(tV.stroke,u.linecolor)};pu.updateFx=function(e,t){if(!this.gd._context.staticPlot){var r=!this.isSmith;r&&(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1)),this.updateHoverAndMainDrag(e)}};pu.updateHoverAndMainDrag=function(e){var t=this,r=t.isSmith,a=t.gd,n=t.layers,o=e._zoomlayer,i=w1.MINZOOM,s=w1.OFFEDGE,l=t.radius,u=t.innerRadius,f=t.cx,c=t.cy,h=t.cxx,v=t.cyy,p=t.sectorInRad,d=t.vangles,g=t.radialAxis,m=Mm.clampTiny,y=Mm.findXYatLength,_=Mm.findEnclosingVertexAngles,S=w1.cornerHalfWidth,M=w1.cornerLen/2,w,A,k=Sm.makeDragger(n,"path","maindrag","crosshair");kb.select(k).attr("d",t.pathSubplot()).attr("transform",Wl(f,c)),k.onmousemove=function(se){z_e.hover(a,se,t.id),a._fullLayout._lasthover=k,a._fullLayout._hoversubplot=t.id},k.onmouseout=function(se){a._dragging||LD.unhover(a,se)};var T={element:k,gd:a,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]},L,C,I,R,B,N,D,O,$;function Y(se,de){return Math.sqrt(se*se+de*de)}function X(se,de){return Y(se-h,de-v)}function ee(se,de){return Math.atan2(v-de,se-h)}function Q(se,de){return[se*Math.cos(de),se*Math.sin(-de)]}function Z(se,de){if(se===0)return t.pathSector(2*S);var Me=M/se,Ie=de-Me,Ee=de+Me,qe=Math.max(0,Math.min(se,l)),be=qe-S,oe=qe+S;return"M"+Q(be,Ie)+"A"+[be,be]+" 0,0,0 "+Q(be,Ee)+"L"+Q(oe,Ee)+"A"+[oe,oe]+" 0,0,1 "+Q(oe,Ie)+"Z"}function q(se,de,Me){if(se===0)return t.pathSector(2*S);var Ie=Q(se,de),Ee=Q(se,Me),qe=m((Ie[0]+Ee[0])/2),be=m((Ie[1]+Ee[1])/2),oe,ce;if(qe&&be){var ue=be/qe,Re=-1/ue,Xe=y(S,ue,qe,be);oe=y(M,Re,Xe[0][0],Xe[0][1]),ce=y(M,Re,Xe[1][0],Xe[1][1])}else{var Ke,vt;be?(Ke=M,vt=S):(Ke=S,vt=M),oe=[[qe-Ke,be-vt],[qe+Ke,be-vt]],ce=[[qe-Ke,be+vt],[qe+Ke,be+vt]]}return"M"+oe.join("L")+"L"+ce.reverse().join("L")+"Z"}function ae(){I=null,R=null,B=t.pathSubplot(),N=!1;var se=a._fullLayout[t.id];D=TMt(se.bgcolor).getLuminance(),O=Sm.makeZoombox(o,D,f,c,B),O.attr("fill-rule","evenodd"),$=Sm.makeCorners(o,f,c),rV(a)}function ie(se,de){return de=Math.max(Math.min(de,l),u),se<s?se=0:l-se<s?se=l:de<s?de=0:l-de<s&&(de=l),Math.abs(de-se)>i?(se<de?(I=se,R=de):(I=de,R=se),!0):(I=null,R=null,!1)}function we(se,de){se=se||B,de=de||"M0,0Z",O.attr("d",se),$.attr("d",de),Sm.transitionZoombox(O,$,N,D),N=!0;var Me={};ye(Me),a.emit("plotly_relayouting",Me)}function Te(se,de){se=se*w,de=de*A;var Me=L+se,Ie=C+de,Ee=X(L,C),qe=Math.min(X(Me,Ie),l),be=ee(L,C),oe,ce;ie(Ee,qe)&&(oe=B+t.pathSector(R),I&&(oe+=t.pathSector(I)),ce=Z(I,be)+Z(R,be)),we(oe,ce)}function he(se,de,Me,Ie){var Ee=Mm.findIntersectionXY(Me,Ie,Me,[se-h,v-de]);return Y(Ee[0],Ee[1])}function xe(se,de){var Me=L+se,Ie=C+de,Ee=ee(L,C),qe=ee(Me,Ie),be=_(Ee,d),oe=_(qe,d),ce=he(L,C,be[0],be[1]),ue=Math.min(he(Me,Ie,oe[0],oe[1]),l),Re,Xe;ie(ce,ue)&&(Re=B+t.pathSector(R),I&&(Re+=t.pathSector(I)),Xe=[q(I,be[0],be[1]),q(R,be[0],be[1])].join(" ")),we(Re,Xe)}function Se(){if(Sm.removeZoombox(a),!(I===null||R===null)){var se={};ye(se),Sm.showDoubleClickNotifier(a),Eb.call("_guiRelayout",a,se)}}function ye(se){var de=g._rl,Me=(de[1]-de[0])/(1-u/l)/l,Ie=[de[0]+(I-u)*Me,de[0]+(R-u)*Me];se[t.id+".radialaxis.range"]=Ie}function re(se,de){var Me=a._fullLayout.clickmode;if(Sm.removeZoombox(a),se===2){var Ie={};for(var Ee in t.viewInitial)Ie[t.id+"."+Ee]=t.viewInitial[Ee];a.emit("plotly_doubleclick",null),Eb.call("_guiRelayout",a,Ie)}Me.indexOf("select")>-1&&se===1&&LMt(de,a,[t.xaxis],[t.yaxis],t.id,T),Me.indexOf("event")>-1&&z_e.click(a,de,t.id)}T.prepFn=function(se,de,Me){var Ie=a._fullLayout.dragmode,Ee=k.getBoundingClientRect();a._fullLayout._calcInverseTransform(a);var qe=a._fullLayout._invTransform;w=a._fullLayout._invScaleX,A=a._fullLayout._invScaleY;var be=Yo.apply3DTransform(qe)(de-Ee.left,Me-Ee.top);if(L=be[0],C=be[1],d){var oe=Mm.findPolygonOffset(l,p[0],p[1],d);L+=h+oe[0],C+=v+oe[1]}switch(Ie){case"zoom":T.clickFn=re,r||(d?T.moveFn=xe:T.moveFn=Te,T.doneFn=Se,ae());break;case"select":case"lasso":CMt(se,de,Me,T,Ie);break}},LD.init(T)};pu.updateRadialDrag=function(e,t,r){var a=this,n=a.gd,o=a.layers,i=a.radius,s=a.innerRadius,l=a.cx,u=a.cy,f=a.radialAxis,c=w1.radialDragBoxSize,h=c/2;if(!f.visible)return;var v=T1(a.radialAxisAngle),p=f._rl,d=p[0],g=p[1],m=p[r],y=.75*(p[1]-p[0])/(1-a.getHole(t))/i,_,S,M;r?(_=l+(i+h)*Math.cos(v),S=u-(i+h)*Math.sin(v),M="radialdrag"):(_=l+(s-h)*Math.cos(v),S=u-(s-h)*Math.sin(v),M="radialdrag-inner");var w=Sm.makeRectDragger(o,M,"crosshair",-h,-h,c,c),A={element:w,gd:n};tk(kb.select(w),f.visible&&s<i,{transform:Wl(_,S)});var k,T,L;function C(D,O){if(k)k(D,O);else{var $=[D,-O],Y=[Math.cos(v),Math.sin(v)],X=Math.abs(Yo.dot($,Y)/Math.sqrt(Yo.dot($,$)));isNaN(X)||(k=X<.5?B:N)}var ee={};I(ee),n.emit("plotly_relayouting",ee)}function I(D){T!==null?D[a.id+".radialaxis.angle"]=T:L!==null&&(D[a.id+".radialaxis.range["+r+"]"]=L)}function R(){T!==null?Eb.call("_guiRelayout",n,a.id+".radialaxis.angle",T):L!==null&&Eb.call("_guiRelayout",n,a.id+".radialaxis.range["+r+"]",L)}function B(D,O){if(r!==0){var $=_+D,Y=S+O;T=Math.atan2(u-Y,$-l),a.vangles&&(T=G_e(T,a.vangles)),T=Cb(T);var X=Wl(l,u)+z0(-T);o["radial-axis"].attr("transform",X),o["radial-line"].select("line").attr("transform",X);var ee=a.gd._fullLayout,Q=ee[a.id];a.updateRadialAxisTitle(ee,Q,T)}}function N(D,O){var $=Yo.dot([D,-O],[Math.cos(v),Math.sin(v)]);if(L=m-y*$,y>0!=(r?L>d:L<g)){L=null;return}var Y=n._fullLayout,X=Y[a.id];f.range[r]=L,f._rl[r]=L,a.updateRadialAxis(Y,X),a.xaxis.setRange(),a.xaxis.setScale(),a.yaxis.setRange(),a.yaxis.setScale();var ee=!1;for(var Q in a.traceHash){var Z=a.traceHash[Q],q=Yo.filterVisible(Z),ae=Z[0][0].trace._module;ae.plot(n,a,q,X),Eb.traceIs(Q,"gl")&&q.length&&(ee=!0)}ee&&(O_e(n),N_e(n))}A.prepFn=function(){k=null,T=null,L=null,A.moveFn=C,A.doneFn=R,rV(n)},A.clampFn=function(D,O){return Math.sqrt(D*D+O*O)<w1.MINDRAG&&(D=0,O=0),[D,O]},LD.init(A)};pu.updateAngularDrag=function(e){var t=this,r=t.gd,a=t.layers,n=t.radius,o=t.angularAxis,i=t.cx,s=t.cy,l=t.cxx,u=t.cyy,f=w1.angularDragBoxSize,c=Sm.makeDragger(a,"path","angulardrag","move"),h={element:c,gd:r};kb.select(c).attr("d",t.pathAnnulus(n,n+f)).attr("transform",Wl(i,s)).call(F_e,"move");function v(L,C){return Math.atan2(u+f-C,L-l-f)}var p=a.frontplot.select(".scatterlayer").selectAll(".trace"),d=p.selectAll(".point"),g=p.selectAll(".textpoint"),m,y,_,S,M,w;function A(L,C){var I=t.gd._fullLayout,R=I[t.id],B=m+L*e._invScaleX,N=y+C*e._invScaleY,D=v(B,N),O=Cb(D-w);if(S=_+O,a.frontplot.attr("transform",Wl(t.xOffset2,t.yOffset2)+z0([-O,l,u])),t.vangles){M=t.radialAxisAngle+O;var $=Wl(i,s)+z0(-O),Y=Wl(i,s)+z0(-M);a.bg.attr("transform",$),a["radial-grid"].attr("transform",$),a["radial-axis"].attr("transform",Y),a["radial-line"].select("line").attr("transform",Y),t.updateRadialAxisTitle(I,R,M)}else t.clipPaths.forTraces.select("path").attr("transform",Wl(l,u)+z0(O));d.each(function(){var ie=kb.select(this),we=ek.getTranslate(ie);ie.attr("transform",Wl(we.x,we.y)+z0([O]))}),g.each(function(){var ie=kb.select(this),we=ie.select("text"),Te=ek.getTranslate(ie);ie.attr("transform",z0([O,we.attr("x"),we.attr("y")])+Wl(Te.x,Te.y))}),o.rotation=Yo.modHalf(S,360),t.updateAngularAxis(I,R),t._hasClipOnAxisFalse&&!Yo.isFullCircle(t.sectorInRad)&&p.call(ek.hideOutsideRangePoints,t);var X=!1;for(var ee in t.traceHash)if(Eb.traceIs(ee,"gl")){var Q=t.traceHash[ee],Z=Yo.filterVisible(Q),q=Q[0][0].trace._module;q.plot(r,t,Z,R),Z.length&&(X=!0)}X&&(O_e(r),N_e(r));var ae={};k(ae),r.emit("plotly_relayouting",ae)}function k(L){L[t.id+".angularaxis.rotation"]=S,t.vangles&&(L[t.id+".radialaxis.angle"]=M)}function T(){g.select("text").attr("transform",null);var L={};k(L),Eb.call("_guiRelayout",r,L)}h.prepFn=function(L,C,I){var R=e[t.id];_=R.angularaxis.rotation;var B=c.getBoundingClientRect();m=C-B.left,y=I-B.top,r._fullLayout._calcInverseTransform(r);var N=Yo.apply3DTransform(e._invTransform)(m,y);m=N[0],y=N[1],w=v(m,y),h.moveFn=A,h.doneFn=T,rV(r)},t.vangles&&!Yo.isFullCircle(t.sectorInRad)&&(h.prepFn=Yo.noop,F_e(kb.select(c),null)),LD.init(h)};pu.isPtInside=function(e){if(this.isSmith)return!0;var t=this.sectorInRad,r=this.vangles,a=this.angularAxis.c2g(e.theta),n=this.radialAxis,o=n.c2l(e.r),i=n._rl,s=r?Mm.isPtInsidePolygon:Yo.isPtInsideSector;return s(o,a,i,t,r)};pu.pathArc=function(e){var t=this.sectorInRad,r=this.vangles,a=r?Mm.pathPolygon:Yo.pathArc;return a(e,t[0],t[1],r)};pu.pathSector=function(e){var t=this.sectorInRad,r=this.vangles,a=r?Mm.pathPolygon:Yo.pathSector;return a(e,t[0],t[1],r)};pu.pathAnnulus=function(e,t){var r=this.sectorInRad,a=this.vangles,n=a?Mm.pathPolygonAnnulus:Yo.pathAnnulus;return n(e,t,r[0],r[1],a)};pu.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)};pu.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)};function H_e(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function zMt(e){var t=e[0],r=e[1],a=r-t,n=B_e(t,360),o=n+a,i=Math.cos(T1(n)),s=Math.sin(T1(n)),l=Math.cos(T1(o)),u=Math.sin(T1(o)),f,c,h,v;return n<=90&&o>=90||n>90&&o>=450?v=1:s<=0&&u<=0?v=0:v=Math.max(s,u),n<=180&&o>=180||n>180&&o>=540?f=-1:i>=0&&l>=0?f=0:f=Math.min(i,l),n<=270&&o>=270||n>270&&o>=630?c=-1:s>=0&&u>=0?c=0:c=Math.min(s,u),o>=360?h=1:i<=0&&l<=0?h=0:h=Math.max(i,l),[f,c,h,v]}function G_e(e,t){var r=function(n){return Yo.angleDist(e,n)},a=Yo.findIndexOfMin(t,r);return t[a]}function tk(e,t,r){return t?(e.attr("display",null),e.attr(r)):e&&e.attr("display","none"),e}var FMt=us,Zn=Zu,OMt=Fo.attributes,yp=bt.exports.extendFlat,V_e=Jo.overrideAll,j_e=V_e({color:Zn.color,showline:yp({},Zn.showline,{dflt:!0}),linecolor:Zn.linecolor,linewidth:Zn.linewidth,showgrid:yp({},Zn.showgrid,{dflt:!0}),gridcolor:Zn.gridcolor,gridwidth:Zn.gridwidth},"plot","from-root"),q_e=V_e({tickmode:Zn.tickmode,nticks:Zn.nticks,tick0:Zn.tick0,dtick:Zn.dtick,tickvals:Zn.tickvals,ticktext:Zn.ticktext,ticks:Zn.ticks,ticklen:Zn.ticklen,tickwidth:Zn.tickwidth,tickcolor:Zn.tickcolor,showticklabels:Zn.showticklabels,showtickprefix:Zn.showtickprefix,tickprefix:Zn.tickprefix,showticksuffix:Zn.showticksuffix,ticksuffix:Zn.ticksuffix,showexponent:Zn.showexponent,exponentformat:Zn.exponentformat,minexponent:Zn.minexponent,separatethousands:Zn.separatethousands,tickfont:Zn.tickfont,tickangle:Zn.tickangle,tickformat:Zn.tickformat,tickformatstops:Zn.tickformatstops,layer:Zn.layer},"plot","from-root"),Y_e={visible:yp({},Zn.visible,{dflt:!0}),type:yp({},Zn.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Zn.autotypenumbers,autorange:yp({},Zn.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc",description:["If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","If *normal*, the range is computed in relation to the extrema","of the input data (same behavior as for cartesian axes)."].join(" ")},range:yp({},Zn.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:Zn.categoryorder,categoryarray:Zn.categoryarray,angle:{valType:"angle",editType:"plot",description:["Sets the angle (in degrees) from which the radial axis is drawn.","Note that by default, radial axis line on the theta=0 line","corresponds to a line pointing right (like what mathematicians prefer).","Defaults to the first `polar.sector` angle."].join(" ")},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot",description:["Determines on which side of radial axis line","the tick and tick labels appear."].join(" ")},title:{text:yp({},Zn.title.text,{editType:"plot",dflt:""}),font:yp({},Zn.title.font,{editType:"plot"}),editType:"plot"},hoverformat:Zn.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, `angle`, and `title` if in `editable: true` configuration.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc",_deprecated:{title:Zn._deprecated.title,titlefont:Zn._deprecated.titlefont}};yp(Y_e,j_e,q_e);var W_e={visible:yp({},Zn.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the angular axis type.","If *linear*, set `thetaunit` to determine the unit in which axis value are shown.","If *category, use `period` to set the number of integer coordinates around polar axis."].join(" ")},autotypenumbers:Zn.autotypenumbers,categoryorder:Zn.categoryorder,categoryarray:Zn.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc",description:["Sets the format unit of the formatted *theta* values.","Has an effect only when `angularaxis.type` is *linear*."].join(" ")},period:{valType:"number",editType:"calc",min:0,description:["Set the angular period.","Has an effect only when `angularaxis.type` is *category*."].join(" ")},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc",description:["Sets the direction corresponding to positive angles."].join(" ")},rotation:{valType:"angle",editType:"calc",description:["Sets that start position (in degrees) of the angular axis","By default, polar subplots with `direction` set to *counterclockwise*","get a `rotation` of *0*","which corresponds to due East (like what mathematicians prefer).","In turn, polar with `direction` set to *clockwise* get a rotation of *90*","which corresponds to due North (like on a compass),"].join(" ")},hoverformat:Zn.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `rotation`.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc"};yp(W_e,j_e,q_e);var X_e={domain:OMt({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot",description:["Sets angular span of this polar subplot with two angles (in degrees).","Sector are assumed to be spanned in the counterclockwise direction","with *0* corresponding to rightmost limit of the polar subplot."].join(" ")},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the fraction of the radius to cut out of the polar subplot."].join(" ")},bgcolor:{valType:"color",editType:"plot",dflt:FMt.background,description:"Set the background color of the subplot"},radialaxis:Y_e,angularaxis:W_e,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot",description:["Determines if the radial axis grid lines and angular axis line are drawn","as *circular* sectors or as *linear* (polygon) sectors.","Has an effect only when the angular axis has `type` *category*.","Note that `radialaxis.angle` is snapped to the angle of the closest","vertex when `gridshape` is *circular*","(so that radial axis scale is the same as the data scale)."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis attributes,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"},RD=bt.exports,NMt=Oa.exports,BMt=si,$Mt=R2,UMt=Ml.getSubplotData,HMt=N_,GMt=dT,VMt=hx,jMt=vx,qMt=p8,YMt=qE,WMt=yT,Z_e=X_e,XMt=k_e,zD=KG,K_e=zD.axisNames;function ZMt(e,t,r,a){var n=r("bgcolor");a.bgColor=NMt.combine(n,a.paper_bgcolor);var o=r("sector");r("hole");var i=UMt(a.fullData,zD.name,a.id),s=a.layoutOut,l;function u(k,T){return r(l+"."+k,T)}for(var f=0;f<K_e.length;f++){l=K_e[f],RD.isPlainObject(e[l])||(e[l]={});var c=e[l],h=BMt.newContainer(t,l);h._id=h._name=l,h._attr=a.id+"."+l,h._traceIndices=i.map(function(k){return k._expandedIndex});var v=zD.axisName2dataArray[l],p=KMt(c,h,u,i,v,a);qMt(c,h,u,{axData:i,dataAttr:v});var d=u("visible");switch(XMt(h,t,s),u("uirevision",t.uirevision),h._m=1,l){case"radialaxis":var g=u("autorange",!h.isValidRange(c.range));c.autorange=g,g&&(p==="linear"||p==="-")&&u("rangemode"),g==="reversed"&&(h._m=-1),u("range"),h.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(p==="date"){RD.log("Polar plots do not support date angular axes yet.");for(var m=0;m<i.length;m++)i[m].visible=!1;p=c.type=h.type="linear"}u(p==="linear"?"thetaunit":"period");var y=u("direction");u("rotation",{counterclockwise:0,clockwise:90}[y]);break}if(jMt(c,h,u,h.type,{tickSuffixDflt:h.thetaunit==="degrees"?"\xB0":void 0}),d){var _,S,M,w,A=a.font||{};_=u("color"),S=_===c.color?_:A.color,M=A.size,w=A.family,HMt(c,h,u,h.type),VMt(c,h,u,h.type,{font:{color:S,size:M,family:w}}),GMt(c,h,u,{outerTicks:!0}),YMt(c,h,u,{dfltColor:_,bgColor:a.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:Z_e[l]}),u("layer"),l==="radialaxis"&&(u("side"),u("angle",o[0]),u("title.text"),RD.coerceFont(u,"title.font",{color:S,size:RD.bigFont(M),family:w}))}p!=="category"&&u("hoverformat"),h._input=c}t.angularaxis.type==="category"&&r("gridshape")}function KMt(e,t,r,a,n,o){var i=r("autotypenumbers",o.autotypenumbersDflt),s=r("type");if(s==="-"){for(var l,u=0;u<a.length;u++)if(a[u].visible){l=a[u];break}l&&l[n]&&(t.type=WMt(l[n],"gregorian",{noMultiCategory:!0,autotypenumbers:i})),t.type==="-"?t.type="linear":e.type=t.type}return t.type}var JMt=function(t,r,a){$Mt(t,r,a,{type:zD.name,attributes:Z_e,handleDefaults:ZMt,font:r.font,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,fullData:a,layoutOut:r})},QMt=Ml.getSubplotCalcData,ekt=bt.exports.counterRegex,tkt=U_e,J_e=KG,Q_e=J_e.attr,Lb=J_e.name,e2e=ekt(Lb),t2e={};t2e[Q_e]={valType:"subplotid",dflt:Lb,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a polar subplot.","If *polar* (the default value), the data refer to `layout.polar`.","If *polar2*, the data refer to `layout.polar2`, and so on."].join(" ")};function rkt(e){for(var t=e._fullLayout,r=e.calcdata,a=t._subplots[Lb],n=0;n<a.length;n++){var o=a[n],i=QMt(r,Lb,o),s=t[o]._subplot;s||(s=tkt(e,o),t[o]._subplot=s),s.plot(i,t,e._promises)}}function akt(e,t,r,a){for(var n=a._subplots[Lb]||[],o=a._has&&a._has("gl"),i=t._has&&t._has("gl"),s=o&&!i,l=0;l<n.length;l++){var u=n[l],f=a[u]._subplot;if(!t[u]&&!!f){f.framework.remove(),f.layers["radial-axis-title"].remove();for(var c in f.clipPaths)f.clipPaths[c].remove()}s&&f._scene&&(f._scene.destroy(),f._scene=null)}}var aV={attr:Q_e,name:Lb,idRoot:Lb,idRegex:e2e,attrRegex:e2e,attributes:t2e,layoutAttributes:X_e,supplyLayoutDefaults:JMt,plot:rkt,clean:akt,toSVG:Ii.toSVG},nkt=zn.hovertemplateAttrs,ikt=zn.texttemplateAttrs,FD=cn.extendFlat,Ah=Cl,okt=ao,rk=Ah.line,OD={mode:Ah.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the radial coordinates"},theta:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the angular coordinates"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `r`.","Builds a linear space of r coordinates.","Use with `dr`","where `r0` is the starting coordinate and `dr` the step."].join(" ")},dr:{valType:"number",dflt:1,editType:"calc",description:"Sets the r coordinate step."},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `theta`.","Builds a linear space of theta coordinates.","Use with `dtheta`","where `theta0` is the starting coordinate and `dtheta` the step."].join(" ")},dtheta:{valType:"number",editType:"calc",description:["Sets the theta coordinate step.","By default, the `dtheta` step equals the subplot's period divided","by the length of the `r` coordinates."].join(" ")},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes",description:["Sets the unit of input *theta* values.","Has an effect only when on *linear* angular axes."].join(" ")},text:Ah.text,texttemplate:ikt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:Ah.hovertext,line:{color:rk.color,width:rk.width,dash:rk.dash,shape:FD({},rk.shape,{values:["linear","spline"]}),smoothing:rk.smoothing,editType:"calc"},connectgaps:Ah.connectgaps,marker:Ah.marker,cliponaxis:FD({},Ah.cliponaxis,{dflt:!1}),textposition:Ah.textposition,textfont:Ah.textfont,fill:FD({},Ah.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterpolar has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:Ah.fillcolor,hoverinfo:FD({},okt.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:Ah.hoveron,hovertemplate:nkt(),selected:Ah.selected,unselected:Ah.unselected},r2e=bt.exports,d3=Ro,skt=Wd,lkt=n0,a2e=WT,ukt=i0,fkt=Gg,ckt=Hg.PTS_LINESONLY,hkt=OD;function vkt(e,t,r,a){function n(s,l){return r2e.coerce(e,t,hkt,s,l)}var o=n2e(e,t,a,n);if(!o){t.visible=!1;return}n("thetaunit"),n("mode",o<ckt?"lines+markers":"lines"),n("text"),n("hovertext"),t.hoveron!=="fills"&&n("hovertemplate"),d3.hasLines(t)&&(lkt(e,t,r,a,n),a2e(e,t,n),n("connectgaps")),d3.hasMarkers(t)&&skt(e,t,r,a,n,{gradient:!0}),d3.hasText(t)&&(n("texttemplate"),ukt(e,t,a,n));var i=[];(d3.hasMarkers(t)||d3.hasText(t))&&(n("cliponaxis"),n("marker.maxdisplayed"),i.push("points")),n("fill"),t.fill!=="none"&&(fkt(e,t,r,n),d3.hasLines(t)||a2e(e,t,n)),(t.fill==="tonext"||t.fill==="toself")&&i.push("fills"),n("hoveron",i.join("+")||"points"),r2e.coerceSelectionMarkerOpacity(t,n)}function n2e(e,t,r,a){var n=a("r"),o=a("theta"),i;if(n)o?i=Math.min(n.length,o.length):(i=n.length,a("theta0"),a("dtheta"));else{if(!o)return 0;i=t.theta.length,a("r0"),a("dr")}return t._length=i,i}var nV={handleRThetaDefaults:n2e,supplyDefaults:vkt},dkt=bt.exports,i2e=rn.exports,iV=function(t,r,a){var n={},o=a[r.subplot]._subplot,i,s;o?(i=o.radialAxis,s=o.angularAxis):(o=a[r.subplot],i=o.radialaxis,s=o.angularaxis);var l=i.c2l(t.r);n.rLabel=i2e.tickText(i,l,!0).text;var u=s.thetaunit==="degrees"?dkt.rad2deg(t.theta):t.theta;return n.thetaLabel=i2e.tickText(s,u,!0).text,n},o2e=gn,pkt=Un.BADNUM,gkt=rn.exports,mkt=Xd,ykt=Vg,xkt=Zd,bkt=Kd.calcMarkerSize,_kt=function(t,r){for(var a=t._fullLayout,n=r.subplot,o=a[n].radialaxis,i=a[n].angularaxis,s=o.makeCalcdata(r,"r"),l=i.makeCalcdata(r,"theta"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],p=f[c]={};o2e(h)&&o2e(v)?(p.r=h,p.theta=v):p.r=pkt}var d=bkt(r,u);return r._extremes.x=gkt.findExtremes(o,s,{ppad:d}),mkt(t,r),ykt(f,r),xkt(f,r),f},wkt=JT,s2e=Un.BADNUM,Tkt=function(t,r,a){for(var n=r.layers.frontplot.select("g.scatterlayer"),o={xaxis:r.xaxis,yaxis:r.yaxis,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},i=r.radialAxis,s=r.angularAxis,l=0;l<a.length;l++)for(var u=a[l],f=0;f<u.length;f++){var c=u[f],h=c.r;if(h===s2e)c.x=c.y=s2e;else{var v=i.c2g(h),p=s.c2g(c.theta);c.x=v*Math.cos(p),c.y=v*Math.sin(p)}}wkt(t,o,a,n)},Akt=eA;function Skt(e,t,r,a){var n=Akt(e,t,r,a);if(!(!n||n[0].index===!1)){var o=n[0];if(o.index===void 0)return n;var i=e.subplot,s=o.cd[o.index],l=o.trace;if(!!i.isPtInside(s))return o.xLabelVal=void 0,o.yLabelVal=void 0,l2e(s,l,i,o),o.hovertemplate=l.hovertemplate,n}}function l2e(e,t,r,a){var n=r.radialAxis,o=r.angularAxis;n._hovertitle="r",o._hovertitle="\u03B8";var i={};i[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,i);a.rLabel=s.rLabel,a.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&f(n,a.rLabel),c.indexOf("theta")!==-1&&f(o,a.thetaLabel),c.indexOf("text")!==-1&&a.text&&(u.push(a.text),delete a.text),a.extraText=u.join("<br>")}}var oV={hoverPoints:Skt,makeHoverPointText:l2e},Mkt={moduleType:"trace",name:"scatterpolar",basePlotModule:aV,categories:["polar","symbols","showLegend","scatter-like"],attributes:OD,supplyDefaults:nV.supplyDefaults,colorbar:Pf,formatLabels:iV,calc:_kt,plot:Tkt,style:fh.style,styleOnSelect:fh.styleOnSelect,hoverPoints:oV.hoverPoints,selectPoints:tA,meta:{hrName:"scatter_polar",description:["The scatterpolar trace type encompasses line charts, scatter charts, text charts, and bubble charts","in polar coordinates.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},kkt=Mkt,Sh=OD,Pb=jS.exports,Ekt=zn.texttemplateAttrs,u2e={mode:Sh.mode,r:Sh.r,theta:Sh.theta,r0:Sh.r0,dr:Sh.dr,theta0:Sh.theta0,dtheta:Sh.dtheta,thetaunit:Sh.thetaunit,text:Sh.text,texttemplate:Ekt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:Sh.hovertext,hovertemplate:Sh.hovertemplate,line:Pb.line,connectgaps:Pb.connectgaps,marker:Pb.marker,fill:Pb.fill,fillcolor:Pb.fillcolor,textposition:Pb.textposition,textfont:Pb.textfont,hoverinfo:Sh.hoverinfo,selected:Sh.selected,unselected:Sh.unselected},f2e=bt.exports,sV=Ro,Ckt=nV.handleRThetaDefaults,Lkt=Wd,Pkt=n0,Ikt=i0,Dkt=Gg,Rkt=Hg.PTS_LINESONLY,zkt=u2e,Fkt=function(t,r,a,n){function o(s,l){return f2e.coerce(t,r,zkt,s,l)}var i=Ckt(t,r,n,o);if(!i){r.visible=!1;return}o("thetaunit"),o("mode",i<Rkt?"lines+markers":"lines"),o("text"),o("hovertext"),r.hoveron!=="fills"&&o("hovertemplate"),sV.hasLines(r)&&(Pkt(t,r,a,n,o),o("connectgaps")),sV.hasMarkers(r)&&Lkt(t,r,a,n,o),sV.hasText(r)&&(o("texttemplate"),Ikt(t,r,n,o)),o("fill"),r.fill!=="none"&&Dkt(t,r,a,o),f2e.coerceSelectionMarkerOpacity(r,o)},Okt=iV,Nkt=function(t,r,a){var n=t.i;return"r"in t||(t.r=r._r[n]),"theta"in t||(t.theta=r._theta[n]),Okt(t,r,a)},Bkt=Xd,$kt=Kd.calcMarkerSize,Ukt=Fw,Hkt=rn.exports,Gkt=rb.TOO_MANY_POINTS,Vkt=function(t,r){var a=t._fullLayout,n=r.subplot,o=a[n].radialaxis,i=a[n].angularaxis,s=r._r=o.makeCalcdata(r,"r"),l=r._theta=i.makeCalcdata(r,"theta"),u=r._length,f={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),f.r=s,f.theta=l,Bkt(t,r);var c=f.opts=Ukt.style(t,r),h;return u<Gkt?h=$kt(r,u):c.marker&&(h=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),r._extremes.x=Hkt.findExtremes(o,s,{ppad:h}),[{x:!1,y:!1,t:f,trace:r}]},jkt=vU,qkt=gn,Ykt=Gge,Wkt=Hpe,ND=Fw,BD=bt.exports,Xkt=rb.TOO_MANY_POINTS,Zkt=function(t,r,a){if(!!a.length){var n=r.radialAxis,o=r.angularAxis,i=Wkt(t,r);return a.forEach(function(s){if(!(!s||!s[0]||!s[0].trace)){var l=s[0],u=l.trace,f=l.t,c=u._length,h=f.r,v=f.theta,p=f.opts,d,g=h.slice(),m=v.slice();for(d=0;d<h.length;d++)r.isPtInside({r:h[d],theta:v[d]})||(g[d]=NaN,m[d]=NaN);var y=new Array(c*2),_=Array(c),S=Array(c);for(d=0;d<c;d++){var M=g[d],w,A;if(qkt(M)){var k=n.c2g(M),T=o.c2g(m[d],u.thetaunit);w=k*Math.cos(T),A=k*Math.sin(T)}else w=A=NaN;_[d]=y[d*2]=w,S[d]=y[d*2+1]=A}f.tree=jkt(y),p.marker&&c>=Xkt&&(p.marker.cluster=f.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=y),p.line&&y.length>1&&BD.extendFlat(p.line,ND.linePositions(t,u,y)),p.text&&(BD.extendFlat(p.text,{positions:y},ND.textPosition(t,u,p.text,p.marker)),BD.extendFlat(p.textSel,{positions:y},ND.textPosition(t,u,p.text,p.markerSel)),BD.extendFlat(p.textUnsel,{positions:y},ND.textPosition(t,u,p.text,p.markerUnsel))),p.fill&&!i.fill2d&&(i.fill2d=!0),p.marker&&!i.scatter2d&&(i.scatter2d=!0),p.line&&!i.line2d&&(i.line2d=!0),p.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(p.line),i.fillOptions.push(p.fill),i.markerOptions.push(p.marker),i.markerSelectedOptions.push(p.markerSel),i.markerUnselectedOptions.push(p.markerUnsel),i.textOptions.push(p.text),i.textSelectedOptions.push(p.textSel),i.textUnselectedOptions.push(p.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),f.x=_,f.y=S,f.rawx=_,f.rawy=S,f.r=h,f.theta=v,f.positions=y,f._scene=i,f.index=i.count,i.count++}}),Ykt(t,r,a)}},Kkt=uU,Jkt=oV.makeHoverPointText;function Qkt(e,t,r,a){var n=e.cd,o=n[0].t,i=o.r,s=o.theta,l=Kkt.hoverPoints(e,t,r,a);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=e.subplot,c=u.cd[u.index],h=u.trace;if(c.r=i[u.index],c.theta=s[u.index],!!f.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,Jkt(c,h,f,u),l}}var e5t={hoverPoints:Qkt},t5t={moduleType:"trace",name:"scatterpolargl",basePlotModule:aV,categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:u2e,supplyDefaults:Fkt,colorbar:Pf,formatLabels:Nkt,calc:Vkt,plot:Zkt,hoverPoints:e5t.hoverPoints,selectPoints:jge,meta:{hrName:"scatter_polar_gl",description:["The scatterpolargl trace type encompasses line charts, scatter charts, and bubble charts","in polar coordinates using the WebGL plotting engine.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},r5t=t5t,a5t=zn.hovertemplateAttrs,ak=cn.extendFlat,A1=OD,S1=Wg,c2e={r:A1.r,theta:A1.theta,r0:A1.r0,dr:A1.dr,theta0:A1.theta0,dtheta:A1.dtheta,thetaunit:A1.thetaunit,base:ak({},S1.base,{description:["Sets where the bar base is drawn (in radial axis units).","In *stack* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")}),offset:ak({},S1.offset,{description:["Shifts the angular position where the bar is drawn","(in *thetatunit* units)."].join(" ")}),width:ak({},S1.width,{description:["Sets the bar angular width (in *thetaunit* units)."].join(" ")}),text:ak({},S1.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:ak({},S1.hovertext,{description:"Same as `text`."}),marker:S1.marker,hoverinfo:A1.hoverinfo,hovertemplate:a5t(),selected:S1.selected,unselected:S1.unselected},h2e={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc",description:["Sets the gap between bars of","adjacent location coordinates.","Values are unitless, they represent fractions of the minimum difference","in bar positions in the data."].join(" ")}},v2e=bt.exports,n5t=nV.handleRThetaDefaults,i5t=f7,o5t=c2e,s5t=function(t,r,a,n){function o(s,l){return v2e.coerce(t,r,o5t,s,l)}var i=n5t(t,r,n,o);if(!i){r.visible=!1;return}o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),i5t(t,r,o,a,n),v2e.coerceSelectionMarkerOpacity(r,o)},l5t=bt.exports,u5t=h2e,f5t=function(e,t,r){var a={},n;function o(l,u){return l5t.coerce(e[n]||{},t[n],u5t,l,u)}for(var i=0;i<r.length;i++){var s=r[i];s.type==="barpolar"&&s.visible===!0&&(n=s.subplot,a[n]||(o("barmode"),o("bargap"),a[n]=1))}},d2e=ac.hasColorscale,p2e=ih,c5t=wC,h5t=yA.setGroupPositions,v5t=Zd,d5t=Pa.traceIs,p5t=bt.exports.extendFlat;function g5t(e,t){for(var r=e._fullLayout,a=t.subplot,n=r[a].radialaxis,o=r[a].angularaxis,i=n.makeCalcdata(t,"r"),s=o.makeCalcdata(t,"theta"),l=t._length,u=new Array(l),f=i,c=s,h=0;h<l;h++)u[h]={p:c[h],s:f[h]};function v(p){var d=t[p];d!==void 0&&(t["_"+p]=Array.isArray(d)?o.makeCalcdata(t,p):o.d2c(d,t.thetaunit))}return o.type==="linear"&&(v("width"),v("offset")),d2e(t,"marker")&&p2e(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),d2e(t,"marker.line")&&p2e(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),c5t(u,t),v5t(u,t),u}function m5t(e,t,r){for(var a=e.calcdata,n=[],o=0;o<a.length;o++){var i=a[o],s=i[0].trace;s.visible===!0&&d5t(s,"bar")&&s.subplot===r&&n.push(i)}var l=p5t({},t.radialaxis,{_id:"x"}),u=t.angularaxis;h5t(e,u,l,n,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}var g2e={calc:g5t,crossTraceCalc:m5t},m2e=Ra.exports,$D=gn,p3=bt.exports,y5t=xn.exports,lV=eV,x5t=function(t,r,a){var n=r.xaxis,o=r.yaxis,i=r.radialAxis,s=r.angularAxis,l=b5t(r),u=r.layers.frontplot.select("g.barlayer");p3.makeTraceGroups(u,a,"trace bars").each(function(){var f=m2e.select(this),c=p3.ensureSingle(f,"g","points"),h=c.selectAll("g.point").data(p3.identity);h.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),h.exit().remove(),h.each(function(v){var p=m2e.select(this),d=v.rp0=i.c2p(v.s0),g=v.rp1=i.c2p(v.s1),m=v.thetag0=s.c2g(v.p0),y=v.thetag1=s.c2g(v.p1),_;if(!$D(d)||!$D(g)||!$D(m)||!$D(y)||d===g||m===y)_="M0,0Z";else{var S=i.c2g(v.s1),M=(m+y)/2;v.ct=[n.c2p(S*Math.cos(M)),o.c2p(S*Math.sin(M))],_=l(d,g,m,y)}p3.ensureSingle(p,"path").attr("d",_)}),y5t.setClipUrl(f,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})};function b5t(e){var t=e.cxx,r=e.cyy;return e.vangles?function(a,n,o,i){var s,l;p3.angleDelta(o,i)>0?(s=o,l=i):(s=i,l=o);var u=lV.findEnclosingVertexAngles(s,e.vangles)[0],f=lV.findEnclosingVertexAngles(l,e.vangles)[1],c=[u,(s+l)/2,f];return lV.pathPolygonAnnulus(a,n,s,l,c,t,r)}:function(a,n,o,i){return p3.pathAnnulus(a,n,o,i,t,r)}}var _5t=Rs,uV=bt.exports,w5t=wA.getTraceColor,T5t=uV.fillText,A5t=oV.makeHoverPointText,S5t=eV.isPtInsidePolygon,M5t=function(t,r,a){var n=t.cd,o=n[0].trace,i=t.subplot,s=i.radialAxis,l=i.angularAxis,u=i.vangles,f=u?S5t:uV.isPtInsideSector,c=t.maxHoverDistance,h=l._period||2*Math.PI,v=Math.abs(s.g2p(Math.sqrt(r*r+a*a))),p=Math.atan2(a,r);s.range[0]>s.range[1]&&(p+=Math.PI);var d=function(_){return f(v,p,[_.rp0,_.rp1],[_.thetag0,_.thetag1],u)?c+Math.min(1,Math.abs(_.thetag1-_.thetag0)/h)-1+(_.rp1-v)/(_.rp1-_.rp0)-1:1/0};if(_5t.getClosest(n,d,t),t.index!==!1){var g=t.index,m=n[g];t.x0=t.x1=m.ct[0],t.y0=t.y1=m.ct[1];var y=uV.extendFlat({},m,{r:m.s,theta:m.p});return T5t(m,o,t),A5t(y,o,i,t),t.hovertemplate=o.hovertemplate,t.color=w5t(o,m),t.xLabelVal=t.yLabelVal=void 0,m.s<0&&(t.idealAlign="left"),[t]}},k5t={moduleType:"trace",name:"barpolar",basePlotModule:aV,categories:["polar","bar","showLegend"],attributes:c2e,layoutAttributes:h2e,supplyDefaults:s5t,supplyLayoutDefaults:f5t,calc:g2e.calc,crossTraceCalc:g2e.crossTraceCalc,plot:x5t,colorbar:Pf,formatLabels:iV,style:np.style,styleOnSelect:np.styleOnSelect,hoverPoints:M5t,selectPoints:TA,meta:{hrName:"bar_polar",description:["The data visualized by the radial span of the bars is set in `r`"].join(" ")}},E5t=k5t,y2e={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}},C5t=us,al=Zu,L5t=Fo.attributes,M1=bt.exports.extendFlat,x2e=Jo.overrideAll,b2e=x2e({color:al.color,showline:M1({},al.showline,{dflt:!0}),linecolor:al.linecolor,linewidth:al.linewidth,showgrid:M1({},al.showgrid,{dflt:!0}),gridcolor:al.gridcolor,gridwidth:al.gridwidth},"plot","from-root"),_2e=x2e({ticklen:al.ticklen,tickwidth:M1({},al.tickwidth,{dflt:2}),tickcolor:al.tickcolor,showticklabels:al.showticklabels,showtickprefix:al.showtickprefix,tickprefix:al.tickprefix,showticksuffix:al.showticksuffix,ticksuffix:al.ticksuffix,tickfont:al.tickfont,tickformat:al.tickformat,hoverformat:al.hoverformat,layer:al.layer},"plot","from-root"),P5t=M1({visible:M1({},al.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot",description:"Sets the values at which ticks on this axis appear."},tickangle:M1({},al.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *top* (*bottom*), this axis' are drawn above (below)","the axis line."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of real axis line","the tick and tick labels appear."].join(" ")},editType:"calc"},b2e,_2e),I5t=M1({visible:M1({},al.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot",description:["Sets the values at which ticks on this axis appear.","Defaults to `realaxis.tickvals` plus the same as negatives and zero."].join(" ")},ticks:al.ticks,editType:"calc"},b2e,_2e),w2e={domain:L5t({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:C5t.background,description:"Set the background color of the subplot"},realaxis:P5t,imaginaryaxis:I5t,editType:"calc"},UD=bt.exports,D5t=Oa.exports,R5t=si,z5t=R2,F5t=Ml.getSubplotData,O5t=vx,N5t=hx,B5t=qE,$5t=Og,g3=w2e,fV=y2e,T2e=fV.axisNames,U5t=V5t(function(e){return e.slice().reverse().map(function(t){return-t}).concat([0]).concat(e)},String);function H5t(e,t,r,a){var n=r("bgcolor");a.bgColor=D5t.combine(n,a.paper_bgcolor);var o=F5t(a.fullData,fV.name,a.id),i=a.layoutOut,s;function l(M,w){return r(s+"."+M,w)}for(var u=0;u<T2e.length;u++){s=T2e[u],UD.isPlainObject(e[s])||(e[s]={});var f=e[s],c=R5t.newContainer(t,s);c._id=c._name=s,c._attr=a.id+"."+s,c._traceIndices=o.map(function(M){return M._expandedIndex});var h=l("visible");if(c.type="linear",$5t(c,i),O5t(f,c,l,c.type),h){var v=s==="realaxis";if(v&&l("side"),v)l("tickvals");else{var p=U5t(t.realaxis.tickvals||g3.realaxis.tickvals.dflt);l("tickvals",p)}var d,g,m,y,_=a.font||{};h&&(d=l("color"),g=d===f.color?d:_.color,m=_.size,y=_.family),N5t(f,c,l,c.type,{noAng:!v,noExp:!0,font:{color:g,size:m,family:y}}),UD.coerce2(e,t,g3,s+".ticklen"),UD.coerce2(e,t,g3,s+".tickwidth"),UD.coerce2(e,t,g3,s+".tickcolor",t.color);var S=l("ticks");S||(delete t[s].ticklen,delete t[s].tickwidth,delete t[s].tickcolor),B5t(f,c,l,{dfltColor:d,bgColor:a.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g3[s]}),l("layer")}l("hoverformat"),delete c.type,c._input=f}}var G5t=function(t,r,a){z5t(t,r,a,{noUirevision:!0,type:fV.name,attributes:g3,handleDefaults:H5t,font:r.font,paper_bgcolor:r.paper_bgcolor,fullData:a,layoutOut:r})};function V5t(e,t){var r={};return function(a){var n=t?t(a):a;if(n in r)return r[n];var o=e(a);return r[n]=o,o}}var j5t=Ml.getSubplotCalcData,q5t=bt.exports.counterRegex,Y5t=U_e,A2e=y2e,S2e=A2e.attr,Ib=A2e.name,M2e=q5t(Ib),k2e={};k2e[S2e]={valType:"subplotid",dflt:Ib,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a smith subplot.","If *smith* (the default value), the data refer to `layout.smith`.","If *smith2*, the data refer to `layout.smith2`, and so on."].join(" ")};function W5t(e){for(var t=e._fullLayout,r=e.calcdata,a=t._subplots[Ib],n=0;n<a.length;n++){var o=a[n],i=j5t(r,Ib,o),s=t[o]._subplot;s||(s=Y5t(e,o,!0),t[o]._subplot=s),s.plot(i,t,e._promises)}}function X5t(e,t,r,a){for(var n=a._subplots[Ib]||[],o=0;o<n.length;o++){var i=n[o],s=a[i]._subplot;if(!t[i]&&!!s){s.framework.remove();for(var l in s.clipPaths)s.clipPaths[l].remove()}}}var Z5t={attr:S2e,name:Ib,idRoot:Ib,idRegex:M2e,attrRegex:M2e,attributes:k2e,layoutAttributes:w2e,supplyLayoutDefaults:G5t,plot:W5t,clean:X5t,toSVG:Ii.toSVG},K5t=zn.hovertemplateAttrs,J5t=zn.texttemplateAttrs,HD=cn.extendFlat,Mh=Cl,Q5t=ao,nk=Mh.line,E2e={mode:Mh.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the real component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},imag:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the imaginary component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},text:Mh.text,texttemplate:J5t({editType:"plot"},{keys:["real","imag","text"]}),hovertext:Mh.hovertext,line:{color:nk.color,width:nk.width,dash:nk.dash,shape:HD({},nk.shape,{values:["linear","spline"]}),smoothing:nk.smoothing,editType:"calc"},connectgaps:Mh.connectgaps,marker:Mh.marker,cliponaxis:HD({},Mh.cliponaxis,{dflt:!1}),textposition:Mh.textposition,textfont:Mh.textfont,fill:HD({},Mh.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scattersmith has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:Mh.fillcolor,hoverinfo:HD({},Q5t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:Mh.hoveron,hovertemplate:K5t(),selected:Mh.selected,unselected:Mh.unselected},C2e=bt.exports,m3=Ro,eEt=Wd,tEt=n0,L2e=WT,rEt=i0,aEt=Gg,nEt=Hg.PTS_LINESONLY,iEt=E2e,oEt=function(t,r,a,n){function o(l,u){return C2e.coerce(t,r,iEt,l,u)}var i=sEt(t,r,n,o);if(!i){r.visible=!1;return}o("mode",i<nEt?"lines+markers":"lines"),o("text"),o("hovertext"),r.hoveron!=="fills"&&o("hovertemplate"),m3.hasLines(r)&&(tEt(t,r,a,n,o),L2e(t,r,o),o("connectgaps")),m3.hasMarkers(r)&&eEt(t,r,a,n,o,{gradient:!0}),m3.hasText(r)&&(o("texttemplate"),rEt(t,r,n,o));var s=[];(m3.hasMarkers(r)||m3.hasText(r))&&(o("cliponaxis"),o("marker.maxdisplayed"),s.push("points")),o("fill"),r.fill!=="none"&&(aEt(t,r,a,o),m3.hasLines(r)||L2e(t,r,o)),(r.fill==="tonext"||r.fill==="toself")&&s.push("fills"),o("hoveron",s.join("+")||"points"),C2e.coerceSelectionMarkerOpacity(r,o)};function sEt(e,t,r,a){var n=a("real"),o=a("imag"),i;return n&&o&&(i=Math.min(n.length,o.length)),t._length=i,i}var P2e=rn.exports,lEt=function(t,r,a){var n={},o=a[r.subplot]._subplot;return n.realLabel=P2e.tickText(o.radialAxis,t.real,!0).text,n.imagLabel=P2e.tickText(o.angularAxis,t.imag,!0).text,n},I2e=gn,uEt=Un.BADNUM,fEt=Xd,cEt=Vg,hEt=Zd,vEt=Kd.calcMarkerSize,dEt=function(t,r){for(var a=t._fullLayout,n=r.subplot,o=a[n].realaxis,i=a[n].imaginaryaxis,s=o.makeCalcdata(r,"real"),l=i.makeCalcdata(r,"imag"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],p=f[c]={};I2e(h)&&I2e(v)?(p.real=h,p.imag=v):p.real=uEt}return vEt(r,u),fEt(t,r),cEt(f,r),hEt(f,r),f},pEt=JT,D2e=Un.BADNUM,gEt=R_e,mEt=gEt.smith,yEt=function(t,r,a){for(var n=r.layers.frontplot.select("g.scatterlayer"),o={xaxis:r.xaxis,yaxis:r.yaxis,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},i=0;i<a.length;i++)for(var s=a[i],l=0;l<s.length;l++){var u=s[l],f=u.real;if(f===D2e)u.x=u.y=D2e;else{var c=mEt([f,u.imag]);u.x=c[0],u.y=c[1]}}pEt(t,o,a,n)},xEt=eA;function bEt(e,t,r,a){var n=xEt(e,t,r,a);if(!(!n||n[0].index===!1)){var o=n[0];if(o.index===void 0)return n;var i=e.subplot,s=o.cd[o.index],l=o.trace;if(!!i.isPtInside(s))return o.xLabelVal=void 0,o.yLabelVal=void 0,R2e(s,l,i,o),o.hovertemplate=l.hovertemplate,n}}function R2e(e,t,r,a){var n=r.radialAxis,o=r.angularAxis;n._hovertitle="real",o._hovertitle="imag";var i={};i[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,i);a.realLabel=s.realLabel,a.imagLabel=s.imagLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&f(n,a.realLabel),c.indexOf("imag")!==-1&&f(o,a.imagLabel),c.indexOf("text")!==-1&&a.text&&(u.push(a.text),delete a.text),a.extraText=u.join("<br>")}}var _Et={hoverPoints:bEt,makeHoverPointText:R2e},wEt={moduleType:"trace",name:"scattersmith",basePlotModule:Z5t,categories:["smith","symbols","showLegend","scatter-like"],attributes:E2e,supplyDefaults:oEt,colorbar:Pf,formatLabels:lEt,calc:dEt,plot:yEt,style:fh.style,styleOnSelect:fh.styleOnSelect,hoverPoints:_Et.hoverPoints,selectPoints:tA,meta:{hrName:"scatter_smith",description:["The scattersmith trace type encompasses line charts, scatter charts, text charts, and bubble charts","in smith coordinates.","The data visualized as scatter point or lines is set in","`real` and `imag` (imaginary) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},TEt=wEt,y3={},ik={};ik.pointsAccessorFunction=function(e,t){for(var r,a,n=0;n<e.length&&(r=e[n],r!==t);n++)!r._indexToPoints||r.enabled===!1||(a=r._indexToPoints);var o=a?function(i){return a[i]}:function(i){return[i]};return o};var AEt=rn.exports,x3=bt.exports,SEt=ly,MEt=ik.pointsAccessorFunction,Bs=Un.BADNUM;y3.moduleType="transform";y3.name="aggregate";var z2e=y3.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregate transform is enabled or disabled."].join(" ")},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the grouping target to which the aggregation is applied.","Data points with matching group values will be coalesced into","one point, using the supplied aggregation functions to reduce data","in other data arrays.","If a string, `groups` is assumed to be a reference to a data array","in the parent trace object.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","about the marker color array.","If an array, `groups` is itself the data array by which we aggregate."].join(" ")},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc",description:["A reference to the data array in the parent trace to aggregate.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","over the marker color array.","The referenced array must already exist, unless `func` is *count*,","and each array may only be referenced once."].join(" ")},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc",description:["Sets the aggregation function.","All values from the linked `target`, corresponding to the same value","in the `groups` array, are collected and reduced by this function.","*count* is simply the number of values in the `groups` array, so does","not even require the linked array to exist. *first* (*last*) is just","the first (last) linked value.","Invalid values are ignored, so for example in *avg* they do not","contribute to either the numerator or the denominator.","Any data type (numeric, date, category) may be aggregated with any","function, even though in certain cases it is unlikely to make sense,","for example a sum of dates or average of categories.","*median* will return the average of the two central values if there is","an even count. *mode* will return the first value to reach the maximum","count, in case of a tie.","*change* will return the difference between the first and last linked values.","*range* will return the difference between the min and max linked values."].join(" ")},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc",description:["*stddev* supports two formula variants: *sample* (normalize by N-1)","and *population* (normalize by N)."].join(" ")},enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregation function is enabled or disabled."].join(" ")},editType:"calc"},editType:"calc"},F2e=z2e.aggregations;y3.supplyDefaults=function(e,t){var r={},a;function n(g,m){return x3.coerce(e,r,z2e,g,m)}var o=n("enabled");if(!o)return r;var i=SEt.findArrayAttributes(t),s={};for(a=0;a<i.length;a++)s[i[a]]=1;var l=n("groups");if(!Array.isArray(l)){if(!s[l])return r.enabled=!1,r;s[l]=0}var u=e.aggregations||[],f=r.aggregations=new Array(u.length),c;function h(g,m){return x3.coerce(u[a],c,F2e,g,m)}for(a=0;a<u.length;a++){c={_index:a};var v=h("target"),p=h("func"),d=h("enabled");d&&v&&(s[v]||p==="count"&&s[v]===void 0)?(p==="stddev"&&h("funcmode"),s[v]=0,f[a]=c):f[a]={enabled:!1,_index:a}}for(a=0;a<i.length;a++)s[i[a]]&&f.push({target:i[a],func:F2e.func.dflt,enabled:!0,_index:-1});return r};y3.calcTransform=function(e,t,r){if(!!r.enabled){var a=r.groups,n=x3.getTargetArray(t,{target:a});if(!!n){var o,i,s,l,u={},f={},c=[],h=MEt(t.transforms,r),v=n.length;for(t._length&&(v=Math.min(v,t._length)),o=0;o<v;o++)i=n[o],s=u[i],s===void 0?(u[i]=c.length,l=[o],c.push(l),f[u[i]]=h(o)):(c[s].push(o),f[u[i]]=(f[u[i]]||[]).concat(h(o)));r._indexToPoints=f;var p=r.aggregations;for(o=0;o<p.length;o++)O2e(e,t,c,p[o]);typeof a=="string"&&O2e(e,t,c,{target:a,func:"first",enabled:!0}),t._length=c.length}}};function O2e(e,t,r,a){if(!!a.enabled){for(var n=a.target,o=x3.nestedProperty(t,n),i=o.get(),s=AEt.getDataConversions(e,t,n,i),l=kEt(a,s),u=new Array(r.length),f=0;f<r.length;f++)u[f]=l(i,r[f]);o.set(u),a.func==="count"&&x3.pushUnique(t._arrayAttrs,n)}}function kEt(e,t){var r=e.func,a=t.d2c,n=t.c2d;switch(r){case"count":return EEt;case"first":return CEt;case"last":return LEt;case"sum":return function(o,i){for(var s=0,l=0;l<i.length;l++){var u=a(o[i[l]]);u!==Bs&&(s+=u)}return n(s)};case"avg":return function(o,i){for(var s=0,l=0,u=0;u<i.length;u++){var f=a(o[i[u]]);f!==Bs&&(s+=f,l++)}return l?n(s/l):Bs};case"min":return function(o,i){for(var s=1/0,l=0;l<i.length;l++){var u=a(o[i[l]]);u!==Bs&&(s=Math.min(s,u))}return s===1/0?Bs:n(s)};case"max":return function(o,i){for(var s=-1/0,l=0;l<i.length;l++){var u=a(o[i[l]]);u!==Bs&&(s=Math.max(s,u))}return s===-1/0?Bs:n(s)};case"range":return function(o,i){for(var s=1/0,l=-1/0,u=0;u<i.length;u++){var f=a(o[i[u]]);f!==Bs&&(s=Math.min(s,f),l=Math.max(l,f))}return l===-1/0||s===1/0?Bs:n(l-s)};case"change":return function(o,i){var s=a(o[i[0]]),l=a(o[i[i.length-1]]);return s===Bs||l===Bs?Bs:n(l-s)};case"median":return function(o,i){for(var s=[],l=0;l<i.length;l++){var u=a(o[i[l]]);u!==Bs&&s.push(u)}if(!s.length)return Bs;s.sort(x3.sorterAsc);var f=(s.length-1)/2;return n((s[Math.floor(f)]+s[Math.ceil(f)])/2)};case"mode":return function(o,i){for(var s={},l=0,u=Bs,f=0;f<i.length;f++){var c=a(o[i[f]]);if(c!==Bs){var h=s[c]=(s[c]||0)+1;h>l&&(l=h,u=c)}}return l?n(u):Bs};case"rms":return function(o,i){for(var s=0,l=0,u=0;u<i.length;u++){var f=a(o[i[u]]);f!==Bs&&(s+=f*f,l++)}return l?n(Math.sqrt(s/l)):Bs};case"stddev":return function(o,i){var s=0,l=0,u=1,f=Bs,c;for(c=0;c<i.length&&f===Bs;c++)f=a(o[i[c]]);if(f===Bs)return Bs;for(;c<i.length;c++){var h=a(o[i[c]]);if(h!==Bs){var v=h-f;s+=v,l+=v*v,u++}}var p=e.funcmode==="sample"?u-1:u;return p?Math.sqrt((l-s*s/u)/p):0}}}function EEt(e,t){return t.length}function CEt(e,t){return e[t[0]]}function LEt(e,t){return e[t[t.length-1]]}var PEt=y3,N2e={};(function(e){var t=bt.exports,r=Pa,a=rn.exports,n=ik.pointsAccessorFunction,o=VC,i=o.COMPARISON_OPS,s=o.INTERVAL_OPS,l=o.SET_OPS;e.moduleType="transform",e.name="filter",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this filter transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the filter target by which the filter is applied.","If a string, `target` is assumed to be a reference to a data array","in the parent trace object.","To filter about nested variables, use *.* to access them.","For example, set `target` to *marker.color* to filter","about the marker color array.","If an array, `target` is then the data array by which the filter is applied."].join(" ")},operation:{valType:"enumerated",values:[].concat(i).concat(s).concat(l),dflt:"=",editType:"calc",description:["Sets the filter operation.","*=* keeps items equal to `value`","*!=* keeps items not equal to `value`","*<* keeps items less than `value`","*<=* keeps items less than or equal to `value`","*>* keeps items greater than `value`","*>=* keeps items greater than or equal to `value`","*[]* keeps items inside `value[0]` to `value[1]` including both bounds","*()* keeps items inside `value[0]` to `value[1]` excluding both bounds","*[)* keeps items inside `value[0]` to `value[1]` including `value[0]` but excluding `value[1]","*(]* keeps items inside `value[0]` to `value[1]` excluding `value[0]` but including `value[1]","*][* keeps items outside `value[0]` to `value[1]` and equal to both bounds","*)(* keeps items outside `value[0]` to `value[1]`","*](* keeps items outside `value[0]` to `value[1]` and equal to `value[0]`","*)[* keeps items outside `value[0]` to `value[1]` and equal to `value[1]`","*{}* keeps items present in a set of values","*}{* keeps items not present in a set of values"].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values by which to filter.","Values are expected to be in the same type as the data linked","to `target`.","When `operation` is set to one of","the comparison values ("+i+")","`value` is expected to be a number or a string.","When `operation` is set to one of the interval values","("+s+")","`value` is expected to be 2-item array where the first item","is the lower bound and the second item is the upper bound.","When `operation`, is set to one of the set values","("+l+")","`value` is expected to be an array with as many items as","the desired set elements."].join(" ")},preservegaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps in data arrays produced by the filter operation","are preserved.","Setting this to *true* might be useful when plotting a line chart","with `connectgaps` set to *false*."].join(" ")},editType:"calc"},e.supplyDefaults=function(f){var c={};function h(g,m){return t.coerce(f,c,e.attributes,g,m)}var v=h("enabled");if(v){var p=h("target");if(t.isArrayOrTypedArray(p)&&p.length===0)return c.enabled=!1,c;h("preservegaps"),h("operation"),h("value");var d=r.getComponentMethod("calendars","handleDefaults");d(f,c,"valuecalendar",null),d(f,c,"targetcalendar",null)}return c},e.calcTransform=function(f,c,h){if(!h.enabled)return;var v=t.getTargetArray(c,h);if(!v)return;var p=h.target,d=v.length;c._length&&(d=Math.min(d,c._length));var g=h.targetcalendar,m=c._arrayAttrs,y=h.preservegaps;if(typeof p=="string"){var _=t.nestedProperty(c,p+"calendar").get();_&&(g=_)}var S=a.getDataToCoordFunc(f,c,p,v),M=u(h,S,g),w={},A={},k=0;function T(N,D){for(var O=0;O<m.length;O++){var $=t.nestedProperty(c,m[O]);N($,D)}}var L,C;y?(L=function(N){w[N.astr]=t.extendDeep([],N.get()),N.set(new Array(d))},C=function(N,D){var O=w[N.astr][D];N.get()[D]=O}):(L=function(N){w[N.astr]=t.extendDeep([],N.get()),N.set([])},C=function(N,D){var O=w[N.astr][D];N.get().push(O)}),T(L);for(var I=n(c.transforms,h),R=0;R<d;R++){var B=M(v[R]);B?(T(C,R),A[k++]=I(R)):y&&k++}h._indexToPoints=A,c._length=k};function u(f,c,h){var v=f.operation,p=f.value,d=Array.isArray(p);function g(S){return S.indexOf(v)!==-1}var m=function(S){return c(S,0,f.valuecalendar)},y=function(S){return c(S,0,h)},_;switch(g(i)?_=m(d?p[0]:p):g(s)?_=d?[m(p[0]),m(p[1])]:[m(p),m(p)]:g(l)&&(_=d?p.map(m):[m(p)]),v){case"=":return function(S){return y(S)===_};case"!=":return function(S){return y(S)!==_};case"<":return function(S){return y(S)<_};case"<=":return function(S){return y(S)<=_};case">":return function(S){return y(S)>_};case">=":return function(S){return y(S)>=_};case"[]":return function(S){var M=y(S);return M>=_[0]&&M<=_[1]};case"()":return function(S){var M=y(S);return M>_[0]&&M<_[1]};case"[)":return function(S){var M=y(S);return M>=_[0]&&M<_[1]};case"(]":return function(S){var M=y(S);return M>_[0]&&M<=_[1]};case"][":return function(S){var M=y(S);return M<=_[0]||M>=_[1]};case")(":return function(S){var M=y(S);return M<_[0]||M>_[1]};case"](":return function(S){var M=y(S);return M<=_[0]||M>_[1]};case")[":return function(S){var M=y(S);return M<_[0]||M>=_[1]};case"{}":return function(S){return _.indexOf(y(S))!==-1};case"}{":return function(S){return _.indexOf(y(S))===-1}}}})(N2e);var IEt=N2e,B2e={};(function(e){var t=bt.exports,r=ly,a=Eo.exports,n=ik.pointsAccessorFunction;e.moduleType="transform",e.name="groupby",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this group-by transform is enabled or disabled."].join(" ")},groups:{valType:"data_array",dflt:[],editType:"calc",description:["Sets the groups in which the trace data will be split.","For example, with `x` set to *[1, 2, 3, 4]* and","`groups` set to *['a', 'b', 'a', 'b']*,","the groupby transform with split in one trace","with `x` [1, 3] and one trace with `x` [2, 4]."].join(" ")},nameformat:{valType:"string",editType:"calc",description:["Pattern by which grouped traces are named. If only one trace is present,",'defaults to the group name (`"%{group}"`), otherwise defaults to the group name','with trace name (`"%{group} (%{trace})"`). Available escape sequences are `%{group}`, which',"inserts the group name, and `%{trace}`, which inserts the trace name. If grouping","GDP data by country when more than one trace is present, for example, the",'default "%{group} (%{trace})" would return "Monaco (GDP per capita)".'].join(" ")},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc",description:["The group value which receives these styles."].join(" ")},value:{valType:"any",dflt:{},editType:"calc",description:["Sets each group styles.","For example, with `groups` set to *['a', 'b', 'a', 'b']*","and `styles` set to *[{target: 'a', value: { marker: { color: 'red' } }}]","marker points in group *'a'* will be drawn in red."].join(" "),_compareAsJSON:!0},editType:"calc"},editType:"calc"},e.supplyDefaults=function(i,s,l){var u,f={};function c(m,y){return t.coerce(i,f,e.attributes,m,y)}var h=c("enabled");if(!h)return f;c("groups"),c("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var v=i.styles,p=f.styles=[];if(v)for(u=0;u<v.length;u++){var d=p[u]={};t.coerce(v[u],p[u],e.attributes.styles,"target");var g=t.coerce(v[u],p[u],e.attributes.styles,"value");t.isPlainObject(g)?d.value=t.extendDeep({},g):g&&delete d.value}return f},e.transform=function(i,s){var l,u,f,c=[];for(u=0;u<i.length;u++)for(l=o(i[u],s),f=0;f<l.length;f++)c.push(l[f]);return c};function o(i,s){var l,u,f,c,h,v,p,d,g,m,y=s.transform,_=s.transformIndex,S=i.transforms[_].groups,M=n(i.transforms,y);if(!t.isArrayOrTypedArray(S)||S.length===0)return[i];var w=t.filterUnique(S),A=new Array(w.length),k=S.length,T=r.findArrayAttributes(i),L=y.styles||[],C={};for(l=0;l<L.length;l++)C[L[l].target]=L[l].value;y.styles&&(m=t.keyedContainer(y,"styles","target","value.name"));var I={},R={};for(l=0;l<w.length;l++){v=w[l],I[v]=l,R[v]=0,p=A[l]=t.extendDeepNoArrays({},i),p._group=v,p.transforms[_]._indexToPoints={};var B=null;for(m&&(B=m.get(v)),B||B===""?p.name=B:p.name=t.templateString(y.nameformat,{trace:i.name,group:v}),d=p.transforms,p.transforms=[],u=0;u<d.length;u++)p.transforms[u]=t.extendDeepNoArrays({},d[u]);for(u=0;u<T.length;u++)t.nestedProperty(p,T[u]).set([])}for(f=0;f<T.length;f++){for(c=T[f],u=0,g=[];u<w.length;u++)g[u]=t.nestedProperty(A[u],c).get();for(h=t.nestedProperty(i,c).get(),u=0;u<k;u++)g[I[S[u]]].push(h[u])}for(u=0;u<k;u++){p=A[I[S[u]]];var N=p.transforms[_]._indexToPoints;N[R[S[u]]]=M(u),R[S[u]]++}for(l=0;l<w.length;l++)v=w[l],p=A[l],a.clearExpandedTraceDefaultColors(p),p=t.extendDeepNoArrays(p,C[v]||{});return A}})(B2e);var DEt=B2e,$2e={};(function(e){var t=bt.exports,r=rn.exports,a=ik.pointsAccessorFunction,n=Un.BADNUM;e.moduleType="transform",e.name="sort",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this sort transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the target by which the sort transform is applied.","If a string, *target* is assumed to be a reference to a data array","in the parent trace object.","To sort about nested variables, use *.* to access them.","For example, set `target` to *marker.size* to sort","about the marker size array.","If an array, *target* is then the data array by which","the sort transform is applied."].join(" ")},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc",description:["Sets the sort transform order."].join(" ")},editType:"calc"},e.supplyDefaults=function(s){var l={};function u(c,h){return t.coerce(s,l,e.attributes,c,h)}var f=u("enabled");return f&&(u("target"),u("order")),l},e.calcTransform=function(s,l,u){if(!!u.enabled){var f=t.getTargetArray(l,u);if(!!f){var c=u.target,h=f.length;l._length&&(h=Math.min(h,l._length));var v=l._arrayAttrs,p=r.getDataToCoordFunc(s,l,c,f),d=o(u,f,p,h),g=a(l.transforms,u),m={},y,_;for(y=0;y<v.length;y++){var S=t.nestedProperty(l,v[y]),M=S.get(),w=new Array(h);for(_=0;_<h;_++)w[_]=M[d[_]];S.set(w)}for(_=0;_<h;_++)m[_]=g(d[_]);u._indexToPoints=m,l._length=h}}};function o(s,l,u,f){var c=new Array(f),h=new Array(f),v;for(v=0;v<f;v++)c[v]={v:l[v],i:v};for(c.sort(i(s,u)),v=0;v<f;v++)h[v]=c[v].i;return h}function i(s,l){switch(s.order){case"ascending":return function(u,f){var c=l(u.v),h=l(f.v);return c===n?1:h===n?-1:c-h};case"descending":return function(u,f){var c=l(u.v),h=l(f.v);return c===n?1:h===n?-1:h-c}}}})($2e);var REt=$2e,af={exports:{}},GD=Rl;function U2e(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}GD(U2e.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,a,n){return a=(e!=null&&e.year?e.calendar():typeof a=="string"?this.instance(a,n):a)||this.instance(),a.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var a="",n=0;r>0;){var o=r%10;a=(o===0?"":e[o]+t[n])+a,n++,r=Math.floor(r/10)}return a.indexOf(e[1]+t[1])===0&&(a=a.substr(1)),a||e[0]}}});function cV(e,t,r,a){if(this._calendar=e,this._year=t,this._month=r,this._day=a,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(ti.local.invalidDate||ti.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function VD(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}GD(cV.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(ti.local.invalidDate||ti.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(ti.local.differentCalendars||ti.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+VD(Math.abs(this.year()),4)+"-"+VD(this.month(),2)+"-"+VD(this.day(),2)}});function hV(){this.shortYearCutoff="+10"}GD(hV.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new cV(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,ti.local.invalidYear||ti.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ti.local.invalidYear||ti.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+VD(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,ti.local.invalidYear||ti.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,ti.local.invalidMonth||ti.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,ti.local.invalidMonth||ti.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ti.local.invalidYear||ti.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var a=this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,ti.local.invalidDate||ti.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var a=e.toJD()+t*(r==="w"?this.daysInWeek():1),n=e.calendar().fromJD(a);return this._validateLevel--,[n.year(),n.month(),n.day()]}try{var o=e.year()+(r==="y"?t:0),i=e.monthOfYear()+(r==="m"?t:0),n=e.day(),s=function(f){for(;i<f.minMonth;)o--,i+=f.monthsInYear(o);for(var c=f.monthsInYear(o);i>c-1+f.minMonth;)o++,i-=c,c=f.monthsInYear(o)};r==="y"?(e.month()!==this.fromMonthOfYear(o,i)&&(i=this.newDate(o,e.month(),this.minDay).monthOfYear()),i=Math.min(i,this.monthsInYear(o)),n=Math.min(n,this.daysInMonth(o,this.fromMonthOfYear(o,i)))):r==="m"&&(s(this),n=Math.min(n,this.daysInMonth(o,this.fromMonthOfYear(o,i))));var l=[o,this.fromMonthOfYear(o,i),n];return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}},_correctAdd:function(e,t,r,a){if(!this.hasYearZero&&(a==="y"||a==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a],o=r<0?-1:1;t=this._add(e,r*n[0]+o*n[1],n[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,ti.local.invalidDate||ti.regionalOptions[""].invalidDate);var a=r==="y"?t:e.year(),n=r==="m"?t:e.month(),o=r==="d"?t:e.day();return(r==="y"||r==="m")&&(o=Math.min(o,this.daysInMonth(a,n))),e.date(a,n,o)},isValid:function(e,t,r){this._validateLevel++;var a=this.hasYearZero||e!==0;if(a){var n=this.newDate(e,t,this.minDay);a=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(n)}return this._validateLevel--,a},toJSDate:function(e,t,r){var a=this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate);return ti.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(e){return this.fromJD(ti.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,a){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(ti.local.differentCalendars||ti.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw a.replace(/\{0\}/,this.local.name);var n=this.newDate(e,t,r);return this._validateLevel--,n}catch(o){throw this._validateLevel--,o}}});function vV(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}vV.prototype=new hV;GD(vV.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ti.local.invalidYear||ti.regionalOptions[""].invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ti.local.invalidMonth||ti.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate);e=a.year(),t=a.month(),r=a.day(),e<0&&e++,t<3&&(t+=12,e--);var n=Math.floor(e/100),o=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+o-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var a=r+1524,n=Math.floor((a-122.1)/365.25),o=Math.floor(365.25*n),i=Math.floor((a-o)/30.6001),s=a-o-Math.floor(i*30.6001),l=i-(i>13.5?13:1),u=n-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,r){var a=this._validate(e,t,r,ti.local.invalidDate||ti.regionalOptions[""].invalidDate),n=new Date(a.year(),a.month()-1,a.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(n.getHours()>12?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var ti=af.exports=new U2e;ti.cdate=cV;ti.baseCalendar=hV;ti.calendars.gregorian=vV;var dV=Rl,gu=af.exports;dV(gu.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});gu.local=gu.regionalOptions[""];dV(gu.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});dV(gu.baseCalendar.prototype,{UNIX_EPOCH:gu.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:gu.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw gu.local.invalidFormat||gu.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};var a=r.dayNamesShort||this.local.dayNamesShort,n=r.dayNames||this.local.dayNames,o=r.monthNumbers||this.local.monthNumbers,i=r.monthNamesShort||this.local.monthNamesShort,s=r.monthNames||this.local.monthNames;r.calculateWeek||this.local.calculateWeek;for(var l=function(_,S){for(var M=1;y+M<e.length&&e.charAt(y+M)===_;)M++;return y+=M-1,Math.floor(M/(S||1))>1},u=function(_,S,M,w){var A=""+S;if(l(_,w))for(;A.length<M;)A="0"+A;return A},f=function(_,S,M,w){return l(_)?w[S]:M[S]},c=this,h=function(_){return typeof o=="function"?o.call(c,_,l("m")):d(u("m",_.month(),2))},v=function(_,S){return S?typeof s=="function"?s.call(c,_):s[_.month()-c.minMonth]:typeof i=="function"?i.call(c,_):i[_.month()-c.minMonth]},p=this.local.digits,d=function(_){return r.localNumbers&&p?p(_):_},g="",m=!1,y=0;y<e.length;y++)if(m)e.charAt(y)==="'"&&!l("'")?m=!1:g+=e.charAt(y);else switch(e.charAt(y)){case"d":g+=d(u("d",t.day(),2));break;case"D":g+=f("D",t.dayOfWeek(),a,n);break;case"o":g+=u("o",t.dayOfYear(),3);break;case"w":g+=u("w",t.weekOfYear(),2);break;case"m":g+=h(t);break;case"M":g+=v(t,l("M"));break;case"y":g+=l("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":l("Y",2),g+=t.formatYear();break;case"J":g+=t.toJD();break;case"@":g+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?g+="'":m=!0;break;default:g+=e.charAt(y)}return g},parseDate:function(e,t,r){if(t==null)throw gu.local.invalidArguments||gu.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var a=r.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var n=r.dayNamesShort||this.local.dayNamesShort,o=r.dayNames||this.local.dayNames,i=r.parseMonth||this.local.parseMonth,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,u=r.monthNames||this.local.monthNames,f=-1,c=-1,h=-1,v=-1,p=-1,d=!1,g=!1,m=function(I,R){for(var B=1;T+B<e.length&&e.charAt(T+B)===I;)B++;return T+=B-1,Math.floor(B/(R||1))>1},y=function(I,R){var B=m(I,R),N=[2,3,B?4:2,B?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],D=new RegExp("^-?\\d{1,"+N+"}"),O=t.substring(k).match(D);if(!O)throw(gu.local.missingNumberAt||gu.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=O[0].length,parseInt(O[0],10)},_=this,S=function(){if(typeof s=="function"){m("m");var I=s.call(_,t.substring(k));return k+=I.length,I}return y("m")},M=function(I,R,B,N){for(var D=m(I,N)?B:R,O=0;O<D.length;O++)if(t.substr(k,D[O].length).toLowerCase()===D[O].toLowerCase())return k+=D[O].length,O+_.minMonth;throw(gu.local.unknownNameAt||gu.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},w=function(){if(typeof u=="function"){var I=m("M")?u.call(_,t.substring(k)):l.call(_,t.substring(k));return k+=I.length,I}return M("M",l,u)},A=function(){if(t.charAt(k)!==e.charAt(T))throw(gu.local.unexpectedLiteralAt||gu.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,T=0;T<e.length;T++)if(g)e.charAt(T)==="'"&&!m("'")?g=!1:A();else switch(e.charAt(T)){case"d":v=y("d");break;case"D":M("D",n,o);break;case"o":p=y("o");break;case"w":y("w");break;case"m":h=S();break;case"M":h=w();break;case"y":var L=T;d=!m("y",2),T=L,c=y("y",2);break;case"Y":c=y("Y",2);break;case"J":f=y("J")+.5,t.charAt(k)==="."&&(k++,y("J"));break;case"@":f=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=t.length;break;case"'":m("'")?A():g=!0;break;default:A()}if(k<t.length)throw gu.local.unexpectedText||gu.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&d&&(c+=a===-1?1900:this.today().year()-this.today().year()%100-(c<=a?0:100)),typeof h=="string"&&(h=i.call(this,c,h)),p>-1){h=1,v=p;for(var C=this.daysInMonth(c,h);v>C;C=this.daysInMonth(c,h))h++,v-=C}return f>-1?this.fromJD(f):this.newDate(c,h,v)},determineDate:function(e,t,r,a,n){r&&typeof r!="object"&&(n=a,a=r,r=null),typeof a!="string"&&(n=a,a="");var o=this,i=function(s){try{return o.parseDate(a,s,n)}catch{}s=s.toLowerCase();for(var l=(s.match(/^c/)&&r?r.newDate():null)||o.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=u.exec(s);f;)l.add(parseInt(f[1],10),f[2]||"d"),f=u.exec(s);return l};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?i(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:o.today().add(e,"d"):o.newDate(e),e}});var k1=af.exports,zEt=Rl,pV=k1.instance();function jD(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}jD.prototype=new k1.baseCalendar;zEt(jD.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(OEt);return r?r[0]:""}var a=this._validateYear(e),n=e.month(),o=""+this.toChineseMonth(a,n);return t&&o.length<2&&(o="0"+o),this.isIntercalaryMonth(a,n)&&(o+="i"),o},monthNames:function(e){if(typeof e=="string"){var t=e.match(NEt);return t?t[0]:""}var r=this._validateYear(e),a=e.month(),n=this.toChineseMonth(r,a),o=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][n-1];return this.isIntercalaryMonth(r,a)&&(o="\u95F0"+o),o},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(BEt);return t?t[0]:""}var r=this._validateYear(e),a=e.month(),n=this.toChineseMonth(r,a),o=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][n-1];return this.isIntercalaryMonth(r,a)&&(o="\u95F0"+o),o},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),a;if(isNaN(r))t[0]==="\u95F0"&&(a=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var n=t[t.length-1];a=n==="i"||n==="I"}var o=this.toMonthIndex(e,r,a);return o},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var a=this.intercalaryMonth(e),n=r&&t!==a;if(n||t<1||t>12)throw k1.local.invalidMonth.replace(/\{0\}/,this.local.name);var o;return a?!r&&t<=a?o=t-1:o=t:o=t-1,o},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),a=r?12:11;if(t<0||t>a)throw k1.local.invalidMonth.replace(/\{0\}/,this.local.name);var n;return r?t<r?n=t+1:n=t:n=t+1,n},intercalaryMonth:function(e){e=this._validateYear(e);var t=E1[e-E1[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var a=this._validateYear(e,k1.local.invalidyear),n=C1[a-C1[0]],o=n>>9&4095,i=n>>5&15,s=n&31,l;l=pV.newDate(o,i,s),l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=E1[e-E1[0]],a=r>>13,n=a?12:11;if(t>n)throw k1.local.invalidMonth.replace(/\{0\}/,this.local.name);var o=r&1<<12-t?30:29;return o},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,o,r,k1.local.invalidDate);e=this._validateYear(a.year()),t=a.month(),r=a.day();var n=this.isIntercalaryMonth(e,t),o=this.toChineseMonth(e,t),i=UEt(e,o,r,n);return pV.toJD(i.year,i.month,i.day)},fromJD:function(e){var t=pV.fromJD(e),r=$Et(t.year(),t.month(),t.day()),a=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,a,r.day)},fromString:function(e){var t=e.match(FEt),r=this._validateYear(+t[1]),a=+t[2],n=!!t[3],o=this.toMonthIndex(r,a,n),i=+t[4];return this.newDate(r,o,i)},add:function(e,t,r){var a=e.year(),n=e.month(),o=this.isIntercalaryMonth(a,n),i=this.toChineseMonth(a,n),s=Object.getPrototypeOf(jD.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year(),u=s.month(),f=this.isIntercalaryMonth(l,i),c=o&&f?this.toMonthIndex(l,i,!0):this.toMonthIndex(l,i,!1);c!==u&&s.month(c)}return s}});var FEt=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,OEt=/^\d?\d[iI]?/m,NEt=/^??[]?/m,BEt=/^??[]?/m;k1.calendars.chinese=jD;var E1=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],C1=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function $Et(e,t,r,a){var n,o;if(typeof e=="object")n=e,o=t||{};else{var i=typeof e=="number"&&e>=1888&&e<=2111;if(!i)throw new Error("Solar year outside range 1888-2111");var s=typeof t=="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r=="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r},o=a||{}}var u=C1[n.year-C1[0]],f=n.year<<9|n.month<<5|n.day;o.year=f>=u?n.year:n.year-1,u=C1[o.year-C1[0]];var c=u>>9&4095,h=u>>5&15,v=u&31,p,d=new Date(c,h-1,v),g=new Date(n.year,n.month-1,n.day);p=Math.round((g-d)/(24*3600*1e3));var m=E1[o.year-E1[0]],y;for(y=0;y<13;y++){var _=m&1<<12-y?30:29;if(p<_)break;p-=_}var S=m>>13;return!S||y<S?(o.isIntercalary=!1,o.month=1+y):y===S?(o.isIntercalary=!0,o.month=y):(o.isIntercalary=!1,o.month=y),o.day=1+p,o}function UEt(e,t,r,a,n){var o,i;if(typeof e=="object")i=e,o=t||{};else{var s=typeof e=="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t=="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r=="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var f;typeof a=="object"?(f=!1,o=a):(f=!!a,o=n||{}),i={year:e,month:t,day:r,isIntercalary:f}}var c;c=i.day-1;var h=E1[i.year-E1[0]],v=h>>13,p;v&&(i.month>v||i.isIntercalary)?p=i.month:p=i.month-1;for(var d=0;d<p;d++){var g=h&1<<12-d?30:29;c+=g}var m=C1[i.year-C1[0]],y=m>>9&4095,_=m>>5&15,S=m&31,M=new Date(y,_-1,S+c);return o.year=M.getFullYear(),o.month=1+M.getMonth(),o.day=M.getDate(),o}var Db=af.exports,HEt=Rl;function gV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}gV.prototype=new Db.baseCalendar;HEt(gV.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Db.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Db.local.invalidYear||Db.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Db.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,Db.local.invalidDate);return e=a.year(),e<0&&e++,a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1,n=t-(a-1)*30+1;return this.newDate(r,a,n)}});Db.calendars.coptic=gV;var km=af.exports,GEt=Rl;function mV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}mV.prototype=new km.baseCalendar;GEt(mV.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,km.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,km.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,km.local.invalidYear),400},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,km.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,km.local.invalidDate);return(a.day()+1)%8},weekDay:function(e,t,r){var a=this.dayOfWeek(e,t,r);return a>=2&&a<=6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,km.local.invalidDate);return{century:VEt[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,t,r){var a=this._validate(e,t,r,km.local.invalidDate);return e=a.year()+(a.year()<0?1:0),t=a.month(),r=a.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,a=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,a)}});var VEt={20:"Fruitbat",21:"Anchovy"};km.calendars.discworld=mV;var Rb=af.exports,jEt=Rl;function yV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}yV.prototype=new Rb.baseCalendar;jEt(yV.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Rb.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Rb.local.invalidYear||Rb.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Rb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,Rb.local.invalidDate);return e=a.year(),e<0&&e++,a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1,n=t-(a-1)*30+1;return this.newDate(r,a,n)}});Rb.calendars.ethiopian=yV;var L1=af.exports,qEt=Rl;function xV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}xV.prototype=new L1.baseCalendar;qEt(xV.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,L1.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,qD(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,L1.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,L1.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,L1.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&qD(this.daysInYear(e),10)===5?30:t===9&&qD(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,L1.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,t,r){var a=this._validate(e,t,r,L1.local.invalidDate);e=a.year(),t=a.month(),r=a.day();var n=e<=0?e+1:e,o=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var i=7;i<=this.monthsInYear(e);i++)o+=this.daysInMonth(e,i);for(var i=1;i<t;i++)o+=this.daysInMonth(e,i)}else for(var i=7;i<t;i++)o+=this.daysInMonth(e,i);return o},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,a=t*29+Math.floor(r/25920);return qD(3*(a+1),7)<3&&a++,a},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),a=this._delay1(e+1);return a-r==356?2:r-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});function qD(e,t){return e-t*Math.floor(e/t)}L1.calendars.hebrew=xV;var ok=af.exports,YEt=Rl;function bV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}bV.prototype=new ok.baseCalendar;YEt(bV.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ok.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ok.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,ok.local.invalidDate);return e=a.year(),t=a.month(),r=a.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});ok.calendars.islamic=bV;var sk=af.exports,WEt=Rl;function _V(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_V.prototype=new sk.baseCalendar;WEt(_V.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,sk.local.invalidYear),e=t.year()<0?t.year()+1:t.year();return e%4==0},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,sk.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,sk.local.invalidDate);return e=a.year(),t=a.month(),r=a.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,a=Math.floor((r-122.1)/365.25),n=Math.floor(365.25*a),o=Math.floor((r-n)/30.6001),i=o-Math.floor(o<14?1:13),s=a-Math.floor(i>2?4716:4715),l=r-n-Math.floor(30.6001*o);return s<=0&&s--,this.newDate(s,i,l)}});sk.calendars.julian=_V;var rd=af.exports,XEt=Rl;function wV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}wV.prototype=new rd.baseCalendar;XEt(wV.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,rd.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,rd.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var a=Math.floor(e/20);return r+"."+a+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var a=parseInt(e[r],10);if(Math.abs(a)>19||r>0&&a<0)throw"Invalid Mayan year";t=t*20+a}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,rd.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,rd.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,rd.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,rd.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,rd.local.invalidDate);return a.day()},weekDay:function(e,t,r){return this._validate(e,t,r,rd.local.invalidDate),!0},extraInfo:function(e,t,r){var a=this._validate(e,t,r,rd.local.invalidDate),n=a.toJD(),o=this._toHaab(n),i=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=TV(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,TV(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[H2e(e+20,20),H2e(e+4,13)]},toJD:function(e,t,r){var a=this._validate(e,t,r,rd.local.invalidDate);return a.day()+a.month()*20+a.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),a=e%20;return this.newDate(t,r,a)}});function TV(e,t){return e-t*Math.floor(e/t)}function H2e(e,t){return TV(e-1,t)+1}rd.calendars.mayan=wV;var zb=af.exports,ZEt=Rl;function AV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}AV.prototype=new zb.baseCalendar;var G2e=zb.instance("gregorian");ZEt(AV.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,zb.local.invalidYear||zb.regionalOptions[""].invalidYear);return G2e.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,zb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,zb.local.invalidMonth),e=a.year();e<0&&e++;for(var n=a.day(),o=1;o<a.month();o++)n+=this.daysPerMonth[o-1];return n+G2e.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,a=1;r>this.daysInMonth(t,a);)r-=this.daysInMonth(t,a),a++;return this.newDate(t,a,r)}});zb.calendars.nanakshahi=AV;var Fb=af.exports,KEt=Rl;function SV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}SV.prototype=new Fb.baseCalendar;KEt(SV.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Fb.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,a=this.minMonth;a<=12;a++)r+=this.NEPALI_CALENDAR_DATA[e][a];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,Fb.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var a=this._validate(e,t,r,Fb.local.invalidDate);e=a.year(),t=a.month(),r=a.day();var n=Fb.instance(),o=0,i=t,s=e;this._createMissingCalendarData(e);var l=e-(i>9||i===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(t!==9&&(o=r,i--);i!==9;)i<=0&&(i=12,s--),o+=this.NEPALI_CALENDAR_DATA[s][i],i--;return t===9?(o+=r-this.NEPALI_CALENDAR_DATA[s][0],o<0&&(o+=n.daysInYear(l))):o+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(l,1,1).add(o,"d").toJD()},fromJD:function(e){var t=Fb.instance(),r=t.fromJD(e),a=r.year(),n=r.dayOfYear(),o=a+56;this._createMissingCalendarData(o);for(var i=9,s=this.NEPALI_CALENDAR_DATA[o][0],l=this.NEPALI_CALENDAR_DATA[o][i]-s+1;n>l;)i++,i>12&&(i=1,o++),l+=this.NEPALI_CALENDAR_DATA[o][i];var u=this.NEPALI_CALENDAR_DATA[o][i]-(l-n);return this.newDate(o,i,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});Fb.calendars.nepali=SV;var b3=af.exports,JEt=Rl;function YD(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}YD.prototype=new b3.baseCalendar;JEt(YD.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,b3.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-((a.dayOfWeek()+1)%7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,b3.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,b3.local.invalidDate);e=a.year(),t=a.month(),r=a.day();var n=e-(e>=0?474:473),o=474+MV(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((o*682-110)/2816)+(o-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),a=MV(t,1029983),n=2820;if(a!==1029982){var o=Math.floor(a/366),i=MV(a,366);n=Math.floor((2134*o+2816*i+2815)/1028522)+o+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=e-this.toJD(s,u,1)+1;return this.newDate(s,u,f)}});function MV(e,t){return e-t*Math.floor(e/t)}b3.calendars.persian=YD;b3.calendars.jalali=YD;var Ob=af.exports,QEt=Rl,WD=Ob.instance();function kV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}kV.prototype=new Ob.baseCalendar;QEt(kV.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Ob.local.invalidYear),e=this._t2gYear(t.year());return WD.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,Ob.local.invalidYear),e=this._t2gYear(a.year());return WD.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Ob.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,Ob.local.invalidDate),e=this._t2gYear(a.year());return WD.toJD(e,a.month(),a.day())},fromJD:function(e){var t=WD.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});Ob.calendars.taiwan=kV;var Nb=af.exports,eCt=Rl,XD=Nb.instance();function EV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}EV.prototype=new Nb.baseCalendar;eCt(EV.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Nb.local.invalidYear),e=this._t2gYear(t.year());return XD.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,Nb.local.invalidYear),e=this._t2gYear(a.year());return XD.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Nb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,Nb.local.invalidDate),e=this._t2gYear(a.year());return XD.toJD(e,a.month(),a.day())},fromJD:function(e){var t=XD.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});Nb.calendars.thai=EV;var Bb=af.exports,tCt=Rl;function CV(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}CV.prototype=new Bb.baseCalendar;tCt(CV.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Bb.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,Bb.local.invalidMonth),a=r.toJD()-24e5+.5,n=0,o=0;o<P1.length;o++){if(P1[o]>a)return P1[n]-P1[n-1];n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,Bb.local.invalidDate),n=12*(a.year()-1)+a.month()-15292,o=a.day()+P1[n-1]-1;return o+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,a=0;a<P1.length&&!(P1[a]>t);a++)r++;var n=r+15292,o=Math.floor((n-1)/12),i=o+1,s=n-12*o,l=t-P1[r-1]+1;return this.newDate(i,s,l)},isValid:function(e,t,r){var a=Bb.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(e=e.year!=null?e.year:e,a=e>=1276&&e<=1500),a},_validate:function(e,t,r,a){var n=Bb.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw a.replace(/\{0\}/,this.local.name);return n}});Bb.calendars.ummalqura=CV;var P1=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],rCt=af.exports,V2e=rCt,lk=bt.exports,j2e=Un,aCt=j2e.EPOCHJD,nCt=j2e.ONEDAY,LV={valType:"enumerated",values:lk.sortObjectKeys(V2e.calendars),editType:"calc",dflt:"gregorian"},q2e=function(e,t,r,a){var n={};return n[r]=LV,lk.coerce(e,t,n,r,a)},iCt=function(e,t,r,a){for(var n=0;n<r.length;n++)q2e(e,t,r[n]+"calendar",a.calendar)},oCt={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},sCt={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},lCt={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},ZD="##",uCt={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:ZD,w:ZD,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function fCt(e,t,r){for(var a=Math.floor((t+.05)/nCt)+aCt,n=W2e(r).fromJD(a),o=0,i,s,l,u,f;(o=e.indexOf("%",o))!==-1;)i=e.charAt(o+1),i==="0"||i==="-"||i==="_"?(l=3,s=e.charAt(o+2),i==="_"&&(i="-")):(s=i,i="0",l=2),u=uCt[s],u?(u===ZD?f=ZD:f=n.formatDate(u[i]),e=e.substr(0,o)+f+e.substr(o+l),o+=f.length):o+=l;return e}var Y2e={};function W2e(e){var t=Y2e[e];return t||(t=Y2e[e]=V2e.instance(e),t)}function $b(e){return lk.extendFlat({},LV,{description:e})}function PV(e){return"Sets the calendar system to use with `"+e+"` date data."}var IV={xcalendar:$b(PV("x"))},F0=lk.extendFlat({},IV,{ycalendar:$b(PV("y"))}),DV=lk.extendFlat({},F0,{zcalendar:$b(PV("z"))}),_3=$b(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" ")),cCt={moduleType:"component",name:"calendars",schema:{traces:{scatter:F0,bar:F0,box:F0,heatmap:F0,contour:F0,histogram:F0,histogram2d:F0,histogram2dcontour:F0,scatter3d:DV,surface:DV,mesh3d:DV,scattergl:F0,ohlc:IV,candlestick:IV},layout:{calendar:$b(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_3},yaxis:{calendar:_3},scene:{xaxis:{calendar:_3},yaxis:{calendar:_3},zaxis:{calendar:_3}},polar:{radialaxis:{calendar:_3}}},transforms:{filter:{valuecalendar:$b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:$b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:LV,handleDefaults:q2e,handleTraceDefaults:iCt,CANONICAL_SUNDAY:sCt,CANONICAL_TICK:oCt,DFLTRANGE:lCt,getCal:W2e,worldCalFmt:fCt},hCt=cCt,X2e=Z9e;X2e.register([ABe,t$e,aUe,xUe,zUe,dHe,EHe,RGe,nVe,HVe,Eje,MYe,hWe,pZe,oKe,NKe,xJe,Det,stt,Ctt,qtt,urt,Prt,Yrt,iut,Put,W0t,Qgt,Vmt,syt,A1t,Axt,$bt,t_t,w_t,e3t,L3t,dTt,gAt,GAt,wSt,WSt,oMt,kkt,r5t,E5t,TEt,PEt,IEt,DEt,REt,hCt]);var ACt=X2e;export{Rg as F,TCt as P,Bq as a,lSe as b,mCt as c,pCt as d,yCt as e,gCt as f,nSe as g,xCt as h,$p as i,wCt as j,ACt as l,_6 as n,rSe as o,bCt as r,dCt as t,_Ct as w};
